GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 1


   1               		.file	"main.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.stabs	"/Users/meh/_avrProjects/LCDdirectLVDS/67-pwm161/",100,0,2,.Ltext0
   8               		.stabs	"main.c",100,0,2,.Ltext0
   9               		.text
  10               	.Ltext0:
  11               		.stabs	"gcc2_compiled.",60,0,0,0
  12               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,0,0
  13               		.stabs	"char:t(0,2)=@s8;r(0,2);0;255;",128,0,0,0
  14               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,0,0
  15               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,0,0
  16               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,0,0
  17               		.stabs	"long long int:t(0,6)=@s64;r(0,6);01000000000000000000000;0777777777777777777777;",128,0,0,
  18               		.stabs	"long long unsigned int:t(0,7)=@s64;r(0,7);0;01777777777777777777777;",128,0,0,0
  19               		.stabs	"short int:t(0,8)=r(0,8);-32768;32767;",128,0,0,0
  20               		.stabs	"short unsigned int:t(0,9)=r(0,9);0;0177777;",128,0,0,0
  21               		.stabs	"signed char:t(0,10)=@s8;r(0,10);-128;127;",128,0,0,0
  22               		.stabs	"unsigned char:t(0,11)=@s8;r(0,11);0;255;",128,0,0,0
  23               		.stabs	"float:t(0,12)=r(0,1);4;0;",128,0,0,0
  24               		.stabs	"double:t(0,13)=r(0,1);4;0;",128,0,0,0
  25               		.stabs	"long double:t(0,14)=r(0,1);4;0;",128,0,0,0
  26               		.stabs	"short _Fract:t(0,15)=r(0,1);1;0;",128,0,0,0
  27               		.stabs	"_Fract:t(0,16)=r(0,1);2;0;",128,0,0,0
  28               		.stabs	"long _Fract:t(0,17)=r(0,1);4;0;",128,0,0,0
  29               		.stabs	"long long _Fract:t(0,18)=r(0,1);8;0;",128,0,0,0
  30               		.stabs	"unsigned short _Fract:t(0,19)=r(0,1);1;0;",128,0,0,0
  31               		.stabs	"unsigned _Fract:t(0,20)=r(0,1);2;0;",128,0,0,0
  32               		.stabs	"unsigned long _Fract:t(0,21)=r(0,1);4;0;",128,0,0,0
  33               		.stabs	"unsigned long long _Fract:t(0,22)=r(0,1);8;0;",128,0,0,0
  34               		.stabs	"_Sat short _Fract:t(0,23)=r(0,1);1;0;",128,0,0,0
  35               		.stabs	"_Sat _Fract:t(0,24)=r(0,1);2;0;",128,0,0,0
  36               		.stabs	"_Sat long _Fract:t(0,25)=r(0,1);4;0;",128,0,0,0
  37               		.stabs	"_Sat long long _Fract:t(0,26)=r(0,1);8;0;",128,0,0,0
  38               		.stabs	"_Sat unsigned short _Fract:t(0,27)=r(0,1);1;0;",128,0,0,0
  39               		.stabs	"_Sat unsigned _Fract:t(0,28)=r(0,1);2;0;",128,0,0,0
  40               		.stabs	"_Sat unsigned long _Fract:t(0,29)=r(0,1);4;0;",128,0,0,0
  41               		.stabs	"_Sat unsigned long long _Fract:t(0,30)=r(0,1);8;0;",128,0,0,0
  42               		.stabs	"short _Accum:t(0,31)=r(0,1);2;0;",128,0,0,0
  43               		.stabs	"_Accum:t(0,32)=r(0,1);4;0;",128,0,0,0
  44               		.stabs	"long _Accum:t(0,33)=r(0,1);8;0;",128,0,0,0
  45               		.stabs	"long long _Accum:t(0,34)=r(0,1);8;0;",128,0,0,0
  46               		.stabs	"unsigned short _Accum:t(0,35)=r(0,1);2;0;",128,0,0,0
  47               		.stabs	"unsigned _Accum:t(0,36)=r(0,1);4;0;",128,0,0,0
  48               		.stabs	"unsigned long _Accum:t(0,37)=r(0,1);8;0;",128,0,0,0
  49               		.stabs	"unsigned long long _Accum:t(0,38)=r(0,1);8;0;",128,0,0,0
  50               		.stabs	"_Sat short _Accum:t(0,39)=r(0,1);2;0;",128,0,0,0
  51               		.stabs	"_Sat _Accum:t(0,40)=r(0,1);4;0;",128,0,0,0
  52               		.stabs	"_Sat long _Accum:t(0,41)=r(0,1);8;0;",128,0,0,0
  53               		.stabs	"_Sat long long _Accum:t(0,42)=r(0,1);8;0;",128,0,0,0
  54               		.stabs	"_Sat unsigned short _Accum:t(0,43)=r(0,1);2;0;",128,0,0,0
  55               		.stabs	"_Sat unsigned _Accum:t(0,44)=r(0,1);4;0;",128,0,0,0
  56               		.stabs	"_Sat unsigned long _Accum:t(0,45)=r(0,1);8;0;",128,0,0,0
  57               		.stabs	"_Sat unsigned long long _Accum:t(0,46)=r(0,1);8;0;",128,0,0,0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 2


  58               		.stabs	"void:t(0,47)=(0,47)",128,0,0,0
  59               		.stabs	"projInfo.h",130,0,0,0
  60               		.stabs	"/opt/local/avr/include/inttypes.h",130,0,0,0
  61               		.stabs	"/opt/local/lib/gcc/avr/4.8.2/include/stdint.h",130,0,0,0
  62               		.stabs	"/opt/local/avr/include/stdint.h",130,0,0,0
  63               		.stabs	"int8_t:t(4,1)=(0,10)",128,0,121,0
  64               		.stabs	"uint8_t:t(4,2)=(0,11)",128,0,122,0
  65               		.stabs	"int16_t:t(4,3)=(0,1)",128,0,123,0
  66               		.stabs	"uint16_t:t(4,4)=(0,4)",128,0,124,0
  67               		.stabs	"int32_t:t(4,5)=(0,3)",128,0,125,0
  68               		.stabs	"uint32_t:t(4,6)=(0,5)",128,0,126,0
  69               		.stabs	"int64_t:t(4,7)=(0,6)",128,0,128,0
  70               		.stabs	"uint64_t:t(4,8)=(0,7)",128,0,129,0
  71               		.stabs	"intptr_t:t(4,9)=(4,3)",128,0,142,0
  72               		.stabs	"uintptr_t:t(4,10)=(4,4)",128,0,147,0
  73               		.stabs	"int_least8_t:t(4,11)=(4,1)",128,0,159,0
  74               		.stabs	"uint_least8_t:t(4,12)=(4,2)",128,0,164,0
  75               		.stabs	"int_least16_t:t(4,13)=(4,3)",128,0,169,0
  76               		.stabs	"uint_least16_t:t(4,14)=(4,4)",128,0,174,0
  77               		.stabs	"int_least32_t:t(4,15)=(4,5)",128,0,179,0
  78               		.stabs	"uint_least32_t:t(4,16)=(4,6)",128,0,184,0
  79               		.stabs	"int_least64_t:t(4,17)=(4,7)",128,0,192,0
  80               		.stabs	"uint_least64_t:t(4,18)=(4,8)",128,0,199,0
  81               		.stabs	"int_fast8_t:t(4,19)=(4,1)",128,0,213,0
  82               		.stabs	"uint_fast8_t:t(4,20)=(4,2)",128,0,218,0
  83               		.stabs	"int_fast16_t:t(4,21)=(4,3)",128,0,223,0
  84               		.stabs	"uint_fast16_t:t(4,22)=(4,4)",128,0,228,0
  85               		.stabs	"int_fast32_t:t(4,23)=(4,5)",128,0,233,0
  86               		.stabs	"uint_fast32_t:t(4,24)=(4,6)",128,0,238,0
  87               		.stabs	"int_fast64_t:t(4,25)=(4,7)",128,0,246,0
  88               		.stabs	"uint_fast64_t:t(4,26)=(4,8)",128,0,253,0
  89               		.stabs	"intmax_t:t(4,27)=(4,7)",128,0,273,0
  90               		.stabs	"uintmax_t:t(4,28)=(4,8)",128,0,278,0
  91               		.stabn	162,0,0,0
  92               		.stabn	162,0,0,0
  93               		.stabs	"int_farptr_t:t(2,1)=(4,5)",128,0,77,0
  94               		.stabs	"uint_farptr_t:t(2,2)=(4,6)",128,0,81,0
  95               		.stabn	162,0,0,0
  96               		.stabn	162,0,0,0
  97               		.stabs	"main.h",130,0,0,0
  98               		.stabs	"/opt/local/avr/include/avr/io.h",130,0,0,0
  99               		.stabs	"/opt/local/avr/include/avr/fuse.h",130,0,0,0
 100               		.stabs	"__fuse_t:t(7,1)=(7,2)=s3low:(0,11),0,8;high:(0,11),8,8;extended:(0,11),16,8;;",128,0,244,0
 101               		.stabn	162,0,0,0
 102               		.stabn	162,0,0,0
 103               		.stabs	"/opt/local/avr/include/stdlib.h",130,0,0,0
 104               		.stabs	"/opt/local/lib/gcc/avr/4.8.2/include/stddef.h",130,0,0,0
 105               		.stabs	"size_t:t(9,1)=(0,4)",128,0,212,0
 106               		.stabs	"wchar_t:t(9,2)=(0,1)",128,0,324,0
 107               		.stabn	162,0,0,0
 108               		.stabs	"div_t:t(8,1)=(8,2)=s4quot:(0,1),0,16;rem:(0,1),16,16;;",128,0,71,0
 109               		.stabs	"ldiv_t:t(8,3)=(8,4)=s8quot:(0,3),0,32;rem:(0,3),32,32;;",128,0,77,0
 110               		.stabs	"__compar_fn_t:t(8,5)=(8,6)=*(8,7)=f(0,1)",128,0,80,0
 111               		.stabn	162,0,0,0
 112               		.stabs	"_commonCode_localized/heartbeat/1.30/heartbeat.h",130,0,0,0
 113               		.stabs	"./_commonCode_localized/hfModulation/1.00/hfModulation.h",130,0,0,0
 114               		.stabs	"hfm_t:t(11,1)=(11,2)=B(11,3)=s4desiredSum:(4,3),0,16;maxPower:(4,2),16,8;power:(4,2),24,8;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 3


 115               		.stabn	162,0,0,0
 116               		.stabn	162,0,0,0
 117               		.stabn	162,0,0,0
 118               		.stabs	"/opt/local/avr/include/avr/pgmspace.h",130,0,0,0
 119               		.stabs	"prog_void:t(12,1)=(12,2)=(12,2)",128,0,349,0
 120               		.stabs	"prog_char:t(12,3)=(12,4)=@s8;r(12,4);0;255;",128,0,350,0
 121               		.stabs	"prog_uchar:t(12,5)=(12,6)=@s8;r(12,6);0;255;",128,0,351,0
 122               		.stabs	"prog_int8_t:t(12,7)=(12,8)=(0,10)",128,0,352,0
 123               		.stabs	"prog_uint8_t:t(12,9)=(12,10)=(0,11)",128,0,353,0
 124               		.stabs	"prog_int16_t:t(12,11)=(12,12)=(0,1)",128,0,354,0
 125               		.stabs	"prog_uint16_t:t(12,13)=(12,14)=(0,4)",128,0,355,0
 126               		.stabs	"prog_int32_t:t(12,15)=(12,16)=(0,3)",128,0,356,0
 127               		.stabs	"prog_uint32_t:t(12,17)=(12,18)=(0,5)",128,0,357,0
 128               		.stabs	"prog_int64_t:t(12,19)=(12,20)=(0,6)",128,0,359,0
 129               		.stabs	"prog_uint64_t:t(12,21)=(12,22)=(0,7)",128,0,360,0
 130               		.stabn	162,0,0,0
 131               		.stabs	"_commonCode_localized/sineTable/0.99/sineTable.h",130,0,0,0
 132               		.stabs	"theta_t:t(13,1)=(4,3)",128,0,89,0
 133               		.stabs	"sine_t:t(13,2)=(4,3)",128,0,116,0
 134               		.stabs	"mult_t:t(13,3)=(4,5)",128,0,119,0
 135               		.stabs	"axis_t:t(13,4)=(4,5)",128,0,136,0
 136               		.stabn	162,0,0,0
 137               		.stabs	"fb_question.c",130,0,0,0
 138               		.stabs	"icons/Question.h",130,0,0,0
 139               		.stabs	"icons/iconPacking.h",130,0,0,0
 140               		.stabs	"_BLAH_SHROOM_:T(16,1)=s7p_image:(16,2)=*(16,3)=k(4,2),0,16;p_mask:(16,2),16,16;p_palette:(
 141               		.stabs	"sprite_t:t(16,4)=(16,1)",128,0,43,0
 142               		.stabn	162,0,0,0
 143               		.stabn	162,0,0,0
 144               		.stabn	162,0,0,0
 145               	/* #APP */
 146               		.macro delayCycs_asmInit instanceName 
 147               		dc_asm_init_\instanceName\(): 
 148               		clz ; 
 149               		dc_asm_init_exit_\instanceName\(): 
 150               		.endm 
 151               		
 152               		.macro delayCycs instanceName 
 153               		delayCycs_\instanceName\(): 
 154               		ijmp ; 
 155               		dc_loop_\instanceName\():	
 156               		subi r16, 3		; 
 157               		brge dc_loop_\instanceName	; 
 158               		dc_loopRemainder_\instanceName\(): 
 159               		cpi r16, -3		; 
 160               		breq dc_done1_\instanceName	; 
 161               		cpi r16, -2		; 
 162               		breq dc_done_\instanceName	; 
 163               		nop				; 
 164               		dc_done1_\instanceName\():		
 165               		nop				; 
 166               		dc_done_\instanceName\():	
 167               		.endm 
 168               		
 169               	/* #NOAPP */
 170               		.stabs	"pll_enable:F(0,47)",36,0,48,pll_enable
 171               	.global	pll_enable
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 4


 172               		.type	pll_enable, @function
 173               	pll_enable:
 174               		.stabd	46,0,0
 175               		.stabs	"pll.c",132,0,0,.Ltext1
 176               	.Ltext1:
   1:pll.c         **** /* mehPL:
   2:pll.c         ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:pll.c         ****  *    I'm not too fond of long licenses at the top of the file.
   4:pll.c         ****  *    Please see the bottom.
   5:pll.c         ****  *    Enjoy!
   6:pll.c         ****  */
   7:pll.c         **** 
   8:pll.c         **** #if(defined(__AVR_AT90PWM161__))
   9:pll.c         **** //PWM161 notes:
  10:pll.c         **** // The PWM161 has a PLL Multiplication-Factor which can be adjusted
  11:pll.c         **** //  4-8x the source-clock, with every step between
  12:pll.c         **** //  This could be AWESOME for LVDS, with a multiplcation-factor of 7...?
  13:pll.c         **** // "When Vcc is below 4.5V, maximum PLL-factor is 6"
  14:pll.c         **** //  we'll see. Best stick with 8 for now, since all the math relies on it.
  15:pll.c         **** //  But look here if it doesn't seem to be syncing...
  16:pll.c         **** #warning "PLL_MULT_FACTOR defaults to 8, which is allegedly too fast for 3.3V"
  17:pll.c         **** #define PLL_MULT_FACTOR	8
  18:pll.c         **** // "PLLF3 is used for debug purpose", its value is always 0
  19:pll.c         **** // The PLLF3:0 bits are used to set the multiplication-factor
  20:pll.c         **** //  They're shifted two bits left
  21:pll.c         **** //  And 2 is added to the value written to these bits to determine the
  22:pll.c         **** //  multiplication-factor...
  23:pll.c         **** #define PLL_MULT_MASK	(0x07<<2)
  24:pll.c         **** 
  25:pll.c         **** #define pll_setMult(factor) \
  26:pll.c         **** 			writeMasked(((factor-2)<<2), PLL_MULT_MASK, PLLCSR)
  27:pll.c         **** 
  28:pll.c         **** 
  29:pll.c         **** // The pll_enable procedure isn't quite so clearly-defined...
  30:pll.c         **** //   there's no step-by-step procedure I've found so far.
  31:pll.c         **** //p271 Table 22-4 says the maximum PLL lock-in-time is 64us, so 100 should
  32:pll.c         **** //be fine.
  33:pll.c         **** 
  34:pll.c         **** #endif
  35:pll.c         **** 
  36:pll.c         **** 
  37:pll.c         **** //pll_enable does just what it says, using instructions from the ATtiny861
  38:pll.c         **** //   manual.
  39:pll.c         **** //   The PLL is used, in all cases, for the FPD-Link signals (generated by
  40:pll.c         **** //   Timer1's PWM). But, it may be prescaled back down to CPU-speeds or
  41:pll.c         **** //   even lower. Also, when PLL_SYSCLK is true, the PLL is actually used to
  42:pll.c         **** //   drive the CPU... I don't fully comprehend how this works, because the
  43:pll.c         **** //   pll_enable can't be called *before* the system boots... Anyways, It
  44:pll.c         **** //   seems to work, regardless, and calling pll_enable() in this mode
  45:pll.c         **** //   doesn't seem to cause any problems.
  46:pll.c         **** 
  47:pll.c         **** 
  48:pll.c         **** void pll_enable(void)
  49:pll.c         **** {
 177               		.stabn	68,0,49,.LM0-.LFBB1
 178               	.LM0:
 179               	.LFBB1:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 5


 180               	/* prologue: function */
 181               	/* frame size = 0 */
 182               	/* stack size = 0 */
 183               	.L__stack_usage = 0
  50:pll.c         **** #if(defined(__AVR_AT90PWM161__))
  51:pll.c         **** 	pll_setMult(PLL_MULT_FACTOR);
 184               		.stabn	68,0,51,.LM1-.LFBB1
 185               	.LM1:
 186 0000 8091 8700 		lds r24,135
 187 0004 837E      		andi r24,lo8(-29)
 188 0006 8861      		ori r24,lo8(24)
 189 0008 8093 8700 		sts 135,r24
  52:pll.c         **** #endif
  53:pll.c         ****    //Stolen from threePinIDer109t:
  54:pll.c         **** 
  55:pll.c         ****    //Set Timer1 to use the "asynchronous clock source" (PLL at 64MHz)
  56:pll.c         ****    // With phase-correct PWM (256 steps up, then back down) and CLKDIV1
  57:pll.c         ****    // this is 64MHz/512=125kHz
  58:pll.c         ****    // The benefit of such high PWM frequency is the low RC values necessary
  59:pll.c         ****    //  for filtering to DC.
  60:pll.c         **** 	// From the ATtiny861 manual:
  61:pll.c         **** 	// "To change Timer/Counter1 to the async mode follow this procedure"
  62:pll.c         ****    // 1: Enable the PLL
  63:pll.c         ****    setbit(PLLE, PLLCSR);
 190               		.stabn	68,0,63,.LM2-.LFBB1
 191               	.LM2:
 192 000c 8091 8700 		lds r24,135
 193 0010 8260      		ori r24,lo8(2)
 194 0012 8093 8700 		sts 135,r24
 195               	.LBB122:
 196               	.LBB123:
 197               		.stabs	"/opt/local/avr/include/util/delay.h",132,0,0,.Ltext2
 198               	.Ltext2:
   1:/opt/local/avr/include/util/delay.h **** /* Copyright (c) 2002, Marek Michalkiewicz
   2:/opt/local/avr/include/util/delay.h ****    Copyright (c) 2004,2005,2007 Joerg Wunsch
   3:/opt/local/avr/include/util/delay.h ****    Copyright (c) 2007  Florin-Viorel Petrov
   4:/opt/local/avr/include/util/delay.h ****    All rights reserved.
   5:/opt/local/avr/include/util/delay.h **** 
   6:/opt/local/avr/include/util/delay.h ****    Redistribution and use in source and binary forms, with or without
   7:/opt/local/avr/include/util/delay.h ****    modification, are permitted provided that the following conditions are met:
   8:/opt/local/avr/include/util/delay.h **** 
   9:/opt/local/avr/include/util/delay.h ****    * Redistributions of source code must retain the above copyright
  10:/opt/local/avr/include/util/delay.h ****      notice, this list of conditions and the following disclaimer.
  11:/opt/local/avr/include/util/delay.h **** 
  12:/opt/local/avr/include/util/delay.h ****    * Redistributions in binary form must reproduce the above copyright
  13:/opt/local/avr/include/util/delay.h ****      notice, this list of conditions and the following disclaimer in
  14:/opt/local/avr/include/util/delay.h ****      the documentation and/or other materials provided with the
  15:/opt/local/avr/include/util/delay.h ****      distribution.
  16:/opt/local/avr/include/util/delay.h **** 
  17:/opt/local/avr/include/util/delay.h ****    * Neither the name of the copyright holders nor the names of
  18:/opt/local/avr/include/util/delay.h ****      contributors may be used to endorse or promote products derived
  19:/opt/local/avr/include/util/delay.h ****      from this software without specific prior written permission.
  20:/opt/local/avr/include/util/delay.h **** 
  21:/opt/local/avr/include/util/delay.h ****   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  22:/opt/local/avr/include/util/delay.h ****   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  23:/opt/local/avr/include/util/delay.h ****   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  24:/opt/local/avr/include/util/delay.h ****   ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 6


  25:/opt/local/avr/include/util/delay.h ****   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  26:/opt/local/avr/include/util/delay.h ****   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  27:/opt/local/avr/include/util/delay.h ****   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  28:/opt/local/avr/include/util/delay.h ****   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  29:/opt/local/avr/include/util/delay.h ****   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  30:/opt/local/avr/include/util/delay.h ****   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  31:/opt/local/avr/include/util/delay.h ****   POSSIBILITY OF SUCH DAMAGE. */
  32:/opt/local/avr/include/util/delay.h **** 
  33:/opt/local/avr/include/util/delay.h **** /* $Id: delay.h.in 2385 2013-05-03 13:14:20Z joerg_wunsch $ */
  34:/opt/local/avr/include/util/delay.h **** 
  35:/opt/local/avr/include/util/delay.h **** #ifndef _UTIL_DELAY_H_
  36:/opt/local/avr/include/util/delay.h **** #define _UTIL_DELAY_H_ 1
  37:/opt/local/avr/include/util/delay.h **** 
  38:/opt/local/avr/include/util/delay.h **** #ifndef __HAS_DELAY_CYCLES
  39:/opt/local/avr/include/util/delay.h **** #define __HAS_DELAY_CYCLES 1
  40:/opt/local/avr/include/util/delay.h **** #endif
  41:/opt/local/avr/include/util/delay.h **** 
  42:/opt/local/avr/include/util/delay.h **** #include <inttypes.h>
  43:/opt/local/avr/include/util/delay.h **** #include <util/delay_basic.h>
  44:/opt/local/avr/include/util/delay.h **** #include <math.h>
  45:/opt/local/avr/include/util/delay.h **** 
  46:/opt/local/avr/include/util/delay.h **** /** \file */
  47:/opt/local/avr/include/util/delay.h **** /** \defgroup util_delay <util/delay.h>: Convenience functions for busy-wait delay loops
  48:/opt/local/avr/include/util/delay.h ****     \code
  49:/opt/local/avr/include/util/delay.h ****     #define F_CPU 1000000UL  // 1 MHz
  50:/opt/local/avr/include/util/delay.h ****     //#define F_CPU 14.7456E6
  51:/opt/local/avr/include/util/delay.h ****     #include <util/delay.h>
  52:/opt/local/avr/include/util/delay.h ****     \endcode
  53:/opt/local/avr/include/util/delay.h **** 
  54:/opt/local/avr/include/util/delay.h ****     \note As an alternative method, it is possible to pass the
  55:/opt/local/avr/include/util/delay.h ****     F_CPU macro down to the compiler from the Makefile.
  56:/opt/local/avr/include/util/delay.h ****     Obviously, in that case, no \c \#define statement should be
  57:/opt/local/avr/include/util/delay.h ****     used.
  58:/opt/local/avr/include/util/delay.h **** 
  59:/opt/local/avr/include/util/delay.h ****     The functions in this header file are wrappers around the basic
  60:/opt/local/avr/include/util/delay.h ****     busy-wait functions from <util/delay_basic.h>.  They are meant as
  61:/opt/local/avr/include/util/delay.h ****     convenience functions where actual time values can be specified
  62:/opt/local/avr/include/util/delay.h ****     rather than a number of cycles to wait for.  The idea behind is
  63:/opt/local/avr/include/util/delay.h ****     that compile-time constant expressions will be eliminated by
  64:/opt/local/avr/include/util/delay.h ****     compiler optimization so floating-point expressions can be used
  65:/opt/local/avr/include/util/delay.h ****     to calculate the number of delay cycles needed based on the CPU
  66:/opt/local/avr/include/util/delay.h ****     frequency passed by the macro F_CPU.
  67:/opt/local/avr/include/util/delay.h **** 
  68:/opt/local/avr/include/util/delay.h ****     \note In order for these functions to work as intended, compiler
  69:/opt/local/avr/include/util/delay.h ****     optimizations <em>must</em> be enabled, and the delay time
  70:/opt/local/avr/include/util/delay.h ****     <em>must</em> be an expression that is a known constant at
  71:/opt/local/avr/include/util/delay.h ****     compile-time.  If these requirements are not met, the resulting
  72:/opt/local/avr/include/util/delay.h ****     delay will be much longer (and basically unpredictable), and
  73:/opt/local/avr/include/util/delay.h ****     applications that otherwise do not use floating-point calculations
  74:/opt/local/avr/include/util/delay.h ****     will experience severe code bloat by the floating-point library
  75:/opt/local/avr/include/util/delay.h ****     routines linked into the application.
  76:/opt/local/avr/include/util/delay.h **** 
  77:/opt/local/avr/include/util/delay.h ****     The functions available allow the specification of microsecond, and
  78:/opt/local/avr/include/util/delay.h ****     millisecond delays directly, using the application-supplied macro
  79:/opt/local/avr/include/util/delay.h ****     F_CPU as the CPU clock frequency (in Hertz).
  80:/opt/local/avr/include/util/delay.h **** 
  81:/opt/local/avr/include/util/delay.h **** */
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 7


  82:/opt/local/avr/include/util/delay.h **** 
  83:/opt/local/avr/include/util/delay.h **** #if !defined(__DOXYGEN__)
  84:/opt/local/avr/include/util/delay.h **** static inline void _delay_us(double __us) __attribute__((always_inline));
  85:/opt/local/avr/include/util/delay.h **** static inline void _delay_ms(double __ms) __attribute__((always_inline));
  86:/opt/local/avr/include/util/delay.h **** #endif
  87:/opt/local/avr/include/util/delay.h **** 
  88:/opt/local/avr/include/util/delay.h **** #ifndef F_CPU
  89:/opt/local/avr/include/util/delay.h **** /* prevent compiler error by supplying a default */
  90:/opt/local/avr/include/util/delay.h **** # warning "F_CPU not defined for <util/delay.h>"
  91:/opt/local/avr/include/util/delay.h **** # define F_CPU 1000000UL
  92:/opt/local/avr/include/util/delay.h **** #endif
  93:/opt/local/avr/include/util/delay.h **** 
  94:/opt/local/avr/include/util/delay.h **** #ifndef __OPTIMIZE__
  95:/opt/local/avr/include/util/delay.h **** # warning "Compiler optimizations disabled; functions from <util/delay.h> won't work as designed"
  96:/opt/local/avr/include/util/delay.h **** #endif
  97:/opt/local/avr/include/util/delay.h **** 
  98:/opt/local/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
  99:/opt/local/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 100:/opt/local/avr/include/util/delay.h ****   __STDC_HOSTED__
 101:/opt/local/avr/include/util/delay.h **** #  include <math.h>
 102:/opt/local/avr/include/util/delay.h **** #endif
 103:/opt/local/avr/include/util/delay.h **** 
 104:/opt/local/avr/include/util/delay.h **** /**
 105:/opt/local/avr/include/util/delay.h ****    \ingroup util_delay
 106:/opt/local/avr/include/util/delay.h **** 
 107:/opt/local/avr/include/util/delay.h ****    Perform a delay of \c __ms milliseconds, using _delay_loop_2().
 108:/opt/local/avr/include/util/delay.h **** 
 109:/opt/local/avr/include/util/delay.h ****    The macro F_CPU is supposed to be defined to a
 110:/opt/local/avr/include/util/delay.h ****    constant defining the CPU clock frequency (in Hertz).
 111:/opt/local/avr/include/util/delay.h **** 
 112:/opt/local/avr/include/util/delay.h ****    The maximal possible delay is 262.14 ms / F_CPU in MHz.
 113:/opt/local/avr/include/util/delay.h **** 
 114:/opt/local/avr/include/util/delay.h ****    When the user request delay which exceed the maximum possible one,
 115:/opt/local/avr/include/util/delay.h ****    _delay_ms() provides a decreased resolution functionality. In this
 116:/opt/local/avr/include/util/delay.h ****    mode _delay_ms() will work with a resolution of 1/10 ms, providing
 117:/opt/local/avr/include/util/delay.h ****    delays up to 6.5535 seconds (independent from CPU frequency).  The
 118:/opt/local/avr/include/util/delay.h ****    user will not be informed about decreased resolution.
 119:/opt/local/avr/include/util/delay.h **** 
 120:/opt/local/avr/include/util/delay.h ****    If the avr-gcc toolchain has __builtin_avr_delay_cycles(unsigned long)
 121:/opt/local/avr/include/util/delay.h ****    support, maximal possible delay is 4294967.295 ms/ F_CPU in MHz. For
 122:/opt/local/avr/include/util/delay.h ****    values greater than the maximal possible delay, overflows results in
 123:/opt/local/avr/include/util/delay.h ****    no delay i.e., 0ms.
 124:/opt/local/avr/include/util/delay.h **** 
 125:/opt/local/avr/include/util/delay.h ****    Conversion of __us into clock cycles may not always result in integer.
 126:/opt/local/avr/include/util/delay.h ****    By default, the clock cycles rounded up to next integer. This ensures that
 127:/opt/local/avr/include/util/delay.h ****    the user gets atleast __us microseconds of delay.
 128:/opt/local/avr/include/util/delay.h **** 
 129:/opt/local/avr/include/util/delay.h ****    Alternatively, user can define __DELAY_ROUND_DOWN__ and __DELAY_ROUND_CLOSEST__
 130:/opt/local/avr/include/util/delay.h ****    to round down and round to closest integer.
 131:/opt/local/avr/include/util/delay.h **** 
 132:/opt/local/avr/include/util/delay.h ****    Note: The new implementation of _delay_ms(double __ms) with 
 133:/opt/local/avr/include/util/delay.h ****     __builtin_avr_delay_cycles(unsigned long) support is not backward compatible. 
 134:/opt/local/avr/include/util/delay.h ****    User can define __DELAY_BACKWARD_COMPATIBLE__ to get a backward compatible delay.
 135:/opt/local/avr/include/util/delay.h ****    Also, the backward compatible
 136:/opt/local/avr/include/util/delay.h ****    algorithm will be chosen if the code is compiled in a <em>freestanding
 137:/opt/local/avr/include/util/delay.h ****    environment</em> (GCC option \c -ffreestanding), as the math functions
 138:/opt/local/avr/include/util/delay.h ****    required for rounding are not available to the compiler then.
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 8


 139:/opt/local/avr/include/util/delay.h **** 
 140:/opt/local/avr/include/util/delay.h ****  */
 141:/opt/local/avr/include/util/delay.h **** void
 142:/opt/local/avr/include/util/delay.h **** _delay_ms(double __ms)
 143:/opt/local/avr/include/util/delay.h **** {
 144:/opt/local/avr/include/util/delay.h **** 	double __tmp ; 
 145:/opt/local/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 146:/opt/local/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 147:/opt/local/avr/include/util/delay.h ****   __STDC_HOSTED__
 148:/opt/local/avr/include/util/delay.h **** 	uint32_t __ticks_dc;
 149:/opt/local/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 150:/opt/local/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e3) * __ms;
 151:/opt/local/avr/include/util/delay.h **** 
 152:/opt/local/avr/include/util/delay.h **** 	#if defined(__DELAY_ROUND_DOWN__)
 153:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)fabs(__tmp);
 154:/opt/local/avr/include/util/delay.h **** 
 155:/opt/local/avr/include/util/delay.h **** 	#elif defined(__DELAY_ROUND_CLOSEST__)
 156:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(fabs(__tmp)+0.5);
 157:/opt/local/avr/include/util/delay.h **** 
 158:/opt/local/avr/include/util/delay.h **** 	#else
 159:/opt/local/avr/include/util/delay.h **** 		//round up by default
 160:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(ceil(fabs(__tmp)));
 161:/opt/local/avr/include/util/delay.h **** 	#endif
 162:/opt/local/avr/include/util/delay.h **** 
 163:/opt/local/avr/include/util/delay.h **** 	__builtin_avr_delay_cycles(__ticks_dc);
 164:/opt/local/avr/include/util/delay.h **** 
 165:/opt/local/avr/include/util/delay.h **** #else
 166:/opt/local/avr/include/util/delay.h **** 	uint16_t __ticks;
 167:/opt/local/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 4e3) * __ms;
 168:/opt/local/avr/include/util/delay.h **** 	if (__tmp < 1.0)
 169:/opt/local/avr/include/util/delay.h **** 		__ticks = 1;
 170:/opt/local/avr/include/util/delay.h **** 	else if (__tmp > 65535)
 171:/opt/local/avr/include/util/delay.h **** 	{
 172:/opt/local/avr/include/util/delay.h **** 		//	__ticks = requested delay in 1/10 ms
 173:/opt/local/avr/include/util/delay.h **** 		__ticks = (uint16_t) (__ms * 10.0);
 174:/opt/local/avr/include/util/delay.h **** 		while(__ticks)
 175:/opt/local/avr/include/util/delay.h **** 		{
 176:/opt/local/avr/include/util/delay.h **** 			// wait 1/10 ms
 177:/opt/local/avr/include/util/delay.h **** 			_delay_loop_2(((F_CPU) / 4e3) / 10);
 178:/opt/local/avr/include/util/delay.h **** 			__ticks --;
 179:/opt/local/avr/include/util/delay.h **** 		}
 180:/opt/local/avr/include/util/delay.h **** 		return;
 181:/opt/local/avr/include/util/delay.h **** 	}
 182:/opt/local/avr/include/util/delay.h **** 	else
 183:/opt/local/avr/include/util/delay.h **** 		__ticks = (uint16_t)__tmp;
 184:/opt/local/avr/include/util/delay.h **** 	_delay_loop_2(__ticks);
 185:/opt/local/avr/include/util/delay.h **** #endif
 186:/opt/local/avr/include/util/delay.h **** }
 187:/opt/local/avr/include/util/delay.h **** 
 188:/opt/local/avr/include/util/delay.h **** /**
 189:/opt/local/avr/include/util/delay.h ****    \ingroup util_delay
 190:/opt/local/avr/include/util/delay.h **** 
 191:/opt/local/avr/include/util/delay.h ****    Perform a delay of \c __us microseconds, using _delay_loop_1().
 192:/opt/local/avr/include/util/delay.h **** 
 193:/opt/local/avr/include/util/delay.h ****    The macro F_CPU is supposed to be defined to a
 194:/opt/local/avr/include/util/delay.h ****    constant defining the CPU clock frequency (in Hertz).
 195:/opt/local/avr/include/util/delay.h **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 9


 196:/opt/local/avr/include/util/delay.h ****    The maximal possible delay is 768 us / F_CPU in MHz.
 197:/opt/local/avr/include/util/delay.h **** 
 198:/opt/local/avr/include/util/delay.h ****    If the user requests a delay greater than the maximal possible one,
 199:/opt/local/avr/include/util/delay.h ****    _delay_us() will automatically call _delay_ms() instead.  The user
 200:/opt/local/avr/include/util/delay.h ****    will not be informed about this case.
 201:/opt/local/avr/include/util/delay.h **** 
 202:/opt/local/avr/include/util/delay.h ****    If the avr-gcc toolchain has __builtin_avr_delay_cycles(unsigned long)
 203:/opt/local/avr/include/util/delay.h ****    support, maximal possible delay is 4294967.295 us/ F_CPU in MHz. For
 204:/opt/local/avr/include/util/delay.h ****    values greater than the maximal possible delay, overflow results in
 205:/opt/local/avr/include/util/delay.h ****    no delay i.e., 0us.
 206:/opt/local/avr/include/util/delay.h ****   
 207:/opt/local/avr/include/util/delay.h ****    Conversion of __us into clock cycles may not always result in integer.
 208:/opt/local/avr/include/util/delay.h ****    By default, the clock cycles rounded up to next integer. This ensures that
 209:/opt/local/avr/include/util/delay.h ****    the user gets atleast __us microseconds of delay.
 210:/opt/local/avr/include/util/delay.h **** 
 211:/opt/local/avr/include/util/delay.h ****    Alternatively, user can define __DELAY_ROUND_DOWN__ and __DELAY_ROUND_CLOSEST__
 212:/opt/local/avr/include/util/delay.h ****    to round down and round to closest integer.
 213:/opt/local/avr/include/util/delay.h ****  
 214:/opt/local/avr/include/util/delay.h ****    Note: The new implementation of _delay_us(double __us) with 
 215:/opt/local/avr/include/util/delay.h ****     __builtin_avr_delay_cycles(unsigned long) support is not backward compatible.
 216:/opt/local/avr/include/util/delay.h ****    User can define __DELAY_BACKWARD_COMPATIBLE__ to get a backward compatible delay.
 217:/opt/local/avr/include/util/delay.h ****    Also, the backward compatible
 218:/opt/local/avr/include/util/delay.h ****    algorithm will be chosen if the code is compiled in a <em>freestanding
 219:/opt/local/avr/include/util/delay.h ****    environment</em> (GCC option \c -ffreestanding), as the math functions
 220:/opt/local/avr/include/util/delay.h ****    required for rounding are not available to the compiler then.
 221:/opt/local/avr/include/util/delay.h **** 
 222:/opt/local/avr/include/util/delay.h ****  */
 223:/opt/local/avr/include/util/delay.h **** void
 224:/opt/local/avr/include/util/delay.h **** _delay_us(double __us)
 225:/opt/local/avr/include/util/delay.h **** {
 226:/opt/local/avr/include/util/delay.h **** 	double __tmp ; 
 227:/opt/local/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 228:/opt/local/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 229:/opt/local/avr/include/util/delay.h ****   __STDC_HOSTED__
 230:/opt/local/avr/include/util/delay.h **** 	uint32_t __ticks_dc;
 231:/opt/local/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 232:/opt/local/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 233:/opt/local/avr/include/util/delay.h **** 
 234:/opt/local/avr/include/util/delay.h **** 	#if defined(__DELAY_ROUND_DOWN__)
 235:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)fabs(__tmp);
 236:/opt/local/avr/include/util/delay.h **** 
 237:/opt/local/avr/include/util/delay.h **** 	#elif defined(__DELAY_ROUND_CLOSEST__)
 238:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(fabs(__tmp)+0.5);
 239:/opt/local/avr/include/util/delay.h **** 
 240:/opt/local/avr/include/util/delay.h **** 	#else
 241:/opt/local/avr/include/util/delay.h **** 		//round up by default
 242:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(ceil(fabs(__tmp)));
 243:/opt/local/avr/include/util/delay.h **** 	#endif
 244:/opt/local/avr/include/util/delay.h **** 
 245:/opt/local/avr/include/util/delay.h **** 	__builtin_avr_delay_cycles(__ticks_dc);
 199               		.stabn	68,0,245,.LM3-.LFBB1
 200               	.LM3:
 201 0016 8FE8      		ldi r24,lo8(399)
 202 0018 91E0      		ldi r25,hi8(399)
 203 001a 0197      		1: sbiw r24,1
 204 001c 01F4      		brne 1b
 205 001e 00C0      		rjmp .
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 10


 206 0020 0000      		nop
 207               	.L2:
 208               	.LBE123:
 209               	.LBE122:
 210               		.stabs	"pll.c",132,0,0,.Ltext3
 211               	.Ltext3:
  64:pll.c         ****    // 2: Wait 100us for the PLL to stabilize
  65:pll.c         ****    // (can't use dmsWait since the timer updating the dmsCount hasn't yet been started!)
  66:pll.c         ****    _delay_us(100);
  67:pll.c         **** //   dmsWait(1);
  68:pll.c         ****    // 3: Poll PLOCK until it is set...
  69:pll.c         ****    while(!getbit(PLOCK, PLLCSR))
 212               		.stabn	68,0,69,.LM4-.LFBB1
 213               	.LM4:
 214 0022 8091 8700 		lds r24,135
 215 0026 80FD      		sbrc r24,0
 216 0028 00C0      		rjmp .L5
  70:pll.c         ****    {
  71:pll.c         ****       asm("nop");
 217               		.stabn	68,0,71,.LM5-.LFBB1
 218               	.LM5:
 219               	/* #APP */
 220               	 ;  71 "pll.c" 1
 221 002a 0000      		nop
 222               	 ;  0 "" 2
 223               	/* #NOAPP */
 224 002c 00C0      		rjmp .L2
 225               	.L5:
 226               	/* epilogue start */
  72:pll.c         ****    }
  73:pll.c         **** 
  74:pll.c         **** //The PWM161 doesn't have a PCKE bit.
  75:pll.c         **** #if(!defined(__AVR_AT90PWM161__))
  76:pll.c         ****    // 4: Set the PCKE bit to enable async mode
  77:pll.c         ****    setbit(PCKE, PLLCSR);
  78:pll.c         **** #endif
  79:pll.c         **** 
  80:pll.c         **** }
 227               		.stabn	68,0,80,.LM6-.LFBB1
 228               	.LM6:
 229 002e 0895      		ret
 230               		.size	pll_enable, .-pll_enable
 231               	.Lscope1:
 232               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 233               		.stabd	78,0,0
 234               		.stabs	"lvds_timerInit:F(0,47)",36,0,531,lvds_timerInit
 235               	.global	lvds_timerInit
 236               		.type	lvds_timerInit, @function
 237               	lvds_timerInit:
 238               		.stabd	46,0,0
 239               		.stabs	"lvds161.c",132,0,0,.Ltext4
 240               	.Ltext4:
   1:lvds161.c     **** /* mehPL:
   2:lvds161.c     ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:lvds161.c     ****  *    I'm not too fond of long licenses at the top of the file.
   4:lvds161.c     ****  *    Please see the bottom.
   5:lvds161.c     ****  *    Enjoy!
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 11


   6:lvds161.c     ****  */
   7:lvds161.c     **** 
   8:lvds161.c     **** 
   9:lvds161.c     **** //TODO: Make note: RXclk is inverted, RXclk-/+ need to be swapped
  10:lvds161.c     **** //
  11:lvds161.c     **** 
  12:lvds161.c     **** // Other chips worth looking into:
  13:lvds161.c     **** // Also with 16kb FLASH, 1kb SRAM, surface-mount (SOIC)
  14:lvds161.c     **** // AT90PWM216-16SU/SN
  15:lvds161.c     **** // AT90PWM316-16SU/SN
  16:lvds161.c     **** 
  17:lvds161.c     **** //delayCyc is used to try to synchronize the PSC2 with the PSCR...
  18:lvds161.c     **** #include _DELAYCYC_HEADER_
  19:lvds161.c     **** 
  20:lvds161.c     **** // This file is derived/modified from lvds.c (which was for the Tiny861)
  21:lvds161.c     **** // See lvds.c for more thorough explanations.
  22:lvds161.c     **** 
  23:lvds161.c     **** // Tiny861 LVDS/FPD-Link timing:
  24:lvds161.c     **** 
  25:lvds161.c     **** //            |<--- (LCDdirectLVDS: "pixel") --->|
  26:lvds161.c     **** //  Timer1:   |<-- One Timer1 Cycle (OCR1C=6) -->|
  27:lvds161.c     **** //  TCNT:     |  0   1    2    3    4    5    6  |  0   1    2    3    
  28:lvds161.c     **** //            |____.____.____.____               |____.____.____.____
  29:lvds161.c     **** //  RXclk+:   /         |         \    .    .    /         |         \ //
  30:lvds161.c     **** //            |         |          ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|         |
  31:lvds161.c     **** // One Pixel: |         |<--- One FPD-Link Pixel Cycle --->|
  32:lvds161.c     **** //            |                                  |
  33:lvds161.c     **** // "Blue/DVH" |____ ____v____ ____ ____v____ ____|____ ____
  34:lvds161.c     **** //  RXin2:    X B3 X B2 X DE X /V X /H X B5 X B4 X B3 X B2 X ...
  35:lvds161.c     **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯
  36:lvds161.c     **** //            |         |<--Not Blue-->|         |
  37:lvds161.c     **** //            |                                  |
  38:lvds161.c     **** // "Green"    |____ ____v____ ____v____ ____ ____|____ ____
  39:lvds161.c     **** //  RXin1:    X G2 X G1 X B1 X B0 X G5 X G4 X G3 X G2 X G1 X ...
  40:lvds161.c     **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯ 
  41:lvds161.c     **** //            |         |<------->|-Not Green    |
  42:lvds161.c     **** //
  43:lvds161.c     **** // "Red"      |____ ____v____v____ ____ ____ ____|____ ____
  44:lvds161.c     **** //  RXin0:    X R1 X R0 X G0 X R5 X R4 X R3 X R2 X R1 X R0 X ...
  45:lvds161.c     **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯
  46:lvds161.c     **** //            |         |<-->|-Not Red
  47:lvds161.c     **** //
  48:lvds161.c     **** //   Of course: The Not Green/Red bits above are low-bits and
  49:lvds161.c     **** //              basically have little/no visible effect
  50:lvds161.c     **** //
  51:lvds161.c     **** //
  52:lvds161.c     **** //#error "Is this right?! Will this work with +V and +H separable?!"
  53:lvds161.c     **** // see notes in lvds.c
  54:lvds161.c     **** 
  55:lvds161.c     **** // According to PWM_TESTING, any arbitrary pulse can be generated,
  56:lvds161.c     **** // regardless of whether it wraps past the OCR2RB...
  57:lvds161.c     **** // So for blue we have:
  58:lvds161.c     **** //               bit: 0123456    5601234
  59:lvds161.c     **** //                    32dvh54 -> 5432dvh				OCR2SA	OCR2RA	Wraps?
  60:lvds161.c     **** 
  61:lvds161.c     **** // B5, B4, B3, B2 =   ¯¯¯¯¯¯¯ -> ¯¯¯¯¯¯¯		60		0			8			N
  62:lvds161.c     **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 12


  63:lvds161.c     **** // B5, B4, B3     =   ¯_¯¯¯¯¯    ¯¯¯_¯¯¯		56		1        0			Y
  64:lvds161.c     **** 
  65:lvds161.c     **** // B5, B4         =   __¯¯¯¯¯    ¯¯__¯¯¯		48    1        6			N
  66:lvds161.c     **** 
  67:lvds161.c     **** // B5             =   __¯¯¯¯_    ¯___¯¯¯		32    1        5			N
  68:lvds161.c     **** 
  69:lvds161.c     **** // BLACK          =   __¯¯¯__    ____¯¯¯		0     1        4			N
  70:lvds161.c     **** 
  71:lvds161.c     **** 
  72:lvds161.c     **** // B5, B4      B2 =   _¯¯¯¯¯¯    ¯¯_¯¯¯¯		52    0        6			N
  73:lvds161.c     **** 
  74:lvds161.c     **** // B5,         B2 =   _¯¯¯¯¯_    ¯__¯¯¯¯		36    0        5			N
  75:lvds161.c     **** 
  76:lvds161.c     **** //             B2 =   _¯¯¯¯__    ___¯¯¯¯		4     0        4			N
  77:lvds161.c     **** 
  78:lvds161.c     **** 
  79:lvds161.c     **** // B5,     B3, B2 =   ¯¯¯¯¯¯_    ¯_¯¯¯¯¯		44    6        5			Y
  80:lvds161.c     **** 
  81:lvds161.c     **** //         B3, B2 =   ¯¯¯¯¯__    __¯¯¯¯¯		12    6        4			Y
  82:lvds161.c     **** 
  83:lvds161.c     **** 
  84:lvds161.c     **** //     B4, B3, B2 =   ¯¯¯¯¯_¯    _¯¯¯¯¯¯		28    5        4			Y
  85:lvds161.c     **** 
  86:lvds161.c     **** // That's actually pretty decent coverage
  87:lvds161.c     **** // 
  88:lvds161.c     **** // Using BLUE_ALLSHADES with ALLSHADES_GRADIENT
  89:lvds161.c     **** // It seems there's some difficulty with switching between values which
  90:lvds161.c     **** // wrap-around (reset before set, in a cycle) and those that don't...
  91:lvds161.c     **** // So for now our colors are limited to those that don't require wrapping.
  92:lvds161.c     **** // 60, 48, 32, 0, 52, 36, 4
  93:lvds161.c     **** // And a bit of looking-into gives a bit of insight...
  94:lvds161.c     **** //      S R  bit: 32dvh54  5432dvh
  95:lvds161.c     **** // 60 = 0,8	      ¯¯¯¯¯¯¯  ¯¯¯¯¯¯¯  8 is necessary, 7-> all low.
  96:lvds161.c     **** // 52 = 0,6       _¯¯¯¯¯¯  ¯¯_¯¯¯¯
  97:lvds161.c     **** // 36 = 0,5       _¯¯¯¯¯_  ¯__¯¯¯¯
  98:lvds161.c     **** // 4  = 0,4       _¯¯¯¯__  ___¯¯¯¯
  99:lvds161.c     **** //
 100:lvds161.c     **** // So we can get away with only needing to change one register..
 101:lvds161.c     **** // (DE_only might be best set to 0,4...)
 102:lvds161.c     **** // This should probably be done in assembly, so each branch is the same
 103:lvds161.c     **** // number of cycles (see writeColor())
 104:lvds161.c     **** // So this should be used somewhat sparingly.
 105:lvds161.c     **** 
 106:lvds161.c     **** #define setBlue4(val)	\
 107:lvds161.c     **** 	({ \
 108:lvds161.c     **** 		uint8_t ocrVal = ((val) == 3) ? 8 : (val) + 4 ; \
 109:lvds161.c     **** 		lockPSC2(); \
 110:lvds161.c     **** 		OCR2RA = ocrVal; \
 111:lvds161.c     **** 		unlockPSC2(); \
 112:lvds161.c     **** 	})
 113:lvds161.c     **** 
 114:lvds161.c     **** // Green:
 115:lvds161.c     **** // Still assuming green is the time-keeper (OCR0RB=6, never changes)
 116:lvds161.c     **** //      S R  bit: 21Bb543  54321Bb
 117:lvds161.c     **** // 56 = 3 6       ____¯¯¯  ¯¯¯____  (S=2,1 only affects blue, S=0->58)
 118:lvds161.c     **** // 24 = 4 6       _____¯¯
 119:lvds161.c     **** // 16 = 5 6       ______¯
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 13


 120:lvds161.c     **** //
 121:lvds161.c     **** // Yeah, no. 
 122:lvds161.c     **** // Green OUTPUT INVERTED:
 123:lvds161.c     **** //                0123456
 124:lvds161.c     **** //      S R  bit: 21Bb543    21Bb543         
 125:lvds161.c     **** // 4 =  0 6       _¯¯¯¯¯¯ -> ¯______   UNUSED
 126:lvds161.c     **** // 6 =  3 6       ____¯¯¯ -> ¯¯¯¯___
 127:lvds161.c     **** // 38 = 4 6       _____¯¯ -> ¯¯¯¯¯__
 128:lvds161.c     **** // 54 = 5 6       ______¯ -> ¯¯¯¯¯¯_
 129:lvds161.c     **** // 62 = 6 6       _______ -> ¯¯¯¯¯¯¯
 130:lvds161.c     **** 
 131:lvds161.c     **** //This is new... (not in Tiny861)
 132:lvds161.c     **** // val=0-3
 133:lvds161.c     **** #define setGreen4(val)	{ lockPSC0(); OCR0SB=(val+3); unlockPSC0(); }
 134:lvds161.c     **** 
 135:lvds161.c     **** // Red OUTPUT INVERTED:
 136:lvds161.c     **** //                0123456
 137:lvds161.c     **** //      S R  bit: 10g5432    10g5432        54321Bb
 138:lvds161.c     **** //      0 6       _¯¯¯¯¯¯ -> ¯______
 139:lvds161.c     **** //      2 6       ___¯¯¯¯ -> ¯¯¯____
 140:lvds161.c     **** //      3 6       ____¯¯¯ -> ¯¯¯¯___
 141:lvds161.c     **** //      4 6       _____¯¯ -> ¯¯¯¯¯__
 142:lvds161.c     **** //      5 6       ______¯ -> ¯¯¯¯¯¯_
 143:lvds161.c     **** //      6 6       _______ -> ¯¯¯¯¯¯¯
 144:lvds161.c     **** 
 145:lvds161.c     **** // Red OUTPUT INVERTED, green-matched:
 146:lvds161.c     **** // (set R=5, then only one bit needs changing)
 147:lvds161.c     **** //                0123456
 148:lvds161.c     **** //      S R  bit: 10g5432    10g5432
 149:lvds161.c     **** //      0 5       _¯¯¯¯¯_ -> ¯_____¯
 150:lvds161.c     **** // 7  = 2 5       ___¯¯¯_ -> ¯¯¯___¯
 151:lvds161.c     **** // 39 = 3 5       ____¯¯_ -> ¯¯¯¯__¯
 152:lvds161.c     **** // 55 = 4 5       _____¯_ -> ¯¯¯¯¯_¯
 153:lvds161.c     **** // 63 = 5 5       _______ -> ¯¯¯¯¯¯¯     (Check BLUE experiments)
 154:lvds161.c     **** 
 155:lvds161.c     **** #define setRed4(val)	{ lockPSC0(); OCR0SA=(val+2); unlockPSC0(); }
 156:lvds161.c     **** 
 157:lvds161.c     **** // a/o v67-18_ALLSHADES_AND_COLORS:
 158:lvds161.c     **** // fullGreen = OCR0SB = 0
 159:lvds161.c     **** // noGreen =   OCR0SB = 6
 160:lvds161.c     **** // Prior to inversion...
 161:lvds161.c     **** // It seems to work, so.... those values added to the table, above
 162:lvds161.c     **** // (taking into account inversion)
 163:lvds161.c     **** // Actually, duh, S=0 -> bit0 (G2) being low, so might as well carry that
 164:lvds161.c     **** // over through the other bits...
 165:lvds161.c     **** //(but then with inversion, it means those bits are ON... so...? 0 might be
 166:lvds161.c     **** //best)
 167:lvds161.c     **** // with S=3, the base-line "black" is with G=6, B=3
 168:lvds161.c     **** // which has the additional nicity that no lookup table is necessary...
 169:lvds161.c     **** //
 170:lvds161.c     **** // pwm161 in One Ramp mode:
 171:lvds161.c     **** // This image taken from the data-sheet, page 108.
 172:lvds161.c     **** // This image also matches (as I recall) the PSCR controller.
 173:lvds161.c     **** //
 174:lvds161.c     **** //                                               OCR2RB
 175:lvds161.c     **** //                                     OCR2SB       v
 176:lvds161.c     **** //     PSC     |              OCR2RA      v___---¯¯¯|
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 14


 177:lvds161.c     **** //    Counter  |OCR2SA           v___---¯¯¯         |
 178:lvds161.c     **** //             |   v     ___---¯¯¯                  |
 179:lvds161.c     **** //             |___---¯¯¯                           |___---
 180:lvds161.c     **** //              0                                    0
 181:lvds161.c     **** // PSCOUT20(A) ____|¯¯¯¯¯¯¯¯¯¯¯¯¯|_____________________
 182:lvds161.c     **** //
 183:lvds161.c     **** // PSCOUT21(B) |__________________________|¯¯¯¯¯¯¯¯¯|____
 184:lvds161.c     **** //
 185:lvds161.c     **** // (First notes, a/o v67-0)
 186:lvds161.c     **** // OUT_A and OUT_B are allowed to overlap in "one ramp" mode.
 187:lvds161.c     **** // The specs are unclear about how/where the PSC Counter resets.
 188:lvds161.c     **** // From the drawing, it seems it always occurs at OCR2RB, which makes
 189:lvds161.c     **** // things difficult, since it would require that OCR2RB always == 7 clock
 190:lvds161.c     **** // cycles.
 191:lvds161.c     **** //
 192:lvds161.c     **** // The spec sheet defines "On-Time" and "Dead-Time", but these values are 
 193:lvds161.c     **** // *calculated* from OCRxyz register-values, rather than being
 194:lvds161.c     **** // register-values, themselves.
 195:lvds161.c     **** //
 196:lvds161.c     **** // This differs dramatically from the Tiny861.
 197:lvds161.c     **** //
 198:lvds161.c     **** // Initial idea: 
 199:lvds161.c     **** //   OCR2RB will have to correspond to RXclk's transition at some edge.
 200:lvds161.c     **** //   The particular edge is unimportant (so far), since the pin could be
 201:lvds161.c     **** //   inverted.
 202:lvds161.c     **** //
 203:lvds161.c     **** //   Then, OCR2SB will always be constant.
 204:lvds161.c     **** //
 205:lvds161.c     **** //   OCR2SA/RA can be used anywhere between for e.g. DE/V/H/Blue
 206:lvds161.c     **** //
 207:lvds161.c     **** // CAVEAT:
 208:lvds161.c     **** //   OCR2SA (and OCR2SB?) must occur at least one tick after 0
 209:lvds161.c     **** //
 210:lvds161.c     **** // SO for RxCLK and Rx"Blue" we're set...
 211:lvds161.c     **** //
 212:lvds161.c     **** // BUT:
 213:lvds161.c     **** // What about the second PSC (PSCR), which needs both its outputs used for
 214:lvds161.c     **** // Rx"Green" and Rx"Red"?
 215:lvds161.c     **** //
 216:lvds161.c     **** // Ideas:
 217:lvds161.c     **** //  The polarities of all outputs are individually controllable(?)
 218:lvds161.c     **** //   (so, e.g. OCRRSB = 0, OCRRRB = 6(?) could be used for both Full-Green
 219:lvds161.c     **** //    and No-Green, while OCRRSA/RA could be independent)
 220:lvds161.c     **** //  NO. Polarity affects BOTH outputs
 221:lvds161.c     **** //  Alternatively, maybe, Output Matrix (Four Ramp?)
 222:lvds161.c     **** //  Alternatively, another, take advantage of PSC2's MUXing for out22/23?
 223:lvds161.c     **** //   (and use PSCR for Clk/Blue)
 224:lvds161.c     **** 
 225:lvds161.c     **** 
 226:lvds161.c     **** // These notes compiled from Tiny861 from lvds.c:
 227:lvds161.c     **** 
 228:lvds161.c     **** //            |<--- (LCDdirectLVDS: "pixel") --->|
 229:lvds161.c     **** //  Timer1:   |<-- One Timer1 Cycle (OCR1C=6) -->|
 230:lvds161.c     **** //  TCNT:     |  0   1    2    3    4    5    6  |
 231:lvds161.c     **** //            |____.____.____.____               |
 232:lvds161.c     **** //  RXclk+:   /                   \    .    .    /
 233:lvds161.c     **** //            |                    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 15


 234:lvds161.c     **** //
 235:lvds161.c     **** // DE:          B3   B2   DE   /V   /H   B5   B4  For BLUE DATA (not D/V/H)
 236:lvds161.c     **** // "Blue/DVH" |____ ____ ____.____.____ ____ ____      C=OCR1A
 237:lvds161.c     **** //  OC1A:  D0>/ D1>/ D2>/           C4>\ C5>\ C6...    D=DT(H/L?)
 238:lvds161.c     **** //            |¯¯¯¯ ¯¯¯¯                ¯¯¯¯ ¯¯¯¯     (D must be 0 for CLK)
 239:lvds161.c     **** //
 240:lvds161.c     **** //             ____ ____      ____      ____ ____|____ 
 241:lvds161.c     **** //  H (only): X xx X xx \    /    \    / xx X xx X xx X    
 242:lvds161.c     **** //   state1    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯      ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ 
 243:lvds161.c     **** //            >______________/¯¯¯¯\______________|    DT=3, OCR=3
 244:lvds161.c     **** //
 245:lvds161.c     **** //             ____ ____           ____ ____ ____|____ 
 246:lvds161.c     **** //  V w/o H:  X xx X xx \    .    /    \ xx X xx X xx X
 247:lvds161.c     **** //   state3    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯      ¯¯¯¯ ¯¯¯¯|¯¯¯¯
 248:lvds161.c     **** //            >___________________/¯¯¯¯\_________|    DT=4, OCR=4 (+?)
 249:lvds161.c     **** 
 250:lvds161.c     **** //             ____ ____                ____ ____|____ 
 251:lvds161.c     **** //  V w/ H:   X xx X xx \    .    .    / xx X xx X xx X
 252:lvds161.c     **** //   state4    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ 
 253:lvds161.c     **** //            >__________________________________|    DT=X, OCR=0
 254:lvds161.c     **** 
 255:lvds161.c     **** //             ____ ____      ____ ____ ____ ____|____ 
 256:lvds161.c     **** //  Nada:     X xx X xx \    /    .    \ xx X xx X xx X    
 257:lvds161.c     **** //   state0    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯           ¯¯¯¯ ¯¯¯¯|¯¯¯¯     
 258:lvds161.c     **** //            >______________/¯¯¯¯¯¯¯¯¯\_________|    DT=3, OCR=4 (+?)
 259:lvds161.c     **** 
 260:lvds161.c     **** // So, best-case, with direct implementation, with DE active:
 261:lvds161.c     **** //    (not inverting anything, etc)
 262:lvds161.c     **** //    B3 is always low
 263:lvds161.c     **** //    B2 is selectable
 264:lvds161.c     **** //    B2           = 4
 265:lvds161.c     **** //    B2, B5, B4   = 52
 266:lvds161.c     **** //    B2, B5       = 36
 267:lvds161.c     **** //        B5       = 32
 268:lvds161.c     **** //        B5, B4   = 48
 269:lvds161.c     **** // Not as much range-increase as I'd expected, maybe another way
 270:lvds161.c     **** // For now, it seems it's plausible to at least reimplement what was
 271:lvds161.c     **** // already.
 272:lvds161.c     **** 
 273:lvds161.c     **** 
 274:lvds161.c     **** 
 275:lvds161.c     **** 
 276:lvds161.c     **** 
 277:lvds161.c     **** 
 278:lvds161.c     **** 
 279:lvds161.c     **** 
 280:lvds161.c     **** 
 281:lvds161.c     **** 
 282:lvds161.c     **** // One potential option is to use the look-up-table
 283:lvds161.c     **** // This gives a value based on the ramp-step number (in a 4-ramp
 284:lvds161.c     **** // configuration)
 285:lvds161.c     **** 
 286:lvds161.c     **** //  Ramp# (aka lookup-table index)
 287:lvds161.c     **** //    0     1     2     3
 288:lvds161.c     **** // |-----|-----|-----|------|
 289:lvds161.c     **** //
 290:lvds161.c     **** //
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 16


 291:lvds161.c     **** // So how many cases are there with two channels and assuming we match the
 292:lvds161.c     **** // old configuration where there's only one active period that gets shifted
 293:lvds161.c     **** // left/right and grows/shrinks in width...?
 294:lvds161.c     **** 
 295:lvds161.c     **** // |________________________|
 296:lvds161.c     **** // |________________________|
 297:lvds161.c     **** 
 298:lvds161.c     **** //       0        1
 299:lvds161.c     **** // |____________¯¯¯¯¯¯¯¯¯¯¯¯|
 300:lvds161.c     **** // |________________________|
 301:lvds161.c     **** 
 302:lvds161.c     **** //   0         1    2
 303:lvds161.c     **** // |____________¯¯¯¯¯¯¯¯¯¯¯¯|
 304:lvds161.c     **** // |__________¯¯¯¯¯¯¯¯¯¯¯¯¯¯|
 305:lvds161.c     **** 
 306:lvds161.c     **** //   0           1   2
 307:lvds161.c     **** // |____________¯¯¯¯¯¯¯¯¯¯¯¯|
 308:lvds161.c     **** // |_______________¯¯¯¯¯¯¯¯¯|
 309:lvds161.c     **** 
 310:lvds161.c     **** //   0           1  2 3
 311:lvds161.c     **** // |____________¯¯¯¯¯_______|     This sort've matches one-ramp...
 312:lvds161.c     **** // |_______________¯¯¯¯¯¯¯¯¯|     Since this always changes at the end.
 313:lvds161.c     **** 
 314:lvds161.c     **** //   0           1  2 3  4
 315:lvds161.c     **** // |____________¯¯¯¯¯_______|     NOGO.
 316:lvds161.c     **** // |_______________¯¯¯¯¯¯___|
 317:lvds161.c     **** 
 318:lvds161.c     **** // So, it looks like it's plausible to use for a few cases, and certainly
 319:lvds161.c     **** // all those that one-ramp would allow
 320:lvds161.c     **** // but doesn't allow for completely arbitrary waveforms
 321:lvds161.c     **** // And when combined with the additional math, it'd be complicated
 322:lvds161.c     **** // (math used to determine where to place each ramp-edge, since
 323:lvds161.c     **** // order-matters and would have to be sorted between red/green)
 324:lvds161.c     **** 
 325:lvds161.c     **** 
 326:lvds161.c     **** 
 327:lvds161.c     **** /// So back to one-ramp mode...
 328:lvds161.c     **** // Blue/CLK:
 329:lvds161.c     **** //
 330:lvds161.c     **** // CLK:
 331:lvds161.c     **** // OCR2RB = 6 (starting from 0)
 332:lvds161.c     **** // OCR2SB = 3
 333:lvds161.c     **** //
 334:lvds161.c     **** // H(only):	OCR2SA = 2, OCR2RA = 3
 335:lvds161.c     **** // V w/o H: OCR2SA = 3, OCR2RA = 4
 336:lvds161.c     **** // V w/ H : OCR2SA >=6, OCR2RA = 0 ....???
 337:lvds161.c     **** // Nada   : OCR2SA = 2, OCR2RA = 4
 338:lvds161.c     **** // 
 339:lvds161.c     **** // DE/Blue: 
 340:lvds161.c     **** // DE:          B3   B2   DE   /V   /H   B5   B4  For BLUE DATA (not D/V/H)
 341:lvds161.c     **** // "Blue/DVH" |     ____ ____.____.____ ____ ____      S=OCR2SA
 342:lvds161.c     **** //  OC1A:     | S0>/ S1>/           R4>\ R5>\ R6...    R=OCR2RA
 343:lvds161.c     **** //            |¯¯¯¯ ¯¯¯¯                ¯¯¯¯ ¯¯¯¯
 344:lvds161.c     **** // This closely matches the Tiny861's setup, where S=D+1, R=C
 345:lvds161.c     **** // PWM161 = Tiny861
 346:lvds161.c     **** // ----------------
 347:lvds161.c     **** // OCR2SA = DT - 1
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 17


 348:lvds161.c     **** // OCR2RA = OCR1A
 349:lvds161.c     **** //
 350:lvds161.c     **** 
 351:lvds161.c     **** //ANOTHER DIFFICULTY:
 352:lvds161.c     **** //  synchronizing PSC with PSCR (inputs?)
 353:lvds161.c     **** //
 354:lvds161.c     **** // PSCR: "In one ramp mode, Retrigger Inputs ... reset the current PSCR
 355:lvds161.c     **** // counting to zero"
 356:lvds161.c     **** // PSCR allows using the Analog Comparator output as the PSCR Input...
 357:lvds161.c     **** // If PSC2 does, as well, then both should be sync-able via AnaComp
 358:lvds161.c     **** //
 359:lvds161.c     **** // Which, too, might be doable in software, entirely, via driving an
 360:lvds161.c     **** // output-value on the same pin as the anacomp input...? Or maybe selecting
 361:lvds161.c     **** // an internal source (thermal?) ...
 362:lvds161.c     **** // Input Mode 8, p166
 363:lvds161.c     **** // (Might be difficult if they use prescalers other than 1, since who knows
 364:lvds161.c     **** // where the prescaler-counters are with respect to PSCR and PSC2)
 365:lvds161.c     **** //
 366:lvds161.c     **** 
 367:lvds161.c     **** 
 368:lvds161.c     **** 
 369:lvds161.c     **** 
 370:lvds161.c     **** // More colors (Red/Green)?
 371:lvds161.c     **** //  Possibly, sync PSC with PSCR at the other LVDS-CLK edge
 372:lvds161.c     **** //  (they'd be out of phase)
 373:lvds161.c     **** //  Then the OCR2SB-ish signal which causes the one-ramp reset
 374:lvds161.c     **** //  could be located at a much lower color-bit-value
 375:lvds161.c     **** 
 376:lvds161.c     **** // Green Notes:
 377:lvds161.c     **** // (Assuming Green is connected to OCR2SB-ish, and thus required to be high
 378:lvds161.c     **** // until the 7th bit, for resetting the one-ramp mode)
 379:lvds161.c     **** //   On the ATTiny861 green has basically three values based on the
 380:lvds161.c     **** //   dead-timer from the lvds-clock edge...
 381:lvds161.c     **** //      G5 = 32/63, G5+G4 = 48/63, G5+G4+G3 = 56/63
 382:lvds161.c     **** //   PWM161 is reversed!
 383:lvds161.c     **** //     G3 = 8/63, G3+G4 = 24/63, G3+G4+G5 = 56/63
 384:lvds161.c     **** // Interesting side-note???
 385:lvds161.c     **** //    One is ~logarithmic, and the other is ~exponential?
 386:lvds161.c     **** //   BUT MAYBE the same could be accomplished by inverting Green again...?
 387:lvds161.c     **** //
 388:lvds161.c     **** 
 389:lvds161.c     **** 
 390:lvds161.c     **** #if (defined(REMOVE_DC) && REMOVE_DC)
 391:lvds161.c     ****  #error "REMOVE_DC hasn't been tested since lcdStuff, or long prior"
 392:lvds161.c     ****  #error "Further, it hasn't been implemented AT ALL for the PWM161"
 393:lvds161.c     **** #endif
 394:lvds161.c     **** 
 395:lvds161.c     **** //Is +1 true, since DT adds its own delay...? Probably, since DT adds the
 396:lvds161.c     **** //delay to *all* channels...
 397:lvds161.c     **** //#define DT1_EQUIV(x)   (OCR2SA = (x)-1)
 398:lvds161.c     **** 
 399:lvds161.c     **** #define lockPSC2()		(setbit(PLOCK2, PCNF2))
 400:lvds161.c     **** #define unlockPSC2()		(clrbit(PLOCK2, PCNF2))
 401:lvds161.c     **** 
 402:lvds161.c     **** #define lockPSC0()      (setbit(PLOCK0, PCNF0))
 403:lvds161.c     **** #define unlockPSC0()		(clrbit(PLOCK0, PCNF0))
 404:lvds161.c     **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 18


 405:lvds161.c     **** #define FULL_INIT_TESTS	TRUE
 406:lvds161.c     **** #warning "NEED TO REVISIT TRANSITIONS, Especially DE->setBlue"
 407:lvds161.c     **** 
 408:lvds161.c     **** #define Nada_init()     { lockPSC2(); OCR2SA=2; OCR2RA=4; unlockPSC2(); }
 409:lvds161.c     **** //#error "Check these again with ATtiny861..."
 410:lvds161.c     **** //#error "Kept forgetting that V and H are active-low"
 411:lvds161.c     **** //Unused, normally...
 412:lvds161.c     **** #define Vsync_init()    { lockPSC2(); OCR2SA=3; OCR2RA=4; unlockPSC2(); }
 413:lvds161.c     **** #define VplusH_init()   { lockPSC2(); OCR2SA=6; OCR2RA=6; unlockPSC2(); }
 414:lvds161.c     **** #define Hsync_init()    { lockPSC2(); OCR2SA=2; OCR2RA=3; unlockPSC2(); }
 415:lvds161.c     **** #define DEonly_init()   { lockPSC2(); OCR2SA=1; OCR2RA=4; unlockPSC2(); }
 416:lvds161.c     **** //#define DEonly_init()   { lockPSC2(); OCR2SA=0; OCR2RA=4; unlockPSC2(); }
 417:lvds161.c     **** #define DEblue_init()   { lockPSC2(); OCR2SA=0; OCR2RA=6; unlockPSC2(); }
 418:lvds161.c     **** 
 419:lvds161.c     **** #if (defined(DE_ONLY_DISPLAY) && DE_ONLY_DISPLAY)
 420:lvds161.c     ****  #error "DE_ONLY_DISPLAY is not implemented for PWM161"
 421:lvds161.c     ****  #error " But don't be discouraged... an actual LCD that's DE-Only"
 422:lvds161.c     ****  #error " should work fine WITHOUT DE_ONLY_DISPLAY set true"
 423:lvds161.c     ****  #error " Really, DE_ONLY_DISPLAY was just a test... see lvds.c"
 424:lvds161.c     **** #elif (defined(FULL_INIT_TESTS) && FULL_INIT_TESTS)
 425:lvds161.c     **** //#error"OK"
 426:lvds161.c     ****  #define Vsync_fromNada()      Vsync_init()
 427:lvds161.c     ****  #define VplusH_fromVsync()      VplusH_init()
 428:lvds161.c     ****  #define Vsync_fromVplusH()      Vsync_init()
 429:lvds161.c     ****  #define Nada_fromVsync()      Nada_init()
 430:lvds161.c     ****  #define Hsync_fromNada()      Hsync_init()
 431:lvds161.c     ****  #define Nada_fromHsync()      Nada_init()
 432:lvds161.c     ****  #define DEonly_fromNada()      DEonly_init()
 433:lvds161.c     ****  #define DEblue_fromDEonly()   DEblue_init()
 434:lvds161.c     ****  #define Nada_fromDEonly()      Nada_init()
 435:lvds161.c     ****  #define Nada_fromDEblue()      Nada_init()
 436:lvds161.c     ****  #define DEonly_fromDEblue()   DEonly_init()
 437:lvds161.c     **** #else   //NOT FULL_INIT_TESTS
 438:lvds161.c     **** //These are the minimal changes necessary, for high-speed processing...
 439:lvds161.c     ****  #define Vsync_fromNada()   { lockPSC2(); OCR2SA=3; unlockPSC2(); } 
 440:lvds161.c     ****  #define VplusH_fromVsync() VplusH_init()
 441:lvds161.c     **** 	//Might be able to get away with merely changing OCR2SA to 6... then
 442:lvds161.c     **** 	//reset would occur before set, and set would never occur...?
 443:lvds161.c     **** #define Vsync_fromVplusH() Vsync_init()
 444:lvds161.c     **** 	// See above
 445:lvds161.c     **** #define Nada_fromVsync()   { lockPSC2(); OCR2SA=2; unlockPSC2(); }
 446:lvds161.c     **** #define Hsync_fromNada()   { lockPSC2(); OCR2RA=3; unlockPSC2(); }
 447:lvds161.c     **** #define Nada_fromHsync()   { lockPSC2(); OCR2RA=4; unlockPSC2(); }
 448:lvds161.c     **** #define Nada_fromDEblue()  Nada_init()
 449:lvds161.c     **** #define Nada_fromDEonly()  { lockPSC2(); OCR2SA=2; unlockPSC2(); }
 450:lvds161.c     **** #define DEonly_fromNada()  { lockPSC2(); OCR2SA=1; unlockPSC2(); }
 451:lvds161.c     **** #define DEblue_fromNada()  DEblue_init()
 452:lvds161.c     **** #define DEblue_fromDEonly() DEblue_init()
 453:lvds161.c     **** 
 454:lvds161.c     **** #define DEonly_fromDEblue() DEonly_init()
 455:lvds161.c     **** 
 456:lvds161.c     **** #endif
 457:lvds161.c     **** 
 458:lvds161.c     **** #define fullBlue()	DEblue_init()
 459:lvds161.c     **** 
 460:lvds161.c     **** // So far, there's no "noBlue()" like there is (now) for red/green
 461:lvds161.c     **** // it gets confusing since doing-so would also affect the timing signals
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 19


 462:lvds161.c     **** 
 463:lvds161.c     **** 
 464:lvds161.c     **** //This'll be a macro, eventually...
 465:lvds161.c     **** // but I want these warnings/errors...
 466:lvds161.c     **** /*void fullRed(void);
 467:lvds161.c     **** 
 468:lvds161.c     **** #if(defined(ALLOW_UNIMPLEMENTED) && ALLOW_UNIMPLEMENTED)
 469:lvds161.c     ****  #warning "UNIMPLEMENTED FUNCTION: fullRed()"
 470:lvds161.c     **** #else
 471:lvds161.c     ****  #error "UNIMPLEMENTED FUNCTION: fullRed()"
 472:lvds161.c     **** #endif  
 473:lvds161.c     **** 
 474:lvds161.c     **** void fullRed(void)
 475:lvds161.c     **** {
 476:lvds161.c     **** 
 477:lvds161.c     **** }
 478:lvds161.c     **** */
 479:lvds161.c     **** //For now, we're assuming the Set/Reset active-levels are
 480:lvds161.c     **** //directly-corresponding to the FPD-Link bit-values...
 481:lvds161.c     **** // e.g. "OCR0SA" = set the output, so the corresponding bit is high
 482:lvds161.c     **** //THIS MIGHT CHANGE
 483:lvds161.c     **** // e.g. inverting "green" might allow for the color-scheme to be stretched
 484:lvds161.c     **** // more normally...
 485:lvds161.c     **** // There're a couple ways to do this, and it's too confusing for me to
 486:lvds161.c     **** // parse right now... invert the output, or flip the LVDS-converters...?
 487:lvds161.c     **** //#define fullRed()	{ lockPSC0(); OCR0SA = 0; OCR0RA = 6; unlockPSC0(); }
 488:lvds161.c     **** //#define noRed()	{ lockPSC0(); OCR0SA = 6; OCR0RA = 0; unlockPSC0(); }	//Would this be allowed?
 489:lvds161.c     **** 																//Would its ON be *around*
 490:lvds161.c     **** 																//the counter-reset?
 491:lvds161.c     **** //#define noRed()	{ lockPSC0(); OCR0SA = 6; OCR0RA = 6; unlockPSC0(); }
 492:lvds161.c     **** #define noRed()	setRed4(0)
 493:lvds161.c     **** #define fullRed()	setRed4(3)
 494:lvds161.c     **** 
 495:lvds161.c     **** //#define fullGreen()	{ lockPSC0(); OCR0SB = 0; unlockPSC0(); }
 496:lvds161.c     **** //#define noGreen()		{ lockPSC0(); OCR0SB = 6; unlockPSC0(); }
 497:lvds161.c     **** #define noGreen()	  setGreen4(0)
 498:lvds161.c     **** #define fullGreen() setGreen4(3)
 499:lvds161.c     **** 
 500:lvds161.c     **** 
 501:lvds161.c     **** //These are most-likely unnecessary for PWM161
 502:lvds161.c     **** #define lvds_disableGreen_MakeClockInsensitiveToDT()
 503:lvds161.c     **** #define lvds_enableGreen_MakeClockSensitiveToDT()
 504:lvds161.c     **** 
 505:lvds161.c     **** 
 506:lvds161.c     **** void lvds_timerInit(void);
 507:lvds161.c     **** 
 508:lvds161.c     **** //This is causing display-syncing problems...
 509:lvds161.c     **** //#define LVDS_MAXIMIZE_OSCCAL TRUE
 510:lvds161.c     **** #define LVDS_USE_PLL	TRUE
 511:lvds161.c     **** 
 512:lvds161.c     **** #if(defined(LVDS_USE_PLL) && LVDS_USE_PLL)
 513:lvds161.c     ****  // 0 selects "Slow Clock Input" aka systemI/O-clock
 514:lvds161.c     ****  // 1 selects "Fast Clock Input" aka PLL_CLK
 515:lvds161.c     ****  // This is the case for both PSC2 and PSCR
 516:lvds161.c     ****  #define PCLKSELn	1
 517:lvds161.c     **** #else
 518:lvds161.c     ****  #warning "LVDS_USE_PLL is not TRUE... using system clock"
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 20


 519:lvds161.c     ****  #define PCLKSELn 0
 520:lvds161.c     **** #endif
 521:lvds161.c     **** 
 522:lvds161.c     **** 
 523:lvds161.c     **** #if(defined(PLL_SYSCLK) && PLL_SYSCLK)
 524:lvds161.c     ****  #warning "The AT90PWM161 has not yet been configured to use PLL_SYSCLK"
 525:lvds161.c     ****  #warning "Math relying on it may be messed-up... e.g. boot PLL_MULT=6"
 526:lvds161.c     **** // #error "Comment-out the line 'PLLSYSCLK=1' in your makefile"
 527:lvds161.c     **** #endif
 528:lvds161.c     **** 
 529:lvds161.c     **** 
 530:lvds161.c     **** 
 531:lvds161.c     **** void lvds_timerInit(void)
 532:lvds161.c     **** {
 241               		.stabn	68,0,532,.LM7-.LFBB2
 242               	.LM7:
 243               	.LFBB2:
 244 0030 0F93      		push r16
 245               	/* prologue: function */
 246               	/* frame size = 0 */
 247               	/* stack size = 1 */
 248               	.L__stack_usage = 1
 533:lvds161.c     **** 
 534:lvds161.c     ****   #if(defined(LVDS_MAXIMIZE_OSCCAL) && LVDS_MAXIMIZE_OSCCAL)
 535:lvds161.c     **** 	OSCCAL = OSCCAL_VAL;
 536:lvds161.c     ****   #endif
 537:lvds161.c     **** 
 538:lvds161.c     ****   #if(defined(LVDS_USE_PLL) && LVDS_USE_PLL)
 539:lvds161.c     **** 	pll_enable();
 249               		.stabn	68,0,539,.LM8-.LFBB2
 250               	.LM8:
 251 0032 0E94 0000 		call pll_enable
 540:lvds161.c     ****   #endif
 541:lvds161.c     **** 
 542:lvds161.c     **** 	PSOC2 = (0<<POS23)	//PSCOUT23 outputs Waveform A if 1 or B if 0
 252               		.stabn	68,0,542,.LM9-.LFBB2
 253               	.LM9:
 254 0036 A5E0      		ldi r26,lo8(5)
 255 0038 A093 6E00 		sts 110,r26
 543:lvds161.c     **** 			| (0<<POS22)	//PSCOUT22 outputs Waveform B if 1 or A if 0
 544:lvds161.c     **** 							//Depending on whether POEN2C/D are 1...
 545:lvds161.c     **** 			// PSYnC21:20 are for synchronizing the ADC...
 546:lvds161.c     **** 			| (0<<POEN2D)	//PSCOUT23 unused if 0, PSC output if 1
 547:lvds161.c     **** 			| (1<<POEN2B)	//PSCOUT21 unused if 0, PSC output if 1
 548:lvds161.c     **** 			| (0<<POEN2C)	//PSCOUT22 ''
 549:lvds161.c     **** 			| (1<<POEN2A)  //PSCOUT20 ''
 550:lvds161.c     **** 			;
 551:lvds161.c     **** 
 552:lvds161.c     **** #warning "NOTE! These are 12-bit registers, requiring complex loading"
 553:lvds161.c     **** #warning "since we only need them to count to 7, it might be better to use"
 554:lvds161.c     **** #warning "low bytes, only!"
 555:lvds161.c     **** 
 556:lvds161.c     **** 	//OCR2SA, OCR2RA	-> DVH/Blue
 557:lvds161.c     **** 	//OCR2SB, OCR2RB	-> LVDS Clock
 558:lvds161.c     **** 	// For one-ramp mode, OCR2RB determines the number of cycles (right?)
 559:lvds161.c     **** 	// In order to make this work, the LVDS-CLK signal should be on this
 560:lvds161.c     **** 	// channel...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 21


 561:lvds161.c     **** 
 562:lvds161.c     **** 	OCR2RB = 6;	//Count to 6, from 0, then reset the count
 256               		.stabn	68,0,562,.LM10-.LFBB2
 257               	.LM10:
 258 003c 46E0      		ldi r20,lo8(6)
 259 003e 50E0      		ldi r21,0
 260 0040 59BD      		out 0x28+1,r21
 261 0042 48BD      		out 0x28,r20
 563:lvds161.c     **** 	OCR2SB = 3;	// Toggle the lvds-clock high at edge 3 (0->3 = 4 bits off)
 262               		.stabn	68,0,563,.LM11-.LFBB2
 263               	.LM11:
 264 0044 23E0      		ldi r18,lo8(3)
 265 0046 30E0      		ldi r19,0
 266 0048 37BD      		out 0x26+1,r19
 267 004a 26BD      		out 0x26,r18
 564:lvds161.c     **** 					//                                      (4->6 = 3 bits on)
 565:lvds161.c     **** 	//The above two won't change.
 566:lvds161.c     **** 	//THIS IS INVERTED.
 567:lvds161.c     **** 	// The outputs of the LVDS driver chips need to be swapped
 568:lvds161.c     **** 	// (RXclk-/+)
 569:lvds161.c     **** 
 570:lvds161.c     **** 	//OCR2SA/RA are used for DVH/Blue, and should be handled by this:
 571:lvds161.c     **** #if(!defined(PWM_TESTING) || !PWM_TESTING)
 572:lvds161.c     **** 	Nada_init();
 268               		.stabn	68,0,572,.LM12-.LFBB2
 269               	.LM12:
 270 004c AD9A      		sbi 0x15,5
 271 004e 82E0      		ldi r24,lo8(2)
 272 0050 90E0      		ldi r25,0
 273 0052 9093 6500 		sts 100+1,r25
 274 0056 8093 6400 		sts 100,r24
 275 005a 64E0      		ldi r22,lo8(4)
 276 005c 70E0      		ldi r23,0
 277 005e 7FBD      		out 0x2e+1,r23
 278 0060 6EBD      		out 0x2e,r22
 279 0062 AD98      		cbi 0x15,5
 573:lvds161.c     **** #else
 574:lvds161.c     **** 	//These are just arbitrary values for 'scoping...
 575:lvds161.c     **** 	OCR2SA = 0;
 576:lvds161.c     **** 	OCR2RA = 8;
 577:lvds161.c     **** 	// EXPERIMENTATION NOTES:
 578:lvds161.c     **** 	// S   R
 579:lvds161.c     **** 	// 0   0   signal is always low
 580:lvds161.c     **** 	// 1   0   signal goes low for bit 1 (appears to wrap! Awesome)
 581:lvds161.c     **** 	// 0   6   signal goes low for bit 0 (ditto)
 582:lvds161.c     **** 	// 0   7   signal is always low (???? Weird?)
 583:lvds161.c     **** 	//           Tested twice, yep. Weird
 584:lvds161.c     **** 	// 7   0   signal is always low (expected)
 585:lvds161.c     **** 	// 0   1   signal goes high for bit 1
 586:lvds161.c     **** 	// 6   6   signal	is always low
 587:lvds161.c     **** 	// 6   5   signal is low for bit 6
 588:lvds161.c     **** 	// 1   1   always low
 589:lvds161.c     **** 	// 2   1   low for bit 2
 590:lvds161.c     **** 	// Appears to be no way to set *all* bits ??? NO, see below.
 591:lvds161.c     **** 	// fff fff always low
 592:lvds161.c     **** 	// 0   fff always high (!)
 593:lvds161.c     **** 	//         may be hokey, due to the counter overflowing once before
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 22


 594:lvds161.c     **** 	//         the OCRRB value being recognized?
 595:lvds161.c     **** 	//         ALSO the output is fuzzy (weird?)
 596:lvds161.c     **** 	// fff 0   always low
 597:lvds161.c     **** 	// 0   ff  always high (!) (same as 0xfff)
 598:lvds161.c     **** 	// 0   0x70 always high (!) (same)
 599:lvds161.c     ****    // 0   8   always high (!)
 600:lvds161.c     ****    // 0   7   recheck -- Yep, always low.
 601:lvds161.c     **** 	// Appears that the TCNT value might jump briefly to 7 before resetting
 602:lvds161.c     **** 	// to 0
 603:lvds161.c     **** 	//So... apparently any combination can be created.
 604:lvds161.c     **** 	// 5   0   bits 6 and 0 are high
 605:lvds161.c     **** 	// 0   5   bits 6 and 0 are low
 606:lvds161.c     **** #endif
 607:lvds161.c     **** 
 608:lvds161.c     **** 	//Also, forgot about FlankWidthModulation (?)
 609:lvds161.c     **** 
 610:lvds161.c     **** 	PCNF2 = (0<<PFIFTY2)	//"Fifty-percent waveforms" unused
 280               		.stabn	68,0,610,.LM13-.LFBB2
 281               	.LM13:
 282 0064 66E0      		ldi r22,lo8(6)
 283 0066 65BB      		out 0x15,r22
 611:lvds161.c     **** 			| (0<<PALOCK2)	// AutoLock: Assures simultaneous register updates
 612:lvds161.c     **** 			| (0<<PLOCK2)  // Lock: Similar
 613:lvds161.c     **** //TODO: Probably gonna have to use one of the LOCKs later.
 614:lvds161.c     **** 			| (0<<PMODE21)	// \  0 0 -> One Ramp mode
 615:lvds161.c     **** 			| (0<<PMODE20) // /
 616:lvds161.c     **** 			| (1<<POP2)    // PSC outputs are active-high
 617:lvds161.c     **** 			| (PCLKSELn<<PCLKSEL2) 
 618:lvds161.c     **** 								// 0 selects "slow clock input" 1 selects fast
 619:lvds161.c     **** 								// 1=CLK_PLL 0=CLK_I/O
 620:lvds161.c     **** 			| (0<<POME2)   // 1 enables the Output Matrix, 0 disables
 621:lvds161.c     **** 			;
 622:lvds161.c     **** 
 623:lvds161.c     **** 	//PCNFE2 = //PASDLK22:20 for Analog Sync, unused...
 624:lvds161.c     **** 				//PBFM21 for Flank Width Modulation, unused...
 625:lvds161.c     **** 				//PELEV2A1 for Input Select, unused...
 626:lvds161.c     **** 				//PELEV2B1 ''
 627:lvds161.c     **** 				//PISEL2A1 ''
 628:lvds161.c     **** 				//PISEL2B1 ''
 629:lvds161.c     **** 
 630:lvds161.c     **** 	//PASDLY2 Analog Synchronization Delay Register
 631:lvds161.c     **** 
 632:lvds161.c     **** #if(LVDS_PRESCALER == 1)
 633:lvds161.c     ****  #define PPREn1	0
 634:lvds161.c     ****  #define PPREn0	0
 635:lvds161.c     **** #elif (LVDS_PRESCALER == 4)
 636:lvds161.c     ****  #define PPREn1	0
 637:lvds161.c     ****  #define PPREn0	1
 638:lvds161.c     **** #if 0
 639:lvds161.c     **** 	These values only work with PSC2:
 640:lvds161.c     **** #elif (LVDS_PRESCALER == 16)
 641:lvds161.c     ****  #define PPREn1	1
 642:lvds161.c     ****  #define PPREn0	0
 643:lvds161.c     **** #elif (LVDS_PRESCALER == 64)
 644:lvds161.c     ****  #define PPREn1	1
 645:lvds161.c     ****  #define PPREn0	1
 646:lvds161.c     **** #endif
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 23


 647:lvds161.c     **** #if 0
 648:lvds161.c     **** 	These values only work with PCSR:
 649:lvds161.c     **** #elif (LVDS_PRESCALER == 32)
 650:lvds161.c     ****  #define PPREn1	1
 651:lvds161.c     ****  #define PPREn0	0
 652:lvds161.c     **** #elif (LVDS_PRESCALER == 256)
 653:lvds161.c     ****  #define PPREn1	1
 654:lvds161.c     ****  #define PPREn0	1
 655:lvds161.c     **** #endif
 656:lvds161.c     **** //If values other than 1 or 4 are needed, there'll have to be some math
 657:lvds161.c     **** //done to determine whether to use the PLL or the system-clock
 658:lvds161.c     **** // and it may not even be possible, who knows.
 659:lvds161.c     **** #else
 660:lvds161.c     ****  #error "This LVDS_PRESCALER value won't work with the PWM161"
 661:lvds161.c     **** #endif
 662:lvds161.c     **** #if 0
 663:lvds161.c     ****  THIS HAS BEEN MOVED to the end of the function
 664:lvds161.c     **** 	In order to synchronize the two PSCs
 665:lvds161.c     **** 
 666:lvds161.c     **** 	PCTL2 = (PPREn1<<PPRE21) // \ Prescaler selection (0 0 = no divider)
 667:lvds161.c     **** 			| (PPREn0<<PPRE20) // /
 668:lvds161.c     **** 			//PBFM20 for Flank Width Modulation, unused...
 669:lvds161.c     **** 			| (0<<PAOC2B) //"Fault Input selected to block _ can act directly
 670:lvds161.c     **** 			| (0<<PAOC2A) // to PSCOUT2x outputs" ???
 671:lvds161.c     **** //TODO: These are related to PSC Clock Sources?! "page 133"
 672:lvds161.c     **** 			//PARUN2 for synchronizing with other PSC's... but there aren't
 673:lvds161.c     **** 						//any that it can sync with (PSCR doesn't), right?
 674:lvds161.c     **** 			| (0<<PCCYC2) // Used during halting... which mightn't be used
 675:lvds161.c     **** 			| (1<<PRUN2)  // START THE PSC
 676:lvds161.c     **** 			;
 677:lvds161.c     **** #endif
 678:lvds161.c     **** 	//A bunch of input configuration registers and capture registers
 679:lvds161.c     **** 
 680:lvds161.c     **** 	POM2 = 0;	//PSC2 Output Matrix (unused)
 284               		.stabn	68,0,680,.LM14-.LFBB2
 285               	.LM14:
 286 0068 1092 6F00 		sts 111,__zero_reg__
 681:lvds161.c     **** 
 682:lvds161.c     **** 	//PIM2: PSC2 Interrupt Mask Register, unused
 683:lvds161.c     **** 	//PIFR2: PSC2 Interrupt Flag Register, unused
 684:lvds161.c     **** 
 685:lvds161.c     **** 	//NOTE: PSC2/PSCR I/O can be set to defaults on reset, via fuses
 686:lvds161.c     **** 
 687:lvds161.c     **** 
 688:lvds161.c     **** //These are for PSCR and closely match PSC2:
 689:lvds161.c     **** 	PSOC0 = (0<<PISEL0A1)	//PSC Input A Select (along with PISEL0A0)
 287               		.stabn	68,0,689,.LM15-.LFBB2
 288               	.LM15:
 289 006c A093 6A00 		sts 106,r26
 690:lvds161.c     **** 			| (0<<PISEL0B1)	//PSC Input B Select (along with PISEL0B0)
 691:lvds161.c     **** 				//These two might need to be changed for syncing...?
 692:lvds161.c     **** 			//PSYNC01:00 are for synchronizing the ADC
 693:lvds161.c     **** 			//Bit 3 is reserved
 694:lvds161.c     **** 			| (1<<POEN0B)		//PSCOUT01 is connected to PSCR B output
 695:lvds161.c     **** 			//Bit 1 is reserved
 696:lvds161.c     **** 			| (1<<POEN0A)		//PSCOUT00 is connected to PSCR A output
 697:lvds161.c     **** 			;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 24


 698:lvds161.c     **** 
 699:lvds161.c     **** 	//OCR0SA, OCR0RA	-> "Red"
 700:lvds161.c     **** 	//OCR0SB, OCR0RB	-> "Green"
 701:lvds161.c     **** 	// For now, I've been assuming that "green" was connected to channel B
 702:lvds161.c     **** 	// Not sure why, exactly... maybe because it's similar to the case where
 703:lvds161.c     **** 	// green is tied to the LVDS-CLK signal in the ATTiny861 configuration
 704:lvds161.c     **** 	// Changing this to Red might allow for more colors 
 705:lvds161.c     **** 	//  (since the fixed "starting-point" is R2 vs G3)	
 706:lvds161.c     **** 	// But for now, I'll leave it with the written assumptions.
 707:lvds161.c     **** 	//
 708:lvds161.c     **** 	// OCR0RB determines the reset value of the counter, in one-ramp mode...
 709:lvds161.c     **** 	// So its value should not change (regardless of whether it's Green or
 710:lvds161.c     **** 	// Red)
 711:lvds161.c     **** 	OCR0RB = 6; // count from 0->6, then reset
 290               		.stabn	68,0,711,.LM16-.LFBB2
 291               	.LM16:
 292 0070 55BD      		out 0x24+1,r21
 293 0072 44BD      		out 0x24,r20
 712:lvds161.c     **** 
 713:lvds161.c     **** 	//See notes re: Red OUTPUT INVERTED, green-matched, above.
 714:lvds161.c     **** 	// Using R=5, we should be able to get away with simple math
 715:lvds161.c     **** 	// see also setRed4()
 716:lvds161.c     **** 	OCR0RA = 5;
 294               		.stabn	68,0,716,.LM17-.LFBB2
 295               	.LM17:
 296 0074 45E0      		ldi r20,lo8(5)
 297 0076 50E0      		ldi r21,0
 298 0078 5BBD      		out 0x2a+1,r21
 299 007a 4ABD      		out 0x2a,r20
 717:lvds161.c     **** 
 718:lvds161.c     **** 	//These should handle configuring reasonable values for OCR0SA/RA/SB
 719:lvds161.c     **** #if(!defined(PWM_TESTING) || !PWM_TESTING)
 720:lvds161.c     **** 	noGreen();
 300               		.stabn	68,0,720,.LM18-.LFBB2
 301               	.LM18:
 302 007c 8D9A      		sbi 0x11,5
 303 007e 33BD      		out 0x22+1,r19
 304 0080 22BD      		out 0x22,r18
 305 0082 8D98      		cbi 0x11,5
 721:lvds161.c     **** 	noRed();
 306               		.stabn	68,0,721,.LM19-.LFBB2
 307               	.LM19:
 308 0084 8D9A      		sbi 0x11,5
 309 0086 9093 6100 		sts 96+1,r25
 310 008a 8093 6000 		sts 96,r24
 311 008e 8D98      		cbi 0x11,5
 722:lvds161.c     **** #else
 723:lvds161.c     **** 	OCR0SB = 3;
 724:lvds161.c     **** 	OCR0SA = 5;
 725:lvds161.c     **** 	OCR0RA = 6;
 726:lvds161.c     **** #endif
 727:lvds161.c     **** 
 728:lvds161.c     **** 	//See PCNF2, above...
 729:lvds161.c     **** 	PCNF0 = (0<<PFIFTY0)
 312               		.stabn	68,0,729,.LM20-.LFBB2
 313               	.LM20:
 314 0090 82E0      		ldi r24,lo8(2)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 25


 315 0092 81BB      		out 0x11,r24
 730:lvds161.c     **** 			| (0<<PALOCK0)
 731:lvds161.c     **** 			| (0<<PLOCK0)
 732:lvds161.c     **** //TODO: Look into LOCKs
 733:lvds161.c     **** 			| (0<<PMODE01)	//	\ 0 0 -> One Ramp Mode
 734:lvds161.c     **** 			| (0<<PMODE00)	//	/
 735:lvds161.c     **** 			| (0<<POP0)		// PSC outputs, active-LOW
 736:lvds161.c     **** 								// PSCR works with ALL OUTPUTS INVERTED
 737:lvds161.c     **** 								// (for Red/Green)
 738:lvds161.c     **** 			| (PCLKSELn<<PCLKSEL0)
 739:lvds161.c     **** 			//bit 0 is reserved
 740:lvds161.c     **** 			;
 741:lvds161.c     **** 
 742:lvds161.c     **** ////////lss stops following here...
 743:lvds161.c     **** 
 744:lvds161.c     **** 	//The PCTLn registers actually start the PSC...
 745:lvds161.c     **** 	// In order to synchronize the two separate PSC systems, the number of
 746:lvds161.c     **** 	// instructions between the start of PSC2 and PSCR has to be precise
 747:lvds161.c     **** 	// That's handled in assembly, below, but the values can be calculated
 748:lvds161.c     **** 	// ahead-of-time.
 749:lvds161.c     **** 	uint8_t pctl2_val;
 750:lvds161.c     **** 
 751:lvds161.c     **** 	//PCTL2
 752:lvds161.c     **** 	pctl2_val = 
 753:lvds161.c     **** 		     (PPREn1<<PPRE21) // \ Prescaler selection (0 0 = no divider)
 754:lvds161.c     **** 			| (PPREn0<<PPRE20) // /
 755:lvds161.c     **** 			//PBFM20 for Flank Width Modulation, unused...
 756:lvds161.c     **** 			| (0<<PAOC2B) //"Fault Input selected to block _ can act directly
 757:lvds161.c     **** 			| (0<<PAOC2A) // to PSCOUT2x outputs" ???
 758:lvds161.c     **** //TODO: These are related to PSC Clock Sources?! "page 133"
 759:lvds161.c     **** 			//PARUN2 for synchronizing with other PSC's... but there aren't
 760:lvds161.c     **** 						//any that it can sync with (PSCR doesn't), right?
 761:lvds161.c     **** 			| (0<<PCCYC2) // Used during halting... which mightn't be used
 762:lvds161.c     **** 			| (1<<PRUN2)  // START THE PSC
 763:lvds161.c     **** 			;
 764:lvds161.c     **** 
 765:lvds161.c     **** 
 766:lvds161.c     **** 	uint8_t pctl0_val;
 767:lvds161.c     **** 
 768:lvds161.c     **** 	//PCTL0 =
 769:lvds161.c     **** 	pctl0_val =	
 770:lvds161.c     **** 	        (PPREn1<<PPRE01) // \ Prescaler Selection (0 0 = no dividor)
 771:lvds161.c     **** 			| (PPREn0<<PPRE00) // /
 772:lvds161.c     **** 			//PBFM01 for flank-width-modulation, unused
 773:lvds161.c     **** 			// PAOC0B/A for "fault input" tied to PSCOUT's... (?)
 774:lvds161.c     **** 			//PBMF00 combines with PBFM01, above
 775:lvds161.c     **** 			| (0<<PCCYC0) // Used during halting... mightn't get used
 776:lvds161.c     **** 			| (1<<PRUN0)	// START the PSCR
 777:lvds161.c     **** 			;
 778:lvds161.c     **** 
 779:lvds161.c     **** //This value should work with LVDS_PRESCALER=1 and USE_PLL
 780:lvds161.c     **** // As well as LVDS_PRESCALER=1 and NOT USE_PLL
 781:lvds161.c     **** //It's, roughly something to do with 8 being the PLL_MULT_FACTOR
 782:lvds161.c     **** // and 7 being the number of counts before a reset (bits)
 783:lvds161.c     **** // 8*7 = 56, which is a least-common-multiple
 784:lvds161.c     **** // then subtract one cycle because of the actual out instruction...
 785:lvds161.c     **** // So, *maybe* it's as general as ((PLL_MULT_FACTOR * LVDS_NUM_BITS) - 1)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 26


 786:lvds161.c     **** // But then also need to take into account the LVDS_PRESCALER and whatnot.
 787:lvds161.c     **** // And PLL_SYSCLK
 788:lvds161.c     **** 
 789:lvds161.c     **** #if(defined(PLL_SYSCLK) && PLL_SYSCLK)
 790:lvds161.c     ****  //Not sure this math is right...
 791:lvds161.c     ****  // with PLL_SYSCLK we have SYS_CLK = PLL_CLK/4 (not /2)
 792:lvds161.c     ****  // But it did clear-up the yellow-tint on black...
 793:lvds161.c     ****  // Further, shouldn't it have the same effect? 55 would just double the
 794:lvds161.c     ****  // number of nops (which would be redundant)... ish.
 795:lvds161.c     ****  #define PSC_SYNC_CYCLES	((4*7)-1)
 796:lvds161.c     **** #else
 797:lvds161.c     ****  #define PSC_SYNC_CYCLES	55
 798:lvds161.c     **** #endif
 799:lvds161.c     **** 
 800:lvds161.c     **** 
 801:lvds161.c     **** #if ((LVDS_PRESCALER != 1) || (PLL_MULT_FACTOR != 8))
 802:lvds161.c     ****  #error "PSC_SYNC_CYCLES needs to be calculated!"
 803:lvds161.c     **** #endif
 804:lvds161.c     **** 
 805:lvds161.c     **** #if(PSC_SYNC_CYCLES > 127)
 806:lvds161.c     ****  #error "PSC_SYNC_CYCLES must be <= 127..."
 807:lvds161.c     **** #endif
 808:lvds161.c     **** 
 809:lvds161.c     **** //..... lss resumes here...
 810:lvds161.c     **** //Which is OK, since pctln_vals are constants...
 811:lvds161.c     **** 
 812:lvds161.c     **** //	uint8_t pctl2_val = 0x3f;
 813:lvds161.c     **** //	uint8_t pctl0_val = 0x7f;
 814:lvds161.c     **** 	//delayCyc_setup(asdf, (int8_t)PSC_SYNC_CYCLES);
 815:lvds161.c     **** 	delayCyc_setup(asdf, (int8_t)(PSC_SYNC_CYCLES));
 316               		.stabn	68,0,815,.LM21-.LFBB2
 317               	.LM21:
 318 0094 03E1      		ldi r16,lo8(19)
 319               	/* #APP */
 320               	 ;  815 "lvds161.c" 1
 321 0096 E0E0      		ldi r30, lo8(pm(dc_loop_asdf)) ; 
 322 0098 F0E0      		ldi r31, hi8(pm(dc_loop_asdf)) ; 
 323               		
 324               	 ;  0 "" 2
 816:lvds161.c     **** 
 817:lvds161.c     **** 	__asm__ __volatile__
 325               		.stabn	68,0,817,.LM22-.LFBB2
 326               	.LM22:
 327               	/* #NOAPP */
 328 009a 81E0      		ldi r24,lo8(1)
 329               	/* #APP */
 330               	 ;  817 "lvds161.c" 1
 331               		delayCycs_asmInit asdf; 
 331               	>  dc_asm_init_asdf:
 331 009c 9894      	>  clz
 331               	>  dc_asm_init_exit_asdf:
 332 009e 86BB      		out 22, r24 ; 
 333               		delayCycs asdf; 
 333               	>  delayCycs_asdf:
 333 00a0 0994      	>  ijmp
 333               	>  dc_loop_asdf:
 333 00a2 0350      	>  subi r16,3
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 27


 333 00a4 04F4      	>  brge dc_loop_asdf
 333               	>  dc_loopRemainder_asdf:
 333 00a6 0D3F      	>  cpi r16,-3
 333 00a8 01F0      	>  breq dc_done1_asdf
 333 00aa 0E3F      	>  cpi r16,-2
 333 00ac 01F0      	>  breq dc_done_asdf
 333 00ae 0000      	>  nop
 333               	>  dc_done1_asdf:
 333 00b0 0000      	>  nop
 333               	>  dc_done_asdf:
 334 00b2 82BB      		out 18, r24 ; 
 335               		
 336               	 ;  0 "" 2
 337               	/* epilogue start */
 818:lvds161.c     **** 	(
 819:lvds161.c     **** 		"delayCycs_asmInit asdf; \n\t"
 820:lvds161.c     **** 	 	"out %0, %1 ; \n\t"				//Start the PSC2
 821:lvds161.c     **** 		"delayCycs asdf; \n\t"			//Delay for a specific number of cycles
 822:lvds161.c     **** 		"out %2, %3 ; \n\t"				//Start the PSCR
 823:lvds161.c     **** 		:
 824:lvds161.c     **** 		: "I" (_SFR_IO_ADDR(PCTL2)),	//PCTL2 register
 825:lvds161.c     **** 		  "d" (pctl2_val),				//value to write to PCTL2
 826:lvds161.c     **** 		  "I" (_SFR_IO_ADDR(PCTL0)),	//PCTL0 register
 827:lvds161.c     **** 		  "d" (pctl0_val),				//value to write to PCTL0
 828:lvds161.c     **** 		  DC_VARIABLES_FOR_ASM(asdf)	// this is a list of variables used by
 829:lvds161.c     **** 		 										// delayCyc... see delayCyc/test/...
 830:lvds161.c     **** 	);
 831:lvds161.c     **** 
 832:lvds161.c     **** 	//Ignoring the Input Control registers for now...
 833:lvds161.c     **** //TODO: Look into these for syncing PSCR and PSC2
 834:lvds161.c     **** 	// PFRC0A/B, PICR0
 835:lvds161.c     **** 
 836:lvds161.c     **** 	//PIM0: Interrupt Mask Register, unused
 837:lvds161.c     **** 	//PIFR0: Interrupt Flag Register, unused
 838:lvds161.c     **** 
 839:lvds161.c     **** 
 840:lvds161.c     **** }
 338               		.stabn	68,0,840,.LM23-.LFBB2
 339               	.LM23:
 340               	/* #NOAPP */
 341 00b4 0F91      		pop r16
 342 00b6 0895      		ret
 343               		.size	lvds_timerInit, .-lvds_timerInit
 344               		.stabs	"dc_loopCounter_asdf:r(4,1)",64,0,815,16
 345               		.stabs	"dc_jumpTo_asdf:r(0,48)=*(0,47)",64,0,815,30
 346               		.stabn	192,0,0,.LFBB2-.LFBB2
 347               		.stabn	224,0,0,.Lscope2-.LFBB2
 348               	.Lscope2:
 349               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 350               		.stabd	78,0,0
 351               		.stabs	"setColor:F(0,47)",36,0,27,setColor
 352               		.stabs	"red:P(4,2)",64,0,27,24
 353               		.stabs	"green:P(4,2)",64,0,27,22
 354               		.stabs	"blue:P(4,2)",64,0,27,20
 355               		.stabs	"row:P(4,2)",64,0,28,18
 356               		.stabs	"col:P(4,2)",64,0,28,16
 357               	.global	setColor
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 28


 358               		.type	setColor, @function
 359               	setColor:
 360               		.stabd	46,0,0
 361               		.stabs	"./_options/frameBuffer.c",132,0,0,.Ltext5
 362               	.Ltext5:
   1:./_options/frameBuffer.c **** /* mehPL:
   2:./_options/frameBuffer.c ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:./_options/frameBuffer.c ****  *    I'm not too fond of long licenses at the top of the file.
   4:./_options/frameBuffer.c ****  *    Please see the bottom.
   5:./_options/frameBuffer.c ****  *    Enjoy!
   6:./_options/frameBuffer.c ****  */
   7:./_options/frameBuffer.c **** 
   8:./_options/frameBuffer.c **** 
   9:./_options/frameBuffer.c **** //Please see writeColor.c
  10:./_options/frameBuffer.c **** 
  11:./_options/frameBuffer.c **** 
  12:./_options/frameBuffer.c **** //drawPix from program memory
  13:./_options/frameBuffer.c **** //a/0 v60: Again, unused for its original purpose, but tightly intertwined
  14:./_options/frameBuffer.c **** // in old code that's still being (mis)used...
  15:./_options/frameBuffer.c **** #define FB_WIDTH 16
  16:./_options/frameBuffer.c **** #define FB_HEIGHT 16
  17:./_options/frameBuffer.c **** uint8_t frameBuffer[FB_HEIGHT][FB_WIDTH];
  18:./_options/frameBuffer.c **** 
  19:./_options/frameBuffer.c **** 
  20:./_options/frameBuffer.c **** 
  21:./_options/frameBuffer.c **** //AHHH it wasn't IMAGE_BUFFER that's entangled, but IMAGE_CHANGE
  22:./_options/frameBuffer.c **** // which is even weirder.
  23:./_options/frameBuffer.c **** 
  24:./_options/frameBuffer.c **** //This was #if'd into existence with IMAGE_BUFFER, but since it's only been
  25:./_options/frameBuffer.c **** // used with frameBuffer, and since IMAGE_BUFFER is somewhat entangled with
  26:./_options/frameBuffer.c **** // newer stuff, I'm putting it here and NOT including this file, (yet)
  27:./_options/frameBuffer.c **** void setColor(uint8_t red, uint8_t green, uint8_t blue, 
  28:./_options/frameBuffer.c ****                uint8_t row, uint8_t col)
  29:./_options/frameBuffer.c **** {
 363               		.stabn	68,0,29,.LM24-.LFBB3
 364               	.LM24:
 365               	.LFBB3:
 366 00b8 0F93      		push r16
 367               	/* prologue: function */
 368               	/* frame size = 0 */
 369               	/* stack size = 1 */
 370               	.L__stack_usage = 1
  30:./_options/frameBuffer.c ****    red = (red > 3) ? 3 : red;
  31:./_options/frameBuffer.c ****    green = (green > 3) ? 3 : green;
  32:./_options/frameBuffer.c ****    blue = (blue > 3) ? 3 : blue;
  33:./_options/frameBuffer.c **** 
  34:./_options/frameBuffer.c ****    frameBuffer[row][col] = red | ((green)<<2) | ((blue)<<4);
 371               		.stabn	68,0,34,.LM25-.LFBB3
 372               	.LM25:
 373 00ba 90E1      		ldi r25,lo8(16)
 374 00bc 299F      		mul r18,r25
 375 00be F001      		movw r30,r0
 376 00c0 1124      		clr __zero_reg__
 377 00c2 E00F      		add r30,r16
 378 00c4 F11D      		adc r31,__zero_reg__
 379 00c6 E050      		subi r30,lo8(-(frameBuffer))
 380 00c8 F040      		sbci r31,hi8(-(frameBuffer))
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 29


  32:./_options/frameBuffer.c **** 
 381               		.stabn	68,0,32,.LM26-.LFBB3
 382               	.LM26:
 383 00ca 4430      		cpi r20,lo8(4)
 384 00cc 00F0      		brlo .L8
 385 00ce 43E0      		ldi r20,lo8(3)
 386               	.L8:
 387               		.stabn	68,0,34,.LM27-.LFBB3
 388               	.LM27:
 389 00d0 90E1      		ldi r25,lo8(16)
 390 00d2 499F      		mul r20,r25
 391 00d4 9001      		movw r18,r0
 392 00d6 1124      		clr __zero_reg__
  30:./_options/frameBuffer.c ****    red = (red > 3) ? 3 : red;
 393               		.stabn	68,0,30,.LM28-.LFBB3
 394               	.LM28:
 395 00d8 8430      		cpi r24,lo8(4)
 396 00da 00F0      		brlo .L9
 397 00dc 83E0      		ldi r24,lo8(3)
 398               	.L9:
 399               		.stabn	68,0,34,.LM29-.LFBB3
 400               	.LM29:
 401 00de 282B      		or r18,r24
  31:./_options/frameBuffer.c ****    blue = (blue > 3) ? 3 : blue;
 402               		.stabn	68,0,31,.LM30-.LFBB3
 403               	.LM30:
 404 00e0 6430      		cpi r22,lo8(4)
 405 00e2 00F0      		brlo .L10
 406 00e4 63E0      		ldi r22,lo8(3)
 407               	.L10:
 408               		.stabn	68,0,34,.LM31-.LFBB3
 409               	.LM31:
 410 00e6 84E0      		ldi r24,lo8(4)
 411 00e8 689F      		mul r22,r24
 412 00ea B001      		movw r22,r0
 413 00ec 1124      		clr __zero_reg__
 414 00ee 622B      		or r22,r18
 415 00f0 6083      		st Z,r22
 416               	/* epilogue start */
  35:./_options/frameBuffer.c **** }
 417               		.stabn	68,0,35,.LM32-.LFBB3
 418               	.LM32:
 419 00f2 0F91      		pop r16
 420 00f4 0895      		ret
 421               		.size	setColor, .-setColor
 422               	.Lscope3:
 423               		.stabs	"",36,0,0,.Lscope3-.LFBB3
 424               		.stabd	78,0,0
 425               		.stabs	"frameBufferInit:F(0,47)",36,0,51,frameBufferInit
 426               	.global	frameBufferInit
 427               		.type	frameBufferInit, @function
 428               	frameBufferInit:
 429               		.stabd	46,0,0
  36:./_options/frameBuffer.c **** 
  37:./_options/frameBuffer.c **** 
  38:./_options/frameBuffer.c **** 
  39:./_options/frameBuffer.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 30


  40:./_options/frameBuffer.c **** //Called as: pgm_readImageByte(pgm_image1, row, col)
  41:./_options/frameBuffer.c **** #define pgm_readImageByte(image, row, col)   \
  42:./_options/frameBuffer.c ****       pgm_read_byte((uint8_t *)(&((image)[(row)*FB_WIDTH+(col)])))
  43:./_options/frameBuffer.c **** 
  44:./_options/frameBuffer.c **** 
  45:./_options/frameBuffer.c **** 
  46:./_options/frameBuffer.c **** 
  47:./_options/frameBuffer.c **** // This stuff was located in main() before the while loop...
  48:./_options/frameBuffer.c **** // #if !COLOR_BAR_SCROLL... (which is *nearly every case* including 
  49:./_options/frameBuffer.c **** //  RowSegBuffer, etc)
  50:./_options/frameBuffer.c **** // it's long-since been commented-out...
  51:./_options/frameBuffer.c **** void frameBufferInit(void)
  52:./_options/frameBuffer.c **** {
 430               		.stabn	68,0,52,.LM33-.LFBB4
 431               	.LM33:
 432               	.LFBB4:
 433               	/* prologue: function */
 434               	/* frame size = 0 */
 435               	/* stack size = 0 */
 436               	.L__stack_usage = 0
 437 00f6 0895      		ret
 438               		.size	frameBufferInit, .-frameBufferInit
 439               	.Lscope4:
 440               		.stabs	"",36,0,0,.Lscope4-.LFBB4
 441               		.stabd	78,0,0
 442               		.stabs	"nonRSB_drawPix:F(0,47)",36,0,313,nonRSB_drawPix
 443               		.stabs	"rowNum:P(4,4)",64,0,313,24
 444               	.global	nonRSB_drawPix
 445               		.type	nonRSB_drawPix, @function
 446               	nonRSB_drawPix:
 447               		.stabd	46,0,0
 448               		.stabs	"_options/writeColor.c",132,0,0,.Ltext6
 449               	.Ltext6:
   1:_options/writeColor.c **** /* mehPL:
   2:_options/writeColor.c ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:_options/writeColor.c ****  *    I'm not too fond of long licenses at the top of the file.
   4:_options/writeColor.c ****  *    Please see the bottom.
   5:_options/writeColor.c ****  *    Enjoy!
   6:_options/writeColor.c ****  */
   7:_options/writeColor.c **** 
   8:_options/writeColor.c **** 
   9:_options/writeColor.c **** //writeColor() is a hokey method to draw individual pixels from a buffer,
  10:_options/writeColor.c **** //either a row-buffer or a frame-buffer.
  11:_options/writeColor.c **** // I say "hokey" because the associated drawPix() function has individual
  12:_options/writeColor.c **** // calls to writeColor(), rather than putting them in a for-loop... in
  13:_options/writeColor.c **** // order to save instruction-cycles, and increase resolution...
  14:_options/writeColor.c **** 
  15:_options/writeColor.c **** //As-Implemented
  16:_options/writeColor.c **** //Frame-Buffer:
  17:_options/writeColor.c **** // The pixels' color-data are stored in this buffer, two bits each R,G,B.
  18:_options/writeColor.c **** // Thus, it's easy to write a color-value, but all processing to convert
  19:_options/writeColor.c **** // that color-value into register-settings is done *during* the drawing...
  20:_options/writeColor.c **** // So, it's pretty slow to process each "pixel", and thus each pixel in the
  21:_options/writeColor.c **** // buffer is stretched horizontally across *several* physical LCD pixels
  22:_options/writeColor.c **** //Row-Buffer:
  23:_options/writeColor.c **** // This should be called "Row-Settings-Buffer" or something similar...
  24:_options/writeColor.c **** // The pixels' color-data is stored as packed register-values to be written
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 31


  25:_options/writeColor.c **** // at the time of drawing. The buffer itself does *not* consist of raw
  26:_options/writeColor.c **** // color-values, so it is a bit more difficult to explain.
  27:_options/writeColor.c **** // It still takes several instructions to load the registers for each
  28:_options/writeColor.c **** // color, so it still stretches each "pixel" across several LCD pixels.
  29:_options/writeColor.c **** // But it's significantly faster, so the horizontal resolution is higher.
  30:_options/writeColor.c **** 
  31:_options/writeColor.c **** 
  32:_options/writeColor.c **** //For Red and Green (NOT Blue) This enables four shades, instead of three
  33:_options/writeColor.c **** // (including black)
  34:_options/writeColor.c **** // Doing so increases pixel-processing time, thus the pixel-widths
  35:_options/writeColor.c **** // (thus decreasing resolution)
  36:_options/writeColor.c **** // each color takes 9 cycles to process in three-shade mode
  37:_options/writeColor.c **** // or 12 cycles for red and green, plus 9 for blue in four-shade mode
  38:_options/writeColor.c **** // a/o v59: I don't think this does anything in ROW_SEG_BUFFER
  39:_options/writeColor.c **** #define FOUR_SHADES TRUE
  40:_options/writeColor.c **** 
  41:_options/writeColor.c **** #if(defined(FOUR_SHADES) && FOUR_SHADES)
  42:_options/writeColor.c ****  //a/o v60
  43:_options/writeColor.c ****  //I can't find this anywhere else... Might not be looking hard enough
  44:_options/writeColor.c ****  #define	NUM_COLORS	(4*4*3) //48
  45:_options/writeColor.c **** #else
  46:_options/writeColor.c ****  #define NUM_COLORS (3*3*3) //27
  47:_options/writeColor.c **** #endif
  48:_options/writeColor.c **** 
  49:_options/writeColor.c **** 
  50:_options/writeColor.c **** 
  51:_options/writeColor.c **** #if(!defined(ROW_BUFFER) || !ROW_BUFFER)
  52:_options/writeColor.c **** #include "_options/frameBuffer.c"
  53:_options/writeColor.c **** #endif
  54:_options/writeColor.c **** 
  55:_options/writeColor.c **** 
  56:_options/writeColor.c **** 
  57:_options/writeColor.c **** 
  58:_options/writeColor.c **** // LVDS/FPD-Link timing:
  59:_options/writeColor.c **** 
  60:_options/writeColor.c **** //            |<--- (LCDdirectLVDS: "pixel") --->|
  61:_options/writeColor.c **** //  Timer1:   |<-- One Timer1 Cycle (OCR1C=6) -->|
  62:_options/writeColor.c **** //  TCNT:     |  0   1    2    3    4    5    6  |  0   1    2    3    
  63:_options/writeColor.c **** //            |____.____.____.____               |____.____.____.____
  64:_options/writeColor.c **** //  RXclk+:   /         |         \    .    .    /         |         \ //
  65:_options/writeColor.c **** //            |         |          ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|         |
  66:_options/writeColor.c **** // One Pixel: |         |<--- One FPD-Link Pixel Cycle --->|
  67:_options/writeColor.c **** //            |                                  |
  68:_options/writeColor.c **** // "Blue/DVH" |____ ____v____ ____ ____v____ ____|____ ____
  69:_options/writeColor.c **** //  RXin2:    X B3 X B2 X DE X /V X /H X B5 X B4 X B3 X B2 X ...
  70:_options/writeColor.c **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯
  71:_options/writeColor.c **** //            |         |<--Not Blue-->|         |
  72:_options/writeColor.c **** //            |                                  |
  73:_options/writeColor.c **** // "Green"    |____ ____v____ ____v____ ____ ____|____ ____
  74:_options/writeColor.c **** //  RXin1:    X G2 X G1 X B1 X B0 X G5 X G4 X G3 X G2 X G1 X ...
  75:_options/writeColor.c **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯ 
  76:_options/writeColor.c **** //            |         |<------->|-Not Green    |
  77:_options/writeColor.c **** //
  78:_options/writeColor.c **** // "Red"      |____ ____v____v____ ____ ____ ____|____ ____
  79:_options/writeColor.c **** //  RXin0:    X R1 X R0 X G0 X R5 X R4 X R3 X R2 X R1 X R0 X ...
  80:_options/writeColor.c **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯
  81:_options/writeColor.c **** //            |         |<-->|-Not Red
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 32


  82:_options/writeColor.c **** //
  83:_options/writeColor.c **** //   Of course: The Not Green/Red bits above are low-bits and
  84:_options/writeColor.c **** //              basically have little/no visible effect
  85:_options/writeColor.c **** //
  86:_options/writeColor.c **** //
  87:_options/writeColor.c **** 
  88:_options/writeColor.c **** 
  89:_options/writeColor.c **** 
  90:_options/writeColor.c **** 
  91:_options/writeColor.c **** //#if(!defined(ROW_SEG_BUFFER) || !ROW_SEG_BUFFER)
  92:_options/writeColor.c **** 
  93:_options/writeColor.c **** #if(defined(__AVR_AT90PWM161__))
  94:_options/writeColor.c ****  #define WRITE_COLOR_CYCS 56
  95:_options/writeColor.c ****  //This value determined from .lss
  96:_options/writeColor.c ****  // probably not 100% accurate.
  97:_options/writeColor.c ****  //And kinda surprising it's so much more than the others...
  98:_options/writeColor.c **** #else
  99:_options/writeColor.c ****  #if(defined(ROW_BUFFER) && ROW_BUFFER)
 100:_options/writeColor.c ****  //THIS IS JUST AN ESTIMATE
 101:_options/writeColor.c ****   #define WRITE_COLOR_CYCS   (13)
 102:_options/writeColor.c ****  #elif(defined(FOUR_SHADES) && FOUR_SHADES)
 103:_options/writeColor.c ****   // Roughly...
 104:_options/writeColor.c ****   #define WRITE_COLOR_CYCS   (12*2+9+3)
 105:_options/writeColor.c ****  #else
 106:_options/writeColor.c ****   // Roughly...
 107:_options/writeColor.c ****   #define WRITE_COLOR_CYCS   (9*3+3)
 108:_options/writeColor.c ****  #endif
 109:_options/writeColor.c **** #endif
 110:_options/writeColor.c **** 
 111:_options/writeColor.c **** // DE_CYC = FB_WIDTH * ( WRITE_COLOR_CYCS + WRITE_COLOR_DELAY )
 112:_options/writeColor.c **** // DE_CYC/FB_WIDTH = WRITE_COLOR_CYCS + WRITE_COLOR_DELAY
 113:_options/writeColor.c **** // WRITE_COLOR_DELAY = DE_CYC/FB_WIDTH - WRITE_COLOR_CYCS
 114:_options/writeColor.c **** // Not sure why -4 is necessary... overhead in delayCyc?
 115:_options/writeColor.c **** #define WRITE_COLOR_DELAY \
 116:_options/writeColor.c **** 	( DOTS_TO_CYC(DE_ACTIVE_DOTS) / FB_WIDTH - WRITE_COLOR_CYCS-4)
 117:_options/writeColor.c **** #if((WRITE_COLOR_DELAY < 0) || (WRITE_COLOR_DELAY >127))
 118:_options/writeColor.c ****  #define WRITE_COLOR_DELAY 0
 119:_options/writeColor.c ****  #warning "problem here..."
 120:_options/writeColor.c **** // #error "problem here..."
 121:_options/writeColor.c **** #endif
 122:_options/writeColor.c **** 
 123:_options/writeColor.c **** //load a color-value from the frame/row buffer and write the registers
 124:_options/writeColor.c **** 
 125:_options/writeColor.c **** 
 126:_options/writeColor.c **** 
 127:_options/writeColor.c **** 
 128:_options/writeColor.c **** static __inline__ 
 129:_options/writeColor.c **** void writeColor(uint8_t includeDelay, uint8_t colorVal) 
 130:_options/writeColor.c **** 	__attribute__((__always_inline__));
 131:_options/writeColor.c **** 
 132:_options/writeColor.c **** #if(defined(__AVR_AT90PWM161__))
 133:_options/writeColor.c **** 
 134:_options/writeColor.c ****  void writeColor(uint8_t includeDelay, uint8_t colorVal)
 135:_options/writeColor.c ****  {
 136:_options/writeColor.c **** 	uint8_t redVal = colorVal & 0x03;
 137:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 138:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 33


 139:_options/writeColor.c **** 
 140:_options/writeColor.c **** 	setRed4(redVal);
 141:_options/writeColor.c **** 	setGreen4(greenVal);
 142:_options/writeColor.c **** 	setBlue4(blueVal);
 143:_options/writeColor.c **** 
 144:_options/writeColor.c **** 	if(includeDelay)
 145:_options/writeColor.c **** 		delay_cyc(WRITE_COLOR_DELAY);		
 146:_options/writeColor.c **** 
 147:_options/writeColor.c ****  }
 148:_options/writeColor.c **** #if 0
 149:_options/writeColor.c ****  void writeColor(uint8_t includeDelay, uint8_t colorVal)
 150:_options/writeColor.c ****  {
 151:_options/writeColor.c **** 
 152:_options/writeColor.c **** #if(defined(ROW_BUFFER) && ROW_BUFFER)
 153:_options/writeColor.c **** 	#error "ROW_BUFFER is NYI for the PWM161"
 154:_options/writeColor.c **** #endif
 155:_options/writeColor.c **** 
 156:_options/writeColor.c **** 
 157:_options/writeColor.c **** 	 //This is pieced-together from the ATTiny861's writeColor()
 158:_options/writeColor.c **** 	 // and memory...
 159:_options/writeColor.c **** 
 160:_options/writeColor.c **** 	 //The basic idea is to set a color in a specific/non-varying number of
 161:_options/writeColor.c **** 	 //instruction-cycles.
 162:_options/writeColor.c **** 	 // Thus, we can't use "if" statements, etc, without paying attention to
 163:_options/writeColor.c **** 	 // the actual assembly output.
 164:_options/writeColor.c **** 	 // Additionally, it would be nice to know exactly how many cycles the
 165:_options/writeColor.c **** 	 // entire function-call takes, so we can determine the number of pixels
 166:_options/writeColor.c **** 	 // that can fit in a DE-active period... 
 167:_options/writeColor.c **** 	 // (How many writeColor() calls can fit horizontally)
 168:_options/writeColor.c **** 	 // Further still, this function is "always inline"
 169:_options/writeColor.c **** 	 // which means that it will be optimized in each usage...
 170:_options/writeColor.c **** 	 // which means that it might compile differently in different calls
 171:_options/writeColor.c **** 	 // (e.g. if one call has a constant-argument and another has a
 172:_options/writeColor.c **** 	 // variable)
 173:_options/writeColor.c **** 	 // which is another reason to use inline-assembly, to assure it's the
 174:_options/writeColor.c **** 	 // exact same number of clock-cycles each time.
 175:_options/writeColor.c **** 	 // That's reserved for later...
 176:_options/writeColor.c **** 
 177:_options/writeColor.c **** 	 // FURTHER STILL:
 178:_options/writeColor.c **** 	 // the optimizer reorganizes things... duh.
 179:_options/writeColor.c **** 	 // Which means that even though these calculations are listed at the
 180:_options/writeColor.c **** 	 // top of the function...
 181:_options/writeColor.c **** 	 // their actual instructions may not occur until later.
 182:_options/writeColor.c **** 	 // The write to OCR-registers would ideally occur simultaneously
 183:_options/writeColor.c **** 	 // such that the red/green/blue edges would align
 184:_options/writeColor.c **** 	 // Without doing this in ASM, we can't guarantee (and I've seen
 185:_options/writeColor.c **** 	 // first-hand) that it can't happen that one OCR is written, the next
 186:_options/writeColor.c **** 	 // is calculated, *then* the next is written.
 187:_options/writeColor.c **** 
 188:_options/writeColor.c **** 	 //First, unpack the colors:
 189:_options/writeColor.c **** 	 uint8_t redVal = colorVal&0x03;
 190:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 191:_options/writeColor.c **** 	 //uint8_t blueVal = (colorVal>>4)&0x03;
 192:_options/writeColor.c **** 	 //The above is optimized below by combining two of the
 193:_options/writeColor.c **** 	 //blue-shifts... It should be smaller
 194:_options/writeColor.c **** 	 uint8_t bgTemp = colorVal>>2;
 195:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 34


 196:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 197:_options/writeColor.c **** 
 198:_options/writeColor.c **** 	 //Now prep some variables for the register-values
 199:_options/writeColor.c **** 	 // the actual registers will be written all at once at the end
 200:_options/writeColor.c **** 
 201:_options/writeColor.c **** 	 //see setRed4() and setGreen4()...
 202:_options/writeColor.c **** 	 uint8_t redOCR_val   = (redVal + 2);
 203:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 204:_options/writeColor.c **** 
 205:_options/writeColor.c **** 	 //Blue is more difficult, it requires a test
 206:_options/writeColor.c **** 	 // which, when compiled, would likely result in two branches that take
 207:_options/writeColor.c **** 	 // different numbers of clock-cycles
 208:_options/writeColor.c **** 	 uint8_t blueOCR_val = (blueVal + 4);
 209:_options/writeColor.c **** 
 210:_options/writeColor.c **** 	 // So far, none of the above code has any branches (right?)
 211:_options/writeColor.c **** 	 // So it should be a constant number of clock-cycles
 212:_options/writeColor.c **** 	 // (unless an inline-call has a constant as an argument!)
 213:_options/writeColor.c **** 
 214:_options/writeColor.c **** 	 //The following is nothing more than 
 215:_options/writeColor.c **** 	 // if (blueVal == 3) 
 216:_options/writeColor.c **** 	 //     blueOCR_val=8;
 217:_options/writeColor.c **** 
 218:_options/writeColor.c **** 
 219:_options/writeColor.c **** 	 //This is NOT AT ALL optimized:
 220:_options/writeColor.c **** 	 // But it is guaranteed to be exactly 3 cycles *in each branch*
 221:_options/writeColor.c **** __asm__ __volatile__
 222:_options/writeColor.c **** 	(                                                        // cycles
 223:_options/writeColor.c **** 	 "cpi   %1, 3 ; \n\t"				// (blueVal == 3) ?     //    1
 224:_options/writeColor.c **** 	 "brne  nothingToDo_%= ; \n\t"	// N: skip next line    // N:2  Y:1
 225:_options/writeColor.c **** 	 "ldi   %0, 6 ; \n\t"            //   blueOCR_val=8      //   .    1
 226:_options/writeColor.c ****   "nothingToDo_%=: \n\t"            // just a jump-to label //   0    0
 227:_options/writeColor.c ****     : "=r" (blueOCR_val) //blueOCR_val is an output-value, "%0"
 228:_options/writeColor.c **** 	 : "r" (blueVal)		//blueVal is an input-value, "%1"
 229:_options/writeColor.c **** 	);
 230:_options/writeColor.c **** 
 231:_options/writeColor.c **** 	//Now all the OCR_val variables are set
 232:_options/writeColor.c **** 	// write them to the registers
 233:_options/writeColor.c **** 	// Locking/unlocking of the PSCs can't occur simultaneously,
 234:_options/writeColor.c **** 	// so it's likely there will be a pixel or two of difference between the
 235:_options/writeColor.c **** 	// transition from one value of blue to the next vs red/green's
 236:_options/writeColor.c **** 	// transition
 237:_options/writeColor.c **** 	lockPSC2();
 238:_options/writeColor.c **** 	lockPSC0();
 239:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 240:_options/writeColor.c **** //		OCR0SA = redOCR_val;
 241:_options/writeColor.c **** //		OCR0SB = greenOCR_val;
 242:_options/writeColor.c **** //"When addressing the I/O Registers as data space using LD and ST
 243:_options/writeColor.c **** // instructions, 0x20 must be added to these addresses"
 244:_options/writeColor.c **** //"For the Extended I/O space from 0x60-0xFF in SRAM, only the ST... and
 245:_options/writeColor.c **** //LD... instructions can be used"
 246:_options/writeColor.c **** // So, rather than using _SFR_IO_ADDR(), use _SFR_MEM_ADDR()
 247:_options/writeColor.c **** 		__asm__ __volatile__
 248:_options/writeColor.c **** 		(
 249:_options/writeColor.c **** 		 "sts %3, %0; \n\t"
 250:_options/writeColor.c **** 		 "sts %4, %1; \n\t"
 251:_options/writeColor.c **** 		 "sts %5, %2; \n\t"
 252:_options/writeColor.c **** 		 :
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 35


 253:_options/writeColor.c **** 		 : "r" (blueOCR_val),	//"%0"
 254:_options/writeColor.c **** 		   "r" (redOCR_val),		//"%1"
 255:_options/writeColor.c **** 			"r" (greenOCR_val),	//"%2"
 256:_options/writeColor.c **** 			"M" (_SFR_MEM_ADDR(OCR2RAL)), //"%3" //0x2e (0x4e)
 257:_options/writeColor.c **** 			"M" (_SFR_MEM_ADDR(OCR0SAL)), //"%4"	//(0x60)
 258:_options/writeColor.c **** 			"M" (_SFR_MEM_ADDR(OCR0SBL)) //"%5"  //0x22 (0x42)
 259:_options/writeColor.c **** 
 260:_options/writeColor.c **** 		);
 261:_options/writeColor.c **** 	unlockPSC0();
 262:_options/writeColor.c **** 	unlockPSC2();
 263:_options/writeColor.c **** 
 264:_options/writeColor.c **** 
 265:_options/writeColor.c **** 	//"Attempt to stretch across the full screen"
 266:_options/writeColor.c **** 	// Not sure if/where this is used... 
 267:_options/writeColor.c **** 	if(includeDelay)
 268:_options/writeColor.c **** 		delay_cyc(WRITE_COLOR_DELAY);
 269:_options/writeColor.c ****  }
 270:_options/writeColor.c **** #endif
 271:_options/writeColor.c **** 
 272:_options/writeColor.c **** 
 273:_options/writeColor.c **** 
 274:_options/writeColor.c **** #endif
 275:_options/writeColor.c **** 
 276:_options/writeColor.c **** 
 277:_options/writeColor.c **** 
 278:_options/writeColor.c **** 
 279:_options/writeColor.c **** 
 280:_options/writeColor.c **** 
 281:_options/writeColor.c **** 
 282:_options/writeColor.c **** 
 283:_options/writeColor.c **** 
 284:_options/writeColor.c **** 
 285:_options/writeColor.c **** /*
 286:_options/writeColor.c **** static __inline__ \
 287:_options/writeColor.c **** void writeColor(uint8_t includeDelay, uint8_t colorVal) \
 288:_options/writeColor.c ****      __attribute__((__always_inline__));
 289:_options/writeColor.c **** */
 290:_options/writeColor.c **** 
 291:_options/writeColor.c **** 
 292:_options/writeColor.c **** 
 293:_options/writeColor.c **** //This drawPix was developed before RowSegBuffer
 294:_options/writeColor.c **** // there are two versions included: RowBuffer and FrameBuffer
 295:_options/writeColor.c **** // which function almost identically as far as this function's concerned
 296:_options/writeColor.c **** 
 297:_options/writeColor.c **** // After writeColor()s are called, the remaining is (a/o v60) identical
 298:_options/writeColor.c **** // to rsb_drawPix, as it was a result of an:
 299:_options/writeColor.c **** //#if(!ROW_SEG_BUFFER)
 300:_options/writeColor.c **** // void drawPix(uint8_t rowNum)
 301:_options/writeColor.c **** // {
 302:_options/writeColor.c **** //  	do writeColorStuff...
 303:_options/writeColor.c **** //#else
 304:_options/writeColor.c **** // void drawPix(uint8_t rowNum)
 305:_options/writeColor.c **** // {
 306:_options/writeColor.c **** //		do rowSegBufferStuff...
 307:_options/writeColor.c **** //#endif
 308:_options/writeColor.c **** //    do remaining Stuff...
 309:_options/writeColor.c **** // }
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 36


 310:_options/writeColor.c **** 
 311:_options/writeColor.c **** // But nonRSB stuff hasn't been tested in quite some time...
 312:_options/writeColor.c **** 
 313:_options/writeColor.c **** void nonRSB_drawPix(uint16_t rowNum)
 314:_options/writeColor.c **** {
 450               		.stabn	68,0,314,.LM34-.LFBB5
 451               	.LM34:
 452               	.LFBB5:
 453               	/* prologue: function */
 454               	/* frame size = 0 */
 455               	/* stack size = 0 */
 456               	.L__stack_usage = 0
 315:_options/writeColor.c ****    //uint8_t *setting = &(settingBuffer[rowNum][0]);
 316:_options/writeColor.c **** #if(defined(ROW_BUFFER) && ROW_BUFFER)
 317:_options/writeColor.c ****    uint8_t *color = &(rowBuffer[0]);
 318:_options/writeColor.c **** #else
 319:_options/writeColor.c **** 	rowNum = rowNum*FB_HEIGHT / V_COUNT;
 457               		.stabn	68,0,319,.LM35-.LFBB5
 458               	.LM35:
 459 00f8 24E0      		ldi r18,4
 460               		1:
 461 00fa 880F      		lsl r24
 462 00fc 991F      		rol r25
 463 00fe 2A95      		dec r18
 464 0100 01F4      		brne 1b
 465 0102 60E0      		ldi r22,0
 466 0104 73E0      		ldi r23,lo8(3)
 467 0106 0E94 0000 		call __udivmodhi4
 468 010a FB01      		movw r30,r22
 320:_options/writeColor.c **** //	rowNum &= 0x0f;
 321:_options/writeColor.c **** 	uint8_t *color = &(frameBuffer[rowNum][0]);
 469               		.stabn	68,0,321,.LM36-.LFBB5
 470               	.LM36:
 471 010c 34E0      		ldi r19,4
 472               		1:
 473 010e EE0F      		lsl r30
 474 0110 FF1F      		rol r31
 475 0112 3A95      		dec r19
 476 0114 01F4      		brne 1b
 477 0116 E050      		subi r30,lo8(-(frameBuffer))
 478 0118 F040      		sbci r31,hi8(-(frameBuffer))
 322:_options/writeColor.c **** #endif
 323:_options/writeColor.c **** 
 324:_options/writeColor.c **** 	//a/o v67:
 325:_options/writeColor.c **** 	// WTF... this didn't work without DEonly_init();
 326:_options/writeColor.c **** 	// despite the fact that writeColor() on the 161 sets DE?!
 327:_options/writeColor.c **** 	// AND it worked on the Tiny861 without this?!
 328:_options/writeColor.c **** 	// No... writeColor doesn't change one register, which needs to be set
 329:_options/writeColor.c **** 	// for blue...
 330:_options/writeColor.c **** 	DEonly_init();
 479               		.stabn	68,0,330,.LM37-.LFBB5
 480               	.LM37:
 481 011a AD9A      		sbi 0x15,5
 482 011c 81E0      		ldi r24,lo8(1)
 483 011e 90E0      		ldi r25,0
 484 0120 9093 6500 		sts 100+1,r25
 485 0124 8093 6400 		sts 100,r24
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 37


 486 0128 84E0      		ldi r24,lo8(4)
 487 012a 90E0      		ldi r25,0
 488 012c 9FBD      		out 0x2e+1,r25
 489 012e 8EBD      		out 0x2e,r24
 490 0130 AD98      		cbi 0x15,5
 331:_options/writeColor.c **** 	//lockPSC2();
 332:_options/writeColor.c **** 	//OCR2SA=1;	//WTF, 0 doesn't work?!
 333:_options/writeColor.c **** 	//OCR2RA=4;
 334:_options/writeColor.c **** 	//unlockPSC2();
 335:_options/writeColor.c ****    /*
 336:_options/writeColor.c ****       DEonly_fromNada();
 337:_options/writeColor.c ****       //Enable complementary-output for Green (on /OC1B, where CLK is OC1B)
 338:_options/writeColor.c ****       TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
 339:_options/writeColor.c ****                | (0<<COM1B1) | (1<<COM1B0)
 340:_options/writeColor.c ****                | (1<<PWM1A) | (1<<PWM1B) );
 341:_options/writeColor.c ****    */
 342:_options/writeColor.c ****       //The Greenish-bar on the left is due to the time it takes to execute
 343:_options/writeColor.c ****       // the first writeColor (since its value is only written at the END)
 344:_options/writeColor.c ****       // Thus the greenish-bar is about one write-color wide...
 345:_options/writeColor.c **** 
 346:_options/writeColor.c ****    //Judging by some weird experiences re v21/22,
 347:_options/writeColor.c ****    // it's not entirely likely this will be predictable
 348:_options/writeColor.c ****    // it may try to recalculate the Z register between writeBlues...
 349:_options/writeColor.c ****    // hopefully not, for now. I should probably assemblify this
 350:_options/writeColor.c ****       writeColor(FALSE, *(color+0));
 491               		.stabn	68,0,350,.LM38-.LFBB5
 492               	.LM38:
 493 0132 8081      		ld r24,Z
 494               	.LBB124:
 495               	.LBB125:
 138:_options/writeColor.c **** 
 496               		.stabn	68,0,138,.LM39-.LFBB5
 497               	.LM39:
 498 0134 482F      		mov r20,r24
 499 0136 4295      		swap r20
 500 0138 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 501               		.stabn	68,0,140,.LM40-.LFBB5
 502               	.LM40:
 503 013a 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 504               		.stabn	68,0,136,.LM41-.LFBB5
 505               	.LM41:
 506 013c 282F      		mov r18,r24
 507 013e 2370      		andi r18,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 508               		.stabn	68,0,140,.LM42-.LFBB5
 509               	.LM42:
 510 0140 30E0      		ldi r19,0
 511 0142 2E5F      		subi r18,-2
 512 0144 3F4F      		sbci r19,-1
 513 0146 3093 6100 		sts 96+1,r19
 514 014a 2093 6000 		sts 96,r18
 515 014e 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 516               		.stabn	68,0,141,.LM43-.LFBB5
 517               	.LM43:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 38


 518 0150 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 519               		.stabn	68,0,137,.LM44-.LFBB5
 520               	.LM44:
 521 0152 8695      		lsr r24
 522 0154 8695      		lsr r24
 523 0156 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 524               		.stabn	68,0,141,.LM45-.LFBB5
 525               	.LM45:
 526 0158 90E0      		ldi r25,0
 527 015a 0396      		adiw r24,3
 528 015c 93BD      		out 0x22+1,r25
 529 015e 82BD      		out 0x22,r24
 530 0160 8D98      		cbi 0x11,5
 531               	.LBB126:
 142:_options/writeColor.c **** 
 532               		.stabn	68,0,142,.LM46-.LFBB5
 533               	.LM46:
 534 0162 4330      		cpi r20,lo8(3)
 535 0164 01F0      		breq .L61
 536 0166 4C5F      		subi r20,lo8(-(4))
 537 0168 00C0      		rjmp .L13
 538               	.L61:
 539 016a 48E0      		ldi r20,lo8(8)
 540               	.L13:
 541 016c AD9A      		sbi 0x15,5
 542 016e 842F      		mov r24,r20
 543 0170 90E0      		ldi r25,0
 544 0172 9FBD      		out 0x2e+1,r25
 545 0174 8EBD      		out 0x2e,r24
 546 0176 AD98      		cbi 0x15,5
 547 0178 87E0      		ldi r24,lo8(7)
 548 017a 90E0      		ldi r25,0
 549               	.L15:
 550               	.LBE126:
 551               	.LBE125:
 552               	.LBE124:
 553               	.LBB127:
 554               	.LBB128:
 555               		.stabs	"delay_cyc.c",132,0,0,.Ltext7
 556               	.Ltext7:
   1:delay_cyc.c   **** /* mehPL:
   2:delay_cyc.c   ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:delay_cyc.c   ****  *    I'm not too fond of long licenses at the top of the file.
   4:delay_cyc.c   ****  *    Please see the bottom.
   5:delay_cyc.c   ****  *    Enjoy!
   6:delay_cyc.c   ****  */
   7:delay_cyc.c   **** 
   8:delay_cyc.c   **** 
   9:delay_cyc.c   **** //delay_cyc intends to create "functions" that cause delays of a specific
  10:delay_cyc.c   **** //number of CPU cycles. This isn't by any means highly accurate...
  11:delay_cyc.c   **** 
  12:delay_cyc.c   **** //There are a couple compilation-options:
  13:delay_cyc.c   **** //  one uses _delay_loop_2 from <util/delay_basic.h> (this is newer)
  14:delay_cyc.c   **** //  the other is my original hokey implementation.
  15:delay_cyc.c   **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 39


  16:delay_cyc.c   **** //The original "hokey" implementation was before I was familiar with
  17:delay_cyc.c   **** //assembly-inlining. Though, it makes use of gcc's optimizer to weed-out
  18:delay_cyc.c   **** //the unused code WHEN each function-call has a constant argument.
  19:delay_cyc.c   **** //Unfortunately, this means that different versions of C/gcc may compile
  20:delay_cyc.c   **** //these delays differently. In *my* configuration, it seems to work well,
  21:delay_cyc.c   **** //but no promises, here.
  22:delay_cyc.c   **** // 'avr-gcc -v' gives:
  23:delay_cyc.c   **** //Target: avr
  24:delay_cyc.c   **** //Configured with: ../gcc-4.4.5/configure --target=avr --enable-languages=c
  25:delay_cyc.c   **** //--disable-libssp
  26:delay_cyc.c   **** //Thread model: single
  27:delay_cyc.c   **** //gcc version 4.4.5 (GCC) 
  28:delay_cyc.c   **** 
  29:delay_cyc.c   **** // ALSO, there are *definitely* cases where it's called with VARIABLES as
  30:delay_cyc.c   **** // arguments, as opposed to constant, especially BLUE_DIAG_BAR(_SCROLL).
  31:delay_cyc.c   **** // In which case, things are pretty hokey.
  32:delay_cyc.c   **** // Both compilation-options work, in my testing, but not perfectly.
  33:delay_cyc.c   **** 
  34:delay_cyc.c   **** //(A more accurate method has since been developed in
  35:delay_cyc.c   **** // _commonCode/delay_cyc/, which can create a delay of exactly 1->127 
  36:delay_cyc.c   **** // cycles, if set-up ahead of time, even with a variable as an argument.
  37:delay_cyc.c   **** // This method is to be called via asm, and hasn't been implemented here).
  38:delay_cyc.c   **** 
  39:delay_cyc.c   **** // So, again, in cases here with a CONSTANT argument:
  40:delay_cyc.c   **** //  initial set-up math should optimize-out, and we'll be left with either
  41:delay_cyc.c   **** //  a specific number of loops, or a specific number of nops, inlined with
  42:delay_cyc.c   **** //  the original caller.
  43:delay_cyc.c   **** //  With _delay_loop_2() this results in a number of cycles rounded-up to
  44:delay_cyc.c   **** //  the nearest 4. (e.g. delay_cyc(3) results in 4 cycles. delay_cyc(13)
  45:delay_cyc.c   **** //  results in 16 cycles).
  46:delay_cyc.c   **** //  With the hokey method, it might very well result in exactly the number
  47:delay_cyc.c   **** //  of requested cycles, between a potential loop *and* remaining nops...
  48:delay_cyc.c   **** // And with a VARIABLE argument:
  49:delay_cyc.c   **** //  With _delay_loop_2() there's a bit of set-up overhead, which may in
  50:delay_cyc.c   **** //  fact be quite large (division by 4 => Shift-Rights. + an addition
  51:delay_cyc.c   **** //  + negative-argument testing). And then there's the number of 4-cycle
  52:delay_cyc.c   **** //  loops, rounded-up.
  53:delay_cyc.c   **** //  With the "hokey" method, it's probably all messed-up, a bunch of
  54:delay_cyc.c   **** //  switch-statements, set-up, and more... lots of jumping, etc.
  55:delay_cyc.c   **** 
  56:delay_cyc.c   **** // As it stands, this may result in row-timing (H-Blanks + DE) that aren't
  57:delay_cyc.c   **** // constant and/or aren't exactly as requested...
  58:delay_cyc.c   **** // This *may* affect some display's sync-ability.
  59:delay_cyc.c   **** // So far, it hasn't been found to be a problem, except visually where,
  60:delay_cyc.c   **** // e.g. in BLUE_DIAG_BAR(_SCROLL) the bar is not perfectly diagonal, more
  61:delay_cyc.c   **** // stair-stepped (or even slightly jagged, in the "hokey" case).
  62:delay_cyc.c   **** 
  63:delay_cyc.c   **** 
  64:delay_cyc.c   **** #include "delay_cyc.h"
  65:delay_cyc.c   **** 
  66:delay_cyc.c   **** //This'll optimze-out in some cases.
  67:delay_cyc.c   **** // The timings and instructions used are probably specific to the
  68:delay_cyc.c   **** // instruction-set in the MCU, the GCC version, optimization-level, etc.
  69:delay_cyc.c   **** // a/o LCDdirectLVDS11 HLow_delay() this is how it's compiling...
  70:delay_cyc.c   **** 
  71:delay_cyc.c   **** // The actual number of cycs will probably be a few higher...
  72:delay_cyc.c   **** // (or who knows, if things optimze-out, e.g. small ~0-8 numCycs)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 40


  73:delay_cyc.c   **** // Due to init, and division...
  74:delay_cyc.c   **** // Using rounding-up as well...
  75:delay_cyc.c   **** 
  76:delay_cyc.c   **** // the argument is int32_t to allow for negative value testing
  77:delay_cyc.c   **** // BUT: numCyc is only tested against a uint16_t...
  78:delay_cyc.c   **** //  the greatest value (?) is (UINT16_MAX - 7)
  79:delay_cyc.c   **** // (maybe it'd make more sense to do the math outside the delay_cyc call
  80:delay_cyc.c   **** // and allow the preprocessor to change it to 0, instead of doing it here.
  81:delay_cyc.c   **** 
  82:delay_cyc.c   **** //This should probably be reimplemented using _delay_loop_1/2() from 
  83:delay_cyc.c   **** // util/delay_basic.h
  84:delay_cyc.c   **** //  1 uses three cycles per count, counts from 1-256, 
  85:delay_cyc.c   **** //      256 counts: _delay_loop_1(0)
  86:delay_cyc.c   **** //  2 uses four, counts from 1-65536, 65536 is passed as 0
  87:delay_cyc.c   **** 
  88:delay_cyc.c   **** //#define DELAY_CYC_DELAY_LOOP TRUE//FALSE
  89:delay_cyc.c   **** 
  90:delay_cyc.c   **** #if(defined(DELAY_CYC_DELAY_LOOP) && DELAY_CYC_DELAY_LOOP)
  91:delay_cyc.c   **** #warning "This has only been tested with v54+... rowSegBuffer, etc."
  92:delay_cyc.c   **** void delay_cyc(int32_t numCyc)
  93:delay_cyc.c   **** {
  94:delay_cyc.c   ****    if(numCyc <= 0)
  95:delay_cyc.c   ****       return;
  96:delay_cyc.c   **** 
  97:delay_cyc.c   ****    uint16_t numLoops = (numCyc+3)/4;
  98:delay_cyc.c   **** 
  99:delay_cyc.c   ****    _delay_loop_2(numLoops);
 100:delay_cyc.c   **** 
 101:delay_cyc.c   **** /*   uint32_t delayLoops = (numCyc+3)/4;
 102:delay_cyc.c   **** 
 103:delay_cyc.c   ****    do
 104:delay_cyc.c   ****    {
 105:delay_cyc.c   ****       delayLoops--;
 106:delay_cyc.c   **** //      _delay_loop_2(delayLoops&0xffff);
 107:delay_cyc.c   **** 
 108:delay_cyc.c   **** //      delayLoops -= (delayLoops&0xffff);
 109:delay_cyc.c   ****    } while(delayLoops);
 110:delay_cyc.c   **** */
 111:delay_cyc.c   **** /*
 112:delay_cyc.c   ****    //Since this is inline, AND it's only called with values computed
 113:delay_cyc.c   ****    // at compile time, only one of these should be compiled in...
 114:delay_cyc.c   ****    // as necessary...
 115:delay_cyc.c   ****    // If called without precomputed value (i.e. a variable)????
 116:delay_cyc.c   ****    // Maybe I should only use delay_loop_2...
 117:delay_cyc.c   ****    if(numCyc < 256*3)
 118:delay_cyc.c   ****       _delay_loop_1(numCyc/&0xff);
 119:delay_cyc.c   **** 
 120:delay_cyc.c   ****    else
 121:delay_cyc.c   **** */
 122:delay_cyc.c   **** }
 123:delay_cyc.c   **** 
 124:delay_cyc.c   **** #else
 125:delay_cyc.c   **** void delay_cyc(int32_t numCyc)
 126:delay_cyc.c   **** {
 127:delay_cyc.c   **** 
 128:delay_cyc.c   ****    //This shouldn't happen often, but some delay_cyc() calls use math
 129:delay_cyc.c   ****    // to calculate the number of cycles, and it could be negative
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 41


 130:delay_cyc.c   ****    if(numCyc < 0)
 131:delay_cyc.c   ****       return;
 132:delay_cyc.c   ****                                  //#Clocks
 133:delay_cyc.c   ****    //Two instructions:
 134:delay_cyc.c   ****    // ldi r24, 0                  //1          i=0
 135:delay_cyc.c   ****    // ldi r25, 0                  //1
 136:delay_cyc.c   ****    uint16_t i;
 137:delay_cyc.c   **** 
 138:delay_cyc.c   **** 
 139:delay_cyc.c   ****    //Loop instructions:
 140:delay_cyc.c   ****    //nop                           //1
 141:delay_cyc.c   ****    //adiw  r24, 0x01   ; 1         //2          i++
 142:delay_cyc.c   ****    //cpi   r24, 0x77   ; 119      //1          i<numCyc (119 in this case)
 143:delay_cyc.c   ****    //cpc   r25, r1               //1          Apparently it's also testing
 144:delay_cyc.c   ****                                  //           the high byte is 0
 145:delay_cyc.c   ****    //brne  .-10        ;         //"1/2"      return to nop
 146:delay_cyc.c   ****                                  //            if I understand, this is two
 147:delay_cyc.c   ****                                  //            cyc when branching
 148:delay_cyc.c   ****                                  //            or one if not (when complete)
 149:delay_cyc.c   **** 
 150:delay_cyc.c   ****    //READ THIS:
 151:delay_cyc.c   ****    // Current Compilation Settings: A/O v18:
 152:delay_cyc.c   ****    //    THIS LOOP WILL BE UNROLLED if numLoops <= 5!!!
 153:delay_cyc.c   ****    //    Which then turns into numLoops*2 cycles (instead of numLoops*8)
 154:delay_cyc.c   ****    // 
 155:delay_cyc.c   ****    // Here's an attempted hack...
 156:delay_cyc.c   ****    //  it *should* optimize the test out in either case, so it's like a 
 157:delay_cyc.c   ****    //  preprocessing directive...
 158:delay_cyc.c   **** 	uint8_t loopRemainder = numCyc & 0x07;
 159:delay_cyc.c   **** 	uint16_t numLoops = (((uint16_t)(numCyc)+7)>>3);
 160:delay_cyc.c   **** 
 161:delay_cyc.c   **** 
 162:delay_cyc.c   ****    // HACK ATTEMPT 2: THATS A LOT OF CODE.
 163:delay_cyc.c   ****       switch(numLoops)
 164:delay_cyc.c   ****       {
 165:delay_cyc.c   ****          case 5:
 166:delay_cyc.c   ****             asm("nop");
 167:delay_cyc.c   ****             asm("nop");
 168:delay_cyc.c   ****             asm("nop");
 169:delay_cyc.c   ****             asm("nop");
 170:delay_cyc.c   ****             asm("nop");
 171:delay_cyc.c   ****             asm("nop");
 172:delay_cyc.c   ****             asm("nop");
 173:delay_cyc.c   ****             asm("nop");
 174:delay_cyc.c   ****          case 4:
 175:delay_cyc.c   ****             asm("nop");
 176:delay_cyc.c   ****             asm("nop");
 177:delay_cyc.c   ****             asm("nop");
 178:delay_cyc.c   ****             asm("nop");
 179:delay_cyc.c   ****             asm("nop");
 180:delay_cyc.c   ****             asm("nop");
 181:delay_cyc.c   ****             asm("nop");
 182:delay_cyc.c   ****             asm("nop");
 183:delay_cyc.c   ****          case 3:
 184:delay_cyc.c   ****             asm("nop");
 185:delay_cyc.c   ****             asm("nop");
 186:delay_cyc.c   ****             asm("nop");
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 42


 187:delay_cyc.c   ****             asm("nop");
 188:delay_cyc.c   ****             asm("nop");
 189:delay_cyc.c   ****             asm("nop");
 190:delay_cyc.c   ****             asm("nop");
 191:delay_cyc.c   ****             asm("nop");
 192:delay_cyc.c   ****          case 2:
 193:delay_cyc.c   ****             asm("nop");
 194:delay_cyc.c   ****             asm("nop");
 195:delay_cyc.c   ****             asm("nop");
 196:delay_cyc.c   ****             asm("nop");
 197:delay_cyc.c   ****             asm("nop");
 198:delay_cyc.c   ****             asm("nop");
 199:delay_cyc.c   ****             asm("nop");
 200:delay_cyc.c   ****             asm("nop");
 201:delay_cyc.c   ****          case 1:
 202:delay_cyc.c   ****             asm("nop");
 203:delay_cyc.c   ****             asm("nop");
 204:delay_cyc.c   ****             asm("nop");
 205:delay_cyc.c   ****             asm("nop");
 206:delay_cyc.c   ****             asm("nop");
 207:delay_cyc.c   ****             asm("nop");
 208:delay_cyc.c   ****             asm("nop");
 209:delay_cyc.c   ****             asm("nop");
 210:delay_cyc.c   ****             return;
 211:delay_cyc.c   ****             break;
 212:delay_cyc.c   ****          default:
 213:delay_cyc.c   ****             break;
 214:delay_cyc.c   ****       }
 215:delay_cyc.c   ****    // THUS:
 216:delay_cyc.c   ****    // Each loop is 7 cycles, make it 8 by adding an extra nop and we can
 217:delay_cyc.c   ****    // use >> instead of / for calculations...
 218:delay_cyc.c   ****    // +7 assures rounding-up...
 219:delay_cyc.c   **** #warning "This loop seems to be optimizing out!"
 220:delay_cyc.c   ****    //for(i=0; i<((numCyc+7)>>3); i++)
 221:delay_cyc.c   ****    for(i=0; i<numLoops; i++)
 222:delay_cyc.c   ****    {
 223:delay_cyc.c   ****       //THIS IS A HACK DUE TO OPTIMIZATION, see above
 224:delay_cyc.c   ****       // It will NOT likely be happy with different versions of gcc...
 225:delay_cyc.c   ****    /*   // NOGO: Apparently it won't expand the loop if this is part of it
 226:delay_cyc.c   ****       // so then we have 5 loops AND 8 instructions /within/ the loop
 227:delay_cyc.c   ****       // AND the comparison overhead!`
 228:delay_cyc.c   ****       if(numLoops <= 5)
 229:delay_cyc.c   ****       {
 230:delay_cyc.c   ****          asm("nop");
 231:delay_cyc.c   ****          asm("nop");
 232:delay_cyc.c   ****       //   asm("nop");
 233:delay_cyc.c   ****       //   asm("nop");
 234:delay_cyc.c   ****       //   asm("nop");
 235:delay_cyc.c   ****       //   asm("nop");
 236:delay_cyc.c   ****       }
 237:delay_cyc.c   ****       else
 238:delay_cyc.c   ****       {
 239:delay_cyc.c   ****          asm("nop");
 240:delay_cyc.c   ****          asm("nop");
 241:delay_cyc.c   ****       }
 242:delay_cyc.c   ****    */
 243:delay_cyc.c   ****       //Apparently this loop will optimize-out without this:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 43


 244:delay_cyc.c   ****       // Obviously, one instruction each...
 245:delay_cyc.c   ****       asm("nop");
 557               		.stabn	68,0,245,.LM47-.LFBB5
 558               	.LM47:
 559               	/* #APP */
 560               	 ;  245 "delay_cyc.c" 1
 561 017c 0000      		nop
 562               	 ;  0 "" 2
 246:delay_cyc.c   ****       asm("nop");
 563               		.stabn	68,0,246,.LM48-.LFBB5
 564               	.LM48:
 565               	 ;  246 "delay_cyc.c" 1
 566 017e 0000      		nop
 567               	 ;  0 "" 2
 568               	/* #NOAPP */
 569 0180 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 570               		.stabn	68,0,221,.LM49-.LFBB5
 571               	.LM49:
 572 0182 0097      		sbiw r24,0
 573 0184 01F4      		brne .L15
 247:delay_cyc.c   ****    }
 248:delay_cyc.c   **** 
 249:delay_cyc.c   **** 	//This addition a/o v62-20
 250:delay_cyc.c   **** 	// When delay_cyc is called with a constant-value, it should optimize
 251:delay_cyc.c   **** 	// out to merely the number of nops... but if it's non-constant, then
 252:delay_cyc.c   **** 	// this will slow things a bit... UNTESTED.
 253:delay_cyc.c   **** 	// (Actually, briefly tested with BLUE_DIAG_BAR_SCROLL and seems to
 254:delay_cyc.c   **** 	// work, but not highly precise, as expected.
 255:delay_cyc.c   **** 	// In Other Words: It worked better in BLUE_DIAG_BAR_SCROLL withOUT the
 256:delay_cyc.c   **** 	// following addition, because this function is then called with a
 257:delay_cyc.c   **** 	// variable, instead of a constant, and it does not optimize out.)
 258:delay_cyc.c   **** 
 259:delay_cyc.c   **** 	//Realistically, this should probably be done in assembly, the whole
 260:delay_cyc.c   **** 	//thing...
 261:delay_cyc.c   **** 	// but doing-so might make optimization more difficult...?
 262:delay_cyc.c   **** 	switch(loopRemainder)
 263:delay_cyc.c   **** 	{
 264:delay_cyc.c   **** 		case 7:
 265:delay_cyc.c   **** 			asm("nop");
 266:delay_cyc.c   **** 		case 6:
 267:delay_cyc.c   **** 			asm("nop");
 268:delay_cyc.c   **** 		case 5:
 269:delay_cyc.c   **** 			asm("nop");
 270:delay_cyc.c   **** 		case 4:
 271:delay_cyc.c   **** 			asm("nop");
 574               		.stabn	68,0,271,.LM50-.LFBB5
 575               	.LM50:
 576               	/* #APP */
 577               	 ;  271 "delay_cyc.c" 1
 578 0186 0000      		nop
 579               	 ;  0 "" 2
 272:delay_cyc.c   **** 		case 3:
 273:delay_cyc.c   **** 			asm("nop");
 580               		.stabn	68,0,273,.LM51-.LFBB5
 581               	.LM51:
 582               	 ;  273 "delay_cyc.c" 1
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 44


 583 0188 0000      		nop
 584               	 ;  0 "" 2
 274:delay_cyc.c   **** 		case 2:
 275:delay_cyc.c   **** 			asm("nop");
 585               		.stabn	68,0,275,.LM52-.LFBB5
 586               	.LM52:
 587               	 ;  275 "delay_cyc.c" 1
 588 018a 0000      		nop
 589               	 ;  0 "" 2
 276:delay_cyc.c   **** 		case 1:
 277:delay_cyc.c   **** 			asm("nop");
 590               		.stabn	68,0,277,.LM53-.LFBB5
 591               	.LM53:
 592               	 ;  277 "delay_cyc.c" 1
 593 018c 0000      		nop
 594               	 ;  0 "" 2
 595               	/* #NOAPP */
 596               	.LBE128:
 597               	.LBE127:
 598               		.stabs	"_options/writeColor.c",132,0,0,.Ltext8
 599               	.Ltext8:
 351:_options/writeColor.c **** 
 352:_options/writeColor.c **** 		lvds_enableGreen_MakeClockSensitiveToDT();
 353:_options/writeColor.c **** 
 354:_options/writeColor.c **** 		//Because includeDelay is FALSE, above, do it here...
 355:_options/writeColor.c **** 		// The intention being to get enableGreen as soon after the
 356:_options/writeColor.c **** 		// register-settings as possible.
 357:_options/writeColor.c **** 		delay_cyc(WRITE_COLOR_DELAY);
 358:_options/writeColor.c **** 		
 359:_options/writeColor.c ****       //Moving this here not only removes (most of) the green bar
 360:_options/writeColor.c ****       // but also seems to make the pixel edges significantly sharper
 361:_options/writeColor.c ****       // (v29 has ~1/8in of noise, v30 has ~1pixel noise at the right edge)
 362:_options/writeColor.c **** //      TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
 363:_options/writeColor.c **** //               | (0<<COM1B1) | (1<<COM1B0)
 364:_options/writeColor.c **** //               | (1<<PWM1A) | (1<<PWM1B) );
 365:_options/writeColor.c **** 
 366:_options/writeColor.c ****       writeColor(TRUE, *(color+1));    
 600               		.stabn	68,0,366,.LM54-.LFBB5
 601               	.LM54:
 602 018e 8181      		ldd r24,Z+1
 603               	.LBB129:
 604               	.LBB130:
 138:_options/writeColor.c **** 
 605               		.stabn	68,0,138,.LM55-.LFBB5
 606               	.LM55:
 607 0190 482F      		mov r20,r24
 608 0192 4295      		swap r20
 609 0194 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 610               		.stabn	68,0,140,.LM56-.LFBB5
 611               	.LM56:
 612 0196 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 613               		.stabn	68,0,136,.LM57-.LFBB5
 614               	.LM57:
 615 0198 282F      		mov r18,r24
 616 019a 2370      		andi r18,lo8(3)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 45


 140:_options/writeColor.c **** 	setGreen4(greenVal);
 617               		.stabn	68,0,140,.LM58-.LFBB5
 618               	.LM58:
 619 019c 30E0      		ldi r19,0
 620 019e 2E5F      		subi r18,-2
 621 01a0 3F4F      		sbci r19,-1
 622 01a2 3093 6100 		sts 96+1,r19
 623 01a6 2093 6000 		sts 96,r18
 624 01aa 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 625               		.stabn	68,0,141,.LM59-.LFBB5
 626               	.LM59:
 627 01ac 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 628               		.stabn	68,0,137,.LM60-.LFBB5
 629               	.LM60:
 630 01ae 8695      		lsr r24
 631 01b0 8695      		lsr r24
 632 01b2 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 633               		.stabn	68,0,141,.LM61-.LFBB5
 634               	.LM61:
 635 01b4 90E0      		ldi r25,0
 636 01b6 0396      		adiw r24,3
 637 01b8 93BD      		out 0x22+1,r25
 638 01ba 82BD      		out 0x22,r24
 639 01bc 8D98      		cbi 0x11,5
 640               	.LBB131:
 142:_options/writeColor.c **** 
 641               		.stabn	68,0,142,.LM62-.LFBB5
 642               	.LM62:
 643 01be 4330      		cpi r20,lo8(3)
 644 01c0 01F0      		breq .L62
 645 01c2 4C5F      		subi r20,lo8(-(4))
 646 01c4 00C0      		rjmp .L16
 647               	.L62:
 648 01c6 48E0      		ldi r20,lo8(8)
 649               	.L16:
 650 01c8 AD9A      		sbi 0x15,5
 651 01ca 842F      		mov r24,r20
 652 01cc 90E0      		ldi r25,0
 653 01ce 9FBD      		out 0x2e+1,r25
 654 01d0 8EBD      		out 0x2e,r24
 655 01d2 AD98      		cbi 0x15,5
 656 01d4 87E0      		ldi r24,lo8(7)
 657 01d6 90E0      		ldi r25,0
 658               	.L18:
 659               	.LBE131:
 660               	.LBB132:
 661               	.LBB133:
 662               		.stabs	"delay_cyc.c",132,0,0,.Ltext9
 663               	.Ltext9:
 245:delay_cyc.c   ****       asm("nop");
 664               		.stabn	68,0,245,.LM63-.LFBB5
 665               	.LM63:
 666               	/* #APP */
 667               	 ;  245 "delay_cyc.c" 1
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 46


 668 01d8 0000      		nop
 669               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 670               		.stabn	68,0,246,.LM64-.LFBB5
 671               	.LM64:
 672               	 ;  246 "delay_cyc.c" 1
 673 01da 0000      		nop
 674               	 ;  0 "" 2
 675               	/* #NOAPP */
 676 01dc 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 677               		.stabn	68,0,221,.LM65-.LFBB5
 678               	.LM65:
 679 01de 0097      		sbiw r24,0
 680 01e0 01F4      		brne .L18
 271:delay_cyc.c   **** 		case 3:
 681               		.stabn	68,0,271,.LM66-.LFBB5
 682               	.LM66:
 683               	/* #APP */
 684               	 ;  271 "delay_cyc.c" 1
 685 01e2 0000      		nop
 686               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 687               		.stabn	68,0,273,.LM67-.LFBB5
 688               	.LM67:
 689               	 ;  273 "delay_cyc.c" 1
 690 01e4 0000      		nop
 691               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 692               		.stabn	68,0,275,.LM68-.LFBB5
 693               	.LM68:
 694               	 ;  275 "delay_cyc.c" 1
 695 01e6 0000      		nop
 696               	 ;  0 "" 2
 697               		.stabn	68,0,277,.LM69-.LFBB5
 698               	.LM69:
 699               	 ;  277 "delay_cyc.c" 1
 700 01e8 0000      		nop
 701               	 ;  0 "" 2
 702               	/* #NOAPP */
 703               	.LBE133:
 704               	.LBE132:
 705               	.LBE130:
 706               	.LBE129:
 707               		.stabs	"_options/writeColor.c",132,0,0,.Ltext10
 708               	.Ltext10:
 367:_options/writeColor.c ****       writeColor(TRUE, *(color+2));    
 709               		.stabn	68,0,367,.LM70-.LFBB5
 710               	.LM70:
 711 01ea 8281      		ldd r24,Z+2
 712               	.LBB134:
 713               	.LBB135:
 138:_options/writeColor.c **** 
 714               		.stabn	68,0,138,.LM71-.LFBB5
 715               	.LM71:
 716 01ec 482F      		mov r20,r24
 717 01ee 4295      		swap r20
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 47


 718 01f0 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 719               		.stabn	68,0,140,.LM72-.LFBB5
 720               	.LM72:
 721 01f2 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 722               		.stabn	68,0,136,.LM73-.LFBB5
 723               	.LM73:
 724 01f4 282F      		mov r18,r24
 725 01f6 2370      		andi r18,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 726               		.stabn	68,0,140,.LM74-.LFBB5
 727               	.LM74:
 728 01f8 30E0      		ldi r19,0
 729 01fa 2E5F      		subi r18,-2
 730 01fc 3F4F      		sbci r19,-1
 731 01fe 3093 6100 		sts 96+1,r19
 732 0202 2093 6000 		sts 96,r18
 733 0206 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 734               		.stabn	68,0,141,.LM75-.LFBB5
 735               	.LM75:
 736 0208 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 737               		.stabn	68,0,137,.LM76-.LFBB5
 738               	.LM76:
 739 020a 8695      		lsr r24
 740 020c 8695      		lsr r24
 741 020e 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 742               		.stabn	68,0,141,.LM77-.LFBB5
 743               	.LM77:
 744 0210 90E0      		ldi r25,0
 745 0212 0396      		adiw r24,3
 746 0214 93BD      		out 0x22+1,r25
 747 0216 82BD      		out 0x22,r24
 748 0218 8D98      		cbi 0x11,5
 749               	.LBB136:
 142:_options/writeColor.c **** 
 750               		.stabn	68,0,142,.LM78-.LFBB5
 751               	.LM78:
 752 021a 4330      		cpi r20,lo8(3)
 753 021c 01F0      		breq .L63
 754 021e 4C5F      		subi r20,lo8(-(4))
 755 0220 00C0      		rjmp .L19
 756               	.L63:
 757 0222 48E0      		ldi r20,lo8(8)
 758               	.L19:
 759 0224 AD9A      		sbi 0x15,5
 760 0226 842F      		mov r24,r20
 761 0228 90E0      		ldi r25,0
 762 022a 9FBD      		out 0x2e+1,r25
 763 022c 8EBD      		out 0x2e,r24
 764 022e AD98      		cbi 0x15,5
 765 0230 87E0      		ldi r24,lo8(7)
 766 0232 90E0      		ldi r25,0
 767               	.L21:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 48


 768               	.LBE136:
 769               	.LBB137:
 770               	.LBB138:
 771               		.stabs	"delay_cyc.c",132,0,0,.Ltext11
 772               	.Ltext11:
 245:delay_cyc.c   ****       asm("nop");
 773               		.stabn	68,0,245,.LM79-.LFBB5
 774               	.LM79:
 775               	/* #APP */
 776               	 ;  245 "delay_cyc.c" 1
 777 0234 0000      		nop
 778               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 779               		.stabn	68,0,246,.LM80-.LFBB5
 780               	.LM80:
 781               	 ;  246 "delay_cyc.c" 1
 782 0236 0000      		nop
 783               	 ;  0 "" 2
 784               	/* #NOAPP */
 785 0238 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 786               		.stabn	68,0,221,.LM81-.LFBB5
 787               	.LM81:
 788 023a 0097      		sbiw r24,0
 789 023c 01F4      		brne .L21
 271:delay_cyc.c   **** 		case 3:
 790               		.stabn	68,0,271,.LM82-.LFBB5
 791               	.LM82:
 792               	/* #APP */
 793               	 ;  271 "delay_cyc.c" 1
 794 023e 0000      		nop
 795               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 796               		.stabn	68,0,273,.LM83-.LFBB5
 797               	.LM83:
 798               	 ;  273 "delay_cyc.c" 1
 799 0240 0000      		nop
 800               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 801               		.stabn	68,0,275,.LM84-.LFBB5
 802               	.LM84:
 803               	 ;  275 "delay_cyc.c" 1
 804 0242 0000      		nop
 805               	 ;  0 "" 2
 806               		.stabn	68,0,277,.LM85-.LFBB5
 807               	.LM85:
 808               	 ;  277 "delay_cyc.c" 1
 809 0244 0000      		nop
 810               	 ;  0 "" 2
 811               	/* #NOAPP */
 812               	.LBE138:
 813               	.LBE137:
 814               	.LBE135:
 815               	.LBE134:
 816               		.stabs	"_options/writeColor.c",132,0,0,.Ltext12
 817               	.Ltext12:
 368:_options/writeColor.c ****       writeColor(TRUE, *(color+3)); 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 49


 818               		.stabn	68,0,368,.LM86-.LFBB5
 819               	.LM86:
 820 0246 8381      		ldd r24,Z+3
 821               	.LBB139:
 822               	.LBB140:
 138:_options/writeColor.c **** 
 823               		.stabn	68,0,138,.LM87-.LFBB5
 824               	.LM87:
 825 0248 482F      		mov r20,r24
 826 024a 4295      		swap r20
 827 024c 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 828               		.stabn	68,0,140,.LM88-.LFBB5
 829               	.LM88:
 830 024e 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 831               		.stabn	68,0,136,.LM89-.LFBB5
 832               	.LM89:
 833 0250 282F      		mov r18,r24
 834 0252 2370      		andi r18,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 835               		.stabn	68,0,140,.LM90-.LFBB5
 836               	.LM90:
 837 0254 30E0      		ldi r19,0
 838 0256 2E5F      		subi r18,-2
 839 0258 3F4F      		sbci r19,-1
 840 025a 3093 6100 		sts 96+1,r19
 841 025e 2093 6000 		sts 96,r18
 842 0262 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 843               		.stabn	68,0,141,.LM91-.LFBB5
 844               	.LM91:
 845 0264 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 846               		.stabn	68,0,137,.LM92-.LFBB5
 847               	.LM92:
 848 0266 8695      		lsr r24
 849 0268 8695      		lsr r24
 850 026a 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 851               		.stabn	68,0,141,.LM93-.LFBB5
 852               	.LM93:
 853 026c 90E0      		ldi r25,0
 854 026e 0396      		adiw r24,3
 855 0270 93BD      		out 0x22+1,r25
 856 0272 82BD      		out 0x22,r24
 857 0274 8D98      		cbi 0x11,5
 858               	.LBB141:
 142:_options/writeColor.c **** 
 859               		.stabn	68,0,142,.LM94-.LFBB5
 860               	.LM94:
 861 0276 4330      		cpi r20,lo8(3)
 862 0278 01F0      		breq .L64
 863 027a 4C5F      		subi r20,lo8(-(4))
 864 027c 00C0      		rjmp .L22
 865               	.L64:
 866 027e 48E0      		ldi r20,lo8(8)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 50


 867               	.L22:
 868 0280 AD9A      		sbi 0x15,5
 869 0282 842F      		mov r24,r20
 870 0284 90E0      		ldi r25,0
 871 0286 9FBD      		out 0x2e+1,r25
 872 0288 8EBD      		out 0x2e,r24
 873 028a AD98      		cbi 0x15,5
 874 028c 87E0      		ldi r24,lo8(7)
 875 028e 90E0      		ldi r25,0
 876               	.L24:
 877               	.LBE141:
 878               	.LBB142:
 879               	.LBB143:
 880               		.stabs	"delay_cyc.c",132,0,0,.Ltext13
 881               	.Ltext13:
 245:delay_cyc.c   ****       asm("nop");
 882               		.stabn	68,0,245,.LM95-.LFBB5
 883               	.LM95:
 884               	/* #APP */
 885               	 ;  245 "delay_cyc.c" 1
 886 0290 0000      		nop
 887               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 888               		.stabn	68,0,246,.LM96-.LFBB5
 889               	.LM96:
 890               	 ;  246 "delay_cyc.c" 1
 891 0292 0000      		nop
 892               	 ;  0 "" 2
 893               	/* #NOAPP */
 894 0294 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 895               		.stabn	68,0,221,.LM97-.LFBB5
 896               	.LM97:
 897 0296 0097      		sbiw r24,0
 898 0298 01F4      		brne .L24
 271:delay_cyc.c   **** 		case 3:
 899               		.stabn	68,0,271,.LM98-.LFBB5
 900               	.LM98:
 901               	/* #APP */
 902               	 ;  271 "delay_cyc.c" 1
 903 029a 0000      		nop
 904               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 905               		.stabn	68,0,273,.LM99-.LFBB5
 906               	.LM99:
 907               	 ;  273 "delay_cyc.c" 1
 908 029c 0000      		nop
 909               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 910               		.stabn	68,0,275,.LM100-.LFBB5
 911               	.LM100:
 912               	 ;  275 "delay_cyc.c" 1
 913 029e 0000      		nop
 914               	 ;  0 "" 2
 915               		.stabn	68,0,277,.LM101-.LFBB5
 916               	.LM101:
 917               	 ;  277 "delay_cyc.c" 1
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 51


 918 02a0 0000      		nop
 919               	 ;  0 "" 2
 920               	/* #NOAPP */
 921               	.LBE143:
 922               	.LBE142:
 923               	.LBE140:
 924               	.LBE139:
 925               		.stabs	"_options/writeColor.c",132,0,0,.Ltext14
 926               	.Ltext14:
 369:_options/writeColor.c ****       writeColor(TRUE, *(color+4));    
 927               		.stabn	68,0,369,.LM102-.LFBB5
 928               	.LM102:
 929 02a2 8481      		ldd r24,Z+4
 930               	.LBB144:
 931               	.LBB145:
 138:_options/writeColor.c **** 
 932               		.stabn	68,0,138,.LM103-.LFBB5
 933               	.LM103:
 934 02a4 482F      		mov r20,r24
 935 02a6 4295      		swap r20
 936 02a8 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 937               		.stabn	68,0,140,.LM104-.LFBB5
 938               	.LM104:
 939 02aa 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 940               		.stabn	68,0,136,.LM105-.LFBB5
 941               	.LM105:
 942 02ac 282F      		mov r18,r24
 943 02ae 2370      		andi r18,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 944               		.stabn	68,0,140,.LM106-.LFBB5
 945               	.LM106:
 946 02b0 30E0      		ldi r19,0
 947 02b2 2E5F      		subi r18,-2
 948 02b4 3F4F      		sbci r19,-1
 949 02b6 3093 6100 		sts 96+1,r19
 950 02ba 2093 6000 		sts 96,r18
 951 02be 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 952               		.stabn	68,0,141,.LM107-.LFBB5
 953               	.LM107:
 954 02c0 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 955               		.stabn	68,0,137,.LM108-.LFBB5
 956               	.LM108:
 957 02c2 8695      		lsr r24
 958 02c4 8695      		lsr r24
 959 02c6 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 960               		.stabn	68,0,141,.LM109-.LFBB5
 961               	.LM109:
 962 02c8 90E0      		ldi r25,0
 963 02ca 0396      		adiw r24,3
 964 02cc 93BD      		out 0x22+1,r25
 965 02ce 82BD      		out 0x22,r24
 966 02d0 8D98      		cbi 0x11,5
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 52


 967               	.LBB146:
 142:_options/writeColor.c **** 
 968               		.stabn	68,0,142,.LM110-.LFBB5
 969               	.LM110:
 970 02d2 4330      		cpi r20,lo8(3)
 971 02d4 01F0      		breq .L65
 972 02d6 4C5F      		subi r20,lo8(-(4))
 973 02d8 00C0      		rjmp .L25
 974               	.L65:
 975 02da 48E0      		ldi r20,lo8(8)
 976               	.L25:
 977 02dc AD9A      		sbi 0x15,5
 978 02de 842F      		mov r24,r20
 979 02e0 90E0      		ldi r25,0
 980 02e2 9FBD      		out 0x2e+1,r25
 981 02e4 8EBD      		out 0x2e,r24
 982 02e6 AD98      		cbi 0x15,5
 983 02e8 87E0      		ldi r24,lo8(7)
 984 02ea 90E0      		ldi r25,0
 985               	.L27:
 986               	.LBE146:
 987               	.LBB147:
 988               	.LBB148:
 989               		.stabs	"delay_cyc.c",132,0,0,.Ltext15
 990               	.Ltext15:
 245:delay_cyc.c   ****       asm("nop");
 991               		.stabn	68,0,245,.LM111-.LFBB5
 992               	.LM111:
 993               	/* #APP */
 994               	 ;  245 "delay_cyc.c" 1
 995 02ec 0000      		nop
 996               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 997               		.stabn	68,0,246,.LM112-.LFBB5
 998               	.LM112:
 999               	 ;  246 "delay_cyc.c" 1
 1000 02ee 0000      		nop
 1001               	 ;  0 "" 2
 1002               	/* #NOAPP */
 1003 02f0 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 1004               		.stabn	68,0,221,.LM113-.LFBB5
 1005               	.LM113:
 1006 02f2 0097      		sbiw r24,0
 1007 02f4 01F4      		brne .L27
 271:delay_cyc.c   **** 		case 3:
 1008               		.stabn	68,0,271,.LM114-.LFBB5
 1009               	.LM114:
 1010               	/* #APP */
 1011               	 ;  271 "delay_cyc.c" 1
 1012 02f6 0000      		nop
 1013               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 1014               		.stabn	68,0,273,.LM115-.LFBB5
 1015               	.LM115:
 1016               	 ;  273 "delay_cyc.c" 1
 1017 02f8 0000      		nop
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 53


 1018               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 1019               		.stabn	68,0,275,.LM116-.LFBB5
 1020               	.LM116:
 1021               	 ;  275 "delay_cyc.c" 1
 1022 02fa 0000      		nop
 1023               	 ;  0 "" 2
 1024               		.stabn	68,0,277,.LM117-.LFBB5
 1025               	.LM117:
 1026               	 ;  277 "delay_cyc.c" 1
 1027 02fc 0000      		nop
 1028               	 ;  0 "" 2
 1029               	/* #NOAPP */
 1030               	.LBE148:
 1031               	.LBE147:
 1032               	.LBE145:
 1033               	.LBE144:
 1034               		.stabs	"_options/writeColor.c",132,0,0,.Ltext16
 1035               	.Ltext16:
 370:_options/writeColor.c ****       writeColor(TRUE, *(color+5));                
 1036               		.stabn	68,0,370,.LM118-.LFBB5
 1037               	.LM118:
 1038 02fe 8581      		ldd r24,Z+5
 1039               	.LBB149:
 1040               	.LBB150:
 138:_options/writeColor.c **** 
 1041               		.stabn	68,0,138,.LM119-.LFBB5
 1042               	.LM119:
 1043 0300 482F      		mov r20,r24
 1044 0302 4295      		swap r20
 1045 0304 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1046               		.stabn	68,0,140,.LM120-.LFBB5
 1047               	.LM120:
 1048 0306 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 1049               		.stabn	68,0,136,.LM121-.LFBB5
 1050               	.LM121:
 1051 0308 282F      		mov r18,r24
 1052 030a 2370      		andi r18,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1053               		.stabn	68,0,140,.LM122-.LFBB5
 1054               	.LM122:
 1055 030c 30E0      		ldi r19,0
 1056 030e 2E5F      		subi r18,-2
 1057 0310 3F4F      		sbci r19,-1
 1058 0312 3093 6100 		sts 96+1,r19
 1059 0316 2093 6000 		sts 96,r18
 1060 031a 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1061               		.stabn	68,0,141,.LM123-.LFBB5
 1062               	.LM123:
 1063 031c 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 1064               		.stabn	68,0,137,.LM124-.LFBB5
 1065               	.LM124:
 1066 031e 8695      		lsr r24
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 54


 1067 0320 8695      		lsr r24
 1068 0322 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1069               		.stabn	68,0,141,.LM125-.LFBB5
 1070               	.LM125:
 1071 0324 90E0      		ldi r25,0
 1072 0326 0396      		adiw r24,3
 1073 0328 93BD      		out 0x22+1,r25
 1074 032a 82BD      		out 0x22,r24
 1075 032c 8D98      		cbi 0x11,5
 1076               	.LBB151:
 142:_options/writeColor.c **** 
 1077               		.stabn	68,0,142,.LM126-.LFBB5
 1078               	.LM126:
 1079 032e 4330      		cpi r20,lo8(3)
 1080 0330 01F0      		breq .L66
 1081 0332 4C5F      		subi r20,lo8(-(4))
 1082 0334 00C0      		rjmp .L28
 1083               	.L66:
 1084 0336 48E0      		ldi r20,lo8(8)
 1085               	.L28:
 1086 0338 AD9A      		sbi 0x15,5
 1087 033a 842F      		mov r24,r20
 1088 033c 90E0      		ldi r25,0
 1089 033e 9FBD      		out 0x2e+1,r25
 1090 0340 8EBD      		out 0x2e,r24
 1091 0342 AD98      		cbi 0x15,5
 1092 0344 87E0      		ldi r24,lo8(7)
 1093 0346 90E0      		ldi r25,0
 1094               	.L30:
 1095               	.LBE151:
 1096               	.LBB152:
 1097               	.LBB153:
 1098               		.stabs	"delay_cyc.c",132,0,0,.Ltext17
 1099               	.Ltext17:
 245:delay_cyc.c   ****       asm("nop");
 1100               		.stabn	68,0,245,.LM127-.LFBB5
 1101               	.LM127:
 1102               	/* #APP */
 1103               	 ;  245 "delay_cyc.c" 1
 1104 0348 0000      		nop
 1105               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 1106               		.stabn	68,0,246,.LM128-.LFBB5
 1107               	.LM128:
 1108               	 ;  246 "delay_cyc.c" 1
 1109 034a 0000      		nop
 1110               	 ;  0 "" 2
 1111               	/* #NOAPP */
 1112 034c 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 1113               		.stabn	68,0,221,.LM129-.LFBB5
 1114               	.LM129:
 1115 034e 0097      		sbiw r24,0
 1116 0350 01F4      		brne .L30
 271:delay_cyc.c   **** 		case 3:
 1117               		.stabn	68,0,271,.LM130-.LFBB5
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 55


 1118               	.LM130:
 1119               	/* #APP */
 1120               	 ;  271 "delay_cyc.c" 1
 1121 0352 0000      		nop
 1122               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 1123               		.stabn	68,0,273,.LM131-.LFBB5
 1124               	.LM131:
 1125               	 ;  273 "delay_cyc.c" 1
 1126 0354 0000      		nop
 1127               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 1128               		.stabn	68,0,275,.LM132-.LFBB5
 1129               	.LM132:
 1130               	 ;  275 "delay_cyc.c" 1
 1131 0356 0000      		nop
 1132               	 ;  0 "" 2
 1133               		.stabn	68,0,277,.LM133-.LFBB5
 1134               	.LM133:
 1135               	 ;  277 "delay_cyc.c" 1
 1136 0358 0000      		nop
 1137               	 ;  0 "" 2
 1138               	/* #NOAPP */
 1139               	.LBE153:
 1140               	.LBE152:
 1141               	.LBE150:
 1142               	.LBE149:
 1143               		.stabs	"_options/writeColor.c",132,0,0,.Ltext18
 1144               	.Ltext18:
 371:_options/writeColor.c ****       writeColor(TRUE, *(color+6));  
 1145               		.stabn	68,0,371,.LM134-.LFBB5
 1146               	.LM134:
 1147 035a 8681      		ldd r24,Z+6
 1148               	.LBB154:
 1149               	.LBB155:
 138:_options/writeColor.c **** 
 1150               		.stabn	68,0,138,.LM135-.LFBB5
 1151               	.LM135:
 1152 035c 482F      		mov r20,r24
 1153 035e 4295      		swap r20
 1154 0360 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1155               		.stabn	68,0,140,.LM136-.LFBB5
 1156               	.LM136:
 1157 0362 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 1158               		.stabn	68,0,136,.LM137-.LFBB5
 1159               	.LM137:
 1160 0364 282F      		mov r18,r24
 1161 0366 2370      		andi r18,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1162               		.stabn	68,0,140,.LM138-.LFBB5
 1163               	.LM138:
 1164 0368 30E0      		ldi r19,0
 1165 036a 2E5F      		subi r18,-2
 1166 036c 3F4F      		sbci r19,-1
 1167 036e 3093 6100 		sts 96+1,r19
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 56


 1168 0372 2093 6000 		sts 96,r18
 1169 0376 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1170               		.stabn	68,0,141,.LM139-.LFBB5
 1171               	.LM139:
 1172 0378 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 1173               		.stabn	68,0,137,.LM140-.LFBB5
 1174               	.LM140:
 1175 037a 8695      		lsr r24
 1176 037c 8695      		lsr r24
 1177 037e 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1178               		.stabn	68,0,141,.LM141-.LFBB5
 1179               	.LM141:
 1180 0380 90E0      		ldi r25,0
 1181 0382 0396      		adiw r24,3
 1182 0384 93BD      		out 0x22+1,r25
 1183 0386 82BD      		out 0x22,r24
 1184 0388 8D98      		cbi 0x11,5
 1185               	.LBB156:
 142:_options/writeColor.c **** 
 1186               		.stabn	68,0,142,.LM142-.LFBB5
 1187               	.LM142:
 1188 038a 4330      		cpi r20,lo8(3)
 1189 038c 01F0      		breq .L67
 1190 038e 4C5F      		subi r20,lo8(-(4))
 1191 0390 00C0      		rjmp .L31
 1192               	.L67:
 1193 0392 48E0      		ldi r20,lo8(8)
 1194               	.L31:
 1195 0394 AD9A      		sbi 0x15,5
 1196 0396 842F      		mov r24,r20
 1197 0398 90E0      		ldi r25,0
 1198 039a 9FBD      		out 0x2e+1,r25
 1199 039c 8EBD      		out 0x2e,r24
 1200 039e AD98      		cbi 0x15,5
 1201 03a0 87E0      		ldi r24,lo8(7)
 1202 03a2 90E0      		ldi r25,0
 1203               	.L33:
 1204               	.LBE156:
 1205               	.LBB157:
 1206               	.LBB158:
 1207               		.stabs	"delay_cyc.c",132,0,0,.Ltext19
 1208               	.Ltext19:
 245:delay_cyc.c   ****       asm("nop");
 1209               		.stabn	68,0,245,.LM143-.LFBB5
 1210               	.LM143:
 1211               	/* #APP */
 1212               	 ;  245 "delay_cyc.c" 1
 1213 03a4 0000      		nop
 1214               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 1215               		.stabn	68,0,246,.LM144-.LFBB5
 1216               	.LM144:
 1217               	 ;  246 "delay_cyc.c" 1
 1218 03a6 0000      		nop
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 57


 1219               	 ;  0 "" 2
 1220               	/* #NOAPP */
 1221 03a8 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 1222               		.stabn	68,0,221,.LM145-.LFBB5
 1223               	.LM145:
 1224 03aa 0097      		sbiw r24,0
 1225 03ac 01F4      		brne .L33
 271:delay_cyc.c   **** 		case 3:
 1226               		.stabn	68,0,271,.LM146-.LFBB5
 1227               	.LM146:
 1228               	/* #APP */
 1229               	 ;  271 "delay_cyc.c" 1
 1230 03ae 0000      		nop
 1231               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 1232               		.stabn	68,0,273,.LM147-.LFBB5
 1233               	.LM147:
 1234               	 ;  273 "delay_cyc.c" 1
 1235 03b0 0000      		nop
 1236               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 1237               		.stabn	68,0,275,.LM148-.LFBB5
 1238               	.LM148:
 1239               	 ;  275 "delay_cyc.c" 1
 1240 03b2 0000      		nop
 1241               	 ;  0 "" 2
 1242               		.stabn	68,0,277,.LM149-.LFBB5
 1243               	.LM149:
 1244               	 ;  277 "delay_cyc.c" 1
 1245 03b4 0000      		nop
 1246               	 ;  0 "" 2
 1247               	/* #NOAPP */
 1248               	.LBE158:
 1249               	.LBE157:
 1250               	.LBE155:
 1251               	.LBE154:
 1252               		.stabs	"_options/writeColor.c",132,0,0,.Ltext20
 1253               	.Ltext20:
 372:_options/writeColor.c ****       writeColor(TRUE, *(color+7));                         
 1254               		.stabn	68,0,372,.LM150-.LFBB5
 1255               	.LM150:
 1256 03b6 8781      		ldd r24,Z+7
 1257               	.LBB159:
 1258               	.LBB160:
 138:_options/writeColor.c **** 
 1259               		.stabn	68,0,138,.LM151-.LFBB5
 1260               	.LM151:
 1261 03b8 482F      		mov r20,r24
 1262 03ba 4295      		swap r20
 1263 03bc 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1264               		.stabn	68,0,140,.LM152-.LFBB5
 1265               	.LM152:
 1266 03be 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 1267               		.stabn	68,0,136,.LM153-.LFBB5
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 58


 1268               	.LM153:
 1269 03c0 282F      		mov r18,r24
 1270 03c2 2370      		andi r18,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1271               		.stabn	68,0,140,.LM154-.LFBB5
 1272               	.LM154:
 1273 03c4 30E0      		ldi r19,0
 1274 03c6 2E5F      		subi r18,-2
 1275 03c8 3F4F      		sbci r19,-1
 1276 03ca 3093 6100 		sts 96+1,r19
 1277 03ce 2093 6000 		sts 96,r18
 1278 03d2 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1279               		.stabn	68,0,141,.LM155-.LFBB5
 1280               	.LM155:
 1281 03d4 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 1282               		.stabn	68,0,137,.LM156-.LFBB5
 1283               	.LM156:
 1284 03d6 8695      		lsr r24
 1285 03d8 8695      		lsr r24
 1286 03da 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1287               		.stabn	68,0,141,.LM157-.LFBB5
 1288               	.LM157:
 1289 03dc 90E0      		ldi r25,0
 1290 03de 0396      		adiw r24,3
 1291 03e0 93BD      		out 0x22+1,r25
 1292 03e2 82BD      		out 0x22,r24
 1293 03e4 8D98      		cbi 0x11,5
 1294               	.LBB161:
 142:_options/writeColor.c **** 
 1295               		.stabn	68,0,142,.LM158-.LFBB5
 1296               	.LM158:
 1297 03e6 4330      		cpi r20,lo8(3)
 1298 03e8 01F0      		breq .L68
 1299 03ea 4C5F      		subi r20,lo8(-(4))
 1300 03ec 00C0      		rjmp .L34
 1301               	.L68:
 1302 03ee 48E0      		ldi r20,lo8(8)
 1303               	.L34:
 1304 03f0 AD9A      		sbi 0x15,5
 1305 03f2 842F      		mov r24,r20
 1306 03f4 90E0      		ldi r25,0
 1307 03f6 9FBD      		out 0x2e+1,r25
 1308 03f8 8EBD      		out 0x2e,r24
 1309 03fa AD98      		cbi 0x15,5
 1310 03fc 87E0      		ldi r24,lo8(7)
 1311 03fe 90E0      		ldi r25,0
 1312               	.L36:
 1313               	.LBE161:
 1314               	.LBB162:
 1315               	.LBB163:
 1316               		.stabs	"delay_cyc.c",132,0,0,.Ltext21
 1317               	.Ltext21:
 245:delay_cyc.c   ****       asm("nop");
 1318               		.stabn	68,0,245,.LM159-.LFBB5
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 59


 1319               	.LM159:
 1320               	/* #APP */
 1321               	 ;  245 "delay_cyc.c" 1
 1322 0400 0000      		nop
 1323               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 1324               		.stabn	68,0,246,.LM160-.LFBB5
 1325               	.LM160:
 1326               	 ;  246 "delay_cyc.c" 1
 1327 0402 0000      		nop
 1328               	 ;  0 "" 2
 1329               	/* #NOAPP */
 1330 0404 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 1331               		.stabn	68,0,221,.LM161-.LFBB5
 1332               	.LM161:
 1333 0406 0097      		sbiw r24,0
 1334 0408 01F4      		brne .L36
 271:delay_cyc.c   **** 		case 3:
 1335               		.stabn	68,0,271,.LM162-.LFBB5
 1336               	.LM162:
 1337               	/* #APP */
 1338               	 ;  271 "delay_cyc.c" 1
 1339 040a 0000      		nop
 1340               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 1341               		.stabn	68,0,273,.LM163-.LFBB5
 1342               	.LM163:
 1343               	 ;  273 "delay_cyc.c" 1
 1344 040c 0000      		nop
 1345               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 1346               		.stabn	68,0,275,.LM164-.LFBB5
 1347               	.LM164:
 1348               	 ;  275 "delay_cyc.c" 1
 1349 040e 0000      		nop
 1350               	 ;  0 "" 2
 1351               		.stabn	68,0,277,.LM165-.LFBB5
 1352               	.LM165:
 1353               	 ;  277 "delay_cyc.c" 1
 1354 0410 0000      		nop
 1355               	 ;  0 "" 2
 1356               	/* #NOAPP */
 1357               	.LBE163:
 1358               	.LBE162:
 1359               	.LBE160:
 1360               	.LBE159:
 1361               		.stabs	"_options/writeColor.c",132,0,0,.Ltext22
 1362               	.Ltext22:
 373:_options/writeColor.c ****       writeColor(TRUE, *(color+8));                         
 1363               		.stabn	68,0,373,.LM166-.LFBB5
 1364               	.LM166:
 1365 0412 8085      		ldd r24,Z+8
 1366               	.LBB164:
 1367               	.LBB165:
 138:_options/writeColor.c **** 
 1368               		.stabn	68,0,138,.LM167-.LFBB5
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 60


 1369               	.LM167:
 1370 0414 482F      		mov r20,r24
 1371 0416 4295      		swap r20
 1372 0418 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1373               		.stabn	68,0,140,.LM168-.LFBB5
 1374               	.LM168:
 1375 041a 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 1376               		.stabn	68,0,136,.LM169-.LFBB5
 1377               	.LM169:
 1378 041c 282F      		mov r18,r24
 1379 041e 2370      		andi r18,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1380               		.stabn	68,0,140,.LM170-.LFBB5
 1381               	.LM170:
 1382 0420 30E0      		ldi r19,0
 1383 0422 2E5F      		subi r18,-2
 1384 0424 3F4F      		sbci r19,-1
 1385 0426 3093 6100 		sts 96+1,r19
 1386 042a 2093 6000 		sts 96,r18
 1387 042e 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1388               		.stabn	68,0,141,.LM171-.LFBB5
 1389               	.LM171:
 1390 0430 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 1391               		.stabn	68,0,137,.LM172-.LFBB5
 1392               	.LM172:
 1393 0432 8695      		lsr r24
 1394 0434 8695      		lsr r24
 1395 0436 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1396               		.stabn	68,0,141,.LM173-.LFBB5
 1397               	.LM173:
 1398 0438 90E0      		ldi r25,0
 1399 043a 0396      		adiw r24,3
 1400 043c 93BD      		out 0x22+1,r25
 1401 043e 82BD      		out 0x22,r24
 1402 0440 8D98      		cbi 0x11,5
 1403               	.LBB166:
 142:_options/writeColor.c **** 
 1404               		.stabn	68,0,142,.LM174-.LFBB5
 1405               	.LM174:
 1406 0442 4330      		cpi r20,lo8(3)
 1407 0444 01F0      		breq .L69
 1408 0446 4C5F      		subi r20,lo8(-(4))
 1409 0448 00C0      		rjmp .L37
 1410               	.L69:
 1411 044a 48E0      		ldi r20,lo8(8)
 1412               	.L37:
 1413 044c AD9A      		sbi 0x15,5
 1414 044e 842F      		mov r24,r20
 1415 0450 90E0      		ldi r25,0
 1416 0452 9FBD      		out 0x2e+1,r25
 1417 0454 8EBD      		out 0x2e,r24
 1418 0456 AD98      		cbi 0x15,5
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 61


 1419 0458 87E0      		ldi r24,lo8(7)
 1420 045a 90E0      		ldi r25,0
 1421               	.L39:
 1422               	.LBE166:
 1423               	.LBB167:
 1424               	.LBB168:
 1425               		.stabs	"delay_cyc.c",132,0,0,.Ltext23
 1426               	.Ltext23:
 245:delay_cyc.c   ****       asm("nop");
 1427               		.stabn	68,0,245,.LM175-.LFBB5
 1428               	.LM175:
 1429               	/* #APP */
 1430               	 ;  245 "delay_cyc.c" 1
 1431 045c 0000      		nop
 1432               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 1433               		.stabn	68,0,246,.LM176-.LFBB5
 1434               	.LM176:
 1435               	 ;  246 "delay_cyc.c" 1
 1436 045e 0000      		nop
 1437               	 ;  0 "" 2
 1438               	/* #NOAPP */
 1439 0460 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 1440               		.stabn	68,0,221,.LM177-.LFBB5
 1441               	.LM177:
 1442 0462 0097      		sbiw r24,0
 1443 0464 01F4      		brne .L39
 271:delay_cyc.c   **** 		case 3:
 1444               		.stabn	68,0,271,.LM178-.LFBB5
 1445               	.LM178:
 1446               	/* #APP */
 1447               	 ;  271 "delay_cyc.c" 1
 1448 0466 0000      		nop
 1449               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 1450               		.stabn	68,0,273,.LM179-.LFBB5
 1451               	.LM179:
 1452               	 ;  273 "delay_cyc.c" 1
 1453 0468 0000      		nop
 1454               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 1455               		.stabn	68,0,275,.LM180-.LFBB5
 1456               	.LM180:
 1457               	 ;  275 "delay_cyc.c" 1
 1458 046a 0000      		nop
 1459               	 ;  0 "" 2
 1460               		.stabn	68,0,277,.LM181-.LFBB5
 1461               	.LM181:
 1462               	 ;  277 "delay_cyc.c" 1
 1463 046c 0000      		nop
 1464               	 ;  0 "" 2
 1465               	/* #NOAPP */
 1466               	.LBE168:
 1467               	.LBE167:
 1468               	.LBE165:
 1469               	.LBE164:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 62


 1470               		.stabs	"_options/writeColor.c",132,0,0,.Ltext24
 1471               	.Ltext24:
 374:_options/writeColor.c **** 		writeColor(TRUE, *(color+9));                         
 1472               		.stabn	68,0,374,.LM182-.LFBB5
 1473               	.LM182:
 1474 046e 8185      		ldd r24,Z+9
 1475               	.LBB169:
 1476               	.LBB170:
 138:_options/writeColor.c **** 
 1477               		.stabn	68,0,138,.LM183-.LFBB5
 1478               	.LM183:
 1479 0470 482F      		mov r20,r24
 1480 0472 4295      		swap r20
 1481 0474 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1482               		.stabn	68,0,140,.LM184-.LFBB5
 1483               	.LM184:
 1484 0476 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 1485               		.stabn	68,0,136,.LM185-.LFBB5
 1486               	.LM185:
 1487 0478 282F      		mov r18,r24
 1488 047a 2370      		andi r18,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1489               		.stabn	68,0,140,.LM186-.LFBB5
 1490               	.LM186:
 1491 047c 30E0      		ldi r19,0
 1492 047e 2E5F      		subi r18,-2
 1493 0480 3F4F      		sbci r19,-1
 1494 0482 3093 6100 		sts 96+1,r19
 1495 0486 2093 6000 		sts 96,r18
 1496 048a 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1497               		.stabn	68,0,141,.LM187-.LFBB5
 1498               	.LM187:
 1499 048c 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 1500               		.stabn	68,0,137,.LM188-.LFBB5
 1501               	.LM188:
 1502 048e 8695      		lsr r24
 1503 0490 8695      		lsr r24
 1504 0492 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1505               		.stabn	68,0,141,.LM189-.LFBB5
 1506               	.LM189:
 1507 0494 90E0      		ldi r25,0
 1508 0496 0396      		adiw r24,3
 1509 0498 93BD      		out 0x22+1,r25
 1510 049a 82BD      		out 0x22,r24
 1511 049c 8D98      		cbi 0x11,5
 1512               	.LBB171:
 142:_options/writeColor.c **** 
 1513               		.stabn	68,0,142,.LM190-.LFBB5
 1514               	.LM190:
 1515 049e 4330      		cpi r20,lo8(3)
 1516 04a0 01F0      		breq .L70
 1517 04a2 4C5F      		subi r20,lo8(-(4))
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 63


 1518 04a4 00C0      		rjmp .L40
 1519               	.L70:
 1520 04a6 48E0      		ldi r20,lo8(8)
 1521               	.L40:
 1522 04a8 AD9A      		sbi 0x15,5
 1523 04aa 842F      		mov r24,r20
 1524 04ac 90E0      		ldi r25,0
 1525 04ae 9FBD      		out 0x2e+1,r25
 1526 04b0 8EBD      		out 0x2e,r24
 1527 04b2 AD98      		cbi 0x15,5
 1528 04b4 87E0      		ldi r24,lo8(7)
 1529 04b6 90E0      		ldi r25,0
 1530               	.L42:
 1531               	.LBE171:
 1532               	.LBB172:
 1533               	.LBB173:
 1534               		.stabs	"delay_cyc.c",132,0,0,.Ltext25
 1535               	.Ltext25:
 245:delay_cyc.c   ****       asm("nop");
 1536               		.stabn	68,0,245,.LM191-.LFBB5
 1537               	.LM191:
 1538               	/* #APP */
 1539               	 ;  245 "delay_cyc.c" 1
 1540 04b8 0000      		nop
 1541               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 1542               		.stabn	68,0,246,.LM192-.LFBB5
 1543               	.LM192:
 1544               	 ;  246 "delay_cyc.c" 1
 1545 04ba 0000      		nop
 1546               	 ;  0 "" 2
 1547               	/* #NOAPP */
 1548 04bc 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 1549               		.stabn	68,0,221,.LM193-.LFBB5
 1550               	.LM193:
 1551 04be 0097      		sbiw r24,0
 1552 04c0 01F4      		brne .L42
 271:delay_cyc.c   **** 		case 3:
 1553               		.stabn	68,0,271,.LM194-.LFBB5
 1554               	.LM194:
 1555               	/* #APP */
 1556               	 ;  271 "delay_cyc.c" 1
 1557 04c2 0000      		nop
 1558               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 1559               		.stabn	68,0,273,.LM195-.LFBB5
 1560               	.LM195:
 1561               	 ;  273 "delay_cyc.c" 1
 1562 04c4 0000      		nop
 1563               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 1564               		.stabn	68,0,275,.LM196-.LFBB5
 1565               	.LM196:
 1566               	 ;  275 "delay_cyc.c" 1
 1567 04c6 0000      		nop
 1568               	 ;  0 "" 2
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 64


 1569               		.stabn	68,0,277,.LM197-.LFBB5
 1570               	.LM197:
 1571               	 ;  277 "delay_cyc.c" 1
 1572 04c8 0000      		nop
 1573               	 ;  0 "" 2
 1574               	/* #NOAPP */
 1575               	.LBE173:
 1576               	.LBE172:
 1577               	.LBE170:
 1578               	.LBE169:
 1579               		.stabs	"_options/writeColor.c",132,0,0,.Ltext26
 1580               	.Ltext26:
 375:_options/writeColor.c ****       writeColor(TRUE, *(color+10));                         
 1581               		.stabn	68,0,375,.LM198-.LFBB5
 1582               	.LM198:
 1583 04ca 8285      		ldd r24,Z+10
 1584               	.LBB174:
 1585               	.LBB175:
 138:_options/writeColor.c **** 
 1586               		.stabn	68,0,138,.LM199-.LFBB5
 1587               	.LM199:
 1588 04cc 482F      		mov r20,r24
 1589 04ce 4295      		swap r20
 1590 04d0 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1591               		.stabn	68,0,140,.LM200-.LFBB5
 1592               	.LM200:
 1593 04d2 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 1594               		.stabn	68,0,136,.LM201-.LFBB5
 1595               	.LM201:
 1596 04d4 282F      		mov r18,r24
 1597 04d6 2370      		andi r18,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1598               		.stabn	68,0,140,.LM202-.LFBB5
 1599               	.LM202:
 1600 04d8 30E0      		ldi r19,0
 1601 04da 2E5F      		subi r18,-2
 1602 04dc 3F4F      		sbci r19,-1
 1603 04de 3093 6100 		sts 96+1,r19
 1604 04e2 2093 6000 		sts 96,r18
 1605 04e6 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1606               		.stabn	68,0,141,.LM203-.LFBB5
 1607               	.LM203:
 1608 04e8 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 1609               		.stabn	68,0,137,.LM204-.LFBB5
 1610               	.LM204:
 1611 04ea 8695      		lsr r24
 1612 04ec 8695      		lsr r24
 1613 04ee 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1614               		.stabn	68,0,141,.LM205-.LFBB5
 1615               	.LM205:
 1616 04f0 90E0      		ldi r25,0
 1617 04f2 0396      		adiw r24,3
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 65


 1618 04f4 93BD      		out 0x22+1,r25
 1619 04f6 82BD      		out 0x22,r24
 1620 04f8 8D98      		cbi 0x11,5
 1621               	.LBB176:
 142:_options/writeColor.c **** 
 1622               		.stabn	68,0,142,.LM206-.LFBB5
 1623               	.LM206:
 1624 04fa 4330      		cpi r20,lo8(3)
 1625 04fc 01F0      		breq .L71
 1626 04fe 4C5F      		subi r20,lo8(-(4))
 1627 0500 00C0      		rjmp .L43
 1628               	.L71:
 1629 0502 48E0      		ldi r20,lo8(8)
 1630               	.L43:
 1631 0504 AD9A      		sbi 0x15,5
 1632 0506 842F      		mov r24,r20
 1633 0508 90E0      		ldi r25,0
 1634 050a 9FBD      		out 0x2e+1,r25
 1635 050c 8EBD      		out 0x2e,r24
 1636 050e AD98      		cbi 0x15,5
 1637 0510 87E0      		ldi r24,lo8(7)
 1638 0512 90E0      		ldi r25,0
 1639               	.L45:
 1640               	.LBE176:
 1641               	.LBB177:
 1642               	.LBB178:
 1643               		.stabs	"delay_cyc.c",132,0,0,.Ltext27
 1644               	.Ltext27:
 245:delay_cyc.c   ****       asm("nop");
 1645               		.stabn	68,0,245,.LM207-.LFBB5
 1646               	.LM207:
 1647               	/* #APP */
 1648               	 ;  245 "delay_cyc.c" 1
 1649 0514 0000      		nop
 1650               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 1651               		.stabn	68,0,246,.LM208-.LFBB5
 1652               	.LM208:
 1653               	 ;  246 "delay_cyc.c" 1
 1654 0516 0000      		nop
 1655               	 ;  0 "" 2
 1656               	/* #NOAPP */
 1657 0518 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 1658               		.stabn	68,0,221,.LM209-.LFBB5
 1659               	.LM209:
 1660 051a 0097      		sbiw r24,0
 1661 051c 01F4      		brne .L45
 271:delay_cyc.c   **** 		case 3:
 1662               		.stabn	68,0,271,.LM210-.LFBB5
 1663               	.LM210:
 1664               	/* #APP */
 1665               	 ;  271 "delay_cyc.c" 1
 1666 051e 0000      		nop
 1667               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 1668               		.stabn	68,0,273,.LM211-.LFBB5
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 66


 1669               	.LM211:
 1670               	 ;  273 "delay_cyc.c" 1
 1671 0520 0000      		nop
 1672               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 1673               		.stabn	68,0,275,.LM212-.LFBB5
 1674               	.LM212:
 1675               	 ;  275 "delay_cyc.c" 1
 1676 0522 0000      		nop
 1677               	 ;  0 "" 2
 1678               		.stabn	68,0,277,.LM213-.LFBB5
 1679               	.LM213:
 1680               	 ;  277 "delay_cyc.c" 1
 1681 0524 0000      		nop
 1682               	 ;  0 "" 2
 1683               	/* #NOAPP */
 1684               	.LBE178:
 1685               	.LBE177:
 1686               	.LBE175:
 1687               	.LBE174:
 1688               		.stabs	"_options/writeColor.c",132,0,0,.Ltext28
 1689               	.Ltext28:
 376:_options/writeColor.c ****       writeColor(TRUE, *(color+11));                         
 1690               		.stabn	68,0,376,.LM214-.LFBB5
 1691               	.LM214:
 1692 0526 8385      		ldd r24,Z+11
 1693               	.LBB179:
 1694               	.LBB180:
 138:_options/writeColor.c **** 
 1695               		.stabn	68,0,138,.LM215-.LFBB5
 1696               	.LM215:
 1697 0528 482F      		mov r20,r24
 1698 052a 4295      		swap r20
 1699 052c 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1700               		.stabn	68,0,140,.LM216-.LFBB5
 1701               	.LM216:
 1702 052e 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 1703               		.stabn	68,0,136,.LM217-.LFBB5
 1704               	.LM217:
 1705 0530 282F      		mov r18,r24
 1706 0532 2370      		andi r18,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1707               		.stabn	68,0,140,.LM218-.LFBB5
 1708               	.LM218:
 1709 0534 30E0      		ldi r19,0
 1710 0536 2E5F      		subi r18,-2
 1711 0538 3F4F      		sbci r19,-1
 1712 053a 3093 6100 		sts 96+1,r19
 1713 053e 2093 6000 		sts 96,r18
 1714 0542 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1715               		.stabn	68,0,141,.LM219-.LFBB5
 1716               	.LM219:
 1717 0544 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 67


 1718               		.stabn	68,0,137,.LM220-.LFBB5
 1719               	.LM220:
 1720 0546 8695      		lsr r24
 1721 0548 8695      		lsr r24
 1722 054a 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1723               		.stabn	68,0,141,.LM221-.LFBB5
 1724               	.LM221:
 1725 054c 90E0      		ldi r25,0
 1726 054e 0396      		adiw r24,3
 1727 0550 93BD      		out 0x22+1,r25
 1728 0552 82BD      		out 0x22,r24
 1729 0554 8D98      		cbi 0x11,5
 1730               	.LBB181:
 142:_options/writeColor.c **** 
 1731               		.stabn	68,0,142,.LM222-.LFBB5
 1732               	.LM222:
 1733 0556 4330      		cpi r20,lo8(3)
 1734 0558 01F0      		breq .L72
 1735 055a 4C5F      		subi r20,lo8(-(4))
 1736 055c 00C0      		rjmp .L46
 1737               	.L72:
 1738 055e 48E0      		ldi r20,lo8(8)
 1739               	.L46:
 1740 0560 AD9A      		sbi 0x15,5
 1741 0562 842F      		mov r24,r20
 1742 0564 90E0      		ldi r25,0
 1743 0566 9FBD      		out 0x2e+1,r25
 1744 0568 8EBD      		out 0x2e,r24
 1745 056a AD98      		cbi 0x15,5
 1746 056c 87E0      		ldi r24,lo8(7)
 1747 056e 90E0      		ldi r25,0
 1748               	.L48:
 1749               	.LBE181:
 1750               	.LBB182:
 1751               	.LBB183:
 1752               		.stabs	"delay_cyc.c",132,0,0,.Ltext29
 1753               	.Ltext29:
 245:delay_cyc.c   ****       asm("nop");
 1754               		.stabn	68,0,245,.LM223-.LFBB5
 1755               	.LM223:
 1756               	/* #APP */
 1757               	 ;  245 "delay_cyc.c" 1
 1758 0570 0000      		nop
 1759               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 1760               		.stabn	68,0,246,.LM224-.LFBB5
 1761               	.LM224:
 1762               	 ;  246 "delay_cyc.c" 1
 1763 0572 0000      		nop
 1764               	 ;  0 "" 2
 1765               	/* #NOAPP */
 1766 0574 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 1767               		.stabn	68,0,221,.LM225-.LFBB5
 1768               	.LM225:
 1769 0576 0097      		sbiw r24,0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 68


 1770 0578 01F4      		brne .L48
 271:delay_cyc.c   **** 		case 3:
 1771               		.stabn	68,0,271,.LM226-.LFBB5
 1772               	.LM226:
 1773               	/* #APP */
 1774               	 ;  271 "delay_cyc.c" 1
 1775 057a 0000      		nop
 1776               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 1777               		.stabn	68,0,273,.LM227-.LFBB5
 1778               	.LM227:
 1779               	 ;  273 "delay_cyc.c" 1
 1780 057c 0000      		nop
 1781               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 1782               		.stabn	68,0,275,.LM228-.LFBB5
 1783               	.LM228:
 1784               	 ;  275 "delay_cyc.c" 1
 1785 057e 0000      		nop
 1786               	 ;  0 "" 2
 1787               		.stabn	68,0,277,.LM229-.LFBB5
 1788               	.LM229:
 1789               	 ;  277 "delay_cyc.c" 1
 1790 0580 0000      		nop
 1791               	 ;  0 "" 2
 1792               	/* #NOAPP */
 1793               	.LBE183:
 1794               	.LBE182:
 1795               	.LBE180:
 1796               	.LBE179:
 1797               		.stabs	"_options/writeColor.c",132,0,0,.Ltext30
 1798               	.Ltext30:
 377:_options/writeColor.c ****       writeColor(TRUE, *(color+12));                         
 1799               		.stabn	68,0,377,.LM230-.LFBB5
 1800               	.LM230:
 1801 0582 8485      		ldd r24,Z+12
 1802               	.LBB184:
 1803               	.LBB185:
 138:_options/writeColor.c **** 
 1804               		.stabn	68,0,138,.LM231-.LFBB5
 1805               	.LM231:
 1806 0584 482F      		mov r20,r24
 1807 0586 4295      		swap r20
 1808 0588 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1809               		.stabn	68,0,140,.LM232-.LFBB5
 1810               	.LM232:
 1811 058a 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 1812               		.stabn	68,0,136,.LM233-.LFBB5
 1813               	.LM233:
 1814 058c 282F      		mov r18,r24
 1815 058e 2370      		andi r18,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1816               		.stabn	68,0,140,.LM234-.LFBB5
 1817               	.LM234:
 1818 0590 30E0      		ldi r19,0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 69


 1819 0592 2E5F      		subi r18,-2
 1820 0594 3F4F      		sbci r19,-1
 1821 0596 3093 6100 		sts 96+1,r19
 1822 059a 2093 6000 		sts 96,r18
 1823 059e 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1824               		.stabn	68,0,141,.LM235-.LFBB5
 1825               	.LM235:
 1826 05a0 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 1827               		.stabn	68,0,137,.LM236-.LFBB5
 1828               	.LM236:
 1829 05a2 8695      		lsr r24
 1830 05a4 8695      		lsr r24
 1831 05a6 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1832               		.stabn	68,0,141,.LM237-.LFBB5
 1833               	.LM237:
 1834 05a8 90E0      		ldi r25,0
 1835 05aa 0396      		adiw r24,3
 1836 05ac 93BD      		out 0x22+1,r25
 1837 05ae 82BD      		out 0x22,r24
 1838 05b0 8D98      		cbi 0x11,5
 1839               	.LBB186:
 142:_options/writeColor.c **** 
 1840               		.stabn	68,0,142,.LM238-.LFBB5
 1841               	.LM238:
 1842 05b2 4330      		cpi r20,lo8(3)
 1843 05b4 01F0      		breq .L73
 1844 05b6 4C5F      		subi r20,lo8(-(4))
 1845 05b8 00C0      		rjmp .L49
 1846               	.L73:
 1847 05ba 48E0      		ldi r20,lo8(8)
 1848               	.L49:
 1849 05bc AD9A      		sbi 0x15,5
 1850 05be 842F      		mov r24,r20
 1851 05c0 90E0      		ldi r25,0
 1852 05c2 9FBD      		out 0x2e+1,r25
 1853 05c4 8EBD      		out 0x2e,r24
 1854 05c6 AD98      		cbi 0x15,5
 1855 05c8 87E0      		ldi r24,lo8(7)
 1856 05ca 90E0      		ldi r25,0
 1857               	.L51:
 1858               	.LBE186:
 1859               	.LBB187:
 1860               	.LBB188:
 1861               		.stabs	"delay_cyc.c",132,0,0,.Ltext31
 1862               	.Ltext31:
 245:delay_cyc.c   ****       asm("nop");
 1863               		.stabn	68,0,245,.LM239-.LFBB5
 1864               	.LM239:
 1865               	/* #APP */
 1866               	 ;  245 "delay_cyc.c" 1
 1867 05cc 0000      		nop
 1868               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 1869               		.stabn	68,0,246,.LM240-.LFBB5
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 70


 1870               	.LM240:
 1871               	 ;  246 "delay_cyc.c" 1
 1872 05ce 0000      		nop
 1873               	 ;  0 "" 2
 1874               	/* #NOAPP */
 1875 05d0 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 1876               		.stabn	68,0,221,.LM241-.LFBB5
 1877               	.LM241:
 1878 05d2 0097      		sbiw r24,0
 1879 05d4 01F4      		brne .L51
 271:delay_cyc.c   **** 		case 3:
 1880               		.stabn	68,0,271,.LM242-.LFBB5
 1881               	.LM242:
 1882               	/* #APP */
 1883               	 ;  271 "delay_cyc.c" 1
 1884 05d6 0000      		nop
 1885               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 1886               		.stabn	68,0,273,.LM243-.LFBB5
 1887               	.LM243:
 1888               	 ;  273 "delay_cyc.c" 1
 1889 05d8 0000      		nop
 1890               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 1891               		.stabn	68,0,275,.LM244-.LFBB5
 1892               	.LM244:
 1893               	 ;  275 "delay_cyc.c" 1
 1894 05da 0000      		nop
 1895               	 ;  0 "" 2
 1896               		.stabn	68,0,277,.LM245-.LFBB5
 1897               	.LM245:
 1898               	 ;  277 "delay_cyc.c" 1
 1899 05dc 0000      		nop
 1900               	 ;  0 "" 2
 1901               	/* #NOAPP */
 1902               	.LBE188:
 1903               	.LBE187:
 1904               	.LBE185:
 1905               	.LBE184:
 1906               		.stabs	"_options/writeColor.c",132,0,0,.Ltext32
 1907               	.Ltext32:
 378:_options/writeColor.c ****       writeColor(TRUE, *(color+13));                         
 1908               		.stabn	68,0,378,.LM246-.LFBB5
 1909               	.LM246:
 1910 05de 8585      		ldd r24,Z+13
 1911               	.LBB189:
 1912               	.LBB190:
 138:_options/writeColor.c **** 
 1913               		.stabn	68,0,138,.LM247-.LFBB5
 1914               	.LM247:
 1915 05e0 482F      		mov r20,r24
 1916 05e2 4295      		swap r20
 1917 05e4 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1918               		.stabn	68,0,140,.LM248-.LFBB5
 1919               	.LM248:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 71


 1920 05e6 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 1921               		.stabn	68,0,136,.LM249-.LFBB5
 1922               	.LM249:
 1923 05e8 282F      		mov r18,r24
 1924 05ea 2370      		andi r18,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 1925               		.stabn	68,0,140,.LM250-.LFBB5
 1926               	.LM250:
 1927 05ec 30E0      		ldi r19,0
 1928 05ee 2E5F      		subi r18,-2
 1929 05f0 3F4F      		sbci r19,-1
 1930 05f2 3093 6100 		sts 96+1,r19
 1931 05f6 2093 6000 		sts 96,r18
 1932 05fa 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1933               		.stabn	68,0,141,.LM251-.LFBB5
 1934               	.LM251:
 1935 05fc 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 1936               		.stabn	68,0,137,.LM252-.LFBB5
 1937               	.LM252:
 1938 05fe 8695      		lsr r24
 1939 0600 8695      		lsr r24
 1940 0602 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 1941               		.stabn	68,0,141,.LM253-.LFBB5
 1942               	.LM253:
 1943 0604 90E0      		ldi r25,0
 1944 0606 0396      		adiw r24,3
 1945 0608 93BD      		out 0x22+1,r25
 1946 060a 82BD      		out 0x22,r24
 1947 060c 8D98      		cbi 0x11,5
 1948               	.LBB191:
 142:_options/writeColor.c **** 
 1949               		.stabn	68,0,142,.LM254-.LFBB5
 1950               	.LM254:
 1951 060e 4330      		cpi r20,lo8(3)
 1952 0610 01F0      		breq .L74
 1953 0612 4C5F      		subi r20,lo8(-(4))
 1954 0614 00C0      		rjmp .L52
 1955               	.L74:
 1956 0616 48E0      		ldi r20,lo8(8)
 1957               	.L52:
 1958 0618 AD9A      		sbi 0x15,5
 1959 061a 842F      		mov r24,r20
 1960 061c 90E0      		ldi r25,0
 1961 061e 9FBD      		out 0x2e+1,r25
 1962 0620 8EBD      		out 0x2e,r24
 1963 0622 AD98      		cbi 0x15,5
 1964 0624 87E0      		ldi r24,lo8(7)
 1965 0626 90E0      		ldi r25,0
 1966               	.L54:
 1967               	.LBE191:
 1968               	.LBB192:
 1969               	.LBB193:
 1970               		.stabs	"delay_cyc.c",132,0,0,.Ltext33
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 72


 1971               	.Ltext33:
 245:delay_cyc.c   ****       asm("nop");
 1972               		.stabn	68,0,245,.LM255-.LFBB5
 1973               	.LM255:
 1974               	/* #APP */
 1975               	 ;  245 "delay_cyc.c" 1
 1976 0628 0000      		nop
 1977               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 1978               		.stabn	68,0,246,.LM256-.LFBB5
 1979               	.LM256:
 1980               	 ;  246 "delay_cyc.c" 1
 1981 062a 0000      		nop
 1982               	 ;  0 "" 2
 1983               	/* #NOAPP */
 1984 062c 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 1985               		.stabn	68,0,221,.LM257-.LFBB5
 1986               	.LM257:
 1987 062e 0097      		sbiw r24,0
 1988 0630 01F4      		brne .L54
 271:delay_cyc.c   **** 		case 3:
 1989               		.stabn	68,0,271,.LM258-.LFBB5
 1990               	.LM258:
 1991               	/* #APP */
 1992               	 ;  271 "delay_cyc.c" 1
 1993 0632 0000      		nop
 1994               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 1995               		.stabn	68,0,273,.LM259-.LFBB5
 1996               	.LM259:
 1997               	 ;  273 "delay_cyc.c" 1
 1998 0634 0000      		nop
 1999               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 2000               		.stabn	68,0,275,.LM260-.LFBB5
 2001               	.LM260:
 2002               	 ;  275 "delay_cyc.c" 1
 2003 0636 0000      		nop
 2004               	 ;  0 "" 2
 2005               		.stabn	68,0,277,.LM261-.LFBB5
 2006               	.LM261:
 2007               	 ;  277 "delay_cyc.c" 1
 2008 0638 0000      		nop
 2009               	 ;  0 "" 2
 2010               	/* #NOAPP */
 2011               	.LBE193:
 2012               	.LBE192:
 2013               	.LBE190:
 2014               	.LBE189:
 2015               		.stabs	"_options/writeColor.c",132,0,0,.Ltext34
 2016               	.Ltext34:
 379:_options/writeColor.c ****       writeColor(TRUE, *(color+14));                         
 2017               		.stabn	68,0,379,.LM262-.LFBB5
 2018               	.LM262:
 2019 063a 8685      		ldd r24,Z+14
 2020               	.LBB194:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 73


 2021               	.LBB195:
 138:_options/writeColor.c **** 
 2022               		.stabn	68,0,138,.LM263-.LFBB5
 2023               	.LM263:
 2024 063c 482F      		mov r20,r24
 2025 063e 4295      		swap r20
 2026 0640 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 2027               		.stabn	68,0,140,.LM264-.LFBB5
 2028               	.LM264:
 2029 0642 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 2030               		.stabn	68,0,136,.LM265-.LFBB5
 2031               	.LM265:
 2032 0644 282F      		mov r18,r24
 2033 0646 2370      		andi r18,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 2034               		.stabn	68,0,140,.LM266-.LFBB5
 2035               	.LM266:
 2036 0648 30E0      		ldi r19,0
 2037 064a 2E5F      		subi r18,-2
 2038 064c 3F4F      		sbci r19,-1
 2039 064e 3093 6100 		sts 96+1,r19
 2040 0652 2093 6000 		sts 96,r18
 2041 0656 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 2042               		.stabn	68,0,141,.LM267-.LFBB5
 2043               	.LM267:
 2044 0658 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 2045               		.stabn	68,0,137,.LM268-.LFBB5
 2046               	.LM268:
 2047 065a 8695      		lsr r24
 2048 065c 8695      		lsr r24
 2049 065e 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 2050               		.stabn	68,0,141,.LM269-.LFBB5
 2051               	.LM269:
 2052 0660 90E0      		ldi r25,0
 2053 0662 0396      		adiw r24,3
 2054 0664 93BD      		out 0x22+1,r25
 2055 0666 82BD      		out 0x22,r24
 2056 0668 8D98      		cbi 0x11,5
 2057               	.LBB196:
 142:_options/writeColor.c **** 
 2058               		.stabn	68,0,142,.LM270-.LFBB5
 2059               	.LM270:
 2060 066a 4330      		cpi r20,lo8(3)
 2061 066c 01F0      		breq .L75
 2062 066e 4C5F      		subi r20,lo8(-(4))
 2063 0670 00C0      		rjmp .L55
 2064               	.L75:
 2065 0672 48E0      		ldi r20,lo8(8)
 2066               	.L55:
 2067 0674 AD9A      		sbi 0x15,5
 2068 0676 842F      		mov r24,r20
 2069 0678 90E0      		ldi r25,0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 74


 2070 067a 9FBD      		out 0x2e+1,r25
 2071 067c 8EBD      		out 0x2e,r24
 2072 067e AD98      		cbi 0x15,5
 2073 0680 87E0      		ldi r24,lo8(7)
 2074 0682 90E0      		ldi r25,0
 2075               	.L57:
 2076               	.LBE196:
 2077               	.LBB197:
 2078               	.LBB198:
 2079               		.stabs	"delay_cyc.c",132,0,0,.Ltext35
 2080               	.Ltext35:
 245:delay_cyc.c   ****       asm("nop");
 2081               		.stabn	68,0,245,.LM271-.LFBB5
 2082               	.LM271:
 2083               	/* #APP */
 2084               	 ;  245 "delay_cyc.c" 1
 2085 0684 0000      		nop
 2086               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 2087               		.stabn	68,0,246,.LM272-.LFBB5
 2088               	.LM272:
 2089               	 ;  246 "delay_cyc.c" 1
 2090 0686 0000      		nop
 2091               	 ;  0 "" 2
 2092               	/* #NOAPP */
 2093 0688 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 2094               		.stabn	68,0,221,.LM273-.LFBB5
 2095               	.LM273:
 2096 068a 0097      		sbiw r24,0
 2097 068c 01F4      		brne .L57
 271:delay_cyc.c   **** 		case 3:
 2098               		.stabn	68,0,271,.LM274-.LFBB5
 2099               	.LM274:
 2100               	/* #APP */
 2101               	 ;  271 "delay_cyc.c" 1
 2102 068e 0000      		nop
 2103               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 2104               		.stabn	68,0,273,.LM275-.LFBB5
 2105               	.LM275:
 2106               	 ;  273 "delay_cyc.c" 1
 2107 0690 0000      		nop
 2108               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 2109               		.stabn	68,0,275,.LM276-.LFBB5
 2110               	.LM276:
 2111               	 ;  275 "delay_cyc.c" 1
 2112 0692 0000      		nop
 2113               	 ;  0 "" 2
 2114               		.stabn	68,0,277,.LM277-.LFBB5
 2115               	.LM277:
 2116               	 ;  277 "delay_cyc.c" 1
 2117 0694 0000      		nop
 2118               	 ;  0 "" 2
 2119               	/* #NOAPP */
 2120               	.LBE198:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 75


 2121               	.LBE197:
 2122               	.LBE195:
 2123               	.LBE194:
 2124               		.stabs	"_options/writeColor.c",132,0,0,.Ltext36
 2125               	.Ltext36:
 380:_options/writeColor.c ****       writeColor(TRUE, *(color+15));   
 2126               		.stabn	68,0,380,.LM278-.LFBB5
 2127               	.LM278:
 2128 0696 8785      		ldd r24,Z+15
 2129               	.LBB199:
 2130               	.LBB200:
 138:_options/writeColor.c **** 
 2131               		.stabn	68,0,138,.LM279-.LFBB5
 2132               	.LM279:
 2133 0698 482F      		mov r20,r24
 2134 069a 4295      		swap r20
 2135 069c 4370      		andi r20,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 2136               		.stabn	68,0,140,.LM280-.LFBB5
 2137               	.LM280:
 2138 069e 8D9A      		sbi 0x11,5
 136:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 2139               		.stabn	68,0,136,.LM281-.LFBB5
 2140               	.LM281:
 2141 06a0 282F      		mov r18,r24
 2142 06a2 2370      		andi r18,lo8(3)
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 2143               		.stabn	68,0,140,.LM282-.LFBB5
 2144               	.LM282:
 2145 06a4 30E0      		ldi r19,0
 2146 06a6 2E5F      		subi r18,-2
 2147 06a8 3F4F      		sbci r19,-1
 2148 06aa 3093 6100 		sts 96+1,r19
 2149 06ae 2093 6000 		sts 96,r18
 2150 06b2 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 2151               		.stabn	68,0,141,.LM283-.LFBB5
 2152               	.LM283:
 2153 06b4 8D9A      		sbi 0x11,5
 137:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 2154               		.stabn	68,0,137,.LM284-.LFBB5
 2155               	.LM284:
 2156 06b6 8695      		lsr r24
 2157 06b8 8695      		lsr r24
 2158 06ba 8370      		andi r24,lo8(3)
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 2159               		.stabn	68,0,141,.LM285-.LFBB5
 2160               	.LM285:
 2161 06bc 90E0      		ldi r25,0
 2162 06be 0396      		adiw r24,3
 2163 06c0 93BD      		out 0x22+1,r25
 2164 06c2 82BD      		out 0x22,r24
 2165 06c4 8D98      		cbi 0x11,5
 2166               	.LBB201:
 142:_options/writeColor.c **** 
 2167               		.stabn	68,0,142,.LM286-.LFBB5
 2168               	.LM286:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 76


 2169 06c6 4330      		cpi r20,lo8(3)
 2170 06c8 01F0      		breq .L76
 2171 06ca 4C5F      		subi r20,lo8(-(4))
 2172 06cc 00C0      		rjmp .L58
 2173               	.L76:
 2174 06ce 48E0      		ldi r20,lo8(8)
 2175               	.L58:
 2176 06d0 AD9A      		sbi 0x15,5
 2177 06d2 842F      		mov r24,r20
 2178 06d4 90E0      		ldi r25,0
 2179 06d6 9FBD      		out 0x2e+1,r25
 2180 06d8 8EBD      		out 0x2e,r24
 2181 06da AD98      		cbi 0x15,5
 2182 06dc 87E0      		ldi r24,lo8(7)
 2183 06de 90E0      		ldi r25,0
 2184               	.L60:
 2185               	.LBE201:
 2186               	.LBB202:
 2187               	.LBB203:
 2188               		.stabs	"delay_cyc.c",132,0,0,.Ltext37
 2189               	.Ltext37:
 245:delay_cyc.c   ****       asm("nop");
 2190               		.stabn	68,0,245,.LM287-.LFBB5
 2191               	.LM287:
 2192               	/* #APP */
 2193               	 ;  245 "delay_cyc.c" 1
 2194 06e0 0000      		nop
 2195               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 2196               		.stabn	68,0,246,.LM288-.LFBB5
 2197               	.LM288:
 2198               	 ;  246 "delay_cyc.c" 1
 2199 06e2 0000      		nop
 2200               	 ;  0 "" 2
 2201               	/* #NOAPP */
 2202 06e4 0197      		sbiw r24,1
 221:delay_cyc.c   ****    {
 2203               		.stabn	68,0,221,.LM289-.LFBB5
 2204               	.LM289:
 2205 06e6 0097      		sbiw r24,0
 2206 06e8 01F4      		brne .L60
 271:delay_cyc.c   **** 		case 3:
 2207               		.stabn	68,0,271,.LM290-.LFBB5
 2208               	.LM290:
 2209               	/* #APP */
 2210               	 ;  271 "delay_cyc.c" 1
 2211 06ea 0000      		nop
 2212               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 2213               		.stabn	68,0,273,.LM291-.LFBB5
 2214               	.LM291:
 2215               	 ;  273 "delay_cyc.c" 1
 2216 06ec 0000      		nop
 2217               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 2218               		.stabn	68,0,275,.LM292-.LFBB5
 2219               	.LM292:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 77


 2220               	 ;  275 "delay_cyc.c" 1
 2221 06ee 0000      		nop
 2222               	 ;  0 "" 2
 2223               		.stabn	68,0,277,.LM293-.LFBB5
 2224               	.LM293:
 2225               	 ;  277 "delay_cyc.c" 1
 2226 06f0 0000      		nop
 2227               	 ;  0 "" 2
 2228               	/* #NOAPP */
 2229               	.LBE203:
 2230               	.LBE202:
 2231               	.LBE200:
 2232               	.LBE199:
 2233               	.LBB204:
 2234               	.LBB205:
 2235               		.stabs	"_options/writeColor.c",132,0,0,.Ltext38
 2236               	.Ltext38:
 140:_options/writeColor.c **** 	setGreen4(greenVal);
 2237               		.stabn	68,0,140,.LM294-.LFBB5
 2238               	.LM294:
 2239 06f2 8D9A      		sbi 0x11,5
 2240 06f4 22E0      		ldi r18,lo8(2)
 2241 06f6 30E0      		ldi r19,0
 2242 06f8 3093 6100 		sts 96+1,r19
 2243 06fc 2093 6000 		sts 96,r18
 2244 0700 8D98      		cbi 0x11,5
 141:_options/writeColor.c **** 	setBlue4(blueVal);
 2245               		.stabn	68,0,141,.LM295-.LFBB5
 2246               	.LM295:
 2247 0702 8D9A      		sbi 0x11,5
 2248 0704 83E0      		ldi r24,lo8(3)
 2249 0706 90E0      		ldi r25,0
 2250 0708 93BD      		out 0x22+1,r25
 2251 070a 82BD      		out 0x22,r24
 2252 070c 8D98      		cbi 0x11,5
 2253               	.LBB206:
 142:_options/writeColor.c **** 
 2254               		.stabn	68,0,142,.LM296-.LFBB5
 2255               	.LM296:
 2256 070e AD9A      		sbi 0x15,5
 2257 0710 84E0      		ldi r24,lo8(4)
 2258 0712 90E0      		ldi r25,0
 2259 0714 9FBD      		out 0x2e+1,r25
 2260 0716 8EBD      		out 0x2e,r24
 2261 0718 AD98      		cbi 0x15,5
 2262               	.LBE206:
 2263               	.LBE205:
 2264               	.LBE204:
 381:_options/writeColor.c **** #define COLORS_WRITTEN   16      
 382:_options/writeColor.c **** #if ( (defined(COLOR_BAR_SCROLL) && COLOR_BAR_SCROLL) \
 383:_options/writeColor.c ****    || (defined(ROW_BUFFER) && (ROW_BUFFER)) )
 384:_options/writeColor.c ****       writeColor(TRUE, *(color+16));
 385:_options/writeColor.c ****       writeColor(TRUE, *(color+17));
 386:_options/writeColor.c ****       writeColor(TRUE, *(color+18));
 387:_options/writeColor.c ****       writeColor(TRUE, *(color+19));
 388:_options/writeColor.c **** writeColor(TRUE, *(color+20));
 389:_options/writeColor.c **** writeColor(TRUE, *(color+21));
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 78


 390:_options/writeColor.c **** writeColor(TRUE, *(color+22));
 391:_options/writeColor.c **** writeColor(TRUE, *(color+23));
 392:_options/writeColor.c **** writeColor(TRUE, *(color+24));
 393:_options/writeColor.c **** writeColor(TRUE, *(color+25));
 394:_options/writeColor.c **** writeColor(TRUE, *(color+26));
 395:_options/writeColor.c **** writeColor(TRUE, *(color+27));
 396:_options/writeColor.c **** #define COLORS_WRITTEN   28
 397:_options/writeColor.c **** #if (defined(ROW_BUFFER) && (ROW_BUFFER))
 398:_options/writeColor.c **** writeColor(TRUE, *(color+28));
 399:_options/writeColor.c **** writeColor(TRUE, *(color+29));
 400:_options/writeColor.c **** writeColor(TRUE, *(color+30));
 401:_options/writeColor.c **** writeColor(TRUE, *(color+31));
 402:_options/writeColor.c **** //Some sort of syncing problem after 32... (?)
 403:_options/writeColor.c **** 
 404:_options/writeColor.c **** writeColor(TRUE, *(color+32));
 405:_options/writeColor.c **** writeColor(TRUE, *(color+33));
 406:_options/writeColor.c **** writeColor(TRUE, *(color+34));
 407:_options/writeColor.c **** writeColor(TRUE, *(color+35));
 408:_options/writeColor.c **** writeColor(TRUE, *(color+36));
 409:_options/writeColor.c **** writeColor(TRUE, *(color+37));
 410:_options/writeColor.c **** writeColor(TRUE, *(color+38));
 411:_options/writeColor.c **** writeColor(TRUE, *(color+39));
 412:_options/writeColor.c **** writeColor(TRUE, *(color+40));
 413:_options/writeColor.c **** writeColor(TRUE, *(color+41));
 414:_options/writeColor.c **** writeColor(TRUE, *(color+42));
 415:_options/writeColor.c **** writeColor(TRUE, *(color+43));
 416:_options/writeColor.c **** writeColor(TRUE, *(color+44));
 417:_options/writeColor.c **** writeColor(TRUE, *(color+45));
 418:_options/writeColor.c **** writeColor(TRUE, *(color+46));
 419:_options/writeColor.c **** writeColor(TRUE, *(color+47));
 420:_options/writeColor.c **** writeColor(TRUE, *(color+48));
 421:_options/writeColor.c **** writeColor(TRUE, *(color+49));
 422:_options/writeColor.c **** writeColor(TRUE, *(color+50));
 423:_options/writeColor.c **** writeColor(TRUE, *(color+51));
 424:_options/writeColor.c **** writeColor(TRUE, *(color+52));
 425:_options/writeColor.c **** writeColor(TRUE, *(color+53));
 426:_options/writeColor.c **** writeColor(TRUE, *(color+54));
 427:_options/writeColor.c **** writeColor(TRUE, *(color+55));
 428:_options/writeColor.c **** writeColor(TRUE, *(color+56));
 429:_options/writeColor.c **** writeColor(TRUE, *(color+57));
 430:_options/writeColor.c **** writeColor(TRUE, *(color+58));
 431:_options/writeColor.c **** writeColor(TRUE, *(color+59));
 432:_options/writeColor.c **** writeColor(TRUE, *(color+60));
 433:_options/writeColor.c **** writeColor(TRUE, *(color+61));
 434:_options/writeColor.c **** writeColor(TRUE, *(color+62));
 435:_options/writeColor.c **** writeColor(TRUE, *(color+63));
 436:_options/writeColor.c **** // WriteColor writes the pixel *after* the calculations...
 437:_options/writeColor.c **** // thus the pixel appears basically after writeColor completes
 438:_options/writeColor.c **** // These nops assure the 64th pixel is fully-displayed before exitting
 439:_options/writeColor.c **** // (Not sure how the other following instructions apply to this)
 440:_options/writeColor.c **** // The number of nops was found experimentally...
 441:_options/writeColor.c **** asm("nop");
 442:_options/writeColor.c **** asm("nop");
 443:_options/writeColor.c **** asm("nop");
 444:_options/writeColor.c **** asm("nop");
 445:_options/writeColor.c **** asm("nop");
 446:_options/writeColor.c **** asm("nop");
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 79


 447:_options/writeColor.c **** asm("nop");
 448:_options/writeColor.c **** asm("nop");
 449:_options/writeColor.c **** //count "0" below, as well..
 450:_options/writeColor.c **** #define COLORS_WRITTEN 65
 451:_options/writeColor.c **** #endif //ROW_BUFFER
 452:_options/writeColor.c **** #else
 453:_options/writeColor.c **** //   writeColor(0);
 454:_options/writeColor.c **** #endif //COLOR_BARS || ROW_BUFFER
 455:_options/writeColor.c **** /*      reg[17] = colorBuffer[rowNum][17];                         
 456:_options/writeColor.c ****       writeColor(reg[17]);                         
 457:_options/writeColor.c ****       ...
 458:_options/writeColor.c ****       reg[20] = colorBuffer[rowNum][20];                         
 459:_options/writeColor.c ****       writeColor(reg[20]);  
 460:_options/writeColor.c ****       
 461:_options/writeColor.c ****       //REPEATING to fill screen... (delayDots = 342 worked prior to this)
 462:_options/writeColor.c ****       reg[0] = colorBuffer[rowNum][0];
 463:_options/writeColor.c ****       writeColor(reg[0]);
 464:_options/writeColor.c ****       ...
 465:_options/writeColor.c ****       reg[10] = colorBuffer[rowNum][10];
 466:_options/writeColor.c ****       writeColor(reg[10]);
 467:_options/writeColor.c **** */
 468:_options/writeColor.c ****       //Display the rest as black...
 469:_options/writeColor.c ****       writeColor(FALSE, 0);
 470:_options/writeColor.c **** 		//Do it as quickly as possible.
 471:_options/writeColor.c **** 		// (No, this cuts off the last pixel...)
 472:_options/writeColor.c **** 		//OCR1D = 0;	//Red Off
 473:_options/writeColor.c **** 		//DT1 = 0;		//Green Off
 474:_options/writeColor.c **** 		//OCR1A = 4;  //Blue Off
 475:_options/writeColor.c **** 
 476:_options/writeColor.c **** 		//writeColor(0xff);
 477:_options/writeColor.c ****         //delay_Dots(500);//142); //Don't want to disable DE too early...   
 478:_options/writeColor.c ****       //900 leaves a buffer for various calculations while also showing
 479:_options/writeColor.c ****       // a blue bar at the right-side...
 480:_options/writeColor.c ****       //LTN Last Used 900
 481:_options/writeColor.c ****       // -68 is from 900's intent, IIRC
 482:_options/writeColor.c ****       //  seems arbitrary, but its value (especially if too small)
 483:_options/writeColor.c ****       // causes blank lines... (?!)
 484:_options/writeColor.c ****       // -60 makes more sense for a delay (was the original post-900)
 485:_options/writeColor.c ****       //  (outside DOTS_TO_CYC because it's for cycles used for calcs...
 486:_options/writeColor.c ****       // -68 worked for LVDS_PRE=2
 487:_options/writeColor.c ****       // -60 for 1
 488:_options/writeColor.c ****       // 4 doesn't work... blue-lines
 489:_options/writeColor.c **** 
 490:_options/writeColor.c **** //a/o v60
 491:_options/writeColor.c **** //From Here Down, everything has only been tested recently with rowSegBuf
 492:_options/writeColor.c **** // I did a nice #if-#else scheme which makes this redundant
 493:_options/writeColor.c **** // with what's in rsb_drawPix()...
 494:_options/writeColor.c **** 
 495:_options/writeColor.c **** // a/o v59-12ish... ROW_COMPLETION_DELAY uses were already commented-out
 496:_options/writeColor.c **** // BUT WHY WAS IT REMOVED?! Seems to help, now.
 497:_options/writeColor.c **** // 
 498:_options/writeColor.c **** //   Some Experimenting has led to the conclusion:
 499:_options/writeColor.c **** //   DE's active-duration needn't be exact. In fact, it can be *way* off
 500:_options/writeColor.c **** //     White is shown between the end of drawSegs, and cyan is shown after
 501:_options/writeColor.c **** //   ROW_COMPLETION_DELAY (which, for now, is constant, regardless of how
 502:_options/writeColor.c **** //    many pixels were drawn)
 503:_options/writeColor.c **** //   Almost immediately after the ROW_COMPLETION_DELAY (when it turns cyan)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 80


 504:_options/writeColor.c **** //    DE is disabled
 505:_options/writeColor.c **** //    Yet the remainder of the screen still fills with cyan.
 506:_options/writeColor.c **** //   THUS: Disabling DE before the end of the screen appears to have the
 507:_options/writeColor.c **** //    effect of either not being acknowledged, or of repeating the last
 508:_options/writeColor.c **** //    color (untested)
 509:_options/writeColor.c **** //   Also, DE durations that are *longer* than the screen, seem to be 
 510:_options/writeColor.c **** //    absorbed by nonexistent pixels to the left...
 511:_options/writeColor.c **** //    (setting ROW_COMPLETION_DELAY==65535 unreasonably high,
 512:_options/writeColor.c **** //         just shows white at the right side, and still syncs)
 513:_options/writeColor.c **** //   Now, the original problem was that there seemed to be some carry-over
 514:_options/writeColor.c **** //   which maybe due to DEs that are EXTRAORDINARILY long?
 515:_options/writeColor.c **** //   NO!
 516:_options/writeColor.c **** //   Actually, it appears to be due to DEs that are TOO SHORT (?)
 517:_options/writeColor.c **** //      (setting ROW_COMPLETION_DELAY to 0 causes the problem again)
 518:_options/writeColor.c **** //   Doesn't appear to be *entirely* scientific, as using SEG_SINE
 519:_options/writeColor.c **** //    would suggest that these (now cyan) bars would appear at the troughs
 520:_options/writeColor.c **** //    in the diagonal-color-stripes at the top...
 521:_options/writeColor.c **** //    they seem, instead to be somewhat random, though maybe more common
 522:_options/writeColor.c **** //      at those locations.
 523:_options/writeColor.c **** //   But Wait! Setting ROW_COMPLETION_DELAY to 1 fixes it again.
 524:_options/writeColor.c **** //    realistically, that should be nothing more than a single nop; no?
 525:_options/writeColor.c **** //    (Maybe not, with a few cycles to entry, and minimum execution times)
 526:_options/writeColor.c **** //    a handful of nops does the trick, as well.
 527:_options/writeColor.c **** //    So is it a problem with too short a DE, or is it a matter of
 528:_options/writeColor.c **** //    e.g. the last segment drawn is setting new values that might only
 529:_options/writeColor.c **** //    be *completely transmitted* after a full PWM cycle...
 530:_options/writeColor.c **** //    So maybe somehow that last transaction is being interrupted
 531:_options/writeColor.c **** //     by the TCCR1A settings, or new values...
 532:_options/writeColor.c **** //    Plausible.
 533:_options/writeColor.c **** //
 534:_options/writeColor.c **** // FURTHER. Lest it be revisited. It was noted elsewhere that I thought
 535:_options/writeColor.c **** // this display was NOT DE-Only. In fact, the datasheet specifically says
 536:_options/writeColor.c **** // "DE-Only Mode"
 537:_options/writeColor.c **** 
 538:_options/writeColor.c **** 
 539:_options/writeColor.c **** 
 540:_options/writeColor.c **** 
 541:_options/writeColor.c **** /*#define ROW_COMPLETION_DELAY \
 542:_options/writeColor.c ****       (DOTS_TO_CYC(DE_ACTIVE_DOTS) -60  \
 543:_options/writeColor.c ****        - WRITE_COLOR_CYCS * COLORS_WRITTEN)
 544:_options/writeColor.c **** */
 545:_options/writeColor.c **** //I think -60 was an arbitrary value just chosen to compensate for
 546:_options/writeColor.c **** //calculations/instructions...
 547:_options/writeColor.c **** // -90 has been found to be right at the edge of the screen, now...
 548:_options/writeColor.c **** // ish. maybe it's not accurate since delay_loop_2 is four instructions per
 549:_options/writeColor.c **** // loop...?
 550:_options/writeColor.c **** #define ROW_COMPLETION_DELAY \
 551:_options/writeColor.c ****       (DOTS_TO_CYC(DE_ACTIVE_DOTS) - 90  \
 552:_options/writeColor.c ****        - (WRITE_COLOR_CYCS + WRITE_COLOR_DELAY) * COLORS_WRITTEN)
 553:_options/writeColor.c **** //#define ROW_COMPLETION_DELAY 512 //1 //65535//512
 554:_options/writeColor.c **** 
 555:_options/writeColor.c **** 
 556:_options/writeColor.c **** 
 557:_options/writeColor.c **** 
 558:_options/writeColor.c **** //#error "should add SEG_STRETCH here..."
 559:_options/writeColor.c **** #if (ROW_COMPLETION_DELAY > 0)
 560:_options/writeColor.c **** //      delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS) -60 // - 68)// - 60
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 81


 561:_options/writeColor.c **** //            - WRITE_COLOR_CYCS*COLORS_WRITTEN);
 562:_options/writeColor.c **** 
 563:_options/writeColor.c **** 
 564:_options/writeColor.c **** 		delay_cyc(ROW_COMPLETION_DELAY);
 565:_options/writeColor.c **** 
 566:_options/writeColor.c **** 		
 567:_options/writeColor.c **** //      asm("nop;");
 568:_options/writeColor.c **** //      asm("nop;");
 569:_options/writeColor.c **** //      asm("nop;");
 570:_options/writeColor.c **** //      asm("nop;");
 571:_options/writeColor.c **** //      asm("nop;");
 572:_options/writeColor.c **** //      asm("nop;");
 573:_options/writeColor.c **** //      asm("nop;");
 574:_options/writeColor.c **** //      asm("nop;");
 575:_options/writeColor.c ****       
 576:_options/writeColor.c **** #else
 577:_options/writeColor.c **** #warning "ROW_COMPLETION_DELAY <= 0"
 578:_options/writeColor.c **** #define ROW_COMPLETION_DELAY 0
 579:_options/writeColor.c **** #endif
 580:_options/writeColor.c **** 
 581:_options/writeColor.c **** 		//a/o v62: (Original notes removed)
 582:_options/writeColor.c **** 		//OCR1D controls RED... >=6 is full-red
 583:_options/writeColor.c **** 		// Setting this here indicates where the drawing has completed
 584:_options/writeColor.c **** 		// This is handy for determining timing, stretching, etc...
 585:_options/writeColor.c **** 		//OCR1D = 6; //0;
 586:_options/writeColor.c **** 		fullRed();
 2265               		.stabn	68,0,586,.LM297-.LFBB5
 2266               	.LM297:
 2267 071a 8D9A      		sbi 0x11,5
 2268 071c 45E0      		ldi r20,lo8(5)
 2269 071e 50E0      		ldi r21,0
 2270 0720 5093 6100 		sts 96+1,r21
 2271 0724 4093 6000 		sts 96,r20
 2272 0728 8D98      		cbi 0x11,5
 587:_options/writeColor.c **** 
 588:_options/writeColor.c ****       //DE->Nada transition expects fullBlue...
 589:_options/writeColor.c ****       //Also helps to show the edge of the DE timing...
 590:_options/writeColor.c **** 
 591:_options/writeColor.c ****       //!!! Not sure what the state is at this point...
 592:_options/writeColor.c ****       // could be any DE+Blue level, or could be NADA...
 593:_options/writeColor.c ****       // Nada: DT1=3, still leaves one bit for clocking, might be OK
 594:_options/writeColor.c ****          
 595:_options/writeColor.c ****       //Among the things that don't make sense...
 596:_options/writeColor.c ****       // This appears to go into affect BEFORE delay_cyc (?)
 597:_options/writeColor.c ****       // as, without a pull-up resistor on the /OC1B output, 
 598:_options/writeColor.c ****       // green seems to be floating between the last pixel and the
 599:_options/writeColor.c ****       // delay_cyc (!)
 600:_options/writeColor.c ****       //Disable complementary-output for Green 
 601:_options/writeColor.c ****       //  (on /OC1B, where CLK is OC1B)
 602:_options/writeColor.c ****       // Since Nada, V, and H DT's might be bad for clocking.
 603:_options/writeColor.c **** //		TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
 604:_options/writeColor.c **** //         | (1<<COM1B1) | (0<<COM1B0)
 605:_options/writeColor.c **** //         | (1<<PWM1A) | (1<<PWM1B) );
 606:_options/writeColor.c **** 
 607:_options/writeColor.c **** 		lvds_disableGreen_MakeClockInsensitiveToDT();
 608:_options/writeColor.c **** 
 609:_options/writeColor.c ****       //fullBlue();
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 82


 610:_options/writeColor.c ****       //Nada_fromDEonly();
 611:_options/writeColor.c **** 		Nada_init();
 2273               		.stabn	68,0,611,.LM298-.LFBB5
 2274               	.LM298:
 2275 072a AD9A      		sbi 0x15,5
 2276 072c 3093 6500 		sts 100+1,r19
 2277 0730 2093 6400 		sts 100,r18
 2278 0734 9FBD      		out 0x2e+1,r25
 2279 0736 8EBD      		out 0x2e,r24
 2280 0738 AD98      		cbi 0x15,5
 2281 073a 0895      		ret
 2282               		.size	nonRSB_drawPix, .-nonRSB_drawPix
 2283               		.stabs	"color:r(0,49)=*(4,2)",64,0,321,30
 2284               		.stabn	192,0,0,.LFBB5-.LFBB5
 2285               		.stabs	"blueVal:r(4,2)",64,0,138,20
 2286               		.stabn	192,0,0,.LBB125-.LFBB5
 2287               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2288               		.stabn	192,0,0,.LBB126-.LFBB5
 2289               		.stabn	224,0,0,.LBE126-.LFBB5
 2290               		.stabn	224,0,0,.LBE125-.LFBB5
 2291               		.stabs	"blueVal:r(4,2)",64,0,138,20
 2292               		.stabn	192,0,0,.LBB130-.LFBB5
 2293               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2294               		.stabn	192,0,0,.LBB131-.LFBB5
 2295               		.stabn	224,0,0,.LBE131-.LFBB5
 2296               		.stabn	224,0,0,.LBE130-.LFBB5
 2297               		.stabs	"blueVal:r(4,2)",64,0,138,20
 2298               		.stabn	192,0,0,.LBB135-.LFBB5
 2299               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2300               		.stabn	192,0,0,.LBB136-.LFBB5
 2301               		.stabn	224,0,0,.LBE136-.LFBB5
 2302               		.stabn	224,0,0,.LBE135-.LFBB5
 2303               		.stabs	"blueVal:r(4,2)",64,0,138,20
 2304               		.stabn	192,0,0,.LBB140-.LFBB5
 2305               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2306               		.stabn	192,0,0,.LBB141-.LFBB5
 2307               		.stabn	224,0,0,.LBE141-.LFBB5
 2308               		.stabn	224,0,0,.LBE140-.LFBB5
 2309               		.stabs	"blueVal:r(4,2)",64,0,138,20
 2310               		.stabn	192,0,0,.LBB145-.LFBB5
 2311               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2312               		.stabn	192,0,0,.LBB146-.LFBB5
 2313               		.stabn	224,0,0,.LBE146-.LFBB5
 2314               		.stabn	224,0,0,.LBE145-.LFBB5
 2315               		.stabs	"blueVal:r(4,2)",64,0,138,20
 2316               		.stabn	192,0,0,.LBB150-.LFBB5
 2317               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2318               		.stabn	192,0,0,.LBB151-.LFBB5
 2319               		.stabn	224,0,0,.LBE151-.LFBB5
 2320               		.stabn	224,0,0,.LBE150-.LFBB5
 2321               		.stabs	"blueVal:r(4,2)",64,0,138,20
 2322               		.stabn	192,0,0,.LBB155-.LFBB5
 2323               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2324               		.stabn	192,0,0,.LBB156-.LFBB5
 2325               		.stabn	224,0,0,.LBE156-.LFBB5
 2326               		.stabn	224,0,0,.LBE155-.LFBB5
 2327               		.stabs	"blueVal:r(4,2)",64,0,138,20
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 83


 2328               		.stabn	192,0,0,.LBB160-.LFBB5
 2329               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2330               		.stabn	192,0,0,.LBB161-.LFBB5
 2331               		.stabn	224,0,0,.LBE161-.LFBB5
 2332               		.stabn	224,0,0,.LBE160-.LFBB5
 2333               		.stabs	"blueVal:r(4,2)",64,0,138,20
 2334               		.stabn	192,0,0,.LBB165-.LFBB5
 2335               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2336               		.stabn	192,0,0,.LBB166-.LFBB5
 2337               		.stabn	224,0,0,.LBE166-.LFBB5
 2338               		.stabn	224,0,0,.LBE165-.LFBB5
 2339               		.stabs	"blueVal:r(4,2)",64,0,138,20
 2340               		.stabn	192,0,0,.LBB170-.LFBB5
 2341               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2342               		.stabn	192,0,0,.LBB171-.LFBB5
 2343               		.stabn	224,0,0,.LBE171-.LFBB5
 2344               		.stabn	224,0,0,.LBE170-.LFBB5
 2345               		.stabs	"blueVal:r(4,2)",64,0,138,20
 2346               		.stabn	192,0,0,.LBB175-.LFBB5
 2347               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2348               		.stabn	192,0,0,.LBB176-.LFBB5
 2349               		.stabn	224,0,0,.LBE176-.LFBB5
 2350               		.stabn	224,0,0,.LBE175-.LFBB5
 2351               		.stabs	"blueVal:r(4,2)",64,0,138,20
 2352               		.stabn	192,0,0,.LBB180-.LFBB5
 2353               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2354               		.stabn	192,0,0,.LBB181-.LFBB5
 2355               		.stabn	224,0,0,.LBE181-.LFBB5
 2356               		.stabn	224,0,0,.LBE180-.LFBB5
 2357               		.stabs	"blueVal:r(4,2)",64,0,138,20
 2358               		.stabn	192,0,0,.LBB185-.LFBB5
 2359               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2360               		.stabn	192,0,0,.LBB186-.LFBB5
 2361               		.stabn	224,0,0,.LBE186-.LFBB5
 2362               		.stabn	224,0,0,.LBE185-.LFBB5
 2363               		.stabs	"blueVal:r(4,2)",64,0,138,20
 2364               		.stabn	192,0,0,.LBB190-.LFBB5
 2365               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2366               		.stabn	192,0,0,.LBB191-.LFBB5
 2367               		.stabn	224,0,0,.LBE191-.LFBB5
 2368               		.stabn	224,0,0,.LBE190-.LFBB5
 2369               		.stabs	"blueVal:r(4,2)",64,0,138,20
 2370               		.stabn	192,0,0,.LBB195-.LFBB5
 2371               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2372               		.stabn	192,0,0,.LBB196-.LFBB5
 2373               		.stabn	224,0,0,.LBE196-.LFBB5
 2374               		.stabn	224,0,0,.LBE195-.LFBB5
 2375               		.stabs	"blueVal:r(4,2)",64,0,138,20
 2376               		.stabn	192,0,0,.LBB200-.LFBB5
 2377               		.stabs	"ocrVal:r(4,2)",64,0,142,20
 2378               		.stabn	192,0,0,.LBB201-.LFBB5
 2379               		.stabn	224,0,0,.LBE201-.LFBB5
 2380               		.stabn	224,0,0,.LBE200-.LFBB5
 2381               		.stabn	224,0,0,.Lscope5-.LFBB5
 2382               	.Lscope5:
 2383               		.stabs	"",36,0,0,.Lscope5-.LFBB5
 2384               		.stabd	78,0,0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 84


 2385               		.stabs	"setSpriteSkyColorOverride:F(0,47)",36,0,64,setSpriteSkyColorOverride
 2386               		.stabs	"sprite:P(0,50)=*(16,4)",64,0,64,24
 2387               	.global	setSpriteSkyColorOverride
 2388               		.type	setSpriteSkyColorOverride, @function
 2389               	setSpriteSkyColorOverride:
 2390               		.stabd	46,0,0
 2391               		.stabs	"icons/iconPacking.h",132,0,0,.Ltext39
 2392               	.Ltext39:
   1:icons/iconPacking.h **** /* mehPL:
   2:icons/iconPacking.h ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:icons/iconPacking.h ****  *    I'm not too fond of long licenses at the top of the file.
   4:icons/iconPacking.h ****  *    Please see the bottom.
   5:icons/iconPacking.h ****  *    Enjoy!
   6:icons/iconPacking.h ****  */
   7:icons/iconPacking.h **** 
   8:icons/iconPacking.h **** // This file contains tools for packing an icon/sprite into the least
   9:icons/iconPacking.h **** // memory possible, while allowing the image-data itself to be somewhat
  10:icons/iconPacking.h **** // viewable in the sprites' header files.
  11:icons/iconPacking.h **** // Each sprite contains four color-indices (two bits per pixel)
  12:icons/iconPacking.h **** // These four color-indices are converted into actual displayable colors
  13:icons/iconPacking.h **** // via the sprite's color palette(s).
  14:icons/iconPacking.h **** // a/o v66: * The sprite's mask is completely unused, as I recall.
  15:icons/iconPacking.h **** //          * The color-indices were arbitrary until recently
  16:icons/iconPacking.h **** //            Now some attempt has been made to use certain indices for
  17:icons/iconPacking.h **** //            certain purposes (e.g. index=0 -> Sky)
  18:icons/iconPacking.h **** 
  19:icons/iconPacking.h **** #ifndef __ICONPACKING_H__
  20:icons/iconPacking.h **** #define __ICONPACKING_H__
  21:icons/iconPacking.h **** 
  22:icons/iconPacking.h **** #include "gPixelVal.h"
  23:icons/iconPacking.h **** 
  24:icons/iconPacking.h **** #define ICON_WIDTH	16
  25:icons/iconPacking.h **** #define ICON_HEIGHT	16
  26:icons/iconPacking.h **** #define ICON_PIXELS	((ICON_WIDTH)*(ICON_HEIGHT))
  27:icons/iconPacking.h **** 
  28:icons/iconPacking.h **** #define ICON_PACKED_BYTES	((ICON_PIXELS)/4)
  29:icons/iconPacking.h **** #define ICON_MASK_BYTES		((ICON_PIXELS)/8)
  30:icons/iconPacking.h **** 
  31:icons/iconPacking.h **** #define PACKED_BYTES_PER_ROW	(ICON_WIDTH/4)
  32:icons/iconPacking.h **** 
  33:icons/iconPacking.h **** #define PIXELS_PER_PACKAGE	4
  34:icons/iconPacking.h **** 
  35:icons/iconPacking.h **** #define PACKED_BITS_PER_PIXEL	(8/PIXELS_PER_PACKAGE)
  36:icons/iconPacking.h **** 
  37:icons/iconPacking.h **** typedef struct _BLAH_SHROOM_
  38:icons/iconPacking.h **** {
  39:icons/iconPacking.h **** 	const uint8_t * p_image;
  40:icons/iconPacking.h **** 	const uint8_t * p_mask;
  41:icons/iconPacking.h **** 	const uint8_t * p_palette;
  42:icons/iconPacking.h **** 	const uint8_t numPalettes;
  43:icons/iconPacking.h **** }	sprite_t;
  44:icons/iconPacking.h **** 
  45:icons/iconPacking.h **** /*
  46:icons/iconPacking.h **** #define getGimpColorVal(sprite, row, col) \
  47:icons/iconPacking.h **** 		(((pgm_read_byte((uint8_t *)(&((sprite).p_image[ \
  48:icons/iconPacking.h **** 					(row)*PACKED_BYTES_PER_ROW + (col)/PIXELS_PER_PACKAGE])))\
  49:icons/iconPacking.h **** 		  )>>((col)%PIXELS_PER_PACKAGE)*(PACKED_BITS_PER_PIXEL))&0x03)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 85


  50:icons/iconPacking.h **** */
  51:icons/iconPacking.h **** 
  52:icons/iconPacking.h **** /*
  53:icons/iconPacking.h **** #define getGimpColorVal(sprite, palette, row, col) \
  54:icons/iconPacking.h **** 	pgm_read_byte((uint8_t *)(&((sprite).p_palette[ (palette)*4 + \
  55:icons/iconPacking.h **** 		(((pgm_read_byte((uint8_t *)(&((sprite).p_image[ \
  56:icons/iconPacking.h **** 					(row)*PACKED_BYTES_PER_ROW + (col)/PIXELS_PER_PACKAGE])))\
  57:icons/iconPacking.h **** 		  )>>((col)%PIXELS_PER_PACKAGE)*(PACKED_BITS_PER_PIXEL))&0x03) ])))
  58:icons/iconPacking.h **** */
  59:icons/iconPacking.h **** 
  60:icons/iconPacking.h **** 
  61:icons/iconPacking.h **** sprite_t *skyOverrideSprite = NULL;
  62:icons/iconPacking.h **** //uint8_t skyOverridePalette;
  63:icons/iconPacking.h **** 
  64:icons/iconPacking.h **** void setSpriteSkyColorOverride(sprite_t *sprite) //, uint8_t palette)
  65:icons/iconPacking.h **** {
 2393               		.stabn	68,0,65,.LM299-.LFBB6
 2394               	.LM299:
 2395               	.LFBB6:
 2396               	/* prologue: function */
 2397               	/* frame size = 0 */
 2398               	/* stack size = 0 */
 2399               	.L__stack_usage = 0
  66:icons/iconPacking.h **** 	skyOverrideSprite = sprite;
 2400               		.stabn	68,0,66,.LM300-.LFBB6
 2401               	.LM300:
 2402 073c 9093 0000 		sts skyOverrideSprite+1,r25
 2403 0740 8093 0000 		sts skyOverrideSprite,r24
 2404 0744 0895      		ret
 2405               		.size	setSpriteSkyColorOverride, .-setSpriteSkyColorOverride
 2406               	.Lscope6:
 2407               		.stabs	"",36,0,0,.Lscope6-.LFBB6
 2408               		.stabd	78,0,0
 2409               		.stabs	"getRawPixelVal:F(4,2)",36,0,71,getRawPixelVal
 2410               		.stabs	"sprite:P(0,50)",64,0,71,24
 2411               		.stabs	"row:P(4,2)",64,0,71,22
 2412               		.stabs	"col:P(4,2)",64,0,71,20
 2413               	.global	getRawPixelVal
 2414               		.type	getRawPixelVal, @function
 2415               	getRawPixelVal:
 2416               		.stabd	46,0,0
  67:icons/iconPacking.h **** //	skyOverridePalette = palette;
  68:icons/iconPacking.h **** }
  69:icons/iconPacking.h **** 
  70:icons/iconPacking.h **** 
  71:icons/iconPacking.h **** uint8_t getRawPixelVal(sprite_t *sprite, uint8_t row, uint8_t col)
  72:icons/iconPacking.h **** {
 2417               		.stabn	68,0,72,.LM301-.LFBB7
 2418               	.LM301:
 2419               	.LFBB7:
 2420               	/* prologue: function */
 2421               	/* frame size = 0 */
 2422               	/* stack size = 0 */
 2423               	.L__stack_usage = 0
 2424               	.LBB207:
  73:icons/iconPacking.h **** 
  74:icons/iconPacking.h **** 	return
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 86


  75:icons/iconPacking.h **** 		(((pgm_read_byte((uint8_t *)(&(sprite->p_image[ \
 2425               		.stabn	68,0,75,.LM302-.LFBB7
 2426               	.LM302:
 2427 0746 242F      		mov r18,r20
 2428 0748 2695      		lsr r18
 2429 074a 2695      		lsr r18
 2430 074c 30E0      		ldi r19,0
 2431 074e 54E0      		ldi r21,lo8(4)
 2432 0750 659F      		mul r22,r21
 2433 0752 200D      		add r18,r0
 2434 0754 311D      		adc r19,r1
 2435 0756 1124      		clr __zero_reg__
 2436 0758 DC01      		movw r26,r24
 2437 075a ED91      		ld r30,X+
 2438 075c FC91      		ld r31,X
 2439 075e E20F      		add r30,r18
 2440 0760 F31F      		adc r31,r19
 2441               	/* #APP */
 2442               	 ;  75 "icons/iconPacking.h" 1
 2443 0762 8491      		lpm r24, Z
 2444               		
 2445               	 ;  0 "" 2
 2446               	/* #NOAPP */
 2447               	.LBE207:
  76:icons/iconPacking.h **** 					(row)*PACKED_BYTES_PER_ROW + (col)/PIXELS_PER_PACKAGE])))\
  77:icons/iconPacking.h **** 		  )>>((col)%PIXELS_PER_PACKAGE)*(PACKED_BITS_PER_PIXEL))&0x03);
 2448               		.stabn	68,0,77,.LM303-.LFBB7
 2449               	.LM303:
 2450 0764 4370      		andi r20,lo8(3)
 2451 0766 90E0      		ldi r25,0
 2452 0768 440F      		lsl r20
 2453 076a 00C0      		rjmp 2f
 2454               		1:
 2455 076c 9595      		asr r25
 2456 076e 8795      		ror r24
 2457               		2:
 2458 0770 4A95      		dec r20
 2459 0772 02F4      		brpl 1b
  78:icons/iconPacking.h **** }
 2460               		.stabn	68,0,78,.LM304-.LFBB7
 2461               	.LM304:
 2462 0774 8370      		andi r24,lo8(3)
 2463 0776 0895      		ret
 2464               		.size	getRawPixelVal, .-getRawPixelVal
 2465               	.Lscope7:
 2466               		.stabs	"",36,0,0,.Lscope7-.LFBB7
 2467               		.stabd	78,0,0
 2468               		.stabs	"rawPixValToGimpColorVal:F(4,2)",36,0,81,rawPixValToGimpColorVal
 2469               		.stabs	"rawPixelVal:P(4,2)",64,0,81,24
 2470               		.stabs	"sprite:P(0,50)",64,0,81,22
 2471               		.stabs	"palette:P(4,2)",64,0,82,20
 2472               	.global	rawPixValToGimpColorVal
 2473               		.type	rawPixValToGimpColorVal, @function
 2474               	rawPixValToGimpColorVal:
 2475               		.stabd	46,0,0
  79:icons/iconPacking.h **** 
  80:icons/iconPacking.h **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 87


  81:icons/iconPacking.h **** uint8_t rawPixValToGimpColorVal(uint8_t rawPixelVal, sprite_t *sprite, 
  82:icons/iconPacking.h **** 																			uint8_t palette)
  83:icons/iconPacking.h **** {
 2476               		.stabn	68,0,83,.LM305-.LFBB8
 2477               	.LM305:
 2478               	.LFBB8:
 2479               	/* prologue: function */
 2480               	/* frame size = 0 */
 2481               	/* stack size = 0 */
 2482               	.L__stack_usage = 0
 2483               	.LBB208:
  84:icons/iconPacking.h **** 	return 
  85:icons/iconPacking.h **** 	pgm_read_byte(
 2484               		.stabn	68,0,85,.LM306-.LFBB8
 2485               	.LM306:
 2486 0778 90E0      		ldi r25,0
 2487 077a 24E0      		ldi r18,lo8(4)
 2488 077c 429F      		mul r20,r18
 2489 077e 800D      		add r24,r0
 2490 0780 911D      		adc r25,r1
 2491 0782 1124      		clr __zero_reg__
 2492 0784 DB01      		movw r26,r22
 2493 0786 1496      		adiw r26,4
 2494 0788 ED91      		ld r30,X+
 2495 078a FC91      		ld r31,X
 2496 078c 1597      		sbiw r26,4+1
 2497 078e E80F      		add r30,r24
 2498 0790 F91F      		adc r31,r25
 2499               	/* #APP */
 2500               	 ;  85 "icons/iconPacking.h" 1
 2501 0792 8491      		lpm r24, Z
 2502               		
 2503               	 ;  0 "" 2
 2504               	/* #NOAPP */
 2505               	.LBE208:
  86:icons/iconPacking.h **** 			(uint8_t *)(&(sprite->p_palette[ (palette)*4 + rawPixelVal ])));
  87:icons/iconPacking.h **** }
 2506               		.stabn	68,0,87,.LM307-.LFBB8
 2507               	.LM307:
 2508 0794 0895      		ret
 2509               		.size	rawPixValToGimpColorVal, .-rawPixValToGimpColorVal
 2510               	.Lscope8:
 2511               		.stabs	"",36,0,0,.Lscope8-.LFBB8
 2512               		.stabd	78,0,0
 2513               		.stabs	"getGimpColorVal:F(4,2)",36,0,92,getGimpColorVal
 2514               		.stabs	"palette:P(4,2)",64,0,92,16
 2515               		.stabs	"row:P(4,2)",64,0,92,22
 2516               		.stabs	"col:P(4,2)",64,0,93,18
 2517               	.global	getGimpColorVal
 2518               		.type	getGimpColorVal, @function
 2519               	getGimpColorVal:
 2520               		.stabd	46,0,0
  88:icons/iconPacking.h **** 
  89:icons/iconPacking.h **** 
  90:icons/iconPacking.h **** //This doesn't exactly work as expected... see drawSpriteRow for a better
  91:icons/iconPacking.h **** //implementation
  92:icons/iconPacking.h **** uint8_t getGimpColorVal(sprite_t *sprite, uint8_t palette, uint8_t row, 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 88


  93:icons/iconPacking.h **** 																			 	uint8_t col)
  94:icons/iconPacking.h **** {
 2521               		.stabn	68,0,94,.LM308-.LFBB9
 2522               	.LM308:
 2523               	.LFBB9:
 2524 0796 0F93      		push r16
 2525 0798 1F93      		push r17
 2526 079a CF93      		push r28
 2527 079c DF93      		push r29
 2528 079e 1F92      		push __zero_reg__
 2529 07a0 CDB7      		in r28,__SP_L__
 2530 07a2 DEB7      		in r29,__SP_H__
 2531               	/* prologue: function */
 2532               	/* frame size = 1 */
 2533               	/* stack size = 5 */
 2534               	.L__stack_usage = 5
 2535 07a4 182F      		mov r17,r24
 2536 07a6 792F      		mov r23,r25
 2537 07a8 062F      		mov r16,r22
 2538 07aa 642F      		mov r22,r20
  95:icons/iconPacking.h **** 	//No shit, this entire function was a single "line" of code, at one
  96:icons/iconPacking.h **** 	//point... (broken up a/o v63)
  97:icons/iconPacking.h **** 
  98:icons/iconPacking.h **** 	//This is the value as-seen in the icon's .h file... (0-3)
  99:icons/iconPacking.h **** 	uint8_t rawPixelVal = getRawPixelVal(sprite, row, col);
 2539               		.stabn	68,0,99,.LM309-.LFBB9
 2540               	.LM309:
 2541 07ac 422F      		mov r20,r18
 2542 07ae 7983      		std Y+1,r23
 2543 07b0 0E94 0000 		call getRawPixelVal
 100:icons/iconPacking.h **** //		(((pgm_read_byte((uint8_t *)(&(sprite->p_image[ 
 101:icons/iconPacking.h **** //					(row)*PACKED_BYTES_PER_ROW + (col)/PIXELS_PER_PACKAGE])))
 102:icons/iconPacking.h **** //		  )>>((col)%PIXELS_PER_PACKAGE)*(PACKED_BITS_PER_PIXEL))&0x03);
 103:icons/iconPacking.h **** 
 104:icons/iconPacking.h **** 
 105:icons/iconPacking.h **** 	//The sky is always 0, as of recently (v63)
 106:icons/iconPacking.h **** 	// That's not to say the same color isn't used for other purposes
 107:icons/iconPacking.h **** 	// this isn't that smart...
 108:icons/iconPacking.h **** 	if((rawPixelVal == 0) && (skyOverrideSprite != NULL))
 2544               		.stabn	68,0,108,.LM310-.LFBB9
 2545               	.LM310:
 2546 07b4 7981      		ldd r23,Y+1
 2547 07b6 8111      		cpse r24,__zero_reg__
 2548 07b8 00C0      		rjmp .L81
 2549               		.stabn	68,0,108,.LM311-.LFBB9
 2550               	.LM311:
 2551 07ba 2091 0000 		lds r18,skyOverrideSprite
 2552 07be 3091 0000 		lds r19,skyOverrideSprite+1
 2553 07c2 2115      		cp r18,__zero_reg__
 2554 07c4 3105      		cpc r19,__zero_reg__
 2555 07c6 01F0      		breq .L81
 2556 07c8 122F      		mov r17,r18
 2557 07ca 732F      		mov r23,r19
 2558               	.L81:
 109:icons/iconPacking.h **** 	{
 110:icons/iconPacking.h **** 		sprite = skyOverrideSprite;
 111:icons/iconPacking.h **** 		//palette = skyOverridePalette;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 89


 112:icons/iconPacking.h **** 	}
 113:icons/iconPacking.h **** 
 114:icons/iconPacking.h **** 	return rawPixValToGimpColorVal(rawPixelVal, sprite, palette); 
 2559               		.stabn	68,0,114,.LM312-.LFBB9
 2560               	.LM312:
 2561 07cc 402F      		mov r20,r16
 2562 07ce 612F      		mov r22,r17
 2563               	/* epilogue start */
 115:icons/iconPacking.h **** //	pgm_read_byte(
 116:icons/iconPacking.h **** //			(uint8_t *)(&(sprite->p_palette[ (palette)*4 + rawPixelVal ])));
 117:icons/iconPacking.h **** }
 2564               		.stabn	68,0,117,.LM313-.LFBB9
 2565               	.LM313:
 2566 07d0 0F90      		pop __tmp_reg__
 2567 07d2 DF91      		pop r29
 2568 07d4 CF91      		pop r28
 2569 07d6 1F91      		pop r17
 2570 07d8 0F91      		pop r16
 114:icons/iconPacking.h **** //	pgm_read_byte(
 2571               		.stabn	68,0,114,.LM314-.LFBB9
 2572               	.LM314:
 2573 07da 0C94 0000 		jmp rawPixValToGimpColorVal
 2574               		.size	getGimpColorVal, .-getGimpColorVal
 2575               		.stabs	"rawPixelVal:r(4,2)",64,0,99,24
 2576               		.stabn	192,0,0,.LFBB9-.LFBB9
 2577               		.stabn	224,0,0,.Lscope9-.LFBB9
 2578               	.Lscope9:
 2579               		.stabs	"",36,0,0,.Lscope9-.LFBB9
 2580               		.stabd	78,0,0
 2581               		.stabs	"getRawPixelValCOIN:F(4,2)",36,0,124,getRawPixelValCOIN
 2582               		.stabs	"spritePhase:P(4,2)",64,0,124,24
 2583               		.stabs	"row:P(4,2)",64,0,124,22
 2584               		.stabs	"col:P(4,2)",64,0,124,20
 2585               	.global	getRawPixelValCOIN
 2586               		.type	getRawPixelValCOIN, @function
 2587               	getRawPixelValCOIN:
 2588               		.stabd	46,0,0
 2589               		.stabs	"icons/Coin.h",132,0,0,.Ltext40
 2590               	.Ltext40:
   1:icons/Coin.h  **** /* mehPL:
   2:icons/Coin.h  ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:icons/Coin.h  ****  *    I'm not too fond of long licenses at the top of the file.
   4:icons/Coin.h  ****  *    Please see the bottom.
   5:icons/Coin.h  ****  *    Enjoy!
   6:icons/Coin.h  ****  */
   7:icons/Coin.h  **** 
   8:icons/Coin.h  **** 
   9:icons/Coin.h  **** #include "iconPacking.h"
  10:icons/Coin.h  **** 
  11:icons/Coin.h  **** 
  12:icons/Coin.h  **** // This image-data was generated from screenshots from Nintendo's 
  13:icons/Coin.h  **** // Super Mario Brothers
  14:icons/Coin.h  **** // Converted for use here using The Gimp -> Save as Header File
  15:icons/Coin.h  **** // And hand-manipulated into this form for viewability/usability here
  16:icons/Coin.h  **** 
  17:icons/Coin.h  **** #define COINR0 ROWPACK(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
  18:icons/Coin.h  **** #define COINR1 ROWPACK(0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 90


  19:icons/Coin.h  **** #define COINR2 ROWPACK(0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0)
  20:icons/Coin.h  **** #define COINR3 ROWPACK(0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0)
  21:icons/Coin.h  **** #define COINR4 ROWPACK(0,0,0,0,0,2,2,3,1,2,2,0,0,0,0,0)
  22:icons/Coin.h  **** #define COINR5 ROWPACK(0,0,0,0,2,2,3,2,2,1,2,2,0,0,0,0)
  23:icons/Coin.h  **** #define COINR6 ROWPACK(0,0,0,0,2,2,3,2,2,1,2,2,0,0,0,0)
  24:icons/Coin.h  **** #define COINR7 ROWPACK(0,0,0,0,2,2,3,2,2,1,2,2,0,0,0,0)
  25:icons/Coin.h  **** #define COINR8 ROWPACK(0,0,0,0,2,2,3,2,2,1,2,2,0,0,0,0)
  26:icons/Coin.h  **** #define COINR9 ROWPACK(0,0,0,0,2,2,3,2,2,1,2,2,0,0,0,0)
  27:icons/Coin.h  **** #define COINRA ROWPACK(0,0,0,0,2,2,3,2,2,1,2,2,0,0,0,0)
  28:icons/Coin.h  **** #define COINRB ROWPACK(0,0,0,0,0,2,2,3,1,2,2,0,0,0,0,0)
  29:icons/Coin.h  **** #define COINRC ROWPACK(0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0)
  30:icons/Coin.h  **** #define COINRD ROWPACK(0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0)
  31:icons/Coin.h  **** #define COINRE ROWPACK(0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0)
  32:icons/Coin.h  **** #define COINRF ROWPACK(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
  33:icons/Coin.h  **** 
  34:icons/Coin.h  **** 
  35:icons/Coin.h  **** #define COIN1R0 ROWPACK(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
  36:icons/Coin.h  **** #define COIN1R1 ROWPACK(0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0)
  37:icons/Coin.h  **** #define COIN1R2 ROWPACK(0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0)
  38:icons/Coin.h  **** #define COIN1R3 ROWPACK(0,0,0,0,0,0,2,1,1,1,0,0,0,0,0,0)
  39:icons/Coin.h  **** #define COIN1R4 ROWPACK(0,0,0,0,0,0,2,1,1,1,0,0,0,0,0,0)
  40:icons/Coin.h  **** #define COIN1R5 ROWPACK(0,0,0,0,0,0,2,1,1,1,0,0,0,0,0,0)
  41:icons/Coin.h  **** #define COIN1R6 ROWPACK(0,0,0,0,0,0,2,1,1,1,0,0,0,0,0,0)
  42:icons/Coin.h  **** #define COIN1R7 ROWPACK(0,0,0,0,0,0,3,1,1,1,0,0,0,0,0,0)
  43:icons/Coin.h  **** #define COIN1R8 ROWPACK(0,0,0,0,0,0,3,1,1,1,0,0,0,0,0,0)
  44:icons/Coin.h  **** #define COIN1R9 ROWPACK(0,0,0,0,0,0,2,1,1,1,0,0,0,0,0,0)
  45:icons/Coin.h  **** #define COIN1RA ROWPACK(0,0,0,0,0,0,2,1,1,1,0,0,0,0,0,0)
  46:icons/Coin.h  **** #define COIN1RB ROWPACK(0,0,0,0,0,0,2,1,1,1,0,0,0,0,0,0)
  47:icons/Coin.h  **** #define COIN1RC ROWPACK(0,0,0,0,0,0,2,1,1,1,0,0,0,0,0,0)
  48:icons/Coin.h  **** #define COIN1RD ROWPACK(0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0)
  49:icons/Coin.h  **** #define COIN1RE ROWPACK(0,0,0,0,0,0,0,2,1,0,0,0,0,0,0,0)
  50:icons/Coin.h  **** #define COIN1RF ROWPACK(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
  51:icons/Coin.h  **** 
  52:icons/Coin.h  **** 
  53:icons/Coin.h  **** #define COIN2R0 ROWPACK(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
  54:icons/Coin.h  **** #define COIN2R1 ROWPACK(0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0)
  55:icons/Coin.h  **** #define COIN2R2 ROWPACK(0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0)
  56:icons/Coin.h  **** #define COIN2R3 ROWPACK(0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0)
  57:icons/Coin.h  **** #define COIN2R4 ROWPACK(0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0)
  58:icons/Coin.h  **** #define COIN2R5 ROWPACK(0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0)
  59:icons/Coin.h  **** #define COIN2R6 ROWPACK(0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0)
  60:icons/Coin.h  **** #define COIN2R7 ROWPACK(0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0)
  61:icons/Coin.h  **** #define COIN2R8 ROWPACK(0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0)
  62:icons/Coin.h  **** #define COIN2R9 ROWPACK(0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0)
  63:icons/Coin.h  **** #define COIN2RA ROWPACK(0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0)
  64:icons/Coin.h  **** #define COIN2RB ROWPACK(0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0)
  65:icons/Coin.h  **** #define COIN2RC ROWPACK(0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0)
  66:icons/Coin.h  **** #define COIN2RD ROWPACK(0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0)
  67:icons/Coin.h  **** #define COIN2RE ROWPACK(0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0)
  68:icons/Coin.h  **** #define COIN2RF ROWPACK(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
  69:icons/Coin.h  **** 
  70:icons/Coin.h  **** 
  71:icons/Coin.h  **** //It looks to me like this is a direct flip of COIN1...
  72:icons/Coin.h  **** // (But the colors are different)
  73:icons/Coin.h  **** #define COIN3R0 ROWPACK(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
  74:icons/Coin.h  **** #define COIN3R1 ROWPACK(0,0,0,0,0,0,0,3,1,0,0,0,0,0,0,0)
  75:icons/Coin.h  **** #define COIN3R2 ROWPACK(0,0,0,0,0,0,0,3,1,0,0,0,0,0,0,0)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 91


  76:icons/Coin.h  **** #define COIN3R3 ROWPACK(0,0,0,0,0,0,3,3,3,1,0,0,0,0,0,0)
  77:icons/Coin.h  **** #define COIN3R4 ROWPACK(0,0,0,0,0,0,3,3,3,1,0,0,0,0,0,0)
  78:icons/Coin.h  **** #define COIN3R5 ROWPACK(0,0,0,0,0,0,3,3,3,1,0,0,0,0,0,0)
  79:icons/Coin.h  **** #define COIN3R6 ROWPACK(0,0,0,0,0,0,3,3,3,1,0,0,0,0,0,0)
  80:icons/Coin.h  **** #define COIN3R7 ROWPACK(0,0,0,0,0,0,3,3,3,1,0,0,0,0,0,0)
  81:icons/Coin.h  **** #define COIN3R8 ROWPACK(0,0,0,0,0,0,3,3,3,1,0,0,0,0,0,0)
  82:icons/Coin.h  **** #define COIN3R9 ROWPACK(0,0,0,0,0,0,3,3,3,1,0,0,0,0,0,0)
  83:icons/Coin.h  **** #define COIN3RA ROWPACK(0,0,0,0,0,0,3,3,3,1,0,0,0,0,0,0)
  84:icons/Coin.h  **** #define COIN3RB ROWPACK(0,0,0,0,0,0,3,3,3,1,0,0,0,0,0,0)
  85:icons/Coin.h  **** #define COIN3RC ROWPACK(0,0,0,0,0,0,3,3,3,1,0,0,0,0,0,0)
  86:icons/Coin.h  **** #define COIN3RD ROWPACK(0,0,0,0,0,0,0,3,1,0,0,0,0,0,0,0)
  87:icons/Coin.h  **** #define COIN3RE ROWPACK(0,0,0,0,0,0,0,3,1,0,0,0,0,0,0,0)
  88:icons/Coin.h  **** #define COIN3RF ROWPACK(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
  89:icons/Coin.h  **** 
  90:icons/Coin.h  **** //37 (sky), 7, 47, 2
  91:icons/Coin.h  **** 
  92:icons/Coin.h  **** const static uint8_t pgm_imageCOIN[ICON_PACKED_BYTES] PROGMEM =
  93:icons/Coin.h  ****    IMAGE_INIT(COIN);
  94:icons/Coin.h  ****    
  95:icons/Coin.h  **** const static uint8_t pgm_imageCOIN1[ICON_PACKED_BYTES] PROGMEM =
  96:icons/Coin.h  **** 	IMAGE_INIT(COIN1);
  97:icons/Coin.h  **** 
  98:icons/Coin.h  **** const static uint8_t pgm_imageCOIN2[ICON_PACKED_BYTES] PROGMEM =
  99:icons/Coin.h  **** 	IMAGE_INIT(COIN2);
 100:icons/Coin.h  **** 
 101:icons/Coin.h  **** const static uint8_t pgm_imageCOIN3[ICON_PACKED_BYTES] PROGMEM =
 102:icons/Coin.h  **** 	IMAGE_INIT(COIN3);
 103:icons/Coin.h  **** 
 104:icons/Coin.h  **** #define pgm_maskCOIN	NULL
 105:icons/Coin.h  **** //static uint8_t * pgm_maskCOIN; //[ICON_MASK_BYTES]; // PROGMEM =
 106:icons/Coin.h  **** //  MASK_INIT(GETNAMED(QUESTION));
 107:icons/Coin.h  **** 
 108:icons/Coin.h  **** 
 109:icons/Coin.h  **** #define NUMPALETTES_COIN 1
 110:icons/Coin.h  **** 
 111:icons/Coin.h  **** //gimpPixelValToLColor should probably be taken into account.
 112:icons/Coin.h  **** const static uint8_t pgm_paletteCOIN[4*NUMPALETTES_COIN] PROGMEM =
 113:icons/Coin.h  ****  //  { 37, 7, 47, 2};
 114:icons/Coin.h  **** 	{ 37, 2, 7, 47 };	//see Coin1.h for notes...
 115:icons/Coin.h  **** // 0 -> 0
 116:icons/Coin.h  **** // 1 -> 2
 117:icons/Coin.h  **** // 2 -> 3
 118:icons/Coin.h  **** // 3 -> 1
 119:icons/Coin.h  **** 
 120:icons/Coin.h  **** static sprite_t spriteCOIN =
 121:icons/Coin.h  ****       {pgm_imageCOIN, pgm_maskCOIN, pgm_paletteCOIN, NUMPALETTES_COIN};
 122:icons/Coin.h  **** 
 123:icons/Coin.h  **** 
 124:icons/Coin.h  **** uint8_t getRawPixelValCOIN(uint8_t spritePhase, uint8_t row, uint8_t col)
 125:icons/Coin.h  **** {
 2591               		.stabn	68,0,125,.LM315-.LFBB10
 2592               	.LM315:
 2593               	.LFBB10:
 2594               	/* prologue: function */
 2595               	/* frame size = 0 */
 2596               	/* stack size = 0 */
 2597               	.L__stack_usage = 0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 92


 126:icons/Coin.h  **** 	const uint8_t * p_image;
 127:icons/Coin.h  **** 
 128:icons/Coin.h  **** 	//Is this better accomplished as a switch-statement or with math...?
 129:icons/Coin.h  **** 	switch(spritePhase%8)
 2598               		.stabn	68,0,129,.LM316-.LFBB10
 2599               	.LM316:
 2600 07de 8770      		andi r24,lo8(7)
 2601 07e0 8630      		cpi r24,lo8(6)
 2602 07e2 00F4      		brsh .L85
 2603 07e4 E82F      		mov r30,r24
 2604 07e6 F0E0      		ldi r31,0
 2605 07e8 EE0F      		lsl r30
 2606 07ea FF1F      		rol r31
 2607 07ec E050      		subi r30,lo8(-(CSWTCH.68))
 2608 07ee F040      		sbci r31,hi8(-(CSWTCH.68))
 2609 07f0 8081      		ld r24,Z
 2610 07f2 9181      		ldd r25,Z+1
 2611 07f4 00C0      		rjmp .L84
 2612               	.L85:
 2613 07f6 80E0      		ldi r24,lo8(pgm_imageCOIN3)
 2614 07f8 90E0      		ldi r25,hi8(pgm_imageCOIN3)
 2615               	.L84:
 2616               	.LBB209:
 130:icons/Coin.h  **** 	{
 131:icons/Coin.h  **** 		case 0:
 132:icons/Coin.h  **** 		case 1:
 133:icons/Coin.h  **** //		case 2:
 134:icons/Coin.h  **** 			p_image = pgm_imageCOIN;
 135:icons/Coin.h  **** 			break;
 136:icons/Coin.h  **** 		case 2:
 137:icons/Coin.h  **** 		case 3:
 138:icons/Coin.h  **** 			p_image = pgm_imageCOIN1;
 139:icons/Coin.h  **** 			break;
 140:icons/Coin.h  **** 		case 4:
 141:icons/Coin.h  **** 		case 5:
 142:icons/Coin.h  **** 			p_image = pgm_imageCOIN2;
 143:icons/Coin.h  **** 			break;
 144:icons/Coin.h  **** 		case 6:
 145:icons/Coin.h  **** 		case 7:
 146:icons/Coin.h  **** 		default:
 147:icons/Coin.h  **** 			p_image = pgm_imageCOIN3;
 148:icons/Coin.h  **** 			break;
 149:icons/Coin.h  **** 	}	
 150:icons/Coin.h  **** 
 151:icons/Coin.h  ****    return
 152:icons/Coin.h  ****       (((pgm_read_byte((uint8_t *)(&(p_image[ \
 2617               		.stabn	68,0,152,.LM317-.LFBB10
 2618               	.LM317:
 2619 07fa E42F      		mov r30,r20
 2620 07fc E695      		lsr r30
 2621 07fe E695      		lsr r30
 2622 0800 F0E0      		ldi r31,0
 2623 0802 24E0      		ldi r18,lo8(4)
 2624 0804 629F      		mul r22,r18
 2625 0806 E00D      		add r30,r0
 2626 0808 F11D      		adc r31,r1
 2627 080a 1124      		clr __zero_reg__
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 93


 2628 080c E80F      		add r30,r24
 2629 080e F91F      		adc r31,r25
 2630               	/* #APP */
 2631               	 ;  152 "icons/Coin.h" 1
 2632 0810 E491      		lpm r30, Z
 2633               		
 2634               	 ;  0 "" 2
 2635               	/* #NOAPP */
 2636               	.LBE209:
 153:icons/Coin.h  ****                (row)*PACKED_BYTES_PER_ROW + (col)/PIXELS_PER_PACKAGE])))\
 154:icons/Coin.h  ****         )>>((col)%PIXELS_PER_PACKAGE)*(PACKED_BITS_PER_PIXEL))&0x03);
 2637               		.stabn	68,0,154,.LM318-.LFBB10
 2638               	.LM318:
 2639 0812 4370      		andi r20,lo8(3)
 2640 0814 8E2F      		mov r24,r30
 2641 0816 90E0      		ldi r25,0
 2642 0818 440F      		lsl r20
 2643 081a 00C0      		rjmp 2f
 2644               		1:
 2645 081c 9595      		asr r25
 2646 081e 8795      		ror r24
 2647               		2:
 2648 0820 4A95      		dec r20
 2649 0822 02F4      		brpl 1b
 155:icons/Coin.h  **** }  
 2650               		.stabn	68,0,155,.LM319-.LFBB10
 2651               	.LM319:
 2652 0824 8370      		andi r24,lo8(3)
 2653 0826 0895      		ret
 2654               		.size	getRawPixelValCOIN, .-getRawPixelValCOIN
 2655               		.stabs	"p_image:r(16,2)",64,0,126,24
 2656               		.stabn	192,0,0,.LFBB10-.LFBB10
 2657               		.stabn	224,0,0,.Lscope10-.LFBB10
 2658               	.Lscope10:
 2659               		.stabs	"",36,0,0,.Lscope10-.LFBB10
 2660               		.stabd	78,0,0
 2661               		.stabs	"fbQuestion_hitDetected:F(0,47)",36,0,105,fbQuestion_hitDetected
 2662               	.global	fbQuestion_hitDetected
 2663               		.type	fbQuestion_hitDetected, @function
 2664               	fbQuestion_hitDetected:
 2665               		.stabd	46,0,0
 2666               		.stabs	"fb_question.c",132,0,0,.Ltext41
 2667               	.Ltext41:
   1:fb_question.c **** /* mehPL:
   2:fb_question.c ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:fb_question.c ****  *    I'm not too fond of long licenses at the top of the file.
   4:fb_question.c ****  *    Please see the bottom.
   5:fb_question.c ****  *    Enjoy!
   6:fb_question.c ****  */
   7:fb_question.c **** 
   8:fb_question.c **** 
   9:fb_question.c **** //fb_question is the good-ol' "Mario" Question-box, using a frameBuffer...
  10:fb_question.c **** //  It was created after seg_question, which was created after a
  11:fb_question.c **** //  frameBuffer-based method. Long convoluted story.
  12:fb_question.c **** 
  13:fb_question.c **** // Essentially, fb_question is the latest (a/o v66) version of the
  14:fb_question.c **** // Mario-Question-Box, which has actually been installed at a somewhat
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 94


  15:fb_question.c **** // permanent location for public-interaction. (and Seg_question has since
  16:fb_question.c **** // been put on the back-burner).
  17:fb_question.c **** 
  18:fb_question.c **** // When the question-box is "hit" it displays a random sprite:
  19:fb_question.c **** //  A Coin, 1-up, Biggie, Star, Flower, or possibly a Goomba
  20:fb_question.c **** //  If you *hit* the goomba, it dies.
  21:fb_question.c **** 
  22:fb_question.c **** // As-implemented (in main), the ADC is used as the hit-detector. Connected
  23:fb_question.c **** // to it is a piezo-element. Unfortunately, I'm certain, the
  24:fb_question.c **** // threshold-values, etc. for this "hit-sensor" will have to be configured
  25:fb_question.c **** // for your particular hardware... And, in fact, I've found that it's
  26:fb_question.c **** // sensitive to electrical noise (e.g. from the backlight inverter) as well
  27:fb_question.c **** // as things like temperature. It's kinda hokey, but it's also in main()
  28:fb_question.c **** // and could easily be converted to a simple momentary-switch.
  29:fb_question.c **** 
  30:fb_question.c **** 
  31:fb_question.c **** 
  32:fb_question.c **** 
  33:fb_question.c **** 
  34:fb_question.c **** 
  35:fb_question.c **** 
  36:fb_question.c **** 	//Start at brown, to match the SOLID color
  37:fb_question.c **** #define Q_QSTART	7 //3
  38:fb_question.c **** #define GOOMBA_QCOUNT	(24*2)
  39:fb_question.c **** //#define GOOMBA_QCOUNTSPERPHASE	3
  40:fb_question.c **** //#define GOOMBA_KILLABLE_QCOUNT	(GOOMBA_QCOUNT-2)
  41:fb_question.c **** 
  42:fb_question.c **** //a/o v62-21:
  43:fb_question.c **** // this is stolen from seg_question.c and modified for the framebuffer...
  44:fb_question.c **** 
  45:fb_question.c **** 
  46:fb_question.c **** //Actually, this probably won't work right...
  47:fb_question.c **** // because the rgb values aren't exact like that, right?
  48:fb_question.c **** // e.g. black = 0,0,0 but it shows as 0,0,60 ish...
  49:fb_question.c **** // then again, going in reverse like this might work fine...
  50:fb_question.c **** // due to rounding (seems OK with this color-scheme)
  51:fb_question.c **** // The idea wasn't so much to be able to input an 8-bit RGB value to get
  52:fb_question.c **** // a close match (would probably want rounding up for that, not that it'd
  53:fb_question.c **** // be even close)
  54:fb_question.c **** // but to be able to read color-values from GIMP when using the 
  55:fb_question.c **** //  LCDdirectLVDS color-palette... which isn't especially necessary since
  56:fb_question.c **** //  now the colors are named with 3-based colors.
  57:fb_question.c **** #define rgb8(r,g,b) \
  58:fb_question.c ****       rgb((((r)*3)/255), (((g)*3)/255), (((b)*3)/255))
  59:fb_question.c **** 
  60:fb_question.c **** 
  61:fb_question.c **** //These are not included in NUM_ICONS
  62:fb_question.c ****    #include "icons/Question.h"
  63:fb_question.c ****    #include "icons/Solid.h"
  64:fb_question.c ****    #include "icons/GoombaDead.h"
  65:fb_question.c **** 
  66:fb_question.c ****    //These are included in NUM_ICONS
  67:fb_question.c ****    #include "icons/1up.h"
  68:fb_question.c ****    #include "icons/Biggie.h"
  69:fb_question.c ****    #include "icons/StarV.h"
  70:fb_question.c ****    #include "icons/FlowerPowerV.h"
  71:fb_question.c ****    #include "icons/Goomba.h"
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 95


  72:fb_question.c ****    #include "icons/Coin.h"
  73:fb_question.c **** 
  74:fb_question.c ****    //Excluding Solid and Question, etc...
  75:fb_question.c **** //   #define NUM_ICONS 6
  76:fb_question.c **** 
  77:fb_question.c **** 
  78:fb_question.c **** //Allow the user to choose another winnings when the question-box is
  79:fb_question.c **** //scrolling down to reveal it... for testing
  80:fb_question.c **** //#define IMMEDIATE TRUE
  81:fb_question.c **** 
  82:fb_question.c **** //#define RANDOM_OVERRIDE 4 //8 //0 //4
  83:fb_question.c **** 
  84:fb_question.c **** //Stalls at the first sprite (initilized in p_selectedSprite, below)
  85:fb_question.c **** //#define STAY_ON_IT	TRUE
  86:fb_question.c **** 
  87:fb_question.c **** //Automatically hit after a few loops in the "Q" box
  88:fb_question.c **** #define AUTO_HIT	TRUE
  89:fb_question.c **** 
  90:fb_question.c **** //THESE DON'T BELONG HERE
  91:fb_question.c **** // AND they shouldn't be "Q" specific, at all.
  92:fb_question.c **** #define Q_WIDTH   16
  93:fb_question.c **** #define Q_HEIGHT   16
  94:fb_question.c **** #if((Q_WIDTH != FB_WIDTH) || (Q_HEIGHT != FB_HEIGHT))
  95:fb_question.c **** #error "FB dims do not match Icon dims"
  96:fb_question.c **** #endif
  97:fb_question.c **** 
  98:fb_question.c **** //this is just a counter to help throw in some additional randomness...
  99:fb_question.c **** uint8_t callCount = 0;
 100:fb_question.c **** 
 101:fb_question.c **** uint8_t qCount = 0;
 102:fb_question.c **** sprite_t *p_selectedSprite = &spriteCOIN; //GOOMBA; //FLOWER; //&spriteQ;
 103:fb_question.c **** sprite_t *p_nextSprite = NULL;
 104:fb_question.c **** 
 105:fb_question.c **** void fbQuestion_hitDetected(void)
 106:fb_question.c **** {
 2668               		.stabn	68,0,106,.LM320-.LFBB11
 2669               	.LM320:
 2670               	.LFBB11:
 2671               	/* prologue: function */
 2672               	/* frame size = 0 */
 2673               	/* stack size = 0 */
 2674               	.L__stack_usage = 0
 107:fb_question.c **** 	if( (p_selectedSprite == &spriteQ)
 2675               		.stabn	68,0,107,.LM321-.LFBB11
 2676               	.LM321:
 2677 0828 8091 0000 		lds r24,p_selectedSprite
 2678 082c 9091 0000 		lds r25,p_selectedSprite+1
 2679 0830 20E0      		ldi r18,hi8(spriteQ)
 2680 0832 8030      		cpi r24,lo8(spriteQ)
 2681 0834 9207      		cpc r25,r18
 2682 0836 01F0      		breq .+2
 2683 0838 00C0      		rjmp .L87
 108:fb_question.c **** #if (!defined(IMMEDIATE) || !IMMEDIATE)
 109:fb_question.c **** 	    && (p_nextSprite == NULL)
 2684               		.stabn	68,0,109,.LM322-.LFBB11
 2685               	.LM322:
 2686 083a 8091 0000 		lds r24,p_nextSprite
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 96


 2687 083e 9091 0000 		lds r25,p_nextSprite+1
 2688 0842 892B      		or r24,r25
 2689 0844 01F0      		breq .+2
 2690 0846 00C0      		rjmp .L86
 2691               	.LBB212:
 2692               	.LBB213:
 110:fb_question.c **** #endif
 111:fb_question.c **** 	  )
 112:fb_question.c **** 	{
 113:fb_question.c **** 		qCount = 0;
 2693               		.stabn	68,0,113,.LM323-.LFBB11
 2694               	.LM323:
 2695 0848 1092 0000 		sts qCount,__zero_reg__
 114:fb_question.c **** #ifndef RANDOM_OVERRIDE
 115:fb_question.c **** 		//Just trying to get some randomness up in hea
 116:fb_question.c **** 		switch(((adc_getValue()*3+callCount+qCount))%8)
 2696               		.stabn	68,0,116,.LM324-.LFBB11
 2697               	.LM324:
 2698 084c 0E94 0000 		call adc_getValue
 2699 0850 4091 0000 		lds r20,qCount
 2700 0854 2091 0000 		lds r18,callCount
 2701 0858 30E0      		ldi r19,0
 2702 085a 240F      		add r18,r20
 2703 085c 311D      		adc r19,__zero_reg__
 2704 085e AC01      		movw r20,r24
 2705 0860 440F      		lsl r20
 2706 0862 551F      		rol r21
 2707 0864 480F      		add r20,r24
 2708 0866 591F      		adc r21,r25
 2709 0868 240F      		add r18,r20
 2710 086a 351F      		adc r19,r21
 2711 086c 2770      		andi r18,7
 2712 086e 3327      		clr r19
 2713 0870 2230      		cpi r18,2
 2714 0872 3105      		cpc r19,__zero_reg__
 2715 0874 01F0      		breq .L90
 2716 0876 00F4      		brsh .L91
 2717 0878 2115      		cp r18,__zero_reg__
 2718 087a 3105      		cpc r19,__zero_reg__
 2719 087c 01F0      		breq .L92
 2720 087e 2130      		cpi r18,1
 2721 0880 3105      		cpc r19,__zero_reg__
 2722 0882 01F4      		brne .L89
 117:fb_question.c **** #else
 118:fb_question.c **** 		switch(RANDOM_OVERRIDE)
 119:fb_question.c **** #endif
 120:fb_question.c **** 		{
 121:fb_question.c **** 			case 0:
 122:fb_question.c **** 				p_nextSprite = &spriteFLOWER;
 123:fb_question.c **** 				break;
 124:fb_question.c **** 			case 1:
 125:fb_question.c **** 				p_nextSprite = &sprite1UP;
 2723               		.stabn	68,0,125,.LM325-.LFBB11
 2724               	.LM325:
 2725 0884 80E0      		ldi r24,lo8(sprite1UP)
 2726 0886 90E0      		ldi r25,hi8(sprite1UP)
 2727 0888 00C0      		rjmp .L96
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 97


 2728               	.L91:
 116:fb_question.c **** #else
 2729               		.stabn	68,0,116,.LM326-.LFBB11
 2730               	.LM326:
 2731 088a 2330      		cpi r18,3
 2732 088c 3105      		cpc r19,__zero_reg__
 2733 088e 01F0      		breq .L94
 2734 0890 2430      		cpi r18,4
 2735 0892 3105      		cpc r19,__zero_reg__
 2736 0894 01F4      		brne .L89
 126:fb_question.c **** 				break;
 127:fb_question.c **** 			case 2:
 128:fb_question.c **** 				p_nextSprite = &spriteBIG;
 129:fb_question.c **** 				break;
 130:fb_question.c **** 			case 3:
 131:fb_question.c **** 				p_nextSprite = &spriteSTAR;
 132:fb_question.c **** 				break;
 133:fb_question.c **** 			case 4:
 134:fb_question.c **** 				p_nextSprite = &spriteGOOMBA;
 2737               		.stabn	68,0,134,.LM327-.LFBB11
 2738               	.LM327:
 2739 0896 80E0      		ldi r24,lo8(spriteGOOMBA)
 2740 0898 90E0      		ldi r25,hi8(spriteGOOMBA)
 2741 089a 00C0      		rjmp .L96
 2742               	.L92:
 122:fb_question.c **** 				break;
 2743               		.stabn	68,0,122,.LM328-.LFBB11
 2744               	.LM328:
 2745 089c 80E0      		ldi r24,lo8(spriteFLOWER)
 2746 089e 90E0      		ldi r25,hi8(spriteFLOWER)
 2747 08a0 00C0      		rjmp .L96
 2748               	.L90:
 128:fb_question.c **** 				break;
 2749               		.stabn	68,0,128,.LM329-.LFBB11
 2750               	.LM329:
 2751 08a2 80E0      		ldi r24,lo8(spriteBIG)
 2752 08a4 90E0      		ldi r25,hi8(spriteBIG)
 2753               	.L96:
 125:fb_question.c **** 				break;
 2754               		.stabn	68,0,125,.LM330-.LFBB11
 2755               	.LM330:
 2756 08a6 9093 0000 		sts p_nextSprite+1,r25
 2757 08aa 8093 0000 		sts p_nextSprite,r24
 2758 08ae 0895      		ret
 2759               	.L94:
 131:fb_question.c **** 				break;
 2760               		.stabn	68,0,131,.LM331-.LFBB11
 2761               	.LM331:
 2762 08b0 80E0      		ldi r24,lo8(spriteSTAR)
 2763 08b2 90E0      		ldi r25,hi8(spriteSTAR)
 2764 08b4 00C0      		rjmp .L96
 2765               	.L89:
 135:fb_question.c **** 				break;
 136:fb_question.c **** 			//The remaining are just for testing...
 137:fb_question.c **** /*			case 5:
 138:fb_question.c **** 				p_selectedSprite = &spriteDEADGOOMBA;
 139:fb_question.c **** 				break;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 98


 140:fb_question.c **** 			case 6:
 141:fb_question.c **** 				p_selectedSprite = &spriteQ;
 142:fb_question.c **** 				break;
 143:fb_question.c **** 			case 7:
 144:fb_question.c **** 				p_selectedSprite = &spriteSOLID;
 145:fb_question.c **** 				break;
 146:fb_question.c **** */			default:
 147:fb_question.c **** 				p_nextSprite = &spriteCOIN;
 2766               		.stabn	68,0,147,.LM332-.LFBB11
 2767               	.LM332:
 2768 08b6 80E0      		ldi r24,lo8(spriteCOIN)
 2769 08b8 90E0      		ldi r25,hi8(spriteCOIN)
 2770 08ba 00C0      		rjmp .L96
 2771               	.L87:
 2772               	.LBE213:
 2773               	.LBE212:
 148:fb_question.c **** 				break;
 149:fb_question.c **** 		}
 150:fb_question.c **** 	}
 151:fb_question.c **** /* This was nice with the old scroll-up method, but with the new method,
 152:fb_question.c ****  * it's too hokey... (can smash it before it's visible)
 153:fb_question.c **** 	else if( (p_nextSprite == &spriteGOOMBA)
 154:fb_question.c **** 		      && (qCount > 4) )
 155:fb_question.c **** 	{
 156:fb_question.c **** 		p_nextSprite = &spriteDEADGOOMBA;
 157:fb_question.c **** 	}
 158:fb_question.c **** */
 159:fb_question.c **** 	//As-is, the last frame (in blue, indicating death) is only visible
 160:fb_question.c **** 	//briefly before scroll-back-to-question starts...
 161:fb_question.c **** 	// so there's no reason to test for KILLABLE
 162:fb_question.c **** 	// since it can't be killed when it's scrolling.
 163:fb_question.c **** 	// There's probably a tiny fraction of a second window where it is
 164:fb_question.c **** 	// possible to hit it when it's blue, and kill it... but it's TINY.
 165:fb_question.c **** 	else if( (p_selectedSprite == &spriteGOOMBA)
 2774               		.stabn	68,0,165,.LM333-.LFBB11
 2775               	.LM333:
 2776 08bc 8050      		subi r24,lo8(spriteGOOMBA)
 2777 08be 9040      		sbci r25,hi8(spriteGOOMBA)
 2778 08c0 01F4      		brne .L86
 166:fb_question.c **** 				&& (p_nextSprite == NULL) )
 2779               		.stabn	68,0,166,.LM334-.LFBB11
 2780               	.LM334:
 2781 08c2 8091 0000 		lds r24,p_nextSprite
 2782 08c6 9091 0000 		lds r25,p_nextSprite+1
 2783 08ca 892B      		or r24,r25
 2784 08cc 01F4      		brne .L86
 167:fb_question.c **** //			   && ((qCount > 0) && (qCount < 16)) )
 168:fb_question.c **** //			   && (qCount < GOOMBA_KILLABLE_QCOUNT) )
 169:fb_question.c **** 	{
 170:fb_question.c **** 		qCount = 0;
 2785               		.stabn	68,0,170,.LM335-.LFBB11
 2786               	.LM335:
 2787 08ce 1092 0000 		sts qCount,__zero_reg__
 171:fb_question.c **** 		p_selectedSprite = &spriteDEADGOOMBA;
 2788               		.stabn	68,0,171,.LM336-.LFBB11
 2789               	.LM336:
 2790 08d2 80E0      		ldi r24,lo8(spriteDEADGOOMBA)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 99


 2791 08d4 90E0      		ldi r25,hi8(spriteDEADGOOMBA)
 2792 08d6 9093 0000 		sts p_selectedSprite+1,r25
 2793 08da 8093 0000 		sts p_selectedSprite,r24
 2794               	.L86:
 2795 08de 0895      		ret
 2796               		.size	fbQuestion_hitDetected, .-fbQuestion_hitDetected
 2797               	.Lscope11:
 2798               		.stabs	"",36,0,0,.Lscope11-.LFBB11
 2799               		.stabd	78,0,0
 2800               		.stabs	"getSpritePalette:F(4,2)",36,0,391,getSpritePalette
 2801               		.stabs	"p_thisSprite:P(0,50)",64,0,391,30
 2802               		.stabs	"spritePhase:P(4,2)",64,0,391,24
 2803               		.stabs	"spriteRow:P(4,2)",64,0,392,20
 2804               	.global	getSpritePalette
 2805               		.type	getSpritePalette, @function
 2806               	getSpritePalette:
 2807               		.stabd	46,0,0
 172:fb_question.c **** 	}
 173:fb_question.c **** 
 174:fb_question.c **** }
 175:fb_question.c **** 
 176:fb_question.c **** //If a spriteRow is outside the icon's dimensions, draws the sky-color
 177:fb_question.c **** void drawSpriteRow(sprite_t *p_thisSprite, uint8_t spritePhase,
 178:fb_question.c **** 													  int8_t spriteRow, 
 179:fb_question.c **** 													  uint8_t rowToDrawAt);
 180:fb_question.c **** 
 181:fb_question.c **** void fbQuestion_update(void) //uint8_t triggerDetected)
 182:fb_question.c **** {
 183:fb_question.c **** 	callCount++;
 184:fb_question.c **** 		//This should be an init-thing, I guess... it's only a 2-cycle
 185:fb_question.c ****       // instruction, so it doesn't hurt too much to have it in the loop
 186:fb_question.c ****       // BUT it does have to occur a while before the first getpinPORT
 187:fb_question.c ****       // to allow time for the pull-ups to do their job
 188:fb_question.c **** //      setinpuPORT(PB0, PORTB);
 189:fb_question.c **** 
 190:fb_question.c **** 
 191:fb_question.c **** //	if(triggerDetected)
 192:fb_question.c **** //		qCount++;
 193:fb_question.c **** 
 194:fb_question.c **** //   segClear();
 195:fb_question.c ****    //Not sure why this is stretched without /2...
 196:fb_question.c ****    // I think I ran into this elsewhere as well.
 197:fb_question.c ****    //!!! INSTEAD: filled the rest of the row properly...
 198:fb_question.c ****    // (wasn't filling up the entire row, due to rounding...
 199:fb_question.c ****    //   result was the rows were carrying-over into the next)
 200:fb_question.c ****    uint8_t qRow;// = (rowNum*Q_HEIGHT/(V_COUNT)); ///2));
 201:fb_question.c ****    //uint8_t qCol;
 202:fb_question.c ****    
 203:fb_question.c ****    //Guess white helps with sync...?
 204:fb_question.c ****    // can't hurt.
 205:fb_question.c ****    //addSegfb(3, _W);
 206:fb_question.c ****    // Looks like some white is already being inserted (or syncing on end-
 207:fb_question.c ****    // white?) about 3pixels wide.
 208:fb_question.c **** 
 209:fb_question.c ****    // 1024/3/32 = 10.67... so for every 3 segments, add 2
 210:fb_question.c **** //#define Q_STRETCHTOP   1//0//28//2
 211:fb_question.c **** //#define Q_STRETCHDIV 5//30//3
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 100


 212:fb_question.c **** //   hfm_t colincrementer_hfm;
 213:fb_question.c **** //   hfm_setup(&colincrementer_hfm, Q_STRETCHTOP, Q_STRETCHDIV);
 214:fb_question.c **** 
 215:fb_question.c **** 	if(p_nextSprite == NULL)
 216:fb_question.c **** 	{
 217:fb_question.c **** #if(!defined(STAY_ON_IT) || !STAY_ON_IT)
 218:fb_question.c **** 	if(p_selectedSprite == &spriteDEADGOOMBA)
 219:fb_question.c **** 	{
 220:fb_question.c **** 		if(qCount >= 16)
 221:fb_question.c **** 		{
 222:fb_question.c **** 			qCount = Q_QSTART; //0;
 223:fb_question.c **** 			p_nextSprite = &spriteQ;
 224:fb_question.c **** 		}
 225:fb_question.c **** 	}
 226:fb_question.c **** 	else if(p_selectedSprite == &spriteGOOMBA)
 227:fb_question.c **** 	{
 228:fb_question.c **** 		if(qCount >= GOOMBA_QCOUNT)
 229:fb_question.c **** 		{
 230:fb_question.c **** 			qCount = 0;
 231:fb_question.c **** 			p_nextSprite = &spriteSOLID;
 232:fb_question.c **** 		}
 233:fb_question.c **** 	}
 234:fb_question.c **** 	else if(p_selectedSprite == &spriteCOIN)
 235:fb_question.c **** 	{
 236:fb_question.c **** 		if(qCount >= 8)
 237:fb_question.c **** 		{
 238:fb_question.c **** 			qCount = 0;
 239:fb_question.c **** 			p_nextSprite = &spriteSOLID;
 240:fb_question.c **** 		}
 241:fb_question.c **** 	}
 242:fb_question.c **** 	else if(p_selectedSprite == &spriteSOLID)
 243:fb_question.c **** 	{
 244:fb_question.c **** 		if(qCount >= 8)
 245:fb_question.c **** 		{
 246:fb_question.c **** 			qCount = Q_QSTART; //0;
 247:fb_question.c **** 			p_selectedSprite = &spriteQ;
 248:fb_question.c **** 		}
 249:fb_question.c **** 	}
 250:fb_question.c **** 	else if(p_selectedSprite != &spriteQ)
 251:fb_question.c **** 	{
 252:fb_question.c **** 		if(qCount >= 16)
 253:fb_question.c **** 		{
 254:fb_question.c **** 			qCount = 0;
 255:fb_question.c **** 			//if(p_selectedSprite != &spriteSOLID)
 256:fb_question.c **** 				p_nextSprite = &spriteSOLID;
 257:fb_question.c **** 			//else
 258:fb_question.c **** 			//   p_selectedSprite = &spriteQ;
 259:fb_question.c **** 		}
 260:fb_question.c **** 	}
 261:fb_question.c **** 	//else is handled in the trigger-handler...
 262:fb_question.c **** #if(defined(AUTO_HIT) && AUTO_HIT)
 263:fb_question.c **** 	else //spriteQ
 264:fb_question.c **** 	{
 265:fb_question.c **** 		if(qCount >= (12*5))
 266:fb_question.c **** 			fbQuestion_hitDetected();
 267:fb_question.c **** 	}
 268:fb_question.c **** #endif
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 101


 269:fb_question.c **** #endif //STAY_ON_IT
 270:fb_question.c **** 	}
 271:fb_question.c **** 	//There're two scrolling-cases
 272:fb_question.c **** 	// selected == Q && next == other
 273:fb_question.c **** 	// selected == other && (next == Q || next == SOLID)
 274:fb_question.c **** 	//
 275:fb_question.c **** 	//The first case shows the next sprite's top above the Q-box
 276:fb_question.c **** 	// the "window" is on the next sprite, but the Q box overlaps it
 277:fb_question.c **** 	// and the Q-box scrolls downward
 278:fb_question.c **** 	//      _________
 279:fb_question.c **** 	//  ^  |   ___   | \  <--Next
 280:fb_question.c ****    //  |  |  /   \  |  | next sprite appears to scroll up
 281:fb_question.c **** 	//  |  ||¯¯¯¯¯¯¯||  | but really the overlapping selected-sprite scrolls
 282:fb_question.c **** 	//     || *   * || /  down...
 283:fb_question.c **** 	//      |   ?   |
 284:fb_question.c **** 	//      | *   * | <--Selected
 285:fb_question.c **** 	//       ¯¯¯¯¯¯¯
 286:fb_question.c **** 	//
 287:fb_question.c **** 	//The second case shows the two sprites atop each other
 288:fb_question.c **** 	// the "window" scrolls down the two
 289:fb_question.c **** 	//      _________
 290:fb_question.c **** 	//     |   ___   | <--Selected
 291:fb_question.c **** 	//   ..|../___\..|.. 
 292:fb_question.c **** 	// | : |   |_|   | : \  The window scrolls down, but the two sprites
 293:fb_question.c **** 	// | : |_________| :  | do not change position relative to each other
 294:fb_question.c **** 	// V : |         | : /
 295:fb_question.c **** 	//   ..|.*.....*.|..
 296:fb_question.c **** 	//     |    ?    |
 297:fb_question.c **** 	//     | *     * | <--Next
 298:fb_question.c **** 	//      ¯¯¯¯¯¯¯¯¯
 299:fb_question.c **** 
 300:fb_question.c **** 
 301:fb_question.c **** 	// NEW:
 302:fb_question.c **** 	//  The first case is kinda boring... it looks like the question-box is
 303:fb_question.c **** 	//  being pulled-away to reveal the item, rather than that the item is
 304:fb_question.c **** 	//  coming out of the question-box
 305:fb_question.c **** 	//  Instead, raise the item from the bottom (in the background) and
 306:fb_question.c **** 	//  lower the box... that way both are moving at the same time.
 307:fb_question.c **** 	//
 308:fb_question.c **** 	//       _____                               ___
 309:fb_question.c **** 	//      |     |     _____         __        /___\			//
 310:fb_question.c **** 	//      |  ?  | -> |     |  ->  _/__\_  ->   |_|
 311:fb_question.c **** 	//      |_____|    |  ?  |     |      |
 312:fb_question.c **** 
 313:fb_question.c **** 	if(p_nextSprite != NULL)
 314:fb_question.c **** 	{
 315:fb_question.c **** 
 316:fb_question.c **** 		setSpriteSkyColorOverride(p_selectedSprite);
 317:fb_question.c **** 
 318:fb_question.c **** 		if(p_selectedSprite == &spriteQ) 
 319:fb_question.c **** 		{
 320:fb_question.c **** 			uint8_t spriteRow;
 321:fb_question.c **** 
 322:fb_question.c **** 			//Draw the top of the next sprite...
 323:fb_question.c **** 			for(qRow=0; qRow<qCount; qRow++)
 324:fb_question.c **** 			{
 325:fb_question.c **** 				spriteRow = qRow - (16 - qCount);
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 102


 326:fb_question.c **** 				drawSpriteRow(p_nextSprite, qCount, spriteRow, qRow);
 327:fb_question.c **** 			}
 328:fb_question.c **** 		
 329:fb_question.c **** 			//This is kinda hokey, but should work...
 330:fb_question.c **** 			// rather than displaying the "?" after it's been hit, it should
 331:fb_question.c **** 			// become solid... but in most cases using p_selectedSprite==SOLID
 332:fb_question.c **** 			// results in a transition straight to Q...
 333:fb_question.c **** 			// so rather than changing p_selectedSprite, let's just override
 334:fb_question.c **** 			// it here
 335:fb_question.c **** 			spriteRow = 0;
 336:fb_question.c **** 			for( ; qRow<Q_HEIGHT; qRow++)
 337:fb_question.c **** 			{
 338:fb_question.c **** 				drawSpriteRow(&spriteSOLID, qCount, spriteRow, qRow);
 339:fb_question.c **** 				spriteRow++;
 340:fb_question.c **** 			}
 341:fb_question.c **** 			
 342:fb_question.c **** 		}
 343:fb_question.c **** 		else
 344:fb_question.c **** 		{
 345:fb_question.c **** 			uint8_t displayRow;
 346:fb_question.c **** 			uint8_t spriteRow = qCount; 
 347:fb_question.c **** 
 348:fb_question.c **** 			for(displayRow = 0; displayRow < (Q_HEIGHT-qCount); displayRow++)
 349:fb_question.c **** 			{
 350:fb_question.c **** 				drawSpriteRow(p_selectedSprite, qCount, spriteRow, displayRow);
 351:fb_question.c **** 									//				displayRow+qCount, displayRow);
 352:fb_question.c **** 				spriteRow++;
 353:fb_question.c **** 			}
 354:fb_question.c **** 	
 355:fb_question.c **** 			spriteRow = 0;
 356:fb_question.c **** 			for( ; displayRow<Q_HEIGHT; displayRow++)
 357:fb_question.c **** 			{
 358:fb_question.c **** 				drawSpriteRow(p_nextSprite, qCount, spriteRow, displayRow);
 359:fb_question.c **** 					//				displayRow-(Q_HEIGHT-1-qCount), displayRow);
 360:fb_question.c **** 
 361:fb_question.c **** 				spriteRow++;
 362:fb_question.c **** 			}
 363:fb_question.c **** 		}
 364:fb_question.c **** 
 365:fb_question.c **** 		qCount++;
 366:fb_question.c **** 		if(qCount >= Q_HEIGHT)
 367:fb_question.c **** 		{
 368:fb_question.c **** 			qCount = 0;
 369:fb_question.c **** 			p_selectedSprite = p_nextSprite;
 370:fb_question.c **** 			p_nextSprite = NULL;
 371:fb_question.c **** 		}
 372:fb_question.c **** 
 373:fb_question.c **** 	} //end of nextSprite Handling...
 374:fb_question.c **** 	else //we only have a selectedSprite (nextSprite is NULL)
 375:fb_question.c **** 	{
 376:fb_question.c **** 		setSpriteSkyColorOverride(NULL);
 377:fb_question.c **** 
 378:fb_question.c **** 		for(qRow=0; qRow<Q_HEIGHT; qRow++)
 379:fb_question.c **** 			drawSpriteRow(p_selectedSprite, qCount, qRow, qRow);
 380:fb_question.c **** 
 381:fb_question.c **** 		qCount++;
 382:fb_question.c **** 		//the only case where qCount should cycle is spriteQ...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 103


 383:fb_question.c **** 		// its value is %12, so could either reset it at 12, or this.. whatev
 384:fb_question.c **** 		// To avoid a glitch every 21 cycles.
 385:fb_question.c **** 		if(qCount >= ((255 / 12) * 12))
 386:fb_question.c **** 			qCount = 0;
 387:fb_question.c **** 	}
 388:fb_question.c **** 
 389:fb_question.c **** }
 390:fb_question.c **** 
 391:fb_question.c **** uint8_t getSpritePalette(sprite_t *p_thisSprite, uint8_t spritePhase,
 392:fb_question.c **** 																	uint8_t spriteRow)
 393:fb_question.c **** {
 2808               		.stabn	68,0,393,.LM337-.LFBB12
 2809               	.LM337:
 2810               	.LFBB12:
 2811               	/* prologue: function */
 2812               	/* frame size = 0 */
 2813               	/* stack size = 0 */
 2814               	.L__stack_usage = 0
 2815 08e0 FC01      		movw r30,r24
 2816 08e2 862F      		mov r24,r22
 394:fb_question.c **** 
 395:fb_question.c **** 	uint8_t thePalette;
 396:fb_question.c **** 	
 397:fb_question.c **** 	
 398:fb_question.c **** 	if(p_thisSprite == &spriteFLOWER)
 2817               		.stabn	68,0,398,.LM338-.LFBB12
 2818               	.LM338:
 2819 08e4 90E0      		ldi r25,hi8(spriteFLOWER)
 2820 08e6 E030      		cpi r30,lo8(spriteFLOWER)
 2821 08e8 F907      		cpc r31,r25
 2822 08ea 01F4      		brne .L98
 399:fb_question.c **** 	{
 400:fb_question.c **** 		if(spriteRow<FLOWER_PALETTE1_ROW)
 2823               		.stabn	68,0,400,.LM339-.LFBB12
 2824               	.LM339:
 2825 08ec 4830      		cpi r20,lo8(8)
 2826 08ee 00F4      		brsh .L107
 2827               	.LBB216:
 2828               	.LBB217:
 401:fb_question.c **** 			//data = getGimpColorVal(&spriteFLOWER,
 402:fb_question.c **** 			  thePalette = spritePhase%(spriteFLOWER.numPalettes-1) + 1; 
 2829               		.stabn	68,0,402,.LM340-.LFBB12
 2830               	.LM340:
 2831 08f0 90E0      		ldi r25,0
 2832 08f2 6091 0000 		lds r22,spriteFLOWER+6
 2833 08f6 70E0      		ldi r23,0
 2834 08f8 6150      		subi r22,1
 2835 08fa 7109      		sbc r23,__zero_reg__
 2836 08fc 0E94 0000 		call __divmodhi4
 2837 0900 8F5F      		subi r24,lo8(-(1))
 2838 0902 0895      		ret
 2839               	.L98:
 2840               	.LBE217:
 2841               	.LBE216:
 403:fb_question.c **** 					 //spriteRow, qCol);
 404:fb_question.c **** 		else
 405:fb_question.c **** 			thePalette = 0;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 104


 406:fb_question.c **** 			//data = getGimpColorVal(&spriteFLOWER, 0, spriteRow, qCol);
 407:fb_question.c **** 	}
 408:fb_question.c **** 	else if(p_thisSprite == &spriteGOOMBA)
 2842               		.stabn	68,0,408,.LM341-.LFBB12
 2843               	.LM341:
 2844 0904 90E0      		ldi r25,hi8(spriteGOOMBA)
 2845 0906 E030      		cpi r30,lo8(spriteGOOMBA)
 2846 0908 F907      		cpc r31,r25
 2847 090a 01F4      		brne .L100
 409:fb_question.c **** 	{
 410:fb_question.c **** 		//uint8_t gCol = qCol;
 411:fb_question.c **** 		//Goomba moves by flipping horizontally...
 412:fb_question.c **** 	//	if((spritePhase < 16) && (spritePhase & 0x01))
 413:fb_question.c **** 	//		theCol = 15-qCol;
 414:fb_question.c **** 
 415:fb_question.c **** 		//uint8_t palette; // = qCount * p_thisSprite->numPalettes / 16;
 416:fb_question.c **** 		//if(palette >= p_thisSprite->numPalettes)
 417:fb_question.c **** 		//	palette = p_thisSprite->numPalettes-1;
 418:fb_question.c **** 
 419:fb_question.c **** 			
 420:fb_question.c **** 		switch(spritePhase)
 2848               		.stabn	68,0,420,.LM342-.LFBB12
 2849               	.LM342:
 2850 090c 90E0      		ldi r25,0
 2851 090e 8031      		cpi r24,16
 2852 0910 9105      		cpc r25,__zero_reg__
 2853 0912 00F4      		brsh .L101
 2854 0914 FC01      		movw r30,r24
 2855 0916 E050      		subi r30,lo8(-(gs(.L103)))
 2856 0918 F040      		sbci r31,hi8(-(gs(.L103)))
 2857 091a 0C94 0000 		jmp __tablejump2__
 2858               		.section	.progmem.gcc_sw_table,"a",@progbits
 2859               		.p2align	1
 2860               	.L103:
 2861 0000 0000      		.word gs(.L107)
 2862 0002 0000      		.word gs(.L107)
 2863 0004 0000      		.word gs(.L107)
 2864 0006 0000      		.word gs(.L107)
 2865 0008 0000      		.word gs(.L108)
 2866 000a 0000      		.word gs(.L108)
 2867 000c 0000      		.word gs(.L108)
 2868 000e 0000      		.word gs(.L104)
 2869 0010 0000      		.word gs(.L104)
 2870 0012 0000      		.word gs(.L104)
 2871 0014 0000      		.word gs(.L105)
 2872 0016 0000      		.word gs(.L105)
 2873 0018 0000      		.word gs(.L105)
 2874 001a 0000      		.word gs(.L106)
 2875 001c 0000      		.word gs(.L106)
 2876 001e 0000      		.word gs(.L106)
 2877               		.text
 2878               	.L104:
 421:fb_question.c **** 		{
 422:fb_question.c **** 				case 0:
 423:fb_question.c **** 				case 1:
 424:fb_question.c **** 				case 2:
 425:fb_question.c **** 				case 3:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 105


 426:fb_question.c **** 					thePalette = 0;
 427:fb_question.c **** 					break;
 428:fb_question.c **** 				case 4:
 429:fb_question.c **** 				case 5:
 430:fb_question.c **** 				case 6:
 431:fb_question.c **** 					thePalette = 1;
 432:fb_question.c **** 					break;
 433:fb_question.c **** 				case 7:
 434:fb_question.c **** 				case 8:
 435:fb_question.c **** 				case 9:
 436:fb_question.c **** 					thePalette = 2;
 2879               		.stabn	68,0,436,.LM343-.LFBB12
 2880               	.LM343:
 2881 091e 82E0      		ldi r24,lo8(2)
 437:fb_question.c **** 					break;
 2882               		.stabn	68,0,437,.LM344-.LFBB12
 2883               	.LM344:
 2884 0920 0895      		ret
 2885               	.L105:
 438:fb_question.c **** 				case 10:
 439:fb_question.c **** 				case 11:
 440:fb_question.c **** 				case 12:
 441:fb_question.c **** 					thePalette = 3;
 2886               		.stabn	68,0,441,.LM345-.LFBB12
 2887               	.LM345:
 2888 0922 83E0      		ldi r24,lo8(3)
 442:fb_question.c **** 					break;
 2889               		.stabn	68,0,442,.LM346-.LFBB12
 2890               	.LM346:
 2891 0924 0895      		ret
 2892               	.L106:
 443:fb_question.c **** 				case 13:
 444:fb_question.c **** 				case 14:
 445:fb_question.c **** 				case 15:
 446:fb_question.c **** 					thePalette = 4;
 2893               		.stabn	68,0,446,.LM347-.LFBB12
 2894               	.LM347:
 2895 0926 84E0      		ldi r24,lo8(4)
 447:fb_question.c **** 					break;
 2896               		.stabn	68,0,447,.LM348-.LFBB12
 2897               	.LM348:
 2898 0928 0895      		ret
 2899               	.L101:
 448:fb_question.c **** 				default:
 449:fb_question.c **** 					thePalette = p_thisSprite->numPalettes-1;
 2900               		.stabn	68,0,449,.LM349-.LFBB12
 2901               	.LM349:
 2902 092a 8091 0000 		lds r24,spriteGOOMBA+6
 2903 092e 8150      		subi r24,lo8(-(-1))
 2904 0930 0895      		ret
 2905               	.L100:
 450:fb_question.c **** 		}
 451:fb_question.c **** 
 452:fb_question.c **** 
 453:fb_question.c **** 		//data = getGimpColorVal(&spriteGOOMBA, palette, spriteRow, gCol);
 454:fb_question.c **** 	}
 455:fb_question.c **** 	else
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 106


 456:fb_question.c **** 	{
 457:fb_question.c **** 		//data = getGimpColorVal(p_thisSprite, 
 458:fb_question.c **** 		  thePalette = spritePhase%p_thisSprite->numPalettes;
 2906               		.stabn	68,0,458,.LM350-.LFBB12
 2907               	.LM350:
 2908 0932 6681      		ldd r22,Z+6
 2909 0934 0E94 0000 		call __udivmodqi4
 2910 0938 892F      		mov r24,r25
 2911 093a 0895      		ret
 2912               	.L107:
 405:fb_question.c **** 			//data = getGimpColorVal(&spriteFLOWER, 0, spriteRow, qCol);
 2913               		.stabn	68,0,405,.LM351-.LFBB12
 2914               	.LM351:
 2915 093c 80E0      		ldi r24,0
 2916 093e 0895      		ret
 2917               	.L108:
 431:fb_question.c **** 					break;
 2918               		.stabn	68,0,431,.LM352-.LFBB12
 2919               	.LM352:
 2920 0940 81E0      		ldi r24,lo8(1)
 459:fb_question.c **** 						//spriteRow, qCol);
 460:fb_question.c **** 	}
 461:fb_question.c **** 
 462:fb_question.c **** 	return thePalette;
 463:fb_question.c **** }
 2921               		.stabn	68,0,463,.LM353-.LFBB12
 2922               	.LM353:
 2923 0942 0895      		ret
 2924               		.size	getSpritePalette, .-getSpritePalette
 2925               		.stabs	"thePalette:r(4,2)",64,0,395,24
 2926               		.stabn	192,0,0,.LFBB12-.LFBB12
 2927               		.stabn	224,0,0,.Lscope12-.LFBB12
 2928               	.Lscope12:
 2929               		.stabs	"",36,0,0,.Lscope12-.LFBB12
 2930               		.stabd	78,0,0
 2931               		.stabs	"getSpritePhase:F(4,2)",36,0,469,getSpritePhase
 2932               		.stabs	"p_thisSprite:P(0,50)",64,0,469,18
 2933               		.stabs	"qCount:P(4,2)",64,0,469,24
 2934               		.stabs	"vOffset:P(4,1)",64,0,470,20
 2935               	.global	getSpritePhase
 2936               		.type	getSpritePhase, @function
 2937               	getSpritePhase:
 2938               		.stabd	46,0,0
 464:fb_question.c **** 
 465:fb_question.c **** //This does NOT handle COIN, see getRowPixelValCOIN()...
 466:fb_question.c **** // vOffset is whether the sprite is above the frame-buffer or below...
 467:fb_question.c **** // centered = 0
 468:fb_question.c **** // so, e.g. vOffset = spriteRow - rowToDrawAt
 469:fb_question.c **** uint8_t getSpritePhase(sprite_t *p_thisSprite, uint8_t qCount, int8_t
 470:fb_question.c **** 		vOffset)
 471:fb_question.c **** {
 2939               		.stabn	68,0,471,.LM354-.LFBB13
 2940               	.LM354:
 2941               	.LFBB13:
 2942               	/* prologue: function */
 2943               	/* frame size = 0 */
 2944               	/* stack size = 0 */
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 107


 2945               	.L__stack_usage = 0
 2946 0944 9C01      		movw r18,r24
 2947 0946 862F      		mov r24,r22
 472:fb_question.c **** 	uint8_t spritePhase = qCount;
 473:fb_question.c **** 
 474:fb_question.c **** 	if(p_thisSprite == &spriteQ)
 2948               		.stabn	68,0,474,.LM355-.LFBB13
 2949               	.LM355:
 2950 0948 90E0      		ldi r25,hi8(spriteQ)
 2951 094a 2030      		cpi r18,lo8(spriteQ)
 2952 094c 3907      		cpc r19,r25
 2953 094e 01F4      		brne .L110
 2954               	.LBB220:
 2955               	.LBB221:
 475:fb_question.c **** 	{
 476:fb_question.c **** 		switch(spritePhase%12)
 2956               		.stabn	68,0,476,.LM356-.LFBB13
 2957               	.LM356:
 2958 0950 6CE0      		ldi r22,lo8(12)
 2959 0952 0E94 0000 		call __udivmodqi4
 2960 0956 892F      		mov r24,r25
 2961 0958 90E0      		ldi r25,0
 2962 095a 8C30      		cpi r24,12
 2963 095c 9105      		cpc r25,__zero_reg__
 2964 095e 00F4      		brsh .L111
 2965 0960 FC01      		movw r30,r24
 2966 0962 E050      		subi r30,lo8(-(gs(.L113)))
 2967 0964 F040      		sbci r31,hi8(-(gs(.L113)))
 2968 0966 0C94 0000 		jmp __tablejump2__
 2969               		.section	.progmem.gcc_sw_table,"a",@progbits
 2970               		.p2align	1
 2971               	.L113:
 2972 0020 0000      		.word gs(.L112)
 2973 0022 0000      		.word gs(.L112)
 2974 0024 0000      		.word gs(.L112)
 2975 0026 0000      		.word gs(.L117)
 2976 0028 0000      		.word gs(.L117)
 2977 002a 0000      		.word gs(.L111)
 2978 002c 0000      		.word gs(.L111)
 2979 002e 0000      		.word gs(.L117)
 2980 0030 0000      		.word gs(.L117)
 2981 0032 0000      		.word gs(.L112)
 2982 0034 0000      		.word gs(.L112)
 2983 0036 0000      		.word gs(.L112)
 2984               		.text
 2985               	.L112:
 477:fb_question.c **** 		{
 478:fb_question.c **** 			case 0:
 479:fb_question.c **** 			case 1:
 480:fb_question.c **** 			case 2:
 481:fb_question.c **** 
 482:fb_question.c **** 			case 9:
 483:fb_question.c **** 			case 10:
 484:fb_question.c **** 			case 11:
 485:fb_question.c **** 				spritePhase = 0; //yellow background
 2986               		.stabn	68,0,485,.LM357-.LFBB13
 2987               	.LM357:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 108


 2988 096a 80E0      		ldi r24,0
 2989 096c 0895      		ret
 2990               	.L111:
 486:fb_question.c **** 				break;
 487:fb_question.c **** 			case 3:
 488:fb_question.c **** 			case 4:
 489:fb_question.c **** 
 490:fb_question.c **** 			case 7:
 491:fb_question.c **** 			case 8:
 492:fb_question.c **** 				spritePhase = 1; //red background
 493:fb_question.c **** 				break;
 494:fb_question.c **** 			case 5:
 495:fb_question.c **** 			case 6:
 496:fb_question.c **** 
 497:fb_question.c **** 			default:
 498:fb_question.c **** 				spritePhase = 2; //brown background
 2991               		.stabn	68,0,498,.LM358-.LFBB13
 2992               	.LM358:
 2993 096e 82E0      		ldi r24,lo8(2)
 2994 0970 0895      		ret
 2995               	.L117:
 492:fb_question.c **** 				break;
 2996               		.stabn	68,0,492,.LM359-.LFBB13
 2997               	.LM359:
 2998 0972 81E0      		ldi r24,lo8(1)
 2999 0974 0895      		ret
 3000               	.L110:
 3001               	.LBE221:
 3002               	.LBE220:
 499:fb_question.c **** 				break;
 500:fb_question.c **** 		}
 501:fb_question.c **** 
 502:fb_question.c **** 	}
 503:fb_question.c **** 	//else if(p_thisSprite == &spriteCOIN) //handled in getRowPixelValCOIN()
 504:fb_question.c **** 	else if(p_thisSprite == &spriteGOOMBA)
 3003               		.stabn	68,0,504,.LM360-.LFBB13
 3004               	.LM360:
 3005 0976 2050      		subi r18,lo8(spriteGOOMBA)
 3006 0978 3040      		sbci r19,hi8(spriteGOOMBA)
 3007 097a 01F4      		brne .L115
 505:fb_question.c **** 	{
 506:fb_question.c **** 		if (vOffset < 0) //(spriteRow < rowToDrawAt)
 3008               		.stabn	68,0,506,.LM361-.LFBB13
 3009               	.LM361:
 3010 097c 47FD      		sbrc r20,7
 3011 097e 00C0      		rjmp .L118
 507:fb_question.c **** 			spritePhase = 0;
 508:fb_question.c **** 		if (vOffset > 0) //(spriteRow > rowToDrawAt)
 3012               		.stabn	68,0,508,.LM362-.LFBB13
 3013               	.LM362:
 3014 0980 4111      		cpse r20,__zero_reg__
 3015 0982 00C0      		rjmp .L119
 3016 0984 00C0      		rjmp .L116
 3017               	.L118:
 507:fb_question.c **** 			spritePhase = 0;
 3018               		.stabn	68,0,507,.LM363-.LFBB13
 3019               	.LM363:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 109


 3020 0986 80E0      		ldi r24,0
 3021               	.L116:
 509:fb_question.c **** 			spritePhase = GOOMBA_QCOUNT;
 510:fb_question.c **** 		else
 511:fb_question.c **** 			spritePhase /=3;
 3022               		.stabn	68,0,511,.LM364-.LFBB13
 3023               	.LM364:
 3024 0988 9BEA      		ldi r25,lo8(-85)
 3025 098a 899F      		mul r24,r25
 3026 098c 812D      		mov r24,r1
 3027 098e 1124      		clr __zero_reg__
 3028 0990 8695      		lsr r24
 3029 0992 0895      		ret
 3030               	.L119:
 509:fb_question.c **** 			spritePhase = GOOMBA_QCOUNT;
 3031               		.stabn	68,0,509,.LM365-.LFBB13
 3032               	.LM365:
 3033 0994 80E3      		ldi r24,lo8(48)
 3034               	.L115:
 512:fb_question.c **** 
 513:fb_question.c **** 	}
 514:fb_question.c **** 
 515:fb_question.c **** 	return spritePhase;
 516:fb_question.c **** 
 517:fb_question.c **** }
 3035               		.stabn	68,0,517,.LM366-.LFBB13
 3036               	.LM366:
 3037 0996 0895      		ret
 3038               		.size	getSpritePhase, .-getSpritePhase
 3039               	.Lscope13:
 3040               		.stabs	"",36,0,0,.Lscope13-.LFBB13
 3041               		.stabd	78,0,0
 3042               		.stabs	"drawSpriteRow:F(0,47)",36,0,523,drawSpriteRow
 3043               		.stabs	"p_thisSprite:P(0,50)",64,0,523,28
 3044               		.stabs	"qCount:P(4,2)",64,0,523,7
 3045               		.stabs	"spriteRow:P(4,1)",64,0,525,11
 3046               		.stabs	"rowToDrawAt:P(4,2)",64,0,526,12
 3047               	.global	drawSpriteRow
 3048               		.type	drawSpriteRow, @function
 3049               	drawSpriteRow:
 3050               		.stabd	46,0,0
 518:fb_question.c **** 
 519:fb_question.c **** 
 520:fb_question.c **** //spritePhase replaces qCount... for determining e.g. the color palette and
 521:fb_question.c **** //the motion of the goomba...
 522:fb_question.c **** // This does *NOT* handle COIN... use getRowPixelValCOIN() instead.
 523:fb_question.c **** void drawSpriteRow(sprite_t *p_thisSprite, uint8_t qCount,
 524:fb_question.c **** 															//uint8_t spritePhase,
 525:fb_question.c **** 													  int8_t spriteRow, 
 526:fb_question.c **** 													  uint8_t rowToDrawAt)
 527:fb_question.c **** {
 3051               		.stabn	68,0,527,.LM367-.LFBB14
 3052               	.LM367:
 3053               	.LFBB14:
 3054 0998 4F92      		push r4
 3055 099a 5F92      		push r5
 3056 099c 6F92      		push r6
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 110


 3057 099e 7F92      		push r7
 3058 09a0 8F92      		push r8
 3059 09a2 9F92      		push r9
 3060 09a4 AF92      		push r10
 3061 09a6 BF92      		push r11
 3062 09a8 CF92      		push r12
 3063 09aa DF92      		push r13
 3064 09ac EF92      		push r14
 3065 09ae FF92      		push r15
 3066 09b0 0F93      		push r16
 3067 09b2 1F93      		push r17
 3068 09b4 CF93      		push r28
 3069 09b6 DF93      		push r29
 3070               	/* prologue: function */
 3071               	/* frame size = 0 */
 3072               	/* stack size = 16 */
 3073               	.L__stack_usage = 16
 3074 09b8 EC01      		movw r28,r24
 3075 09ba 762E      		mov r7,r22
 3076 09bc B42E      		mov r11,r20
 3077 09be C22E      		mov r12,r18
 528:fb_question.c **** 	uint8_t qCol;
 529:fb_question.c **** 
 530:fb_question.c **** 	uint8_t spritePhase;
 531:fb_question.c **** 
 532:fb_question.c **** 	spritePhase = getSpritePhase(p_thisSprite, qCount, 
 3078               		.stabn	68,0,532,.LM368-.LFBB14
 3079               	.LM368:
 3080 09c0 942E      		mov r9,r20
 3081 09c2 921A      		sub r9,r18
 3082 09c4 492D      		mov r20,r9
 3083 09c6 0E94 0000 		call getSpritePhase
 3084 09ca A82E      		mov r10,r24
 533:fb_question.c **** 												((int8_t)spriteRow - rowToDrawAt) );
 534:fb_question.c **** 
 535:fb_question.c **** 	//This may get overridden (for the sky)
 536:fb_question.c **** 	uint8_t thePalette = getSpritePalette(p_thisSprite, spritePhase,
 3085               		.stabn	68,0,536,.LM369-.LFBB14
 3086               	.LM369:
 3087 09cc 4B2D      		mov r20,r11
 3088 09ce 682F      		mov r22,r24
 3089 09d0 CE01      		movw r24,r28
 3090 09d2 0E94 0000 		call getSpritePalette
 3091 09d6 882E      		mov r8,r24
 3092 09d8 80E1      		ldi r24,lo8(16)
 3093 09da C89E      		mul r12,r24
 3094 09dc 6001      		movw r12,r0
 3095 09de 1124      		clr __zero_reg__
 3096 09e0 C601      		movw r24,r12
 3097 09e2 8050      		subi r24,lo8(-(frameBuffer))
 3098 09e4 9040      		sbci r25,hi8(-(frameBuffer))
 3099 09e6 6C01      		movw r12,r24
 3100 09e8 E12C      		mov r14,__zero_reg__
 3101 09ea F12C      		mov r15,__zero_reg__
 3102               	.LBB222:
 3103               	.LBB223:
 537:fb_question.c **** 																				spriteRow);
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 111


 538:fb_question.c **** 	
 539:fb_question.c **** 	for(qCol=0; qCol<Q_WIDTH; qCol++)
 540:fb_question.c ****    {
 541:fb_question.c **** 
 542:fb_question.c **** 		// Should use readImageByte... but it's specific to FB_WIDTH
 543:fb_question.c ****       //uint8_t data=
 544:fb_question.c ****       //  pgm_read_byte((uint8_t *)(&((p_image)[(qRow)*Q_WIDTH+(qCol)])));
 545:fb_question.c ****       uint8_t data;
 546:fb_question.c **** 		uint8_t theCol = qCol;
 547:fb_question.c **** 
 548:fb_question.c **** 
 549:fb_question.c **** 		if(p_thisSprite == &spriteGOOMBA)
 550:fb_question.c **** 		{
 551:fb_question.c **** 			//uint8_t gCol = qCol;
 552:fb_question.c **** 			//Goomba moves by flipping horizontally...
 553:fb_question.c **** 			if((spritePhase < 16) && (spritePhase & 0x01))
 554:fb_question.c **** 				theCol = 15-qCol;
 555:fb_question.c **** 		}
 556:fb_question.c **** 
 557:fb_question.c **** 
 558:fb_question.c **** 
 559:fb_question.c **** 		uint8_t rawPixVal;
 560:fb_question.c **** 
 561:fb_question.c **** 		if((spriteRow < 0) || (spriteRow >= Q_HEIGHT))
 562:fb_question.c **** 			rawPixVal = 0;
 563:fb_question.c **** 		else if(p_thisSprite == &spriteCOIN)
 564:fb_question.c **** 			rawPixVal = getRawPixelValCOIN(spritePhase, spriteRow, theCol);
 565:fb_question.c **** 		else
 566:fb_question.c **** 			rawPixVal = getRawPixelVal(p_thisSprite, spriteRow, theCol);
 567:fb_question.c **** 
 568:fb_question.c **** 
 569:fb_question.c **** 		sprite_t *p_spriteForColor = p_thisSprite;
 570:fb_question.c **** 		uint8_t paletteForColor = thePalette;
 571:fb_question.c **** 
 572:fb_question.c **** 		if( (rawPixVal == 0) && (skyOverrideSprite != NULL) )
 573:fb_question.c **** 		{
 574:fb_question.c **** 			p_spriteForColor = skyOverrideSprite;
 575:fb_question.c **** 			int8_t vOffset = spriteRow - rowToDrawAt;
 576:fb_question.c **** 
 577:fb_question.c **** 			if (skyOverrideSprite != p_thisSprite)
 578:fb_question.c **** 				vOffset = -vOffset;
 3104               		.stabn	68,0,578,.LM370-.LFBB14
 3105               	.LM370:
 3106 09ec 692C      		mov r6,r9
 3107 09ee 6194      		neg r6
 3108               	.LBE223:
 553:fb_question.c **** 				theCol = 15-qCol;
 3109               		.stabn	68,0,553,.LM371-.LFBB14
 3110               	.LM371:
 3111 09f0 9A2D      		mov r25,r10
 3112 09f2 9170      		andi r25,lo8(1)
 3113 09f4 592E      		mov r5,r25
 3114 09f6 7FE0      		ldi r23,lo8(15)
 3115 09f8 472E      		mov r4,r23
 3116               	.L130:
 3117 09fa 4E2D      		mov r20,r14
 3118 09fc 9FE0      		ldi r25,lo8(15)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 112


 549:fb_question.c **** 		{
 3119               		.stabn	68,0,549,.LM372-.LFBB14
 3120               	.LM372:
 3121 09fe 80E0      		ldi r24,hi8(spriteGOOMBA)
 3122 0a00 C030      		cpi r28,lo8(spriteGOOMBA)
 3123 0a02 D807      		cpc r29,r24
 3124 0a04 01F4      		brne .L121
 553:fb_question.c **** 				theCol = 15-qCol;
 3125               		.stabn	68,0,553,.LM373-.LFBB14
 3126               	.LM373:
 3127 0a06 9A15      		cp r25,r10
 3128 0a08 00F0      		brlo .L122
 553:fb_question.c **** 				theCol = 15-qCol;
 3129               		.stabn	68,0,553,.LM374-.LFBB14
 3130               	.LM374:
 3131 0a0a 5520      		tst r5
 3132 0a0c 01F0      		breq .L122
 3133 0a0e 842D      		mov r24,r4
 3134 0a10 8E19      		sub r24,r14
 3135 0a12 482F      		mov r20,r24
 3136 0a14 00C0      		rjmp .L122
 3137               	.L121:
 561:fb_question.c **** 			rawPixVal = 0;
 3138               		.stabn	68,0,561,.LM375-.LFBB14
 3139               	.LM375:
 3140 0a16 9B15      		cp r25,r11
 3141 0a18 00F0      		brlo .L123
 563:fb_question.c **** 			rawPixVal = getRawPixelValCOIN(spritePhase, spriteRow, theCol);
 3142               		.stabn	68,0,563,.LM376-.LFBB14
 3143               	.LM376:
 3144 0a1a 80E0      		ldi r24,hi8(spriteCOIN)
 3145 0a1c C030      		cpi r28,lo8(spriteCOIN)
 3146 0a1e D807      		cpc r29,r24
 3147 0a20 01F4      		brne .L124
 564:fb_question.c **** 		else
 3148               		.stabn	68,0,564,.LM377-.LFBB14
 3149               	.LM377:
 3150 0a22 4E2D      		mov r20,r14
 3151 0a24 6B2D      		mov r22,r11
 3152 0a26 8A2D      		mov r24,r10
 3153 0a28 0E94 0000 		call getRawPixelValCOIN
 3154 0a2c 00C0      		rjmp .L125
 3155               	.L122:
 561:fb_question.c **** 			rawPixVal = 0;
 3156               		.stabn	68,0,561,.LM378-.LFBB14
 3157               	.LM378:
 3158 0a2e 9FE0      		ldi r25,lo8(15)
 3159 0a30 9B15      		cp r25,r11
 3160 0a32 00F0      		brlo .L123
 3161               	.L124:
 566:fb_question.c **** 
 3162               		.stabn	68,0,566,.LM379-.LFBB14
 3163               	.LM379:
 3164 0a34 6B2D      		mov r22,r11
 3165 0a36 CE01      		movw r24,r28
 3166 0a38 0E94 0000 		call getRawPixelVal
 3167               	.L125:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 113


 572:fb_question.c **** 		{
 3168               		.stabn	68,0,572,.LM380-.LFBB14
 3169               	.LM380:
 3170 0a3c 8111      		cpse r24,__zero_reg__
 3171 0a3e 00C0      		rjmp .L131
 3172               	.L123:
 572:fb_question.c **** 		{
 3173               		.stabn	68,0,572,.LM381-.LFBB14
 3174               	.LM381:
 3175 0a40 0091 0000 		lds r16,skyOverrideSprite
 3176 0a44 1091 0000 		lds r17,skyOverrideSprite+1
 3177 0a48 0115      		cp r16,__zero_reg__
 3178 0a4a 1105      		cpc r17,__zero_reg__
 3179 0a4c 01F0      		breq .L132
 3180               	.LBB224:
 577:fb_question.c **** 				vOffset = -vOffset;
 3181               		.stabn	68,0,577,.LM382-.LFBB14
 3182               	.LM382:
 3183 0a4e 0C17      		cp r16,r28
 3184 0a50 1D07      		cpc r17,r29
 3185 0a52 01F0      		breq .L133
 3186               		.stabn	68,0,578,.LM383-.LFBB14
 3187               	.LM383:
 3188 0a54 462D      		mov r20,r6
 3189 0a56 00C0      		rjmp .L127
 3190               	.L133:
 575:fb_question.c **** 
 3191               		.stabn	68,0,575,.LM384-.LFBB14
 3192               	.LM384:
 3193 0a58 492D      		mov r20,r9
 3194               	.L127:
 579:fb_question.c **** 
 580:fb_question.c **** 			uint8_t spritePhaseForColor = 
 3195               		.stabn	68,0,580,.LM385-.LFBB14
 3196               	.LM385:
 3197 0a5a 672D      		mov r22,r7
 3198 0a5c C801      		movw r24,r16
 3199 0a5e 0E94 0000 		call getSpritePhase
 581:fb_question.c **** 						getSpritePhase(p_spriteForColor, qCount, vOffset);
 582:fb_question.c **** 									//				(spriteRow - rowToDrawAta)); 
 583:fb_question.c **** 			paletteForColor = getSpritePalette(p_spriteForColor, 
 3200               		.stabn	68,0,583,.LM386-.LFBB14
 3201               	.LM386:
 3202 0a62 4B2D      		mov r20,r11
 3203 0a64 682F      		mov r22,r24
 3204 0a66 C801      		movw r24,r16
 3205 0a68 0E94 0000 		call getSpritePalette
 3206 0a6c 482F      		mov r20,r24
 3207 0a6e 00C0      		rjmp .L137
 3208               	.L131:
 3209               	.LBE224:
 570:fb_question.c **** 
 3210               		.stabn	68,0,570,.LM387-.LFBB14
 3211               	.LM387:
 3212 0a70 482D      		mov r20,r8
 3213 0a72 8E01      		movw r16,r28
 3214 0a74 00C0      		rjmp .L126
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 114


 3215               	.L132:
 3216 0a76 482D      		mov r20,r8
 3217 0a78 8E01      		movw r16,r28
 3218               	.L137:
 3219 0a7a 80E0      		ldi r24,0
 3220               	.L126:
 584:fb_question.c **** 															spritePhaseForColor,
 585:fb_question.c **** 															spriteRow);
 586:fb_question.c **** 		}
 587:fb_question.c **** 
 588:fb_question.c **** 
 589:fb_question.c **** 		data = rawPixValToGimpColorVal(rawPixVal, p_spriteForColor,
 3221               		.stabn	68,0,589,.LM388-.LFBB14
 3222               	.LM388:
 3223 0a7c B801      		movw r22,r16
 3224 0a7e 0E94 0000 		call rawPixValToGimpColorVal
 590:fb_question.c **** 																		paletteForColor); 
 591:fb_question.c **** 		
 592:fb_question.c ****       data = gimpPixelValToLColor(data);
 3225               		.stabn	68,0,592,.LM389-.LFBB14
 3226               	.LM389:
 3227 0a82 282F      		mov r18,r24
 3228 0a84 2073      		andi r18,lo8(48)
 3229 0a86 30E0      		ldi r19,0
 3230 0a88 2032      		cpi r18,32
 3231 0a8a 3105      		cpc r19,__zero_reg__
 3232 0a8c 04F0      		brlt .L128
 3233               		.stabn	68,0,592,.LM390-.LFBB14
 3234               	.LM390:
 3235 0a8e 805F      		subi r24,lo8(-(16))
 3236               	.L128:
 3237 0a90 F601      		movw r30,r12
 3238 0a92 EE0D      		add r30,r14
 3239 0a94 FF1D      		adc r31,r15
 593:fb_question.c **** 
 594:fb_question.c **** 		frameBuffer[rowToDrawAt][qCol] = data;
 3240               		.stabn	68,0,594,.LM391-.LFBB14
 3241               	.LM391:
 3242 0a96 8083      		st Z,r24
 3243 0a98 9FEF      		ldi r25,-1
 3244 0a9a E91A      		sub r14,r25
 3245 0a9c F90A      		sbc r15,r25
 3246               	.LBE222:
 539:fb_question.c ****    {
 3247               		.stabn	68,0,539,.LM392-.LFBB14
 3248               	.LM392:
 3249 0a9e 80E1      		ldi r24,16
 3250 0aa0 E816      		cp r14,r24
 3251 0aa2 F104      		cpc r15,__zero_reg__
 3252 0aa4 01F0      		breq .+2
 3253 0aa6 00C0      		rjmp .L130
 3254               	/* epilogue start */
 595:fb_question.c **** 	}
 596:fb_question.c **** }
 3255               		.stabn	68,0,596,.LM393-.LFBB14
 3256               	.LM393:
 3257 0aa8 DF91      		pop r29
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 115


 3258 0aaa CF91      		pop r28
 3259 0aac 1F91      		pop r17
 3260 0aae 0F91      		pop r16
 3261 0ab0 FF90      		pop r15
 3262 0ab2 EF90      		pop r14
 3263 0ab4 DF90      		pop r13
 3264 0ab6 CF90      		pop r12
 3265 0ab8 BF90      		pop r11
 3266 0aba AF90      		pop r10
 3267 0abc 9F90      		pop r9
 3268 0abe 8F90      		pop r8
 3269 0ac0 7F90      		pop r7
 3270 0ac2 6F90      		pop r6
 3271 0ac4 5F90      		pop r5
 3272 0ac6 4F90      		pop r4
 3273 0ac8 0895      		ret
 3274               		.size	drawSpriteRow, .-drawSpriteRow
 3275               		.stabs	"spritePhase:r(4,2)",64,0,530,10
 3276               		.stabn	192,0,0,.LFBB14-.LFBB14
 3277               		.stabs	"data:r(4,2)",64,0,545,24
 3278               		.stabs	"theCol:r(4,2)",64,0,546,20
 3279               		.stabs	"rawPixVal:r(4,2)",64,0,559,24
 3280               		.stabn	192,0,0,.LBB222-.LFBB14
 3281               		.stabs	"spritePhaseForColor:r(4,2)",64,0,580,24
 3282               		.stabn	192,0,0,.LBB223-.LFBB14
 3283               		.stabn	224,0,0,.LBE223-.LFBB14
 3284               		.stabs	"spritePhaseForColor:r(4,2)",64,0,580,24
 3285               		.stabn	192,0,0,.LBB224-.LFBB14
 3286               		.stabn	224,0,0,.LBE224-.LFBB14
 3287               		.stabn	224,0,0,.LBE222-.LFBB14
 3288               		.stabn	224,0,0,.Lscope14-.LFBB14
 3289               	.Lscope14:
 3290               		.stabs	"",36,0,0,.Lscope14-.LFBB14
 3291               		.stabd	78,0,0
 3292               		.stabs	"fbQuestion_update:F(0,47)",36,0,181,fbQuestion_update
 3293               	.global	fbQuestion_update
 3294               		.type	fbQuestion_update, @function
 3295               	fbQuestion_update:
 3296               		.stabd	46,0,0
 182:fb_question.c **** 	callCount++;
 3297               		.stabn	68,0,182,.LM394-.LFBB15
 3298               	.LM394:
 3299               	.LFBB15:
 3300 0aca 0F93      		push r16
 3301 0acc 1F93      		push r17
 3302 0ace CF93      		push r28
 3303 0ad0 DF93      		push r29
 3304               	/* prologue: function */
 3305               	/* frame size = 0 */
 3306               	/* stack size = 4 */
 3307               	.L__stack_usage = 4
 183:fb_question.c **** 		//This should be an init-thing, I guess... it's only a 2-cycle
 3308               		.stabn	68,0,183,.LM395-.LFBB15
 3309               	.LM395:
 3310 0ad2 8091 0000 		lds r24,callCount
 3311 0ad6 8F5F      		subi r24,lo8(-(1))
 3312 0ad8 8093 0000 		sts callCount,r24
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 116


 215:fb_question.c **** 	{
 3313               		.stabn	68,0,215,.LM396-.LFBB15
 3314               	.LM396:
 3315 0adc 8091 0000 		lds r24,p_nextSprite
 3316 0ae0 9091 0000 		lds r25,p_nextSprite+1
 3317 0ae4 892B      		or r24,r25
 3318 0ae6 01F0      		breq .+2
 3319 0ae8 00C0      		rjmp .L139
 218:fb_question.c **** 	{
 3320               		.stabn	68,0,218,.LM397-.LFBB15
 3321               	.LM397:
 3322 0aea 8091 0000 		lds r24,p_selectedSprite
 3323 0aee 9091 0000 		lds r25,p_selectedSprite+1
 3324 0af2 2091 0000 		lds r18,qCount
 3325 0af6 30E0      		ldi r19,hi8(spriteDEADGOOMBA)
 3326 0af8 8030      		cpi r24,lo8(spriteDEADGOOMBA)
 3327 0afa 9307      		cpc r25,r19
 3328 0afc 01F4      		brne .L140
 220:fb_question.c **** 		{
 3329               		.stabn	68,0,220,.LM398-.LFBB15
 3330               	.LM398:
 3331 0afe 2031      		cpi r18,lo8(16)
 3332 0b00 00F0      		brlo .L139
 222:fb_question.c **** 			p_nextSprite = &spriteQ;
 3333               		.stabn	68,0,222,.LM399-.LFBB15
 3334               	.LM399:
 3335 0b02 87E0      		ldi r24,lo8(7)
 3336 0b04 8093 0000 		sts qCount,r24
 223:fb_question.c **** 		}
 3337               		.stabn	68,0,223,.LM400-.LFBB15
 3338               	.LM400:
 3339 0b08 80E0      		ldi r24,lo8(spriteQ)
 3340 0b0a 90E0      		ldi r25,hi8(spriteQ)
 3341 0b0c 00C0      		rjmp .L162
 3342               	.L140:
 226:fb_question.c **** 	{
 3343               		.stabn	68,0,226,.LM401-.LFBB15
 3344               	.LM401:
 3345 0b0e 30E0      		ldi r19,hi8(spriteGOOMBA)
 3346 0b10 8030      		cpi r24,lo8(spriteGOOMBA)
 3347 0b12 9307      		cpc r25,r19
 3348 0b14 01F4      		brne .L141
 228:fb_question.c **** 		{
 3349               		.stabn	68,0,228,.LM402-.LFBB15
 3350               	.LM402:
 3351 0b16 2033      		cpi r18,lo8(48)
 3352 0b18 00F0      		brlo .L139
 3353               	.L143:
 230:fb_question.c **** 			p_nextSprite = &spriteSOLID;
 3354               		.stabn	68,0,230,.LM403-.LFBB15
 3355               	.LM403:
 3356 0b1a 1092 0000 		sts qCount,__zero_reg__
 231:fb_question.c **** 		}
 3357               		.stabn	68,0,231,.LM404-.LFBB15
 3358               	.LM404:
 3359 0b1e 80E0      		ldi r24,lo8(spriteSOLID)
 3360 0b20 90E0      		ldi r25,hi8(spriteSOLID)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 117


 3361               	.L162:
 3362 0b22 9093 0000 		sts p_nextSprite+1,r25
 3363 0b26 8093 0000 		sts p_nextSprite,r24
 3364 0b2a 00C0      		rjmp .L139
 3365               	.L141:
 234:fb_question.c **** 	{
 3366               		.stabn	68,0,234,.LM405-.LFBB15
 3367               	.LM405:
 3368 0b2c 30E0      		ldi r19,hi8(spriteCOIN)
 3369 0b2e 8030      		cpi r24,lo8(spriteCOIN)
 3370 0b30 9307      		cpc r25,r19
 3371 0b32 01F4      		brne .L142
 236:fb_question.c **** 		{
 3372               		.stabn	68,0,236,.LM406-.LFBB15
 3373               	.LM406:
 3374 0b34 2830      		cpi r18,lo8(8)
 3375 0b36 00F4      		brsh .L143
 3376 0b38 00C0      		rjmp .L139
 3377               	.L142:
 242:fb_question.c **** 	{
 3378               		.stabn	68,0,242,.LM407-.LFBB15
 3379               	.LM407:
 3380 0b3a 30E0      		ldi r19,hi8(spriteSOLID)
 3381 0b3c 8030      		cpi r24,lo8(spriteSOLID)
 3382 0b3e 9307      		cpc r25,r19
 3383 0b40 01F4      		brne .L144
 244:fb_question.c **** 		{
 3384               		.stabn	68,0,244,.LM408-.LFBB15
 3385               	.LM408:
 3386 0b42 2830      		cpi r18,lo8(8)
 3387 0b44 00F0      		brlo .L139
 246:fb_question.c **** 			p_selectedSprite = &spriteQ;
 3388               		.stabn	68,0,246,.LM409-.LFBB15
 3389               	.LM409:
 3390 0b46 87E0      		ldi r24,lo8(7)
 3391 0b48 8093 0000 		sts qCount,r24
 247:fb_question.c **** 		}
 3392               		.stabn	68,0,247,.LM410-.LFBB15
 3393               	.LM410:
 3394 0b4c 80E0      		ldi r24,lo8(spriteQ)
 3395 0b4e 90E0      		ldi r25,hi8(spriteQ)
 3396 0b50 9093 0000 		sts p_selectedSprite+1,r25
 3397 0b54 8093 0000 		sts p_selectedSprite,r24
 3398 0b58 00C0      		rjmp .L139
 3399               	.L144:
 250:fb_question.c **** 	{
 3400               		.stabn	68,0,250,.LM411-.LFBB15
 3401               	.LM411:
 3402 0b5a 8050      		subi r24,lo8(spriteQ)
 3403 0b5c 9040      		sbci r25,hi8(spriteQ)
 3404 0b5e 01F0      		breq .L145
 252:fb_question.c **** 		{
 3405               		.stabn	68,0,252,.LM412-.LFBB15
 3406               	.LM412:
 3407 0b60 2031      		cpi r18,lo8(16)
 3408 0b62 00F4      		brsh .L143
 3409 0b64 00C0      		rjmp .L139
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 118


 3410               	.L145:
 265:fb_question.c **** 			fbQuestion_hitDetected();
 3411               		.stabn	68,0,265,.LM413-.LFBB15
 3412               	.LM413:
 3413 0b66 2C33      		cpi r18,lo8(60)
 3414 0b68 00F0      		brlo .L139
 266:fb_question.c **** 	}
 3415               		.stabn	68,0,266,.LM414-.LFBB15
 3416               	.LM414:
 3417 0b6a 0E94 0000 		call fbQuestion_hitDetected
 3418               	.L139:
 313:fb_question.c **** 	{
 3419               		.stabn	68,0,313,.LM415-.LFBB15
 3420               	.LM415:
 3421 0b6e 8091 0000 		lds r24,p_nextSprite
 3422 0b72 9091 0000 		lds r25,p_nextSprite+1
 3423 0b76 892B      		or r24,r25
 3424 0b78 01F4      		brne .+2
 3425 0b7a 00C0      		rjmp .L146
 316:fb_question.c **** 
 3426               		.stabn	68,0,316,.LM416-.LFBB15
 3427               	.LM416:
 3428 0b7c 8091 0000 		lds r24,p_selectedSprite
 3429 0b80 9091 0000 		lds r25,p_selectedSprite+1
 3430               	.LBB225:
 3431               	.LBB226:
 3432               		.stabs	"icons/iconPacking.h",132,0,0,.Ltext42
 3433               	.Ltext42:
  66:icons/iconPacking.h **** //	skyOverridePalette = palette;
 3434               		.stabn	68,0,66,.LM417-.LFBB15
 3435               	.LM417:
 3436 0b84 9093 0000 		sts skyOverrideSprite+1,r25
 3437 0b88 8093 0000 		sts skyOverrideSprite,r24
 3438               	.LBE226:
 3439               	.LBE225:
 3440               		.stabs	"fb_question.c",132,0,0,.Ltext43
 3441               	.Ltext43:
 318:fb_question.c **** 		{
 3442               		.stabn	68,0,318,.LM418-.LFBB15
 3443               	.LM418:
 3444 0b8c 8050      		subi r24,lo8(spriteQ)
 3445 0b8e 9040      		sbci r25,hi8(spriteQ)
 3446 0b90 01F4      		brne .L147
 3447 0b92 C0E0      		ldi r28,0
 3448               	.L148:
 3449               	.LBB227:
 323:fb_question.c **** 			{
 3450               		.stabn	68,0,323,.LM419-.LFBB15
 3451               	.LM419:
 3452 0b94 6091 0000 		lds r22,qCount
 3453 0b98 C617      		cp r28,r22
 3454 0b9a 00F4      		brsh .L163
 325:fb_question.c **** 				drawSpriteRow(p_nextSprite, qCount, spriteRow, qRow);
 3455               		.stabn	68,0,325,.LM420-.LFBB15
 3456               	.LM420:
 3457 0b9c 40EF      		ldi r20,lo8(-16)
 3458 0b9e 460F      		add r20,r22
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 119


 3459 0ba0 4C0F      		add r20,r28
 326:fb_question.c **** 			}
 3460               		.stabn	68,0,326,.LM421-.LFBB15
 3461               	.LM421:
 3462 0ba2 2C2F      		mov r18,r28
 3463 0ba4 8091 0000 		lds r24,p_nextSprite
 3464 0ba8 9091 0000 		lds r25,p_nextSprite+1
 3465 0bac 0E94 0000 		call drawSpriteRow
 323:fb_question.c **** 			{
 3466               		.stabn	68,0,323,.LM422-.LFBB15
 3467               	.LM422:
 3468 0bb0 CF5F      		subi r28,lo8(-(1))
 3469 0bb2 00C0      		rjmp .L148
 3470               	.L163:
 3471 0bb4 DC2F      		mov r29,r28
 3472               	.L150:
 336:fb_question.c **** 			{
 3473               		.stabn	68,0,336,.LM423-.LFBB15
 3474               	.LM423:
 3475 0bb6 C031      		cpi r28,lo8(16)
 3476 0bb8 00F4      		brsh .L158
 3477 0bba 4C2F      		mov r20,r28
 3478 0bbc 4D1B      		sub r20,r29
 338:fb_question.c **** 				spriteRow++;
 3479               		.stabn	68,0,338,.LM424-.LFBB15
 3480               	.LM424:
 3481 0bbe 2C2F      		mov r18,r28
 3482 0bc0 6091 0000 		lds r22,qCount
 3483 0bc4 80E0      		ldi r24,lo8(spriteSOLID)
 3484 0bc6 90E0      		ldi r25,hi8(spriteSOLID)
 3485 0bc8 0E94 0000 		call drawSpriteRow
 336:fb_question.c **** 			{
 3486               		.stabn	68,0,336,.LM425-.LFBB15
 3487               	.LM425:
 3488 0bcc CF5F      		subi r28,lo8(-(1))
 3489 0bce 00C0      		rjmp .L150
 3490               	.L158:
 3491               	.LBE227:
 365:fb_question.c **** 		if(qCount >= Q_HEIGHT)
 3492               		.stabn	68,0,365,.LM426-.LFBB15
 3493               	.LM426:
 3494 0bd0 8091 0000 		lds r24,qCount
 3495 0bd4 8F5F      		subi r24,lo8(-(1))
 3496 0bd6 8093 0000 		sts qCount,r24
 366:fb_question.c **** 		{
 3497               		.stabn	68,0,366,.LM427-.LFBB15
 3498               	.LM427:
 3499 0bda 8031      		cpi r24,lo8(16)
 3500 0bdc 00F4      		brsh .+2
 3501 0bde 00C0      		rjmp .L138
 368:fb_question.c **** 			p_selectedSprite = p_nextSprite;
 3502               		.stabn	68,0,368,.LM428-.LFBB15
 3503               	.LM428:
 3504 0be0 1092 0000 		sts qCount,__zero_reg__
 369:fb_question.c **** 			p_nextSprite = NULL;
 3505               		.stabn	68,0,369,.LM429-.LFBB15
 3506               	.LM429:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 120


 3507 0be4 8091 0000 		lds r24,p_nextSprite
 3508 0be8 9091 0000 		lds r25,p_nextSprite+1
 3509 0bec 9093 0000 		sts p_selectedSprite+1,r25
 3510 0bf0 8093 0000 		sts p_selectedSprite,r24
 370:fb_question.c **** 		}
 3511               		.stabn	68,0,370,.LM430-.LFBB15
 3512               	.LM430:
 3513 0bf4 1092 0000 		sts p_nextSprite+1,__zero_reg__
 3514 0bf8 1092 0000 		sts p_nextSprite,__zero_reg__
 3515 0bfc 00C0      		rjmp .L138
 3516               	.L147:
 3517               	.LBB228:
 346:fb_question.c **** 
 3518               		.stabn	68,0,346,.LM431-.LFBB15
 3519               	.LM431:
 3520 0bfe 0091 0000 		lds r16,qCount
 348:fb_question.c **** 			{
 3521               		.stabn	68,0,348,.LM432-.LFBB15
 3522               	.LM432:
 3523 0c02 10E0      		ldi r17,0
 3524 0c04 C0E1      		ldi r28,lo8(16)
 3525 0c06 D0E0      		ldi r29,0
 3526               	.L154:
 348:fb_question.c **** 			{
 3527               		.stabn	68,0,348,.LM433-.LFBB15
 3528               	.LM433:
 3529 0c08 6091 0000 		lds r22,qCount
 3530 0c0c 412F      		mov r20,r17
 3531 0c0e 50E0      		ldi r21,0
 3532 0c10 CE01      		movw r24,r28
 3533 0c12 861B      		sub r24,r22
 3534 0c14 9109      		sbc r25,__zero_reg__
 3535 0c16 4817      		cp r20,r24
 3536 0c18 5907      		cpc r21,r25
 3537 0c1a 04F4      		brge .L164
 3538 0c1c 412F      		mov r20,r17
 3539 0c1e 400F      		add r20,r16
 350:fb_question.c **** 									//				displayRow+qCount, displayRow);
 3540               		.stabn	68,0,350,.LM434-.LFBB15
 3541               	.LM434:
 3542 0c20 212F      		mov r18,r17
 3543 0c22 8091 0000 		lds r24,p_selectedSprite
 3544 0c26 9091 0000 		lds r25,p_selectedSprite+1
 3545 0c2a 0E94 0000 		call drawSpriteRow
 348:fb_question.c **** 			{
 3546               		.stabn	68,0,348,.LM435-.LFBB15
 3547               	.LM435:
 3548 0c2e 1F5F      		subi r17,lo8(-(1))
 3549 0c30 00C0      		rjmp .L154
 3550               	.L164:
 3551 0c32 C12F      		mov r28,r17
 3552               	.L156:
 356:fb_question.c **** 			{
 3553               		.stabn	68,0,356,.LM436-.LFBB15
 3554               	.LM436:
 3555 0c34 1031      		cpi r17,lo8(16)
 3556 0c36 00F4      		brsh .L158
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 121


 3557 0c38 412F      		mov r20,r17
 3558 0c3a 4C1B      		sub r20,r28
 358:fb_question.c **** 					//				displayRow-(Q_HEIGHT-1-qCount), displayRow);
 3559               		.stabn	68,0,358,.LM437-.LFBB15
 3560               	.LM437:
 3561 0c3c 212F      		mov r18,r17
 3562 0c3e 6091 0000 		lds r22,qCount
 3563 0c42 8091 0000 		lds r24,p_nextSprite
 3564 0c46 9091 0000 		lds r25,p_nextSprite+1
 3565 0c4a 0E94 0000 		call drawSpriteRow
 356:fb_question.c **** 			{
 3566               		.stabn	68,0,356,.LM438-.LFBB15
 3567               	.LM438:
 3568 0c4e 1F5F      		subi r17,lo8(-(1))
 3569 0c50 00C0      		rjmp .L156
 3570               	.L146:
 3571               	.LBE228:
 3572               	.LBB229:
 3573               	.LBB230:
 3574               		.stabs	"icons/iconPacking.h",132,0,0,.Ltext44
 3575               	.Ltext44:
  66:icons/iconPacking.h **** //	skyOverridePalette = palette;
 3576               		.stabn	68,0,66,.LM439-.LFBB15
 3577               	.LM439:
 3578 0c52 1092 0000 		sts skyOverrideSprite+1,__zero_reg__
 3579 0c56 1092 0000 		sts skyOverrideSprite,__zero_reg__
 3580               	.LBE230:
 3581               	.LBE229:
 3582               		.stabs	"fb_question.c",132,0,0,.Ltext45
 3583               	.Ltext45:
 378:fb_question.c **** 			drawSpriteRow(p_selectedSprite, qCount, qRow, qRow);
 3584               		.stabn	68,0,378,.LM440-.LFBB15
 3585               	.LM440:
 3586 0c5a C0E0      		ldi r28,0
 3587               	.L161:
 379:fb_question.c **** 
 3588               		.stabn	68,0,379,.LM441-.LFBB15
 3589               	.LM441:
 3590 0c5c 2C2F      		mov r18,r28
 3591 0c5e 4C2F      		mov r20,r28
 3592 0c60 6091 0000 		lds r22,qCount
 3593 0c64 8091 0000 		lds r24,p_selectedSprite
 3594 0c68 9091 0000 		lds r25,p_selectedSprite+1
 3595 0c6c 0E94 0000 		call drawSpriteRow
 378:fb_question.c **** 			drawSpriteRow(p_selectedSprite, qCount, qRow, qRow);
 3596               		.stabn	68,0,378,.LM442-.LFBB15
 3597               	.LM442:
 3598 0c70 CF5F      		subi r28,lo8(-(1))
 3599 0c72 C031      		cpi r28,lo8(16)
 3600 0c74 01F4      		brne .L161
 381:fb_question.c **** 		//the only case where qCount should cycle is spriteQ...
 3601               		.stabn	68,0,381,.LM443-.LFBB15
 3602               	.LM443:
 3603 0c76 8091 0000 		lds r24,qCount
 3604 0c7a 8F5F      		subi r24,lo8(-(1))
 3605 0c7c 8093 0000 		sts qCount,r24
 385:fb_question.c **** 			qCount = 0;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 122


 3606               		.stabn	68,0,385,.LM444-.LFBB15
 3607               	.LM444:
 3608 0c80 8C3F      		cpi r24,lo8(-4)
 3609 0c82 00F0      		brlo .L138
 386:fb_question.c **** 	}
 3610               		.stabn	68,0,386,.LM445-.LFBB15
 3611               	.LM445:
 3612 0c84 1092 0000 		sts qCount,__zero_reg__
 3613               	.L138:
 3614               	/* epilogue start */
 389:fb_question.c **** 
 3615               		.stabn	68,0,389,.LM446-.LFBB15
 3616               	.LM446:
 3617 0c88 DF91      		pop r29
 3618 0c8a CF91      		pop r28
 3619 0c8c 1F91      		pop r17
 3620 0c8e 0F91      		pop r16
 3621 0c90 0895      		ret
 3622               		.size	fbQuestion_update, .-fbQuestion_update
 3623               		.stabs	"spriteRow:r(4,2)",64,0,346,16
 3624               		.stabn	192,0,0,.LBB228-.LFBB15
 3625               		.stabn	224,0,0,.LBE228-.LFBB15
 3626               	.Lscope15:
 3627               		.stabs	"",36,0,0,.Lscope15-.LFBB15
 3628               		.stabd	78,0,0
 3629               		.stabs	"lcd_Init:F(0,47)",36,0,959,lcd_Init
 3630               	.global	lcd_Init
 3631               		.type	lcd_Init, @function
 3632               	lcd_Init:
 3633               		.stabd	46,0,0
 3634               		.stabs	"_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c",132,0,0,.Ltext46
 3635               	.Ltext46:
   1:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //lcdStuff 0.55ncf-2
   2:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
   3:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.55ncf-2 - a/o LCDdirectLVDS67:
   4:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            Adding notes to loadData() re: transitions...
   5:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            TODO: it's still a little unclear...
   6:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.55ncf-1 - adding BLUE_DIAG_SCROLL_FLASH
   7:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.55ncf - drawPix had uint8_t rowNum... switching to uint16_t
   8:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          a/o LCDdirectLVDS-62 (attempting to use DE_BLUE with ChiMei
   9:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          display)
  10:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          Also added BLUE_DIAG_BAR_SCROLL
  11:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.52ncf-1 - Adding notes re: old mental hurdles.
  12:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.52ncf - getting rid of git in this directory...
  13:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.51ncf-git-1ish Adding a few notes remaining from LCDdirectLVDS:
  14:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //						"SCOPING has been removed in LVDS, revisit LCDdirect50"
  15:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.51ncf-git first attempt at using git for uploading to googleCode...
  16:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        this version isn't yet used by any projects
  17:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.50ncf cleanup, colorOverride is unused...
  18:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //				SMILEY -> LCD_SMILEY
  19:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.40ncf-1 loadRow unused... removal untested...
  20:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.40ncf drawPix...
  21:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.30ncf-6 HSYNC_INACTIVE, etc. definable elsewhere
  22:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.30ncf-5 Adding BLUE_VERT_BAR_REVERSED
  23:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.30ncf-4 Adding NOTES: DON'T START WITH BLUE_DIAG_BAR
  24:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.30ncf-3 T_DV and T_Vlow overrideable
  25:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.30ncf-2 Not sure if I've modified it between... but here: 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 123


  26:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        FRAME_COUNT_TO_DELAY wasn't defined, giving warnings
  27:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.30ncf-1 updateLCD() has return-values for state-switches
  28:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          (VFP, VSync, VBP, DE)
  29:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        ACTUALLY, that's unnecessary... state-transitions can be
  30:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        determined by vSync and dataEnable...
  31:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.30ncf Haven't been keeping these backed up regularly...
  32:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        More toward realtime adjustable timing values
  33:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        V Front Porch now occurs at the beginning of the frame, instead
  34:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        of at the end...
  35:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
  36:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.20ncf More Timing Value experiment preparation... 
  37:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.10ncf-3ish looking into reloading methods for e.g. experimenting with
  38:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          timing values: sdramThing2.0-7
  39:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          How to "move" timing-values around data which needn't be
  40:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          changed...
  41:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.10ncf-andsomemore
  42:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          Added MAKELONG to fix integer overflow warnings
  43:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          Revised it from "... + MAKELONG" to "MAKELONG(...)"
  44:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          (The +MAKELONG version is lost in the ether... if you *really*
  45:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //           want it, there's a localized version in sdramThing2.0-6)
  46:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.10ncf-1ish - Adding HSYNC_COUNT_FRAME_COMPLETE
  47:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //               Removal of LVDS_PRESCALER stuff...
  48:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.10ncf - Stolen from LCDdirectLVDS/54-moreColorStuff/main.c
  49:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          Removal of LCDdirectLVDS-specific stuff...
  50:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //				A little bit of rewriting of notes to be more generalized
  51:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          All delay_cyc references replaced with delay_Dots,
  52:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //					math changed accordingly...
  53:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
  54:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
  55:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // I hereby declare this FPD-Link simulation technique to forever be called
  56:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  PW-BANGing
  57:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
  58:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // a/o 0.10ncf-4: (sdramThing2.0v8-28)
  59:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   DON'T START WITH BLUE_DIAG_BAR
  60:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Unless you want to be depressed
  61:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Good Starting Point DE_BLUE
  62:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
  63:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
  64:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
  65:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // GENERAL TIMING NOTES
  66:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // a/o 0.52ncf-1:
  67:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Upon revisiting an ancient display controller project I did 15 years
  68:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   ago, I'm finding myself falling into similar thought-hurdles I had
  69:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   the first go-round with a graphic LCD display... so here're some
  70:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   concepts:
  71:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
  72:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Most graphical displays without onboard memory have basically these 
  73:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // same signals:
  74:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
  75:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //	Pixel Clock: Each clock-pulse *generally* corresponds to one pixel...
  76:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Whether these clock-pulses are used for drawing actual pixels, or
  77:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   otherwise...
  78:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
  79:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Horizontal Sync: Each time the Hsync pin is active, the display starts a
  80:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // 	new row. It syncs up the pixels horizontally, at the left of the
  81:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // 	screen.
  82:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 124


  83:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (This was one of my biggest mental-hurdles from those old days...
  84:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    aided by the fact that my display's timing-chips had different names
  85:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    for the Pixexl-Clock, Hsync, and Vsync pins.) 
  86:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Hsync is only pulsed *once* at the *beginning* of each row. 
  87:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   It is *not* pulsed with each pixel. It syncs the edge of the
  88:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   pixel-data with the edge of the screen.
  89:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
  90:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Vertical Sync: Each time the Vsync pin is active, the display starts a
  91:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // new frame. It syncs the pixel-data with the top of the screen.
  92:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
  93:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (Data Enable: This tells the (usually LCD) display that actual pixels
  94:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  are now being transmitted. It's a bit redundant, and some displays,
  95:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  especially older non-TFT displays don't even have it. 
  96:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Some newer TFT displays *only* use Data-Enable, determining the
  97:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  horizontal and vertical positions of the pixels based on the delay
  98:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  between Data-Enable pulses).
  99:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 100:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // I can't recall what the names were on my old display... but they were
 101:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // danged confusing. Especially to someone who'd never messed with graphics
 102:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // prior and had to reverse-engineer the whole thing. 
 103:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Oh yes, here they are: CPX, Frame, and Load. 
 104:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 105:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // As far as these three signals (Pixel Clock, Hsync, and Vsync):
 106:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  The actual timing-requirements may vary from display to display.
 107:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  But, it's pretty-well-established that for most displays these signals
 108:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  remain pretty constant. For example, an Hsync pulse may arrive at a
 109:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  specific rate (the duration of a "row"). Vsync, therefore, remains
 110:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  active for a number of "rows", even though no pixel-data is being sent
 111:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  during this time. And, again, even though no pixel-data is being sent,
 112:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  the Hsync pulse still occurs at the same rate it would if pixels were
 113:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  being drawn.
 114:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 115:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  This, I guess, is a remnant of ancient times, probably something to do
 116:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  with analog TV signals... the durations necessary for the electro-
 117:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  magnets to be moved from one side of the screen to the next, and the
 118:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  time necessary to move them again from top-to-bottom.
 119:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 120:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  In this digital era, it doesn't seem these timings would be necessary,
 121:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  and, in fact, most displays I've gotten working are highly tolerant of
 122:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  timing that doesn't match this rigidity.
 123:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 124:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  E.G. my *ancient* LCD project was designed long before I understood
 125:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  these "standard" timing specifications. As I recall, I don't have any
 126:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  delays between the "Frame" signal indicating the beginning of the next
 127:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  frame and the "Load" signal indicating the beginning of the first row
 128:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  of data. Certainly not several "rows" of Frame (aka Vsync)
 129:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  pulse-active.
 130:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 131:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Further, most of these standardized timings involve "porches", both
 132:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  front and back. The "Horizontal Front Porch" is the time between the
 133:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  end of a row and the Hsync signal. The "Horizontal Back Porch" is the
 134:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  time between the Hsync signal and the beginning of the actual 
 135:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  pixel-data. During these "porches", no pixel-data is sent, and the
 136:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Hsync signal is not active. Again, in the digital era these are pretty
 137:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  much unnecessary, but some displays still rely on them, and most
 138:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  specify timing-values for them.
 139:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 125


 140:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 141:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 142:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //new notes a/o 0.10ncf-3ish:
 143:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // The basic idea is that timing is something that needs to be experimented
 144:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // with, often... so, for cases where LCD timing/drawing data is loaded
 145:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // beforehand (e.g. sdramThing2.0-7), it would be nice not to have to
 146:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // reload *all* the data, only to change the necessary timing data
 147:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 148:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Neglecting the SDRAM for a second, we have essentially:
 149:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (The exact placement is not necessarily in order... e.g. DH_DOTS could
 150:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  be at the end of a row, or at the beginning... VSYNC rows could be at
 151:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  the top, or at the bottom.....)
 152:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (See also notes "Here's how it worked pre-lvds:", which actually are a
 153:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   bit off, e.g. I don't think VSYNC L->H was delayed by DE_TIME after
 154:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Hsync)
 155:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 156:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // H_LOW_DOTS + HD_DOTS + DH_DOTS = "Horizontal Blank Time"
 157:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (This "front/back" thing always confused me...
 158:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  DH_DOTS is *in front of* Hsync as far as *time* is concerned...
 159:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  i.e. looking at a 'scope trace... But something about reading left-to-
 160:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  right causes me to feel like "front" is the furthest to the right
 161:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  which would be *later* in time... weird.
 162:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  
 163:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 164:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        |--|<--H_LOW_DOTS                       "Horiz Front Porch"
 165:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        |  |--|<--HD_DOTS="Horiz Back Porch"    |<---->|<--DH_DOTS
 166:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        |  .  .                                 .      |
 167:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        |<............................................./
 168:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        |  .  .                                 .    
 169:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        v  v  .                                 .      
 170:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /V _______________________________________________  \ VSYNC Rows
 171:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /H |__|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 172:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     DE _______________________________________________  /  T_Vlow times)
 173:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              .                                 .
 174:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              .                                 .      "Vsync Back Porch"
 175:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 176:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /H |__|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 177:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     DE _______________________________________________  /  T_VD times)
 178:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              .                                 .         "Vbp should be
 179:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              v                                 v          static"
 180:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              ***********************************
 181:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *                                 *
 182:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 183:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /H |__|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 184:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     DE ______|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|______   /
 185:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *                                 *
 186:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *<------ DE_ACTIVE_DOTS --------->*        (Repeat V_COUNT
 187:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *      .                          *         =1024 times)
 188:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                     .   Displayed Pixels
 189:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *      .                          *
 190:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *                                 *
 191:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *                                 *
 192:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 193:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /H |__|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 194:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     DE ______|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|______   /
 195:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *                                 *
 196:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              ***********************************      
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 126


 197:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                                                      "Vsync Front Porch"
 198:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 199:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /H |__|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 200:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     DE _______________________________________________  /  T_DV times)
 201:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 202:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 203:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #warning "TODO Maybe: LCDdirectLVDS (which so far is the only version which synced with such low re
 204:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 205:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Front vs. Back porches....
 206:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   If I were to draw a car driving down a street... 
 207:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   I would draw it with its front to the right, driving to the right...
 208:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 209:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       _____/¯¯¯¯\________     \O/
 210:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   ...|__   _________   __\     |
 211:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      ...\_/         \_/       / \							//
 212:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 213:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   The person is *in front of* the car... which means the car has not yet
 214:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   arrived at the person, but will soon... 
 215:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (later in time, not *before* in time)
 216:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  This is my logic...
 217:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   So The "Horizontal Front Porch", to me, should be to the RIGHT of the
 218:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Horizontal Sync Pulse...
 219:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   But that ain't how it is (unless I've confused myself into a circle
 220:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   where my logic is actually right, and I just think it's wrong?)
 221:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   
 222:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  By the logic that the front porch occurs *before* the sync pulse,
 223:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   ... I suppose we could think of a person in front of a house... it
 224:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   makes more sense, anyhow, since it's a porch in front of a house, 
 225:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   not person in front of a car.
 226:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   The person's walking into the house, crosses the *front*-porch 
 227:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   *before* enterring the doorway. If he continues walking all the way
 228:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   through the house and out the back-door, he'll be crossing the *back*
 229:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   porch later in time...
 230:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 231:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Right, so the logic makes sense... but for some reason I have to run 
 232:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  through this whole diatribe every time I see the terms.
 233:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Heh, and even after going through it, the damned thing seems backwards.
 234:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (Probably because I drew it with the front-porch to the right side...)
 235:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (AND THEN there's the issue that it seems to me like the front-porch
 236:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   should be to the left of the drawing-area whereas the back-porch
 237:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   should be to the right of it... rather than to the HSYNC pulse)
 238:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 239:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 240:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Anyways, all that drawing was to figure out where to position this
 241:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // in memory, such that it would be the least processing-effort to modify
 242:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // timing values for testing... (because loading the SDRAM's free-running 
 243:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // data takes ~20minutes!)
 244:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 245:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 246:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 247:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Options LTN, IDT, or TESTVALS
 248:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // IDT display *still* doesn't sync... maybe my H/V signals aren't right
 249:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef DISPLAY
 250:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DISPLAY TESTVALS //LTN //TESTVALS //IDT //LTN
 251:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 252:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 253:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //oldNote:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 127


 254:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // TODO: Between OSCCAL_VAL and FRAME_UPDATE_DELAY
 255:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  it seems the speed (at least for the LTN) isn't so important after all
 256:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  This could be used to my advantage...
 257:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Maybe bump OSCCAL_VAL all the way up, but use a slower "bit-rate"
 258:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Thus, pixels could be skinnier, thus higher-resolution.
 259:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Or more instructions could be used for the same resolution
 260:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   allowing, e.g. sprites from program-memory, without necessitating a
 261:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   large (or any?) frame-buffer...
 262:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 263:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 264:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //This would normally be 0 for the highest-speed frame-refresh possible
 265:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // However, increasing this value can slow the frame-refresh rate
 266:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   if desired
 267:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // e.g. 50000 causes it to refresh ~ every few seconds
 268:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (durn-near the limit for how long the LCD will retain an image)
 269:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // The benefit being that it doesn't flicker at annoying rates for
 270:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  stationary images
 271:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  worth exploring...
 272:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This may be highly dependent on the screen capabilities...
 273:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   of course, this sorta thing is undocumented
 274:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   it just has to be experimented with
 275:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Further, it may be quite hard on the Liquid Crystals, since they'd 
 276:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   likely be driven DC... not sure what the long term effects are.
 277:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This could be a hell of a lot more sophisticated...
 278:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // e.g. refresh after a frameBuffer change
 279:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      refresh based on a seconds-timer
 280:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      ...
 281:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // AS-IS: Does refreshes completely independent of the frame-buffer
 282:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      if it's too slow, some images may be missed completely.
 283:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      This is not true for FRAME_SYNC TRUE (below)
 284:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      (and it's not really useful anymore with FRAME_SYNC)
 285:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // a/o sdramThing2.0, this is not really relevent...
 286:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // 	if the frame needs updating, just stop free-running, right?
 287:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // 	well, doing-so might cause issues, since the LVDS clock will not be
 288:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    running... this is a TBD
 289:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define FRAME_UPDATE_DELAY 0//5000//50000 //2000 //5000 //20000 //50000
 290:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 291:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 292:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //New Idea:
 293:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Disable the Hsync timer interrupt after the frame completes
 294:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  and reenable elsewhere...
 295:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (It seems pixels changing from one shade to another take an
 296:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   intermediate step halfway between)
 297:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (Thus, two updates then a pause might clear that up)
 298:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (Duh... it doesn't clear that up, because the fastest refresh rate
 299:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   is the same...)
 300:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (but it is an interesting effect)
 301:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (Double-Duh... I was using a slow refresh with FRAME_UPDATE_DELAY)
 302:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Reworded: Having several frame refreshes before a pause helps to
 303:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  "solidify" the color changes... especially the sharp changes 
 304:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (e.g. yellow<->black)
 305:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (Side Note: I saw this effect on a regular (NON-LVDS) TFT display 
 306:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   in LCDdirect that was only connected such that R, G, and B were each
 307:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   either full-off or full-on, i.e. all Red bits were connected to a
 308:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   single output pin (full on when 1, full off when 0).
 309:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   I hadn't attributed it to improper refresh synchronization
 310:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   as the refresh rate was too fast to see... That's a handy way to get
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 128


 311:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   intermediate shades/colors without refresh-flicker from pulsing them!)
 312:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  connected with each color 
 313:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  0 means no delay (except FRAME_UPDATE_DELAY) via interrupt disabling
 314:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  If you WANT this effect (for intermediate shades?) 
 315:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   set FRAME_COUNT_TO_DELAY to 1
 316:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Then, each change of color will (apparently) result in a value halfway
 317:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   between the old color and the new color
 318:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Not sure whether it's an electrical problem, but these half-shades 
 319:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   appear dithered, sometimes ugilly, sometimes it's nice. I guess it
 320:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   depends on the goal...
 321:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define FRAME_COUNT_TO_DELAY 2//7//1//5//2//3
 322:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 323:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 324:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //A/O v13: Using the Samsung LTN display, instead of the IDTech IAXG
 325:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // LTN appears to be content with my pseudo-LVDS scheme.
 326:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // IAXG has never unblanked
 327:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      Even though suitable timings were found with SwitchResX
 328:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      Maybe due to psuedo-LVDS
 329:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            slight timing issues // It probably doesn't work with all cases...
 330:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Definitely with drawPix/Images...(RC oscillator variances?)
 331:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            glitches when switching LVDS states 
 332:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 (thought I had that figured out, originally)
 333:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      The fact the LTN appears to recognize the signalling suggests the
 334:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      IAXG would be worth further exploration...
 335:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //         Unfortunately, the CCFT blew out my inverter
 336:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                        And I must have put it back together incorrectly
 337:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                        (backlight filters out of order or flipped?)
 338:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                        (which actually makes for some very interesting
 339:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                         visuals, but hard to develop with)
 340:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      IAXG: uses DE, V, and H
 341:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             At low pixel-clock DE is active for fewer pixels...
 342:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              Last Tested: 680 was full-screen
 343:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             Nice because it increases the frame-rate!
 344:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      LTN:  uses DE only
 345:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 346:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 347:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // The idea is to use FastPWM with the PLL to implement 64-85Mbits/sec
 348:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (the PLL on the Tiny861 supposedly maxes out at 85MHz)
 349:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (Though I am currently running with OSCAL set to the highest frequency
 350:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   and the PLL seems to be syncing at about 128MHz)
 351:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (New Note, a/o sdramThing2.0v5... it's kinda ironic that I was able to
 352:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   run it at 128MHz with nothing more than an AVR and some gates...
 353:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   seeing as how sdramThing has been fidgetty just running at 8MHz
 354:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Anyways, an eventual goal is to run at 133MHz+, using basically
 355:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   nothing more than the SDRAM itself for timing and refreshes...
 356:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   would allow for full resolution and full color-depth)
 357:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 358:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 359:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 360:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 361:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Wiring:
 362:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Many iterations of AVR->Differential "LVDS" circuitry resulted in the
 363:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   simplest of all:
 364:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 365:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Believe it or not, the XOR is a standard TTL LS-series XOR: 74LS86
 366:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     Specifically: TI SN74LS86N from 1980 (the only XOR in my collection)
 367:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   It's spec'd to run from 4.5-5.5V, and its propagation delays and slew
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 129


 368:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     rates aren't really spec'd to be good enough for 128MHz pixel clock
 369:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     yet it's working...
 370:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Further, the output voltages are right in the LVDS range,
 371:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     IIRC (last I 'scoped) around 1.5V High and 1.0V Low
 372:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      (Don't forget the LCD has a 100ohm resistor between
 373:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //         RXinN/clk+ and RXinN/clk-)
 374:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 375:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   It's probably best to use two XORs from the same chip for a single
 376:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    LVDS channel, since different chips may have slightly different
 377:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    characteristics. 
 378:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 379:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   The entire circuit, thus, requires TWO 74LS86's 
 380:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    (four XORs apiece, two per LVDS channel, 8-total)
 381:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 382:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 383:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              VCC3V3   VCC3V3
 384:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                |        |                           ______________
 385:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                +---\ \¯¯¯-_                        |  LCD (1 channel
 386:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                     | |    ¯-                      |       of 4)
 387:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                     | | XOR   >------> RXinN/clk-  | ----.
 388:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   AVR, etc.         | |    _-                      |     |
 389:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   3.3V TTL >---+---/ /___-¯                        |     \ 100
 390:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   output       |                                   |     /
 391:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                |                                   |     \ ohms
 392:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                |                                   |     /
 393:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                `---\ \¯¯¯-_                        |     |
 394:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                     | |    ¯-                      |     |
 395:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                     | | XOR   >------> RXinN/clk+  | ----'
 396:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                     | |    _-                      |
 397:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                +---/ /___-¯                        |
 398:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                |        |                          |
 399:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //               GND      GND
 400:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 401:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  
 402:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Also used: The TTL 74AHC series...
 403:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    I found some one-gang 74AHC1G32 and 74AHC1G86's on an old iBook
 404:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     motherboard. (An OR and an XOR, respectively). These are spec'd for
 405:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     3.3V operation, and faster. The output voltages appear OK for LVDS
 406:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     (with a 100ohm load in the LCD)
 407:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 408:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  NOTE: Since I only had enough of these 1-gang devices for two LVDS
 409:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     channels, I had to implement Red and Green with the LS 
 410:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     before switching all channels to the LS... Using different chips
 411:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     (specifically, different TYPES of chips) for different channels
 412:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     caused timing issues: Since the AHC is faster, the clock and Blue
 413:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     signals are synchronized, but the red and green signals were shifted
 414:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     a bit or two (resulting in "Black" appearing green)
 415:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 416:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  For other circuits attempted, see oldNotes.txt
 417:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     (and boy there were many, involving voltage dividers, AC coupling,
 418:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      reference voltages, BJT differential amplifiers... I doubt I 
 419:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      documented them all, or even most. Whoda thunk the simplest, 
 420:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      especially under- AND over-spec'd--timing, supply voltage, and
 421:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      output voltage--would be the one...?)
 422:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 423:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // LVDS/FPD-Link timing:
 424:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 130


 425:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |<--- (LCDdirectLVDS: "pixel") --->|
 426:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Timer1:   |<-- One Timer1 Cycle (OCR1C=6) -->|
 427:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  TCNT:     |  0   1    2    3    4    5    6  |  0   1    2    3    
 428:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |____.____.____.____               |____.____.____.____
 429:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  RXclk+:   /         |         \    .    .    /         |         \ //
 430:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |         |          ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|         |
 431:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // One Pixel: |         |<--- One FPD-Link Pixel Cycle --->|
 432:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |                                  |
 433:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // "Blue/DVH" |____ ____v____ ____ ____v____ ____|____ ____
 434:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  RXin2:    X B3 X B2 X DE X /V X /H X B5 X B4 X B3 X B2 X ...
 435:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯
 436:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |         |<--Not Blue-->|         |
 437:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |                                  |
 438:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // "Green"    |____ ____v____ ____v____ ____ ____|____ ____
 439:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  RXin1:    X G2 X G1 X B1 X B0 X G5 X G4 X G3 X G2 X G1 X ...
 440:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯ 
 441:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |         |<------->|-Not Green    |
 442:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 443:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // "Red"      |____ ____v____v____ ____ ____ ____|____ ____
 444:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  RXin0:    X R1 X R0 X G0 X R5 X R4 X R3 X R2 X R1 X R0 X ...
 445:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯
 446:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |         |<-->|-Not Red
 447:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 448:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Of course: The "Not Green/Red" bits above are least-significant-bits
 449:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              and basically have little/no visible effect
 450:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 451:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 452:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Implementations/prospects:
 453:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  * rowBuffer.c (more like row-settings-buffer)
 454:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     calculate a row's worth of pixels before drawing that row
 455:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     (uses packed color settings in a single byte per drawable pixel)
 456:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     64 drawable pixels across, regardless of LVDS speed
 457:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  * For faster pixels: these settings values could be stored 
 458:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     in individual bytes. Gives about 1/3 more pixels at 3x the memory
 459:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     (not implemented)
 460:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  * rowSegBuffer.c
 461:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     also calculates an entire row before drawing it
 462:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     instead of storing pixels, store "segments"
 463:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     i.e. each segment is defined by a color value and a length
 464:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     Number of segments is limited only by memory...
 465:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      e.g. 64 segments per row (max) is 64*3Bytes
 466:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       Three bytes for color, and *really simple* packing for seg-length
 467:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      BUT: at slow LVDS speeds, the resolution of these segments could be
 468:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       as high as one LCD pixel.
 469:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      possibly: at *really* low LVDS speeds we could be 64*2Bytes
 470:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      (with packing)
 471:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      Actually: Using GB_COMBINED gives 2Bytes per segment
 472:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      only adds two clock cycles to each "pixel", so probably worth it
 473:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 474:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   In Any Case: There's not enough RAM for a full frame
 475:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          64 pixels across * 64 pixels down is 4096 bytes
 476:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          So whatever method, we need to precalculate each row before
 477:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          displaying it
 478:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          Could be as simple as loading direct from program memory
 479:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 480:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 481:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Since low-bits are barely visible, their effect is neglected.
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 131


 482:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 483:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 484:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE/V/H Timing (LCDdirectLVDS):
 485:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  
 486:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 487:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |  0   1    2    3    4    5    6       All: set @ 0
 488:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |____.____.____.____                         OCR1C = 6 
 489:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Clock:    /                   \    .    .    /         Complementary-
 490:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                                 ¯¯¯¯ ¯¯¯¯ ¯¯¯¯          Output Mode
 491:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                                                          required for DT
 492:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Signal:    B3   B2   DE   /V   /H   B5   B4 | B3
 493:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ____ ____ ____ ____ ____ ____ ____|____    
 494:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   DE:      X B3 X B2 /    .    .    \ B5 X B4 X B3 X    
 495:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   state2    ¯¯¯¯ ¯¯¯¯                ¯¯¯¯ ¯¯¯¯|¯¯¯¯    
 496:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   DE_BLUE: >¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|    DT=X, OCR=0
 497:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                         Watch the transition!! -------^
 498:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   DE_NORM: >_________/¯¯¯¯¯¯¯¯¯¯¯¯¯¯\_________|    DT=2, OCR=4
 499:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   DC_DISABLED:
 500:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   maxBlue: >¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯\____|		DT=0, OCR=5
 501:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             See below for more blue settings...
 502:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 503:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ____ ____      ____      ____ ____|____ 
 504:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H (only): X xx X xx \    /    \    / xx X xx X xx X    
 505:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   state1    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯      ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ 
 506:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            >______________/¯¯¯¯\______________|    DT=3, OCR=3
 507:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  DC_DISABLED:
 508:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Not much can be done...
 509:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 510:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ____ ____           ____ ____ ____|____ 
 511:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V w/o H:  X xx X xx \    .    /    \ xx X xx X xx X
 512:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   state3    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯      ¯¯¯¯ ¯¯¯¯|¯¯¯¯
 513:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            >___________________/¯¯¯¯\_________|    DT=4, OCR=4 (+?)
 514:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DC_DISABLED:
 515:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            >___________________/¯¯¯¯¯¯¯¯¯\____|		DT=4, OCR=5
 516:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 517:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ____ ____                ____ ____|____ 
 518:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V w/ H:   X xx X xx \    .    .    / xx X xx X xx X
 519:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   state4    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ 
 520:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            >__________________________________|    DT=X, OCR=0
 521:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                             TransitionWatch!!! -------^
 522:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                             Shouldn't matter... DT from no-edge
 523:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DC_DISABLED:
 524:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            >¯¯¯¯¯¯¯¯¯\________________________|		DT=0, OCR=1
 525:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 526:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ____ ____      ____ ____ ____ ____|____ 
 527:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Nada:     X xx X xx \    /    .    \ xx X xx X xx X    
 528:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   state0    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯           ¯¯¯¯ ¯¯¯¯|¯¯¯¯     
 529:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            >______________/¯¯¯¯¯¯¯¯¯\_________|    DT=3, OCR=4 (+?)
 530:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DC_DISABLED:
 531:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            >______________/¯¯¯¯¯¯¯¯¯¯¯¯¯¯\____|		DT=3, OCR=5
 532:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 533:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //So far this is the only case I've seen:
 534:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // /Vsync
 535:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef VSYNC_ACTIVE
 536:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define VSYNC_ACTIVE		0
 537:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 538:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef VSYNC_INACTIVE
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 132


 539:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define VSYNC_INACTIVE	1
 540:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 541:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // /Hsync
 542:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef HSYNC_ACTIVE
 543:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define HSYNC_ACTIVE		0
 544:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 545:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef HSYNC_INACTIVE
 546:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define HSYNC_INACTIVE	1
 547:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 548:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE (active high)
 549:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef DE_ACTIVE
 550:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DE_ACTIVE			1
 551:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 552:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef DE_INACTIVE
 553:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DE_INACTIVE		0
 554:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 555:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 556:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // HERE!
 557:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 558:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 559:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 560:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 561:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Transitions: OLD!!!!! WRONG!!!!
 562:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (are they? There're several additional transitions, now, for one.)
 563:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  The idea is to reduce the number of instructions between each
 564:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  LVDS "state."
 565:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  These are implemented below in the case:
 566:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    "#else //NOT FULL_INIT_TESTS"
 567:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Since each instruction takes *longer than* a single pixel
 568:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    two instructions would *at best* occur on two consecutive pixels
 569:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    Thus, there's likely to be a transition-glitch
 570:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    (e.g. old OCR value with new DT value)
 571:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Note that the new DT values are implemented at the next corresponding
 572:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    edge after the DT-write instruction completes
 573:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    (for +OC1A/DT1H, when TCNT is reset to 0)
 574:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    (for -OC1A/DT1L, when TCNT passes OCR1A)
 575:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    New OCR values are delayed until the next TCNT reset to 0
 576:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 577:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Initial:
 578:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Nada					DT=2  NADA_OCR = (3<=OCR<(=?)6)
 579:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 580:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Nada	->	H			OCR=2
 581:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H		->	Nada		OCR=NADA_OCR
 582:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  
 583:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Nada	->	V			DT=3
 584:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V		->	V+H		OCR=0
 585:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V+H	->	V			OCR=NADA_OCR
 586:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V		->	Nada		DT=2
 587:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 588:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Nada	->	DE			DT=1
 589:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  DE	->	Nada		DT=2
 590:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 591:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0
 592:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (defined(REMOVE_DC) && REMOVE_DC)
 593:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define Nada_init()         { DT1=(3<<4); OCR1A=5; }
 594:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 595:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //Unused, normally...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 133


 596:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define Vsync_init()       { DT1=(4<<4);  OCR1A=5; }
 597:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define VplusH_init()      { DT1=0;       OCR1A=1; }
 598:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define Hsync_init()       { DT1=(3<<4);  OCR1A=3; }
 599:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DEonly_init()      { DT1=(2<<4);  OCR1A=4; }
 600:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DEblue_init()		 { DT1=0;       OCR1A=5; }
 601:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 602:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else //!REMOVE_DC
 603:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Nada init
 604:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define Nada_init()         { DT1=(3<<4); OCR1A=4; }
 605:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 606:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Unused, normally...
 607:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define Vsync_init()			{ DT1=(4<<4);	OCR1A=4; }
 608:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define VplusH_init()		{ DT1=0;			OCR1A=0; }
 609:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define Hsync_init()			{ DT1=(3<<4);	OCR1A=3; }
 610:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // #define DE_init()				{ DT1=(2<<4);	OCR1A=4; } //...SHOULD BE
 611:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DEonly_init()			{ DT1=(2<<4);  OCR1A=4; }
 612:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DEblue_init()			{ DT1=0;       OCR1A=6; }
 613:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define DE_init()				{ DT1=(1<<4);	OCR1A=2; } //Works with DE_ONLY
 614:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //#define DE_init()				{ DT1=0;			OCR1A=0xff; }	//DE_BLUE
 615:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif //REMOVE_DC
 616:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 617:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 618:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define FULL_INIT_TESTS TRUE
 619:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 620:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Display is DE-Only (doesn't use H/Vsync)
 621:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Shouldn't be necessary to select this if it is,
 622:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // since DE timing is the same either way
 623:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // but I want to test whether a single-bit is being detected
 624:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (e.g. maybe the rise/fall-times of the output aren't fast enough for a
 625:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  single bit, which might explain why the other display didn't work)
 626:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //These are just examples... the project should define them:
 627:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0
 628:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (defined(DE_ONLY_DISPLAY) && DE_ONLY_DISPLAY)
 629:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Vsync_fromNada()      Nada_init()
 630:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define VplusH_fromVsync()    Nada_init()
 631:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Vsync_fromVplusH()    Nada_init()
 632:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromVsync()      Nada_init()
 633:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Hsync_fromNada()      Nada_init()
 634:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromHsync()      Nada_init()
 635:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DEonly_fromNada()     DE_init()
 636:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DEblue_fromDEonly()	DE_init()
 637:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromDEblue()		Nada_init()
 638:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #if(DE_BLUE)
 639:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "DE_BLUE is true, but not implemented with DE_ONLY_DISPLAY"
 640:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "...The display should be blank"
 641:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #endif
 642:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Use full initialization of each LVDS state
 643:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (might not be good during transitions, but should guarantee
 644:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  steady-state, in case my transitions aren't correct...)
 645:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (defined(FULL_INIT_TESTS) && FULL_INIT_TESTS)
 646:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Vsync_fromNada()		Vsync_init()
 647:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define VplusH_fromVsync()		VplusH_init()
 648:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Vsync_fromVplusH()		Vsync_init()
 649:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromVsync()		Nada_init()
 650:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Hsync_fromNada()		Hsync_init()
 651:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromHsync()		Nada_init()
 652:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DEonly_fromNada()		DEonly_init()
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 134


 653:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DEblue_fromDEonly()	DEblue_init()
 654:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromDEonly()		Nada_init()
 655:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromDEblue()		Nada_init()
 656:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 657:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 658:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else	//NOT FULL_INIT_TESTS
 659:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define Vsync_fromNada()   { DT1=(4<<4); }
 660:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Vsync_fromNada()   { DT1=(4<<4); OCR1A=5; } //Leave two bits high
 661:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 																	 //for easy-scoping
 662:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 						//Three would be nicer, but I'm pretty sure OCR=TOP=ON
 663:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define VplusH_fromVsync() { OCR1A=0; }
 664:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define Vsync_fromVplusH() { OCR1A=4; }
 665:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Vsync_fromVplusH() { OCR1A=5; }				//Extra bits for scoping
 666:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define Nada_fromVsync()   { DT1=(3<<4); }
 667:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromVsync()   { DT1=(3<<4); OCR1A=4; } //scoping...
 668:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Hsync_fromNada()   { OCR1A=3; }
 669:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromHsync()   { OCR1A=4; }
 670:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 671:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromDEblue()	{ DT1=(3<<4); OCR1A=4; }
 672:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromDEonly()	{ DT1=(3<<4); }
 673:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DEonly_fromNada()	{ DT1=(2<<4); }
 674:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DEblue_fromNada()	{ OCR1A=0xff; }
 675:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DEblue_fromDEonly() { OCR1A=0xff; }
 676:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 677:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif //End Of FULL_INIT_TESTS
 678:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 679:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 680:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 681:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 682:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // The typical patterns look like this (not at all to scale):
 683:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   ----______------------------------------------------______-- V
 684:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ....
 685:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      --_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_ H
 686:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ....
 687:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      __________-__-__-__-__-__-__-__-__-__-__________________  DE
 688:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 
 689:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ^^^^\														//blah
 690:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             1234 5?
 691:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Pixels are sent during DE High (basically all the CPU will be used here)
 692:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Ideally, 
 693:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  there won't be any glitches when changing from one state to another
 694:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 695:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Init (pre 1):
 696:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    DeadTimerRising=1
 697:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 698:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  The states are:
 699:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (Not necessarily accurate, just looking into necessary changes)
 700:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (from Vsync L->H)
 701:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 702:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   1  NothingActive (long, No DE, VporchFrontTimes)
 703:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 704:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   2  Hsync
 705:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 706:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   3  NothingActive (short)
 707:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 708:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   4  DE
 709:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 135


 710:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   5  NothingActive(?)
 711:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 712:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   7  Repeat 2-5 for each row
 713:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 714:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   8  NothingActive (long, No DE, VporchBackTimes)
 715:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 716:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   9  V w/o H
 717:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 718:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   10 V w/  H
 719:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 720:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   11 Repeat 9-10 for Vsync time...
 721:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 722:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 723:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Here's how it worked pre-lvds:
 724:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // HSYNC, VSYNC, and DE refer to the actual pins
 725:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // In the LVDS setup, there're modes corresponding to each pin-combination
 726:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 727:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Timer Interrupt:
 728:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  loadData:
 729:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   HSYNC active
 730:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   HSYNC Low delay
 731:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   HSYNC inactive
 732:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   if(dataEnable)
 733:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    DE active
 734:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     Send row data
 735:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    DE inactive
 736:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  //Prep for next interrupt
 737:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  switch(hsyncCount++)
 738:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    //Vsync H->L (active)
 739:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    1:
 740:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          dataEnable=FALSE
 741:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          VSYNC active
 742:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    //Vsync L->H (inactive)
 743:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    T_Vlow:
 744:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          VSYNC inactive
 745:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    //Start of frame
 746:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    T_VD +(T_Vlow):
 747:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          dataEnable=TRUE
 748:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    //All rows have been displayed
 749:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    V_COUNT +(T_VD+T_Vlow):
 750:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          dataEnable=FALSE
 751:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    //Frame Complete
 752:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    T_DV +(V_COUNT+T_VD+T_Vlow): 
 753:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          hsyncCount=0
 754:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  if(dataEnable)
 755:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    Use the remaining time to load the next row to memory
 756:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 757:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  So:
 758:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Interrupt0       End
 759:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |  Interrupt1
 760:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v  v
 761:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 762:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___________________________________________________ ...
 763:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯|_____________________________________ ...
 764:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       |        ||
 765:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DETIME^--------^|
 766:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 |
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 136


 767:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 VSYNC active
 768:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 dataEnable=FALSE (not necessary?)
 769:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 770:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptT_Vlow   End
 771:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |
 772:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v
 773:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 774:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___________________________________________________ ...
 775:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V _____________|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ ...
 776:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       |        ||
 777:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DETIME^--------^|
 778:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 |
 779:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 VSYNC inactive
 780:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 781:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 782:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptT_VD   End  InterruptT_VD+1
 783:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |  |            End
 784:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v  v            v
 785:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 786:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ____________________|¯¯¯¯¯¯¯¯|_______|¯¯¯¯¯¯¯¯|____ ...
 787:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 788:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       |        ||      |        |
 789:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DETIME^--------^|      ^--------^
 790:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 |
 791:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 dataEnable=TRUE
 792:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 793:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptV_COUNT  End
 794:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |
 795:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v
 796:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 797:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___|¯¯¯¯¯¯¯¯|______________________________________ ...
 798:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 799:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       |        ||      |        |
 800:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DETIME^--------^|      ^--------^
 801:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 |
 802:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 dataEnable=FALSE
 803:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 804:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 805:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This isn't really a state, it's basically just:
 806:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // if(hsyncCount == NUM_HYSYNCS_PER_FRAME)
 807:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    hsyncCount = 0;
 808:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                    .....................................
 809:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                    .                                   .
 810:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptT_DV   End .Interrupt0                         .
 811:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             | .|                                  .
 812:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v .v                                  .
 813:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 814:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___________________________________________________ .
 815:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|____________________ .
 816:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       |        ||  .   |        |                      .
 817:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DETIME^--------^|  .   ^--------^                      .
 818:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 |  .                                   .
 819:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 hsyncCount=0 (repeat from Interrupt0)  .
 820:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                    .                                   .
 821:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                    .....................................
 822:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 823:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 137


 824:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 825:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // THESE STATES ARE NO LONGER ACCURATE
 826:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // ESPECIALLY THIS FIRST STATE.
 827:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // V Front Porch originally (and in these drawings) occurred at the end
 828:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // of the frame...
 829:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // More logically, it now starts at the beginning of the frame
 830:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (Also removing this initial "glitch" of a single interrupt with
 831:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  NothingActive)
 832:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 833:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // THESE STATES ARE NO LONGER ACCURATE (a/o 0.30, for certain)
 834:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // NOW to compare with LVDS states:
 835:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 836:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Interrupt0       End
 837:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |  Interrupt1
 838:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v  v
 839:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 840:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___________________________________________________ ...
 841:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯|_____________________________________ ...
 842:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    ^ ^          ^   ^ ^
 843:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |   | |
 844:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |   | +--- V w/o H  \ These two toggle until
 845:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |   +----- V w/ H   / next LCD state...
 846:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |
 847:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          +--------- V w/o H > Intermediate change of state
 848:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |
 849:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | +----- NothingActive  \ From Previous State (?)
 850:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    +------- H_Only         /
 851:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 852:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 853:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptT_Vlow   End
 854:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |
 855:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v
 856:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 857:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___________________________________________________ ...
 858:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V _____________|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ ...
 859:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    ^ ^          ^   ^ ^
 860:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |   | |
 861:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |   | +--- NothingActive  \ These two toggle until
 862:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |   +----- H_Only         / next LCD state...
 863:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |
 864:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          +--------- NothingActive > Intermediate change of state
 865:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |
 866:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | +----- V w/o H   \ From previous state
 867:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    +------- V w/ H    /
 868:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 869:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 870:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptT_VD   End  InterruptT_VD+1
 871:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |  |            End
 872:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v  v            v
 873:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 874:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ____________________|¯¯¯¯¯¯¯¯|_______|¯¯¯¯¯¯¯¯|____ ...
 875:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 876:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    ^ ^              ^ ^^        ^ 
 877:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |              | ||        |
 878:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |              | ||        +--- NothingActive  \  These four
 879:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |              | |+------------ DE              | cycle until
 880:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |              | +------------- NothingActive   | next LCD state...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 138


 881:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |              +--------------- H_Only  ^      /
 882:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |                                       |
 883:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | +----- NothingActive  \ From previous   |
 884:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    +------- H_Only         / state           +-This intermediate state
 885:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                                                may not be necessary
 886:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                                                (IAXG01 shows 160 dots!)
 887:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 888:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 889:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 890:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptV_COUNT  End
 891:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |
 892:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v
 893:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 894:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___|¯¯¯¯¯¯¯¯|______________________________________ ...
 895:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 896:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    ^ ^^        ^    ^ ^
 897:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | ||        |    | |
 898:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | ||        |    | +--- NothingActive \  These two toggle
 899:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | ||        |    +----- H_Only        /  until next LCD state
 900:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | ||        |
 901:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | ||        +---- NothingActive \ 								//blah
 902:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |+------------- DE             |  From previous state
 903:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | +-------------- NothingActive  |
 904:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    +---------------- H_Only        /
 905:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 906:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This isn't really a state, it's essentially just:
 907:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  if(hsyncCount == NUM_HSYNCS_PER_FRAME)
 908:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    hsyncCount = 0;
 909:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                    .....................................
 910:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                    .                                   .
 911:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptT_DV   End .Interrupt0                         .
 912:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             | .|                                  .
 913:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v .v                                  .
 914:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 915:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___________________________________________________ .
 916:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|____________________ .
 917:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    ^ ^             .                                   .
 918:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |             .....................................
 919:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | +--- NothingActive \											//blah
 920:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    +----- H_Only        / From previous state...
 921:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 922:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 923:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 924:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  LVDS State transitions:
 925:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   1 H_Only
 926:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   2 NothingActive
 927:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 928:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   3 V w/o H
 929:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   4 V w/ H
 930:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    
 931:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (repeat 3,4)
 932:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 933:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   5 V w/o H
 934:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 935:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   6 NothingActive
 936:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   7 H_Only
 937:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 139


 938:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (repeat 6,7)
 939:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 940:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   8 NothingActive
 941:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 942:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   9 H_Only
 943:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  10 NothingActive
 944:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  11 DE
 945:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  12 NothingActive
 946:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 947:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (repeat 9-12)
 948:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 949:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  13 H_Only
 950:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  14 NothingActive
 951:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 952:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (repeat 13-14)
 953:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 954:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   These should be reviewed to determine which changes are necessary
 955:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   between each state...
 956:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (the fewer changes, the less likely we'll glitch...?)
 957:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 958:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 959:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void lcd_Init(void)
 960:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
 3636               		.stabn	68,0,960,.LM447-.LFBB16
 3637               	.LM447:
 3638               	.LFBB16:
 3639               	/* prologue: function */
 3640               	/* frame size = 0 */
 3641               	/* stack size = 0 */
 3642               	.L__stack_usage = 0
 961:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  	Nada_init();
 3643               		.stabn	68,0,961,.LM448-.LFBB16
 3644               	.LM448:
 3645 0c92 AD9A      		sbi 0x15,5
 3646 0c94 82E0      		ldi r24,lo8(2)
 3647 0c96 90E0      		ldi r25,0
 3648 0c98 9093 6500 		sts 100+1,r25
 3649 0c9c 8093 6400 		sts 100,r24
 3650 0ca0 84E0      		ldi r24,lo8(4)
 3651 0ca2 90E0      		ldi r25,0
 3652 0ca4 9FBD      		out 0x2e+1,r25
 3653 0ca6 8EBD      		out 0x2e,r24
 3654 0ca8 AD98      		cbi 0x15,5
 3655 0caa 0895      		ret
 3656               		.size	lcd_Init, .-lcd_Init
 3657               	.Lscope16:
 3658               		.stabs	"",36,0,0,.Lscope16-.LFBB16
 3659               		.stabd	78,0,0
 3660               		.stabs	"updateLCD:F(4,2)",36,0,1254,updateLCD
 3661               	.global	updateLCD
 3662               		.type	updateLCD, @function
 3663               	updateLCD:
 3664               		.stabd	46,0,0
 962:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
 963:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 964:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 965:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define TESTVALS	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 140


 966:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define LTN 1
 967:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define IDT 2
 968:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 969:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 970:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //TIMING:
 971:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Measurements below (in microseconds) are referring to preLVDS
 972:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  There may be other such old-notes...
 973:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 974:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 975:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        |<--T_Hhigh-->| |<-T_Hlow
 976:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    __   _____________   ____________  3.6V
 977:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // H    |_|             |_|           _  0V
 978:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 979:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    Data Enable
 980:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       Only active when there's valid pixel data
 981:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       (For a dual-pixel 1024x768 display:
 982:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //         for 512 of the 717 clocks in HSYNC-active)
 983:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       Low during Vsync... (~720us)
 984:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 985:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 986:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //IDTech display: 136 dots
 987:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //2-136+
 988:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //IDTech, last used: 40
 989:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //LTN Last used 8
 990:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // LTN: 1072<=1344<=1500 clocks per line, 1024DE... Hsync unused
 991:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // SEE Hlow_Delay() notes if this value is large!
 992:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 993:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef H_LOW_DOTS
 994:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
 995:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define H_LOW_DOTS	8
 996:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
 997:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define H_LOW_DOTS   40//8//1//40 //30 //2//136
 998:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
 999:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define H_LOW_DOTS	100//0 //LTN doesn't use H_LOW (DE-only)
1000:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 							  // And having a value here increases codesize
1001:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1002:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1003:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1004:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //H is set low immediately upon entry of the timer interrupt
1005:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // its low-time is controlled via nops
1006:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (so if HLow is long for a particular display, this might need revising)
1007:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1008:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if((!defined(HLOW_DELAY_OVERRIDE) || !HLOW_DELAY_OVERRIDE) \
1009:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		                                         && !defined(Hlow_Delay))
1010:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define Hlow_Delay() \
1011:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	delay_Dots(H_LOW_DOTS)
1012:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1013:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1014:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1015:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1016:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1017:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //This was found expermentally with SwitchResX
1018:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //IDTech Last Used: 680
1019:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (IDTech had some oddities regarding slow pixel-clocks, where pixels
1020:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  would be repeated, regardless of the pixel-clock, thus, for slow clocks
1021:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  it has the effect of *stretching* the image, thus 680 "pixels" across
1022:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  instead of its 1024 *physical* pixels)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 141


1023:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //LTN last used 1024
1024:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Oddly: For the LTN, this doesn't seem to affect the horizontal
1025:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        it does, however, affect the vertical(!)
1026:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // If I recall Correctly, this is used only for setting the timer interrupt
1027:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  rate...
1028:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1029:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DE_ACTIVE_DOTS	1024
1030:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1031:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DE_ACTIVE_DOTS	680 //1024 //800 //920 //943 //812 //472 //1024
1032:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1033:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DE_ACTIVE_DOTS	1024
1034:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1035:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1036:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1037:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Horizontal Blank Time: HD_DOTS + H_LOW + DH_DOTS
1038:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  90-320+
1039:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Horizontal Total Time: 1206<=1344<=2047
1040:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // ... but Total = Blank + Pixels, so 90+1024 != 1206
1041:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Excess waits should be thrown in DH (since that's between interrupts)
1042:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //T_HD is the time from H inactivated to DE activated
1043:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //aka H back-porch: 1-160+
1044:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //IDTech Last Used: 50
1045:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //LTN last used 5
1046:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1047:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef HD_DOTS
1048:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1049:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define HD_DOTS 5
1050:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1051:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define HD_DOTS	50 //5 //0//20//5 //50 //30 //1 //160
1052:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1053:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define HD_DOTS 50//5
1054:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1055:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1056:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1057:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef HD_Delay
1058:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define HD_Delay()	delay_Dots(HD_DOTS)
1059:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1060:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1061:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // I think this was just a mistake. This change to delay_Dots a/o 0.10ncf
1062:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (untested in LCDdirectLVDS)
1063:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //delay_cyc(HD_DOTS)
1064:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1065:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1066:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This is the number of CPU cycles between DE->L and Horiz->L
1067:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This is just used in calculating the OCR value...
1068:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // aka H Front Porch: 0-24+
1069:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // IDTech Last Used: 24
1070:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // LTN last used 46
1071:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // 1072-1024-1-1 = 46
1072:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef DH_DOTS
1073:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1074:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DH_DOTS	46
1075:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1076:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DH_DOTS	24 //46 //480//6//12//24 //46 //24 //122//30 //0 //24
1077:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1078:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DH_DOTS	0//1000//100//46
1079:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 142


1080:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1081:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1082:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       |
1083:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       v
1084:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      T_DH
1085:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      ||    |<-T_DE->|  |  |<--T_HD (Hsync->DE)
1086:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // H   __.  ____________  .___________
1087:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      .|_|  .        .|_|  .
1088:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     _.     .________.     .___________
1089:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE   |_____| 512clk |_____|
1090:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      ^              ^
1091:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       \___________   \                        (just avoiding \ warning)
1092:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                   \  |     768 Hsyncs
1093:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                    v v
1094:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     _             _ _ _ _ _ _ _ _ _ _ 
1095:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE   |___________| | | | | | | | | | |______
1096:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
1097:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // one Hsync = T_HD+T_DH+T_Hlow+T_DE = 19.865us
1098:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1099:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //aka V-sync back porch: 7-29-63 "Vbp should be static"
1100:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // IDTech Last Used: 29
1101:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // LTN last used 3
1102:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //LTN Frame: 772<=806<=1000 lines...
1103:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1104:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef T_VD
1105:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1106:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_VD 3
1107:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1108:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define  T_VD 29 //3//29 //7 //29
1109:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1110:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_VD 3
1111:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1112:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1113:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1114:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //aka V-sync front porch: 1-3+
1115:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // IDTech Last Used: 3
1116:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // LTN last used 3
1117:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef T_DV
1118:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1119:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_DV 3
1120:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1121:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_DV 3//3 //1 //3
1122:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1123:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_DV 3
1124:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1125:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1126:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1127:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //1-6+ (1 is used by the first switch-case...)
1128:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // IDTech Last Used: 6
1129:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // LTN Last used 16
1130:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // 772 - 768 - 1 - 1 = 2
1131:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef T_Vlow
1132:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1133:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_Vlow 16
1134:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1135:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_Vlow	6 //16//6 //2 //6
1136:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 143


1137:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_Vlow 32
1138:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1139:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1140:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1141:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // IDTech Last Used: 768
1142:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef V_COUNT
1143:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1144:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define V_COUNT	768
1145:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1146:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define V_COUNT	768
1147:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1148:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // #if (LVDS_PRESCALER == 8)
1149:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define V_COUNT 768
1150:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // #else
1151:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  #define V_COUNT	(768*2/3)
1152:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // #endif
1153:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1154:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1155:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1156:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                       
1157:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                      |           
1158:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                      V           
1159:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              |<-T_DV>|           |<-T_VD-->|
1160:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              .       .           .         .
1161:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     _____________||__.   124us   .____||___________________
1162:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V           .   ||  |___________|    ||   .
1163:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     _ _ _ _ _ _ _|| _ _ _ _ _ _ _ _ _ ||_ _ _ _ _ _ _ _ _ _ _
1164:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H   | | | | | | ||| | | | | | | | | ||| | | | | | | | | | |
1165:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              .   ||                   ||   .
1166:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     _ _ _ _ _.   ||       720us       ||   ._ _ _ _ _ _ _ _ _
1167:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE   | | | | |___||___________________||___| | | | | | | | |
1168:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                  ||                   ||
1169:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
1170:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                        1
1171:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                        |
1172:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                        v               
1173:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     _________________   ___________________   _____________
1174:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V                   |_|                   |_|
1175:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H  |||||||||||||||||||||||||||||||||||||||||||||||||||||||
1176:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE  ||||||||||||||||_____|||||||||||||||||_____||||||||||||
1177:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                          ^
1178:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                          |
1179:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                          2
1180:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1181:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1182:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1183:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define HSYNC_COUNT_FRAME_COMPLETE  \
1184:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	(T_DV +(V_COUNT+T_VD+T_Vlow) + FRAME_UPDATE_DELAY)
1185:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // T_DV = 3
1186:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // V_COUNT = 768 
1187:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // T_VD = 3
1188:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // T_Vlow = 32
1189:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // FRAME_UPDATE_DELAY = 0
1190:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // TOTAL = 806
1191:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1192:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(FRAME_UPDATE_DELAY != 0)
1193:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #error "FRAME_UPDATE_DELAY is no longer implemented..."
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 144


1194:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1195:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1196:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1197:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#if(HSYNC_COUNT_FRAME_COMPLETE & 0x01)
1198:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // #warning "Total vertical lines might need to be even!"
1199:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //This should be fixed...
1200:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#endif
1201:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1202:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1203:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DOT_COUNT_PER_HSYNC \
1204:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	(H_LOW_DOTS + HD_DOTS + DE_ACTIVE_DOTS + DH_DOTS)
1205:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // H_LOW_DOTS = 100
1206:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // HD_DOTS = 50 
1207:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE_ACTIVE_DOTS = 1024
1208:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DH_DOTS = 0
1209:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // TOTAL = 1174
1210:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1211:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1212:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define MAKELONG (0L)
1213:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1214:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DOT_COUNT_PER_FRAME \
1215:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  ((MAKELONG(HSYNC_COUNT_FRAME_COMPLETE)) * (MAKELONG(DOT_COUNT_PER_HSYNC)))
1216:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // TOTAL = 946,244
1217:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1218:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Hlow_Delay 		H_LOW_DOTS
1219:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //HD_Delay			HD_DOTS	
1220:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //DE_ACTIVE_DOTS
1221:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //DH_DOTS
1222:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1223:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1224:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1225:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ \
1226:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void loadData(uint16_t rowNum, uint8_t dataEnable) \
1227:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	  __attribute__((__always_inline__));
1228:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1229:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1230:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** uint8_t dataEnable = 0;
1231:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** uint8_t vSync = 0;
1232:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** uint16_t hsyncCount = 0;
1233:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1234:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //frameCount=0 can be used in main to detect whether we've completed a 
1235:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  a frame AND its FRAME_UPDATE_DELAY
1236:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (defined(FRAME_COUNT_TO_DELAY) && (FRAME_COUNT_TO_DELAY != 0))
1237:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** uint8_t frameCount = 0;
1238:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1239:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1240:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** /*
1241:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ \
1242:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void loadRow(uint16_t rowNum) \
1243:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	__attribute__((__always_inline__));
1244:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** */
1245:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1246:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Returns TRUE when the frame is complete
1247:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Should send nada (and maybe hsyncs?) thereafter(?)
1248:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // In sdramThing2.0, when this returns TRUE, the SDRAM loading is complete
1249:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // EXCEPT: the final HD_Dots' FR_READ/ACTIVATE commands will point to a
1250:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  non-existent "next" Hsync... these commands need to be rewritten to
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 145


1251:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  point to the "first" Hsync. This is handled in sdramThing2.0's code
1252:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Used to be:
1253:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //SIGNAL(TIMER0_COMPA_vect)
1254:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** uint8_t updateLCD(void)
1255:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
 3665               		.stabn	68,0,1255,.LM449-.LFBB17
 3666               	.LM449:
 3667               	.LFBB17:
 3668               	/* prologue: function */
 3669               	/* frame size = 0 */
 3670               	/* stack size = 0 */
 3671               	.L__stack_usage = 0
1256:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	uint8_t frameComplete = FALSE;
1257:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1258:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//static uint8_t frameCount = 0;
1259:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1260:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0 // (defined(SLOW_EVERYTHING_TEST) && SLOW_EVERYTHING_TEST)
1261:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	while(TCNT0L != 7){};
1262:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//This won't work... who knows how many cycles interrupt-entry will be
1263:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//Above should fix that...
1264:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//I think this was just an indicator for scope triggering...
1265:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// not relevent for 
1266:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	setpinPORT(PB2, PORTB);
1267:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	clrpinPORT(PB2, PORTB);
1268:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1269:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1270:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//Hsync and Actually draw the pixels... (when DE is active)
1271:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// This takes a LONG time and will occupy most of the CPU...
1272:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//  ... IN THIS INTERRUPT
1273:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//loadData(((hsyncCount-T_VD-T_Vlow)>>3)&31, dataEnable,colorOverride);
1274:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	loadData(hsyncCount-T_DV-T_VD-T_Vlow, dataEnable);
 3672               		.stabn	68,0,1274,.LM450-.LFBB17
 3673               	.LM450:
 3674 0cac 4091 0000 		lds r20,dataEnable
 3675 0cb0 8091 0000 		lds r24,hsyncCount
 3676 0cb4 9091 0000 		lds r25,hsyncCount+1
 3677               	.LBB231:
 3678               	.LBB232:
1275:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1276:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	hsyncCount++;
1277:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1278:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	switch(hsyncCount)
1279:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	{
1280:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//V Front Porch, begins with initLCD
1281:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1282:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Vsync H->L (Begin V-Sync)
1283:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		case T_DV:
1284:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			dataEnable = FALSE;
1285:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			//clrpinPORT(VSYNC_PIN, VSYNC_PORT);
1286:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			vSync = TRUE;
1287:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			Vsync_fromNada();
1288:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
1289:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Vsync L->H (Begin V Back Porch)
1290:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		case T_Vlow + T_DV:
1291:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//	if(hfm_nextOutput(&modulator))
1292:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//		colorOverride = 0xff;
1293:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//	else
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 146


1294:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//		colorOverride = 7;
1295:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			//setpinPORT(VSYNC_PIN, VSYNC_PORT);
1296:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			vSync = FALSE;
1297:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			Nada_fromVsync();
1298:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
1299:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Start of frame (DE active)
1300:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		case T_VD +(T_Vlow + T_DV):
1301:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			dataEnable = TRUE;
1302:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
1303:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// All rows have been displayed
1304:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// Return to V Front Porch
1305:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		case V_COUNT +(T_VD + T_Vlow + T_DV):
1306:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			dataEnable = FALSE;
1307:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//	break;
1308:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Frame complete
1309:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//case HSYNC_COUNT_FRAME_COMPLETE:
1310:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			//T_DV +(V_COUNT+T_VD+T_Vlow) + FRAME_UPDATE_DELAY:
1311:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			hsyncCount = 0;
1312:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0 //(FRAME_COUNT_TO_DELAY != 0)
1313:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			//static uint8_t frameCount = 0;
1314:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			frameCount++;
1315:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			if(frameCount == FRAME_COUNT_TO_DELAY)
1316:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			{
1317:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 				frameCount = 0;
1318:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 				timer_compareMatchIntSetup(0, OUT_CHANNELA, FALSE);
1319:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 				//timer_compareMatchIntDisable(0, OUT_CHANNELA);
1320:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			}
1321:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1322:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			
1323:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#warning "NewNote: WTF, are we relying on loadData to have properly set the mode?"
1324:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Yeah, guess that makes sense... Must be Nada...
1325:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			frameComplete = TRUE;
1326:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
1327:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		default:
1328:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
1329:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	}
1330:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1331:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1332:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0 // (defined(LOADROW) && LOADROW)
1333:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//Load the next row into the row(seg)buffer
1334:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//data is enabled after T_VD+T_Vlow...
1335:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	if((hsyncCount >= T_VD+T_Vlow) && (hsyncCount < T_VD+T_Vlow+V_COUNT))
1336:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		loadRow(hsyncCount - (T_VD+T_Vlow));
1337:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1338:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1339:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//This note was written long before the above was commented-out...
1340:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//So...?
1341:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// Here is where loadRow used to be called
1342:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// it has been moved to oldNotes.txt, but it would make more sense
1343:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// to look at LCDdirectLVDS <25 or LCDdirect
1344:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// loadRow used the time between DE inactive and the next Hsync
1345:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// to load a row to a row-buffer (as opposed to a frame-buffer)
1346:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// thus, DE could gain more pixels because there would be fewer
1347:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// calculations to determine the memory location to write from
1348:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// This effect has since been minimized
1349:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// BUT loadRow might be necessary for program-memory-based images...
1350:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 147


1351:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	return frameComplete;
1352:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1353:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1354:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1355:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //See LCDdirectLVDS for an example...
1356:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // basically it loads a single row into a buffer for the next dateEnable
1357:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (either the row-buffer or the row-segment-buffer) 
1358:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This has been *greatly* reduced, is not at all functional, just
1359:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // to give an idea of loadRow's purpose.
1360:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0 //(defined(LOADROW) && LOADROW)
1361:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void loadRow(uint16_t rowNum)
1362:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1363:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//e.g....
1364:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	tet_drawRow(rbRowNum, rowBuffer);
1365:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	
1366:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//and...	
1367:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	rowBuffer[i] = fb_to_rb(colorVal);
1368:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	
1369:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//and...
1370:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	if((rbRowNum >= SMILE_TOP_ROW) &&
1371:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			(rbRowNum < (SMILE_HEIGHT+SMILE_TOP_ROW)))
1372:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	{
1373:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			for(i=0; i<FB_WIDTH; i++)
1374:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			{
1375:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****          	temp=pgm_readImageByte(pimage, rbRowNum-SMILE_TOP_ROW, i);
1376:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 				if(!(temp & 0xC0))
1377:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 					rowBuffer[i+SMILE_SHIFT] = fb_to_rb(temp);
1378:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			}
1379:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	}
1380:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1381:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	life_drawRow(rbRowNum, &(rowBuffer[RB_WIDTH-LIFE_WIDTH]));
1382:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1383:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//HORIZONTAL_COLOR_BARS
1384:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	for(i=0; i<RB_WIDTH; i++)
1385:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		rowBuffer[i] = fb_to_rb(rowNum);
1386:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1387:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//Good for syncing to have white on both borders...
1388:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	newSeg(1, 0x06, (6<<4) | 3);
1389:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	
1390:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1391:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif //LOAD_ROW
1392:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1393:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1394:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Including inactive pixel-clocks (timing)
1395:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DotCount per row...
1396:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  TOTAL_CYC_COUNT was used for the timer-interrupt in LCDdirectLVDS
1397:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  This was DOTS_TO_CYC(DISPLAY_DOT_COUNT) + ROW_CALCULATION_CYCS
1398:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  ROW_CALCULATION_CYCS was 50,000 (!!!)
1399:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   DOTS_TO_CYC(dots), last-used, was dots*7 (LVDS_PRESCALER nullified /8)
1400:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   So, the overall dot-count per row was... 
1401:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     DISPLAY_DOT_COUNT + ROW_CALCULATION_DOTS
1402:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     where ROW_CALCULATION_DOTS = 50,000cyc/7 = 7142 dots
1403:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     So... the overall dot-count per row was *MUCH* longer than usual
1404:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Pretty certain there's not nearly enough memory to simulate that
1405:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (in sdramThing2.0)
1406:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   But It does suggest that it would be worthwhile to try to stretch
1407:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   the rows as much as possible...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 148


1408:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   During this time, NADA is sent normally, (V=H, H=H, DE=L)
1409:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    Or Vsync (V=L, H=H, DE=L)
1410:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Maybe something could be simulated with PWM again, if necessary...
1411:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (Certainly not at full-speed)
1412:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DISPLAY_DOT_COUNT \
1413:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	(H_LOW_DOTS + HD_DOTS + DE_ACTIVE_DOTS + DH_DOTS)
1414:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1415:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0
1416:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1417:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define T_Hlow_CYC 1//8 //(T_Halow_REAL*3)
1418:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define T_Hlow_CYC DOTS_TO_CYC(H_LOW_DOTS)
1419:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1420:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define T_DE_CYC	DOTS_TO_CYC(DE_ACTIVE_DOTS)
1421:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1422:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define T_HD_CYC 1//3//(T_HD_REAL*3)
1423:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define T_HD_CYC	DOTS_TO_CYC(HD_DOTS)
1424:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1425:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define T_DH_CYC	DOTS_TO_CYC(DH_DOTS)
1426:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1427:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1428:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1429:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1430:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1431:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void init_timer0Hsync(void)
1432:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1433:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//T_HD + T_DH + T_low + T_DE
1434:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// For the original system, 19.865us = 695 dot-clocks
1435:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// We'd need to take advantage of the 16-bit timer
1436:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//  OCR1A may not be written properly (with a temporary high-byte)
1437:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//  ... not sure.
1438:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// TIMER0 DOES NOT HAVE CTC MODE in 16-bit mode
1439:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1440:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This is a hack, for testing syncability with long row-calculations
1441:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // before actually drawing it... e.g. loading from program memory
1442:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This value needs to be larger than the calculation time
1443:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // otherwise, it seems, syncing isn't stable
1444:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // BUT THIS IS A HACK, has nothing to do with actual calculation time
1445:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // And for slow LVDS or whatnot, this may be unnecessarily HUGE
1446:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1447:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DISPLAY_CYC_COUNT	(DOTS_TO_CYC(DISPLAY_DOT_COUNT))
1448:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //	(T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC)
1449:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1450:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //NOTE that with longer ROW_CALCULATION_CYCS, lines can be repeated...
1451:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // apparently an effect of the display, definitely not a code-thing
1452:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // in which case the vertical resolution decreases
1453:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // though, this could be used to advantage... 
1454:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (e.g. more processing time outside the drawing interrupts?)
1455:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // NOTE that if the value is too small and calculations take longer in some
1456:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // lines than others (?), those lines may repeat, or syncing could be off
1457:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (LVDS_PRESCALER == 8)
1458:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //#define ROW_CALCULATION_DELAY 1//20
1459:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define ROW_CALCULATION_CYCS (50000) //0 //(70000) //(100000)
1460:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else
1461:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //#define ROW_CALCULATION_DELAY 9//7//5//2//1//10
1462:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define ROW_CALCULATION_CYCS	(8*DISPLAY_CYC_COUNT)
1463:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1464:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 149


1465:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define TOTAL_CYC_COUNT \
1466:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	(ROW_CALCULATION_CYCS + DISPLAY_CYC_COUNT)
1467:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //	(ROW_CALCULATION_DELAY * (T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC))
1468:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define TOTAL_CYC_COUNT 2000
1469:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (TOTAL_CYC_COUNT > 255)
1470:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //Adding +7 causes it to round up (hopefully)
1471:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define TIMER0_TCNTS ((TOTAL_CYC_COUNT+7)/8)
1472:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define TIMER0_CLKDIV	CLKDIV8
1473:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+7)/8: Timer0 CLKDIV8"
1474:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #if (TIMER0_TCNTS > 255)
1475:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+63)/64: Timer0 CLKDIV64"
1476:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_TCNTS ((TOTAL_CYC_COUNT+63)/64)
1477:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_CLKDIV CLKDIV64
1478:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #if (TIMER0_TCNTS > 255)
1479:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	 #warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+255)/256: Timer0 CLKDIV256"
1480:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	 #define TIMER0_TCNTS ((TOTAL_CYC_COUNT+255)/256)
1481:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	 #define TIMER0_CLKDIV CLKDIV256
1482:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	 #if (TIMER0_TCNTS > 255)
1483:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		#warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+1023)/1024: Timer0 CLKDIV1024"
1484:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		#define TIMER0_TCNTS ((TOTAL_CYC_COUNT+1023)/1024)
1485:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		#define TIMER0_CLKDIV	CLKDIV1024
1486:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	 #endif
1487:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #endif
1488:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #endif
1489:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #if (TIMER0_TCNTS == 0)
1490:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #error "TIMER0_OCRVAL == 0"
1491:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #endif
1492:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else
1493:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define TIMER0_TCNTS TOTAL_CYC_COUNT
1494:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define TIMER0_CLKDIV CLKDIV1
1495:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1496:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1497:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (defined(SLOW_EVERYTHING_TEST) && SLOW_EVERYTHING_TEST)
1498:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //For testing, I want to see the pulses with the 'scope
1499:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  // Unless the timer is divisible by 7 the pulses will not align with the
1500:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  // timer overflow...
1501:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //but shit... it's running at clkdiv8 so each TCNT is 64 bits!
1502:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  // but this shouldn't matter for visualizing, that's only ~10 pixel clocks
1503:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  // and we'll only start visualizing *after* the extra TCNTs...
1504:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //Since the timer counts from 0 to (and including) OCR1A
1505:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  // Add one to this test...
1506:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #if (((TIMER0_TCNTS + 1) % 7) == 0)
1507:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 1) % 7 == 0"
1508:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS"
1509:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS)
1510:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1511:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 2) % 7) == 0)
1512:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 2) % 7 == 0"
1513:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 1"
1514:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 1)
1515:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1516:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 3) % 7) == 0)
1517:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 3) % 7 == 0"
1518:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 2"
1519:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 2)
1520:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1521:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 4) % 7) == 0)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 150


1522:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 4) % 7 == 0"
1523:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 3"
1524:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 3)
1525:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1526:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 5) % 7) == 0)
1527:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 5) % 7 == 0"
1528:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 4"
1529:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 4)
1530:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1531:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 6) % 7) == 0)
1532:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 6) % 7 == 0"
1533:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 5"
1534:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 5)
1535:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1536:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS) % 7) == 0)
1537:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS) % 7 == 0"
1538:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS - 1"
1539:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS - 1)
1540:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1541:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #else
1542:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #error "WTF?"
1543:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #endif
1544:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else
1545:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define TIMER0_OCRVAL (TIMER0_TCNTS-1)
1546:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1547:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1548:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (TIMER0_OCRVAL > 255)
1549:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #error "Despite all my efforts, TIMER0_OCRVAL is *still* > 255!"
1550:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1551:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1552:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    OCR0A = TIMER0_OCRVAL; //T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC;
1553:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	timer_setWGM(0, WGM_CLR_ON_COMPARE);
1554:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    timer_selectDivisor(0, TIMER0_CLKDIV); //CLKDIV1);
1555:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    timer_compareMatchIntEnable(0, OUT_CHANNELA);
1556:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1557:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1558:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define fullBlue()	DEblue_init()
1559:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1560:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1561:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1562:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Either use one of the ones here, or define your own...
1563:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // rowNum is the drawable row number on the LCD...
1564:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //static __inline__ void drawPix(uint16_t rowNum);
1565:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1566:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This should have a uint16 rowNum!
1567:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // But, so far, the only cases which use all 768 rows are LCDdirectLVDS
1568:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // with RowSegBuffer, and sdramThing (how did this uint8_t thing not cause
1569:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // trouble there?!)
1570:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // RowSegBuffer doesn't pay attention to rowNum in drawPix...
1571:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1572:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1573:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ \
1574:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void drawPix(uint16_t rowNum) \
1575:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	  __attribute__((__always_inline__));
1576:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0
1577:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (!defined(ROW_SEG_BUFFER) || !ROW_SEG_BUFFER)
1578:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //drawPix loads each pixel individually... It doesn't use a for-loop
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 151


1579:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // since that would take away from actual pixel-drawing time...
1580:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // I think it's been removed... but here's a (non-functional) example...
1581:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void drawPix(uint8_t rowNum)
1582:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1583:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	writeColor(*(color+1));	 
1584:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	writeColor(*(color+2));	 
1585:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	writeColor(*(color+3)); 
1586:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	...
1587:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	writeColor(*(color+61));
1588:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	writeColor(*(color+62));
1589:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	writeColor(*(color+63));
1590:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// WriteColor writes the pixel *after* the calculations...
1591:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// thus the pixel appears basically after writeColor completes
1592:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// These nops assure the 64th pixel is fully-displayed before exitting
1593:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	asm("nop");
1594:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	...
1595:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	asm("nop");
1596:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1597:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** /*		reg[17] = colorBuffer[rowNum][17];                         
1598:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		writeColor(reg[17]);                         
1599:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		...
1600:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		reg[20] = colorBuffer[rowNum][20];                         
1601:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		writeColor(reg[20]);  
1602:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		
1603:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//REPEATING to fill screen... (delayDots = 342 worked prior to this)
1604:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		reg[0] = colorBuffer[rowNum][0];
1605:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		writeColor(reg[0]);
1606:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		...
1607:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		reg[10] = colorBuffer[rowNum][10];
1608:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		writeColor(reg[10]);
1609:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** */
1610:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Display the rest as black...
1611:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		writeColor(0);
1612:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1613:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else		//ROW_SEG_BUFFER
1614:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void drawPix(uint8_t rowNum)
1615:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1616:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
1617:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	         | (0<<COM1B1) | (1<<COM1B0)
1618:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	         | (1<<PWM1A) | (1<<PWM1B) );
1619:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1620:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** /* This bit was in loadData, just some notes, now...
1621:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1622:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  WTF, how did this work?! Am I not using drawPix?!
1623:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    Yes, but drawPix calls drawSegs, which doesn't have an argument
1624:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    because loadRow takes the row argument elsewhere, drawSegs just
1625:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    draws 'em
1626:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       //#warning "see 'shouldBe' here..."
1627:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       //Should be:
1628:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       rowNum = rowNum*FB_HEIGHT/V_COUNT;
1629:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       //rowNum = rowNum / (768/FB_HEIGHT);
1630:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1631:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	So, rowNum change left-over from the ol' FrameBuffer days had no effect
1632:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	on drawSegs.
1633:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** */
1634:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1635:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 152


1636:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1637:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		drawSegs();
1638:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1639:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1640:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//DE->Nada transition expects fullBlue...
1641:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Also helps to show the edge of the DE timing...
1642:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1643:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//!!! Not sure what the state is at this point...
1644:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// could be any DE+Blue level, or could be NADA...
1645:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// Nada: DT1=3, still leaves one bit for clocking, might be OK
1646:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****          
1647:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Among the things that don't make sense...
1648:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// This appears to go into affect BEFORE delay_cyc (?)
1649:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// as, without a pull-up resistor on the /OC1B output, 
1650:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// green seems to be floating between the last pixel and the
1651:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// delay_cyc (!)
1652:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Disable complementary-output for Green 
1653:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//  (on /OC1B, where CLK is OC1B)
1654:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// Since Nada, V, and H DT's might be bad for clocking.
1655:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
1656:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****          | (1<<COM1B1) | (0<<COM1B0)
1657:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****          | (1<<PWM1A) | (1<<PWM1B) );
1658:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1659:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		fullBlue();
1660:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1661:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif //0
1662:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1663:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1664:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
1665:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          G) groovy little spiral...
1666:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
1667:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1668:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0 //(defined(CLOCK_INSENSITIVITY_TESTING) && CLOCK_INSENSITIVITY_TESTING)
1669:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromNada();
1670:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Enable complementary-output for Green (on /OC1B, where CLK is OC1B)
1671:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
1672:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 				   | (0<<COM1B1) | (1<<COM1B0)
1673:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 					| (1<<PWM1A) | (1<<PWM1B) );
1674:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1675:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1676:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1677:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1678:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1679:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1680:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1681:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1682:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1683:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1684:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** /* These are old tests from above, under if(dataEnable)
1685:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    They should all be implemented in lcdStuff.c, but have not been
1686:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    retested since...
1687:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BLUE_DIAG_BAR) && BLUE_DIAG_BAR)
1688:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       uint16_t blueCyc = DOTS_TO_CYC(rowNum);
1689:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
1690:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       
1691:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       DEonly_fromNada();
1692:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       delay_cyc(notBlueCyc);
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 153


1693:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       DEblue_fromDEonly();
1694:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       delay_cyc(blueCyc);
1695:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1696:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Nada_fromDEblue();
1697:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif(defined(BLUE_VERT_BAR) && BLUE_VERT_BAR)
1698:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       DEonly_fromNada();
1699:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)/3);
1700:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       DEblue_fromDEonly();
1701:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)*2/3);
1702:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Nada_fromDEblue();
1703:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif(defined(DE_BLUE) && DE_BLUE)
1704:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       DEblue_fromNada();
1705:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS));
1706:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Nada_fromDEblue();
1707:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else  //NOT BLUE_DIAG_BAR, BLUE_VERT_BAR, NOR DE_BLUE
1708:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #if ( defined(COLOR_BAR_SCROLL) && COLOR_BAR_SCROLL)
1709:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       if(rowNum <= 256)
1710:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****          rowNum=0;
1711:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       else
1712:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****          rowNum=1;
1713:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #else //NOT COLOR_BAR_SCROLL... drawPix...
1714:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** */
1715:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1716:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1717:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1718:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //a/o LCDdirectLVDS62:
1719:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // These BLUE_... tests are being reimplemented.
1720:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // They're *quite* handy for initial-testing of an untested display.
1721:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
1722:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Realistically, they should probably be less LVDS-specific
1723:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (non-LVDS displays needn't be coded with these transition-specific
1724:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // functions like DEonly_fromNada() or DEblue_fromDEonly(), and certainly
1725:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // needn't be limited to blue/black testing. LVDS displays contain their
1726:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // syncing signals on the same wire as the blue pixel-data, thus these
1727:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // tests...)
1728:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // In the long-run, maybe they should be moved to an lvdsLCD commonCode
1729:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // and the transition-specific code removed from here, but I've yet to
1730:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // explore this.
1731:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // For non-LVDS displays, these should still be pretty good tests, and
1732:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // implementing transition-specific functions shouldn't be too difficult...
1733:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // e.g. "#define DEonly_fromNada()    setpinPORT(DE_PIN, DE_PORT)"
1734:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // or   "#define DEblue_fromDEonly()  BLUE_PORT = 0xff"
1735:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (Actually, transition-specific functions make it faster regardless of
1736:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // the LVDS/non-LVDS nature of the display, as some things are redundant...
1737:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // e.g. if calls to DEonly_fromNada() were replaced with calls to DEonly(),
1738:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // it would require disabling H-sync and V-sync, in addition to enabling DE
1739:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // in every call. When we start getting into worrying about aligning pixels
1740:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // with the edge of the display and making them as skinny as possible, each
1741:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // cpu instruction counts.
1742:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // So, I guess, the only LVDS-specific stuff here is the blue-related
1743:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // transitions (and, more specifically, the fact that there are *only*
1744:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // blue-related transitions, as opposed to red and green)
1745:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1746:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //a/o sdramThing2.0v8 early... appears to be syncing on Blue signal
1747:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // thus we get diagonal data including Hsync (colored in red) along the
1748:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // as a diagonal stripe at the right
1749:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BLUE_DIAG_BAR) && BLUE_DIAG_BAR)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 154


1750:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1751:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1752:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//uint16_t blueCyc = DOTS_TO_CYC(rowNum);
1753:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
1754:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		uint16_t blueDots = rowNum;
1755:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		uint16_t notBlueDots = DE_ACTIVE_DOTS - blueDots;
1756:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1757:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromNada();
1758:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(notBlueCyc);
1759:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(notBlueDots);
1760:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(notBlueDots);
1761:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromDEonly();
1762:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(blueCyc);
1763:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(blueDots);
1764:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(blueDots);
1765:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEblue();
1766:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1767:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1768:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1769:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1770:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //a/o LCDdirectLVDS62: This is the same as above, but scrolls vertically
1771:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // one line per refresh... so it's easy to calculate the refresh-rate
1772:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BLUE_DIAG_BAR_SCROLL) && BLUE_DIAG_BAR_SCROLL)
1773:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1774:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1775:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	static uint16_t rowOffset;
1776:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	if(rowNum == 0)
1777:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		rowOffset++;
1778:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//uint16_t blueCyc = DOTS_TO_CYC(rowNum);
1779:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
1780:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		uint16_t blueDots = (rowNum + rowOffset)%DE_ACTIVE_DOTS;
1781:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		uint16_t notBlueDots = DE_ACTIVE_DOTS - blueDots;
1782:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1783:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromNada();
1784:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(notBlueCyc);
1785:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(notBlueDots);
1786:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(notBlueDots);
1787:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromDEonly();
1788:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(blueCyc);
1789:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(blueDots);
1790:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(blueDots);
1791:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEblue();
1792:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1793:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1794:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1795:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1796:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1797:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //a/o LCDdirectLVDS62: This is the same as above, but alternates colors
1798:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //between each frame...
1799:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (Careful, this one'll cause seizures!)
1800:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BLUE_DIAG_SCROLL_FLASH) && BLUE_DIAG_SCROLL_FLASH)
1801:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1802:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1803:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	static uint16_t rowOffset;
1804:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	if(rowNum == 0)
1805:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		rowOffset++;
1806:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//uint16_t blueCyc = DOTS_TO_CYC(rowNum);
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 155


1807:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
1808:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		uint16_t blueDots = (rowNum + rowOffset)%DE_ACTIVE_DOTS;
1809:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		uint16_t notBlueDots = DE_ACTIVE_DOTS - blueDots;
1810:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1811:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BDSF_ALTERNATE_ROWS) && BDSF_ALTERNATE_ROWS)
1812:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	if(rowNum&0x01)
1813:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else
1814:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	if(rowOffset&0x01)
1815:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1816:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	{
1817:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromNada();
1818:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(notBlueCyc);
1819:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(notBlueDots);
1820:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(notBlueDots);
1821:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromDEonly();
1822:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(blueCyc);
1823:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(blueDots);
1824:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(blueDots);
1825:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEblue();
1826:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	}
1827:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	else
1828:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	{
1829:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromNada();
1830:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(notBlueCyc);
1831:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(notBlueDots);
1832:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(notBlueDots);
1833:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromDEblue();
1834:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(blueCyc);
1835:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(blueDots);
1836:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(blueDots);
1837:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEonly();
1838:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	}
1839:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1840:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1841:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1842:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1843:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //a/o sdramThing2.0v8-31ish: LooksPromising, but delayed
1844:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // also LVDS bit-shifts causing vertical striping
1845:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BLUE_VERT_BAR) && BLUE_VERT_BAR)
1846:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1847:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1848:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromNada();
1849:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)/3);
1850:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS/3);
1851:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS/3);
1852:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromDEonly();
1853:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)*2/3);
1854:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
1855:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
1856:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEblue();
1857:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1858:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1859:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1860:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //a/o sdramThing2.0v8-32 nogo... syncs at end of blue instead of Hsync
1861:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BLUE_VERT_BAR_REVERSED) && BLUE_VERT_BAR_REVERSED)
1862:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1863:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 156


1864:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromNada();
1865:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)/3);
1866:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS/3);
1867:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS/3);
1868:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromDEblue();
1869:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)*2/3);
1870:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
1871:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
1872:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEonly();
1873:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1874:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1875:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1876:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1877:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(DE_BLUE) && DE_BLUE)
1878:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1879:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1880:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromNada();
1881:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS));
1882:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS);
1883:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS);
1884:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEblue();
1885:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1886:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1887:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1888:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BLUE_BORDER) && (BLUE_BORDER!=0))
1889:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1890:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1891:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromNada();
1892:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(BLUE_BORDER);
1893:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromDEblue();
1894:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS - BLUE_BORDER*2);
1895:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromDEonly();
1896:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(BLUE_BORDER);
1897:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEblue();
1898:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1899:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1900:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1901:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0
1902:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //NOT BLUE_DIAG_BAR, BLUE_VERT_BAR, NOR DE_BLUE
1903:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #if ( defined(COLOR_BAR_SCROLL) && COLOR_BAR_SCROLL)
1904:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		if(rowNum <= 256)
1905:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			rowNum=0;
1906:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		else
1907:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			rowNum=1;
1908:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #else //NOT COLOR_BAR_SCROLL... drawPix...
1909:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//#warning "see 'shouldBe' here..."
1910:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Should be:
1911:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		rowNum = rowNum*FB_HEIGHT/V_COUNT;
1912:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//rowNum = rowNum / (768/FB_HEIGHT);
1913:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #endif
1914:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1915:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//DEonly_fromNada();
1916:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       drawPix(rowNum);
1917:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Nada_init();
1918:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #warning "THIS ISN'T SAFE"
1919:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEonly();
1920:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//Drawing Methods...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 157


1921:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1922:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0 //(defined(CLOCK_INSENSITIVITY_TESTING) && CLOCK_INSENSITIVITY_TESTING)
1923:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//!!! Not sure what the state is at this point...
1924:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// could be any DE+Blue level, or could be NADA...
1925:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// Nada: DT1=3, still leaves one bit for clocking, might be OK
1926:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1927:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       //Disable complementary-output for Green 
1928:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//  (on /OC1B, where CLK is OC1B)
1929:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// Since Nada, V, and H DT's might be bad for clocking.
1930:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
1931:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****                | (1<<COM1B1) | (0<<COM1B0)
1932:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****                | (1<<PWM1A) | (1<<PWM1B) );
1933:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1934:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1935:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//colorOverride removed in LVDS, revisit LCDdirect50
1936:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1937:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1938:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1939:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1940:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // AND HERE!!!
1941:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1942:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // rowNum is only used when DE is active...
1943:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  and should be 0 at *drawn row* 0
1944:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void loadData(uint16_t rowNum, uint8_t dataEnable)
1945:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1946:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//H Active pulse...
1947:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    if(vSync)
 3679               		.stabn	68,0,1947,.LM451-.LFBB17
 3680               	.LM451:
 3681 0cb8 2091 0000 		lds r18,vSync
1948:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    {
1949:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Vsync_fromNada() is called at the end of the last interupt
1950:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       VplusH_fromVsync();
 3682               		.stabn	68,0,1950,.LM452-.LFBB17
 3683               	.LM452:
 3684 0cbc AD9A      		sbi 0x15,5
1947:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    {
 3685               		.stabn	68,0,1947,.LM453-.LFBB17
 3686               	.LM453:
 3687 0cbe 2223      		tst r18
 3688 0cc0 01F0      		breq .L167
 3689               		.stabn	68,0,1950,.LM454-.LFBB17
 3690               	.LM454:
 3691 0cc2 26E0      		ldi r18,lo8(6)
 3692 0cc4 30E0      		ldi r19,0
 3693 0cc6 3093 6500 		sts 100+1,r19
 3694 0cca 2093 6400 		sts 100,r18
 3695 0cce 3FBD      		out 0x2e+1,r19
 3696 0cd0 2EBD      		out 0x2e,r18
 3697 0cd2 AD98      		cbi 0x15,5
 3698 0cd4 26E1      		ldi r18,lo8(22)
 3699 0cd6 30E0      		ldi r19,0
 3700               	.L169:
 3701               	.LBB233:
 3702               	.LBB234:
 3703               		.stabs	"delay_cyc.c",132,0,0,.Ltext47
 3704               	.Ltext47:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 158


 245:delay_cyc.c   ****       asm("nop");
 3705               		.stabn	68,0,245,.LM455-.LFBB17
 3706               	.LM455:
 3707               	/* #APP */
 3708               	 ;  245 "delay_cyc.c" 1
 3709 0cd8 0000      		nop
 3710               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 3711               		.stabn	68,0,246,.LM456-.LFBB17
 3712               	.LM456:
 3713               	 ;  246 "delay_cyc.c" 1
 3714 0cda 0000      		nop
 3715               	 ;  0 "" 2
 3716               	/* #NOAPP */
 3717 0cdc 2150      		subi r18,1
 3718 0cde 3109      		sbc r19,__zero_reg__
 221:delay_cyc.c   ****    {
 3719               		.stabn	68,0,221,.LM457-.LFBB17
 3720               	.LM457:
 3721 0ce0 2115      		cp r18,__zero_reg__
 3722 0ce2 3105      		cpc r19,__zero_reg__
 3723 0ce4 01F4      		brne .L169
 265:delay_cyc.c   **** 		case 6:
 3724               		.stabn	68,0,265,.LM458-.LFBB17
 3725               	.LM458:
 3726               	/* #APP */
 3727               	 ;  265 "delay_cyc.c" 1
 3728 0ce6 0000      		nop
 3729               	 ;  0 "" 2
 267:delay_cyc.c   **** 		case 5:
 3730               		.stabn	68,0,267,.LM459-.LFBB17
 3731               	.LM459:
 3732               	 ;  267 "delay_cyc.c" 1
 3733 0ce8 0000      		nop
 3734               	 ;  0 "" 2
 269:delay_cyc.c   **** 		case 4:
 3735               		.stabn	68,0,269,.LM460-.LFBB17
 3736               	.LM460:
 3737               	 ;  269 "delay_cyc.c" 1
 3738 0cea 0000      		nop
 3739               	 ;  0 "" 2
 271:delay_cyc.c   **** 		case 3:
 3740               		.stabn	68,0,271,.LM461-.LFBB17
 3741               	.LM461:
 3742               	 ;  271 "delay_cyc.c" 1
 3743 0cec 0000      		nop
 3744               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 3745               		.stabn	68,0,273,.LM462-.LFBB17
 3746               	.LM462:
 3747               	 ;  273 "delay_cyc.c" 1
 3748 0cee 0000      		nop
 3749               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 3750               		.stabn	68,0,275,.LM463-.LFBB17
 3751               	.LM463:
 3752               	 ;  275 "delay_cyc.c" 1
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 159


 3753 0cf0 0000      		nop
 3754               	 ;  0 "" 2
 3755               		.stabn	68,0,277,.LM464-.LFBB17
 3756               	.LM464:
 3757               	 ;  277 "delay_cyc.c" 1
 3758 0cf2 0000      		nop
 3759               	 ;  0 "" 2
 3760               	/* #NOAPP */
 3761               	.LBE234:
 3762               	.LBE233:
 3763               		.stabs	"_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c",132,0,0,.Ltext48
 3764               	.Ltext48:
1951:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Hlow_Delay();
1952:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Vsync_fromVplusH();
 3765               		.stabn	68,0,1952,.LM465-.LFBB17
 3766               	.LM465:
 3767 0cf4 AD9A      		sbi 0x15,5
 3768 0cf6 23E0      		ldi r18,lo8(3)
 3769 0cf8 30E0      		ldi r19,0
 3770 0cfa 3093 6500 		sts 100+1,r19
 3771 0cfe 2093 6400 		sts 100,r18
 3772 0d02 24E0      		ldi r18,lo8(4)
 3773 0d04 30E0      		ldi r19,0
 3774 0d06 3FBD      		out 0x2e+1,r19
 3775 0d08 2EBD      		out 0x2e,r18
 3776 0d0a AD98      		cbi 0x15,5
 3777 0d0c 2BE0      		ldi r18,lo8(11)
 3778 0d0e 30E0      		ldi r19,0
 3779               	.L171:
 3780               	.LBB235:
 3781               	.LBB236:
 3782               		.stabs	"delay_cyc.c",132,0,0,.Ltext49
 3783               	.Ltext49:
 245:delay_cyc.c   ****       asm("nop");
 3784               		.stabn	68,0,245,.LM466-.LFBB17
 3785               	.LM466:
 3786               	/* #APP */
 3787               	 ;  245 "delay_cyc.c" 1
 3788 0d10 0000      		nop
 3789               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 3790               		.stabn	68,0,246,.LM467-.LFBB17
 3791               	.LM467:
 3792               	 ;  246 "delay_cyc.c" 1
 3793 0d12 0000      		nop
 3794               	 ;  0 "" 2
 3795               	/* #NOAPP */
 3796 0d14 2150      		subi r18,1
 3797 0d16 3109      		sbc r19,__zero_reg__
 221:delay_cyc.c   ****    {
 3798               		.stabn	68,0,221,.LM468-.LFBB17
 3799               	.LM468:
 3800 0d18 2115      		cp r18,__zero_reg__
 3801 0d1a 3105      		cpc r19,__zero_reg__
 3802 0d1c 01F4      		brne .L171
 3803 0d1e 00C0      		rjmp .L188
 3804               	.L167:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 160


 3805               	.LBE236:
 3806               	.LBE235:
 3807               		.stabs	"_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c",132,0,0,.Ltext50
 3808               	.Ltext50:
1953:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       HD_Delay();
1954:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    }
1955:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    else
1956:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    {
1957:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Hsync_fromNada();
 3809               		.stabn	68,0,1957,.LM469-.LFBB17
 3810               	.LM469:
 3811 0d20 22E0      		ldi r18,lo8(2)
 3812 0d22 30E0      		ldi r19,0
 3813 0d24 3093 6500 		sts 100+1,r19
 3814 0d28 2093 6400 		sts 100,r18
 3815 0d2c 23E0      		ldi r18,lo8(3)
 3816 0d2e 30E0      		ldi r19,0
 3817 0d30 3FBD      		out 0x2e+1,r19
 3818 0d32 2EBD      		out 0x2e,r18
 3819 0d34 AD98      		cbi 0x15,5
 3820 0d36 26E1      		ldi r18,lo8(22)
 3821 0d38 30E0      		ldi r19,0
 3822               	.L174:
 3823               	.LBB237:
 3824               	.LBB238:
 3825               		.stabs	"delay_cyc.c",132,0,0,.Ltext51
 3826               	.Ltext51:
 245:delay_cyc.c   ****       asm("nop");
 3827               		.stabn	68,0,245,.LM470-.LFBB17
 3828               	.LM470:
 3829               	/* #APP */
 3830               	 ;  245 "delay_cyc.c" 1
 3831 0d3a 0000      		nop
 3832               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 3833               		.stabn	68,0,246,.LM471-.LFBB17
 3834               	.LM471:
 3835               	 ;  246 "delay_cyc.c" 1
 3836 0d3c 0000      		nop
 3837               	 ;  0 "" 2
 3838               	/* #NOAPP */
 3839 0d3e 2150      		subi r18,1
 3840 0d40 3109      		sbc r19,__zero_reg__
 221:delay_cyc.c   ****    {
 3841               		.stabn	68,0,221,.LM472-.LFBB17
 3842               	.LM472:
 3843 0d42 2115      		cp r18,__zero_reg__
 3844 0d44 3105      		cpc r19,__zero_reg__
 3845 0d46 01F4      		brne .L174
 265:delay_cyc.c   **** 		case 6:
 3846               		.stabn	68,0,265,.LM473-.LFBB17
 3847               	.LM473:
 3848               	/* #APP */
 3849               	 ;  265 "delay_cyc.c" 1
 3850 0d48 0000      		nop
 3851               	 ;  0 "" 2
 267:delay_cyc.c   **** 		case 5:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 161


 3852               		.stabn	68,0,267,.LM474-.LFBB17
 3853               	.LM474:
 3854               	 ;  267 "delay_cyc.c" 1
 3855 0d4a 0000      		nop
 3856               	 ;  0 "" 2
 269:delay_cyc.c   **** 		case 4:
 3857               		.stabn	68,0,269,.LM475-.LFBB17
 3858               	.LM475:
 3859               	 ;  269 "delay_cyc.c" 1
 3860 0d4c 0000      		nop
 3861               	 ;  0 "" 2
 271:delay_cyc.c   **** 		case 3:
 3862               		.stabn	68,0,271,.LM476-.LFBB17
 3863               	.LM476:
 3864               	 ;  271 "delay_cyc.c" 1
 3865 0d4e 0000      		nop
 3866               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 3867               		.stabn	68,0,273,.LM477-.LFBB17
 3868               	.LM477:
 3869               	 ;  273 "delay_cyc.c" 1
 3870 0d50 0000      		nop
 3871               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 1:
 3872               		.stabn	68,0,275,.LM478-.LFBB17
 3873               	.LM478:
 3874               	 ;  275 "delay_cyc.c" 1
 3875 0d52 0000      		nop
 3876               	 ;  0 "" 2
 3877               		.stabn	68,0,277,.LM479-.LFBB17
 3878               	.LM479:
 3879               	 ;  277 "delay_cyc.c" 1
 3880 0d54 0000      		nop
 3881               	 ;  0 "" 2
 3882               	/* #NOAPP */
 3883               	.LBE238:
 3884               	.LBE237:
 3885               		.stabs	"_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c",132,0,0,.Ltext52
 3886               	.Ltext52:
1958:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Hlow_Delay();
1959:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Nada_fromHsync();
 3887               		.stabn	68,0,1959,.LM480-.LFBB17
 3888               	.LM480:
 3889 0d56 AD9A      		sbi 0x15,5
 3890 0d58 22E0      		ldi r18,lo8(2)
 3891 0d5a 30E0      		ldi r19,0
 3892 0d5c 3093 6500 		sts 100+1,r19
 3893 0d60 2093 6400 		sts 100,r18
 3894 0d64 24E0      		ldi r18,lo8(4)
 3895 0d66 30E0      		ldi r19,0
 3896 0d68 3FBD      		out 0x2e+1,r19
 3897 0d6a 2EBD      		out 0x2e,r18
 3898 0d6c AD98      		cbi 0x15,5
 3899 0d6e 2BE0      		ldi r18,lo8(11)
 3900 0d70 30E0      		ldi r19,0
 3901               	.L176:
 3902               	.LBB239:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 162


 3903               	.LBB240:
 3904               		.stabs	"delay_cyc.c",132,0,0,.Ltext53
 3905               	.Ltext53:
 245:delay_cyc.c   ****       asm("nop");
 3906               		.stabn	68,0,245,.LM481-.LFBB17
 3907               	.LM481:
 3908               	/* #APP */
 3909               	 ;  245 "delay_cyc.c" 1
 3910 0d72 0000      		nop
 3911               	 ;  0 "" 2
 246:delay_cyc.c   ****    }
 3912               		.stabn	68,0,246,.LM482-.LFBB17
 3913               	.LM482:
 3914               	 ;  246 "delay_cyc.c" 1
 3915 0d74 0000      		nop
 3916               	 ;  0 "" 2
 3917               	/* #NOAPP */
 3918 0d76 2150      		subi r18,1
 3919 0d78 3109      		sbc r19,__zero_reg__
 221:delay_cyc.c   ****    {
 3920               		.stabn	68,0,221,.LM483-.LFBB17
 3921               	.LM483:
 3922 0d7a 2115      		cp r18,__zero_reg__
 3923 0d7c 3105      		cpc r19,__zero_reg__
 3924 0d7e 01F4      		brne .L176
 3925               	.L188:
 265:delay_cyc.c   **** 		case 6:
 3926               		.stabn	68,0,265,.LM484-.LFBB17
 3927               	.LM484:
 3928               	/* #APP */
 3929               	 ;  265 "delay_cyc.c" 1
 3930 0d80 0000      		nop
 3931               	 ;  0 "" 2
 267:delay_cyc.c   **** 		case 5:
 3932               		.stabn	68,0,267,.LM485-.LFBB17
 3933               	.LM485:
 3934               	 ;  267 "delay_cyc.c" 1
 3935 0d82 0000      		nop
 3936               	 ;  0 "" 2
 269:delay_cyc.c   **** 		case 4:
 3937               		.stabn	68,0,269,.LM486-.LFBB17
 3938               	.LM486:
 3939               	 ;  269 "delay_cyc.c" 1
 3940 0d84 0000      		nop
 3941               	 ;  0 "" 2
 271:delay_cyc.c   **** 		case 3:
 3942               		.stabn	68,0,271,.LM487-.LFBB17
 3943               	.LM487:
 3944               	 ;  271 "delay_cyc.c" 1
 3945 0d86 0000      		nop
 3946               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 2:
 3947               		.stabn	68,0,273,.LM488-.LFBB17
 3948               	.LM488:
 3949               	 ;  273 "delay_cyc.c" 1
 3950 0d88 0000      		nop
 3951               	 ;  0 "" 2
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 163


 275:delay_cyc.c   **** 		case 1:
 3952               		.stabn	68,0,275,.LM489-.LFBB17
 3953               	.LM489:
 3954               	 ;  275 "delay_cyc.c" 1
 3955 0d8a 0000      		nop
 3956               	 ;  0 "" 2
 3957               		.stabn	68,0,277,.LM490-.LFBB17
 3958               	.LM490:
 3959               	 ;  277 "delay_cyc.c" 1
 3960 0d8c 0000      		nop
 3961               	 ;  0 "" 2
 3962               	/* #NOAPP */
 3963               	.LBE240:
 3964               	.LBE239:
 3965               		.stabs	"_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c",132,0,0,.Ltext54
 3966               	.Ltext54:
1960:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       HD_Delay();
1961:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    }
1962:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1963:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    if(dataEnable)
 3967               		.stabn	68,0,1963,.LM491-.LFBB17
 3968               	.LM491:
 3969 0d8e 4423      		tst r20
 3970 0d90 01F0      		breq .L177
 3971               	.LBB241:
 3972               	.LBB242:
 3973               		.stabs	"main.c",132,0,0,.Ltext55
 3974               	.Ltext55:
   1:main.c        **** /* mehPL:
   2:main.c        ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:main.c        ****  *    I'm not too fond of long licenses at the top of the file.
   4:main.c        ****  *    Please see the bottom.
   5:main.c        ****  *    Enjoy!
   6:main.c        ****  */
   7:main.c        **** 
   8:main.c        **** 
   9:main.c        **** // Please see mainConfig.h!
  10:main.c        **** 
  11:main.c        **** 
  12:main.c        **** //The order of these #includes is *very specific*
  13:main.c        **** // please see the associated files (especially lcdStuff, lcdDefines, and
  14:main.c        **** // lvds)
  15:main.c        **** 
  16:main.c        **** 
  17:main.c        **** //This file contains code for *many* options, chosen by mainConfig.h
  18:main.c        **** // (and possibly makefile)
  19:main.c        **** 
  20:main.c        **** 
  21:main.c        **** 
  22:main.c        **** #include "projInfo.h"   //Don't include in main.h 'cause that's included in other .c's?
  23:main.c        **** #include "main.h"
  24:main.c        **** #include <util/delay.h> //For delay_us in pll_enable
  25:main.c        **** #include <avr/pgmspace.h>
  26:main.c        **** #include _TIMERCOMMON_HEADER_
  27:main.c        **** //#include "../../../_commonCode/charBitmap/0.10/charBitmap.h"
  28:main.c        **** #include _CHARBITMAP_HEADER_
  29:main.c        **** #include "fbColors.h"
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 164


  30:main.c        **** 
  31:main.c        **** #include _SINETABLE_HEADER_
  32:main.c        **** 
  33:main.c        **** 
  34:main.c        **** 
  35:main.c        **** #include "mainConfig.h"
  36:main.c        **** 
  37:main.c        **** 
  38:main.c        **** 
  39:main.c        **** #include "delay_cyc.h"
  40:main.c        **** 
  41:main.c        **** 
  42:main.c        **** #if (defined(ROW_SEG_BUFFER) && ROW_SEG_BUFFER)
  43:main.c        **** 	 #include "rowSegBuffer.h"
  44:main.c        **** #endif
  45:main.c        **** 
  46:main.c        **** //Nope, can't be removed yet...
  47:main.c        **** //#define ROW_BUFFER FALSE
  48:main.c        **** //#define LOADROW TRUE
  49:main.c        **** #if (defined(ROW_BUFFER) && ROW_BUFFER)
  50:main.c        **** #error
  51:main.c        **** #include "rowBuffer.c"
  52:main.c        **** #endif
  53:main.c        **** 
  54:main.c        **** #if (defined(SEG_TET) && SEG_TET)
  55:main.c        ****  #include "tetStuff.c"
  56:main.c        **** #endif
  57:main.c        **** 
  58:main.c        **** 
  59:main.c        **** #if ( (defined(BLUE_ADC) && BLUE_ADC) \
  60:main.c        **** 	|| (defined(FB_QUESTION) && FB_QUESTION))
  61:main.c        ****  #include _ADC_HEADER_
  62:main.c        **** #endif
  63:main.c        **** 
  64:main.c        **** 
  65:main.c        **** #define OSCCAL_VAL	0xff//0xDB//0xDC//0xE0//0//0xff//0x20//0xff //0x00
  66:main.c        **** #include "delay_cyc.c"
  67:main.c        **** #include "lcdDefines.h"
  68:main.c        **** #include "pll.c"
  69:main.c        **** 
  70:main.c        **** #if (defined(__AVR_AT90PWM161__))
  71:main.c        ****  #include "lvds161.c"
  72:main.c        **** #else
  73:main.c        ****  #include "lvds.c"
  74:main.c        **** #endif
  75:main.c        **** 
  76:main.c        **** #if (defined(FRAMEBUFFER_TESTING) && FRAMEBUFFER_TESTING)
  77:main.c        ****  #include "_options/writeColor.c"
  78:main.c        **** #endif
  79:main.c        **** 
  80:main.c        **** #if (defined(FB_QUESTION) && FB_QUESTION)
  81:main.c        **** #include "fb_question.c"
  82:main.c        **** #endif
  83:main.c        **** 
  84:main.c        **** // a/o v59:
  85:main.c        **** //PSEGS are the "pixel segments" addressable in RowSegmentBuffer
  86:main.c        **** // e.g. one could load a single row-segment NUM_PSEGS long, and it would 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 165


  87:main.c        **** // reach from one edge of the screen to the other
  88:main.c        **** // or any number <=NUM_SEGMENTS of row segments whose lengths all add up to
  89:main.c        **** // <=NUM_PSEGS. (It's possible to extend beyond NUM_PSEGS, which would draw
  90:main.c        **** // beyond the edge of the screen, but it may affect the screen's ability 
  91:main.c        **** // to sync properly)
  92:main.c        **** // This value isn't exactly adjustable, it's a characteristic of the
  93:main.c        **** // ratio of the pixel-clock and the system-clock, along with the number of
  94:main.c        **** // system clock cycles used to draw each pixel.
  95:main.c        **** // This value was determined by experimentation with the very specific 
  96:main.c        **** // configuration currently in use, though it could probably be calculated 
  97:main.c        **** // from other #defines elsewhere.
  98:main.c        **** // (and probably *should* be, at some point, especially with 
  99:main.c        **** //  experimentations with PLLSYSCLK, LVDS_PRESCALER, SLOW_LVDS, etc...)
 100:main.c        **** // For now, changing this doesn't really do anything except scale some 
 101:main.c        **** // drawings horizontally (E.G. SEG_RACER)
 102:main.c        **** //These notes were determined long ago when developing SEG_RACER:
 103:main.c        **** // Wasn't sure where 357 came from... and now I'm wondering where the
 104:main.c        **** // notes I wrote regarding it disappeared to...
 105:main.c        **** // Anyhow, from line 72, if ROW_SEG_BUFFER && !LVDS_PRESCALER
 106:main.c        **** // "ROW_SEG_BUFFER uses 20cyc/pixel" (doesn't match the math I've 
 107:main.c        **** // elsewhere) 1024/20*7 = 358.4... so maybe that's something to do with it
 108:main.c        **** // TODO: If it was 21cyc/pixel, wouldn't we have perfect alignment with
 109:main.c        **** //       color-transitions and segment widths?
 110:main.c        **** //#define NUM_PSEGS	(1024/3+16) //357
 111:main.c        **** 
 112:main.c        **** #if (LVDS_PRESCALER == 1)
 113:main.c        ****  #warning "LVDS_PRESCALER == 1 is used extensively a/o v62 to indicate that	we're testing v62... th
 114:main.c        ****  //Let's see if this math can be figured out...
 115:main.c        ****  //
 116:main.c        ****  // Hah, right??? I completely forgot about SQUARE_SEGMENTS in all this
 117:main.c        ****  // Assuming they're always square, for now.
 118:main.c        ****  //
 119:main.c        ****  // H_PIXELS (DE_ACTIVE_DOTS)		1024             pixels
 120:main.c        ****  
 121:main.c        ****  // LVDS_PRESCALER					(1,2,4,8...)     pll_cyc/lvds_bit
 122:main.c        ****  //    PLLCYC_PER_LVDSBIT        LVDS_PRESCALER
 123:main.c        **** 
 124:main.c        ****  // LVDS_BITS_PER_PIXEL				7                lvds_bits/pixel
 125:main.c        ****  // PLL_SYSCLK
 126:main.c        ****  //    TRUE:  PLLCYC_PER_CPUCYC  4                pll_cyc/cpu_cyc
 127:main.c        ****  //    FALSE: PLLCYC_PER_CPUCYC  8                pll_cyc/cpu_cyc
 128:main.c        ****  // DRAWSEG_CPU_CYCS_PER_PSEG		20               cpu_cyc/pseg
 129:main.c        ****  //
 130:main.c        ****  // PIXELS_PER_PSEG = 1pseg * CPUCYCS_PER_PSEG   -> cpu_cycs
 131:main.c        ****  //                         * PLLCYC_PER_CPUCYC  -> pll_cycs
 132:main.c        ****  //                         / PLLCYC_PER_LVDSBIT -> lvds_bits
 133:main.c        ****  //                         / LVDSBITS_PER_PIXEL -> pixels
 134:main.c        ****  //   This is where dimensional-analysis always bites me in the ass...
 135:main.c        ****  //   my units are now PIXELS_PER_PSEG = pix/pseg = pix
 136:main.c        ****  //   I THINK (and this is an epiphany after years of recurring troubles
 137:main.c        ****  //   here) it's possible to, instead, note that 1pseg came from *nowhere*
 138:main.c        ****  //   so should be 1pseg/1pseg * <all the dimensional-analysis stuff>
 139:main.c        ****  //   Then:
 140:main.c        ****  //   (Note, in most cases PIXELS_PER_PSEG will be small, and here
 141:main.c        ****  //   fractions are highly important...)
 142:main.c        ****  #define CPUCYC_PER_PSEG	(DRAWSEG_CPU_CYCS_PER_PSEG)
 143:main.c        ****  #if(defined(PLL_SYSCLK) && PLL_SYSCLK)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 166


 144:main.c        ****   #define PLLCYC_PER_CPUCYC	4
 145:main.c        ****  #else
 146:main.c        ****   #define PLLCYC_PER_CPUCYC	8
 147:main.c        ****  #endif
 148:main.c        ****  #define PLLCYC_PER_LVDSBIT	(LVDS_PRESCALER)
 149:main.c        ****  #define LVDSBITS_PER_PIXEL	7
 150:main.c        **** 
 151:main.c        ****  #define PIXELS_PER_PSEG_F ( MAKEFLOAT( CPUCYC_PER_PSEG   ) \
 152:main.c        **** 		 							* MAKEFLOAT( PLLCYC_PER_CPUCYC  ) \
 153:main.c        **** 		 							/ MAKEFLOAT( PLLCYC_PER_LVDSBIT ) \
 154:main.c        **** 		 							/ MAKEFLOAT( LVDSBITS_PER_PIXEL ) )
 155:main.c        ****  // NUM_PSEGS = H_PIXELS / PIXELS_PER_PSEG
 156:main.c        ****  #define NUM_PSEGS_F (MAKEFLOAT(DE_ACTIVE_DOTS) / PIXELS_PER_PSEG_F)
 157:main.c        ****  // And here, we're leaving NUM_PSEGS_F as a float so it can be used in 
 158:main.c        ****  // macro-comparisons, if necessary...
 159:main.c        ****  // (I don't think MAKELONG or any other such macro could handle this
 160:main.c        ****  // casting... it may be redundant since most uses would be assignments in
 161:main.c        ****  // integers, but if math is used, we don't want floating-point math to be
 162:main.c        ****  // run on it in real-time calculations...)
 163:main.c        ****  #define NUM_PSEGS ((uint16_t)(NUM_PSEGS_F))
 164:main.c        ****  // As a hand-job test: Using old values (when 357 was determined)
 165:main.c        ****  // DE_ACTIVE_DOTS = 1024
 166:main.c        ****  // CPUCYCS_PER_PSEG = 20
 167:main.c        ****  // PLLCYC_PER_CPUCYC = 8
 168:main.c        ****  // PLLCYC_PER_LVDSBIT =8
 169:main.c        ****  // LVDSBITS_PER_PIXEL =7
 170:main.c        ****  // 1024 / (20 * 8 / 8 / 7) = 358.4
 171:main.c        ****  // (The old NUM_PSEGS = 1024/3+16 = 357.333)
 172:main.c        ****  // (As an aside, if CPUCYCS_PER_PSEG = 21: 1024/(21*8/8/7)=341.333 
 173:main.c        ****  //    == exactly three pixels per pseg)
 174:main.c        **** #else
 175:main.c        ****  #warning "NUM_PSEGS is hardcoded, but should be calculated by many factors, such as LVDS_PRESCALER
 176:main.c        ****  #define NUM_PSEGS (1024/3+16)
 177:main.c        **** #endif
 178:main.c        **** 
 179:main.c        **** //Yes, I know #including C files is bad-practice...
 180:main.c        **** // and yes, this has to be here... for now.
 181:main.c        **** #if(defined(SEG_RACER) && SEG_RACER)
 182:main.c        ****  #include "seg_racer.c"
 183:main.c        **** #endif
 184:main.c        **** 
 185:main.c        **** 
 186:main.c        **** 
 187:main.c        **** 
 188:main.c        **** 
 189:main.c        **** // a/o v60, this note is OLD, and actually is the whole point behind
 190:main.c        **** // ROW_SEG_BUFFER's current implementation.
 191:main.c        **** // TODO: Between OSCCAL_VAL and FRAME_UPDATE_DELAY
 192:main.c        **** //  it seems the speed (at least for the LTN) isn't so important after all
 193:main.c        **** //  This could be used to my advantage...
 194:main.c        **** //  Maybe bump OSCCAL_VAL all the way up, but use a slower "bit-rate"
 195:main.c        **** //  Thus, pixels could be skinnier, thus higher-resolution.
 196:main.c        **** //   Or more instructions could be used for the same resolution
 197:main.c        **** //   allowing, e.g. sprites from program-memory, without necessitating a
 198:main.c        **** //   large (or any?) frame-buffer...
 199:main.c        **** 
 200:main.c        **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 167


 201:main.c        **** //This used to be handled by TOOFAST_TEST, but now can be configured here
 202:main.c        **** // 0xff sets the processor to run as fast as possible 
 203:main.c        **** //  (~16MHz? ~128MHz bit-rate)
 204:main.c        **** // 0x00 sets it as slow as possible (~4MHz, ~32MHz bit-rate)
 205:main.c        **** //  good for testing whether odd colors
 206:main.c        **** //  or bad syncing is due to bits being shifted, etc. 
 207:main.c        **** //  Maybe due to slow "LVDS" conversion chips, or whatnot.
 208:main.c        **** //   This seems to be the case right now... 0xff: black is appearing green
 209:main.c        **** //   There should be *some* green in it, but not this much.
 210:main.c        **** //   Likely due to different propagation delays between my under-driven
 211:main.c        **** //    74LS86's (running red and green), from 3.3V!
 212:main.c        **** //    and the happier and newer 74AHC XOR and OR currently driving the
 213:main.c        **** //    clock and DVH/Blue signals
 214:main.c        **** //  Highly dependent on the screen itself, some may not run at all with
 215:main.c        **** //  such slow bitrates... heck, some may not run at all even at the fastest
 216:main.c        **** // If SLOW_EVERYTHING_TEST is true, this value is overridden
 217:main.c        **** // LTN last used 0x20
 218:main.c        **** // a/o v59:
 219:main.c        **** // 0xD8 is the lowest value that syncs reliably, a few glitches from time
 220:main.c        **** // to time.
 221:main.c        **** // The effect of lower values isn't *quite* what I was expecting, but
 222:main.c        **** // definitely suggests that using ROW_SEG_BUFFER at this bit/refresh-rate
 223:main.c        **** // is dang-near right at the minimum required for this display.
 224:main.c        **** // This might be why the other (same model) display didn't work, but its
 225:main.c        **** // flakeyness at 0xff appeared different than this one's at lower OSCCALs
 226:main.c        **** // --Later note... actually retrying the "flakey" display with the same
 227:main.c        **** //   configuration. Actually, yes, the problem looks dang-near identical to
 228:main.c        **** //   the "reliable" display's being run at OSCCAL_VALs lower than 0xD8
 229:main.c        **** //   Both displays are of the same manufacturer/model.
 230:main.c        **** //    "reliable" has the chip: LXD91810 VS252AG
 231:main.c        **** //    "flakey"   has the chip: LXD91810 VS242AC
 232:main.c        **** //   The only bit I don't get is that I'm dang-near certain I had both
 233:main.c        **** //   displays working at one point, and from the same code...
 234:main.c        **** //   but this OSCCAL value is the maximum, and the only other way to speed
 235:main.c        **** //   up the bit-rate changes the resolution; which I haven't done
 236:main.c        **** //   for quite some time.
 237:main.c        **** //   Also different about this test than when I originally determined it
 238:main.c        **** //   "flakey": I've since switched the 74LS00 and LS32 out for LS86's
 239:main.c        **** //   (These are wired such that one chip is responsible for the + side of
 240:main.c        **** //    every LVDS signal, and one chip is responsible for the - side.
 241:main.c        **** //    The best-practice, probably, would be to have the + and - sides of
 242:main.c        **** //    an LVDS signal on the same chip. It's also plausible that my test was
 243:main.c        **** //    so long ago that it was on the old board which had this configuration
 244:main.c        **** //    but I doubt that, since that board was so hokily-implemented (with
 245:main.c        **** //    chip-clips and grabbers all over the place) that I can't imagine it
 246:main.c        **** //    was ever running again after all those months of disuse. Though...
 247:main.c        **** //    if that *was* the case... it could also be that I'm using a different
 248:main.c        **** //    ATtiny861... in which case, maybe the RC oscillator and/or PLL aren't
 249:main.c        **** //    capable of running as fast... 
 250:main.c        **** //    Not that I have a ton of these things lying around (three total, in
 251:main.c        **** //    various projects already)
 252:main.c        **** //    BUT the end-result may be that I just happen to have the one display
 253:main.c        **** //    and ATtiny861 on the planet that will work together. That'd be lame.)
 254:main.c        **** //#define OSCCAL_VAL	0xff//0xDB//0xDC//0xE0//0//0xff//0x20//0xff //0x00
 255:main.c        **** //This has been moved to the top...
 256:main.c        **** 
 257:main.c        **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 168


 258:main.c        **** 
 259:main.c        **** 
 260:main.c        **** //a/o v60: These are old experiments...
 261:main.c        **** // they *are useful* for testing new displays...
 262:main.c        **** // but I can't recall off-hand how to use them instead of (or with?)
 263:main.c        **** // rowSegBuffer...
 264:main.c        **** // They're defined and better-described in lcdStuff.c...
 265:main.c        **** //These three are mutually-exclusive (BLUE_VERT_BAR overrides DE_BLUE)
 266:main.c        **** // (BLUE_DIAG_BAR overrides both...)
 267:main.c        **** //#define BLUE_DIAG_BAR TRUE
 268:main.c        **** //A single black bar, followed by a single blue bar... ~1/3 and 2/3's width
 269:main.c        **** //#define BLUE_VERT_BAR TRUE
 270:main.c        **** //#define DE_BLUE TRUE
 271:main.c        **** // OLD NOTE:
 272:main.c        **** // NONE SELECTED DOESN'T SYNC!!! DE not detected???
 273:main.c        **** 
 274:main.c        **** 
 275:main.c        **** 
 276:main.c        **** // Default is drawPix, from program memory...
 277:main.c        **** // a/o v60: drawPix() has since become the de-facto function for drawing
 278:main.c        **** // a row of pixels, regardless of the method.
 279:main.c        **** // It's defined as necessary...
 280:main.c        **** 
 281:main.c        **** 
 282:main.c        **** 
 283:main.c        **** //This is where COLOR_BAR_SCROLL and PIXEL_SCROLL were, in part.
 284:main.c        **** 
 285:main.c        **** 
 286:main.c        **** 
 287:main.c        **** 
 288:main.c        **** 
 289:main.c        **** 
 290:main.c        **** //#include "lvds.c"
 291:main.c        **** 
 292:main.c        **** 
 293:main.c        **** 
 294:main.c        **** #if(defined(LOADROW) && LOADROW)
 295:main.c        **** static __inline__ \
 296:main.c        **** void loadRow(uint16_t rowNum) \
 297:main.c        **** 	__attribute__((__always_inline__));
 298:main.c        **** #endif
 299:main.c        **** 
 300:main.c        **** 
 301:main.c        **** #if(!defined(PWM_TESTING) || !PWM_TESTING)
 302:main.c        ****  #include _LCDSTUFF_CFILE_
 303:main.c        ****  //#include "../../../_commonCode/lcdStuff/0.50ncf/lcdStuff.c"
 304:main.c        **** 
 305:main.c        **** 
 306:main.c        ****  volatile uint8_t frameCount = 0;
 307:main.c        **** 
 308:main.c        ****  //Nearly everything display-related happens in this interrupt
 309:main.c        ****  // It even calls the functions that load (and calculate!) the data for the
 310:main.c        ****  // next row.
 311:main.c        ****  // So basically, the entire project is running via timer-interrupt.
 312:main.c        ****  SIGNAL(HSYNC_TIMER_INTERRUPT_VECT) //TIMER0_COMPA_vect)
 313:main.c        ****  {
 314:main.c        ****  //	static uint8_t frameCount = 0;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 169


 315:main.c        **** 
 316:main.c        **** 	//Could insert a delay of sorts for scopability...
 317:main.c        **** 	// (otherwise there's not much guarantee that register-assignments
 318:main.c        **** 	//  later will align with the LVDS frame... though ALIGN should help)
 319:main.c        **** 	// see scopeHsync.c
 320:main.c        **** 
 321:main.c        **** 	//So here's the deal:
 322:main.c        **** 	// This handles a single row of pixel/timing data (Hblanks included)
 323:main.c        **** 	// updateLCD()             (from lcdStuff.c) 
 324:main.c        **** 	//  --> loadData()         (from lcdStuff.c)
 325:main.c        **** 	//        HSync
 326:main.c        **** 	//        H-Back-Porch
 327:main.c        **** 	//        --> drawPix()    (drawPix() may be here or elsewhere)
 328:main.c        **** 	//        (H-Front-Porch)
 329:main.c        **** 	//
 330:main.c        **** 	// drawPix is only called for drawn-rows (where DE is active, NOT for
 331:main.c        **** 	// Vblank rows)
 332:main.c        **** 	// H-Front-Porch is handled in the time between completion of this
 333:main.c        **** 	// interrupt and the next interrupt...
 334:main.c        **** 
 335:main.c        **** 	if(updateLCD())
 336:main.c        **** 	{
 337:main.c        **** 		frameCount++;
 338:main.c        **** 		//updateLCD() returns TRUE when the frame is complete
 339:main.c        **** 		// which can be used for whatever purposes 
 340:main.c        **** 		// (e.g. FRAME_COUNT_TO_DELAY)
 341:main.c        **** 	}
 342:main.c        **** 
 343:main.c        ****  #if(defined(LOADROW) && LOADROW)
 344:main.c        **** 	//Load the next row into the row(seg)buffer
 345:main.c        **** 	//data is enabled after T_VD+T_Vlow...
 346:main.c        **** 	//a/o v60: Rereading this is confusing...
 347:main.c        **** 	// Basically, there's no reason to call loadRow for display-lines
 348:main.c        **** 	// which don't display data (e.g. V-Sync)
 349:main.c        **** 	if((hsyncCount >= T_VD+T_Vlow) && (hsyncCount < T_VD+T_Vlow+V_COUNT))
 350:main.c        **** 		loadRow(hsyncCount - (T_VD+T_Vlow));
 351:main.c        ****  #endif
 352:main.c        **** 	// a/o v60: This is a funny old note... I can't recall a time when
 353:main.c        **** 	// loadRow was written, then removed, then added again. Weird:
 354:main.c        **** 	// Here is where loadRow used to be called
 355:main.c        **** 	// it has been moved to oldNotes.txt, but it would make more sense
 356:main.c        **** 	// to look at LCDdirectLVDS <25 or LCDdirect
 357:main.c        **** 	// loadRow used the time between DE inactive and the next Hsync
 358:main.c        **** 	// to load a row to a row-buffer (as opposed to a frame-buffer)
 359:main.c        **** 	// thus, DE could gain more pixels because there would be fewer
 360:main.c        **** 	// calculations to determine the memory location to write from
 361:main.c        **** 	// This effect has since been minimized
 362:main.c        **** 	// BUT loadRow might be necessary for program-memory-based images...
 363:main.c        ****  }
 364:main.c        **** #endif //!PWM_TESTING
 365:main.c        **** 
 366:main.c        **** 
 367:main.c        **** #if(defined(SEG_HFM) && SEG_HFM)
 368:main.c        **** 	#include "seg_hfm.c"
 369:main.c        **** #endif
 370:main.c        **** 
 371:main.c        **** #if(defined(SEG_QUESTION) && SEG_QUESTION)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 170


 372:main.c        **** 	#include "seg_question.c"
 373:main.c        **** #endif
 374:main.c        **** 
 375:main.c        **** #if(defined(SEG_SINE) && SEG_SINE)
 376:main.c        **** 	#include "seg_sine.c"
 377:main.c        **** #endif
 378:main.c        **** 
 379:main.c        **** #if(defined(LOADROW) && LOADROW)
 380:main.c        **** // whatever this means... it's OLD.
 381:main.c        **** //#warning "loadRow is currently in an intermediate phase..."
 382:main.c        **** void loadRow(uint16_t rowNum)
 383:main.c        **** {
 384:main.c        **** 
 385:main.c        **** 
 386:main.c        **** #if(defined(ROW_SEG_BUFFER) && ROW_SEG_BUFFER)
 387:main.c        ****  #if (defined(SEG_RACER) && SEG_RACER)
 388:main.c        **** 	racer_loadRow(rowNum);
 389:main.c        ****  #elif (defined(SEG_HFM) && SEG_HFM)
 390:main.c        ****  	segHFM_loadRow(rowNum);
 391:main.c        ****  #elif (defined(SEG_QUESTION) && SEG_QUESTION)
 392:main.c        ****  	segQuestion_loadRow(rowNum);
 393:main.c        ****  #elif (defined(SEG_SINE) && SEG_SINE)
 394:main.c        ****  	segSine_loadRow(rowNum);
 395:main.c        ****  #elif (defined(SEG_LINE) && SEG_LINE)
 396:main.c        **** 	//Left here for an example...
 397:main.c        **** 	// Draws a diagonal line 
 398:main.c        **** 	//OLD NOTE:
 399:main.c        **** 	//syncing issues due to recursion overflowing the stack???
 400:main.c        **** 	// Apparently was
 401:main.c        **** 	   
 402:main.c        **** 	//Isn't BLAH = 1 necessary so we don't get a row with no data?
 403:main.c        **** 	// *looks* like it's working, but I dunno...
 404:main.c        **** 	#define BLAH 0
 405:main.c        **** 
 406:main.c        **** 	segClear();
 407:main.c        **** 	newSeg(3,0x06, (6<<4) | 3);									//W
 408:main.c        **** 	newSeg((rowNum&0xff) | BLAH, 0x06, (4<<4) | 0);				//R
 409:main.c        **** 	newSeg(1,0x06, (6<<4) | 3);									//W
 410:main.c        **** 	newSeg((255-(rowNum&0xff)) | BLAH, 0x06, (4<<4) | 0 );	//R
 411:main.c        **** 	newSeg(3,0x06, (6<<4) | 3);									//W
 412:main.c        **** 	segTerminate();
 413:main.c        **** 
 414:main.c        ****  #elif (defined(SEG_TET) && SEG_TET)
 415:main.c        **** 	//This isn't particularly functional, anymore
 416:main.c        **** 	// it used to be an intermediate stage between rowBuffer and 
 417:main.c        **** 	//  rowSegBuffer... Left here for an example of how it could be done...
 418:main.c        **** 	//ACTUALLY, a/o v60ish it has been reinstated...
 419:main.c        **** 	// and, in fact, a/o v62, this may become a great early-test for new
 420:main.c        **** 	// displays, as the necessary resolution is low, which would allow for
 421:main.c        **** 	// higher refresh-rates (which some displays may need)
 422:main.c        **** 	// (There are certainly other ways to make things more suitable for new
 423:main.c        **** 	// displays... these'll be explored in later code-revisions, probably)
 424:main.c        **** 
 425:main.c        ****   //SEG_STRETCH is the number of PSEGS that each row-buffer pixel is
 426:main.c        ****   //stretched-across. In this case (SEG_TET) (or any case where *only* the
 427:main.c        ****   //rowbuffer is used to fill the screen), the value of SEG_STRETCH should
 428:main.c        ****   //probably be varied dependent on NUM_PSEGS (which should be dependent on
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 171


 429:main.c        ****   //LVDS_PRESCALER and a few other factors) in order to stretch the
 430:main.c        ****   //row-buffer acreoss the entire screen. But I think most of these things
 431:main.c        ****   //are so-far hard-coded...
 432:main.c        ****   // Further, it's entirely possible (in a not-implemented-here case) to
 433:main.c        ****   // have the row-buffer occupy only a certain portion of the screen and
 434:main.c        ****   // modify the remaining psegs directly via other means... (I had this
 435:main.c        ****   // once, when displaying Tetris, Life, and a few others on the same
 436:main.c        ****   // screen, I think, right?)
 437:main.c        ****   //Anyhow, a/o a while back, SEG_TET is the only case using SEG_STRETCH 
 438:main.c        **** //  #if(!defined(SEG_STRETCH))
 439:main.c        **** // And a/o v62 Trying to bump the frame-rate up so the ChiMei display will
 440:main.c        **** // work, using LVDS_PRESCALER, this might help... again hardcoded where
 441:main.c        **** // ideally the thing would calculate itself... Though it's also handy to
 442:main.c        **** // have it hard-coded as it allows for testing the display's immunity (or
 443:main.c        **** // lack thereof) for long/short DEs
 444:main.c        **** #if(LVDS_PRESCALER == 1)
 445:main.c        ****  #define SEG_STRETCH 1
 446:main.c        **** #else
 447:main.c        ****  #define SEG_STRETCH 5 //(((NUM_PSEGS-6)+RB_WIDTH-1)/RB_WIDTH)
 448:main.c        **** #endif
 449:main.c        **** 	//3-5 = white + cyan
 450:main.c        **** 	//6 = letters alternating with above
 451:main.c        **** 	//7-9 = ditto, stretched
 452:main.c        **** 
 453:main.c        **** #define TET_VSTRETCH	16
 454:main.c        **** 	if(rowNum == 0)
 455:main.c        **** 	{
 456:main.c        **** 		//Probably not best to put this here, as we're still in the interrupt
 457:main.c        **** 		// extra-long calculations might cause syncing issues with displays
 458:main.c        **** 		// that require rows to be a constant time
 459:main.c        **** 		tetUpdate();
 460:main.c        **** 	}
 461:main.c        **** 	if(rowNum % TET_VSTRETCH == 0)
 462:main.c        **** 	{
 463:main.c        **** 		uint8_t i;
 464:main.c        **** 		for(i=0; i<RB_WIDTH; i++)
 465:main.c        **** 			rowBuffer[i] = fb_to_rb(_K);
 466:main.c        **** 		//	rowBuffer[i] = fb_to_rb((i+rowNum/TET_VSTRETCH)&0x3f);
 467:main.c        **** 		
 468:main.c        **** 		tet_drawRow(rowNum/TET_VSTRETCH, rowBuffer);
 469:main.c        **** 	}
 470:main.c        **** 	segClear();
 471:main.c        **** 
 472:main.c        **** 	//Good for syncing to have white on both borders...
 473:main.c        **** 	newSeg(3, 0x06, (6<<4) | 3);
 474:main.c        **** 	
 475:main.c        **** 	uint16_t i;
 476:main.c        **** 	//TET_OVERLAY alternates rows between the TETRIS board and
 477:main.c        **** 	// an rgb "gradient" The only purpose is to test the idea of
 478:main.c        **** 	// using the high vertical-resolution to essentially increase the
 479:main.c        **** 	// number of colors available to a low-resolution image
 480:main.c        **** 	// sort of like "dithering" in the ol' days of 256 colors in Windows
 481:main.c        **** 	// but easy to implement in this case with very little overhead 
 482:main.c        **** 	// row-by-row
 483:main.c        **** 	// The effect, from a ways back, looks like the colors are blended
 484:main.c        **** 	// (like the Text and Game-board are translucent)
 485:main.c        **** #define TET_OVERLAY TRUE
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 172


 486:main.c        **** 
 487:main.c        **** 	//TET_GRADIENT takes that a step further and attempts to create a
 488:main.c        **** 	// gradient between each color in that rgb-gradient.
 489:main.c        **** 	// It's not as pretty as I'd hoped... though it makes sense...
 490:main.c        **** 	// first we're alternating between TET's color and the background color
 491:main.c        **** 	// then the background color is (roughly) alternating between a couple
 492:main.c        **** 	// colors, several rows between...
 493:main.c        **** 	// so if a color is stretched 16 rows vertically, that only leaves 8
 494:main.c        **** 	// rows for the color-gradient... might work better over more gradual
 495:main.c        **** 	// color-changes
 496:main.c        **** #define TET_GRADIENT TRUE
 497:main.c        **** 
 498:main.c        **** #if (defined(TET_OVERLAY) && TET_OVERLAY)
 499:main.c        **** 	if(rowNum & 0x01)
 500:main.c        **** 	{
 501:main.c        **** #endif
 502:main.c        **** 	for(i=0; i<RB_WIDTH; i++)
 503:main.c        **** 	{
 504:main.c        **** 		//i+1 because we don't want to overwrite the white border...
 505:main.c        **** 		rbpix_to_seg(rowBuffer[i], i+1, SEG_STRETCH);
 506:main.c        **** 	}
 507:main.c        **** 
 508:main.c        **** #if (defined(TET_OVERLAY) && TET_OVERLAY)
 509:main.c        **** 	}
 510:main.c        **** 	else
 511:main.c        **** 	{
 512:main.c        **** 		#define ROWS_PER 64//(V_COUNT/NUM_COLORS)
 513:main.c        **** 
 514:main.c        **** 		uint8_t fbColor;
 515:main.c        **** 
 516:main.c        **** #if (defined(TET_GRADIENT) && TET_GRADIENT)
 517:main.c        **** 		static hfm_t hfmGradient;
 518:main.c        **** 		if(rowNum%ROWS_PER == 0)
 519:main.c        **** 			hfm_setup(&hfmGradient, 0, ROWS_PER/2-4);
 520:main.c        **** 
 521:main.c        **** 		//It's worth it to experiment with changing the range of the 
 522:main.c        **** 		// hfmGradient, ('-4' above and '+4' below).
 523:main.c        **** 		// to try to avoid one or two stray spikes
 524:main.c        **** 		// (e.g. power = 1, maxPower = 15, there'll be one bright row
 525:main.c        **** 		//  and 14 dark, it sticks out like a sore-thumb)
 526:main.c        **** 		//  These values are experimental, and entirely dependent on the
 527:main.c        **** 		//  values used...
 528:main.c        **** 
 529:main.c        **** 		hfm_setPower(&hfmGradient, (rowNum/2)%(ROWS_PER/2)+4);
 530:main.c        **** 
 531:main.c        **** 		if(hfm_nextOutput(&hfmGradient))
 532:main.c        **** 			fbColor = rgbGradient(ROWS_PER-1 - rowNum/(ROWS_PER)+16-1);
 533:main.c        **** 		else
 534:main.c        **** #endif	//TET_GRADIENT
 535:main.c        **** 			fbColor = rgbGradient(ROWS_PER-1 - rowNum/(ROWS_PER)+16);
 536:main.c        **** 
 537:main.c        **** 		addSegfb(RB_WIDTH*SEG_STRETCH, (fbColor));
 538:main.c        **** 		//newSeg(SEG_STRETCH, fb_to_seg((rowNum*64/768)&0x3f));
 539:main.c        **** 
 540:main.c        **** 	}
 541:main.c        **** #endif	//TET_OVERLAY
 542:main.c        **** 	//white...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 173


 543:main.c        **** 	newSeg(3, 0x06, (6<<4) | 3);
 544:main.c        **** 	segTerminate();
 545:main.c        ****  #elif (defined(SEG_GRADIENT) && SEG_GRADIENT)
 546:main.c        **** 	static hfm_t hfmGradient;
 547:main.c        **** #define ROWS_PER	(255)	//(V_COUNT/3) == 256
 548:main.c        **** 
 549:main.c        **** 	if(rowNum%ROWS_PER == 0)
 550:main.c        **** 		hfm_setup(&hfmGradient, 0, ROWS_PER);
 551:main.c        **** 
 552:main.c        **** 	uint8_t color;
 553:main.c        **** 
 554:main.c        **** 	uint16_t power;
 555:main.c        **** 
 556:main.c        **** 	if(rowNum < ROWS_PER/16)
 557:main.c        **** 		rowNum = 0;
 558:main.c        **** 	else
 559:main.c        **** 		rowNum -= ROWS_PER/16;
 560:main.c        **** 
 561:main.c        **** 	//Since there are four shades, there will be three gradients...
 562:main.c        **** 	if(rowNum < ROWS_PER)
 563:main.c        **** 	{
 564:main.c        **** 		//The ROWS_PER/16 stuff is to help alleviate sharp color-spikes
 565:main.c        **** 		// which occur early-on... see the explanation in SEG_TET.
 566:main.c        **** 		color = 0;
 567:main.c        **** 		//hfm_setPower(&hfmGradient, 
 568:main.c        **** 		power = (rowNum); // + ROWS_PER/16);
 569:main.c        **** 	}
 570:main.c        **** 	else if(rowNum < ROWS_PER*2)
 571:main.c        **** 	{
 572:main.c        **** 		color = 1;
 573:main.c        **** 		//hfm_setPower(&hfmGradient, 
 574:main.c        **** 		power = rowNum-(ROWS_PER); // + ROWS_PER/16;
 575:main.c        **** 	}
 576:main.c        **** 	else
 577:main.c        **** 	{
 578:main.c        **** 		color = 2;
 579:main.c        **** 		//hfm_setPower(&hfmGradient, 
 580:main.c        **** 		power = rowNum-(ROWS_PER*2); // + ROWS_PER/16;
 581:main.c        **** 	}
 582:main.c        **** 
 583:main.c        **** 
 584:main.c        **** 	if(power < ROWS_PER/16)
 585:main.c        **** 		power = 0;
 586:main.c        **** 
 587:main.c        **** 	hfm_setPower(&hfmGradient, (power <= 255) ? power : 255);
 588:main.c        **** 
 589:main.c        **** 	if(hfm_nextOutput(&hfmGradient))
 590:main.c        **** 		color++;
 591:main.c        **** 
 592:main.c        **** 	color |= color<<2 | color<<4;
 593:main.c        **** 
 594:main.c        **** 	segClear();
 595:main.c        **** 	addSegfb(3, _W);
 596:main.c        **** 	addSegfb(NUM_PSEGS-6, color); 
 597:main.c        **** 	addSegfb(3, _W);
 598:main.c        **** 	segTerminate();
 599:main.c        ****  #elif(defined(SEG_GRADIENT2) && SEG_GRADIENT2)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 174


 600:main.c        **** #error "Heh, never did implement this..."
 601:main.c        ****  #else
 602:main.c        **** 	#error "Gotta select a SEG_... option, or create your own"
 603:main.c        ****  #endif //SEG_ selection
 604:main.c        **** #endif //ROW_SEG_BUFFER
 605:main.c        **** }
 606:main.c        **** #endif //LOAD_ROW
 607:main.c        **** 
 608:main.c        **** #include "hsyncTimerStuff.c"
 609:main.c        **** 
 610:main.c        **** 
 611:main.c        **** #if (!defined(EXTERNAL_DRAWPIX) || !EXTERNAL_DRAWPIX)
 612:main.c        **** #if (defined(ROW_SEG_BUFFER) && ROW_SEG_BUFFER)
 613:main.c        **** void drawPix(uint16_t rowNum)
 614:main.c        **** {
 615:main.c        **** 	//Note that rowNum isn't really used here...
 616:main.c        **** 	// and it's only a uint8_t!
 617:main.c        **** 	rsb_drawPix(rowNum);
 618:main.c        **** }
 619:main.c        **** 
 620:main.c        **** #elif (defined(BLUE_ADC) && BLUE_ADC)
 621:main.c        **** //This is pretty much identical to most of the BLUE_TESTING in lcdStuff.c
 622:main.c        **** // with a slight twist...
 623:main.c        **** static __inline__ void drawPix(uint16_t rowNum)
 624:main.c        **** {
 625:main.c        ****       //uint16_t blueCyc = DOTS_TO_CYC(rowNum);
 626:main.c        ****       //uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
 627:main.c        **** 		adc_startConversion();
 628:main.c        **** 		while(adc_isBusy())
 629:main.c        **** 			asm("nop;");
 630:main.c        **** 
 631:main.c        ****       uint16_t blueDots = adc_getValue();
 632:main.c        ****       uint16_t notBlueDots = DE_ACTIVE_DOTS - blueDots;
 633:main.c        **** 
 634:main.c        ****       DEonly_fromNada();
 635:main.c        ****       //delay_cyc(notBlueCyc);
 636:main.c        ****       //delay_Dots(notBlueDots);
 637:main.c        ****       DE_DotDelay(notBlueDots);
 638:main.c        ****       DEblue_fromDEonly();
 639:main.c        ****       //delay_cyc(blueCyc);
 640:main.c        ****       //delay_Dots(blueDots);
 641:main.c        ****       DE_DotDelay(blueDots);
 642:main.c        ****       Nada_fromDEblue();
 643:main.c        **** }
 644:main.c        **** 
 645:main.c        **** #elif (defined(BLUE_AND_COLORS) && BLUE_AND_COLORS)
 646:main.c        **** // This draws four colors on the screen, black, red, blue, and cyan
 647:main.c        **** // in order to test the other colors (red and green)
 648:main.c        **** static __inline__ void drawPix(uint16_t rowNum)
 649:main.c        **** {
 650:main.c        **** 	//DE_ACTIVE_DELAYABLE attempts to take into account the overhead of
 651:main.c        **** 	//DE_DotDelay, setColors(), etc...
 652:main.c        **** 	//It's entirely arbitrary, and dependent on CPU speed (PLL_SYSCLK)
 653:main.c        **** 	// and many other factors...
 654:main.c        **** #if(defined(PLL_SYSCLK) && PLL_SYSCLK)
 655:main.c        ****  #define DE_ACTIVE_DELAYABLE	(DE_ACTIVE_DOTS-100)
 656:main.c        **** 		//Attempting to stretch the diagonal from corner-to-corner...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 175


 657:main.c        **** 		uint16_t blueDots = (uint32_t)DE_ACTIVE_DELAYABLE * (uint32_t)rowNum
 658:main.c        **** 		  										/ V_COUNT;
 659:main.c        **** #else
 660:main.c        **** 		//Because, I guess, the math is too long without PLL_SYSCLK
 661:main.c        **** 		// since it's not syncing
 662:main.c        ****  #define DE_ACTIVE_DELAYABLE	(DE_ACTIVE_DOTS-200)
 663:main.c        **** 		uint16_t blueDots = rowNum;
 664:main.c        **** #endif
 665:main.c        **** 		uint16_t notBlueDots = DE_ACTIVE_DELAYABLE - blueDots;
 666:main.c        **** 
 667:main.c        **** 		uint16_t halfNotBlueDots = notBlueDots/2;
 668:main.c        **** 
 669:main.c        **** 		uint16_t halfBlueDots = blueDots/2;
 670:main.c        **** 
 671:main.c        **** 
 672:main.c        **** 		//fullRed(), noRed(), fullGreen(), and noGreen()
 673:main.c        **** 		// function differently than the DEblue...() functions.
 674:main.c        **** 		// Since "blue" is shared with the timing-signals,
 675:main.c        **** 		// changing a blue-value requires keeping in mind the previous and
 676:main.c        **** 		// next states of the timing (usually DE-active in all cases, but not
 677:main.c        **** 		// always).
 678:main.c        **** 		// Changing of the "red" and "green" signals is easier, since
 679:main.c        **** 		// doing-so doesn't affect anything else.
 680:main.c        **** 
 681:main.c        **** 		DEonly_fromNada();
 682:main.c        **** 
 683:main.c        **** 		//Black
 684:main.c        **** 		DE_DotDelay(halfNotBlueDots);
 685:main.c        **** 		
 686:main.c        **** 		//Red
 687:main.c        **** 		fullRed();
 688:main.c        **** 		DE_DotDelay(halfNotBlueDots);
 689:main.c        **** 
 690:main.c        **** 		//Blue
 691:main.c        **** 		noRed();
 692:main.c        **** 		DEblue_fromDEonly();
 693:main.c        **** 		
 694:main.c        **** 		DE_DotDelay(halfBlueDots);
 695:main.c        **** 
 696:main.c        **** 		//Cyan
 697:main.c        **** 		fullGreen();
 698:main.c        **** 		
 699:main.c        **** 		DE_DotDelay(halfBlueDots);
 700:main.c        **** 
 701:main.c        **** 		noGreen();
 702:main.c        **** 		Nada_fromDEblue();
 703:main.c        **** }
 704:main.c        **** #elif (defined(BLUE_ALLSHADES) && BLUE_ALLSHADES)
 705:main.c        **** //This is an attempt at showing all available shades of blue
 706:main.c        **** // Originally it was determined that 11 shades could be shown
 707:main.c        **** // but there seems to be some trouble with using wrap-around values
 708:main.c        **** // (e.g. when reset occurs before set in the count)
 709:main.c        **** // It works fine when it's the *only* shade shown, but if shown with other
 710:main.c        **** // shades on the screen, it causes syncing problems
 711:main.c        **** // So, it's been determined that there are basically four discernable
 712:main.c        **** // shades of blue which are usable with the PWM161
 713:main.c        **** //
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 176


 714:main.c        **** // The original idea: BLUE_ALLSHADES=TRUE, ALLSHADES_GRADIENT=FALSE
 715:main.c        **** //  would fade the screen from black to bright blue
 716:main.c        **** //  (it makes use of the wraparound-values)
 717:main.c        **** // Then ALLSHADES_GRADIENT would display them all on the screen at once
 718:main.c        **** // 
 719:main.c        **** // It's since been somewhat hacked, to disable the unstable wrap-around
 720:main.c        **** // values...
 721:main.c        **** // Then ALLSHADES_AND_COLORS was added, to show all usable colors
 722:main.c        **** // This's gotten a bit bloated, and would probably be better-implemented as
 723:main.c        **** // several different BLUE_WHATEVERs
 724:main.c        **** static __inline__ void drawPix(uint16_t rowNum)
 725:main.c        **** {
 726:main.c        **** #define BLUESHADES_MAX 11
 727:main.c        **** 		
 728:main.c        **** #if(!defined(ALLSHADES_GRADIENT) || !ALLSHADES_GRADIENT)
 729:main.c        ****  #define DOTSPERSHADE (DE_ACTIVE_DOTS) ///BLUESHADES_MAX)
 730:main.c        **** 		static uint8_t frameCount = 0;
 731:main.c        **** 		static uint8_t shadeNum = 0;
 732:main.c        **** 
 733:main.c        **** 		if(rowNum == 0)
 734:main.c        **** 			frameCount++;
 735:main.c        **** 
 736:main.c        **** 		if(frameCount == 60)
 737:main.c        **** 		{
 738:main.c        **** 			frameCount = 0;
 739:main.c        **** 			shadeNum++;
 740:main.c        **** 			if(shadeNum >= BLUESHADES_MAX)
 741:main.c        **** 				shadeNum = 0;
 742:main.c        **** 		}
 743:main.c        **** #else
 744:main.c        ****  #if(defined(ALLSHADES_AND_COLORS) && ALLSHADES_AND_COLORS)
 745:main.c        **** 		setRed4(4*rowNum/V_COUNT);
 746:main.c        **** 		setGreen4((16*rowNum/V_COUNT)%4);
 747:main.c        **** 		/*
 748:main.c        **** 		//K, R, G, Y
 749:main.c        **** 		if(rowNum < V_COUNT/4)
 750:main.c        **** 		{
 751:main.c        **** 			noRed();
 752:main.c        **** 			noGreen();
 753:main.c        **** 		}
 754:main.c        **** 		else if(rowNum < 2*V_COUNT/4)
 755:main.c        **** 		{
 756:main.c        **** 			fullRed();
 757:main.c        **** 			noGreen();
 758:main.c        **** 		}
 759:main.c        **** 		else if(rowNum < 3*V_COUNT/4)
 760:main.c        **** 		{
 761:main.c        **** 			fullGreen();
 762:main.c        **** 			noRed();
 763:main.c        **** 		}
 764:main.c        **** 		else
 765:main.c        **** 		{
 766:main.c        **** 			fullGreen();
 767:main.c        **** 			fullRed();
 768:main.c        **** 		}
 769:main.c        **** 		*/
 770:main.c        ****  #endif
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 177


 771:main.c        ****  //Add a little bit of extra delay for calculations...
 772:main.c        ****  #define START_SHADE 0//10 //5 //10
 773:main.c        ****  #define END_SHADE   10//0 //7 //10 //0
 774:main.c        **** 
 775:main.c        ****  #define SHADE_DIR_SIGN ((END_SHADE > START_SHADE) ? +1 : -1)
 776:main.c        ****  #define NUM_SHADES  (((SHADE_DIR_SIGN > 0) ? (END_SHADE-START_SHADE) \
 777:main.c        **** 			 :(START_SHADE-END_SHADE))+1)
 778:main.c        **** 
 779:main.c        **** // Weird... with +0, syncing is way-off (such that the red/green doesn't
 780:main.c        **** // come through *at all*
 781:main.c        **** // and so-forth.
 782:main.c        ****  #define DOTSPERSHADE (DE_ACTIVE_DOTS/(NUM_SHADES+15))
 783:main.c        **** 		int8_t shadeNum;
 784:main.c        **** 
 785:main.c        **** 		DEonly_init();
 786:main.c        **** 
 787:main.c        **** 		for(shadeNum=START_SHADE; shadeNum != (END_SHADE+SHADE_DIR_SIGN);
 788:main.c        **** 				shadeNum+=SHADE_DIR_SIGN)
 789:main.c        **** 		{
 790:main.c        **** 
 791:main.c        **** #endif
 792:main.c        **** 		uint8_t ocr2sa_val;
 793:main.c        **** 		uint8_t ocr2ra_val;
 794:main.c        **** 
 795:main.c        **** 		//Black
 796:main.c        **** //		DE_DotDelay(DOTSPERSHADE);
 797:main.c        **** 
 798:main.c        **** 		//The commented-out cases are those that require wrapping
 799:main.c        **** 		// (e.g. "set" occurs *after* "reset")
 800:main.c        **** 		// They don't seem to work too well, when switching back and forth
 801:main.c        **** /*		switch(shadeNum)
 802:main.c        **** 		{
 803:main.c        **** 			//Black	//these're from DEonly_init();
 804:main.c        **** 			case 0:
 805:main.c        **** 				ocr2sa_val = 1;
 806:main.c        **** 				ocr2ra_val = 4;
 807:main.c        **** 				break;
 808:main.c        **** 			case 1:
 809:main.c        **** 				//4:
 810:main.c        **** 				ocr2sa_val = 0;
 811:main.c        **** 				ocr2ra_val = 4;	
 812:main.c        **** 				break;
 813:main.c        **** //			case 2:
 814:main.c        **** //				//12:
 815:main.c        **** //				ocr2sa_val = 6;
 816:main.c        **** //				ocr2ra_val = 4;	
 817:main.c        **** //				break;
 818:main.c        **** //			case 3:
 819:main.c        **** //				//28:
 820:main.c        **** //				ocr2sa_val = 5;
 821:main.c        **** //				ocr2ra_val = 4;	
 822:main.c        **** //				break;
 823:main.c        **** 			case 2:
 824:main.c        **** 				//32:
 825:main.c        **** 				ocr2sa_val = 1;
 826:main.c        **** 				ocr2ra_val = 5;	
 827:main.c        **** 				break;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 178


 828:main.c        **** 			case 3:
 829:main.c        **** 				//36:
 830:main.c        **** 				ocr2sa_val = 0;
 831:main.c        **** 				ocr2ra_val = 5;	
 832:main.c        **** 				break;
 833:main.c        **** //			case 6:
 834:main.c        **** //				//44:
 835:main.c        **** //				ocr2sa_val = 6;
 836:main.c        **** //				ocr2ra_val = 5;	
 837:main.c        **** //				break;
 838:main.c        **** 			case 4:
 839:main.c        **** 				//48:
 840:main.c        **** 				ocr2sa_val = 1;
 841:main.c        **** 				ocr2ra_val = 6;	
 842:main.c        **** 				break;
 843:main.c        **** 			case 5:
 844:main.c        **** 				//52:
 845:main.c        **** 				ocr2sa_val = 0;
 846:main.c        **** 				ocr2ra_val = 6;	
 847:main.c        **** 				break;
 848:main.c        **** //			case 9:
 849:main.c        **** //				//56:
 850:main.c        **** //				ocr2sa_val = 1;
 851:main.c        **** //				ocr2ra_val = 0;	
 852:main.c        **** //				break;
 853:main.c        **** 			default:
 854:main.c        **** 				//60:
 855:main.c        **** 				ocr2sa_val = 0;
 856:main.c        **** 				ocr2ra_val = 8;	//7 dun woik... all-low
 857:main.c        **** 				break;
 858:main.c        **** 		}
 859:main.c        **** 
 860:main.c        **** 		//DEonly_fromNada();
 861:main.c        **** 	
 862:main.c        **** 		//setbit(PLOCK2, PCNF2);
 863:main.c        **** 
 864:main.c        **** 		lockPSC2();
 865:main.c        **** 		OCR2SAL = ocr2sa_val;
 866:main.c        **** 		OCR2RAL = ocr2ra_val;
 867:main.c        **** 		unlockPSC2();
 868:main.c        **** 		//clrbit(PLOCK2, PCNF2);
 869:main.c        **** */
 870:main.c        **** 		uint8_t newShade = shadeNum; //rowNum*64/V_COUNT) % NUM_SHADES;
 871:main.c        **** 
 872:main.c        **** 		if(newShade <= 3)			//0, 1, 2, 3
 873:main.c        **** 			newShade = newShade;
 874:main.c        **** 		else if(newShade <= 6)   //4->2, 5->1, 6->0
 875:main.c        **** 			newShade = (6-newShade);
 876:main.c        **** 		else
 877:main.c        **** 			newShade = 3;
 878:main.c        **** 
 879:main.c        **** 		setBlue4(newShade);
 880:main.c        **** 
 881:main.c        **** 		DE_DotDelay(DOTSPERSHADE);
 882:main.c        **** 
 883:main.c        **** #if(defined(ALLSHADES_GRADIENT) && ALLSHADES_GRADIENT)
 884:main.c        **** 		}
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 179


 885:main.c        ****  #if(defined(ALLSHADES_AND_COLORS) && ALLSHADES_AND_COLORS)
 886:main.c        **** 		setRed4(0); //4*rowNum/V_COUNT);
 887:main.c        **** 		setGreen4(0); //(16*rowNum/V_COUNT)%4);
 888:main.c        ****  #endif
 889:main.c        **** #endif
 890:main.c        **** 		Nada_init(); //fromDEblue();
 891:main.c        **** }
 892:main.c        **** 
 893:main.c        **** #elif (defined(PWM_TESTING) && PWM_TESTING)
 894:main.c        **** 	//No drawPix necessary...
 895:main.c        **** 
 896:main.c        **** #else
 897:main.c        **** //#include "_options/writeColor.c"
 898:main.c        **** //#include "nonRSB_drawPix.c"
 899:main.c        **** void drawPix(uint16_t rowNum)
 900:main.c        **** {
 901:main.c        **** 	//a/o v67, this is used by FRAMEBUFFER_TESTING...
 902:main.c        **** 	//Old:
 903:main.c        **** 	//This hasn't been used in quite some time... 
 904:main.c        **** 	// it may not work at all anymore.
 905:main.c        **** 	nonRSB_drawPix(rowNum);
 3975               		.stabn	68,0,905,.LM492-.LFBB17
 3976               	.LM492:
 3977 0d92 8697      		sbiw r24,38
 3978 0d94 0E94 0000 		call nonRSB_drawPix
 3979               	.L177:
 3980               	.LBE242:
 3981               	.LBE241:
 3982               	.LBE232:
 3983               	.LBE231:
 3984               		.stabs	"_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c",132,0,0,.Ltext56
 3985               	.Ltext56:
1276:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 3986               		.stabn	68,0,1276,.LM493-.LFBB17
 3987               	.LM493:
 3988 0d98 8091 0000 		lds r24,hsyncCount
 3989 0d9c 9091 0000 		lds r25,hsyncCount+1
 3990 0da0 0196      		adiw r24,1
 3991 0da2 9093 0000 		sts hsyncCount+1,r25
 3992 0da6 8093 0000 		sts hsyncCount,r24
1278:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	{
 3993               		.stabn	68,0,1278,.LM494-.LFBB17
 3994               	.LM494:
 3995 0daa 8332      		cpi r24,35
 3996 0dac 9105      		cpc r25,__zero_reg__
 3997 0dae 01F0      		breq .L179
 3998 0db0 00F4      		brsh .L180
 3999 0db2 8330      		cpi r24,3
 4000 0db4 9105      		cpc r25,__zero_reg__
 4001 0db6 01F4      		brne .L184
1284:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			//clrpinPORT(VSYNC_PIN, VSYNC_PORT);
 4002               		.stabn	68,0,1284,.LM495-.LFBB17
 4003               	.LM495:
 4004 0db8 1092 0000 		sts dataEnable,__zero_reg__
1286:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			Vsync_fromNada();
 4005               		.stabn	68,0,1286,.LM496-.LFBB17
 4006               	.LM496:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 180


 4007 0dbc 21E0      		ldi r18,lo8(1)
 4008 0dbe 2093 0000 		sts vSync,r18
1287:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
 4009               		.stabn	68,0,1287,.LM497-.LFBB17
 4010               	.LM497:
 4011 0dc2 AD9A      		sbi 0x15,5
 4012 0dc4 00C0      		rjmp .L189
 4013               	.L180:
1278:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	{
 4014               		.stabn	68,0,1278,.LM498-.LFBB17
 4015               	.LM498:
 4016 0dc6 8632      		cpi r24,38
 4017 0dc8 9105      		cpc r25,__zero_reg__
 4018 0dca 01F0      		breq .L182
 4019 0dcc 8632      		cpi r24,38
 4020 0dce 9340      		sbci r25,3
 4021 0dd0 01F4      		brne .L184
1306:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//	break;
 4022               		.stabn	68,0,1306,.LM499-.LFBB17
 4023               	.LM499:
 4024 0dd2 1092 0000 		sts dataEnable,__zero_reg__
1311:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0 //(FRAME_COUNT_TO_DELAY != 0)
 4025               		.stabn	68,0,1311,.LM500-.LFBB17
 4026               	.LM500:
 4027 0dd6 1092 0000 		sts hsyncCount+1,__zero_reg__
 4028 0dda 1092 0000 		sts hsyncCount,__zero_reg__
1325:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
 4029               		.stabn	68,0,1325,.LM501-.LFBB17
 4030               	.LM501:
 4031 0dde 81E0      		ldi r24,lo8(1)
1326:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		default:
 4032               		.stabn	68,0,1326,.LM502-.LFBB17
 4033               	.LM502:
 4034 0de0 0895      		ret
 4035               	.L179:
1296:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			Nada_fromVsync();
 4036               		.stabn	68,0,1296,.LM503-.LFBB17
 4037               	.LM503:
 4038 0de2 1092 0000 		sts vSync,__zero_reg__
1297:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
 4039               		.stabn	68,0,1297,.LM504-.LFBB17
 4040               	.LM504:
 4041 0de6 AD9A      		sbi 0x15,5
 4042 0de8 82E0      		ldi r24,lo8(2)
 4043 0dea 90E0      		ldi r25,0
 4044               	.L189:
 4045 0dec 9093 6500 		sts 100+1,r25
 4046 0df0 8093 6400 		sts 100,r24
 4047 0df4 84E0      		ldi r24,lo8(4)
 4048 0df6 90E0      		ldi r25,0
 4049 0df8 9FBD      		out 0x2e+1,r25
 4050 0dfa 8EBD      		out 0x2e,r24
 4051 0dfc AD98      		cbi 0x15,5
 4052 0dfe 00C0      		rjmp .L184
 4053               	.L182:
1301:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
 4054               		.stabn	68,0,1301,.LM505-.LFBB17
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 181


 4055               	.LM505:
 4056 0e00 81E0      		ldi r24,lo8(1)
 4057 0e02 8093 0000 		sts dataEnable,r24
 4058               	.L184:
1256:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 4059               		.stabn	68,0,1256,.LM506-.LFBB17
 4060               	.LM506:
 4061 0e06 80E0      		ldi r24,0
1352:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 4062               		.stabn	68,0,1352,.LM507-.LFBB17
 4063               	.LM507:
 4064 0e08 0895      		ret
 4065               		.size	updateLCD, .-updateLCD
 4066               		.stabs	"frameComplete:r(4,2)",64,0,1256,24
 4067               		.stabn	192,0,0,.LFBB17-.LFBB17
 4068               		.stabn	224,0,0,.Lscope17-.LFBB17
 4069               	.Lscope17:
 4070               		.stabs	"",36,0,0,.Lscope17-.LFBB17
 4071               		.stabd	78,0,0
 4072               		.stabs	"__vector_11:F(0,47)",36,0,312,__vector_11
 4073               	.global	__vector_11
 4074               		.type	__vector_11, @function
 4075               	__vector_11:
 4076               		.stabd	46,0,0
 4077               		.stabs	"main.c",132,0,0,.Ltext57
 4078               	.Ltext57:
 313:main.c        ****  //	static uint8_t frameCount = 0;
 4079               		.stabn	68,0,313,.LM508-.LFBB18
 4080               	.LM508:
 4081               	.LFBB18:
 4082 0e0a 1F92      		push r1
 4083 0e0c 0F92      		push r0
 4084 0e0e 0FB6      		in r0,__SREG__
 4085 0e10 0F92      		push r0
 4086 0e12 1124      		clr __zero_reg__
 4087 0e14 2F93      		push r18
 4088 0e16 3F93      		push r19
 4089 0e18 4F93      		push r20
 4090 0e1a 5F93      		push r21
 4091 0e1c 6F93      		push r22
 4092 0e1e 7F93      		push r23
 4093 0e20 8F93      		push r24
 4094 0e22 9F93      		push r25
 4095 0e24 AF93      		push r26
 4096 0e26 BF93      		push r27
 4097 0e28 EF93      		push r30
 4098 0e2a FF93      		push r31
 4099               	/* prologue: Signal */
 4100               	/* frame size = 0 */
 4101               	/* stack size = 15 */
 4102               	.L__stack_usage = 15
 335:main.c        **** 	{
 4103               		.stabn	68,0,335,.LM509-.LFBB18
 4104               	.LM509:
 4105 0e2c 0E94 0000 		call updateLCD
 4106 0e30 8823      		tst r24
 4107 0e32 01F0      		breq .L190
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 182


 337:main.c        **** 		//updateLCD() returns TRUE when the frame is complete
 4108               		.stabn	68,0,337,.LM510-.LFBB18
 4109               	.LM510:
 4110 0e34 8091 0000 		lds r24,frameCount
 4111 0e38 8F5F      		subi r24,lo8(-(1))
 4112 0e3a 8093 0000 		sts frameCount,r24
 4113               	.L190:
 4114               	/* epilogue start */
 363:main.c        **** #endif //!PWM_TESTING
 4115               		.stabn	68,0,363,.LM511-.LFBB18
 4116               	.LM511:
 4117 0e3e FF91      		pop r31
 4118 0e40 EF91      		pop r30
 4119 0e42 BF91      		pop r27
 4120 0e44 AF91      		pop r26
 4121 0e46 9F91      		pop r25
 4122 0e48 8F91      		pop r24
 4123 0e4a 7F91      		pop r23
 4124 0e4c 6F91      		pop r22
 4125 0e4e 5F91      		pop r21
 4126 0e50 4F91      		pop r20
 4127 0e52 3F91      		pop r19
 4128 0e54 2F91      		pop r18
 4129 0e56 0F90      		pop r0
 4130 0e58 0FBE      		out __SREG__,r0
 4131 0e5a 0F90      		pop r0
 4132 0e5c 1F90      		pop r1
 4133 0e5e 1895      		reti
 4134               		.size	__vector_11, .-__vector_11
 4135               	.Lscope18:
 4136               		.stabs	"",36,0,0,.Lscope18-.LFBB18
 4137               		.stabd	78,0,0
 4138               		.stabs	"init_hsyncTimer:F(0,47)",36,0,17,init_hsyncTimer
 4139               	.global	init_hsyncTimer
 4140               		.type	init_hsyncTimer, @function
 4141               	init_hsyncTimer:
 4142               		.stabd	46,0,0
 4143               		.stabs	"hsyncTimerStuff.c",132,0,0,.Ltext58
 4144               	.Ltext58:
   1:hsyncTimerStuff.c **** /* mehPL:
   2:hsyncTimerStuff.c ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:hsyncTimerStuff.c ****  *    I'm not too fond of long licenses at the top of the file.
   4:hsyncTimerStuff.c ****  *    Please see the bottom.
   5:hsyncTimerStuff.c ****  *    Enjoy!
   6:hsyncTimerStuff.c ****  */
   7:hsyncTimerStuff.c **** 
   8:hsyncTimerStuff.c **** 
   9:hsyncTimerStuff.c **** //hsyncTimer is used for timing each LCD row.
  10:hsyncTimerStuff.c **** // Please see hsyncTimerStuff.h for implementation notes.
  11:hsyncTimerStuff.c **** 
  12:hsyncTimerStuff.c **** #include "hsyncTimerStuff.h"
  13:hsyncTimerStuff.c **** 
  14:hsyncTimerStuff.c **** //Testing with values returned by hsyncTimerCalculator
  15:hsyncTimerStuff.c **** //#define HSYNC_TIMER_OCRVAL	65
  16:hsyncTimerStuff.c **** 
  17:hsyncTimerStuff.c **** void init_hsyncTimer(void)
  18:hsyncTimerStuff.c **** {
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 183


 4145               		.stabn	68,0,18,.LM512-.LFBB19
 4146               	.LM512:
 4147               	.LFBB19:
 4148               	/* prologue: function */
 4149               	/* frame size = 0 */
 4150               	/* stack size = 0 */
 4151               	.L__stack_usage = 0
  19:hsyncTimerStuff.c ****    HSYNC_TIMER_OCR = HSYNC_TIMER_OCRVAL; 
 4152               		.stabn	68,0,19,.LM513-.LFBB19
 4153               	.LM513:
 4154 0e60 85E0      		ldi r24,lo8(5)
 4155 0e62 98E0      		ldi r25,lo8(8)
 4156 0e64 9093 8D00 		sts 140+1,r25
 4157 0e68 8093 8C00 		sts 140,r24
  20:hsyncTimerStuff.c **** 							//T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC;
  21:hsyncTimerStuff.c ****    timer_setWGM(HSYNC_TIMER_NUM, WGM_CLR_ON_COMPARE);
 4158               		.stabn	68,0,21,.LM514-.LFBB19
 4159               	.LM514:
 4160 0e6c 62E0      		ldi r22,lo8(2)
 4161 0e6e 81E0      		ldi r24,lo8(1)
 4162 0e70 0E94 0000 		call timer_setWGM
  22:hsyncTimerStuff.c ****    timer_selectDivisor(HSYNC_TIMER_NUM, HSYNC_TIMER_CLKDIV); //CLKDIV1);
 4163               		.stabn	68,0,22,.LM515-.LFBB19
 4164               	.LM515:
 4165 0e74 60E0      		ldi r22,0
 4166 0e76 81E0      		ldi r24,lo8(1)
 4167 0e78 0E94 0000 		call timer_selectDivisor
  23:hsyncTimerStuff.c ****    timer_compareMatchIntEnable(HSYNC_TIMER_NUM, OUT_CHANNELA);
 4168               		.stabn	68,0,23,.LM516-.LFBB19
 4169               	.LM516:
 4170 0e7c 41E0      		ldi r20,lo8(1)
 4171 0e7e 60E0      		ldi r22,0
 4172 0e80 81E0      		ldi r24,lo8(1)
 4173 0e82 0C94 0000 		jmp timer_compareMatchIntSetup
 4174               		.size	init_hsyncTimer, .-init_hsyncTimer
 4175               	.Lscope19:
 4176               		.stabs	"",36,0,0,.Lscope19-.LFBB19
 4177               		.stabd	78,0,0
 4178               		.section	.text.startup,"ax",@progbits
 4179               		.stabs	"main:F(0,1)",36,0,914,main
 4180               	.global	main
 4181               		.type	main, @function
 4182               	main:
 4183               		.stabd	46,0,0
 4184               		.stabs	"main.c",132,0,0,.Ltext59
 4185               	.Ltext59:
 906:main.c        **** }
 907:main.c        **** #endif
 908:main.c        **** #endif
 909:main.c        **** 
 910:main.c        **** 
 911:main.c        **** 
 912:main.c        **** 
 913:main.c        **** 
 914:main.c        **** int main(void)
 915:main.c        **** {
 4186               		.stabn	68,0,915,.LM517-.LFBB20
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 184


 4187               	.LM517:
 4188               	.LFBB20:
 4189               	/* prologue: function */
 4190               	/* frame size = 0 */
 4191               	/* stack size = 0 */
 4192               	.L__stack_usage = 0
 916:main.c        **** 
 917:main.c        **** 
 918:main.c        **** #if(defined(SEG_RACER) && SEG_RACER)
 919:main.c        **** 	racer_init();
 920:main.c        **** #endif
 921:main.c        **** 
 922:main.c        **** #if ( (defined(BLUE_ADC) && BLUE_ADC) \
 923:main.c        **** 		|| (defined(FB_QUESTION) && FB_QUESTION) )
 924:main.c        **** 	adc_takeInput(6);
 4193               		.stabn	68,0,924,.LM518-.LFBB20
 4194               	.LM518:
 4195 0000 86E0      		ldi r24,lo8(6)
 4196 0002 0E94 0000 		call adc_takeInput
 925:main.c        **** 	adc_init();
 4197               		.stabn	68,0,925,.LM519-.LFBB20
 4198               	.LM519:
 4199 0006 0E94 0000 		call adc_init
 926:main.c        **** 	adc_select(6);
 4200               		.stabn	68,0,926,.LM520-.LFBB20
 4201               	.LM520:
 4202 000a 86E0      		ldi r24,lo8(6)
 4203 000c 0E94 0000 		call adc_select
 927:main.c        **** #endif
 928:main.c        **** 
 929:main.c        **** #if(defined(SEG_TET) && SEG_TET)
 930:main.c        **** 	tetInit(3);
 931:main.c        **** #endif
 932:main.c        **** 	
 933:main.c        **** #if(!defined(PWM_TESTING) || !PWM_TESTING)
 934:main.c        **** 	init_hsyncTimer();
 4204               		.stabn	68,0,934,.LM521-.LFBB20
 4205               	.LM521:
 4206 0010 0E94 0000 		call init_hsyncTimer
 935:main.c        **** #endif
 936:main.c        **** 
 937:main.c        **** #if (defined(FRAMEBUFFER_TESTING) && FRAMEBUFFER_TESTING)
 938:main.c        **** #if(!defined(FB_DONT_USE_UPDATE) || !FB_DONT_USE_UPDATE)
 939:main.c        **** 	frameBufferUpdate();
 940:main.c        **** #endif
 941:main.c        **** #endif
 942:main.c        **** 	//This starts pretty late... watch out for WDT
 943:main.c        **** 	init_heartBeat();
 4207               		.stabn	68,0,943,.LM522-.LFBB20
 4208               	.LM522:
 4209 0014 0E94 0000 		call init_heartBeat
 944:main.c        **** 
 945:main.c        **** 	setHeartRate(0);
 4210               		.stabn	68,0,945,.LM523-.LFBB20
 4211               	.LM523:
 4212 0018 80E0      		ldi r24,0
 4213 001a 0E94 0000 		call setHeartRate
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 185


 946:main.c        **** 
 947:main.c        **** 	lvds_timerInit();
 4214               		.stabn	68,0,947,.LM524-.LFBB20
 4215               	.LM524:
 4216 001e 0E94 0000 		call lvds_timerInit
 948:main.c        **** 
 949:main.c        **** 
 950:main.c        **** 	// MUCH Of this is outside the screen...
 951:main.c        **** 
 952:main.c        **** 
 953:main.c        **** #if(defined(FB_QUESTION) && FB_QUESTION)
 954:main.c        **** 	adc_startConversion();
 4217               		.stabn	68,0,954,.LM525-.LFBB20
 4218               	.LM525:
 4219 0022 0E94 0000 		call adc_startConversion
 4220               	.LBB243:
 955:main.c        **** #endif
 956:main.c        **** 
 957:main.c        **** 	while(1)
 958:main.c        **** 	{
 959:main.c        **** //#if(defined(FB_SMILEY) && FB_SMILEY)
 960:main.c        **** //		frameBufferUpdate();
 961:main.c        **** //#endif
 962:main.c        **** 
 963:main.c        **** #if(defined(FB_QUESTION) && FB_QUESTION)
 964:main.c        **** 		static int32_t adcAvg = 0;
 965:main.c        **** 		static uint16_t adcVal;
 966:main.c        **** 		static uint8_t avgCount = 100;
 967:main.c        **** 		if(!adc_isBusy())
 968:main.c        **** 		{
 969:main.c        **** 			adcVal = adc_getValue();
 970:main.c        **** 			
 971:main.c        **** 			adc_startConversion();
 972:main.c        **** 
 973:main.c        **** 
 974:main.c        **** 			if(avgCount > 1)
 975:main.c        **** 				avgCount--;
 976:main.c        **** 			else if(avgCount == 1)
 977:main.c        **** 			{
 978:main.c        **** 				avgCount=0;
 979:main.c        **** 				adcAvg += adcVal;
 980:main.c        **** 			}
 981:main.c        **** 			else if(avgCount == 0)
 982:main.c        **** 			{
 983:main.c        **** 				//After the first case, the average should be somewhere
 984:main.c        **** 				//'round the ADC Val... then after subtracting the current
 985:main.c        **** 				//adcVal, we should be close to zero...
 986:main.c        **** 				adcAvg -= adcVal;
 987:main.c        **** 				{
 988:main.c        **** 					int32_t absDiff = adcAvg;
 989:main.c        **** 					if(absDiff < 0)
 990:main.c        **** 						absDiff = -absDiff;
 991:main.c        **** 
 992:main.c        **** 					// At this point, absDiff is essentially the derivative
 993:main.c        **** 					// of the ADC measurements... (absoluted)
 994:main.c        **** 					// If there's no change, it will be near-zero
 995:main.c        **** 					// If there's a lot of change, it will be positive...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 186


 996:main.c        **** 					// the ADC is ten-bits, so 3.3V/1024 = .003V per LSB
 997:main.c        **** 					// Of course, a spike isn't instantaneous...
 998:main.c        **** 					// .2V is measurable on the 'scope, currently...
 999:main.c        **** #define ADC_DETECTION_THRESHOLD	15 //20 //38 //(1024*125/3300)
1000:main.c        **** 					if(absDiff > ADC_DETECTION_THRESHOLD)
1001:main.c        **** 						fbQuestion_hitDetected();
1002:main.c        **** 				}
1003:main.c        **** 				adcAvg = 0;
1004:main.c        **** 				avgCount=1;
 4221               		.stabn	68,0,1004,.LM526-.LFBB20
 4222               	.LM526:
 4223 0026 C1E0      		ldi r28,lo8(1)
 4224               	.L203:
 967:main.c        **** 		{
 4225               		.stabn	68,0,967,.LM527-.LFBB20
 4226               	.LM527:
 4227 0028 0E94 0000 		call adc_isBusy
 4228 002c 8111      		cpse r24,__zero_reg__
 4229 002e 00C0      		rjmp .L197
 969:main.c        **** 			
 4230               		.stabn	68,0,969,.LM528-.LFBB20
 4231               	.LM528:
 4232 0030 0E94 0000 		call adc_getValue
 4233 0034 9093 0000 		sts adcVal.2301+1,r25
 4234 0038 8093 0000 		sts adcVal.2301,r24
 971:main.c        **** 
 4235               		.stabn	68,0,971,.LM529-.LFBB20
 4236               	.LM529:
 4237 003c 0E94 0000 		call adc_startConversion
 974:main.c        **** 				avgCount--;
 4238               		.stabn	68,0,974,.LM530-.LFBB20
 4239               	.LM530:
 4240 0040 4091 0000 		lds r20,avgCount.2302
 4241 0044 4230      		cpi r20,lo8(2)
 4242 0046 00F0      		brlo .L198
 975:main.c        **** 			else if(avgCount == 1)
 4243               		.stabn	68,0,975,.LM531-.LFBB20
 4244               	.LM531:
 4245 0048 4150      		subi r20,lo8(-(-1))
 4246 004a 4093 0000 		sts avgCount.2302,r20
 4247 004e 00C0      		rjmp .L197
 4248               	.L198:
 4249 0050 2091 0000 		lds r18,adcVal.2301
 4250 0054 3091 0000 		lds r19,adcVal.2301+1
 4251 0058 8091 0000 		lds r24,adcAvg.2300
 4252 005c 9091 0000 		lds r25,adcAvg.2300+1
 4253 0060 A091 0000 		lds r26,adcAvg.2300+2
 4254 0064 B091 0000 		lds r27,adcAvg.2300+3
 976:main.c        **** 			{
 4255               		.stabn	68,0,976,.LM532-.LFBB20
 4256               	.LM532:
 4257 0068 4130      		cpi r20,lo8(1)
 4258 006a 01F4      		brne .L199
 978:main.c        **** 				adcAvg += adcVal;
 4259               		.stabn	68,0,978,.LM533-.LFBB20
 4260               	.LM533:
 4261 006c 1092 0000 		sts avgCount.2302,__zero_reg__
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 187


 979:main.c        **** 			}
 4262               		.stabn	68,0,979,.LM534-.LFBB20
 4263               	.LM534:
 4264 0070 820F      		add r24,r18
 4265 0072 931F      		adc r25,r19
 4266 0074 A11D      		adc r26,__zero_reg__
 4267 0076 B11D      		adc r27,__zero_reg__
 4268 0078 8093 0000 		sts adcAvg.2300,r24
 4269 007c 9093 0000 		sts adcAvg.2300+1,r25
 4270 0080 A093 0000 		sts adcAvg.2300+2,r26
 4271 0084 B093 0000 		sts adcAvg.2300+3,r27
 4272 0088 00C0      		rjmp .L197
 4273               	.L199:
 986:main.c        **** 				{
 4274               		.stabn	68,0,986,.LM535-.LFBB20
 4275               	.LM535:
 4276 008a 821B      		sub r24,r18
 4277 008c 930B      		sbc r25,r19
 4278 008e A109      		sbc r26,__zero_reg__
 4279 0090 B109      		sbc r27,__zero_reg__
 4280 0092 8093 0000 		sts adcAvg.2300,r24
 4281 0096 9093 0000 		sts adcAvg.2300+1,r25
 4282 009a A093 0000 		sts adcAvg.2300+2,r26
 4283 009e B093 0000 		sts adcAvg.2300+3,r27
 4284 00a2 B7FF      		sbrs r27,7
 4285 00a4 00C0      		rjmp .L201
 4286 00a6 B095      		com r27
 4287 00a8 A095      		com r26
 4288 00aa 9095      		com r25
 4289 00ac 8195      		neg r24
 4290 00ae 9F4F      		sbci r25,lo8(-1)
 4291 00b0 AF4F      		sbci r26,lo8(-1)
 4292 00b2 BF4F      		sbci r27,lo8(-1)
 4293               	.L201:
 4294               	.LBB244:
1000:main.c        **** 						fbQuestion_hitDetected();
 4295               		.stabn	68,0,1000,.LM536-.LFBB20
 4296               	.LM536:
 4297 00b4 4097      		sbiw r24,16
 4298 00b6 A105      		cpc r26,__zero_reg__
 4299 00b8 B105      		cpc r27,__zero_reg__
 4300 00ba 04F0      		brlt .L200
1001:main.c        **** 				}
 4301               		.stabn	68,0,1001,.LM537-.LFBB20
 4302               	.LM537:
 4303 00bc 0E94 0000 		call fbQuestion_hitDetected
 4304               	.L200:
 4305               	.LBE244:
1003:main.c        **** 				avgCount=1;
 4306               		.stabn	68,0,1003,.LM538-.LFBB20
 4307               	.LM538:
 4308 00c0 1092 0000 		sts adcAvg.2300,__zero_reg__
 4309 00c4 1092 0000 		sts adcAvg.2300+1,__zero_reg__
 4310 00c8 1092 0000 		sts adcAvg.2300+2,__zero_reg__
 4311 00cc 1092 0000 		sts adcAvg.2300+3,__zero_reg__
 4312               		.stabn	68,0,1004,.LM539-.LFBB20
 4313               	.LM539:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 188


 4314 00d0 C093 0000 		sts avgCount.2302,r28
 4315               	.L197:
1005:main.c        **** 			}
1006:main.c        **** 
1007:main.c        **** 		}
1008:main.c        **** 
1009:main.c        **** #endif
1010:main.c        **** 
1011:main.c        **** #if((defined(FB_QUESTION) && FB_QUESTION) \
1012:main.c        **** 		|| (defined(FB_SMILEY) && FB_SMILEY) )
1013:main.c        **** 
1014:main.c        **** 		//static uint32_t count = 0;
1015:main.c        **** 		static uint8_t lastFrameCount = 0;
1016:main.c        **** #define FRAME_COUNT_LIMIT 0x03
1017:main.c        **** 		uint8_t thisFrameCount = frameCount&FRAME_COUNT_LIMIT;
 4316               		.stabn	68,0,1017,.LM540-.LFBB20
 4317               	.LM540:
 4318 00d4 D091 0000 		lds r29,frameCount
 4319 00d8 D370      		andi r29,lo8(3)
1018:main.c        **** 
1019:main.c        **** //		if(( (thisFrameCount==0) && (lastFrameCount==FRAME_COUNT_LIMIT) ))
1020:main.c        **** 		if(thisFrameCount != lastFrameCount)
 4320               		.stabn	68,0,1020,.LM541-.LFBB20
 4321               	.LM541:
 4322 00da 8091 0000 		lds r24,lastFrameCount.2304
 4323 00de D813      		cpse r29,r24
1021:main.c        **** 		{
1022:main.c        **** 
1023:main.c        **** #if(defined(FB_QUESTION) && FB_QUESTION)
1024:main.c        **** 			fbQuestion_update();
 4324               		.stabn	68,0,1024,.LM542-.LFBB20
 4325               	.LM542:
 4326 00e0 0E94 0000 		call fbQuestion_update
 4327               	.L202:
1025:main.c        **** #elif (defined(FB_SMILEY) && FB_SMILEY)
1026:main.c        **** 			frameBufferUpdate();
1027:main.c        **** #endif
1028:main.c        **** 		}
1029:main.c        **** 
1030:main.c        **** 		lastFrameCount = thisFrameCount;
 4328               		.stabn	68,0,1030,.LM543-.LFBB20
 4329               	.LM543:
 4330 00e4 D093 0000 		sts lastFrameCount.2304,r29
1031:main.c        **** #endif
1032:main.c        **** 		//see cTools/unusedMacroTest.c
1033:main.c        **** 		//({0;});	no warning (anymore), I'm sure it did before...
1034:main.c        **** 		//(0);	"statement with no effect"
1035:main.c        **** 		heartUpdate();
 4331               		.stabn	68,0,1035,.LM544-.LFBB20
 4332               	.LM544:
 4333 00e8 0E94 0000 		call heartUpdate
 4334               	.LBE243:
1036:main.c        **** /*	Testing HEART_REMOVED for warnings...
1037:main.c        **** 		if(heartUpdate())
1038:main.c        **** 			heartUpdate();
1039:main.c        **** */
1040:main.c        **** 	}
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 189


 4335               		.stabn	68,0,1040,.LM545-.LFBB20
 4336               	.LM545:
 4337 00ec 00C0      		rjmp .L203
 4338               		.size	main, .-main
 4339               		.stabs	"adcAvg:V(4,5)",38,0,964,adcAvg.2300
 4340               		.stabs	"adcVal:V(4,4)",40,0,965,adcVal.2301
 4341               		.stabs	"avgCount:V(4,2)",38,0,966,avgCount.2302
 4342               		.stabs	"lastFrameCount:V(4,2)",38,0,1015,lastFrameCount.2304
 4343               		.stabs	"thisFrameCount:r(4,2)",64,0,1017,29
 4344               		.stabn	192,0,0,.LBB243-.LFBB20
 4345               		.stabn	224,0,0,.LBE243-.LFBB20
 4346               	.Lscope20:
 4347               		.stabs	"",36,0,0,.Lscope20-.LFBB20
 4348               		.stabd	78,0,0
 4349               		.section	.rodata
 4350               		.type	CSWTCH.68, @object
 4351               		.size	CSWTCH.68, 12
 4352               	CSWTCH.68:
 4353 0000 0000      		.word	pgm_imageCOIN
 4354 0002 0000      		.word	pgm_imageCOIN
 4355 0004 0000      		.word	pgm_imageCOIN1
 4356 0006 0000      		.word	pgm_imageCOIN1
 4357 0008 0000      		.word	pgm_imageCOIN2
 4358 000a 0000      		.word	pgm_imageCOIN2
 4359               		.local	lastFrameCount.2304
 4360               		.comm	lastFrameCount.2304,1,1
 4361               		.local	adcAvg.2300
 4362               		.comm	adcAvg.2300,4,1
 4363               		.data
 4364               		.type	avgCount.2302, @object
 4365               		.size	avgCount.2302, 1
 4366               	avgCount.2302:
 4367 0000 64        		.byte	100
 4368               		.local	adcVal.2301
 4369               		.comm	adcVal.2301,2,1
 4370               	.global	frameCount
 4371               		.section .bss
 4372               		.type	frameCount, @object
 4373               		.size	frameCount, 1
 4374               	frameCount:
 4375 0000 00        		.zero	1
 4376               	.global	hsyncCount
 4377               		.type	hsyncCount, @object
 4378               		.size	hsyncCount, 2
 4379               	hsyncCount:
 4380 0001 0000      		.zero	2
 4381               	.global	vSync
 4382               		.type	vSync, @object
 4383               		.size	vSync, 1
 4384               	vSync:
 4385 0003 00        		.zero	1
 4386               	.global	dataEnable
 4387               		.type	dataEnable, @object
 4388               		.size	dataEnable, 1
 4389               	dataEnable:
 4390 0004 00        		.zero	1
 4391               	.global	p_nextSprite
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 190


 4392               		.type	p_nextSprite, @object
 4393               		.size	p_nextSprite, 2
 4394               	p_nextSprite:
 4395 0005 0000      		.zero	2
 4396               	.global	p_selectedSprite
 4397               		.data
 4398               		.type	p_selectedSprite, @object
 4399               		.size	p_selectedSprite, 2
 4400               	p_selectedSprite:
 4401 0001 0000      		.word	spriteCOIN
 4402               	.global	qCount
 4403               		.section .bss
 4404               		.type	qCount, @object
 4405               		.size	qCount, 1
 4406               	qCount:
 4407 0007 00        		.zero	1
 4408               	.global	callCount
 4409               		.type	callCount, @object
 4410               		.size	callCount, 1
 4411               	callCount:
 4412 0008 00        		.zero	1
 4413               		.data
 4414               		.type	spriteCOIN, @object
 4415               		.size	spriteCOIN, 7
 4416               	spriteCOIN:
 4417 0003 0000      		.word	pgm_imageCOIN
 4418 0005 0000      		.word	0
 4419 0007 0000      		.word	pgm_paletteCOIN
 4420 0009 01        		.byte	1
 4421               		.section	.progmem.data,"a",@progbits
 4422               		.type	pgm_paletteCOIN, @object
 4423               		.size	pgm_paletteCOIN, 4
 4424               	pgm_paletteCOIN:
 4425 0000 25        		.byte	37
 4426 0001 02        		.byte	2
 4427 0002 07        		.byte	7
 4428 0003 2F        		.byte	47
 4429               		.type	pgm_imageCOIN3, @object
 4430               		.size	pgm_imageCOIN3, 64
 4431               	pgm_imageCOIN3:
 4432 0004 00        		.byte	0
 4433 0005 00        		.byte	0
 4434 0006 00        		.byte	0
 4435 0007 00        		.byte	0
 4436 0008 00        		.byte	0
 4437 0009 C0        		.byte	-64
 4438 000a 01        		.byte	1
 4439 000b 00        		.byte	0
 4440 000c 00        		.byte	0
 4441 000d C0        		.byte	-64
 4442 000e 01        		.byte	1
 4443 000f 00        		.byte	0
 4444 0010 00        		.byte	0
 4445 0011 F0        		.byte	-16
 4446 0012 07        		.byte	7
 4447 0013 00        		.byte	0
 4448 0014 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 191


 4449 0015 F0        		.byte	-16
 4450 0016 07        		.byte	7
 4451 0017 00        		.byte	0
 4452 0018 00        		.byte	0
 4453 0019 F0        		.byte	-16
 4454 001a 07        		.byte	7
 4455 001b 00        		.byte	0
 4456 001c 00        		.byte	0
 4457 001d F0        		.byte	-16
 4458 001e 07        		.byte	7
 4459 001f 00        		.byte	0
 4460 0020 00        		.byte	0
 4461 0021 F0        		.byte	-16
 4462 0022 07        		.byte	7
 4463 0023 00        		.byte	0
 4464 0024 00        		.byte	0
 4465 0025 F0        		.byte	-16
 4466 0026 07        		.byte	7
 4467 0027 00        		.byte	0
 4468 0028 00        		.byte	0
 4469 0029 F0        		.byte	-16
 4470 002a 07        		.byte	7
 4471 002b 00        		.byte	0
 4472 002c 00        		.byte	0
 4473 002d F0        		.byte	-16
 4474 002e 07        		.byte	7
 4475 002f 00        		.byte	0
 4476 0030 00        		.byte	0
 4477 0031 F0        		.byte	-16
 4478 0032 07        		.byte	7
 4479 0033 00        		.byte	0
 4480 0034 00        		.byte	0
 4481 0035 F0        		.byte	-16
 4482 0036 07        		.byte	7
 4483 0037 00        		.byte	0
 4484 0038 00        		.byte	0
 4485 0039 C0        		.byte	-64
 4486 003a 01        		.byte	1
 4487 003b 00        		.byte	0
 4488 003c 00        		.byte	0
 4489 003d C0        		.byte	-64
 4490 003e 01        		.byte	1
 4491 003f 00        		.byte	0
 4492 0040 00        		.byte	0
 4493 0041 00        		.byte	0
 4494 0042 00        		.byte	0
 4495 0043 00        		.byte	0
 4496               		.type	pgm_imageCOIN2, @object
 4497               		.size	pgm_imageCOIN2, 64
 4498               	pgm_imageCOIN2:
 4499 0044 00        		.byte	0
 4500 0045 00        		.byte	0
 4501 0046 00        		.byte	0
 4502 0047 00        		.byte	0
 4503 0048 00        		.byte	0
 4504 0049 80        		.byte	-128
 4505 004a 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 192


 4506 004b 00        		.byte	0
 4507 004c 00        		.byte	0
 4508 004d 80        		.byte	-128
 4509 004e 00        		.byte	0
 4510 004f 00        		.byte	0
 4511 0050 00        		.byte	0
 4512 0051 80        		.byte	-128
 4513 0052 00        		.byte	0
 4514 0053 00        		.byte	0
 4515 0054 00        		.byte	0
 4516 0055 80        		.byte	-128
 4517 0056 00        		.byte	0
 4518 0057 00        		.byte	0
 4519 0058 00        		.byte	0
 4520 0059 80        		.byte	-128
 4521 005a 00        		.byte	0
 4522 005b 00        		.byte	0
 4523 005c 00        		.byte	0
 4524 005d 80        		.byte	-128
 4525 005e 00        		.byte	0
 4526 005f 00        		.byte	0
 4527 0060 00        		.byte	0
 4528 0061 C0        		.byte	-64
 4529 0062 00        		.byte	0
 4530 0063 00        		.byte	0
 4531 0064 00        		.byte	0
 4532 0065 C0        		.byte	-64
 4533 0066 00        		.byte	0
 4534 0067 00        		.byte	0
 4535 0068 00        		.byte	0
 4536 0069 80        		.byte	-128
 4537 006a 00        		.byte	0
 4538 006b 00        		.byte	0
 4539 006c 00        		.byte	0
 4540 006d 80        		.byte	-128
 4541 006e 00        		.byte	0
 4542 006f 00        		.byte	0
 4543 0070 00        		.byte	0
 4544 0071 80        		.byte	-128
 4545 0072 00        		.byte	0
 4546 0073 00        		.byte	0
 4547 0074 00        		.byte	0
 4548 0075 80        		.byte	-128
 4549 0076 00        		.byte	0
 4550 0077 00        		.byte	0
 4551 0078 00        		.byte	0
 4552 0079 80        		.byte	-128
 4553 007a 00        		.byte	0
 4554 007b 00        		.byte	0
 4555 007c 00        		.byte	0
 4556 007d 80        		.byte	-128
 4557 007e 00        		.byte	0
 4558 007f 00        		.byte	0
 4559 0080 00        		.byte	0
 4560 0081 00        		.byte	0
 4561 0082 00        		.byte	0
 4562 0083 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 193


 4563               		.type	pgm_imageCOIN1, @object
 4564               		.size	pgm_imageCOIN1, 64
 4565               	pgm_imageCOIN1:
 4566 0084 00        		.byte	0
 4567 0085 00        		.byte	0
 4568 0086 00        		.byte	0
 4569 0087 00        		.byte	0
 4570 0088 00        		.byte	0
 4571 0089 80        		.byte	-128
 4572 008a 01        		.byte	1
 4573 008b 00        		.byte	0
 4574 008c 00        		.byte	0
 4575 008d 80        		.byte	-128
 4576 008e 01        		.byte	1
 4577 008f 00        		.byte	0
 4578 0090 00        		.byte	0
 4579 0091 60        		.byte	96
 4580 0092 05        		.byte	5
 4581 0093 00        		.byte	0
 4582 0094 00        		.byte	0
 4583 0095 60        		.byte	96
 4584 0096 05        		.byte	5
 4585 0097 00        		.byte	0
 4586 0098 00        		.byte	0
 4587 0099 60        		.byte	96
 4588 009a 05        		.byte	5
 4589 009b 00        		.byte	0
 4590 009c 00        		.byte	0
 4591 009d 60        		.byte	96
 4592 009e 05        		.byte	5
 4593 009f 00        		.byte	0
 4594 00a0 00        		.byte	0
 4595 00a1 70        		.byte	112
 4596 00a2 05        		.byte	5
 4597 00a3 00        		.byte	0
 4598 00a4 00        		.byte	0
 4599 00a5 70        		.byte	112
 4600 00a6 05        		.byte	5
 4601 00a7 00        		.byte	0
 4602 00a8 00        		.byte	0
 4603 00a9 60        		.byte	96
 4604 00aa 05        		.byte	5
 4605 00ab 00        		.byte	0
 4606 00ac 00        		.byte	0
 4607 00ad 60        		.byte	96
 4608 00ae 05        		.byte	5
 4609 00af 00        		.byte	0
 4610 00b0 00        		.byte	0
 4611 00b1 60        		.byte	96
 4612 00b2 05        		.byte	5
 4613 00b3 00        		.byte	0
 4614 00b4 00        		.byte	0
 4615 00b5 60        		.byte	96
 4616 00b6 05        		.byte	5
 4617 00b7 00        		.byte	0
 4618 00b8 00        		.byte	0
 4619 00b9 80        		.byte	-128
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 194


 4620 00ba 01        		.byte	1
 4621 00bb 00        		.byte	0
 4622 00bc 00        		.byte	0
 4623 00bd 80        		.byte	-128
 4624 00be 01        		.byte	1
 4625 00bf 00        		.byte	0
 4626 00c0 00        		.byte	0
 4627 00c1 00        		.byte	0
 4628 00c2 00        		.byte	0
 4629 00c3 00        		.byte	0
 4630               		.type	pgm_imageCOIN, @object
 4631               		.size	pgm_imageCOIN, 64
 4632               	pgm_imageCOIN:
 4633 00c4 00        		.byte	0
 4634 00c5 00        		.byte	0
 4635 00c6 00        		.byte	0
 4636 00c7 00        		.byte	0
 4637 00c8 00        		.byte	0
 4638 00c9 80        		.byte	-128
 4639 00ca 02        		.byte	2
 4640 00cb 00        		.byte	0
 4641 00cc 00        		.byte	0
 4642 00cd A0        		.byte	-96
 4643 00ce 0A        		.byte	10
 4644 00cf 00        		.byte	0
 4645 00d0 00        		.byte	0
 4646 00d1 A8        		.byte	-88
 4647 00d2 2A        		.byte	42
 4648 00d3 00        		.byte	0
 4649 00d4 00        		.byte	0
 4650 00d5 E8        		.byte	-24
 4651 00d6 29        		.byte	41
 4652 00d7 00        		.byte	0
 4653 00d8 00        		.byte	0
 4654 00d9 BA        		.byte	-70
 4655 00da A6        		.byte	-90
 4656 00db 00        		.byte	0
 4657 00dc 00        		.byte	0
 4658 00dd BA        		.byte	-70
 4659 00de A6        		.byte	-90
 4660 00df 00        		.byte	0
 4661 00e0 00        		.byte	0
 4662 00e1 BA        		.byte	-70
 4663 00e2 A6        		.byte	-90
 4664 00e3 00        		.byte	0
 4665 00e4 00        		.byte	0
 4666 00e5 BA        		.byte	-70
 4667 00e6 A6        		.byte	-90
 4668 00e7 00        		.byte	0
 4669 00e8 00        		.byte	0
 4670 00e9 BA        		.byte	-70
 4671 00ea A6        		.byte	-90
 4672 00eb 00        		.byte	0
 4673 00ec 00        		.byte	0
 4674 00ed BA        		.byte	-70
 4675 00ee A6        		.byte	-90
 4676 00ef 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 195


 4677 00f0 00        		.byte	0
 4678 00f1 E8        		.byte	-24
 4679 00f2 29        		.byte	41
 4680 00f3 00        		.byte	0
 4681 00f4 00        		.byte	0
 4682 00f5 A8        		.byte	-88
 4683 00f6 2A        		.byte	42
 4684 00f7 00        		.byte	0
 4685 00f8 00        		.byte	0
 4686 00f9 A0        		.byte	-96
 4687 00fa 0A        		.byte	10
 4688 00fb 00        		.byte	0
 4689 00fc 00        		.byte	0
 4690 00fd 80        		.byte	-128
 4691 00fe 02        		.byte	2
 4692 00ff 00        		.byte	0
 4693 0100 00        		.byte	0
 4694 0101 00        		.byte	0
 4695 0102 00        		.byte	0
 4696 0103 00        		.byte	0
 4697               		.data
 4698               		.type	spriteGOOMBA, @object
 4699               		.size	spriteGOOMBA, 7
 4700               	spriteGOOMBA:
 4701 000a 0000      		.word	pgm_imageGOOMBA
 4702 000c 0000      		.word	0
 4703 000e 0000      		.word	pgm_paletteGOOMBA
 4704 0010 06        		.byte	6
 4705               		.section	.progmem.data,"a",@progbits
 4706               		.type	pgm_paletteGOOMBA, @object
 4707               		.size	pgm_paletteGOOMBA, 24
 4708               	pgm_paletteGOOMBA:
 4709 0104 04        		.byte	4
 4710 0105 02        		.byte	2
 4711 0106 27        		.byte	39
 4712 0107 00        		.byte	0
 4713 0108 04        		.byte	4
 4714 0109 02        		.byte	2
 4715 010a 27        		.byte	39
 4716 010b 00        		.byte	0
 4717 010c 05        		.byte	5
 4718 010d 02        		.byte	2
 4719 010e 27        		.byte	39
 4720 010f 00        		.byte	0
 4721 0110 07        		.byte	7
 4722 0111 02        		.byte	2
 4723 0112 27        		.byte	39
 4724 0113 00        		.byte	0
 4725 0114 03        		.byte	3
 4726 0115 01        		.byte	1
 4727 0116 26        		.byte	38
 4728 0117 00        		.byte	0
 4729 0118 00        		.byte	0
 4730 0119 20        		.byte	32
 4731 011a 01        		.byte	1
 4732 011b 20        		.byte	32
 4733               		.type	pgm_imageGOOMBA, @object
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 196


 4734               		.size	pgm_imageGOOMBA, 64
 4735               	pgm_imageGOOMBA:
 4736 011c 00        		.byte	0
 4737 011d 50        		.byte	80
 4738 011e 05        		.byte	5
 4739 011f 00        		.byte	0
 4740 0120 00        		.byte	0
 4741 0121 54        		.byte	84
 4742 0122 15        		.byte	21
 4743 0123 00        		.byte	0
 4744 0124 00        		.byte	0
 4745 0125 55        		.byte	85
 4746 0126 55        		.byte	85
 4747 0127 00        		.byte	0
 4748 0128 40        		.byte	64
 4749 0129 55        		.byte	85
 4750 012a 55        		.byte	85
 4751 012b 01        		.byte	1
 4752 012c D0        		.byte	-48
 4753 012d 57        		.byte	87
 4754 012e D5        		.byte	-43
 4755 012f 07        		.byte	7
 4756 0130 54        		.byte	84
 4757 0131 5E        		.byte	94
 4758 0132 B5        		.byte	-75
 4759 0133 15        		.byte	21
 4760 0134 54        		.byte	84
 4761 0135 FE        		.byte	-2
 4762 0136 BF        		.byte	-65
 4763 0137 15        		.byte	21
 4764 0138 55        		.byte	85
 4765 0139 6E        		.byte	110
 4766 013a B9        		.byte	-71
 4767 013b 55        		.byte	85
 4768 013c 55        		.byte	85
 4769 013d 6A        		.byte	106
 4770 013e A9        		.byte	-87
 4771 013f 55        		.byte	85
 4772 0140 55        		.byte	85
 4773 0141 55        		.byte	85
 4774 0142 55        		.byte	85
 4775 0143 55        		.byte	85
 4776 0144 54        		.byte	84
 4777 0145 A9        		.byte	-87
 4778 0146 6A        		.byte	106
 4779 0147 15        		.byte	21
 4780 0148 00        		.byte	0
 4781 0149 AA        		.byte	-86
 4782 014a AA        		.byte	-86
 4783 014b 00        		.byte	0
 4784 014c 00        		.byte	0
 4785 014d AA        		.byte	-86
 4786 014e AA        		.byte	-86
 4787 014f 0F        		.byte	15
 4788 0150 C0        		.byte	-64
 4789 0151 AB        		.byte	-85
 4790 0152 FA        		.byte	-6
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 197


 4791 0153 3F        		.byte	63
 4792 0154 C0        		.byte	-64
 4793 0155 AF        		.byte	-81
 4794 0156 FE        		.byte	-2
 4795 0157 3F        		.byte	63
 4796 0158 00        		.byte	0
 4797 0159 BF        		.byte	-65
 4798 015a FF        		.byte	-1
 4799 015b 0F        		.byte	15
 4800               		.data
 4801               		.type	spriteFLOWER, @object
 4802               		.size	spriteFLOWER, 7
 4803               	spriteFLOWER:
 4804 0011 0000      		.word	pgm_imageFLOWER
 4805 0013 0000      		.word	0
 4806 0015 0000      		.word	pgm_paletteFLOWER
 4807 0017 04        		.byte	4
 4808               		.section	.progmem.data,"a",@progbits
 4809               		.type	pgm_paletteFLOWER, @object
 4810               		.size	pgm_paletteFLOWER, 16
 4811               	pgm_paletteFLOWER:
 4812 015c 25        		.byte	37
 4813 015d 04        		.byte	4
 4814 015e 00        		.byte	0
 4815 015f 00        		.byte	0
 4816 0160 25        		.byte	37
 4817 0161 2F        		.byte	47
 4818 0162 07        		.byte	7
 4819 0163 04        		.byte	4
 4820 0164 25        		.byte	37
 4821 0165 17        		.byte	23
 4822 0166 02        		.byte	2
 4823 0167 00        		.byte	0
 4824 0168 25        		.byte	37
 4825 0169 07        		.byte	7
 4826 016a 05        		.byte	5
 4827 016b 02        		.byte	2
 4828               		.type	pgm_imageFLOWER, @object
 4829               		.size	pgm_imageFLOWER, 64
 4830               	pgm_imageFLOWER:
 4831 016c 00        		.byte	0
 4832 016d 55        		.byte	85
 4833 016e 55        		.byte	85
 4834 016f 00        		.byte	0
 4835 0170 50        		.byte	80
 4836 0171 55        		.byte	85
 4837 0172 55        		.byte	85
 4838 0173 05        		.byte	5
 4839 0174 54        		.byte	84
 4840 0175 AA        		.byte	-86
 4841 0176 AA        		.byte	-86
 4842 0177 15        		.byte	21
 4843 0178 A5        		.byte	-91
 4844 0179 FE        		.byte	-2
 4845 017a BF        		.byte	-65
 4846 017b 5A        		.byte	90
 4847 017c A5        		.byte	-91
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 198


 4848 017d FE        		.byte	-2
 4849 017e BF        		.byte	-65
 4850 017f 5A        		.byte	90
 4851 0180 54        		.byte	84
 4852 0181 AA        		.byte	-86
 4853 0182 AA        		.byte	-86
 4854 0183 15        		.byte	21
 4855 0184 50        		.byte	80
 4856 0185 55        		.byte	85
 4857 0186 55        		.byte	85
 4858 0187 05        		.byte	5
 4859 0188 00        		.byte	0
 4860 0189 55        		.byte	85
 4861 018a 55        		.byte	85
 4862 018b 00        		.byte	0
 4863 018c 00        		.byte	0
 4864 018d 40        		.byte	64
 4865 018e 01        		.byte	1
 4866 018f 00        		.byte	0
 4867 0190 15        		.byte	21
 4868 0191 40        		.byte	64
 4869 0192 01        		.byte	1
 4870 0193 54        		.byte	84
 4871 0194 54        		.byte	84
 4872 0195 40        		.byte	64
 4873 0196 01        		.byte	1
 4874 0197 15        		.byte	21
 4875 0198 54        		.byte	84
 4876 0199 41        		.byte	65
 4877 019a 41        		.byte	65
 4878 019b 15        		.byte	21
 4879 019c 50        		.byte	80
 4880 019d 45        		.byte	69
 4881 019e 51        		.byte	81
 4882 019f 05        		.byte	5
 4883 01a0 50        		.byte	80
 4884 01a1 45        		.byte	69
 4885 01a2 51        		.byte	81
 4886 01a3 05        		.byte	5
 4887 01a4 40        		.byte	64
 4888 01a5 55        		.byte	85
 4889 01a6 55        		.byte	85
 4890 01a7 01        		.byte	1
 4891 01a8 00        		.byte	0
 4892 01a9 50        		.byte	80
 4893 01aa 05        		.byte	5
 4894 01ab 00        		.byte	0
 4895               		.data
 4896               		.type	spriteSTAR, @object
 4897               		.size	spriteSTAR, 7
 4898               	spriteSTAR:
 4899 0018 0000      		.word	pgm_imageSTAR
 4900 001a 0000      		.word	0
 4901 001c 0000      		.word	pgm_paletteSTAR
 4902 001e 02        		.byte	2
 4903               		.section	.progmem.data,"a",@progbits
 4904               		.type	pgm_paletteSTAR, @object
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 199


 4905               		.size	pgm_paletteSTAR, 8
 4906               	pgm_paletteSTAR:
 4907 01ac 25        		.byte	37
 4908 01ad 07        		.byte	7
 4909 01ae 02        		.byte	2
 4910 01af 00        		.byte	0
 4911 01b0 25        		.byte	37
 4912 01b1 02        		.byte	2
 4913 01b2 00        		.byte	0
 4914 01b3 00        		.byte	0
 4915               		.type	pgm_imageSTAR, @object
 4916               		.size	pgm_imageSTAR, 64
 4917               	pgm_imageSTAR:
 4918 01b4 00        		.byte	0
 4919 01b5 40        		.byte	64
 4920 01b6 01        		.byte	1
 4921 01b7 00        		.byte	0
 4922 01b8 00        		.byte	0
 4923 01b9 40        		.byte	64
 4924 01ba 01        		.byte	1
 4925 01bb 00        		.byte	0
 4926 01bc 00        		.byte	0
 4927 01bd 50        		.byte	80
 4928 01be 05        		.byte	5
 4929 01bf 00        		.byte	0
 4930 01c0 00        		.byte	0
 4931 01c1 50        		.byte	80
 4932 01c2 05        		.byte	5
 4933 01c3 00        		.byte	0
 4934 01c4 00        		.byte	0
 4935 01c5 54        		.byte	84
 4936 01c6 15        		.byte	21
 4937 01c7 00        		.byte	0
 4938 01c8 54        		.byte	84
 4939 01c9 55        		.byte	85
 4940 01ca 55        		.byte	85
 4941 01cb 15        		.byte	21
 4942 01cc 54        		.byte	84
 4943 01cd 65        		.byte	101
 4944 01ce 59        		.byte	89
 4945 01cf 15        		.byte	21
 4946 01d0 50        		.byte	80
 4947 01d1 65        		.byte	101
 4948 01d2 59        		.byte	89
 4949 01d3 05        		.byte	5
 4950 01d4 40        		.byte	64
 4951 01d5 65        		.byte	101
 4952 01d6 59        		.byte	89
 4953 01d7 01        		.byte	1
 4954 01d8 00        		.byte	0
 4955 01d9 55        		.byte	85
 4956 01da 55        		.byte	85
 4957 01db 00        		.byte	0
 4958 01dc 00        		.byte	0
 4959 01dd 55        		.byte	85
 4960 01de 55        		.byte	85
 4961 01df 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 200


 4962 01e0 40        		.byte	64
 4963 01e1 55        		.byte	85
 4964 01e2 55        		.byte	85
 4965 01e3 01        		.byte	1
 4966 01e4 40        		.byte	64
 4967 01e5 55        		.byte	85
 4968 01e6 55        		.byte	85
 4969 01e7 01        		.byte	1
 4970 01e8 40        		.byte	64
 4971 01e9 15        		.byte	21
 4972 01ea 54        		.byte	84
 4973 01eb 01        		.byte	1
 4974 01ec 50        		.byte	80
 4975 01ed 01        		.byte	1
 4976 01ee 40        		.byte	64
 4977 01ef 05        		.byte	5
 4978 01f0 50        		.byte	80
 4979 01f1 00        		.byte	0
 4980 01f2 00        		.byte	0
 4981 01f3 05        		.byte	5
 4982               		.data
 4983               		.type	spriteBIG, @object
 4984               		.size	spriteBIG, 7
 4985               	spriteBIG:
 4986 001f 0000      		.word	pgm_imageSHROOM
 4987 0021 0000      		.word	0
 4988 0023 0000      		.word	pgm_paletteBIG
 4989 0025 01        		.byte	1
 4990               		.section	.progmem.data,"a",@progbits
 4991               		.type	pgm_paletteBIG, @object
 4992               		.size	pgm_paletteBIG, 4
 4993               	pgm_paletteBIG:
 4994 01f4 25        		.byte	37
 4995 01f5 07        		.byte	7
 4996 01f6 02        		.byte	2
 4997 01f7 2F        		.byte	47
 4998               		.data
 4999               		.type	sprite1UP, @object
 5000               		.size	sprite1UP, 7
 5001               	sprite1UP:
 5002 0026 0000      		.word	pgm_imageSHROOM
 5003 0028 0000      		.word	0
 5004 002a 0000      		.word	pgm_palette1UP
 5005 002c 01        		.byte	1
 5006               		.section	.progmem.data,"a",@progbits
 5007               		.type	pgm_palette1UP, @object
 5008               		.size	pgm_palette1UP, 4
 5009               	pgm_palette1UP:
 5010 01f8 25        		.byte	37
 5011 01f9 07        		.byte	7
 5012 01fa 04        		.byte	4
 5013 01fb 2F        		.byte	47
 5014               		.type	pgm_imageSHROOM, @object
 5015               		.size	pgm_imageSHROOM, 64
 5016               	pgm_imageSHROOM:
 5017 01fc 00        		.byte	0
 5018 01fd 50        		.byte	80
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 201


 5019 01fe 05        		.byte	5
 5020 01ff 00        		.byte	0
 5021 0200 00        		.byte	0
 5022 0201 54        		.byte	84
 5023 0202 29        		.byte	41
 5024 0203 00        		.byte	0
 5025 0204 00        		.byte	0
 5026 0205 55        		.byte	85
 5027 0206 AA        		.byte	-86
 5028 0207 00        		.byte	0
 5029 0208 40        		.byte	64
 5030 0209 55        		.byte	85
 5031 020a AA        		.byte	-86
 5032 020b 02        		.byte	2
 5033 020c 50        		.byte	80
 5034 020d 55        		.byte	85
 5035 020e A9        		.byte	-87
 5036 020f 05        		.byte	5
 5037 0210 94        		.byte	-108
 5038 0211 5A        		.byte	90
 5039 0212 55        		.byte	85
 5040 0213 15        		.byte	21
 5041 0214 A4        		.byte	-92
 5042 0215 6A        		.byte	106
 5043 0216 55        		.byte	85
 5044 0217 15        		.byte	21
 5045 0218 A5        		.byte	-91
 5046 0219 6A        		.byte	106
 5047 021a 55        		.byte	85
 5048 021b 5A        		.byte	90
 5049 021c A5        		.byte	-91
 5050 021d 6A        		.byte	106
 5051 021e 55        		.byte	85
 5052 021f 6A        		.byte	106
 5053 0220 95        		.byte	-107
 5054 0221 5A        		.byte	90
 5055 0222 55        		.byte	85
 5056 0223 69        		.byte	105
 5057 0224 55        		.byte	85
 5058 0225 55        		.byte	85
 5059 0226 55        		.byte	85
 5060 0227 55        		.byte	85
 5061 0228 A4        		.byte	-92
 5062 0229 FE        		.byte	-2
 5063 022a BF        		.byte	-65
 5064 022b 1A        		.byte	26
 5065 022c 00        		.byte	0
 5066 022d FF        		.byte	-1
 5067 022e FF        		.byte	-1
 5068 022f 00        		.byte	0
 5069 0230 00        		.byte	0
 5070 0231 FF        		.byte	-1
 5071 0232 DF        		.byte	-33
 5072 0233 00        		.byte	0
 5073 0234 00        		.byte	0
 5074 0235 FF        		.byte	-1
 5075 0236 DF        		.byte	-33
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 202


 5076 0237 00        		.byte	0
 5077 0238 00        		.byte	0
 5078 0239 FC        		.byte	-4
 5079 023a 37        		.byte	55
 5080 023b 00        		.byte	0
 5081               		.data
 5082               		.type	spriteDEADGOOMBA, @object
 5083               		.size	spriteDEADGOOMBA, 7
 5084               	spriteDEADGOOMBA:
 5085 002d 0000      		.word	pgm_imageDEADGOOMBA
 5086 002f 0000      		.word	0
 5087 0031 0000      		.word	pgm_paletteDEADGOOMBA
 5088 0033 01        		.byte	1
 5089               		.section	.progmem.data,"a",@progbits
 5090               		.type	pgm_paletteDEADGOOMBA, @object
 5091               		.size	pgm_paletteDEADGOOMBA, 4
 5092               	pgm_paletteDEADGOOMBA:
 5093 023c 25        		.byte	37
 5094 023d 02        		.byte	2
 5095 023e 27        		.byte	39
 5096 023f 00        		.byte	0
 5097               		.type	pgm_imageDEADGOOMBA, @object
 5098               		.size	pgm_imageDEADGOOMBA, 64
 5099               	pgm_imageDEADGOOMBA:
 5100 0240 00        		.byte	0
 5101 0241 00        		.byte	0
 5102 0242 00        		.byte	0
 5103 0243 00        		.byte	0
 5104 0244 00        		.byte	0
 5105 0245 00        		.byte	0
 5106 0246 00        		.byte	0
 5107 0247 00        		.byte	0
 5108 0248 00        		.byte	0
 5109 0249 00        		.byte	0
 5110 024a 00        		.byte	0
 5111 024b 00        		.byte	0
 5112 024c 00        		.byte	0
 5113 024d 00        		.byte	0
 5114 024e 00        		.byte	0
 5115 024f 00        		.byte	0
 5116 0250 00        		.byte	0
 5117 0251 00        		.byte	0
 5118 0252 00        		.byte	0
 5119 0253 00        		.byte	0
 5120 0254 00        		.byte	0
 5121 0255 00        		.byte	0
 5122 0256 00        		.byte	0
 5123 0257 00        		.byte	0
 5124 0258 00        		.byte	0
 5125 0259 00        		.byte	0
 5126 025a 00        		.byte	0
 5127 025b 00        		.byte	0
 5128 025c 00        		.byte	0
 5129 025d 50        		.byte	80
 5130 025e 05        		.byte	5
 5131 025f 00        		.byte	0
 5132 0260 40        		.byte	64
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 203


 5133 0261 55        		.byte	85
 5134 0262 55        		.byte	85
 5135 0263 01        		.byte	1
 5136 0264 D4        		.byte	-44
 5137 0265 5F        		.byte	95
 5138 0266 F5        		.byte	-11
 5139 0267 17        		.byte	23
 5140 0268 A5        		.byte	-91
 5141 0269 FA        		.byte	-6
 5142 026a AF        		.byte	-81
 5143 026b 5A        		.byte	90
 5144 026c 55        		.byte	85
 5145 026d 55        		.byte	85
 5146 026e 55        		.byte	85
 5147 026f 55        		.byte	85
 5148 0270 80        		.byte	-128
 5149 0271 AA        		.byte	-86
 5150 0272 AA        		.byte	-86
 5151 0273 02        		.byte	2
 5152 0274 80        		.byte	-128
 5153 0275 AA        		.byte	-86
 5154 0276 AA        		.byte	-86
 5155 0277 02        		.byte	2
 5156 0278 F0        		.byte	-16
 5157 0279 0F        		.byte	15
 5158 027a F0        		.byte	-16
 5159 027b 3F        		.byte	63
 5160 027c 00        		.byte	0
 5161 027d 00        		.byte	0
 5162 027e 00        		.byte	0
 5163 027f 00        		.byte	0
 5164               		.data
 5165               		.type	spriteSOLID, @object
 5166               		.size	spriteSOLID, 7
 5167               	spriteSOLID:
 5168 0034 0000      		.word	pgm_imageSOLID
 5169 0036 0000      		.word	0
 5170 0038 0000      		.word	pgm_paletteSOLID
 5171 003a 01        		.byte	1
 5172               		.section	.progmem.data,"a",@progbits
 5173               		.type	pgm_paletteSOLID, @object
 5174               		.size	pgm_paletteSOLID, 4
 5175               	pgm_paletteSOLID:
 5176 0280 25        		.byte	37
 5177 0281 02        		.byte	2
 5178 0282 00        		.byte	0
 5179 0283 00        		.byte	0
 5180               		.type	pgm_imageSOLID, @object
 5181               		.size	pgm_imageSOLID, 64
 5182               	pgm_imageSOLID:
 5183 0284 FC        		.byte	-4
 5184 0285 FF        		.byte	-1
 5185 0286 FF        		.byte	-1
 5186 0287 3F        		.byte	63
 5187 0288 57        		.byte	87
 5188 0289 55        		.byte	85
 5189 028a 55        		.byte	85
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 204


 5190 028b D5        		.byte	-43
 5191 028c 77        		.byte	119
 5192 028d 55        		.byte	85
 5193 028e 55        		.byte	85
 5194 028f DD        		.byte	-35
 5195 0290 57        		.byte	87
 5196 0291 55        		.byte	85
 5197 0292 55        		.byte	85
 5198 0293 D5        		.byte	-43
 5199 0294 57        		.byte	87
 5200 0295 55        		.byte	85
 5201 0296 55        		.byte	85
 5202 0297 D5        		.byte	-43
 5203 0298 57        		.byte	87
 5204 0299 55        		.byte	85
 5205 029a 55        		.byte	85
 5206 029b D5        		.byte	-43
 5207 029c 57        		.byte	87
 5208 029d 55        		.byte	85
 5209 029e 55        		.byte	85
 5210 029f D5        		.byte	-43
 5211 02a0 57        		.byte	87
 5212 02a1 55        		.byte	85
 5213 02a2 55        		.byte	85
 5214 02a3 D5        		.byte	-43
 5215 02a4 57        		.byte	87
 5216 02a5 55        		.byte	85
 5217 02a6 55        		.byte	85
 5218 02a7 D5        		.byte	-43
 5219 02a8 57        		.byte	87
 5220 02a9 55        		.byte	85
 5221 02aa 55        		.byte	85
 5222 02ab D5        		.byte	-43
 5223 02ac 57        		.byte	87
 5224 02ad 55        		.byte	85
 5225 02ae 55        		.byte	85
 5226 02af D5        		.byte	-43
 5227 02b0 57        		.byte	87
 5228 02b1 55        		.byte	85
 5229 02b2 55        		.byte	85
 5230 02b3 D5        		.byte	-43
 5231 02b4 57        		.byte	87
 5232 02b5 55        		.byte	85
 5233 02b6 55        		.byte	85
 5234 02b7 D5        		.byte	-43
 5235 02b8 77        		.byte	119
 5236 02b9 55        		.byte	85
 5237 02ba 55        		.byte	85
 5238 02bb DD        		.byte	-35
 5239 02bc 57        		.byte	87
 5240 02bd 55        		.byte	85
 5241 02be 55        		.byte	85
 5242 02bf D5        		.byte	-43
 5243 02c0 FC        		.byte	-4
 5244 02c1 FF        		.byte	-1
 5245 02c2 FF        		.byte	-1
 5246 02c3 3F        		.byte	63
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 205


 5247               		.data
 5248               		.type	spriteQ, @object
 5249               		.size	spriteQ, 7
 5250               	spriteQ:
 5251 003b 0000      		.word	pgm_imageQ
 5252 003d 0000      		.word	0
 5253 003f 0000      		.word	pgm_paletteQ
 5254 0041 03        		.byte	3
 5255               		.section	.progmem.data,"a",@progbits
 5256               		.type	pgm_paletteQ, @object
 5257               		.size	pgm_paletteQ, 12
 5258               	pgm_paletteQ:
 5259 02c4 25        		.byte	37
 5260 02c5 02        		.byte	2
 5261 02c6 07        		.byte	7
 5262 02c7 00        		.byte	0
 5263 02c8 25        		.byte	37
 5264 02c9 02        		.byte	2
 5265 02ca 02        		.byte	2
 5266 02cb 00        		.byte	0
 5267 02cc 25        		.byte	37
 5268 02cd 02        		.byte	2
 5269 02ce 01        		.byte	1
 5270 02cf 00        		.byte	0
 5271               		.type	pgm_imageQ, @object
 5272               		.size	pgm_imageQ, 64
 5273               	pgm_imageQ:
 5274 02d0 54        		.byte	84
 5275 02d1 55        		.byte	85
 5276 02d2 55        		.byte	85
 5277 02d3 15        		.byte	21
 5278 02d4 A9        		.byte	-87
 5279 02d5 AA        		.byte	-86
 5280 02d6 AA        		.byte	-86
 5281 02d7 EA        		.byte	-22
 5282 02d8 B9        		.byte	-71
 5283 02d9 AA        		.byte	-86
 5284 02da AA        		.byte	-86
 5285 02db EE        		.byte	-18
 5286 02dc A9        		.byte	-87
 5287 02dd 56        		.byte	86
 5288 02de A5        		.byte	-91
 5289 02df EA        		.byte	-22
 5290 02e0 A9        		.byte	-87
 5291 02e1 F5        		.byte	-11
 5292 02e2 97        		.byte	-105
 5293 02e3 EA        		.byte	-22
 5294 02e4 A9        		.byte	-87
 5295 02e5 B5        		.byte	-75
 5296 02e6 D6        		.byte	-42
 5297 02e7 EA        		.byte	-22
 5298 02e8 A9        		.byte	-87
 5299 02e9 B5        		.byte	-75
 5300 02ea D6        		.byte	-42
 5301 02eb EA        		.byte	-22
 5302 02ec A9        		.byte	-87
 5303 02ed BE        		.byte	-66
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 206


 5304 02ee D5        		.byte	-43
 5305 02ef EA        		.byte	-22
 5306 02f0 A9        		.byte	-87
 5307 02f1 6A        		.byte	106
 5308 02f2 FD        		.byte	-3
 5309 02f3 EA        		.byte	-22
 5310 02f4 A9        		.byte	-87
 5311 02f5 6A        		.byte	106
 5312 02f6 AD        		.byte	-83
 5313 02f7 EA        		.byte	-22
 5314 02f8 A9        		.byte	-87
 5315 02f9 AA        		.byte	-86
 5316 02fa AF        		.byte	-81
 5317 02fb EA        		.byte	-22
 5318 02fc A9        		.byte	-87
 5319 02fd 6A        		.byte	106
 5320 02fe A9        		.byte	-87
 5321 02ff EA        		.byte	-22
 5322 0300 A9        		.byte	-87
 5323 0301 6A        		.byte	106
 5324 0302 AD        		.byte	-83
 5325 0303 EA        		.byte	-22
 5326 0304 B9        		.byte	-71
 5327 0305 AA        		.byte	-86
 5328 0306 AF        		.byte	-81
 5329 0307 EE        		.byte	-18
 5330 0308 A9        		.byte	-87
 5331 0309 AA        		.byte	-86
 5332 030a AA        		.byte	-86
 5333 030b EA        		.byte	-22
 5334 030c FF        		.byte	-1
 5335 030d FF        		.byte	-1
 5336 030e FF        		.byte	-1
 5337 030f FF        		.byte	-1
 5338               	.global	skyOverrideSprite
 5339               		.section .bss
 5340               		.type	skyOverrideSprite, @object
 5341               		.size	skyOverrideSprite, 2
 5342               	skyOverrideSprite:
 5343 0009 0000      		.zero	2
 5344               		.comm	frameBuffer,256,1
 5345               	.global	characters
 5346               		.section	.progmem.data,"a",@progbits
 5347               		.type	characters, @object
 5348               		.size	characters, 768
 5349               	characters:
 5350 0310 00        		.byte	0
 5351 0311 0C        		.byte	12
 5352 0312 36        		.byte	54
 5353 0313 36        		.byte	54
 5354 0314 0C        		.byte	12
 5355 0315 00        		.byte	0
 5356 0316 1C        		.byte	28
 5357 0317 06        		.byte	6
 5358 0318 18        		.byte	24
 5359 0319 06        		.byte	6
 5360 031a 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 207


 5361 031b 00        		.byte	0
 5362 031c 00        		.byte	0
 5363 031d 00        		.byte	0
 5364 031e 00        		.byte	0
 5365 031f 60        		.byte	96
 5366 0320 1E        		.byte	30
 5367 0321 0C        		.byte	12
 5368 0322 1E        		.byte	30
 5369 0323 1E        		.byte	30
 5370 0324 38        		.byte	56
 5371 0325 3F        		.byte	63
 5372 0326 1C        		.byte	28
 5373 0327 3F        		.byte	63
 5374 0328 1E        		.byte	30
 5375 0329 1E        		.byte	30
 5376 032a 00        		.byte	0
 5377 032b 00        		.byte	0
 5378 032c 18        		.byte	24
 5379 032d 00        		.byte	0
 5380 032e 06        		.byte	6
 5381 032f 1E        		.byte	30
 5382 0330 3E        		.byte	62
 5383 0331 0C        		.byte	12
 5384 0332 3F        		.byte	63
 5385 0333 3C        		.byte	60
 5386 0334 3F        		.byte	63
 5387 0335 7F        		.byte	127
 5388 0336 7F        		.byte	127
 5389 0337 3C        		.byte	60
 5390 0338 33        		.byte	51
 5391 0339 1E        		.byte	30
 5392 033a 78        		.byte	120
 5393 033b 67        		.byte	103
 5394 033c 0F        		.byte	15
 5395 033d 63        		.byte	99
 5396 033e 63        		.byte	99
 5397 033f 1C        		.byte	28
 5398 0340 3F        		.byte	63
 5399 0341 1E        		.byte	30
 5400 0342 3F        		.byte	63
 5401 0343 1E        		.byte	30
 5402 0344 3F        		.byte	63
 5403 0345 33        		.byte	51
 5404 0346 33        		.byte	51
 5405 0347 63        		.byte	99
 5406 0348 63        		.byte	99
 5407 0349 33        		.byte	51
 5408 034a 7F        		.byte	127
 5409 034b 1E        		.byte	30
 5410 034c 03        		.byte	3
 5411 034d 1E        		.byte	30
 5412 034e 08        		.byte	8
 5413 034f 00        		.byte	0
 5414 0350 0C        		.byte	12
 5415 0351 00        		.byte	0
 5416 0352 07        		.byte	7
 5417 0353 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 208


 5418 0354 38        		.byte	56
 5419 0355 00        		.byte	0
 5420 0356 1C        		.byte	28
 5421 0357 00        		.byte	0
 5422 0358 07        		.byte	7
 5423 0359 0C        		.byte	12
 5424 035a 18        		.byte	24
 5425 035b 07        		.byte	7
 5426 035c 0E        		.byte	14
 5427 035d 00        		.byte	0
 5428 035e 00        		.byte	0
 5429 035f 00        		.byte	0
 5430 0360 00        		.byte	0
 5431 0361 00        		.byte	0
 5432 0362 00        		.byte	0
 5433 0363 00        		.byte	0
 5434 0364 08        		.byte	8
 5435 0365 00        		.byte	0
 5436 0366 00        		.byte	0
 5437 0367 00        		.byte	0
 5438 0368 00        		.byte	0
 5439 0369 00        		.byte	0
 5440 036a 00        		.byte	0
 5441 036b 38        		.byte	56
 5442 036c 18        		.byte	24
 5443 036d 07        		.byte	7
 5444 036e 6E        		.byte	110
 5445 036f 0E        		.byte	14
 5446 0370 00        		.byte	0
 5447 0371 1E        		.byte	30
 5448 0372 36        		.byte	54
 5449 0373 36        		.byte	54
 5450 0374 3E        		.byte	62
 5451 0375 63        		.byte	99
 5452 0376 36        		.byte	54
 5453 0377 06        		.byte	6
 5454 0378 0C        		.byte	12
 5455 0379 0C        		.byte	12
 5456 037a 66        		.byte	102
 5457 037b 0C        		.byte	12
 5458 037c 00        		.byte	0
 5459 037d 00        		.byte	0
 5460 037e 00        		.byte	0
 5461 037f 30        		.byte	48
 5462 0380 33        		.byte	51
 5463 0381 0F        		.byte	15
 5464 0382 33        		.byte	51
 5465 0383 33        		.byte	51
 5466 0384 3C        		.byte	60
 5467 0385 03        		.byte	3
 5468 0386 06        		.byte	6
 5469 0387 33        		.byte	51
 5470 0388 33        		.byte	51
 5471 0389 33        		.byte	51
 5472 038a 00        		.byte	0
 5473 038b 00        		.byte	0
 5474 038c 0C        		.byte	12
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 209


 5475 038d 00        		.byte	0
 5476 038e 0C        		.byte	12
 5477 038f 33        		.byte	51
 5478 0390 63        		.byte	99
 5479 0391 1E        		.byte	30
 5480 0392 66        		.byte	102
 5481 0393 66        		.byte	102
 5482 0394 36        		.byte	54
 5483 0395 46        		.byte	70
 5484 0396 46        		.byte	70
 5485 0397 66        		.byte	102
 5486 0398 33        		.byte	51
 5487 0399 0C        		.byte	12
 5488 039a 30        		.byte	48
 5489 039b 66        		.byte	102
 5490 039c 06        		.byte	6
 5491 039d 77        		.byte	119
 5492 039e 67        		.byte	103
 5493 039f 36        		.byte	54
 5494 03a0 66        		.byte	102
 5495 03a1 33        		.byte	51
 5496 03a2 66        		.byte	102
 5497 03a3 33        		.byte	51
 5498 03a4 2D        		.byte	45
 5499 03a5 33        		.byte	51
 5500 03a6 33        		.byte	51
 5501 03a7 63        		.byte	99
 5502 03a8 63        		.byte	99
 5503 03a9 33        		.byte	51
 5504 03aa 33        		.byte	51
 5505 03ab 06        		.byte	6
 5506 03ac 06        		.byte	6
 5507 03ad 18        		.byte	24
 5508 03ae 1C        		.byte	28
 5509 03af 00        		.byte	0
 5510 03b0 0C        		.byte	12
 5511 03b1 00        		.byte	0
 5512 03b2 06        		.byte	6
 5513 03b3 00        		.byte	0
 5514 03b4 30        		.byte	48
 5515 03b5 00        		.byte	0
 5516 03b6 36        		.byte	54
 5517 03b7 00        		.byte	0
 5518 03b8 06        		.byte	6
 5519 03b9 00        		.byte	0
 5520 03ba 00        		.byte	0
 5521 03bb 06        		.byte	6
 5522 03bc 0C        		.byte	12
 5523 03bd 00        		.byte	0
 5524 03be 00        		.byte	0
 5525 03bf 00        		.byte	0
 5526 03c0 00        		.byte	0
 5527 03c1 00        		.byte	0
 5528 03c2 00        		.byte	0
 5529 03c3 00        		.byte	0
 5530 03c4 0C        		.byte	12
 5531 03c5 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 210


 5532 03c6 00        		.byte	0
 5533 03c7 00        		.byte	0
 5534 03c8 00        		.byte	0
 5535 03c9 00        		.byte	0
 5536 03ca 00        		.byte	0
 5537 03cb 0C        		.byte	12
 5538 03cc 18        		.byte	24
 5539 03cd 0C        		.byte	12
 5540 03ce 3B        		.byte	59
 5541 03cf 13        		.byte	19
 5542 03d0 00        		.byte	0
 5543 03d1 1E        		.byte	30
 5544 03d2 36        		.byte	54
 5545 03d3 7F        		.byte	127
 5546 03d4 03        		.byte	3
 5547 03d5 33        		.byte	51
 5548 03d6 1C        		.byte	28
 5549 03d7 03        		.byte	3
 5550 03d8 06        		.byte	6
 5551 03d9 18        		.byte	24
 5552 03da 3C        		.byte	60
 5553 03db 0C        		.byte	12
 5554 03dc 00        		.byte	0
 5555 03dd 00        		.byte	0
 5556 03de 00        		.byte	0
 5557 03df 18        		.byte	24
 5558 03e0 3B        		.byte	59
 5559 03e1 0C        		.byte	12
 5560 03e2 30        		.byte	48
 5561 03e3 30        		.byte	48
 5562 03e4 36        		.byte	54
 5563 03e5 1F        		.byte	31
 5564 03e6 03        		.byte	3
 5565 03e7 30        		.byte	48
 5566 03e8 33        		.byte	51
 5567 03e9 33        		.byte	51
 5568 03ea 0C        		.byte	12
 5569 03eb 0C        		.byte	12
 5570 03ec 06        		.byte	6
 5571 03ed 3F        		.byte	63
 5572 03ee 18        		.byte	24
 5573 03ef 30        		.byte	48
 5574 03f0 7B        		.byte	123
 5575 03f1 33        		.byte	51
 5576 03f2 66        		.byte	102
 5577 03f3 03        		.byte	3
 5578 03f4 66        		.byte	102
 5579 03f5 16        		.byte	22
 5580 03f6 16        		.byte	22
 5581 03f7 03        		.byte	3
 5582 03f8 33        		.byte	51
 5583 03f9 0C        		.byte	12
 5584 03fa 30        		.byte	48
 5585 03fb 36        		.byte	54
 5586 03fc 06        		.byte	6
 5587 03fd 7F        		.byte	127
 5588 03fe 6F        		.byte	111
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 211


 5589 03ff 63        		.byte	99
 5590 0400 66        		.byte	102
 5591 0401 33        		.byte	51
 5592 0402 66        		.byte	102
 5593 0403 07        		.byte	7
 5594 0404 0C        		.byte	12
 5595 0405 33        		.byte	51
 5596 0406 33        		.byte	51
 5597 0407 63        		.byte	99
 5598 0408 36        		.byte	54
 5599 0409 33        		.byte	51
 5600 040a 19        		.byte	25
 5601 040b 06        		.byte	6
 5602 040c 0C        		.byte	12
 5603 040d 18        		.byte	24
 5604 040e 36        		.byte	54
 5605 040f 00        		.byte	0
 5606 0410 18        		.byte	24
 5607 0411 1E        		.byte	30
 5608 0412 3E        		.byte	62
 5609 0413 1E        		.byte	30
 5610 0414 30        		.byte	48
 5611 0415 1E        		.byte	30
 5612 0416 06        		.byte	6
 5613 0417 6E        		.byte	110
 5614 0418 36        		.byte	54
 5615 0419 0E        		.byte	14
 5616 041a 1E        		.byte	30
 5617 041b 66        		.byte	102
 5618 041c 0C        		.byte	12
 5619 041d 37        		.byte	55
 5620 041e 1F        		.byte	31
 5621 041f 1E        		.byte	30
 5622 0420 3B        		.byte	59
 5623 0421 6E        		.byte	110
 5624 0422 1B        		.byte	27
 5625 0423 3E        		.byte	62
 5626 0424 3E        		.byte	62
 5627 0425 33        		.byte	51
 5628 0426 33        		.byte	51
 5629 0427 63        		.byte	99
 5630 0428 63        		.byte	99
 5631 0429 33        		.byte	51
 5632 042a 3F        		.byte	63
 5633 042b 0C        		.byte	12
 5634 042c 18        		.byte	24
 5635 042d 0C        		.byte	12
 5636 042e 00        		.byte	0
 5637 042f 39        		.byte	57
 5638 0430 00        		.byte	0
 5639 0431 0C        		.byte	12
 5640 0432 00        		.byte	0
 5641 0433 36        		.byte	54
 5642 0434 1E        		.byte	30
 5643 0435 18        		.byte	24
 5644 0436 6E        		.byte	110
 5645 0437 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 212


 5646 0438 06        		.byte	6
 5647 0439 18        		.byte	24
 5648 043a FF        		.byte	-1
 5649 043b 3F        		.byte	63
 5650 043c 00        		.byte	0
 5651 043d 3F        		.byte	63
 5652 043e 00        		.byte	0
 5653 043f 0C        		.byte	12
 5654 0440 3F        		.byte	63
 5655 0441 0C        		.byte	12
 5656 0442 1C        		.byte	28
 5657 0443 1C        		.byte	28
 5658 0444 33        		.byte	51
 5659 0445 30        		.byte	48
 5660 0446 1F        		.byte	31
 5661 0447 18        		.byte	24
 5662 0448 1E        		.byte	30
 5663 0449 3E        		.byte	62
 5664 044a 0C        		.byte	12
 5665 044b 0C        		.byte	12
 5666 044c 03        		.byte	3
 5667 044d 00        		.byte	0
 5668 044e 30        		.byte	48
 5669 044f 18        		.byte	24
 5670 0450 7B        		.byte	123
 5671 0451 33        		.byte	51
 5672 0452 3E        		.byte	62
 5673 0453 03        		.byte	3
 5674 0454 66        		.byte	102
 5675 0455 1E        		.byte	30
 5676 0456 1E        		.byte	30
 5677 0457 03        		.byte	3
 5678 0458 3F        		.byte	63
 5679 0459 0C        		.byte	12
 5680 045a 30        		.byte	48
 5681 045b 1E        		.byte	30
 5682 045c 06        		.byte	6
 5683 045d 6B        		.byte	107
 5684 045e 7B        		.byte	123
 5685 045f 63        		.byte	99
 5686 0460 3E        		.byte	62
 5687 0461 33        		.byte	51
 5688 0462 3E        		.byte	62
 5689 0463 1C        		.byte	28
 5690 0464 0C        		.byte	12
 5691 0465 33        		.byte	51
 5692 0466 33        		.byte	51
 5693 0467 6B        		.byte	107
 5694 0468 1C        		.byte	28
 5695 0469 1E        		.byte	30
 5696 046a 0C        		.byte	12
 5697 046b 06        		.byte	6
 5698 046c 18        		.byte	24
 5699 046d 18        		.byte	24
 5700 046e 63        		.byte	99
 5701 046f 00        		.byte	0
 5702 0470 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 213


 5703 0471 30        		.byte	48
 5704 0472 66        		.byte	102
 5705 0473 33        		.byte	51
 5706 0474 3E        		.byte	62
 5707 0475 33        		.byte	51
 5708 0476 0F        		.byte	15
 5709 0477 33        		.byte	51
 5710 0478 6E        		.byte	110
 5711 0479 0C        		.byte	12
 5712 047a 18        		.byte	24
 5713 047b 36        		.byte	54
 5714 047c 0C        		.byte	12
 5715 047d 7F        		.byte	127
 5716 047e 33        		.byte	51
 5717 047f 33        		.byte	51
 5718 0480 66        		.byte	102
 5719 0481 33        		.byte	51
 5720 0482 36        		.byte	54
 5721 0483 03        		.byte	3
 5722 0484 0C        		.byte	12
 5723 0485 33        		.byte	51
 5724 0486 33        		.byte	51
 5725 0487 63        		.byte	99
 5726 0488 36        		.byte	54
 5727 0489 33        		.byte	51
 5728 048a 19        		.byte	25
 5729 048b 07        		.byte	7
 5730 048c 00        		.byte	0
 5731 048d 38        		.byte	56
 5732 048e 00        		.byte	0
 5733 048f 69        		.byte	105
 5734 0490 00        		.byte	0
 5735 0491 0C        		.byte	12
 5736 0492 00        		.byte	0
 5737 0493 7F        		.byte	127
 5738 0494 30        		.byte	48
 5739 0495 0C        		.byte	12
 5740 0496 3B        		.byte	59
 5741 0497 00        		.byte	0
 5742 0498 06        		.byte	6
 5743 0499 18        		.byte	24
 5744 049a 3C        		.byte	60
 5745 049b 0C        		.byte	12
 5746 049c 00        		.byte	0
 5747 049d 00        		.byte	0
 5748 049e 00        		.byte	0
 5749 049f 06        		.byte	6
 5750 04a0 37        		.byte	55
 5751 04a1 0C        		.byte	12
 5752 04a2 06        		.byte	6
 5753 04a3 30        		.byte	48
 5754 04a4 7F        		.byte	127
 5755 04a5 30        		.byte	48
 5756 04a6 33        		.byte	51
 5757 04a7 0C        		.byte	12
 5758 04a8 33        		.byte	51
 5759 04a9 30        		.byte	48
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 214


 5760 04aa 00        		.byte	0
 5761 04ab 00        		.byte	0
 5762 04ac 06        		.byte	6
 5763 04ad 3F        		.byte	63
 5764 04ae 18        		.byte	24
 5765 04af 0C        		.byte	12
 5766 04b0 7B        		.byte	123
 5767 04b1 3F        		.byte	63
 5768 04b2 66        		.byte	102
 5769 04b3 03        		.byte	3
 5770 04b4 66        		.byte	102
 5771 04b5 16        		.byte	22
 5772 04b6 16        		.byte	22
 5773 04b7 73        		.byte	115
 5774 04b8 33        		.byte	51
 5775 04b9 0C        		.byte	12
 5776 04ba 33        		.byte	51
 5777 04bb 36        		.byte	54
 5778 04bc 46        		.byte	70
 5779 04bd 63        		.byte	99
 5780 04be 73        		.byte	115
 5781 04bf 63        		.byte	99
 5782 04c0 06        		.byte	6
 5783 04c1 3B        		.byte	59
 5784 04c2 1E        		.byte	30
 5785 04c3 38        		.byte	56
 5786 04c4 0C        		.byte	12
 5787 04c5 33        		.byte	51
 5788 04c6 33        		.byte	51
 5789 04c7 7F        		.byte	127
 5790 04c8 36        		.byte	54
 5791 04c9 0C        		.byte	12
 5792 04ca 46        		.byte	70
 5793 04cb 06        		.byte	6
 5794 04cc 30        		.byte	48
 5795 04cd 18        		.byte	24
 5796 04ce 00        		.byte	0
 5797 04cf 00        		.byte	0
 5798 04d0 00        		.byte	0
 5799 04d1 3E        		.byte	62
 5800 04d2 66        		.byte	102
 5801 04d3 03        		.byte	3
 5802 04d4 33        		.byte	51
 5803 04d5 3F        		.byte	63
 5804 04d6 06        		.byte	6
 5805 04d7 33        		.byte	51
 5806 04d8 66        		.byte	102
 5807 04d9 0C        		.byte	12
 5808 04da 18        		.byte	24
 5809 04db 1E        		.byte	30
 5810 04dc 0C        		.byte	12
 5811 04dd 6B        		.byte	107
 5812 04de 33        		.byte	51
 5813 04df 33        		.byte	51
 5814 04e0 66        		.byte	102
 5815 04e1 33        		.byte	51
 5816 04e2 36        		.byte	54
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 215


 5817 04e3 1E        		.byte	30
 5818 04e4 0C        		.byte	12
 5819 04e5 33        		.byte	51
 5820 04e6 33        		.byte	51
 5821 04e7 6B        		.byte	107
 5822 04e8 1C        		.byte	28
 5823 04e9 33        		.byte	51
 5824 04ea 0C        		.byte	12
 5825 04eb 0C        		.byte	12
 5826 04ec 18        		.byte	24
 5827 04ed 0C        		.byte	12
 5828 04ee 00        		.byte	0
 5829 04ef 0E        		.byte	14
 5830 04f0 00        		.byte	0
 5831 04f1 00        		.byte	0
 5832 04f2 00        		.byte	0
 5833 04f3 36        		.byte	54
 5834 04f4 1F        		.byte	31
 5835 04f5 66        		.byte	102
 5836 04f6 33        		.byte	51
 5837 04f7 00        		.byte	0
 5838 04f8 0C        		.byte	12
 5839 04f9 0C        		.byte	12
 5840 04fa 66        		.byte	102
 5841 04fb 0C        		.byte	12
 5842 04fc 0E        		.byte	14
 5843 04fd 00        		.byte	0
 5844 04fe 0C        		.byte	12
 5845 04ff 03        		.byte	3
 5846 0500 33        		.byte	51
 5847 0501 0C        		.byte	12
 5848 0502 33        		.byte	51
 5849 0503 33        		.byte	51
 5850 0504 30        		.byte	48
 5851 0505 33        		.byte	51
 5852 0506 33        		.byte	51
 5853 0507 06        		.byte	6
 5854 0508 33        		.byte	51
 5855 0509 18        		.byte	24
 5856 050a 0C        		.byte	12
 5857 050b 0E        		.byte	14
 5858 050c 0C        		.byte	12
 5859 050d 00        		.byte	0
 5860 050e 0C        		.byte	12
 5861 050f 00        		.byte	0
 5862 0510 03        		.byte	3
 5863 0511 33        		.byte	51
 5864 0512 66        		.byte	102
 5865 0513 66        		.byte	102
 5866 0514 36        		.byte	54
 5867 0515 46        		.byte	70
 5868 0516 06        		.byte	6
 5869 0517 66        		.byte	102
 5870 0518 33        		.byte	51
 5871 0519 0C        		.byte	12
 5872 051a 33        		.byte	51
 5873 051b 66        		.byte	102
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 216


 5874 051c 66        		.byte	102
 5875 051d 63        		.byte	99
 5876 051e 63        		.byte	99
 5877 051f 36        		.byte	54
 5878 0520 06        		.byte	6
 5879 0521 1E        		.byte	30
 5880 0522 36        		.byte	54
 5881 0523 33        		.byte	51
 5882 0524 0C        		.byte	12
 5883 0525 33        		.byte	51
 5884 0526 1E        		.byte	30
 5885 0527 77        		.byte	119
 5886 0528 63        		.byte	99
 5887 0529 0C        		.byte	12
 5888 052a 63        		.byte	99
 5889 052b 06        		.byte	6
 5890 052c 60        		.byte	96
 5891 052d 18        		.byte	24
 5892 052e 00        		.byte	0
 5893 052f 00        		.byte	0
 5894 0530 00        		.byte	0
 5895 0531 33        		.byte	51
 5896 0532 66        		.byte	102
 5897 0533 33        		.byte	51
 5898 0534 33        		.byte	51
 5899 0535 03        		.byte	3
 5900 0536 06        		.byte	6
 5901 0537 3E        		.byte	62
 5902 0538 66        		.byte	102
 5903 0539 0C        		.byte	12
 5904 053a 18        		.byte	24
 5905 053b 36        		.byte	54
 5906 053c 0C        		.byte	12
 5907 053d 63        		.byte	99
 5908 053e 33        		.byte	51
 5909 053f 33        		.byte	51
 5910 0540 3E        		.byte	62
 5911 0541 3E        		.byte	62
 5912 0542 06        		.byte	6
 5913 0543 30        		.byte	48
 5914 0544 2C        		.byte	44
 5915 0545 33        		.byte	51
 5916 0546 1E        		.byte	30
 5917 0547 7F        		.byte	127
 5918 0548 36        		.byte	54
 5919 0549 3E        		.byte	62
 5920 054a 26        		.byte	38
 5921 054b 0C        		.byte	12
 5922 054c 18        		.byte	24
 5923 054d 0C        		.byte	12
 5924 054e 00        		.byte	0
 5925 054f F3        		.byte	-13
 5926 0550 00        		.byte	0
 5927 0551 0C        		.byte	12
 5928 0552 00        		.byte	0
 5929 0553 36        		.byte	54
 5930 0554 0C        		.byte	12
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 217


 5931 0555 63        		.byte	99
 5932 0556 6E        		.byte	110
 5933 0557 00        		.byte	0
 5934 0558 18        		.byte	24
 5935 0559 06        		.byte	6
 5936 055a 00        		.byte	0
 5937 055b 00        		.byte	0
 5938 055c 0C        		.byte	12
 5939 055d 00        		.byte	0
 5940 055e 0C        		.byte	12
 5941 055f 01        		.byte	1
 5942 0560 1E        		.byte	30
 5943 0561 3F        		.byte	63
 5944 0562 3F        		.byte	63
 5945 0563 1E        		.byte	30
 5946 0564 30        		.byte	48
 5947 0565 1E        		.byte	30
 5948 0566 1E        		.byte	30
 5949 0567 06        		.byte	6
 5950 0568 1E        		.byte	30
 5951 0569 0E        		.byte	14
 5952 056a 0C        		.byte	12
 5953 056b 0C        		.byte	12
 5954 056c 18        		.byte	24
 5955 056d 00        		.byte	0
 5956 056e 06        		.byte	6
 5957 056f 0C        		.byte	12
 5958 0570 1E        		.byte	30
 5959 0571 33        		.byte	51
 5960 0572 3F        		.byte	63
 5961 0573 3C        		.byte	60
 5962 0574 3F        		.byte	63
 5963 0575 7F        		.byte	127
 5964 0576 0F        		.byte	15
 5965 0577 7C        		.byte	124
 5966 0578 33        		.byte	51
 5967 0579 1E        		.byte	30
 5968 057a 1E        		.byte	30
 5969 057b 67        		.byte	103
 5970 057c 7F        		.byte	127
 5971 057d 63        		.byte	99
 5972 057e 63        		.byte	99
 5973 057f 1C        		.byte	28
 5974 0580 0F        		.byte	15
 5975 0581 38        		.byte	56
 5976 0582 67        		.byte	103
 5977 0583 1E        		.byte	30
 5978 0584 1E        		.byte	30
 5979 0585 3F        		.byte	63
 5980 0586 0C        		.byte	12
 5981 0587 63        		.byte	99
 5982 0588 63        		.byte	99
 5983 0589 1E        		.byte	30
 5984 058a 7F        		.byte	127
 5985 058b 1E        		.byte	30
 5986 058c 40        		.byte	64
 5987 058d 1E        		.byte	30
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 218


 5988 058e 00        		.byte	0
 5989 058f 00        		.byte	0
 5990 0590 00        		.byte	0
 5991 0591 6E        		.byte	110
 5992 0592 3D        		.byte	61
 5993 0593 1E        		.byte	30
 5994 0594 6E        		.byte	110
 5995 0595 1E        		.byte	30
 5996 0596 0F        		.byte	15
 5997 0597 30        		.byte	48
 5998 0598 67        		.byte	103
 5999 0599 1E        		.byte	30
 6000 059a 1B        		.byte	27
 6001 059b 67        		.byte	103
 6002 059c 1E        		.byte	30
 6003 059d 63        		.byte	99
 6004 059e 33        		.byte	51
 6005 059f 1E        		.byte	30
 6006 05a0 06        		.byte	6
 6007 05a1 30        		.byte	48
 6008 05a2 0F        		.byte	15
 6009 05a3 1F        		.byte	31
 6010 05a4 18        		.byte	24
 6011 05a5 6E        		.byte	110
 6012 05a6 0C        		.byte	12
 6013 05a7 36        		.byte	54
 6014 05a8 63        		.byte	99
 6015 05a9 30        		.byte	48
 6016 05aa 3F        		.byte	63
 6017 05ab 38        		.byte	56
 6018 05ac 18        		.byte	24
 6019 05ad 07        		.byte	7
 6020 05ae 00        		.byte	0
 6021 05af 46        		.byte	70
 6022 05b0 00        		.byte	0
 6023 05b1 00        		.byte	0
 6024 05b2 00        		.byte	0
 6025 05b3 00        		.byte	0
 6026 05b4 00        		.byte	0
 6027 05b5 00        		.byte	0
 6028 05b6 00        		.byte	0
 6029 05b7 00        		.byte	0
 6030 05b8 00        		.byte	0
 6031 05b9 00        		.byte	0
 6032 05ba 00        		.byte	0
 6033 05bb 00        		.byte	0
 6034 05bc 06        		.byte	6
 6035 05bd 00        		.byte	0
 6036 05be 00        		.byte	0
 6037 05bf 00        		.byte	0
 6038 05c0 00        		.byte	0
 6039 05c1 00        		.byte	0
 6040 05c2 00        		.byte	0
 6041 05c3 00        		.byte	0
 6042 05c4 00        		.byte	0
 6043 05c5 00        		.byte	0
 6044 05c6 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 219


 6045 05c7 00        		.byte	0
 6046 05c8 00        		.byte	0
 6047 05c9 00        		.byte	0
 6048 05ca 00        		.byte	0
 6049 05cb 06        		.byte	6
 6050 05cc 00        		.byte	0
 6051 05cd 00        		.byte	0
 6052 05ce 00        		.byte	0
 6053 05cf 00        		.byte	0
 6054 05d0 00        		.byte	0
 6055 05d1 00        		.byte	0
 6056 05d2 00        		.byte	0
 6057 05d3 00        		.byte	0
 6058 05d4 00        		.byte	0
 6059 05d5 00        		.byte	0
 6060 05d6 00        		.byte	0
 6061 05d7 00        		.byte	0
 6062 05d8 00        		.byte	0
 6063 05d9 00        		.byte	0
 6064 05da 00        		.byte	0
 6065 05db 00        		.byte	0
 6066 05dc 00        		.byte	0
 6067 05dd 00        		.byte	0
 6068 05de 00        		.byte	0
 6069 05df 00        		.byte	0
 6070 05e0 00        		.byte	0
 6071 05e1 00        		.byte	0
 6072 05e2 00        		.byte	0
 6073 05e3 00        		.byte	0
 6074 05e4 00        		.byte	0
 6075 05e5 00        		.byte	0
 6076 05e6 00        		.byte	0
 6077 05e7 00        		.byte	0
 6078 05e8 00        		.byte	0
 6079 05e9 00        		.byte	0
 6080 05ea 00        		.byte	0
 6081 05eb 00        		.byte	0
 6082 05ec 00        		.byte	0
 6083 05ed 00        		.byte	0
 6084 05ee 00        		.byte	0
 6085 05ef FF        		.byte	-1
 6086 05f0 00        		.byte	0
 6087 05f1 00        		.byte	0
 6088 05f2 00        		.byte	0
 6089 05f3 00        		.byte	0
 6090 05f4 00        		.byte	0
 6091 05f5 00        		.byte	0
 6092 05f6 00        		.byte	0
 6093 05f7 1F        		.byte	31
 6094 05f8 00        		.byte	0
 6095 05f9 00        		.byte	0
 6096 05fa 0E        		.byte	14
 6097 05fb 00        		.byte	0
 6098 05fc 00        		.byte	0
 6099 05fd 00        		.byte	0
 6100 05fe 00        		.byte	0
 6101 05ff 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 220


 6102 0600 0F        		.byte	15
 6103 0601 78        		.byte	120
 6104 0602 00        		.byte	0
 6105 0603 00        		.byte	0
 6106 0604 00        		.byte	0
 6107 0605 00        		.byte	0
 6108 0606 00        		.byte	0
 6109 0607 00        		.byte	0
 6110 0608 00        		.byte	0
 6111 0609 1F        		.byte	31
 6112 060a 00        		.byte	0
 6113 060b 00        		.byte	0
 6114 060c 00        		.byte	0
 6115 060d 00        		.byte	0
 6116 060e 00        		.byte	0
 6117 060f F4        		.byte	-12
 6118               	.global	header
 6119               		.type	header, @object
 6120               		.size	header, 36
 6121               	header:
 6122 0610 4C43 4464 		.string	"LCDdirectLVDS67 2014-04-28 00:57:07"
 6122      6972 6563 
 6122      744C 5644 
 6122      5336 3720 
 6122      3230 3134 
 6123               		.stabs	"pgm_imageQ:S(0,51)=ar(0,52)=r(0,52);0;0177777;;0;63;(16,3)",38,0,38,pgm_imageQ
 6124               		.stabs	"pgm_paletteQ:S(0,53)=ar(0,52);0;11;(16,3)",38,0,50,pgm_paletteQ
 6125               		.stabs	"spriteQ:S(16,4)",38,0,57,spriteQ
 6126               		.stabs	"pgm_imageSOLID:S(0,51)",38,0,35,pgm_imageSOLID
 6127               		.stabs	"pgm_paletteSOLID:S(0,54)=ar(0,52);0;3;(16,3)",38,0,47,pgm_paletteSOLID
 6128               		.stabs	"spriteSOLID:S(16,4)",38,0,50,spriteSOLID
 6129               		.stabs	"pgm_imageDEADGOOMBA:S(0,51)",38,0,34,pgm_imageDEADGOOMBA
 6130               		.stabs	"pgm_paletteDEADGOOMBA:S(0,54)",38,0,46,pgm_paletteDEADGOOMBA
 6131               		.stabs	"spriteDEADGOOMBA:S(16,4)",38,0,56,spriteDEADGOOMBA
 6132               		.stabs	"pgm_imageSHROOM:S(0,51)",38,0,37,pgm_imageSHROOM
 6133               		.stabs	"pgm_palette1UP:S(0,54)",38,0,51,pgm_palette1UP
 6134               		.stabs	"sprite1UP:S(16,4)",38,0,54,sprite1UP
 6135               		.stabs	"pgm_paletteBIG:S(0,54)",38,0,23,pgm_paletteBIG
 6136               		.stabs	"spriteBIG:S(16,4)",38,0,26,spriteBIG
 6137               		.stabs	"pgm_imageSTAR:S(0,51)",38,0,38,pgm_imageSTAR
 6138               		.stabs	"pgm_paletteSTAR:S(0,55)=ar(0,52);0;7;(16,3)",38,0,50,pgm_paletteSTAR
 6139               		.stabs	"spriteSTAR:S(16,4)",38,0,54,spriteSTAR
 6140               		.stabs	"pgm_imageFLOWER:S(0,51)",38,0,39,pgm_imageFLOWER
 6141               		.stabs	"pgm_paletteFLOWER:S(0,56)=ar(0,52);0;15;(16,3)",38,0,59,pgm_paletteFLOWER
 6142               		.stabs	"spriteFLOWER:S(16,4)",38,0,66,spriteFLOWER
 6143               		.stabs	"pgm_imageGOOMBA:S(0,51)",38,0,35,pgm_imageGOOMBA
 6144               		.stabs	"pgm_paletteGOOMBA:S(0,57)=ar(0,52);0;23;(16,3)",38,0,55,pgm_paletteGOOMBA
 6145               		.stabs	"spriteGOOMBA:S(16,4)",38,0,96,spriteGOOMBA
 6146               		.stabs	"pgm_imageCOIN:S(0,51)",38,0,92,pgm_imageCOIN
 6147               		.stabs	"pgm_imageCOIN1:S(0,51)",38,0,95,pgm_imageCOIN1
 6148               		.stabs	"pgm_imageCOIN2:S(0,51)",38,0,98,pgm_imageCOIN2
 6149               		.stabs	"pgm_imageCOIN3:S(0,51)",38,0,101,pgm_imageCOIN3
 6150               		.stabs	"pgm_paletteCOIN:S(0,54)",38,0,112,pgm_paletteCOIN
 6151               		.stabs	"spriteCOIN:S(16,4)",38,0,120,spriteCOIN
 6152               		.stabs	"header:G(0,58)=ar(0,52);0;35;(16,3)",32,0,12,0
 6153               		.stabs	"characters:G(0,59)=ar(0,52);0;7;(0,60)=ar(0,52);0;95;(16,3)",32,0,32,0
 6154               		.stabs	"frameBuffer:G(0,61)=ar(0,52);0;15;(0,62)=ar(0,52);0;15;(4,2)",32,0,17,0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 221


 6155               		.stabs	"skyOverrideSprite:G(0,50)",32,0,61,0
 6156               		.stabs	"callCount:G(4,2)",32,0,99,0
 6157               		.stabs	"qCount:G(4,2)",32,0,101,0
 6158               		.stabs	"p_selectedSprite:G(0,50)",32,0,102,0
 6159               		.stabs	"p_nextSprite:G(0,50)",32,0,103,0
 6160               		.stabs	"dataEnable:G(4,2)",32,0,1230,0
 6161               		.stabs	"vSync:G(4,2)",32,0,1231,0
 6162               		.stabs	"hsyncCount:G(4,4)",32,0,1232,0
 6163               		.stabs	"frameCount:G(0,63)=B(4,2)",32,0,306,0
 6164               		.text
 6165               		.stabs	"",100,0,0,.Letext0
 6166               	.Letext0:
 6167               		.ident	"GCC: (GNU) 4.8.2"
 6168               	.global __do_copy_data
 6169               	.global __do_clear_bss
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 222


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:2      *ABS*:0000003e __SP_H__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:3      *ABS*:0000003d __SP_L__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4      *ABS*:0000003f __SREG__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:5      *ABS*:00000000 __tmp_reg__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:6      *ABS*:00000001 __zero_reg__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:173    .text:00000000 pll_enable
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:237    .text:00000030 lvds_timerInit
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:333    .text:000000a2 dc_loop_asdf
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:331    .text:0000009c dc_asm_init_asdf
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:331    .text:0000009e dc_asm_init_exit_asdf
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:333    .text:000000a0 delayCycs_asdf
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:333    .text:000000a6 dc_loopRemainder_asdf
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:333    .text:000000b0 dc_done1_asdf
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:333    .text:000000b2 dc_done_asdf
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:359    .text:000000b8 setColor
                            *COM*:00000100 frameBuffer
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:428    .text:000000f6 frameBufferInit
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:446    .text:000000f8 nonRSB_drawPix
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:2389   .text:0000073c setSpriteSkyColorOverride
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:5342   .bss:00000009 skyOverrideSprite
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:2415   .text:00000746 getRawPixelVal
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:2474   .text:00000778 rawPixValToGimpColorVal
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:2519   .text:00000796 getGimpColorVal
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:2587   .text:000007de getRawPixelValCOIN
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4352   .rodata:00000000 CSWTCH.68
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4431   .progmem.data:00000004 pgm_imageCOIN3
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:2664   .text:00000828 fbQuestion_hitDetected
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4400   .data:00000001 p_selectedSprite
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:5250   .data:0000003b spriteQ
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4394   .bss:00000005 p_nextSprite
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4406   .bss:00000007 qCount
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4411   .bss:00000008 callCount
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:5001   .data:00000026 sprite1UP
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4700   .data:0000000a spriteGOOMBA
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4803   .data:00000011 spriteFLOWER
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4985   .data:0000001f spriteBIG
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4898   .data:00000018 spriteSTAR
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4416   .data:00000003 spriteCOIN
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:5084   .data:0000002d spriteDEADGOOMBA
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:2806   .text:000008e0 getSpritePalette
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:2937   .text:00000944 getSpritePhase
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:3049   .text:00000998 drawSpriteRow
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:3295   .text:00000aca fbQuestion_update
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:5167   .data:00000034 spriteSOLID
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:3632   .text:00000c92 lcd_Init
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:3663   .text:00000cac updateLCD
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4389   .bss:00000004 dataEnable
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4379   .bss:00000001 hsyncCount
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4384   .bss:00000003 vSync
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4075   .text:00000e0a __vector_11
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4374   .bss:00000000 frameCount
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4141   .text:00000e60 init_hsyncTimer
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4182   .text.startup:00000000 main
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4362   .bss:00000010 adcVal.2301
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4366   .data:00000000 avgCount.2302
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s 			page 223


/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4360   .bss:0000000c adcAvg.2300
                             .bss:0000000b lastFrameCount.2304
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4632   .progmem.data:000000c4 pgm_imageCOIN
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4565   .progmem.data:00000084 pgm_imageCOIN1
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4498   .progmem.data:00000044 pgm_imageCOIN2
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4424   .progmem.data:00000000 pgm_paletteCOIN
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4735   .progmem.data:0000011c pgm_imageGOOMBA
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4708   .progmem.data:00000104 pgm_paletteGOOMBA
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4830   .progmem.data:0000016c pgm_imageFLOWER
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4811   .progmem.data:0000015c pgm_paletteFLOWER
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4917   .progmem.data:000001b4 pgm_imageSTAR
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4906   .progmem.data:000001ac pgm_paletteSTAR
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:5016   .progmem.data:000001fc pgm_imageSHROOM
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:4993   .progmem.data:000001f4 pgm_paletteBIG
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:5009   .progmem.data:000001f8 pgm_palette1UP
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:5099   .progmem.data:00000240 pgm_imageDEADGOOMBA
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:5092   .progmem.data:0000023c pgm_paletteDEADGOOMBA
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:5182   .progmem.data:00000284 pgm_imageSOLID
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:5175   .progmem.data:00000280 pgm_paletteSOLID
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:5273   .progmem.data:000002d0 pgm_imageQ
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:5258   .progmem.data:000002c4 pgm_paletteQ
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:5349   .progmem.data:00000310 characters
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccvjlBWZ.s:6121   .progmem.data:00000610 header

UNDEFINED SYMBOLS
__udivmodhi4
adc_getValue
__divmodhi4
__tablejump2__
__udivmodqi4
timer_setWGM
timer_selectDivisor
timer_compareMatchIntSetup
adc_takeInput
adc_init
adc_select
init_heartBeat
setHeartRate
adc_startConversion
adc_isBusy
heartUpdate
__do_copy_data
__do_clear_bss
