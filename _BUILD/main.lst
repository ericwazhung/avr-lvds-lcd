GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 1


   1               		.file	"main.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.stabs	"/Users/meh/_avrProjects/LCDdirectLVDS/68-backToLTN/",100,0,2,.Ltext0
   8               		.stabs	"main.c",100,0,2,.Ltext0
   9               		.text
  10               	.Ltext0:
  11               		.stabs	"gcc2_compiled.",60,0,0,0
  12               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,0,0
  13               		.stabs	"char:t(0,2)=@s8;r(0,2);0;255;",128,0,0,0
  14               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,0,0
  15               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,0,0
  16               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,0,0
  17               		.stabs	"long long int:t(0,6)=@s64;r(0,6);01000000000000000000000;0777777777777777777777;",128,0,0,
  18               		.stabs	"long long unsigned int:t(0,7)=@s64;r(0,7);0;01777777777777777777777;",128,0,0,0
  19               		.stabs	"short int:t(0,8)=r(0,8);-32768;32767;",128,0,0,0
  20               		.stabs	"short unsigned int:t(0,9)=r(0,9);0;0177777;",128,0,0,0
  21               		.stabs	"signed char:t(0,10)=@s8;r(0,10);-128;127;",128,0,0,0
  22               		.stabs	"unsigned char:t(0,11)=@s8;r(0,11);0;255;",128,0,0,0
  23               		.stabs	"float:t(0,12)=r(0,1);4;0;",128,0,0,0
  24               		.stabs	"double:t(0,13)=r(0,1);4;0;",128,0,0,0
  25               		.stabs	"long double:t(0,14)=r(0,1);4;0;",128,0,0,0
  26               		.stabs	"short _Fract:t(0,15)=r(0,1);1;0;",128,0,0,0
  27               		.stabs	"_Fract:t(0,16)=r(0,1);2;0;",128,0,0,0
  28               		.stabs	"long _Fract:t(0,17)=r(0,1);4;0;",128,0,0,0
  29               		.stabs	"long long _Fract:t(0,18)=r(0,1);8;0;",128,0,0,0
  30               		.stabs	"unsigned short _Fract:t(0,19)=r(0,1);1;0;",128,0,0,0
  31               		.stabs	"unsigned _Fract:t(0,20)=r(0,1);2;0;",128,0,0,0
  32               		.stabs	"unsigned long _Fract:t(0,21)=r(0,1);4;0;",128,0,0,0
  33               		.stabs	"unsigned long long _Fract:t(0,22)=r(0,1);8;0;",128,0,0,0
  34               		.stabs	"_Sat short _Fract:t(0,23)=r(0,1);1;0;",128,0,0,0
  35               		.stabs	"_Sat _Fract:t(0,24)=r(0,1);2;0;",128,0,0,0
  36               		.stabs	"_Sat long _Fract:t(0,25)=r(0,1);4;0;",128,0,0,0
  37               		.stabs	"_Sat long long _Fract:t(0,26)=r(0,1);8;0;",128,0,0,0
  38               		.stabs	"_Sat unsigned short _Fract:t(0,27)=r(0,1);1;0;",128,0,0,0
  39               		.stabs	"_Sat unsigned _Fract:t(0,28)=r(0,1);2;0;",128,0,0,0
  40               		.stabs	"_Sat unsigned long _Fract:t(0,29)=r(0,1);4;0;",128,0,0,0
  41               		.stabs	"_Sat unsigned long long _Fract:t(0,30)=r(0,1);8;0;",128,0,0,0
  42               		.stabs	"short _Accum:t(0,31)=r(0,1);2;0;",128,0,0,0
  43               		.stabs	"_Accum:t(0,32)=r(0,1);4;0;",128,0,0,0
  44               		.stabs	"long _Accum:t(0,33)=r(0,1);8;0;",128,0,0,0
  45               		.stabs	"long long _Accum:t(0,34)=r(0,1);8;0;",128,0,0,0
  46               		.stabs	"unsigned short _Accum:t(0,35)=r(0,1);2;0;",128,0,0,0
  47               		.stabs	"unsigned _Accum:t(0,36)=r(0,1);4;0;",128,0,0,0
  48               		.stabs	"unsigned long _Accum:t(0,37)=r(0,1);8;0;",128,0,0,0
  49               		.stabs	"unsigned long long _Accum:t(0,38)=r(0,1);8;0;",128,0,0,0
  50               		.stabs	"_Sat short _Accum:t(0,39)=r(0,1);2;0;",128,0,0,0
  51               		.stabs	"_Sat _Accum:t(0,40)=r(0,1);4;0;",128,0,0,0
  52               		.stabs	"_Sat long _Accum:t(0,41)=r(0,1);8;0;",128,0,0,0
  53               		.stabs	"_Sat long long _Accum:t(0,42)=r(0,1);8;0;",128,0,0,0
  54               		.stabs	"_Sat unsigned short _Accum:t(0,43)=r(0,1);2;0;",128,0,0,0
  55               		.stabs	"_Sat unsigned _Accum:t(0,44)=r(0,1);4;0;",128,0,0,0
  56               		.stabs	"_Sat unsigned long _Accum:t(0,45)=r(0,1);8;0;",128,0,0,0
  57               		.stabs	"_Sat unsigned long long _Accum:t(0,46)=r(0,1);8;0;",128,0,0,0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 2


  58               		.stabs	"void:t(0,47)=(0,47)",128,0,0,0
  59               		.stabs	"projInfo.h",130,0,0,0
  60               		.stabs	"/opt/local/avr/include/inttypes.h",130,0,0,0
  61               		.stabs	"/opt/local/lib/gcc/avr/4.8.2/include/stdint.h",130,0,0,0
  62               		.stabs	"/opt/local/avr/include/stdint.h",130,0,0,0
  63               		.stabs	"int8_t:t(4,1)=(0,10)",128,0,121,0
  64               		.stabs	"uint8_t:t(4,2)=(0,11)",128,0,122,0
  65               		.stabs	"int16_t:t(4,3)=(0,1)",128,0,123,0
  66               		.stabs	"uint16_t:t(4,4)=(0,4)",128,0,124,0
  67               		.stabs	"int32_t:t(4,5)=(0,3)",128,0,125,0
  68               		.stabs	"uint32_t:t(4,6)=(0,5)",128,0,126,0
  69               		.stabs	"int64_t:t(4,7)=(0,6)",128,0,128,0
  70               		.stabs	"uint64_t:t(4,8)=(0,7)",128,0,129,0
  71               		.stabs	"intptr_t:t(4,9)=(4,3)",128,0,142,0
  72               		.stabs	"uintptr_t:t(4,10)=(4,4)",128,0,147,0
  73               		.stabs	"int_least8_t:t(4,11)=(4,1)",128,0,159,0
  74               		.stabs	"uint_least8_t:t(4,12)=(4,2)",128,0,164,0
  75               		.stabs	"int_least16_t:t(4,13)=(4,3)",128,0,169,0
  76               		.stabs	"uint_least16_t:t(4,14)=(4,4)",128,0,174,0
  77               		.stabs	"int_least32_t:t(4,15)=(4,5)",128,0,179,0
  78               		.stabs	"uint_least32_t:t(4,16)=(4,6)",128,0,184,0
  79               		.stabs	"int_least64_t:t(4,17)=(4,7)",128,0,192,0
  80               		.stabs	"uint_least64_t:t(4,18)=(4,8)",128,0,199,0
  81               		.stabs	"int_fast8_t:t(4,19)=(4,1)",128,0,213,0
  82               		.stabs	"uint_fast8_t:t(4,20)=(4,2)",128,0,218,0
  83               		.stabs	"int_fast16_t:t(4,21)=(4,3)",128,0,223,0
  84               		.stabs	"uint_fast16_t:t(4,22)=(4,4)",128,0,228,0
  85               		.stabs	"int_fast32_t:t(4,23)=(4,5)",128,0,233,0
  86               		.stabs	"uint_fast32_t:t(4,24)=(4,6)",128,0,238,0
  87               		.stabs	"int_fast64_t:t(4,25)=(4,7)",128,0,246,0
  88               		.stabs	"uint_fast64_t:t(4,26)=(4,8)",128,0,253,0
  89               		.stabs	"intmax_t:t(4,27)=(4,7)",128,0,273,0
  90               		.stabs	"uintmax_t:t(4,28)=(4,8)",128,0,278,0
  91               		.stabn	162,0,0,0
  92               		.stabn	162,0,0,0
  93               		.stabs	"int_farptr_t:t(2,1)=(4,5)",128,0,77,0
  94               		.stabs	"uint_farptr_t:t(2,2)=(4,6)",128,0,81,0
  95               		.stabn	162,0,0,0
  96               		.stabn	162,0,0,0
  97               		.stabs	"main.h",130,0,0,0
  98               		.stabs	"/opt/local/avr/include/avr/io.h",130,0,0,0
  99               		.stabs	"/opt/local/avr/include/avr/fuse.h",130,0,0,0
 100               		.stabs	"__fuse_t:t(7,1)=(7,2)=s3low:(0,11),0,8;high:(0,11),8,8;extended:(0,11),16,8;;",128,0,244,0
 101               		.stabn	162,0,0,0
 102               		.stabn	162,0,0,0
 103               		.stabs	"/opt/local/avr/include/stdlib.h",130,0,0,0
 104               		.stabs	"/opt/local/lib/gcc/avr/4.8.2/include/stddef.h",130,0,0,0
 105               		.stabs	"size_t:t(9,1)=(0,4)",128,0,212,0
 106               		.stabs	"wchar_t:t(9,2)=(0,1)",128,0,324,0
 107               		.stabn	162,0,0,0
 108               		.stabs	"div_t:t(8,1)=(8,2)=s4quot:(0,1),0,16;rem:(0,1),16,16;;",128,0,71,0
 109               		.stabs	"ldiv_t:t(8,3)=(8,4)=s8quot:(0,3),0,32;rem:(0,3),32,32;;",128,0,77,0
 110               		.stabs	"__compar_fn_t:t(8,5)=(8,6)=*(8,7)=f(0,1)",128,0,80,0
 111               		.stabn	162,0,0,0
 112               		.stabs	"_commonCode_localized/heartbeat/1.30/heartbeat.h",130,0,0,0
 113               		.stabs	"./_commonCode_localized/hfModulation/1.00/hfModulation.h",130,0,0,0
 114               		.stabs	"hfm_t:t(11,1)=(11,2)=B(11,3)=s4desiredSum:(4,3),0,16;maxPower:(4,2),16,8;power:(4,2),24,8;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 3


 115               		.stabn	162,0,0,0
 116               		.stabs	"./_commonCode_localized/dmsTimer/1.13/dmsTimer.h",130,0,0,0
 117               		.stabs	"./_commonCode_localized/xyTracker/3.05/xyTracker.h",130,0,0,0
 118               		.stabs	"./_commonCode_localized/coordStuff/0.90/coordStuff.h",130,0,0,0
 119               		.stabs	"coord_t:t(14,1)=(4,5)",128,0,31,0
 120               		.stabs	"ucoord_t:t(14,2)=(4,6)",128,0,38,0
 121               		.stabn	162,0,0,0
 122               		.stabs	"_XYTSTRUCTRECORD:T(13,1)=s21runningSum:(14,2),0,32;incrementBase:(14,1),32,32;rise:(14,2),
 123               		.stabs	"xyt_t:t(13,2)=(13,3)=B(13,1)",128,0,171,0
 124               		.stabn	162,0,0,0
 125               		.stabs	"dms6sec_t:t(12,1)=(4,4)",128,0,111,0
 126               		.stabs	"dms4day_t:t(12,2)=(4,6)",128,0,113,0
 127               		.stabs	"dmsMax_t:t(12,3)=(4,6)",128,0,114,0
 128               		.stabn	162,0,0,0
 129               		.stabn	162,0,0,0
 130               		.stabn	162,0,0,0
 131               		.stabs	"/opt/local/avr/include/avr/pgmspace.h",130,0,0,0
 132               		.stabs	"prog_void:t(15,1)=(15,2)=(15,2)",128,0,349,0
 133               		.stabs	"prog_char:t(15,3)=(15,4)=@s8;r(15,4);0;255;",128,0,350,0
 134               		.stabs	"prog_uchar:t(15,5)=(15,6)=@s8;r(15,6);0;255;",128,0,351,0
 135               		.stabs	"prog_int8_t:t(15,7)=(15,8)=(0,10)",128,0,352,0
 136               		.stabs	"prog_uint8_t:t(15,9)=(15,10)=(0,11)",128,0,353,0
 137               		.stabs	"prog_int16_t:t(15,11)=(15,12)=(0,1)",128,0,354,0
 138               		.stabs	"prog_uint16_t:t(15,13)=(15,14)=(0,4)",128,0,355,0
 139               		.stabs	"prog_int32_t:t(15,15)=(15,16)=(0,3)",128,0,356,0
 140               		.stabs	"prog_uint32_t:t(15,17)=(15,18)=(0,5)",128,0,357,0
 141               		.stabs	"prog_int64_t:t(15,19)=(15,20)=(0,6)",128,0,359,0
 142               		.stabs	"prog_uint64_t:t(15,21)=(15,22)=(0,7)",128,0,360,0
 143               		.stabn	162,0,0,0
 144               		.stabs	"_commonCode_localized/sineTable/0.99/sineTable.h",130,0,0,0
 145               		.stabs	"theta_t:t(16,1)=(4,3)",128,0,99,0
 146               		.stabs	"sine_t:t(16,2)=(4,3)",128,0,126,0
 147               		.stabs	"mult_t:t(16,3)=(4,5)",128,0,129,0
 148               		.stabs	"axis_t:t(16,4)=(4,5)",128,0,146,0
 149               		.stabn	162,0,0,0
 150               	/* #APP */
 151               		.macro delayCycs_asmInit instanceName 
 152               		dc_asm_init_\instanceName\(): 
 153               		clz ; 
 154               		dc_asm_init_exit_\instanceName\(): 
 155               		.endm 
 156               		
 157               		.macro delayCycs instanceName 
 158               		delayCycs_\instanceName\(): 
 159               		ijmp ; 
 160               		dc_loop_\instanceName\():	
 161               		subi r16, 3		; 
 162               		brge dc_loop_\instanceName	; 
 163               		dc_loopRemainder_\instanceName\(): 
 164               		cpi r16, -3		; 
 165               		breq dc_done1_\instanceName	; 
 166               		cpi r16, -2		; 
 167               		breq dc_done_\instanceName	; 
 168               		nop				; 
 169               		dc_done1_\instanceName\():		
 170               		nop				; 
 171               		dc_done_\instanceName\():	
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 4


 172               		.endm 
 173               		
 174               	/* #NOAPP */
 175               		.stabs	"pll_enable:F(0,47)",36,0,52,pll_enable
 176               	.global	pll_enable
 177               		.type	pll_enable, @function
 178               	pll_enable:
 179               		.stabd	46,0,0
 180               		.stabs	"pll.c",132,0,0,.Ltext1
 181               	.Ltext1:
   1:pll.c         **** /* mehPL:
   2:pll.c         ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:pll.c         ****  *    I'm not too fond of long licenses at the top of the file.
   4:pll.c         ****  *    Please see the bottom.
   5:pll.c         ****  *    Enjoy!
   6:pll.c         ****  */
   7:pll.c         **** 
   8:pll.c         **** 
   9:pll.c         **** 
  10:pll.c         **** 
  11:pll.c         **** 
  12:pll.c         **** #if(defined(__AVR_AT90PWM161__))
  13:pll.c         **** //PWM161 notes:
  14:pll.c         **** // The PWM161 has a PLL Multiplication-Factor which can be adjusted
  15:pll.c         **** //  4-8x the source-clock, with every step between
  16:pll.c         **** //  This could be AWESOME for LVDS, with a multiplcation-factor of 7...?
  17:pll.c         **** // "When Vcc is below 4.5V, maximum PLL-factor is 6"
  18:pll.c         **** //  we'll see. Best stick with 8 for now, since all the math relies on it.
  19:pll.c         **** //  But look here if it doesn't seem to be syncing...
  20:pll.c         **** #warning "PLL_MULT_FACTOR defaults to 8, which is allegedly too fast for 3.3V"
  21:pll.c         **** #define PLL_MULT_FACTOR	8
  22:pll.c         **** // "PLLF3 is used for debug purpose", its value is always 0
  23:pll.c         **** // The PLLF3:0 bits are used to set the multiplication-factor
  24:pll.c         **** //  They're shifted two bits left
  25:pll.c         **** //  And 2 is added to the value written to these bits to determine the
  26:pll.c         **** //  multiplication-factor...
  27:pll.c         **** #define PLL_MULT_MASK	(0x07<<2)
  28:pll.c         **** 
  29:pll.c         **** #define pll_setMult(factor) \
  30:pll.c         **** 			writeMasked(((factor-2)<<2), PLL_MULT_MASK, PLLCSR)
  31:pll.c         **** 
  32:pll.c         **** 
  33:pll.c         **** // The pll_enable procedure isn't quite so clearly-defined...
  34:pll.c         **** //   there's no step-by-step procedure I've found so far.
  35:pll.c         **** //p271 Table 22-4 says the maximum PLL lock-in-time is 64us, so 100 should
  36:pll.c         **** //be fine.
  37:pll.c         **** 
  38:pll.c         **** #endif
  39:pll.c         **** 
  40:pll.c         **** 
  41:pll.c         **** //pll_enable does just what it says, using instructions from the ATtiny861
  42:pll.c         **** //   manual.
  43:pll.c         **** //   The PLL is used, in all cases, for the FPD-Link signals (generated by
  44:pll.c         **** //   Timer1's PWM). But, it may be prescaled back down to CPU-speeds or
  45:pll.c         **** //   even lower. Also, when PLL_SYSCLK is true, the PLL is actually used to
  46:pll.c         **** //   drive the CPU... I don't fully comprehend how this works, because the
  47:pll.c         **** //   pll_enable can't be called *before* the system boots... Anyways, It
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 5


  48:pll.c         **** //   seems to work, regardless, and calling pll_enable() in this mode
  49:pll.c         **** //   doesn't seem to cause any problems.
  50:pll.c         **** 
  51:pll.c         **** 
  52:pll.c         **** void pll_enable(void)
  53:pll.c         **** {
 182               		.stabn	68,0,53,.LM0-.LFBB1
 183               	.LM0:
 184               	.LFBB1:
 185               	/* prologue: function */
 186               	/* frame size = 0 */
 187               	/* stack size = 0 */
 188               	.L__stack_usage = 0
  54:pll.c         **** #if(defined(__AVR_AT90PWM161__))
  55:pll.c         **** 	pll_setMult(PLL_MULT_FACTOR);
 189               		.stabn	68,0,55,.LM1-.LFBB1
 190               	.LM1:
 191 0000 8091 8700 		lds r24,135
 192 0004 837E      		andi r24,lo8(-29)
 193 0006 8861      		ori r24,lo8(24)
 194 0008 8093 8700 		sts 135,r24
  56:pll.c         **** #endif
  57:pll.c         ****    //Stolen from threePinIDer109t:
  58:pll.c         **** 
  59:pll.c         ****    //Set Timer1 to use the "asynchronous clock source" (PLL at 64MHz)
  60:pll.c         ****    // With phase-correct PWM (256 steps up, then back down) and CLKDIV1
  61:pll.c         ****    // this is 64MHz/512=125kHz
  62:pll.c         ****    // The benefit of such high PWM frequency is the low RC values necessary
  63:pll.c         ****    //  for filtering to DC.
  64:pll.c         **** 	// From the ATtiny861 manual:
  65:pll.c         **** 	// "To change Timer/Counter1 to the async mode follow this procedure"
  66:pll.c         ****    // 1: Enable the PLL
  67:pll.c         ****    setbit(PLLE, PLLCSR);
 195               		.stabn	68,0,67,.LM2-.LFBB1
 196               	.LM2:
 197 000c 8091 8700 		lds r24,135
 198 0010 8260      		ori r24,lo8(2)
 199 0012 8093 8700 		sts 135,r24
 200               	.LBB114:
 201               	.LBB115:
 202               		.stabs	"/opt/local/avr/include/util/delay.h",132,0,0,.Ltext2
 203               	.Ltext2:
   1:/opt/local/avr/include/util/delay.h **** /* Copyright (c) 2002, Marek Michalkiewicz
   2:/opt/local/avr/include/util/delay.h ****    Copyright (c) 2004,2005,2007 Joerg Wunsch
   3:/opt/local/avr/include/util/delay.h ****    Copyright (c) 2007  Florin-Viorel Petrov
   4:/opt/local/avr/include/util/delay.h ****    All rights reserved.
   5:/opt/local/avr/include/util/delay.h **** 
   6:/opt/local/avr/include/util/delay.h ****    Redistribution and use in source and binary forms, with or without
   7:/opt/local/avr/include/util/delay.h ****    modification, are permitted provided that the following conditions are met:
   8:/opt/local/avr/include/util/delay.h **** 
   9:/opt/local/avr/include/util/delay.h ****    * Redistributions of source code must retain the above copyright
  10:/opt/local/avr/include/util/delay.h ****      notice, this list of conditions and the following disclaimer.
  11:/opt/local/avr/include/util/delay.h **** 
  12:/opt/local/avr/include/util/delay.h ****    * Redistributions in binary form must reproduce the above copyright
  13:/opt/local/avr/include/util/delay.h ****      notice, this list of conditions and the following disclaimer in
  14:/opt/local/avr/include/util/delay.h ****      the documentation and/or other materials provided with the
  15:/opt/local/avr/include/util/delay.h ****      distribution.
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 6


  16:/opt/local/avr/include/util/delay.h **** 
  17:/opt/local/avr/include/util/delay.h ****    * Neither the name of the copyright holders nor the names of
  18:/opt/local/avr/include/util/delay.h ****      contributors may be used to endorse or promote products derived
  19:/opt/local/avr/include/util/delay.h ****      from this software without specific prior written permission.
  20:/opt/local/avr/include/util/delay.h **** 
  21:/opt/local/avr/include/util/delay.h ****   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  22:/opt/local/avr/include/util/delay.h ****   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  23:/opt/local/avr/include/util/delay.h ****   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  24:/opt/local/avr/include/util/delay.h ****   ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
  25:/opt/local/avr/include/util/delay.h ****   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  26:/opt/local/avr/include/util/delay.h ****   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  27:/opt/local/avr/include/util/delay.h ****   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  28:/opt/local/avr/include/util/delay.h ****   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  29:/opt/local/avr/include/util/delay.h ****   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  30:/opt/local/avr/include/util/delay.h ****   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  31:/opt/local/avr/include/util/delay.h ****   POSSIBILITY OF SUCH DAMAGE. */
  32:/opt/local/avr/include/util/delay.h **** 
  33:/opt/local/avr/include/util/delay.h **** /* $Id: delay.h.in 2385 2013-05-03 13:14:20Z joerg_wunsch $ */
  34:/opt/local/avr/include/util/delay.h **** 
  35:/opt/local/avr/include/util/delay.h **** #ifndef _UTIL_DELAY_H_
  36:/opt/local/avr/include/util/delay.h **** #define _UTIL_DELAY_H_ 1
  37:/opt/local/avr/include/util/delay.h **** 
  38:/opt/local/avr/include/util/delay.h **** #ifndef __HAS_DELAY_CYCLES
  39:/opt/local/avr/include/util/delay.h **** #define __HAS_DELAY_CYCLES 1
  40:/opt/local/avr/include/util/delay.h **** #endif
  41:/opt/local/avr/include/util/delay.h **** 
  42:/opt/local/avr/include/util/delay.h **** #include <inttypes.h>
  43:/opt/local/avr/include/util/delay.h **** #include <util/delay_basic.h>
  44:/opt/local/avr/include/util/delay.h **** #include <math.h>
  45:/opt/local/avr/include/util/delay.h **** 
  46:/opt/local/avr/include/util/delay.h **** /** \file */
  47:/opt/local/avr/include/util/delay.h **** /** \defgroup util_delay <util/delay.h>: Convenience functions for busy-wait delay loops
  48:/opt/local/avr/include/util/delay.h ****     \code
  49:/opt/local/avr/include/util/delay.h ****     #define F_CPU 1000000UL  // 1 MHz
  50:/opt/local/avr/include/util/delay.h ****     //#define F_CPU 14.7456E6
  51:/opt/local/avr/include/util/delay.h ****     #include <util/delay.h>
  52:/opt/local/avr/include/util/delay.h ****     \endcode
  53:/opt/local/avr/include/util/delay.h **** 
  54:/opt/local/avr/include/util/delay.h ****     \note As an alternative method, it is possible to pass the
  55:/opt/local/avr/include/util/delay.h ****     F_CPU macro down to the compiler from the Makefile.
  56:/opt/local/avr/include/util/delay.h ****     Obviously, in that case, no \c \#define statement should be
  57:/opt/local/avr/include/util/delay.h ****     used.
  58:/opt/local/avr/include/util/delay.h **** 
  59:/opt/local/avr/include/util/delay.h ****     The functions in this header file are wrappers around the basic
  60:/opt/local/avr/include/util/delay.h ****     busy-wait functions from <util/delay_basic.h>.  They are meant as
  61:/opt/local/avr/include/util/delay.h ****     convenience functions where actual time values can be specified
  62:/opt/local/avr/include/util/delay.h ****     rather than a number of cycles to wait for.  The idea behind is
  63:/opt/local/avr/include/util/delay.h ****     that compile-time constant expressions will be eliminated by
  64:/opt/local/avr/include/util/delay.h ****     compiler optimization so floating-point expressions can be used
  65:/opt/local/avr/include/util/delay.h ****     to calculate the number of delay cycles needed based on the CPU
  66:/opt/local/avr/include/util/delay.h ****     frequency passed by the macro F_CPU.
  67:/opt/local/avr/include/util/delay.h **** 
  68:/opt/local/avr/include/util/delay.h ****     \note In order for these functions to work as intended, compiler
  69:/opt/local/avr/include/util/delay.h ****     optimizations <em>must</em> be enabled, and the delay time
  70:/opt/local/avr/include/util/delay.h ****     <em>must</em> be an expression that is a known constant at
  71:/opt/local/avr/include/util/delay.h ****     compile-time.  If these requirements are not met, the resulting
  72:/opt/local/avr/include/util/delay.h ****     delay will be much longer (and basically unpredictable), and
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 7


  73:/opt/local/avr/include/util/delay.h ****     applications that otherwise do not use floating-point calculations
  74:/opt/local/avr/include/util/delay.h ****     will experience severe code bloat by the floating-point library
  75:/opt/local/avr/include/util/delay.h ****     routines linked into the application.
  76:/opt/local/avr/include/util/delay.h **** 
  77:/opt/local/avr/include/util/delay.h ****     The functions available allow the specification of microsecond, and
  78:/opt/local/avr/include/util/delay.h ****     millisecond delays directly, using the application-supplied macro
  79:/opt/local/avr/include/util/delay.h ****     F_CPU as the CPU clock frequency (in Hertz).
  80:/opt/local/avr/include/util/delay.h **** 
  81:/opt/local/avr/include/util/delay.h **** */
  82:/opt/local/avr/include/util/delay.h **** 
  83:/opt/local/avr/include/util/delay.h **** #if !defined(__DOXYGEN__)
  84:/opt/local/avr/include/util/delay.h **** static inline void _delay_us(double __us) __attribute__((always_inline));
  85:/opt/local/avr/include/util/delay.h **** static inline void _delay_ms(double __ms) __attribute__((always_inline));
  86:/opt/local/avr/include/util/delay.h **** #endif
  87:/opt/local/avr/include/util/delay.h **** 
  88:/opt/local/avr/include/util/delay.h **** #ifndef F_CPU
  89:/opt/local/avr/include/util/delay.h **** /* prevent compiler error by supplying a default */
  90:/opt/local/avr/include/util/delay.h **** # warning "F_CPU not defined for <util/delay.h>"
  91:/opt/local/avr/include/util/delay.h **** # define F_CPU 1000000UL
  92:/opt/local/avr/include/util/delay.h **** #endif
  93:/opt/local/avr/include/util/delay.h **** 
  94:/opt/local/avr/include/util/delay.h **** #ifndef __OPTIMIZE__
  95:/opt/local/avr/include/util/delay.h **** # warning "Compiler optimizations disabled; functions from <util/delay.h> won't work as designed"
  96:/opt/local/avr/include/util/delay.h **** #endif
  97:/opt/local/avr/include/util/delay.h **** 
  98:/opt/local/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
  99:/opt/local/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 100:/opt/local/avr/include/util/delay.h ****   __STDC_HOSTED__
 101:/opt/local/avr/include/util/delay.h **** #  include <math.h>
 102:/opt/local/avr/include/util/delay.h **** #endif
 103:/opt/local/avr/include/util/delay.h **** 
 104:/opt/local/avr/include/util/delay.h **** /**
 105:/opt/local/avr/include/util/delay.h ****    \ingroup util_delay
 106:/opt/local/avr/include/util/delay.h **** 
 107:/opt/local/avr/include/util/delay.h ****    Perform a delay of \c __ms milliseconds, using _delay_loop_2().
 108:/opt/local/avr/include/util/delay.h **** 
 109:/opt/local/avr/include/util/delay.h ****    The macro F_CPU is supposed to be defined to a
 110:/opt/local/avr/include/util/delay.h ****    constant defining the CPU clock frequency (in Hertz).
 111:/opt/local/avr/include/util/delay.h **** 
 112:/opt/local/avr/include/util/delay.h ****    The maximal possible delay is 262.14 ms / F_CPU in MHz.
 113:/opt/local/avr/include/util/delay.h **** 
 114:/opt/local/avr/include/util/delay.h ****    When the user request delay which exceed the maximum possible one,
 115:/opt/local/avr/include/util/delay.h ****    _delay_ms() provides a decreased resolution functionality. In this
 116:/opt/local/avr/include/util/delay.h ****    mode _delay_ms() will work with a resolution of 1/10 ms, providing
 117:/opt/local/avr/include/util/delay.h ****    delays up to 6.5535 seconds (independent from CPU frequency).  The
 118:/opt/local/avr/include/util/delay.h ****    user will not be informed about decreased resolution.
 119:/opt/local/avr/include/util/delay.h **** 
 120:/opt/local/avr/include/util/delay.h ****    If the avr-gcc toolchain has __builtin_avr_delay_cycles(unsigned long)
 121:/opt/local/avr/include/util/delay.h ****    support, maximal possible delay is 4294967.295 ms/ F_CPU in MHz. For
 122:/opt/local/avr/include/util/delay.h ****    values greater than the maximal possible delay, overflows results in
 123:/opt/local/avr/include/util/delay.h ****    no delay i.e., 0ms.
 124:/opt/local/avr/include/util/delay.h **** 
 125:/opt/local/avr/include/util/delay.h ****    Conversion of __us into clock cycles may not always result in integer.
 126:/opt/local/avr/include/util/delay.h ****    By default, the clock cycles rounded up to next integer. This ensures that
 127:/opt/local/avr/include/util/delay.h ****    the user gets atleast __us microseconds of delay.
 128:/opt/local/avr/include/util/delay.h **** 
 129:/opt/local/avr/include/util/delay.h ****    Alternatively, user can define __DELAY_ROUND_DOWN__ and __DELAY_ROUND_CLOSEST__
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 8


 130:/opt/local/avr/include/util/delay.h ****    to round down and round to closest integer.
 131:/opt/local/avr/include/util/delay.h **** 
 132:/opt/local/avr/include/util/delay.h ****    Note: The new implementation of _delay_ms(double __ms) with 
 133:/opt/local/avr/include/util/delay.h ****     __builtin_avr_delay_cycles(unsigned long) support is not backward compatible. 
 134:/opt/local/avr/include/util/delay.h ****    User can define __DELAY_BACKWARD_COMPATIBLE__ to get a backward compatible delay.
 135:/opt/local/avr/include/util/delay.h ****    Also, the backward compatible
 136:/opt/local/avr/include/util/delay.h ****    algorithm will be chosen if the code is compiled in a <em>freestanding
 137:/opt/local/avr/include/util/delay.h ****    environment</em> (GCC option \c -ffreestanding), as the math functions
 138:/opt/local/avr/include/util/delay.h ****    required for rounding are not available to the compiler then.
 139:/opt/local/avr/include/util/delay.h **** 
 140:/opt/local/avr/include/util/delay.h ****  */
 141:/opt/local/avr/include/util/delay.h **** void
 142:/opt/local/avr/include/util/delay.h **** _delay_ms(double __ms)
 143:/opt/local/avr/include/util/delay.h **** {
 144:/opt/local/avr/include/util/delay.h **** 	double __tmp ; 
 145:/opt/local/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 146:/opt/local/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 147:/opt/local/avr/include/util/delay.h ****   __STDC_HOSTED__
 148:/opt/local/avr/include/util/delay.h **** 	uint32_t __ticks_dc;
 149:/opt/local/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 150:/opt/local/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e3) * __ms;
 151:/opt/local/avr/include/util/delay.h **** 
 152:/opt/local/avr/include/util/delay.h **** 	#if defined(__DELAY_ROUND_DOWN__)
 153:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)fabs(__tmp);
 154:/opt/local/avr/include/util/delay.h **** 
 155:/opt/local/avr/include/util/delay.h **** 	#elif defined(__DELAY_ROUND_CLOSEST__)
 156:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(fabs(__tmp)+0.5);
 157:/opt/local/avr/include/util/delay.h **** 
 158:/opt/local/avr/include/util/delay.h **** 	#else
 159:/opt/local/avr/include/util/delay.h **** 		//round up by default
 160:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(ceil(fabs(__tmp)));
 161:/opt/local/avr/include/util/delay.h **** 	#endif
 162:/opt/local/avr/include/util/delay.h **** 
 163:/opt/local/avr/include/util/delay.h **** 	__builtin_avr_delay_cycles(__ticks_dc);
 164:/opt/local/avr/include/util/delay.h **** 
 165:/opt/local/avr/include/util/delay.h **** #else
 166:/opt/local/avr/include/util/delay.h **** 	uint16_t __ticks;
 167:/opt/local/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 4e3) * __ms;
 168:/opt/local/avr/include/util/delay.h **** 	if (__tmp < 1.0)
 169:/opt/local/avr/include/util/delay.h **** 		__ticks = 1;
 170:/opt/local/avr/include/util/delay.h **** 	else if (__tmp > 65535)
 171:/opt/local/avr/include/util/delay.h **** 	{
 172:/opt/local/avr/include/util/delay.h **** 		//	__ticks = requested delay in 1/10 ms
 173:/opt/local/avr/include/util/delay.h **** 		__ticks = (uint16_t) (__ms * 10.0);
 174:/opt/local/avr/include/util/delay.h **** 		while(__ticks)
 175:/opt/local/avr/include/util/delay.h **** 		{
 176:/opt/local/avr/include/util/delay.h **** 			// wait 1/10 ms
 177:/opt/local/avr/include/util/delay.h **** 			_delay_loop_2(((F_CPU) / 4e3) / 10);
 178:/opt/local/avr/include/util/delay.h **** 			__ticks --;
 179:/opt/local/avr/include/util/delay.h **** 		}
 180:/opt/local/avr/include/util/delay.h **** 		return;
 181:/opt/local/avr/include/util/delay.h **** 	}
 182:/opt/local/avr/include/util/delay.h **** 	else
 183:/opt/local/avr/include/util/delay.h **** 		__ticks = (uint16_t)__tmp;
 184:/opt/local/avr/include/util/delay.h **** 	_delay_loop_2(__ticks);
 185:/opt/local/avr/include/util/delay.h **** #endif
 186:/opt/local/avr/include/util/delay.h **** }
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 9


 187:/opt/local/avr/include/util/delay.h **** 
 188:/opt/local/avr/include/util/delay.h **** /**
 189:/opt/local/avr/include/util/delay.h ****    \ingroup util_delay
 190:/opt/local/avr/include/util/delay.h **** 
 191:/opt/local/avr/include/util/delay.h ****    Perform a delay of \c __us microseconds, using _delay_loop_1().
 192:/opt/local/avr/include/util/delay.h **** 
 193:/opt/local/avr/include/util/delay.h ****    The macro F_CPU is supposed to be defined to a
 194:/opt/local/avr/include/util/delay.h ****    constant defining the CPU clock frequency (in Hertz).
 195:/opt/local/avr/include/util/delay.h **** 
 196:/opt/local/avr/include/util/delay.h ****    The maximal possible delay is 768 us / F_CPU in MHz.
 197:/opt/local/avr/include/util/delay.h **** 
 198:/opt/local/avr/include/util/delay.h ****    If the user requests a delay greater than the maximal possible one,
 199:/opt/local/avr/include/util/delay.h ****    _delay_us() will automatically call _delay_ms() instead.  The user
 200:/opt/local/avr/include/util/delay.h ****    will not be informed about this case.
 201:/opt/local/avr/include/util/delay.h **** 
 202:/opt/local/avr/include/util/delay.h ****    If the avr-gcc toolchain has __builtin_avr_delay_cycles(unsigned long)
 203:/opt/local/avr/include/util/delay.h ****    support, maximal possible delay is 4294967.295 us/ F_CPU in MHz. For
 204:/opt/local/avr/include/util/delay.h ****    values greater than the maximal possible delay, overflow results in
 205:/opt/local/avr/include/util/delay.h ****    no delay i.e., 0us.
 206:/opt/local/avr/include/util/delay.h ****   
 207:/opt/local/avr/include/util/delay.h ****    Conversion of __us into clock cycles may not always result in integer.
 208:/opt/local/avr/include/util/delay.h ****    By default, the clock cycles rounded up to next integer. This ensures that
 209:/opt/local/avr/include/util/delay.h ****    the user gets atleast __us microseconds of delay.
 210:/opt/local/avr/include/util/delay.h **** 
 211:/opt/local/avr/include/util/delay.h ****    Alternatively, user can define __DELAY_ROUND_DOWN__ and __DELAY_ROUND_CLOSEST__
 212:/opt/local/avr/include/util/delay.h ****    to round down and round to closest integer.
 213:/opt/local/avr/include/util/delay.h ****  
 214:/opt/local/avr/include/util/delay.h ****    Note: The new implementation of _delay_us(double __us) with 
 215:/opt/local/avr/include/util/delay.h ****     __builtin_avr_delay_cycles(unsigned long) support is not backward compatible.
 216:/opt/local/avr/include/util/delay.h ****    User can define __DELAY_BACKWARD_COMPATIBLE__ to get a backward compatible delay.
 217:/opt/local/avr/include/util/delay.h ****    Also, the backward compatible
 218:/opt/local/avr/include/util/delay.h ****    algorithm will be chosen if the code is compiled in a <em>freestanding
 219:/opt/local/avr/include/util/delay.h ****    environment</em> (GCC option \c -ffreestanding), as the math functions
 220:/opt/local/avr/include/util/delay.h ****    required for rounding are not available to the compiler then.
 221:/opt/local/avr/include/util/delay.h **** 
 222:/opt/local/avr/include/util/delay.h ****  */
 223:/opt/local/avr/include/util/delay.h **** void
 224:/opt/local/avr/include/util/delay.h **** _delay_us(double __us)
 225:/opt/local/avr/include/util/delay.h **** {
 226:/opt/local/avr/include/util/delay.h **** 	double __tmp ; 
 227:/opt/local/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 228:/opt/local/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 229:/opt/local/avr/include/util/delay.h ****   __STDC_HOSTED__
 230:/opt/local/avr/include/util/delay.h **** 	uint32_t __ticks_dc;
 231:/opt/local/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 232:/opt/local/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 233:/opt/local/avr/include/util/delay.h **** 
 234:/opt/local/avr/include/util/delay.h **** 	#if defined(__DELAY_ROUND_DOWN__)
 235:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)fabs(__tmp);
 236:/opt/local/avr/include/util/delay.h **** 
 237:/opt/local/avr/include/util/delay.h **** 	#elif defined(__DELAY_ROUND_CLOSEST__)
 238:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(fabs(__tmp)+0.5);
 239:/opt/local/avr/include/util/delay.h **** 
 240:/opt/local/avr/include/util/delay.h **** 	#else
 241:/opt/local/avr/include/util/delay.h **** 		//round up by default
 242:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(ceil(fabs(__tmp)));
 243:/opt/local/avr/include/util/delay.h **** 	#endif
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 10


 244:/opt/local/avr/include/util/delay.h **** 
 245:/opt/local/avr/include/util/delay.h **** 	__builtin_avr_delay_cycles(__ticks_dc);
 204               		.stabn	68,0,245,.LM3-.LFBB1
 205               	.LM3:
 206 0016 8FE8      		ldi r24,lo8(399)
 207 0018 91E0      		ldi r25,hi8(399)
 208 001a 0197      		1: sbiw r24,1
 209 001c 01F4      		brne 1b
 210 001e 00C0      		rjmp .
 211 0020 0000      		nop
 212               	.L2:
 213               	.LBE115:
 214               	.LBE114:
 215               		.stabs	"pll.c",132,0,0,.Ltext3
 216               	.Ltext3:
  68:pll.c         ****    // 2: Wait 100us for the PLL to stabilize
  69:pll.c         ****    // (can't use dmsWait since the timer updating the dmsCount hasn't yet been started!)
  70:pll.c         ****    _delay_us(100);
  71:pll.c         **** //   dmsWait(1);
  72:pll.c         ****    // 3: Poll PLOCK until it is set...
  73:pll.c         ****    while(!getbit(PLOCK, PLLCSR))
 217               		.stabn	68,0,73,.LM4-.LFBB1
 218               	.LM4:
 219 0022 8091 8700 		lds r24,135
 220 0026 80FD      		sbrc r24,0
 221 0028 00C0      		rjmp .L5
  74:pll.c         ****    {
  75:pll.c         ****       asm("nop");
 222               		.stabn	68,0,75,.LM5-.LFBB1
 223               	.LM5:
 224               	/* #APP */
 225               	 ;  75 "pll.c" 1
 226 002a 0000      		nop
 227               	 ;  0 "" 2
 228               	/* #NOAPP */
 229 002c 00C0      		rjmp .L2
 230               	.L5:
 231               	/* epilogue start */
  76:pll.c         ****    }
  77:pll.c         **** 
  78:pll.c         **** //The PWM161 doesn't have a PCKE bit.
  79:pll.c         **** #if(!defined(__AVR_AT90PWM161__))
  80:pll.c         ****    // 4: Set the PCKE bit to enable async mode
  81:pll.c         ****    setbit(PCKE, PLLCSR);
  82:pll.c         **** #endif
  83:pll.c         **** 
  84:pll.c         **** }
 232               		.stabn	68,0,84,.LM6-.LFBB1
 233               	.LM6:
 234 002e 0895      		ret
 235               		.size	pll_enable, .-pll_enable
 236               	.Lscope1:
 237               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 238               		.stabd	78,0,0
 239               		.stabs	"lvds_timerInit:F(0,47)",36,0,568,lvds_timerInit
 240               	.global	lvds_timerInit
 241               		.type	lvds_timerInit, @function
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 11


 242               	lvds_timerInit:
 243               		.stabd	46,0,0
 244               		.stabs	"lvds161.c",132,0,0,.Ltext4
 245               	.Ltext4:
   1:lvds161.c     **** /* mehPL:
   2:lvds161.c     ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:lvds161.c     ****  *    I'm not too fond of long licenses at the top of the file.
   4:lvds161.c     ****  *    Please see the bottom.
   5:lvds161.c     ****  *    Enjoy!
   6:lvds161.c     ****  */
   7:lvds161.c     **** 
   8:lvds161.c     **** 
   9:lvds161.c     **** 
  10:lvds161.c     **** 
  11:lvds161.c     **** 
  12:lvds161.c     **** 
  13:lvds161.c     **** //TODO: Make note: RXclk is inverted, RXclk-/+ need to be swapped
  14:lvds161.c     **** //
  15:lvds161.c     **** 
  16:lvds161.c     **** // Other chips worth looking into:
  17:lvds161.c     **** // Also with 16kb FLASH, 1kb SRAM, surface-mount (SOIC)
  18:lvds161.c     **** // AT90PWM216-16SU/SN
  19:lvds161.c     **** // AT90PWM316-16SU/SN
  20:lvds161.c     **** 
  21:lvds161.c     **** //delayCyc is used to try to synchronize the PSC2 with the PSCR...
  22:lvds161.c     **** #include _DELAYCYC_HEADER_
  23:lvds161.c     **** 
  24:lvds161.c     **** // This file is derived/modified from lvds.c (which was for the Tiny861)
  25:lvds161.c     **** // See lvds.c for more thorough explanations.
  26:lvds161.c     **** 
  27:lvds161.c     **** // Tiny861 LVDS/FPD-Link timing:
  28:lvds161.c     **** 
  29:lvds161.c     **** //            |<--- (LCDdirectLVDS: "pixel") --->|
  30:lvds161.c     **** //  Timer1:   |<-- One Timer1 Cycle (OCR1C=6) -->|
  31:lvds161.c     **** //  TCNT:     |  0   1    2    3    4    5    6  |  0   1    2    3    
  32:lvds161.c     **** //            |____.____.____.____               |____.____.____.____
  33:lvds161.c     **** //  RXclk+:   /         |         \    .    .    /         |         \ //
  34:lvds161.c     **** //            |         |          ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|         |
  35:lvds161.c     **** // One Pixel: |         |<--- One FPD-Link Pixel Cycle --->|
  36:lvds161.c     **** //            |                                  |
  37:lvds161.c     **** // "Blue/DVH" |____ ____v____ ____ ____v____ ____|____ ____
  38:lvds161.c     **** //  RXin2:    X B3 X B2 X DE X /V X /H X B5 X B4 X B3 X B2 X ...
  39:lvds161.c     **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯
  40:lvds161.c     **** //            |         |<--Not Blue-->|         |
  41:lvds161.c     **** //            |                                  |
  42:lvds161.c     **** // "Green"    |____ ____v____ ____v____ ____ ____|____ ____
  43:lvds161.c     **** //  RXin1:    X G2 X G1 X B1 X B0 X G5 X G4 X G3 X G2 X G1 X ...
  44:lvds161.c     **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯ 
  45:lvds161.c     **** //            |         |<------->|-Not Green    |
  46:lvds161.c     **** //
  47:lvds161.c     **** // "Red"      |____ ____v____v____ ____ ____ ____|____ ____
  48:lvds161.c     **** //  RXin0:    X R1 X R0 X G0 X R5 X R4 X R3 X R2 X R1 X R0 X ...
  49:lvds161.c     **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯
  50:lvds161.c     **** //            |         |<-->|-Not Red
  51:lvds161.c     **** //
  52:lvds161.c     **** //   Of course: The Not Green/Red bits above are low-bits and
  53:lvds161.c     **** //              basically have little/no visible effect
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 12


  54:lvds161.c     **** //
  55:lvds161.c     **** //
  56:lvds161.c     **** //#error "Is this right?! Will this work with +V and +H separable?!"
  57:lvds161.c     **** // see notes in lvds.c
  58:lvds161.c     **** 
  59:lvds161.c     **** // According to PWM_TESTING, any arbitrary pulse can be generated,
  60:lvds161.c     **** // regardless of whether it wraps past the OCR2RB...
  61:lvds161.c     **** // So for blue we have:
  62:lvds161.c     **** //               bit: 0123456    5601234
  63:lvds161.c     **** //                    32dvh54 -> 5432dvh				OCR2SA	OCR2RA	Wraps?
  64:lvds161.c     **** 
  65:lvds161.c     **** // B5, B4, B3, B2 =   ¯¯¯¯¯¯¯ -> ¯¯¯¯¯¯¯		60		0			8			N
  66:lvds161.c     **** 
  67:lvds161.c     **** // B5, B4, B3     =   ¯_¯¯¯¯¯    ¯¯¯_¯¯¯		56		1        0			Y
  68:lvds161.c     **** 
  69:lvds161.c     **** // B5, B4         =   __¯¯¯¯¯    ¯¯__¯¯¯		48    1        6			N
  70:lvds161.c     **** 
  71:lvds161.c     **** // B5             =   __¯¯¯¯_    ¯___¯¯¯		32    1        5			N
  72:lvds161.c     **** 
  73:lvds161.c     **** // BLACK          =   __¯¯¯__    ____¯¯¯		0     1        4			N
  74:lvds161.c     **** 
  75:lvds161.c     **** 
  76:lvds161.c     **** // B5, B4      B2 =   _¯¯¯¯¯¯    ¯¯_¯¯¯¯		52    0        6			N
  77:lvds161.c     **** 
  78:lvds161.c     **** // B5,         B2 =   _¯¯¯¯¯_    ¯__¯¯¯¯		36    0        5			N
  79:lvds161.c     **** 
  80:lvds161.c     **** //             B2 =   _¯¯¯¯__    ___¯¯¯¯		4     0        4			N
  81:lvds161.c     **** 
  82:lvds161.c     **** 
  83:lvds161.c     **** // B5,     B3, B2 =   ¯¯¯¯¯¯_    ¯_¯¯¯¯¯		44    6        5			Y
  84:lvds161.c     **** 
  85:lvds161.c     **** //         B3, B2 =   ¯¯¯¯¯__    __¯¯¯¯¯		12    6        4			Y
  86:lvds161.c     **** 
  87:lvds161.c     **** 
  88:lvds161.c     **** //     B4, B3, B2 =   ¯¯¯¯¯_¯    _¯¯¯¯¯¯		28    5        4			Y
  89:lvds161.c     **** 
  90:lvds161.c     **** // That's actually pretty decent coverage
  91:lvds161.c     **** // 
  92:lvds161.c     **** // Using BLUE_ALLSHADES with ALLSHADES_GRADIENT
  93:lvds161.c     **** // It seems there's some difficulty with switching between values which
  94:lvds161.c     **** // wrap-around (reset before set, in a cycle) and those that don't...
  95:lvds161.c     **** // So for now our colors are limited to those that don't require wrapping.
  96:lvds161.c     **** // 60, 48, 32, 0, 52, 36, 4
  97:lvds161.c     **** // And a bit of looking-into gives a bit of insight...
  98:lvds161.c     **** //      S R  bit: 32dvh54  5432dvh
  99:lvds161.c     **** // 60 = 0,8	      ¯¯¯¯¯¯¯  ¯¯¯¯¯¯¯  8 is necessary, 7-> all low.
 100:lvds161.c     **** // 52 = 0,6       _¯¯¯¯¯¯  ¯¯_¯¯¯¯
 101:lvds161.c     **** // 36 = 0,5       _¯¯¯¯¯_  ¯__¯¯¯¯
 102:lvds161.c     **** // 4  = 0,4       _¯¯¯¯__  ___¯¯¯¯
 103:lvds161.c     **** //
 104:lvds161.c     **** // So we can get away with only needing to change one register..
 105:lvds161.c     **** // (DE_only might be best set to 0,4...)
 106:lvds161.c     **** // This should probably be done in assembly, so each branch is the same
 107:lvds161.c     **** // number of cycles (see writeColor())
 108:lvds161.c     **** // So this should be used somewhat sparingly.
 109:lvds161.c     **** #define SETBLUE_ASM TRUE
 110:lvds161.c     **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 13


 111:lvds161.c     **** #if(!defined(SETBLUE_ASM) || !SETBLUE_ASM)
 112:lvds161.c     **** #define setBlue4(val)	\
 113:lvds161.c     **** 	({ \
 114:lvds161.c     **** 		uint8_t ocrVal = ((val) == 3) ? 8 : (val) + 4 ; \
 115:lvds161.c     **** 		lockPSC2(); \
 116:lvds161.c     **** 		OCR2RAL = ocrVal; \
 117:lvds161.c     **** 		unlockPSC2(); \
 118:lvds161.c     **** 	})
 119:lvds161.c     **** 
 120:lvds161.c     **** #else
 121:lvds161.c     **** 
 122:lvds161.c     **** //Doing the "if" statement in assembly assures that it takes the same
 123:lvds161.c     **** //number of clock-cycles regardless of the branch taken
 124:lvds161.c     **** // ("0" in the input-operands tells the assembler to use the same register
 125:lvds161.c     **** //  for input as well as output, otherwise just having blueOCR_Val in the
 126:lvds161.c     **** //  output-operand causes it to assume that its initial value doesn't
 127:lvds161.c     **** //  matter. Annoying.
 128:lvds161.c     **** #define setBlue4(val)	\
 129:lvds161.c     **** 	({ \
 130:lvds161.c     **** 		uint8_t blueOCR_Val; \
 131:lvds161.c     **** 		blueOCR_Val = (val) + 4; \
 132:lvds161.c     **** 		uint8_t sbblueVal; \
 133:lvds161.c     **** 		sbblueVal = (val); \
 134:lvds161.c     **** 		__asm__ __volatile__ \
 135:lvds161.c     **** 	   ( \
 136:lvds161.c     ****     		"cpi   %1, 3 ; \n\t" \
 137:lvds161.c     ****     		"brne  nothingToDo_%= ; \n\t" \
 138:lvds161.c     ****     		"ldi   %0, 8 ; \n\t" \
 139:lvds161.c     ****   		"nothingToDo_%=: \n\t" \
 140:lvds161.c     ****     		: "=d" (blueOCR_Val) \
 141:lvds161.c     ****     		: "d" (sbblueVal), \
 142:lvds161.c     **** 			  "0" (blueOCR_Val) \
 143:lvds161.c     ****    	); \
 144:lvds161.c     **** 		lockPSC2(); \
 145:lvds161.c     **** 		OCR2RAL = blueOCR_Val; \
 146:lvds161.c     **** 		unlockPSC2(); \
 147:lvds161.c     **** 	})
 148:lvds161.c     **** 
 149:lvds161.c     **** #endif
 150:lvds161.c     **** 
 151:lvds161.c     **** // Green:
 152:lvds161.c     **** // Still assuming green is the time-keeper (OCR0RB=6, never changes)
 153:lvds161.c     **** //      S R  bit: 21Bb543  54321Bb
 154:lvds161.c     **** // 56 = 3 6       ____¯¯¯  ¯¯¯____  (S=2,1 only affects blue, S=0->58)
 155:lvds161.c     **** // 24 = 4 6       _____¯¯
 156:lvds161.c     **** // 16 = 5 6       ______¯
 157:lvds161.c     **** //
 158:lvds161.c     **** // Yeah, no. 
 159:lvds161.c     **** // Green OUTPUT INVERTED:
 160:lvds161.c     **** //                0123456
 161:lvds161.c     **** //      S R  bit: 21Bb543    21Bb543         
 162:lvds161.c     **** // 4 =  0 6       _¯¯¯¯¯¯ -> ¯______   UNUSED
 163:lvds161.c     **** // 6 =  3 6       ____¯¯¯ -> ¯¯¯¯___
 164:lvds161.c     **** // 38 = 4 6       _____¯¯ -> ¯¯¯¯¯__
 165:lvds161.c     **** // 54 = 5 6       ______¯ -> ¯¯¯¯¯¯_
 166:lvds161.c     **** // 62 = 6 6       _______ -> ¯¯¯¯¯¯¯
 167:lvds161.c     **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 14


 168:lvds161.c     **** //This is new... (not in Tiny861)
 169:lvds161.c     **** // val=0-3
 170:lvds161.c     **** #define setGreen4(val)	{ lockPSC0(); OCR0SB=(val+3); unlockPSC0(); }
 171:lvds161.c     **** 
 172:lvds161.c     **** // Red OUTPUT INVERTED:
 173:lvds161.c     **** //                0123456
 174:lvds161.c     **** //      S R  bit: 10g5432    10g5432        54321Bb
 175:lvds161.c     **** //      0 6       _¯¯¯¯¯¯ -> ¯______
 176:lvds161.c     **** //      2 6       ___¯¯¯¯ -> ¯¯¯____
 177:lvds161.c     **** //      3 6       ____¯¯¯ -> ¯¯¯¯___
 178:lvds161.c     **** //      4 6       _____¯¯ -> ¯¯¯¯¯__
 179:lvds161.c     **** //      5 6       ______¯ -> ¯¯¯¯¯¯_
 180:lvds161.c     **** //      6 6       _______ -> ¯¯¯¯¯¯¯
 181:lvds161.c     **** 
 182:lvds161.c     **** // Red OUTPUT INVERTED, green-matched:
 183:lvds161.c     **** // (set R=5, then only one bit needs changing)
 184:lvds161.c     **** //                0123456
 185:lvds161.c     **** //      S R  bit: 10g5432    10g5432
 186:lvds161.c     **** //      0 5       _¯¯¯¯¯_ -> ¯_____¯
 187:lvds161.c     **** // 7  = 2 5       ___¯¯¯_ -> ¯¯¯___¯
 188:lvds161.c     **** // 39 = 3 5       ____¯¯_ -> ¯¯¯¯__¯
 189:lvds161.c     **** // 55 = 4 5       _____¯_ -> ¯¯¯¯¯_¯
 190:lvds161.c     **** // 63 = 5 5       _______ -> ¯¯¯¯¯¯¯     (Check BLUE experiments)
 191:lvds161.c     **** 
 192:lvds161.c     **** #define setRed4(val)	{ lockPSC0(); OCR0SA=(val+2); unlockPSC0(); }
 193:lvds161.c     **** 
 194:lvds161.c     **** // a/o v67-18_ALLSHADES_AND_COLORS:
 195:lvds161.c     **** // fullGreen = OCR0SB = 0
 196:lvds161.c     **** // noGreen =   OCR0SB = 6
 197:lvds161.c     **** // Prior to inversion...
 198:lvds161.c     **** // It seems to work, so.... those values added to the table, above
 199:lvds161.c     **** // (taking into account inversion)
 200:lvds161.c     **** // Actually, duh, S=0 -> bit0 (G2) being low, so might as well carry that
 201:lvds161.c     **** // over through the other bits...
 202:lvds161.c     **** //(but then with inversion, it means those bits are ON... so...? 0 might be
 203:lvds161.c     **** //best)
 204:lvds161.c     **** // with S=3, the base-line "black" is with G=6, B=3
 205:lvds161.c     **** // which has the additional nicity that no lookup table is necessary...
 206:lvds161.c     **** //
 207:lvds161.c     **** // pwm161 in One Ramp mode:
 208:lvds161.c     **** // This image taken from the data-sheet, page 108.
 209:lvds161.c     **** // This image also matches (as I recall) the PSCR controller.
 210:lvds161.c     **** //
 211:lvds161.c     **** //                                               OCR2RB
 212:lvds161.c     **** //                                     OCR2SB       v
 213:lvds161.c     **** //     PSC     |              OCR2RA      v___---¯¯¯|
 214:lvds161.c     **** //    Counter  |OCR2SA           v___---¯¯¯         |
 215:lvds161.c     **** //             |   v     ___---¯¯¯                  |
 216:lvds161.c     **** //             |___---¯¯¯                           |___---
 217:lvds161.c     **** //              0                                    0
 218:lvds161.c     **** // PSCOUT20(A) ____|¯¯¯¯¯¯¯¯¯¯¯¯¯|_____________________
 219:lvds161.c     **** //
 220:lvds161.c     **** // PSCOUT21(B) |__________________________|¯¯¯¯¯¯¯¯¯|____
 221:lvds161.c     **** //
 222:lvds161.c     **** // (First notes, a/o v67-0)
 223:lvds161.c     **** // OUT_A and OUT_B are allowed to overlap in "one ramp" mode.
 224:lvds161.c     **** // The specs are unclear about how/where the PSC Counter resets.
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 15


 225:lvds161.c     **** // From the drawing, it seems it always occurs at OCR2RB, which makes
 226:lvds161.c     **** // things difficult, since it would require that OCR2RB always == 7 clock
 227:lvds161.c     **** // cycles.
 228:lvds161.c     **** //
 229:lvds161.c     **** // The spec sheet defines "On-Time" and "Dead-Time", but these values are 
 230:lvds161.c     **** // *calculated* from OCRxyz register-values, rather than being
 231:lvds161.c     **** // register-values, themselves.
 232:lvds161.c     **** //
 233:lvds161.c     **** // This differs dramatically from the Tiny861.
 234:lvds161.c     **** //
 235:lvds161.c     **** // Initial idea: 
 236:lvds161.c     **** //   OCR2RB will have to correspond to RXclk's transition at some edge.
 237:lvds161.c     **** //   The particular edge is unimportant (so far), since the pin could be
 238:lvds161.c     **** //   inverted.
 239:lvds161.c     **** //
 240:lvds161.c     **** //   Then, OCR2SB will always be constant.
 241:lvds161.c     **** //
 242:lvds161.c     **** //   OCR2SA/RA can be used anywhere between for e.g. DE/V/H/Blue
 243:lvds161.c     **** //
 244:lvds161.c     **** // CAVEAT:
 245:lvds161.c     **** //   OCR2SA (and OCR2SB?) must occur at least one tick after 0
 246:lvds161.c     **** //
 247:lvds161.c     **** // SO for RxCLK and Rx"Blue" we're set...
 248:lvds161.c     **** //
 249:lvds161.c     **** // BUT:
 250:lvds161.c     **** // What about the second PSC (PSCR), which needs both its outputs used for
 251:lvds161.c     **** // Rx"Green" and Rx"Red"?
 252:lvds161.c     **** //
 253:lvds161.c     **** // Ideas:
 254:lvds161.c     **** //  The polarities of all outputs are individually controllable(?)
 255:lvds161.c     **** //   (so, e.g. OCRRSB = 0, OCRRRB = 6(?) could be used for both Full-Green
 256:lvds161.c     **** //    and No-Green, while OCRRSA/RA could be independent)
 257:lvds161.c     **** //  NO. Polarity affects BOTH outputs
 258:lvds161.c     **** //  Alternatively, maybe, Output Matrix (Four Ramp?)
 259:lvds161.c     **** //  Alternatively, another, take advantage of PSC2's MUXing for out22/23?
 260:lvds161.c     **** //   (and use PSCR for Clk/Blue)
 261:lvds161.c     **** 
 262:lvds161.c     **** 
 263:lvds161.c     **** // These notes compiled from Tiny861 from lvds.c:
 264:lvds161.c     **** 
 265:lvds161.c     **** //            |<--- (LCDdirectLVDS: "pixel") --->|
 266:lvds161.c     **** //  Timer1:   |<-- One Timer1 Cycle (OCR1C=6) -->|
 267:lvds161.c     **** //  TCNT:     |  0   1    2    3    4    5    6  |
 268:lvds161.c     **** //            |____.____.____.____               |
 269:lvds161.c     **** //  RXclk+:   /                   \    .    .    /
 270:lvds161.c     **** //            |                    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|
 271:lvds161.c     **** //
 272:lvds161.c     **** // DE:          B3   B2   DE   /V   /H   B5   B4  For BLUE DATA (not D/V/H)
 273:lvds161.c     **** // "Blue/DVH" |____ ____ ____.____.____ ____ ____      C=OCR1A
 274:lvds161.c     **** //  OC1A:  D0>/ D1>/ D2>/           C4>\ C5>\ C6...    D=DT(H/L?)
 275:lvds161.c     **** //            |¯¯¯¯ ¯¯¯¯                ¯¯¯¯ ¯¯¯¯     (D must be 0 for CLK)
 276:lvds161.c     **** //
 277:lvds161.c     **** //             ____ ____      ____      ____ ____|____ 
 278:lvds161.c     **** //  H (only): X xx X xx \    /    \    / xx X xx X xx X    
 279:lvds161.c     **** //   state1    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯      ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ 
 280:lvds161.c     **** //            >______________/¯¯¯¯\______________|    DT=3, OCR=3
 281:lvds161.c     **** //
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 16


 282:lvds161.c     **** //             ____ ____           ____ ____ ____|____ 
 283:lvds161.c     **** //  V w/o H:  X xx X xx \    .    /    \ xx X xx X xx X
 284:lvds161.c     **** //   state3    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯      ¯¯¯¯ ¯¯¯¯|¯¯¯¯
 285:lvds161.c     **** //            >___________________/¯¯¯¯\_________|    DT=4, OCR=4 (+?)
 286:lvds161.c     **** 
 287:lvds161.c     **** //             ____ ____                ____ ____|____ 
 288:lvds161.c     **** //  V w/ H:   X xx X xx \    .    .    / xx X xx X xx X
 289:lvds161.c     **** //   state4    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ 
 290:lvds161.c     **** //            >__________________________________|    DT=X, OCR=0
 291:lvds161.c     **** 
 292:lvds161.c     **** //             ____ ____      ____ ____ ____ ____|____ 
 293:lvds161.c     **** //  Nada:     X xx X xx \    /    .    \ xx X xx X xx X    
 294:lvds161.c     **** //   state0    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯           ¯¯¯¯ ¯¯¯¯|¯¯¯¯     
 295:lvds161.c     **** //            >______________/¯¯¯¯¯¯¯¯¯\_________|    DT=3, OCR=4 (+?)
 296:lvds161.c     **** 
 297:lvds161.c     **** // So, best-case, with direct implementation, with DE active:
 298:lvds161.c     **** //    (not inverting anything, etc)
 299:lvds161.c     **** //    B3 is always low
 300:lvds161.c     **** //    B2 is selectable
 301:lvds161.c     **** //    B2           = 4
 302:lvds161.c     **** //    B2, B5, B4   = 52
 303:lvds161.c     **** //    B2, B5       = 36
 304:lvds161.c     **** //        B5       = 32
 305:lvds161.c     **** //        B5, B4   = 48
 306:lvds161.c     **** // Not as much range-increase as I'd expected, maybe another way
 307:lvds161.c     **** // For now, it seems it's plausible to at least reimplement what was
 308:lvds161.c     **** // already.
 309:lvds161.c     **** 
 310:lvds161.c     **** 
 311:lvds161.c     **** 
 312:lvds161.c     **** 
 313:lvds161.c     **** 
 314:lvds161.c     **** 
 315:lvds161.c     **** 
 316:lvds161.c     **** 
 317:lvds161.c     **** 
 318:lvds161.c     **** 
 319:lvds161.c     **** // One potential option is to use the look-up-table
 320:lvds161.c     **** // This gives a value based on the ramp-step number (in a 4-ramp
 321:lvds161.c     **** // configuration)
 322:lvds161.c     **** 
 323:lvds161.c     **** //  Ramp# (aka lookup-table index)
 324:lvds161.c     **** //    0     1     2     3
 325:lvds161.c     **** // |-----|-----|-----|------|
 326:lvds161.c     **** //
 327:lvds161.c     **** //
 328:lvds161.c     **** // So how many cases are there with two channels and assuming we match the
 329:lvds161.c     **** // old configuration where there's only one active period that gets shifted
 330:lvds161.c     **** // left/right and grows/shrinks in width...?
 331:lvds161.c     **** 
 332:lvds161.c     **** // |________________________|
 333:lvds161.c     **** // |________________________|
 334:lvds161.c     **** 
 335:lvds161.c     **** //       0        1
 336:lvds161.c     **** // |____________¯¯¯¯¯¯¯¯¯¯¯¯|
 337:lvds161.c     **** // |________________________|
 338:lvds161.c     **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 17


 339:lvds161.c     **** //   0         1    2
 340:lvds161.c     **** // |____________¯¯¯¯¯¯¯¯¯¯¯¯|
 341:lvds161.c     **** // |__________¯¯¯¯¯¯¯¯¯¯¯¯¯¯|
 342:lvds161.c     **** 
 343:lvds161.c     **** //   0           1   2
 344:lvds161.c     **** // |____________¯¯¯¯¯¯¯¯¯¯¯¯|
 345:lvds161.c     **** // |_______________¯¯¯¯¯¯¯¯¯|
 346:lvds161.c     **** 
 347:lvds161.c     **** //   0           1  2 3
 348:lvds161.c     **** // |____________¯¯¯¯¯_______|     This sort've matches one-ramp...
 349:lvds161.c     **** // |_______________¯¯¯¯¯¯¯¯¯|     Since this always changes at the end.
 350:lvds161.c     **** 
 351:lvds161.c     **** //   0           1  2 3  4
 352:lvds161.c     **** // |____________¯¯¯¯¯_______|     NOGO.
 353:lvds161.c     **** // |_______________¯¯¯¯¯¯___|
 354:lvds161.c     **** 
 355:lvds161.c     **** // So, it looks like it's plausible to use for a few cases, and certainly
 356:lvds161.c     **** // all those that one-ramp would allow
 357:lvds161.c     **** // but doesn't allow for completely arbitrary waveforms
 358:lvds161.c     **** // And when combined with the additional math, it'd be complicated
 359:lvds161.c     **** // (math used to determine where to place each ramp-edge, since
 360:lvds161.c     **** // order-matters and would have to be sorted between red/green)
 361:lvds161.c     **** 
 362:lvds161.c     **** 
 363:lvds161.c     **** 
 364:lvds161.c     **** /// So back to one-ramp mode...
 365:lvds161.c     **** // Blue/CLK:
 366:lvds161.c     **** //
 367:lvds161.c     **** // CLK:
 368:lvds161.c     **** // OCR2RB = 6 (starting from 0)
 369:lvds161.c     **** // OCR2SB = 3
 370:lvds161.c     **** //
 371:lvds161.c     **** // H(only):	OCR2SA = 2, OCR2RA = 3
 372:lvds161.c     **** // V w/o H: OCR2SA = 3, OCR2RA = 4
 373:lvds161.c     **** // V w/ H : OCR2SA >=6, OCR2RA = 0 ....???
 374:lvds161.c     **** // Nada   : OCR2SA = 2, OCR2RA = 4
 375:lvds161.c     **** // 
 376:lvds161.c     **** // DE/Blue: 
 377:lvds161.c     **** // DE:          B3   B2   DE   /V   /H   B5   B4  For BLUE DATA (not D/V/H)
 378:lvds161.c     **** // "Blue/DVH" |     ____ ____.____.____ ____ ____      S=OCR2SA
 379:lvds161.c     **** //  OC1A:     | S0>/ S1>/           R4>\ R5>\ R6...    R=OCR2RA
 380:lvds161.c     **** //            |¯¯¯¯ ¯¯¯¯                ¯¯¯¯ ¯¯¯¯
 381:lvds161.c     **** // This closely matches the Tiny861's setup, where S=D+1, R=C
 382:lvds161.c     **** // PWM161 = Tiny861
 383:lvds161.c     **** // ----------------
 384:lvds161.c     **** // OCR2SA = DT - 1
 385:lvds161.c     **** // OCR2RA = OCR1A
 386:lvds161.c     **** //
 387:lvds161.c     **** 
 388:lvds161.c     **** //ANOTHER DIFFICULTY:
 389:lvds161.c     **** //  synchronizing PSC with PSCR (inputs?)
 390:lvds161.c     **** //
 391:lvds161.c     **** // PSCR: "In one ramp mode, Retrigger Inputs ... reset the current PSCR
 392:lvds161.c     **** // counting to zero"
 393:lvds161.c     **** // PSCR allows using the Analog Comparator output as the PSCR Input...
 394:lvds161.c     **** // If PSC2 does, as well, then both should be sync-able via AnaComp
 395:lvds161.c     **** //
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 18


 396:lvds161.c     **** // Which, too, might be doable in software, entirely, via driving an
 397:lvds161.c     **** // output-value on the same pin as the anacomp input...? Or maybe selecting
 398:lvds161.c     **** // an internal source (thermal?) ...
 399:lvds161.c     **** // Input Mode 8, p166
 400:lvds161.c     **** // (Might be difficult if they use prescalers other than 1, since who knows
 401:lvds161.c     **** // where the prescaler-counters are with respect to PSCR and PSC2)
 402:lvds161.c     **** //
 403:lvds161.c     **** 
 404:lvds161.c     **** 
 405:lvds161.c     **** 
 406:lvds161.c     **** 
 407:lvds161.c     **** // More colors (Red/Green)?
 408:lvds161.c     **** //  Possibly, sync PSC with PSCR at the other LVDS-CLK edge
 409:lvds161.c     **** //  (they'd be out of phase)
 410:lvds161.c     **** //  Then the OCR2SB-ish signal which causes the one-ramp reset
 411:lvds161.c     **** //  could be located at a much lower color-bit-value
 412:lvds161.c     **** 
 413:lvds161.c     **** // Green Notes:
 414:lvds161.c     **** // (Assuming Green is connected to OCR2SB-ish, and thus required to be high
 415:lvds161.c     **** // until the 7th bit, for resetting the one-ramp mode)
 416:lvds161.c     **** //   On the ATTiny861 green has basically three values based on the
 417:lvds161.c     **** //   dead-timer from the lvds-clock edge...
 418:lvds161.c     **** //      G5 = 32/63, G5+G4 = 48/63, G5+G4+G3 = 56/63
 419:lvds161.c     **** //   PWM161 is reversed!
 420:lvds161.c     **** //     G3 = 8/63, G3+G4 = 24/63, G3+G4+G5 = 56/63
 421:lvds161.c     **** // Interesting side-note???
 422:lvds161.c     **** //    One is ~logarithmic, and the other is ~exponential?
 423:lvds161.c     **** //   BUT MAYBE the same could be accomplished by inverting Green again...?
 424:lvds161.c     **** //
 425:lvds161.c     **** 
 426:lvds161.c     **** 
 427:lvds161.c     **** #if (defined(REMOVE_DC) && REMOVE_DC)
 428:lvds161.c     ****  #error "REMOVE_DC hasn't been tested since lcdStuff, or long prior"
 429:lvds161.c     ****  #error "Further, it hasn't been implemented AT ALL for the PWM161"
 430:lvds161.c     **** #endif
 431:lvds161.c     **** 
 432:lvds161.c     **** //Is +1 true, since DT adds its own delay...? Probably, since DT adds the
 433:lvds161.c     **** //delay to *all* channels...
 434:lvds161.c     **** //#define DT1_EQUIV(x)   (OCR2SA = (x)-1)
 435:lvds161.c     **** 
 436:lvds161.c     **** #define lockPSC2()		(setbit(PLOCK2, PCNF2))
 437:lvds161.c     **** #define unlockPSC2()		(clrbit(PLOCK2, PCNF2))
 438:lvds161.c     **** 
 439:lvds161.c     **** #define lockPSC0()      (setbit(PLOCK0, PCNF0))
 440:lvds161.c     **** #define unlockPSC0()		(clrbit(PLOCK0, PCNF0))
 441:lvds161.c     **** 
 442:lvds161.c     **** #define FULL_INIT_TESTS	TRUE
 443:lvds161.c     **** #warning "NEED TO REVISIT TRANSITIONS, Especially DE->setBlue"
 444:lvds161.c     **** 
 445:lvds161.c     **** #define Nada_init()     { lockPSC2(); OCR2SA=2; OCR2RA=4; unlockPSC2(); }
 446:lvds161.c     **** //#error "Check these again with ATtiny861..."
 447:lvds161.c     **** //#error "Kept forgetting that V and H are active-low"
 448:lvds161.c     **** //Unused, normally...
 449:lvds161.c     **** #define Vsync_init()    { lockPSC2(); OCR2SA=3; OCR2RA=4; unlockPSC2(); }
 450:lvds161.c     **** #define VplusH_init()   { lockPSC2(); OCR2SA=6; OCR2RA=6; unlockPSC2(); }
 451:lvds161.c     **** #define Hsync_init()    { lockPSC2(); OCR2SA=2; OCR2RA=3; unlockPSC2(); }
 452:lvds161.c     **** #define DEonly_init()   { lockPSC2(); OCR2SA=1; OCR2RA=4; unlockPSC2(); }
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 19


 453:lvds161.c     **** //#define DEonly_init()   { lockPSC2(); OCR2SA=0; OCR2RA=4; unlockPSC2(); }
 454:lvds161.c     **** #define DEblue_init()   { lockPSC2(); OCR2SA=0; OCR2RA=6; unlockPSC2(); }
 455:lvds161.c     **** 
 456:lvds161.c     **** #if (defined(DE_ONLY_DISPLAY) && DE_ONLY_DISPLAY)
 457:lvds161.c     ****  #error "DE_ONLY_DISPLAY is not implemented for PWM161"
 458:lvds161.c     ****  #error " But don't be discouraged... an actual LCD that's DE-Only"
 459:lvds161.c     ****  #error " should work fine WITHOUT DE_ONLY_DISPLAY set true"
 460:lvds161.c     ****  #error " Really, DE_ONLY_DISPLAY was just a test... see lvds.c"
 461:lvds161.c     **** #elif (defined(FULL_INIT_TESTS) && FULL_INIT_TESTS)
 462:lvds161.c     **** //#error"OK"
 463:lvds161.c     ****  #define Vsync_fromNada()      Vsync_init()
 464:lvds161.c     ****  #define VplusH_fromVsync()      VplusH_init()
 465:lvds161.c     ****  #define Vsync_fromVplusH()      Vsync_init()
 466:lvds161.c     ****  #define Nada_fromVsync()      Nada_init()
 467:lvds161.c     ****  #define Hsync_fromNada()      Hsync_init()
 468:lvds161.c     ****  #define Nada_fromHsync()      Nada_init()
 469:lvds161.c     ****  #define DEonly_fromNada()      DEonly_init()
 470:lvds161.c     ****  #define DEblue_fromDEonly()   DEblue_init()
 471:lvds161.c     ****  #define Nada_fromDEonly()      Nada_init()
 472:lvds161.c     ****  #define Nada_fromDEblue()      Nada_init()
 473:lvds161.c     ****  #define DEonly_fromDEblue()   DEonly_init()
 474:lvds161.c     **** #else   //NOT FULL_INIT_TESTS
 475:lvds161.c     **** //These are the minimal changes necessary, for high-speed processing...
 476:lvds161.c     ****  #define Vsync_fromNada()   { lockPSC2(); OCR2SA=3; unlockPSC2(); } 
 477:lvds161.c     ****  #define VplusH_fromVsync() VplusH_init()
 478:lvds161.c     **** 	//Might be able to get away with merely changing OCR2SA to 6... then
 479:lvds161.c     **** 	//reset would occur before set, and set would never occur...?
 480:lvds161.c     **** #define Vsync_fromVplusH() Vsync_init()
 481:lvds161.c     **** 	// See above
 482:lvds161.c     **** #define Nada_fromVsync()   { lockPSC2(); OCR2SA=2; unlockPSC2(); }
 483:lvds161.c     **** #define Hsync_fromNada()   { lockPSC2(); OCR2RA=3; unlockPSC2(); }
 484:lvds161.c     **** #define Nada_fromHsync()   { lockPSC2(); OCR2RA=4; unlockPSC2(); }
 485:lvds161.c     **** #define Nada_fromDEblue()  Nada_init()
 486:lvds161.c     **** #define Nada_fromDEonly()  { lockPSC2(); OCR2SA=2; unlockPSC2(); }
 487:lvds161.c     **** #define DEonly_fromNada()  { lockPSC2(); OCR2SA=1; unlockPSC2(); }
 488:lvds161.c     **** #define DEblue_fromNada()  DEblue_init()
 489:lvds161.c     **** #define DEblue_fromDEonly() DEblue_init()
 490:lvds161.c     **** 
 491:lvds161.c     **** #define DEonly_fromDEblue() DEonly_init()
 492:lvds161.c     **** 
 493:lvds161.c     **** #endif
 494:lvds161.c     **** 
 495:lvds161.c     **** #define fullBlue()	DEblue_init()
 496:lvds161.c     **** 
 497:lvds161.c     **** // So far, there's no "noBlue()" like there is (now) for red/green
 498:lvds161.c     **** // it gets confusing since doing-so would also affect the timing signals
 499:lvds161.c     **** 
 500:lvds161.c     **** 
 501:lvds161.c     **** //This'll be a macro, eventually...
 502:lvds161.c     **** // but I want these warnings/errors...
 503:lvds161.c     **** /*void fullRed(void);
 504:lvds161.c     **** 
 505:lvds161.c     **** #if(defined(ALLOW_UNIMPLEMENTED) && ALLOW_UNIMPLEMENTED)
 506:lvds161.c     ****  #warning "UNIMPLEMENTED FUNCTION: fullRed()"
 507:lvds161.c     **** #else
 508:lvds161.c     ****  #error "UNIMPLEMENTED FUNCTION: fullRed()"
 509:lvds161.c     **** #endif  
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 20


 510:lvds161.c     **** 
 511:lvds161.c     **** void fullRed(void)
 512:lvds161.c     **** {
 513:lvds161.c     **** 
 514:lvds161.c     **** }
 515:lvds161.c     **** */
 516:lvds161.c     **** //For now, we're assuming the Set/Reset active-levels are
 517:lvds161.c     **** //directly-corresponding to the FPD-Link bit-values...
 518:lvds161.c     **** // e.g. "OCR0SA" = set the output, so the corresponding bit is high
 519:lvds161.c     **** //THIS MIGHT CHANGE
 520:lvds161.c     **** // e.g. inverting "green" might allow for the color-scheme to be stretched
 521:lvds161.c     **** // more normally...
 522:lvds161.c     **** // There're a couple ways to do this, and it's too confusing for me to
 523:lvds161.c     **** // parse right now... invert the output, or flip the LVDS-converters...?
 524:lvds161.c     **** //#define fullRed()	{ lockPSC0(); OCR0SA = 0; OCR0RA = 6; unlockPSC0(); }
 525:lvds161.c     **** //#define noRed()	{ lockPSC0(); OCR0SA = 6; OCR0RA = 0; unlockPSC0(); }	//Would this be allowed?
 526:lvds161.c     **** 																//Would its ON be *around*
 527:lvds161.c     **** 																//the counter-reset?
 528:lvds161.c     **** //#define noRed()	{ lockPSC0(); OCR0SA = 6; OCR0RA = 6; unlockPSC0(); }
 529:lvds161.c     **** #define noRed()	setRed4(0)
 530:lvds161.c     **** #define fullRed()	setRed4(3)
 531:lvds161.c     **** 
 532:lvds161.c     **** //#define fullGreen()	{ lockPSC0(); OCR0SB = 0; unlockPSC0(); }
 533:lvds161.c     **** //#define noGreen()		{ lockPSC0(); OCR0SB = 6; unlockPSC0(); }
 534:lvds161.c     **** #define noGreen()	  setGreen4(0)
 535:lvds161.c     **** #define fullGreen() setGreen4(3)
 536:lvds161.c     **** 
 537:lvds161.c     **** 
 538:lvds161.c     **** //These are most-likely unnecessary for PWM161
 539:lvds161.c     **** #define lvds_disableGreen_MakeClockInsensitiveToDT()
 540:lvds161.c     **** #define lvds_enableGreen_MakeClockSensitiveToDT()
 541:lvds161.c     **** 
 542:lvds161.c     **** 
 543:lvds161.c     **** void lvds_timerInit(void);
 544:lvds161.c     **** 
 545:lvds161.c     **** //This is causing display-syncing problems...
 546:lvds161.c     **** //#define LVDS_MAXIMIZE_OSCCAL TRUE
 547:lvds161.c     **** #define LVDS_USE_PLL	TRUE
 548:lvds161.c     **** 
 549:lvds161.c     **** #if(defined(LVDS_USE_PLL) && LVDS_USE_PLL)
 550:lvds161.c     ****  // 0 selects "Slow Clock Input" aka systemI/O-clock
 551:lvds161.c     ****  // 1 selects "Fast Clock Input" aka PLL_CLK
 552:lvds161.c     ****  // This is the case for both PSC2 and PSCR
 553:lvds161.c     ****  #define PCLKSELn	1
 554:lvds161.c     **** #else
 555:lvds161.c     ****  #warning "LVDS_USE_PLL is not TRUE... using system clock"
 556:lvds161.c     ****  #define PCLKSELn 0
 557:lvds161.c     **** #endif
 558:lvds161.c     **** 
 559:lvds161.c     **** 
 560:lvds161.c     **** #if(defined(PLL_SYSCLK) && PLL_SYSCLK)
 561:lvds161.c     ****  #warning "The AT90PWM161 has not yet been configured to use PLL_SYSCLK"
 562:lvds161.c     ****  #warning "Math relying on it may be messed-up... e.g. boot PLL_MULT=6"
 563:lvds161.c     **** // #error "Comment-out the line 'PLLSYSCLK=1' in your makefile"
 564:lvds161.c     **** #endif
 565:lvds161.c     **** 
 566:lvds161.c     **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 21


 567:lvds161.c     **** 
 568:lvds161.c     **** void lvds_timerInit(void)
 569:lvds161.c     **** {
 246               		.stabn	68,0,569,.LM7-.LFBB2
 247               	.LM7:
 248               	.LFBB2:
 249 0030 0F93      		push r16
 250               	/* prologue: function */
 251               	/* frame size = 0 */
 252               	/* stack size = 1 */
 253               	.L__stack_usage = 1
 570:lvds161.c     **** 
 571:lvds161.c     ****   #if(defined(LVDS_MAXIMIZE_OSCCAL) && LVDS_MAXIMIZE_OSCCAL)
 572:lvds161.c     **** 	OSCCAL = OSCCAL_VAL;
 573:lvds161.c     ****   #endif
 574:lvds161.c     **** 
 575:lvds161.c     ****   #if(defined(LVDS_USE_PLL) && LVDS_USE_PLL)
 576:lvds161.c     **** 	pll_enable();
 254               		.stabn	68,0,576,.LM8-.LFBB2
 255               	.LM8:
 256 0032 0E94 0000 		call pll_enable
 577:lvds161.c     ****   #endif
 578:lvds161.c     **** 
 579:lvds161.c     **** 	PSOC2 = (0<<POS23)	//PSCOUT23 outputs Waveform A if 1 or B if 0
 257               		.stabn	68,0,579,.LM9-.LFBB2
 258               	.LM9:
 259 0036 A5E0      		ldi r26,lo8(5)
 260 0038 A093 6E00 		sts 110,r26
 580:lvds161.c     **** 			| (0<<POS22)	//PSCOUT22 outputs Waveform B if 1 or A if 0
 581:lvds161.c     **** 							//Depending on whether POEN2C/D are 1...
 582:lvds161.c     **** 			// PSYnC21:20 are for synchronizing the ADC...
 583:lvds161.c     **** 			| (0<<POEN2D)	//PSCOUT23 unused if 0, PSC output if 1
 584:lvds161.c     **** 			| (1<<POEN2B)	//PSCOUT21 unused if 0, PSC output if 1
 585:lvds161.c     **** 			| (0<<POEN2C)	//PSCOUT22 ''
 586:lvds161.c     **** 			| (1<<POEN2A)  //PSCOUT20 ''
 587:lvds161.c     **** 			;
 588:lvds161.c     **** 
 589:lvds161.c     **** #warning "NOTE! These are 12-bit registers, requiring complex loading"
 590:lvds161.c     **** #warning "since we only need them to count to 7, it might be better to use"
 591:lvds161.c     **** #warning "low bytes, only!"
 592:lvds161.c     **** 
 593:lvds161.c     **** 	//OCR2SA, OCR2RA	-> DVH/Blue
 594:lvds161.c     **** 	//OCR2SB, OCR2RB	-> LVDS Clock
 595:lvds161.c     **** 	// For one-ramp mode, OCR2RB determines the number of cycles (right?)
 596:lvds161.c     **** 	// In order to make this work, the LVDS-CLK signal should be on this
 597:lvds161.c     **** 	// channel...
 598:lvds161.c     **** 
 599:lvds161.c     **** 	OCR2RB = 6;	//Count to 6, from 0, then reset the count
 261               		.stabn	68,0,599,.LM10-.LFBB2
 262               	.LM10:
 263 003c 46E0      		ldi r20,lo8(6)
 264 003e 50E0      		ldi r21,0
 265 0040 59BD      		out 0x28+1,r21
 266 0042 48BD      		out 0x28,r20
 600:lvds161.c     **** 	OCR2SB = 3;	// Toggle the lvds-clock high at edge 3 (0->3 = 4 bits off)
 267               		.stabn	68,0,600,.LM11-.LFBB2
 268               	.LM11:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 22


 269 0044 23E0      		ldi r18,lo8(3)
 270 0046 30E0      		ldi r19,0
 271 0048 37BD      		out 0x26+1,r19
 272 004a 26BD      		out 0x26,r18
 601:lvds161.c     **** 					//                                      (4->6 = 3 bits on)
 602:lvds161.c     **** 	//The above two won't change.
 603:lvds161.c     **** 	//THIS IS INVERTED.
 604:lvds161.c     **** 	// The outputs of the LVDS driver chips need to be swapped
 605:lvds161.c     **** 	// (RXclk-/+)
 606:lvds161.c     **** 
 607:lvds161.c     **** 	//OCR2SA/RA are used for DVH/Blue, and should be handled by this:
 608:lvds161.c     **** #if(!defined(PWM_TESTING) || !PWM_TESTING)
 609:lvds161.c     **** 	Nada_init();
 273               		.stabn	68,0,609,.LM12-.LFBB2
 274               	.LM12:
 275 004c AD9A      		sbi 0x15,5
 276 004e 82E0      		ldi r24,lo8(2)
 277 0050 90E0      		ldi r25,0
 278 0052 9093 6500 		sts 100+1,r25
 279 0056 8093 6400 		sts 100,r24
 280 005a 64E0      		ldi r22,lo8(4)
 281 005c 70E0      		ldi r23,0
 282 005e 7FBD      		out 0x2e+1,r23
 283 0060 6EBD      		out 0x2e,r22
 284 0062 AD98      		cbi 0x15,5
 610:lvds161.c     **** #else
 611:lvds161.c     **** 	//These are just arbitrary values for 'scoping...
 612:lvds161.c     **** 	OCR2SA = 0;
 613:lvds161.c     **** 	OCR2RA = 8;
 614:lvds161.c     **** 	// EXPERIMENTATION NOTES:
 615:lvds161.c     **** 	// S   R
 616:lvds161.c     **** 	// 0   0   signal is always low
 617:lvds161.c     **** 	// 1   0   signal goes low for bit 1 (appears to wrap! Awesome)
 618:lvds161.c     **** 	// 0   6   signal goes low for bit 0 (ditto)
 619:lvds161.c     **** 	// 0   7   signal is always low (???? Weird?)
 620:lvds161.c     **** 	//           Tested twice, yep. Weird
 621:lvds161.c     **** 	// 7   0   signal is always low (expected)
 622:lvds161.c     **** 	// 0   1   signal goes high for bit 1
 623:lvds161.c     **** 	// 6   6   signal	is always low
 624:lvds161.c     **** 	// 6   5   signal is low for bit 6
 625:lvds161.c     **** 	// 1   1   always low
 626:lvds161.c     **** 	// 2   1   low for bit 2
 627:lvds161.c     **** 	// Appears to be no way to set *all* bits ??? NO, see below.
 628:lvds161.c     **** 	// fff fff always low
 629:lvds161.c     **** 	// 0   fff always high (!)
 630:lvds161.c     **** 	//         may be hokey, due to the counter overflowing once before
 631:lvds161.c     **** 	//         the OCRRB value being recognized?
 632:lvds161.c     **** 	//         ALSO the output is fuzzy (weird?)
 633:lvds161.c     **** 	// fff 0   always low
 634:lvds161.c     **** 	// 0   ff  always high (!) (same as 0xfff)
 635:lvds161.c     **** 	// 0   0x70 always high (!) (same)
 636:lvds161.c     ****    // 0   8   always high (!)
 637:lvds161.c     ****    // 0   7   recheck -- Yep, always low.
 638:lvds161.c     **** 	// Appears that the TCNT value might jump briefly to 7 before resetting
 639:lvds161.c     **** 	// to 0
 640:lvds161.c     **** 	//So... apparently any combination can be created.
 641:lvds161.c     **** 	// 5   0   bits 6 and 0 are high
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 23


 642:lvds161.c     **** 	// 0   5   bits 6 and 0 are low
 643:lvds161.c     **** #endif
 644:lvds161.c     **** 
 645:lvds161.c     **** 	//Also, forgot about FlankWidthModulation (?)
 646:lvds161.c     **** 
 647:lvds161.c     **** 	PCNF2 = (0<<PFIFTY2)	//"Fifty-percent waveforms" unused
 285               		.stabn	68,0,647,.LM13-.LFBB2
 286               	.LM13:
 287 0064 66E0      		ldi r22,lo8(6)
 288 0066 65BB      		out 0x15,r22
 648:lvds161.c     **** 			| (0<<PALOCK2)	// AutoLock: Assures simultaneous register updates
 649:lvds161.c     **** 			| (0<<PLOCK2)  // Lock: Similar
 650:lvds161.c     **** //TODO: Probably gonna have to use one of the LOCKs later.
 651:lvds161.c     **** 			| (0<<PMODE21)	// \  0 0 -> One Ramp mode
 652:lvds161.c     **** 			| (0<<PMODE20) // /
 653:lvds161.c     **** 			| (1<<POP2)    // PSC outputs are active-high
 654:lvds161.c     **** 			| (PCLKSELn<<PCLKSEL2) 
 655:lvds161.c     **** 								// 0 selects "slow clock input" 1 selects fast
 656:lvds161.c     **** 								// 1=CLK_PLL 0=CLK_I/O
 657:lvds161.c     **** 			| (0<<POME2)   // 1 enables the Output Matrix, 0 disables
 658:lvds161.c     **** 			;
 659:lvds161.c     **** 
 660:lvds161.c     **** 	//PCNFE2 = //PASDLK22:20 for Analog Sync, unused...
 661:lvds161.c     **** 				//PBFM21 for Flank Width Modulation, unused...
 662:lvds161.c     **** 				//PELEV2A1 for Input Select, unused...
 663:lvds161.c     **** 				//PELEV2B1 ''
 664:lvds161.c     **** 				//PISEL2A1 ''
 665:lvds161.c     **** 				//PISEL2B1 ''
 666:lvds161.c     **** 
 667:lvds161.c     **** 	//PASDLY2 Analog Synchronization Delay Register
 668:lvds161.c     **** 
 669:lvds161.c     **** #if(LVDS_PRESCALER == 1)
 670:lvds161.c     ****  #define PPREn1	0
 671:lvds161.c     ****  #define PPREn0	0
 672:lvds161.c     **** #elif (LVDS_PRESCALER == 4)
 673:lvds161.c     ****  #define PPREn1	0
 674:lvds161.c     ****  #define PPREn0	1
 675:lvds161.c     **** #if 0
 676:lvds161.c     **** 	These values only work with PSC2:
 677:lvds161.c     **** #elif (LVDS_PRESCALER == 16)
 678:lvds161.c     ****  #define PPREn1	1
 679:lvds161.c     ****  #define PPREn0	0
 680:lvds161.c     **** #elif (LVDS_PRESCALER == 64)
 681:lvds161.c     ****  #define PPREn1	1
 682:lvds161.c     ****  #define PPREn0	1
 683:lvds161.c     **** #endif
 684:lvds161.c     **** #if 0
 685:lvds161.c     **** 	These values only work with PCSR:
 686:lvds161.c     **** #elif (LVDS_PRESCALER == 32)
 687:lvds161.c     ****  #define PPREn1	1
 688:lvds161.c     ****  #define PPREn0	0
 689:lvds161.c     **** #elif (LVDS_PRESCALER == 256)
 690:lvds161.c     ****  #define PPREn1	1
 691:lvds161.c     ****  #define PPREn0	1
 692:lvds161.c     **** #endif
 693:lvds161.c     **** //If values other than 1 or 4 are needed, there'll have to be some math
 694:lvds161.c     **** //done to determine whether to use the PLL or the system-clock
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 24


 695:lvds161.c     **** // and it may not even be possible, who knows.
 696:lvds161.c     **** #else
 697:lvds161.c     ****  #error "This LVDS_PRESCALER value won't work with the PWM161"
 698:lvds161.c     **** #endif
 699:lvds161.c     **** #if 0
 700:lvds161.c     ****  THIS HAS BEEN MOVED to the end of the function
 701:lvds161.c     **** 	In order to synchronize the two PSCs
 702:lvds161.c     **** 
 703:lvds161.c     **** 	PCTL2 = (PPREn1<<PPRE21) // \ Prescaler selection (0 0 = no divider)
 704:lvds161.c     **** 			| (PPREn0<<PPRE20) // /
 705:lvds161.c     **** 			//PBFM20 for Flank Width Modulation, unused...
 706:lvds161.c     **** 			| (0<<PAOC2B) //"Fault Input selected to block _ can act directly
 707:lvds161.c     **** 			| (0<<PAOC2A) // to PSCOUT2x outputs" ???
 708:lvds161.c     **** //TODO: These are related to PSC Clock Sources?! "page 133"
 709:lvds161.c     **** 			//PARUN2 for synchronizing with other PSC's... but there aren't
 710:lvds161.c     **** 						//any that it can sync with (PSCR doesn't), right?
 711:lvds161.c     **** 			| (0<<PCCYC2) // Used during halting... which mightn't be used
 712:lvds161.c     **** 			| (1<<PRUN2)  // START THE PSC
 713:lvds161.c     **** 			;
 714:lvds161.c     **** #endif
 715:lvds161.c     **** 	//A bunch of input configuration registers and capture registers
 716:lvds161.c     **** 
 717:lvds161.c     **** 	POM2 = 0;	//PSC2 Output Matrix (unused)
 289               		.stabn	68,0,717,.LM14-.LFBB2
 290               	.LM14:
 291 0068 1092 6F00 		sts 111,__zero_reg__
 718:lvds161.c     **** 
 719:lvds161.c     **** 	//PIM2: PSC2 Interrupt Mask Register, unused
 720:lvds161.c     **** 	//PIFR2: PSC2 Interrupt Flag Register, unused
 721:lvds161.c     **** 
 722:lvds161.c     **** 	//NOTE: PSC2/PSCR I/O can be set to defaults on reset, via fuses
 723:lvds161.c     **** 
 724:lvds161.c     **** 
 725:lvds161.c     **** //These are for PSCR and closely match PSC2:
 726:lvds161.c     **** 	PSOC0 = (0<<PISEL0A1)	//PSC Input A Select (along with PISEL0A0)
 292               		.stabn	68,0,726,.LM15-.LFBB2
 293               	.LM15:
 294 006c A093 6A00 		sts 106,r26
 727:lvds161.c     **** 			| (0<<PISEL0B1)	//PSC Input B Select (along with PISEL0B0)
 728:lvds161.c     **** 				//These two might need to be changed for syncing...?
 729:lvds161.c     **** 			//PSYNC01:00 are for synchronizing the ADC
 730:lvds161.c     **** 			//Bit 3 is reserved
 731:lvds161.c     **** 			| (1<<POEN0B)		//PSCOUT01 is connected to PSCR B output
 732:lvds161.c     **** 			//Bit 1 is reserved
 733:lvds161.c     **** 			| (1<<POEN0A)		//PSCOUT00 is connected to PSCR A output
 734:lvds161.c     **** 			;
 735:lvds161.c     **** 
 736:lvds161.c     **** 	//OCR0SA, OCR0RA	-> "Red"
 737:lvds161.c     **** 	//OCR0SB, OCR0RB	-> "Green"
 738:lvds161.c     **** 	// For now, I've been assuming that "green" was connected to channel B
 739:lvds161.c     **** 	// Not sure why, exactly... maybe because it's similar to the case where
 740:lvds161.c     **** 	// green is tied to the LVDS-CLK signal in the ATTiny861 configuration
 741:lvds161.c     **** 	// Changing this to Red might allow for more colors 
 742:lvds161.c     **** 	//  (since the fixed "starting-point" is R2 vs G3)	
 743:lvds161.c     **** 	// But for now, I'll leave it with the written assumptions.
 744:lvds161.c     **** 	//
 745:lvds161.c     **** 	// OCR0RB determines the reset value of the counter, in one-ramp mode...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 25


 746:lvds161.c     **** 	// So its value should not change (regardless of whether it's Green or
 747:lvds161.c     **** 	// Red)
 748:lvds161.c     **** 	OCR0RB = 6; // count from 0->6, then reset
 295               		.stabn	68,0,748,.LM16-.LFBB2
 296               	.LM16:
 297 0070 55BD      		out 0x24+1,r21
 298 0072 44BD      		out 0x24,r20
 749:lvds161.c     **** 
 750:lvds161.c     **** 	//See notes re: Red OUTPUT INVERTED, green-matched, above.
 751:lvds161.c     **** 	// Using R=5, we should be able to get away with simple math
 752:lvds161.c     **** 	// see also setRed4()
 753:lvds161.c     **** 	OCR0RA = 5;
 299               		.stabn	68,0,753,.LM17-.LFBB2
 300               	.LM17:
 301 0074 45E0      		ldi r20,lo8(5)
 302 0076 50E0      		ldi r21,0
 303 0078 5BBD      		out 0x2a+1,r21
 304 007a 4ABD      		out 0x2a,r20
 754:lvds161.c     **** 
 755:lvds161.c     **** 	//These should handle configuring reasonable values for OCR0SA/RA/SB
 756:lvds161.c     **** #if(!defined(PWM_TESTING) || !PWM_TESTING)
 757:lvds161.c     **** 	noGreen();
 305               		.stabn	68,0,757,.LM18-.LFBB2
 306               	.LM18:
 307 007c 8D9A      		sbi 0x11,5
 308 007e 33BD      		out 0x22+1,r19
 309 0080 22BD      		out 0x22,r18
 310 0082 8D98      		cbi 0x11,5
 758:lvds161.c     **** 	noRed();
 311               		.stabn	68,0,758,.LM19-.LFBB2
 312               	.LM19:
 313 0084 8D9A      		sbi 0x11,5
 314 0086 9093 6100 		sts 96+1,r25
 315 008a 8093 6000 		sts 96,r24
 316 008e 8D98      		cbi 0x11,5
 759:lvds161.c     **** #else
 760:lvds161.c     **** 	OCR0SB = 3;
 761:lvds161.c     **** 	OCR0SA = 5;
 762:lvds161.c     **** 	OCR0RA = 6;
 763:lvds161.c     **** #endif
 764:lvds161.c     **** 
 765:lvds161.c     **** 	//See PCNF2, above...
 766:lvds161.c     **** 	PCNF0 = (0<<PFIFTY0)
 317               		.stabn	68,0,766,.LM20-.LFBB2
 318               	.LM20:
 319 0090 82E0      		ldi r24,lo8(2)
 320 0092 81BB      		out 0x11,r24
 767:lvds161.c     **** 			| (0<<PALOCK0)
 768:lvds161.c     **** 			| (0<<PLOCK0)
 769:lvds161.c     **** //TODO: Look into LOCKs
 770:lvds161.c     **** 			| (0<<PMODE01)	//	\ 0 0 -> One Ramp Mode
 771:lvds161.c     **** 			| (0<<PMODE00)	//	/
 772:lvds161.c     **** 			| (0<<POP0)		// PSC outputs, active-LOW
 773:lvds161.c     **** 								// PSCR works with ALL OUTPUTS INVERTED
 774:lvds161.c     **** 								// (for Red/Green)
 775:lvds161.c     **** 			| (PCLKSELn<<PCLKSEL0)
 776:lvds161.c     **** 			//bit 0 is reserved
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 26


 777:lvds161.c     **** 			;
 778:lvds161.c     **** 
 779:lvds161.c     **** ////////lss stops following here...
 780:lvds161.c     **** 
 781:lvds161.c     **** 	//The PCTLn registers actually start the PSC...
 782:lvds161.c     **** 	// In order to synchronize the two separate PSC systems, the number of
 783:lvds161.c     **** 	// instructions between the start of PSC2 and PSCR has to be precise
 784:lvds161.c     **** 	// That's handled in assembly, below, but the values can be calculated
 785:lvds161.c     **** 	// ahead-of-time.
 786:lvds161.c     **** 	uint8_t pctl2_val;
 787:lvds161.c     **** 
 788:lvds161.c     **** 	//PCTL2
 789:lvds161.c     **** 	pctl2_val = 
 790:lvds161.c     **** 		     (PPREn1<<PPRE21) // \ Prescaler selection (0 0 = no divider)
 791:lvds161.c     **** 			| (PPREn0<<PPRE20) // /
 792:lvds161.c     **** 			//PBFM20 for Flank Width Modulation, unused...
 793:lvds161.c     **** 			| (0<<PAOC2B) //"Fault Input selected to block _ can act directly
 794:lvds161.c     **** 			| (0<<PAOC2A) // to PSCOUT2x outputs" ???
 795:lvds161.c     **** //TODO: These are related to PSC Clock Sources?! "page 133"
 796:lvds161.c     **** 			//PARUN2 for synchronizing with other PSC's... but there aren't
 797:lvds161.c     **** 						//any that it can sync with (PSCR doesn't), right?
 798:lvds161.c     **** 			| (0<<PCCYC2) // Used during halting... which mightn't be used
 799:lvds161.c     **** 			| (1<<PRUN2)  // START THE PSC
 800:lvds161.c     **** 			;
 801:lvds161.c     **** 
 802:lvds161.c     **** 
 803:lvds161.c     **** 	uint8_t pctl0_val;
 804:lvds161.c     **** 
 805:lvds161.c     **** 	//PCTL0 =
 806:lvds161.c     **** 	pctl0_val =	
 807:lvds161.c     **** 	        (PPREn1<<PPRE01) // \ Prescaler Selection (0 0 = no dividor)
 808:lvds161.c     **** 			| (PPREn0<<PPRE00) // /
 809:lvds161.c     **** 			//PBFM01 for flank-width-modulation, unused
 810:lvds161.c     **** 			// PAOC0B/A for "fault input" tied to PSCOUT's... (?)
 811:lvds161.c     **** 			//PBMF00 combines with PBFM01, above
 812:lvds161.c     **** 			| (0<<PCCYC0) // Used during halting... mightn't get used
 813:lvds161.c     **** 			| (1<<PRUN0)	// START the PSCR
 814:lvds161.c     **** 			;
 815:lvds161.c     **** 
 816:lvds161.c     **** //This value should work with LVDS_PRESCALER=1 and USE_PLL
 817:lvds161.c     **** // As well as LVDS_PRESCALER=1 and NOT USE_PLL
 818:lvds161.c     **** //It's, roughly something to do with 8 being the PLL_MULT_FACTOR
 819:lvds161.c     **** // and 7 being the number of counts before a reset (bits)
 820:lvds161.c     **** // 8*7 = 56, which is a least-common-multiple
 821:lvds161.c     **** // then subtract one cycle because of the actual out instruction...
 822:lvds161.c     **** // So, *maybe* it's as general as ((PLL_MULT_FACTOR * LVDS_NUM_BITS) - 1)
 823:lvds161.c     **** // But then also need to take into account the LVDS_PRESCALER and whatnot.
 824:lvds161.c     **** // And PLL_SYSCLK
 825:lvds161.c     **** 
 826:lvds161.c     **** #if(defined(PLL_SYSCLK) && PLL_SYSCLK)
 827:lvds161.c     ****  //Not sure this math is right...
 828:lvds161.c     ****  // with PLL_SYSCLK we have SYS_CLK = PLL_CLK/4 (not /2)
 829:lvds161.c     ****  // But it did clear-up the yellow-tint on black...
 830:lvds161.c     ****  // Further, shouldn't it have the same effect? 55 would just double the
 831:lvds161.c     ****  // number of nops (which would be redundant)... ish.
 832:lvds161.c     ****  #define PSC_SYNC_CYCLES	((4*7)-1)
 833:lvds161.c     **** #else
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 27


 834:lvds161.c     ****  #define PSC_SYNC_CYCLES	55
 835:lvds161.c     **** #endif
 836:lvds161.c     **** 
 837:lvds161.c     **** 
 838:lvds161.c     **** #if ((LVDS_PRESCALER != 1) || (PLL_MULT_FACTOR != 8))
 839:lvds161.c     ****  #error "PSC_SYNC_CYCLES needs to be calculated!"
 840:lvds161.c     **** #endif
 841:lvds161.c     **** 
 842:lvds161.c     **** #if(PSC_SYNC_CYCLES > 127)
 843:lvds161.c     ****  #error "PSC_SYNC_CYCLES must be <= 127..."
 844:lvds161.c     **** #endif
 845:lvds161.c     **** 
 846:lvds161.c     **** //..... lss resumes here...
 847:lvds161.c     **** //Which is OK, since pctln_vals are constants...
 848:lvds161.c     **** 
 849:lvds161.c     **** //	uint8_t pctl2_val = 0x3f;
 850:lvds161.c     **** //	uint8_t pctl0_val = 0x7f;
 851:lvds161.c     **** 	//delayCyc_setup(asdf, (int8_t)PSC_SYNC_CYCLES);
 852:lvds161.c     **** 	delayCyc_setup(asdf, (int8_t)(PSC_SYNC_CYCLES));
 321               		.stabn	68,0,852,.LM21-.LFBB2
 322               	.LM21:
 323 0094 03E1      		ldi r16,lo8(19)
 324               	/* #APP */
 325               	 ;  852 "lvds161.c" 1
 326 0096 E0E0      		ldi r30, lo8(pm(dc_loop_asdf)) ; 
 327 0098 F0E0      		ldi r31, hi8(pm(dc_loop_asdf)) ; 
 328               		
 329               	 ;  0 "" 2
 853:lvds161.c     **** 
 854:lvds161.c     **** 	__asm__ __volatile__
 330               		.stabn	68,0,854,.LM22-.LFBB2
 331               	.LM22:
 332               	/* #NOAPP */
 333 009a 81E0      		ldi r24,lo8(1)
 334               	/* #APP */
 335               	 ;  854 "lvds161.c" 1
 336               		delayCycs_asmInit asdf; 
 336               	>  dc_asm_init_asdf:
 336 009c 9894      	>  clz
 336               	>  dc_asm_init_exit_asdf:
 337 009e 86BB      		out 22, r24 ; 
 338               		delayCycs asdf; 
 338               	>  delayCycs_asdf:
 338 00a0 0994      	>  ijmp
 338               	>  dc_loop_asdf:
 338 00a2 0350      	>  subi r16,3
 338 00a4 04F4      	>  brge dc_loop_asdf
 338               	>  dc_loopRemainder_asdf:
 338 00a6 0D3F      	>  cpi r16,-3
 338 00a8 01F0      	>  breq dc_done1_asdf
 338 00aa 0E3F      	>  cpi r16,-2
 338 00ac 01F0      	>  breq dc_done_asdf
 338 00ae 0000      	>  nop
 338               	>  dc_done1_asdf:
 338 00b0 0000      	>  nop
 338               	>  dc_done_asdf:
 339 00b2 82BB      		out 18, r24 ; 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 28


 340               		
 341               	 ;  0 "" 2
 342               	/* epilogue start */
 855:lvds161.c     **** 	(
 856:lvds161.c     **** 		"delayCycs_asmInit asdf; \n\t"
 857:lvds161.c     **** 	 	"out %0, %1 ; \n\t"				//Start the PSC2
 858:lvds161.c     **** 		"delayCycs asdf; \n\t"			//Delay for a specific number of cycles
 859:lvds161.c     **** 		"out %2, %3 ; \n\t"				//Start the PSCR
 860:lvds161.c     **** 		:
 861:lvds161.c     **** 		: "I" (_SFR_IO_ADDR(PCTL2)),	//PCTL2 register
 862:lvds161.c     **** 		  "d" (pctl2_val),				//value to write to PCTL2
 863:lvds161.c     **** 		  "I" (_SFR_IO_ADDR(PCTL0)),	//PCTL0 register
 864:lvds161.c     **** 		  "d" (pctl0_val),				//value to write to PCTL0
 865:lvds161.c     **** 		  DC_VARIABLES_FOR_ASM(asdf)	// this is a list of variables used by
 866:lvds161.c     **** 		 										// delayCyc... see delayCyc/test/...
 867:lvds161.c     **** 	);
 868:lvds161.c     **** 
 869:lvds161.c     **** 	//Ignoring the Input Control registers for now...
 870:lvds161.c     **** //TODO: Look into these for syncing PSCR and PSC2
 871:lvds161.c     **** 	// PFRC0A/B, PICR0
 872:lvds161.c     **** 
 873:lvds161.c     **** 	//PIM0: Interrupt Mask Register, unused
 874:lvds161.c     **** 	//PIFR0: Interrupt Flag Register, unused
 875:lvds161.c     **** 
 876:lvds161.c     **** 
 877:lvds161.c     **** }
 343               		.stabn	68,0,877,.LM23-.LFBB2
 344               	.LM23:
 345               	/* #NOAPP */
 346 00b4 0F91      		pop r16
 347 00b6 0895      		ret
 348               		.size	lvds_timerInit, .-lvds_timerInit
 349               		.stabs	"dc_loopCounter_asdf:r(4,1)",64,0,852,16
 350               		.stabs	"dc_jumpTo_asdf:r(0,48)=*(0,47)",64,0,852,30
 351               		.stabn	192,0,0,.LFBB2-.LFBB2
 352               		.stabn	224,0,0,.Lscope2-.LFBB2
 353               	.Lscope2:
 354               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 355               		.stabd	78,0,0
 356               		.stabs	"setColor:F(0,47)",36,0,35,setColor
 357               		.stabs	"red:P(4,2)",64,0,35,24
 358               		.stabs	"green:P(4,2)",64,0,35,22
 359               		.stabs	"blue:P(4,2)",64,0,35,20
 360               		.stabs	"row:P(4,2)",64,0,36,18
 361               		.stabs	"col:P(4,2)",64,0,36,16
 362               	.global	setColor
 363               		.type	setColor, @function
 364               	setColor:
 365               		.stabd	46,0,0
 366               		.stabs	"./_options/frameBuffer.c",132,0,0,.Ltext5
 367               	.Ltext5:
   1:./_options/frameBuffer.c **** /* mehPL:
   2:./_options/frameBuffer.c ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:./_options/frameBuffer.c ****  *    I'm not too fond of long licenses at the top of the file.
   4:./_options/frameBuffer.c ****  *    Please see the bottom.
   5:./_options/frameBuffer.c ****  *    Enjoy!
   6:./_options/frameBuffer.c ****  */
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 29


   7:./_options/frameBuffer.c **** 
   8:./_options/frameBuffer.c **** 
   9:./_options/frameBuffer.c **** 
  10:./_options/frameBuffer.c **** 
  11:./_options/frameBuffer.c **** 
  12:./_options/frameBuffer.c **** 
  13:./_options/frameBuffer.c **** //Please see writeColor.c
  14:./_options/frameBuffer.c **** 
  15:./_options/frameBuffer.c **** 
  16:./_options/frameBuffer.c **** #if(defined(FB_REFRESH_ON_CHANGE) && FB_REFRESH_ON_CHANGE)
  17:./_options/frameBuffer.c **** extern volatile uint8_t updateFrame;
  18:./_options/frameBuffer.c **** #endif
  19:./_options/frameBuffer.c **** 
  20:./_options/frameBuffer.c **** //drawPix from program memory
  21:./_options/frameBuffer.c **** //a/0 v60: Again, unused for its original purpose, but tightly intertwined
  22:./_options/frameBuffer.c **** // in old code that's still being (mis)used...
  23:./_options/frameBuffer.c **** #define FB_WIDTH 16
  24:./_options/frameBuffer.c **** #define FB_HEIGHT 16
  25:./_options/frameBuffer.c **** uint8_t frameBuffer[FB_HEIGHT][FB_WIDTH];
  26:./_options/frameBuffer.c **** 
  27:./_options/frameBuffer.c **** 
  28:./_options/frameBuffer.c **** 
  29:./_options/frameBuffer.c **** //AHHH it wasn't IMAGE_BUFFER that's entangled, but IMAGE_CHANGE
  30:./_options/frameBuffer.c **** // which is even weirder.
  31:./_options/frameBuffer.c **** 
  32:./_options/frameBuffer.c **** //This was #if'd into existence with IMAGE_BUFFER, but since it's only been
  33:./_options/frameBuffer.c **** // used with frameBuffer, and since IMAGE_BUFFER is somewhat entangled with
  34:./_options/frameBuffer.c **** // newer stuff, I'm putting it here and NOT including this file, (yet)
  35:./_options/frameBuffer.c **** void setColor(uint8_t red, uint8_t green, uint8_t blue, 
  36:./_options/frameBuffer.c ****                uint8_t row, uint8_t col)
  37:./_options/frameBuffer.c **** {
 368               		.stabn	68,0,37,.LM24-.LFBB3
 369               	.LM24:
 370               	.LFBB3:
 371 00b8 0F93      		push r16
 372               	/* prologue: function */
 373               	/* frame size = 0 */
 374               	/* stack size = 1 */
 375               	.L__stack_usage = 1
  38:./_options/frameBuffer.c ****    red = (red > 3) ? 3 : red;
  39:./_options/frameBuffer.c ****    green = (green > 3) ? 3 : green;
  40:./_options/frameBuffer.c ****    blue = (blue > 3) ? 3 : blue;
  41:./_options/frameBuffer.c **** 
  42:./_options/frameBuffer.c ****    frameBuffer[row][col] = red | ((green)<<2) | ((blue)<<4);
 376               		.stabn	68,0,42,.LM25-.LFBB3
 377               	.LM25:
 378 00ba 90E1      		ldi r25,lo8(16)
 379 00bc 299F      		mul r18,r25
 380 00be F001      		movw r30,r0
 381 00c0 1124      		clr __zero_reg__
 382 00c2 E00F      		add r30,r16
 383 00c4 F11D      		adc r31,__zero_reg__
 384 00c6 E050      		subi r30,lo8(-(frameBuffer))
 385 00c8 F040      		sbci r31,hi8(-(frameBuffer))
  40:./_options/frameBuffer.c **** 
 386               		.stabn	68,0,40,.LM26-.LFBB3
 387               	.LM26:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 30


 388 00ca 4430      		cpi r20,lo8(4)
 389 00cc 00F0      		brlo .L8
 390 00ce 43E0      		ldi r20,lo8(3)
 391               	.L8:
 392               		.stabn	68,0,42,.LM27-.LFBB3
 393               	.LM27:
 394 00d0 90E1      		ldi r25,lo8(16)
 395 00d2 499F      		mul r20,r25
 396 00d4 9001      		movw r18,r0
 397 00d6 1124      		clr __zero_reg__
  38:./_options/frameBuffer.c ****    red = (red > 3) ? 3 : red;
 398               		.stabn	68,0,38,.LM28-.LFBB3
 399               	.LM28:
 400 00d8 8430      		cpi r24,lo8(4)
 401 00da 00F0      		brlo .L9
 402 00dc 83E0      		ldi r24,lo8(3)
 403               	.L9:
 404               		.stabn	68,0,42,.LM29-.LFBB3
 405               	.LM29:
 406 00de 282B      		or r18,r24
  39:./_options/frameBuffer.c ****    blue = (blue > 3) ? 3 : blue;
 407               		.stabn	68,0,39,.LM30-.LFBB3
 408               	.LM30:
 409 00e0 6430      		cpi r22,lo8(4)
 410 00e2 00F0      		brlo .L10
 411 00e4 63E0      		ldi r22,lo8(3)
 412               	.L10:
 413               		.stabn	68,0,42,.LM31-.LFBB3
 414               	.LM31:
 415 00e6 84E0      		ldi r24,lo8(4)
 416 00e8 689F      		mul r22,r24
 417 00ea B001      		movw r22,r0
 418 00ec 1124      		clr __zero_reg__
 419 00ee 622B      		or r22,r18
 420 00f0 6083      		st Z,r22
 421               	/* epilogue start */
  43:./_options/frameBuffer.c **** }
 422               		.stabn	68,0,43,.LM32-.LFBB3
 423               	.LM32:
 424 00f2 0F91      		pop r16
 425 00f4 0895      		ret
 426               		.size	setColor, .-setColor
 427               	.Lscope3:
 428               		.stabs	"",36,0,0,.Lscope3-.LFBB3
 429               		.stabd	78,0,0
 430               		.stabs	"frameBufferInit:F(0,47)",36,0,59,frameBufferInit
 431               	.global	frameBufferInit
 432               		.type	frameBufferInit, @function
 433               	frameBufferInit:
 434               		.stabd	46,0,0
  44:./_options/frameBuffer.c **** 
  45:./_options/frameBuffer.c **** 
  46:./_options/frameBuffer.c **** 
  47:./_options/frameBuffer.c **** 
  48:./_options/frameBuffer.c **** //Called as: pgm_readImageByte(pgm_image1, row, col)
  49:./_options/frameBuffer.c **** #define pgm_readImageByte(image, row, col)   \
  50:./_options/frameBuffer.c ****       pgm_read_byte((uint8_t *)(&((image)[(row)*FB_WIDTH+(col)])))
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 31


  51:./_options/frameBuffer.c **** 
  52:./_options/frameBuffer.c **** 
  53:./_options/frameBuffer.c **** 
  54:./_options/frameBuffer.c **** 
  55:./_options/frameBuffer.c **** // This stuff was located in main() before the while loop...
  56:./_options/frameBuffer.c **** // #if !COLOR_BAR_SCROLL... (which is *nearly every case* including 
  57:./_options/frameBuffer.c **** //  RowSegBuffer, etc)
  58:./_options/frameBuffer.c **** // it's long-since been commented-out...
  59:./_options/frameBuffer.c **** void frameBufferInit(void)
  60:./_options/frameBuffer.c **** {
 435               		.stabn	68,0,60,.LM33-.LFBB4
 436               	.LM33:
 437               	.LFBB4:
 438               	/* prologue: function */
 439               	/* frame size = 0 */
 440               	/* stack size = 0 */
 441               	.L__stack_usage = 0
 442 00f6 0895      		ret
 443               		.size	frameBufferInit, .-frameBufferInit
 444               	.Lscope4:
 445               		.stabs	"",36,0,0,.Lscope4-.LFBB4
 446               		.stabd	78,0,0
 447               		.stabs	"smileyUpdate:F(4,2)",36,0,205,smileyUpdate
 448               	.global	smileyUpdate
 449               		.type	smileyUpdate, @function
 450               	smileyUpdate:
 451               		.stabd	46,0,0
 452               		.stabs	"./_options/smiley.c",132,0,0,.Ltext6
 453               	.Ltext6:
   1:./_options/smiley.c **** /* mehPL:
   2:./_options/smiley.c ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:./_options/smiley.c ****  *    I'm not too fond of long licenses at the top of the file.
   4:./_options/smiley.c ****  *    Please see the bottom.
   5:./_options/smiley.c ****  *    Enjoy!
   6:./_options/smiley.c ****  */
   7:./_options/smiley.c **** 
   8:./_options/smiley.c **** 
   9:./_options/smiley.c **** 
  10:./_options/smiley.c **** 
  11:./_options/smiley.c **** 
  12:./_options/smiley.c **** 
  13:./_options/smiley.c **** //Moved Above
  14:./_options/smiley.c **** //Called as: pgm_readImageByte(pgm_image1, row, col)
  15:./_options/smiley.c **** //#define pgm_readImageByte(image, row, col)   
  16:./_options/smiley.c **** //   pgm_read_byte((uint8_t *)(&((image)[(row)*FB_WIDTH+(col)])))
  17:./_options/smiley.c **** 
  18:./_options/smiley.c **** #if( !defined(COLOR_BAR_SCROLL) || !COLOR_BAR_SCROLL)
  19:./_options/smiley.c **** #if ( (FB_WIDTH != 16) || (FB_HEIGHT != 16) )
  20:./_options/smiley.c ****  #error "image1 dimensions don't match FB_HEIGHT/WIDTH"
  21:./_options/smiley.c ****  #error "It's likely I just need to create a specific DRAWIMAGE definition and tests"
  22:./_options/smiley.c **** #endif
  23:./_options/smiley.c **** 
  24:./_options/smiley.c **** #define RED_IMAGEVAL_BIT 0
  25:./_options/smiley.c **** #define GREEN_IMAGEVAL_BIT 1
  26:./_options/smiley.c **** #define BLUE_IMAGEVAL_BIT 2
  27:./_options/smiley.c **** 
  28:./_options/smiley.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 32


  29:./_options/smiley.c **** 
  30:./_options/smiley.c **** /*
  31:./_options/smiley.c **** #define _R   0x03
  32:./_options/smiley.c **** #define _O   0x07
  33:./_options/smiley.c **** #define _G 0x0C
  34:./_options/smiley.c **** #define _B 0x30
  35:./_options/smiley.c **** #define _V 0x13
  36:./_options/smiley.c **** #define _Y   0x0F
  37:./_options/smiley.c **** #define _C 0x3C
  38:./_options/smiley.c **** #define _M   0x33
  39:./_options/smiley.c **** #define _K   0x00
  40:./_options/smiley.c **** #define _W 0x3F
  41:./_options/smiley.c **** #define _r 0x01
  42:./_options/smiley.c **** #define _g 0x04
  43:./_options/smiley.c **** #define _b 0x10
  44:./_options/smiley.c **** #define _c 0x14
  45:./_options/smiley.c **** #define _m 0x11
  46:./_options/smiley.c **** #define _y 0x05
  47:./_options/smiley.c **** #define _k 0x15
  48:./_options/smiley.c **** #define Tr 0xC0   //Transparet
  49:./_options/smiley.c **** */
  50:./_options/smiley.c **** #if (TRUE || (!defined(LIFE) || !LIFE))
  51:./_options/smiley.c **** const uint8_t pgm_image1[256] PROGMEM =
  52:./_options/smiley.c **** {
  53:./_options/smiley.c ****    Tr,Tr,Tr,Tr,Tr,_K,_K,_K,_K,_K,_K,Tr,Tr,Tr,Tr,Tr,
  54:./_options/smiley.c ****    Tr,Tr,Tr,_K,_K,_Y,_Y,_Y,_Y,_Y,_Y,_K,_K,Tr,Tr,Tr,
  55:./_options/smiley.c ****    Tr,Tr,_K,_K,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_K,_K,Tr,Tr,
  56:./_options/smiley.c ****    Tr,_K,_K,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_K,_K,Tr,
  57:./_options/smiley.c ****    Tr,_K,_Y,_Y,_Y,_K,_Y,_Y,_Y,_Y,_K,_Y,_Y,_Y,_K,Tr,
  58:./_options/smiley.c ****    _K,_Y,_Y,_Y,_K,_K,_K,_Y,_Y,_K,_K,_K,_Y,_Y,_Y,_K,
  59:./_options/smiley.c ****    _K,_Y,_Y,_Y,_Y,_K,_Y,_Y,_Y,_Y,_K,_Y,_Y,_Y,_Y,_K,
  60:./_options/smiley.c ****    _K,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_K,
  61:./_options/smiley.c ****    _K,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_K,
  62:./_options/smiley.c ****    _K,_Y,_Y,_K,_K,_Y,_Y,_Y,_Y,_Y,_Y,_K,_K,_Y,_Y,_K,
  63:./_options/smiley.c ****    _K,_Y,_Y,_Y,_K,_K,_Y,_Y,_Y,_Y,_K,_K,_Y,_Y,_Y,_K,
  64:./_options/smiley.c ****    Tr,_K,_Y,_Y,_Y,_K,_K,_K,_K,_K,_K,_Y,_Y,_Y,_K,Tr,
  65:./_options/smiley.c ****    Tr,_K,_K,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_K,_K,Tr,
  66:./_options/smiley.c ****    Tr,Tr,_K,_K,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_K,_K,Tr,Tr,
  67:./_options/smiley.c ****    Tr,Tr,Tr,_K,_K,_Y,_Y,_Y,_Y,_Y,_Y,_K,_K,Tr,Tr,Tr,
  68:./_options/smiley.c ****    Tr,Tr,Tr,Tr,Tr,_K,_K,_K,_K,_K,_K,Tr,Tr,Tr,Tr,Tr
  69:./_options/smiley.c **** };
  70:./_options/smiley.c **** #else
  71:./_options/smiley.c **** /*uint8_t pgm_image1[256] PROGMEM =
  72:./_options/smiley.c **** {  
  73:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  74:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  75:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  76:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  77:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  78:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  79:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  80:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  81:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  82:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  83:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  84:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  85:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 33


  86:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  87:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
  88:./_options/smiley.c ****    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
  89:./_options/smiley.c **** };
  90:./_options/smiley.c **** */
  91:./_options/smiley.c **** /*
  92:./_options/smiley.c **** {  
  93:./_options/smiley.c ****    _K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,
  94:./_options/smiley.c ****    _K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,
  95:./_options/smiley.c ****    _K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,
  96:./_options/smiley.c ****    _K,_K,_K,_K,_K,_R,_R,_R,_K,_K,_K,_K,_K,_K,_K,_K,
  97:./_options/smiley.c ****    _K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,
  98:./_options/smiley.c ****    _K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,
  99:./_options/smiley.c ****    _K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_R,_R,_K,_K,_K,
 100:./_options/smiley.c ****    _K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_R,_R,_K,_K,_K,
 101:./_options/smiley.c ****    _K,_K,_K,_K,_R,_R,_R,_K,_K,_K,_K,_K,_K,_K,_K,_K,
 102:./_options/smiley.c ****    _K,_K,_K,_K,_K,_R,_R,_R,_K,_K,_K,_K,_K,_K,_K,_K,
 103:./_options/smiley.c ****    _K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_R,_R,_R,_K,_K,
 104:./_options/smiley.c ****    _K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_R,_K,_K,_K,_K,
 105:./_options/smiley.c ****    _K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_R,_K,_K,_K,
 106:./_options/smiley.c ****    _K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,
 107:./_options/smiley.c ****    _K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,
 108:./_options/smiley.c ****    _K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K,_K
 109:./_options/smiley.c **** };
 110:./_options/smiley.c **** */
 111:./_options/smiley.c **** 
 112:./_options/smiley.c **** 
 113:./_options/smiley.c **** 
 114:./_options/smiley.c **** #endif
 115:./_options/smiley.c **** 
 116:./_options/smiley.c **** 
 117:./_options/smiley.c **** const uint8_t pgm_image2[256] PROGMEM =
 118:./_options/smiley.c **** {
 119:./_options/smiley.c ****    Tr,Tr,Tr,Tr,Tr,_K,_K,_K,_K,_K,_K,Tr,Tr,Tr,Tr,Tr,
 120:./_options/smiley.c ****    Tr,Tr,Tr,_K,_K,_Y,_Y,_Y,_Y,_Y,_Y,_K,_K,Tr,Tr,Tr,
 121:./_options/smiley.c ****    Tr,Tr,_K,_K,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_K,_K,Tr,Tr,
 122:./_options/smiley.c ****    Tr,_K,_K,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_K,_K,Tr,
 123:./_options/smiley.c ****    Tr,_K,_Y,_Y,_Y,_K,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_K,Tr,
 124:./_options/smiley.c ****    _K,_Y,_Y,_Y,_K,_K,_K,_Y,_Y,_K,_Y,_Y,_Y,_Y,_Y,_K,
 125:./_options/smiley.c ****    _K,_Y,_Y,_Y,_Y,_K,_Y,_Y,_Y,_Y,_K,_K,_Y,_Y,_Y,_K,
 126:./_options/smiley.c ****    _K,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_K,
 127:./_options/smiley.c ****    _K,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_Y,_K,
 128:./_options/smiley.c ****    _K,_Y,_Y,_K,_K,_Y,_Y,_Y,_Y,_Y,_Y,_K,_K,_Y,_Y,_K,
 129:./_options/smiley.c ****    _K,_Y,_Y,_Y,_K,_K,_Y,_Y,_Y,_Y,_K,_K,_Y,_Y,_Y,_K,
 130:./_options/smiley.c ****    Tr,_K,_Y,_Y,_Y,_K,_K,_K,_K,_K,_K,_Y,_Y,_Y,_K,Tr,
 131:./_options/smiley.c ****    Tr,_K,_K,_Y,_Y,_Y,_K,_R,_K,_R,_K,_Y,_Y,_K,_K,Tr,
 132:./_options/smiley.c ****    Tr,Tr,_K,_K,_Y,_Y,_K,_R,_R,_R,_K,_Y,_K,_K,Tr,Tr,
 133:./_options/smiley.c ****    Tr,Tr,Tr,_K,_K,_Y,_Y,_K,_K,_K,_Y,_K,_K,Tr,Tr,Tr,
 134:./_options/smiley.c ****    Tr,Tr,Tr,Tr,Tr,_K,_K,_K,_K,_K,_K,Tr,Tr,Tr,Tr,Tr
 135:./_options/smiley.c **** };
 136:./_options/smiley.c **** #endif //COLOR_BAR_SCROLL
 137:./_options/smiley.c **** 
 138:./_options/smiley.c **** /*
 139:./_options/smiley.c **** #if (IMAGE_WIDTH == 21)
 140:./_options/smiley.c **** uint8_t mainData[2][768>>5][IMAGE_WIDTH] =
 141:./_options/smiley.c **** {
 142:./_options/smiley.c ****    {
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 34


 143:./_options/smiley.c ****    {6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4},
 144:./_options/smiley.c ****    {5,4,3,2,1,6,0,0,0,0,0,0,0,0,0,2,1,6,5,4,3},
 145:./_options/smiley.c ****    {4,3,2,1,0,0,0,3,3,3,3,3,3,3,0,0,0,5,4,3,4},
 146:./_options/smiley.c ****    {3,2,1,0,0,3,3,3,3,3,3,3,3,3,3,3,0,0,3,2,1},
 147:./_options/smiley.c ****    {2,1,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,1,6},
 148:./_options/smiley.c ****    {1,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,5},
 149:./_options/smiley.c ****    {6,0,3,3,3,3,3,0,3,3,3,3,0,3,3,3,3,3,3,0,4},
 150:./_options/smiley.c ****    {0,0,3,3,3,3,0,0,0,3,3,0,0,0,3,3,3,3,3,0,0},
 151:./_options/smiley.c ****    {0,3,3,3,3,3,0,0,0,3,3,0,0,0,3,3,3,3,3,3,0},
 152:./_options/smiley.c ****    {0,3,3,3,3,3,3,0,3,3,3,3,0,3,3,3,3,3,3,3,0},
 153:./_options/smiley.c ****    {0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0},
 154:./_options/smiley.c ****    {0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0},
 155:./_options/smiley.c ****    {0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0},
 156:./_options/smiley.c ****    {0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0},
 157:./_options/smiley.c ****    {0,3,3,3,3,0,0,3,3,3,3,3,3,3,0,0,3,3,3,3,0},
 158:./_options/smiley.c ****    {0,0,3,3,3,3,0,0,3,3,3,3,3,0,0,3,3,3,3,0,0},
 159:./_options/smiley.c ****    {6,0,3,3,3,3,3,0,0,0,0,0,0,0,3,3,3,3,3,0,4},
 160:./_options/smiley.c ****    {5,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3},
 161:./_options/smiley.c ****    {4,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,2},
 162:./_options/smiley.c ****    {3,2,6,0,0,3,3,3,3,3,3,3,3,3,3,3,0,0,3,2,1},
 163:./_options/smiley.c ****    {2,1,5,5,0,0,0,3,3,3,3,3,3,3,0,0,0,3,2,1,6},
 164:./_options/smiley.c ****    {1,6,3,4,3,2,0,0,0,0,0,0,0,0,0,4,3,2,1,6,5},
 165:./_options/smiley.c ****    {6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4},
 166:./_options/smiley.c ****    {5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3}
 167:./_options/smiley.c ****    },
 168:./_options/smiley.c ****    {   
 169:./_options/smiley.c ****    {5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3},
 170:./_options/smiley.c ****    {4,3,2,1,6,5,0,0,0,0,0,0,0,0,0,1,6,5,4,3,2},
 171:./_options/smiley.c ****    {3,2,1,6,0,0,0,3,3,3,3,3,3,3,0,0,0,4,3,2,1},
 172:./_options/smiley.c ****    {2,1,6,0,0,3,3,3,3,3,3,3,3,3,3,3,0,0,2,1,6},
 173:./_options/smiley.c ****    {1,6,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,6,5},
 174:./_options/smiley.c ****    {6,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,4},
 175:./_options/smiley.c ****    {5,0,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,3,3,0,3},
 176:./_options/smiley.c ****    {0,0,3,3,3,3,0,0,0,3,3,0,3,3,3,3,3,3,3,0,0},
 177:./_options/smiley.c ****    {0,3,3,3,3,3,0,0,0,3,3,3,0,0,0,3,3,3,3,3,0},
 178:./_options/smiley.c ****    {0,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,3,3,3,0},
 179:./_options/smiley.c ****    {0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0},
 180:./_options/smiley.c ****    {0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0},
 181:./_options/smiley.c ****    {0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0},
 182:./_options/smiley.c ****    {0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0},
 183:./_options/smiley.c ****    {0,3,3,3,3,0,0,3,3,3,3,3,3,3,0,0,3,3,3,3,0},
 184:./_options/smiley.c ****    {0,0,3,3,3,3,0,0,3,3,3,3,3,0,0,3,3,3,3,0,0},
 185:./_options/smiley.c ****    {5,0,3,3,3,3,3,0,0,0,0,0,0,0,3,3,3,3,3,0,3},
 186:./_options/smiley.c ****    {4,0,0,3,3,3,3,3,3,0,1,0,1,0,3,3,3,3,0,0,2},
 187:./_options/smiley.c ****    {3,2,0,0,3,3,3,3,3,0,1,1,1,0,3,3,3,0,0,2,1},
 188:./_options/smiley.c ****    {2,1,6,0,0,3,3,3,3,3,0,0,0,3,3,3,0,0,2,1,6},
 189:./_options/smiley.c ****    {1,6,5,4,0,0,0,3,3,3,3,3,3,3,0,0,0,2,1,6,5},
 190:./_options/smiley.c ****    {6,5,4,3,2,1,0,0,0,0,0,0,0,0,0,3,2,1,6,5,4},
 191:./_options/smiley.c ****    {5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3},
 192:./_options/smiley.c ****    {4,3,2,1,6,5,4,3,2,1,6,5,4,3,2,1,6,5,4,3,2}
 193:./_options/smiley.c ****    }
 194:./_options/smiley.c **** };
 195:./_options/smiley.c **** #else
 196:./_options/smiley.c ****    #error
 197:./_options/smiley.c **** #endif
 198:./_options/smiley.c **** */
 199:./_options/smiley.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 35


 200:./_options/smiley.c **** 
 201:./_options/smiley.c **** //Call this often, and the framebuffer will alternate between two
 202:./_options/smiley.c **** //smiley-faces. Also, it places a gradient in the background, which scrolls
 203:./_options/smiley.c **** //over time.
 204:./_options/smiley.c **** //Returns TRUE if there's a change to the frameBuffer image
 205:./_options/smiley.c **** uint8_t smileyUpdate(void)
 206:./_options/smiley.c **** {
 454               		.stabn	68,0,206,.LM34-.LFBB5
 455               	.LM34:
 456               	.LFBB5:
 457               		.stabn	68,0,206,.LM35-.LFBB5
 458               	.LM35:
 459 00f8 CF93      		push r28
 460 00fa DF93      		push r29
 461               	/* prologue: function */
 462               	/* frame size = 0 */
 463               	/* stack size = 2 */
 464               	.L__stack_usage = 2
 207:./_options/smiley.c ****    uint8_t imageChanged = FALSE;
 208:./_options/smiley.c **** 
 209:./_options/smiley.c ****    //Here's where it alternated pimage to point to alternate images
 210:./_options/smiley.c ****    //This code worked alongside rowBuffer, via fb_to_rb, I guess
 211:./_options/smiley.c ****    // since tetUpdate, and hexColor, etc. were displayed alongside
 212:./_options/smiley.c ****    // at one point...
 213:./_options/smiley.c ****    // Far too convoluted to piece together in my mind anymore
 214:./_options/smiley.c **** 
 215:./_options/smiley.c ****   #if 0
 216:./_options/smiley.c ****    tetUpdate();
 217:./_options/smiley.c ****   #endif
 218:./_options/smiley.c **** 
 219:./_options/smiley.c ****    static const uint8_t *pimage = pgm_image1;
 220:./_options/smiley.c ****    static uint8_t imageNum = 0;
 221:./_options/smiley.c ****    static uint16_t updateCount = 0;
 222:./_options/smiley.c ****    static uint8_t colorShift = 0;
 223:./_options/smiley.c **** 
 224:./_options/smiley.c ****    //colorShift++;
 225:./_options/smiley.c **** 
 226:./_options/smiley.c ****    updateCount++;
 465               		.stabn	68,0,226,.LM36-.LFBB5
 466               	.LM36:
 467 00fc 8091 0000 		lds r24,updateCount.2143
 468 0100 9091 0000 		lds r25,updateCount.2143+1
 469 0104 0196      		adiw r24,1
 470 0106 9093 0000 		sts updateCount.2143+1,r25
 471 010a 8093 0000 		sts updateCount.2143,r24
 227:./_options/smiley.c **** 
 228:./_options/smiley.c ****    if(updateCount % 32 == 0)
 472               		.stabn	68,0,228,.LM37-.LFBB5
 473               	.LM37:
 474 010e 9C01      		movw r18,r24
 475 0110 2F71      		andi r18,31
 476 0112 3327      		clr r19
 477 0114 232B      		or r18,r19
 478 0116 01F4      		brne .L13
 229:./_options/smiley.c ****       colorShift++;
 479               		.stabn	68,0,229,.LM38-.LFBB5
 480               	.LM38:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 36


 481 0118 2091 0000 		lds r18,colorShift.2144
 482 011c 2F5F      		subi r18,lo8(-(1))
 483 011e 2093 0000 		sts colorShift.2144,r18
 484               	.L13:
 230:./_options/smiley.c **** 
 231:./_options/smiley.c ****    if(updateCount == 64) //1000)
 485               		.stabn	68,0,231,.LM39-.LFBB5
 486               	.LM39:
 487 0122 8034      		cpi r24,64
 488 0124 9105      		cpc r25,__zero_reg__
 489 0126 01F4      		brne .L14
 232:./_options/smiley.c ****    {
 233:./_options/smiley.c ****       updateCount = 0;
 490               		.stabn	68,0,233,.LM40-.LFBB5
 491               	.LM40:
 492 0128 1092 0000 		sts updateCount.2143+1,__zero_reg__
 493 012c 1092 0000 		sts updateCount.2143,__zero_reg__
 234:./_options/smiley.c **** 
 235:./_options/smiley.c ****       if(imageNum == 0)
 494               		.stabn	68,0,235,.LM41-.LFBB5
 495               	.LM41:
 496 0130 8091 0000 		lds r24,imageNum.2142
 497 0134 8111      		cpse r24,__zero_reg__
 498 0136 00C0      		rjmp .L15
 236:./_options/smiley.c ****       {
 237:./_options/smiley.c ****          imageNum = 1;
 499               		.stabn	68,0,237,.LM42-.LFBB5
 500               	.LM42:
 501 0138 81E0      		ldi r24,lo8(1)
 502 013a 8093 0000 		sts imageNum.2142,r24
 238:./_options/smiley.c ****          pimage = pgm_image1;
 503               		.stabn	68,0,238,.LM43-.LFBB5
 504               	.LM43:
 505 013e 80E0      		ldi r24,lo8(pgm_image1)
 506 0140 90E0      		ldi r25,hi8(pgm_image1)
 507               	.L22:
 508 0142 9093 0000 		sts pimage.2141+1,r25
 509 0146 8093 0000 		sts pimage.2141,r24
 510               	.L14:
 511               	.LBB116:
 239:./_options/smiley.c ****          //   tetColorScheme = 1;
 240:./_options/smiley.c ****       }
 241:./_options/smiley.c ****       else
 242:./_options/smiley.c ****       {
 243:./_options/smiley.c ****          //   hexColor++;
 244:./_options/smiley.c ****          //   hexColor&=0x3f;
 245:./_options/smiley.c ****          imageNum = 0;
 246:./_options/smiley.c ****          pimage = pgm_image2;
 247:./_options/smiley.c ****          //   tetColorScheme = 0;
 248:./_options/smiley.c ****       }
 249:./_options/smiley.c ****    }
 250:./_options/smiley.c **** 
 251:./_options/smiley.c ****    uint8_t row, col; //, colorShift=0;
 252:./_options/smiley.c **** 
 253:./_options/smiley.c ****    for(row=0; row<FB_HEIGHT; row++)
 254:./_options/smiley.c ****       for(col=0; col<FB_WIDTH; col++)
 255:./_options/smiley.c ****       {
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 37


 256:./_options/smiley.c ****          uint8_t imagePixel=pgm_readImageByte(pimage, row, col);
 257:./_options/smiley.c **** 
 258:./_options/smiley.c ****    
 259:./_options/smiley.c ****          if(imagePixel == Tr)
 260:./_options/smiley.c ****             frameBufferChange(&imageChanged, row, col,
 512               		.stabn	68,0,260,.LM44-.LFBB5
 513               	.LM44:
 514 014a D091 0000 		lds r29,colorShift.2144
 515 014e 60E0      		ldi r22,lo8(frameBuffer)
 516 0150 70E0      		ldi r23,hi8(frameBuffer)
 517 0152 4091 0000 		lds r20,pimage.2141
 518 0156 5091 0000 		lds r21,pimage.2141+1
 519 015a 90E0      		ldi r25,0
 520 015c 80E0      		ldi r24,0
 521 015e 00C0      		rjmp .L16
 522               	.L15:
 523               	.LBE116:
 245:./_options/smiley.c ****          pimage = pgm_image2;
 524               		.stabn	68,0,245,.LM45-.LFBB5
 525               	.LM45:
 526 0160 1092 0000 		sts imageNum.2142,__zero_reg__
 246:./_options/smiley.c ****          //   tetColorScheme = 0;
 527               		.stabn	68,0,246,.LM46-.LFBB5
 528               	.LM46:
 529 0164 80E0      		ldi r24,lo8(pgm_image2)
 530 0166 90E0      		ldi r25,hi8(pgm_image2)
 531 0168 00C0      		rjmp .L22
 532               	.L16:
 533 016a C92F      		mov r28,r25
 534 016c CD0F      		add r28,r29
 206:./_options/smiley.c ****    uint8_t imageChanged = FALSE;
 535               		.stabn	68,0,206,.LM47-.LFBB5
 536               	.LM47:
 537 016e 20E0      		ldi r18,0
 538 0170 30E0      		ldi r19,0
 539               	.L21:
 540 0172 F901      		movw r30,r18
 541 0174 E40F      		add r30,r20
 542 0176 F51F      		adc r31,r21
 543               	.LBB120:
 544               	.LBB117:
 256:./_options/smiley.c **** 
 545               		.stabn	68,0,256,.LM48-.LFBB5
 546               	.LM48:
 547               	/* #APP */
 548               	 ;  256 "./_options/smiley.c" 1
 549 0178 E491      		lpm r30, Z
 550               		
 551               	 ;  0 "" 2
 552               	/* #NOAPP */
 553 017a DB01      		movw r26,r22
 554 017c A20F      		add r26,r18
 555 017e B31F      		adc r27,r19
 556               	.LBE117:
 259:./_options/smiley.c ****             frameBufferChange(&imageChanged, row, col,
 557               		.stabn	68,0,259,.LM49-.LFBB5
 558               	.LM49:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 38


 559 0180 E03C      		cpi r30,lo8(-64)
 560 0182 01F4      		brne .L17
 561 0184 EC2F      		mov r30,r28
 562 0186 E20F      		add r30,r18
 563               	.L17:
 564               	.LBB118:
 565               	.LBB119:
 566               		.stabs	"./_options/frameBuffer.c",132,0,0,.Ltext7
 567               	.Ltext7:
  61:./_options/frameBuffer.c **** 	 //uint8_t frameBuffer[16][16];
  62:./_options/frameBuffer.c **** /*   for(r=0; r<FB_HEIGHT; r++)
  63:./_options/frameBuffer.c ****    {
  64:./_options/frameBuffer.c ****       for(c=0; c<FB_WIDTH; c++)
  65:./_options/frameBuffer.c ****       {
  66:./_options/frameBuffer.c ****          uint8_t imagePixel=pgm_readImageByte(pgm_image1, r, c);
  67:./_options/frameBuffer.c **** 
  68:./_options/frameBuffer.c ****          setColor(
  69:./_options/frameBuffer.c ****             (getbit(RED_IMAGEVAL_BIT, imagePixel) ? 0x03 : 0),
  70:./_options/frameBuffer.c ****             (getbit(GREEN_IMAGEVAL_BIT, imagePixel) ? 0x0C : 0),
  71:./_options/frameBuffer.c ****             (getbit(BLUE_IMAGEVAL_BIT, imagePixel) ? 0x30 : 0),
  72:./_options/frameBuffer.c ****             r, c);
  73:./_options/frameBuffer.c **** //         setBlue(
  74:./_options/frameBuffer.c **** //               (
  75:./_options/frameBuffer.c **** //   (getbit(BLUE_IMAGEVAL_BIT, imagePixel) ? (60<<2) : 0) |
  76:./_options/frameBuffer.c **** //   (getbit(GREEN_IMAGEVAL_BIT, imagePixel) ? (1<<GREEN_BLUEVAL_BIT) : 0) |
  77:./_options/frameBuffer.c **** //   (getbit(RED_IMAGEVAL_BIT, imagePixel) ? (1<<RED_BLUEVAL_BIT) : 0)
  78:./_options/frameBuffer.c **** //               ), r, c);
  79:./_options/frameBuffer.c ****       }
  80:./_options/frameBuffer.c ****    }
  81:./_options/frameBuffer.c **** */
  82:./_options/frameBuffer.c **** 
  83:./_options/frameBuffer.c **** }
  84:./_options/frameBuffer.c **** 
  85:./_options/frameBuffer.c **** 
  86:./_options/frameBuffer.c **** //#include "_options/smiley.c"
  87:./_options/frameBuffer.c **** 
  88:./_options/frameBuffer.c **** 
  89:./_options/frameBuffer.c **** static __inline__
  90:./_options/frameBuffer.c **** void frameBufferChange(uint8_t *bufferChanged, 
  91:./_options/frameBuffer.c **** 							uint8_t row, uint8_t col, uint8_t color)
  92:./_options/frameBuffer.c **** 	__attribute__((__always_inline__));
  93:./_options/frameBuffer.c **** 
  94:./_options/frameBuffer.c **** 
  95:./_options/frameBuffer.c **** //This isn't especially necessary to write to the frameBuffer
  96:./_options/frameBuffer.c **** // ...since it's global, it could be done directly
  97:./_options/frameBuffer.c **** // but this allows for testing whether a change occurs
  98:./_options/frameBuffer.c **** // in case it's desired to only refresh when that happens.
  99:./_options/frameBuffer.c **** //Since it's always-inline, it should optimize-out a few things, e.g. the
 100:./_options/frameBuffer.c **** //NULL-test, and even the write to bufferChanged, if it is null.
 101:./_options/frameBuffer.c **** // so it should be pretty quick.
 102:./_options/frameBuffer.c **** // It does NOT have a return-value, instead it only modifies bufferChanged
 103:./_options/frameBuffer.c **** // IF there is a change, so e.g. it could be run in a for-loop
 104:./_options/frameBuffer.c **** // and the end-value of bufferChanged will either be FALSE if no change, or
 105:./_options/frameBuffer.c **** // TRUE if there was a change in any of the loops.
 106:./_options/frameBuffer.c **** void frameBufferChange(uint8_t *bufferChanged, 
 107:./_options/frameBuffer.c **** 							uint8_t row, uint8_t col, uint8_t color)
 108:./_options/frameBuffer.c **** {
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 39


 109:./_options/frameBuffer.c **** 	if(frameBuffer[(row)][(col)] != (color))
 568               		.stabn	68,0,109,.LM50-.LFBB5
 569               	.LM50:
 570 0188 FC91      		ld r31,X
 571 018a FE17      		cp r31,r30
 572 018c 01F0      		breq .L18
 110:./_options/frameBuffer.c **** 	{
 111:./_options/frameBuffer.c **** 		frameBuffer[(row)][(col)] = (color);
 573               		.stabn	68,0,111,.LM51-.LFBB5
 574               	.LM51:
 575 018e EC93      		st X,r30
 112:./_options/frameBuffer.c **** 		
 113:./_options/frameBuffer.c **** 		if(bufferChanged != NULL)
 114:./_options/frameBuffer.c **** 			*bufferChanged = TRUE;
 576               		.stabn	68,0,114,.LM52-.LFBB5
 577               	.LM52:
 578 0190 81E0      		ldi r24,lo8(1)
 579               	.L18:
 580 0192 2F5F      		subi r18,-1
 581 0194 3F4F      		sbci r19,-1
 582               	.LBE119:
 583               	.LBE118:
 584               	.LBE120:
 585               		.stabs	"./_options/smiley.c",132,0,0,.Ltext8
 586               	.Ltext8:
 254:./_options/smiley.c ****       {
 587               		.stabn	68,0,254,.LM53-.LFBB5
 588               	.LM53:
 589 0196 2031      		cpi r18,16
 590 0198 3105      		cpc r19,__zero_reg__
 591 019a 01F4      		brne .L21
 253:./_options/smiley.c ****       for(col=0; col<FB_WIDTH; col++)
 592               		.stabn	68,0,253,.LM54-.LFBB5
 593               	.LM54:
 594 019c 9F5F      		subi r25,lo8(-(1))
 595 019e 605F      		subi r22,-16
 596 01a0 7F4F      		sbci r23,-1
 597 01a2 405F      		subi r20,-16
 598 01a4 5F4F      		sbci r21,-1
 599 01a6 9031      		cpi r25,lo8(16)
 600 01a8 01F4      		brne .L16
 601               	/* epilogue start */
 261:./_options/smiley.c ****                                           colorShift+row+col);
 262:./_options/smiley.c ****          else
 263:./_options/smiley.c ****             frameBufferChange(&imageChanged, row, col, imagePixel);
 264:./_options/smiley.c ****       }  
 265:./_options/smiley.c **** 
 266:./_options/smiley.c **** 	return imageChanged;
 267:./_options/smiley.c **** }
 602               		.stabn	68,0,267,.LM55-.LFBB5
 603               	.LM55:
 604 01aa DF91      		pop r29
 605 01ac CF91      		pop r28
 606 01ae 0895      		ret
 607               		.size	smileyUpdate, .-smileyUpdate
 608               		.stabs	"imageChanged:r(4,2)",64,0,207,24
 609               		.stabs	"pimage:V(0,49)=*(0,50)=k(4,2)",38,0,219,pimage.2141
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 40


 610               		.stabs	"imageNum:V(4,2)",38,0,220,imageNum.2142
 611               		.stabs	"updateCount:V(4,4)",38,0,221,updateCount.2143
 612               		.stabs	"colorShift:V(4,2)",38,0,222,colorShift.2144
 613               		.stabs	"row:r(4,2)",64,0,251,25
 614               		.stabn	192,0,0,.LFBB5-.LFBB5
 615               		.stabn	224,0,0,.Lscope5-.LFBB5
 616               	.Lscope5:
 617               		.stabs	"",36,0,0,.Lscope5-.LFBB5
 618               		.stabd	78,0,0
 619               		.stabs	"nonRSB_drawPix:F(0,47)",36,0,329,nonRSB_drawPix
 620               		.stabs	"rowNum:P(4,4)",64,0,329,24
 621               	.global	nonRSB_drawPix
 622               		.type	nonRSB_drawPix, @function
 623               	nonRSB_drawPix:
 624               		.stabd	46,0,0
 625               		.stabs	"_options/writeColor.c",132,0,0,.Ltext9
 626               	.Ltext9:
   1:_options/writeColor.c **** /* mehPL:
   2:_options/writeColor.c ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:_options/writeColor.c ****  *    I'm not too fond of long licenses at the top of the file.
   4:_options/writeColor.c ****  *    Please see the bottom.
   5:_options/writeColor.c ****  *    Enjoy!
   6:_options/writeColor.c ****  */
   7:_options/writeColor.c **** 
   8:_options/writeColor.c **** 
   9:_options/writeColor.c **** 
  10:_options/writeColor.c **** 
  11:_options/writeColor.c **** 
  12:_options/writeColor.c **** 
  13:_options/writeColor.c **** //writeColor() is a hokey method to draw individual pixels from a buffer,
  14:_options/writeColor.c **** //either a row-buffer or a frame-buffer.
  15:_options/writeColor.c **** // I say "hokey" because the associated drawPix() function has individual
  16:_options/writeColor.c **** // calls to writeColor(), rather than putting them in a for-loop... in
  17:_options/writeColor.c **** // order to save instruction-cycles, and increase resolution...
  18:_options/writeColor.c **** 
  19:_options/writeColor.c **** //As-Implemented
  20:_options/writeColor.c **** //Frame-Buffer:
  21:_options/writeColor.c **** // The pixels' color-data are stored in this buffer, two bits each R,G,B.
  22:_options/writeColor.c **** // Thus, it's easy to write a color-value, but all processing to convert
  23:_options/writeColor.c **** // that color-value into register-settings is done *during* the drawing...
  24:_options/writeColor.c **** // So, it's pretty slow to process each "pixel", and thus each pixel in the
  25:_options/writeColor.c **** // buffer is stretched horizontally across *several* physical LCD pixels
  26:_options/writeColor.c **** //Row-Buffer:
  27:_options/writeColor.c **** // This should be called "Row-Settings-Buffer" or something similar...
  28:_options/writeColor.c **** // The pixels' color-data is stored as packed register-values to be written
  29:_options/writeColor.c **** // at the time of drawing. The buffer itself does *not* consist of raw
  30:_options/writeColor.c **** // color-values, so it is a bit more difficult to explain.
  31:_options/writeColor.c **** // It still takes several instructions to load the registers for each
  32:_options/writeColor.c **** // color, so it still stretches each "pixel" across several LCD pixels.
  33:_options/writeColor.c **** // But it's significantly faster, so the horizontal resolution is higher.
  34:_options/writeColor.c **** 
  35:_options/writeColor.c **** 
  36:_options/writeColor.c **** //For Red and Green (NOT Blue) This enables four shades, instead of three
  37:_options/writeColor.c **** // (including black)
  38:_options/writeColor.c **** // Doing so increases pixel-processing time, thus the pixel-widths
  39:_options/writeColor.c **** // (thus decreasing resolution)
  40:_options/writeColor.c **** // each color takes 9 cycles to process in three-shade mode
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 41


  41:_options/writeColor.c **** // or 12 cycles for red and green, plus 9 for blue in four-shade mode
  42:_options/writeColor.c **** // a/o v59: I don't think this does anything in ROW_SEG_BUFFER
  43:_options/writeColor.c **** #define FOUR_SHADES TRUE
  44:_options/writeColor.c **** 
  45:_options/writeColor.c **** #if(defined(FOUR_SHADES) && FOUR_SHADES)
  46:_options/writeColor.c ****  //a/o v60
  47:_options/writeColor.c ****  //I can't find this anywhere else... Might not be looking hard enough
  48:_options/writeColor.c ****  #define	NUM_COLORS	(4*4*3) //48
  49:_options/writeColor.c **** #else
  50:_options/writeColor.c ****  #define NUM_COLORS (3*3*3) //27
  51:_options/writeColor.c **** #endif
  52:_options/writeColor.c **** 
  53:_options/writeColor.c **** 
  54:_options/writeColor.c **** 
  55:_options/writeColor.c **** #if(!defined(ROW_BUFFER) || !ROW_BUFFER)
  56:_options/writeColor.c **** #include "_options/frameBuffer.c"
  57:_options/writeColor.c **** #endif
  58:_options/writeColor.c **** 
  59:_options/writeColor.c **** 
  60:_options/writeColor.c **** 
  61:_options/writeColor.c **** 
  62:_options/writeColor.c **** // LVDS/FPD-Link timing:
  63:_options/writeColor.c **** 
  64:_options/writeColor.c **** //            |<--- (LCDdirectLVDS: "pixel") --->|
  65:_options/writeColor.c **** //  Timer1:   |<-- One Timer1 Cycle (OCR1C=6) -->|
  66:_options/writeColor.c **** //  TCNT:     |  0   1    2    3    4    5    6  |  0   1    2    3    
  67:_options/writeColor.c **** //            |____.____.____.____               |____.____.____.____
  68:_options/writeColor.c **** //  RXclk+:   /         |         \    .    .    /         |         \ //
  69:_options/writeColor.c **** //            |         |          ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|         |
  70:_options/writeColor.c **** // One Pixel: |         |<--- One FPD-Link Pixel Cycle --->|
  71:_options/writeColor.c **** //            |                                  |
  72:_options/writeColor.c **** // "Blue/DVH" |____ ____v____ ____ ____v____ ____|____ ____
  73:_options/writeColor.c **** //  RXin2:    X B3 X B2 X DE X /V X /H X B5 X B4 X B3 X B2 X ...
  74:_options/writeColor.c **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯
  75:_options/writeColor.c **** //            |         |<--Not Blue-->|         |
  76:_options/writeColor.c **** //            |                                  |
  77:_options/writeColor.c **** // "Green"    |____ ____v____ ____v____ ____ ____|____ ____
  78:_options/writeColor.c **** //  RXin1:    X G2 X G1 X B1 X B0 X G5 X G4 X G3 X G2 X G1 X ...
  79:_options/writeColor.c **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯ 
  80:_options/writeColor.c **** //            |         |<------->|-Not Green    |
  81:_options/writeColor.c **** //
  82:_options/writeColor.c **** // "Red"      |____ ____v____v____ ____ ____ ____|____ ____
  83:_options/writeColor.c **** //  RXin0:    X R1 X R0 X G0 X R5 X R4 X R3 X R2 X R1 X R0 X ...
  84:_options/writeColor.c **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯
  85:_options/writeColor.c **** //            |         |<-->|-Not Red
  86:_options/writeColor.c **** //
  87:_options/writeColor.c **** //   Of course: The Not Green/Red bits above are low-bits and
  88:_options/writeColor.c **** //              basically have little/no visible effect
  89:_options/writeColor.c **** //
  90:_options/writeColor.c **** //
  91:_options/writeColor.c **** 
  92:_options/writeColor.c **** 
  93:_options/writeColor.c **** 
  94:_options/writeColor.c **** 
  95:_options/writeColor.c **** //#if(!defined(ROW_SEG_BUFFER) || !ROW_SEG_BUFFER)
  96:_options/writeColor.c **** 
  97:_options/writeColor.c **** #if(defined(__AVR_AT90PWM161__))
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 42


  98:_options/writeColor.c ****  #define WRITE_COLOR_CYCS 56
  99:_options/writeColor.c ****  //This value determined from .lss
 100:_options/writeColor.c ****  // probably not 100% accurate.
 101:_options/writeColor.c ****  //And kinda surprising it's so much more than the others...
 102:_options/writeColor.c **** #else
 103:_options/writeColor.c ****  #if(defined(ROW_BUFFER) && ROW_BUFFER)
 104:_options/writeColor.c ****  //THIS IS JUST AN ESTIMATE
 105:_options/writeColor.c ****   #define WRITE_COLOR_CYCS   (13)
 106:_options/writeColor.c ****  #elif(defined(FOUR_SHADES) && FOUR_SHADES)
 107:_options/writeColor.c ****   // Roughly...
 108:_options/writeColor.c ****   #define WRITE_COLOR_CYCS   (12*2+9+3)
 109:_options/writeColor.c ****  #else
 110:_options/writeColor.c ****   // Roughly...
 111:_options/writeColor.c ****   #define WRITE_COLOR_CYCS   (9*3+3)
 112:_options/writeColor.c ****  #endif
 113:_options/writeColor.c **** #endif
 114:_options/writeColor.c **** 
 115:_options/writeColor.c **** // DE_CYC = FB_WIDTH * ( WRITE_COLOR_CYCS + WRITE_COLOR_DELAY )
 116:_options/writeColor.c **** // DE_CYC/FB_WIDTH = WRITE_COLOR_CYCS + WRITE_COLOR_DELAY
 117:_options/writeColor.c **** // WRITE_COLOR_DELAY = DE_CYC/FB_WIDTH - WRITE_COLOR_CYCS
 118:_options/writeColor.c **** // Not sure why -4 is necessary... overhead in delayCyc?
 119:_options/writeColor.c **** #define WRITE_COLOR_DELAY \
 120:_options/writeColor.c **** 	( DOTS_TO_CYC(DE_ACTIVE_DOTS) / FB_WIDTH - WRITE_COLOR_CYCS-4)
 121:_options/writeColor.c **** #if((WRITE_COLOR_DELAY < 0) || (WRITE_COLOR_DELAY >127))
 122:_options/writeColor.c ****  #define WRITE_COLOR_DELAY 0
 123:_options/writeColor.c ****  #warning "problem here..."
 124:_options/writeColor.c **** // #error "problem here..."
 125:_options/writeColor.c **** #endif
 126:_options/writeColor.c **** 
 127:_options/writeColor.c **** //load a color-value from the frame/row buffer and write the registers
 128:_options/writeColor.c **** 
 129:_options/writeColor.c **** 
 130:_options/writeColor.c **** 
 131:_options/writeColor.c **** 
 132:_options/writeColor.c **** static __inline__ 
 133:_options/writeColor.c **** void writeColor(uint8_t includeDelay, uint8_t colorVal) 
 134:_options/writeColor.c **** 	__attribute__((__always_inline__));
 135:_options/writeColor.c **** 
 136:_options/writeColor.c **** #if(defined(__AVR_AT90PWM161__))
 137:_options/writeColor.c **** //This is all the actual/uncommented writeColor() function, below, does...
 138:_options/writeColor.c **** // the actual one uses assembly to align the color-changes' edges
 139:_options/writeColor.c **** // and assures that each pixel is the same width (even though some
 140:_options/writeColor.c **** // branching is necessary)
 141:_options/writeColor.c **** // But you can actually use this one here for fun
 142:_options/writeColor.c **** // (Actually, it's kinda cool, it makes the FB_QUESTION sprites look even
 143:_options/writeColor.c **** //  more 3D)
 144:_options/writeColor.c **** #if 0
 145:_options/writeColor.c ****  void writeColor(uint8_t includeDelay, uint8_t colorVal)
 146:_options/writeColor.c ****  {
 147:_options/writeColor.c **** 	uint8_t redVal = colorVal & 0x03;
 148:_options/writeColor.c **** 	uint8_t greenVal = (colorVal >> 2) & 0x03;
 149:_options/writeColor.c **** 	uint8_t blueVal = (colorVal >> 4) & 0x03;
 150:_options/writeColor.c **** 
 151:_options/writeColor.c **** 	setRed4(redVal);
 152:_options/writeColor.c **** 	setGreen4(greenVal);
 153:_options/writeColor.c **** 	setBlue4(blueVal);
 154:_options/writeColor.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 43


 155:_options/writeColor.c **** 	if(includeDelay)
 156:_options/writeColor.c **** 		delay_cyc(WRITE_COLOR_DELAY);		
 157:_options/writeColor.c **** 
 158:_options/writeColor.c ****  }
 159:_options/writeColor.c **** #endif
 160:_options/writeColor.c ****  void writeColor(uint8_t includeDelay, uint8_t colorVal)
 161:_options/writeColor.c ****  {
 162:_options/writeColor.c **** 
 163:_options/writeColor.c **** #if(defined(ROW_BUFFER) && ROW_BUFFER)
 164:_options/writeColor.c **** 	#error "ROW_BUFFER is NYI for the PWM161"
 165:_options/writeColor.c **** #endif
 166:_options/writeColor.c **** 
 167:_options/writeColor.c **** 
 168:_options/writeColor.c **** 	 //This is pieced-together from the ATTiny861's writeColor()
 169:_options/writeColor.c **** 	 // and memory...
 170:_options/writeColor.c **** 
 171:_options/writeColor.c **** 	 //The basic idea is to set a color in a specific/non-varying number of
 172:_options/writeColor.c **** 	 //instruction-cycles.
 173:_options/writeColor.c **** 	 // Thus, we can't use "if" statements, etc, without paying attention to
 174:_options/writeColor.c **** 	 // the actual assembly output.
 175:_options/writeColor.c **** 	 // Additionally, it would be nice to know exactly how many cycles the
 176:_options/writeColor.c **** 	 // entire function-call takes, so we can determine the number of pixels
 177:_options/writeColor.c **** 	 // that can fit in a DE-active period... 
 178:_options/writeColor.c **** 	 // (How many writeColor() calls can fit horizontally)
 179:_options/writeColor.c **** 	 // Further still, this function is "always inline"
 180:_options/writeColor.c **** 	 // which means that it will be optimized in each usage...
 181:_options/writeColor.c **** 	 // which means that it might compile differently in different calls
 182:_options/writeColor.c **** 	 // (e.g. if one call has a constant-argument and another has a
 183:_options/writeColor.c **** 	 // variable)
 184:_options/writeColor.c **** 	 // which is another reason to use inline-assembly, to assure it's the
 185:_options/writeColor.c **** 	 // exact same number of clock-cycles each time.
 186:_options/writeColor.c **** 	 // That's reserved for later...
 187:_options/writeColor.c **** 
 188:_options/writeColor.c **** 	 // FURTHER STILL:
 189:_options/writeColor.c **** 	 // the optimizer reorganizes things... duh.
 190:_options/writeColor.c **** 	 // Which means that even though these calculations are listed at the
 191:_options/writeColor.c **** 	 // top of the function...
 192:_options/writeColor.c **** 	 // their actual instructions may not occur until later.
 193:_options/writeColor.c **** 	 // The write to OCR-registers would ideally occur simultaneously
 194:_options/writeColor.c **** 	 // such that the red/green/blue edges would align
 195:_options/writeColor.c **** 	 // Without doing this in ASM, we can't guarantee (and I've seen
 196:_options/writeColor.c **** 	 // first-hand) that it can't happen that one OCR is written, the next
 197:_options/writeColor.c **** 	 // is calculated, *then* the next is written.
 198:_options/writeColor.c **** 
 199:_options/writeColor.c **** 	 //First, unpack the colors:
 200:_options/writeColor.c **** 	 uint8_t redVal = colorVal&0x03;
 201:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 202:_options/writeColor.c **** 	 //uint8_t blueVal = (colorVal>>4)&0x03;
 203:_options/writeColor.c **** 	 //The above is optimized below by combining two of the
 204:_options/writeColor.c **** 	 //blue-shifts... It should be smaller
 205:_options/writeColor.c **** 	 uint8_t bgTemp = colorVal>>2;
 206:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 207:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 208:_options/writeColor.c **** 
 209:_options/writeColor.c **** 	 //Now prep some variables for the register-values
 210:_options/writeColor.c **** 	 // the actual registers will be written all at once at the end
 211:_options/writeColor.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 44


 212:_options/writeColor.c **** 	 //see setRed4() and setGreen4()...
 213:_options/writeColor.c **** 	 uint8_t redOCR_val   = (redVal + 2);
 214:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 215:_options/writeColor.c **** 
 216:_options/writeColor.c **** 	 //Blue is more difficult, it requires a test
 217:_options/writeColor.c **** 	 // which, when compiled, would likely result in two branches that take
 218:_options/writeColor.c **** 	 // different numbers of clock-cycles
 219:_options/writeColor.c **** 	 uint8_t blueOCR_val = (blueVal + 4);
 220:_options/writeColor.c **** 
 221:_options/writeColor.c **** 	 // So far, none of the above code has any branches (right?)
 222:_options/writeColor.c **** 	 // So it should be a constant number of clock-cycles
 223:_options/writeColor.c **** 	 // (unless an inline-call has a constant as an argument!)
 224:_options/writeColor.c **** 
 225:_options/writeColor.c **** 	 //The following is nothing more than 
 226:_options/writeColor.c **** 	 // if (blueVal == 3) 
 227:_options/writeColor.c **** 	 //     blueOCR_val=8;
 228:_options/writeColor.c **** 
 229:_options/writeColor.c **** 
 230:_options/writeColor.c **** 	 // This has been modified... was a struggle to realize that "0" is
 231:_options/writeColor.c **** 	 // necessary to avoid %0's being clobbered regardless of whether it was
 232:_options/writeColor.c **** 	 // written...
 233:_options/writeColor.c **** 	 // See lvds161.c -> setBlue4()
 234:_options/writeColor.c **** 	 // 
 235:_options/writeColor.c **** 	 //This is NOT AT ALL optimized:
 236:_options/writeColor.c **** 	 // But it is guaranteed to be exactly 3 cycles *in each branch*
 237:_options/writeColor.c **** __asm__ __volatile__
 238:_options/writeColor.c **** 	(                                                        // cycles
 239:_options/writeColor.c **** 	 "cpi   %1, 3 ; \n\t"				// (blueVal == 3) ?     //    1
 240:_options/writeColor.c **** 	 "brne  nothingToDo_%= ; \n\t"	// N: skip next line    // N:2  Y:1
 241:_options/writeColor.c **** 	 "ldi   %0, 8 ; \n\t"            //   blueOCR_val=8      //   .    1
 242:_options/writeColor.c ****   "nothingToDo_%=: \n\t"            // just a jump-to label //   0    0
 243:_options/writeColor.c ****     : "=r" (blueOCR_val) //blueOCR_val is an output-value, "%0"
 244:_options/writeColor.c **** 	 : "r" (blueVal),		//blueVal is an input-value, "%1"
 245:_options/writeColor.c **** 	   "0" (blueOCR_val)
 246:_options/writeColor.c **** 	);
 247:_options/writeColor.c **** 
 248:_options/writeColor.c **** 	//Now all the OCR_val variables are set
 249:_options/writeColor.c **** 	// write them to the registers
 250:_options/writeColor.c **** 	// Locking/unlocking of the PSCs can't occur simultaneously,
 251:_options/writeColor.c **** 	// so it's likely there will be a pixel or two of difference between the
 252:_options/writeColor.c **** 	// transition from one value of blue to the next vs red/green's
 253:_options/writeColor.c **** 	// transition
 254:_options/writeColor.c **** 	lockPSC2();
 255:_options/writeColor.c **** 	lockPSC0();
 256:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 257:_options/writeColor.c **** //		OCR0SA = redOCR_val;
 258:_options/writeColor.c **** //		OCR0SB = greenOCR_val;
 259:_options/writeColor.c **** //"When addressing the I/O Registers as data space using LD and ST
 260:_options/writeColor.c **** // instructions, 0x20 must be added to these addresses"
 261:_options/writeColor.c **** //"For the Extended I/O space from 0x60-0xFF in SRAM, only the ST... and
 262:_options/writeColor.c **** //LD... instructions can be used"
 263:_options/writeColor.c **** // So, rather than using _SFR_IO_ADDR(), use _SFR_MEM_ADDR()
 264:_options/writeColor.c **** 		__asm__ __volatile__
 265:_options/writeColor.c **** 		(
 266:_options/writeColor.c **** 		 "sts %3, %0; \n\t"
 267:_options/writeColor.c **** 		 "sts %4, %1; \n\t"
 268:_options/writeColor.c **** 		 "sts %5, %2; \n\t"
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 45


 269:_options/writeColor.c **** 		 :
 270:_options/writeColor.c **** 		 : "r" (blueOCR_val),	//"%0"
 271:_options/writeColor.c **** 		   "r" (redOCR_val),		//"%1"
 272:_options/writeColor.c **** 			"r" (greenOCR_val),	//"%2"
 273:_options/writeColor.c **** 			"M" (_SFR_MEM_ADDR(OCR2RAL)), //"%3" //0x2e (0x4e)
 274:_options/writeColor.c **** 			"M" (_SFR_MEM_ADDR(OCR0SAL)), //"%4"	//(0x60)
 275:_options/writeColor.c **** 			"M" (_SFR_MEM_ADDR(OCR0SBL)) //"%5"  //0x22 (0x42)
 276:_options/writeColor.c **** 
 277:_options/writeColor.c **** 		);
 278:_options/writeColor.c **** 	unlockPSC0();
 279:_options/writeColor.c **** 	unlockPSC2();
 280:_options/writeColor.c **** 
 281:_options/writeColor.c **** 
 282:_options/writeColor.c **** 	//"Attempt to stretch across the full screen"
 283:_options/writeColor.c **** 	// Not sure if/where this is used... 
 284:_options/writeColor.c **** 	if(includeDelay)
 285:_options/writeColor.c **** 		delay_cyc(WRITE_COLOR_DELAY);
 286:_options/writeColor.c ****  }
 287:_options/writeColor.c **** 
 288:_options/writeColor.c **** 
 289:_options/writeColor.c **** 
 290:_options/writeColor.c **** #endif
 291:_options/writeColor.c **** 
 292:_options/writeColor.c **** 
 293:_options/writeColor.c **** 
 294:_options/writeColor.c **** 
 295:_options/writeColor.c **** 
 296:_options/writeColor.c **** 
 297:_options/writeColor.c **** 
 298:_options/writeColor.c **** 
 299:_options/writeColor.c **** 
 300:_options/writeColor.c **** 
 301:_options/writeColor.c **** /*
 302:_options/writeColor.c **** static __inline__ \
 303:_options/writeColor.c **** void writeColor(uint8_t includeDelay, uint8_t colorVal) \
 304:_options/writeColor.c ****      __attribute__((__always_inline__));
 305:_options/writeColor.c **** */
 306:_options/writeColor.c **** 
 307:_options/writeColor.c **** 
 308:_options/writeColor.c **** 
 309:_options/writeColor.c **** //This drawPix was developed before RowSegBuffer
 310:_options/writeColor.c **** // there are two versions included: RowBuffer and FrameBuffer
 311:_options/writeColor.c **** // which function almost identically as far as this function's concerned
 312:_options/writeColor.c **** 
 313:_options/writeColor.c **** // After writeColor()s are called, the remaining is (a/o v60) identical
 314:_options/writeColor.c **** // to rsb_drawPix, as it was a result of an:
 315:_options/writeColor.c **** //#if(!ROW_SEG_BUFFER)
 316:_options/writeColor.c **** // void drawPix(uint8_t rowNum)
 317:_options/writeColor.c **** // {
 318:_options/writeColor.c **** //  	do writeColorStuff...
 319:_options/writeColor.c **** //#else
 320:_options/writeColor.c **** // void drawPix(uint8_t rowNum)
 321:_options/writeColor.c **** // {
 322:_options/writeColor.c **** //		do rowSegBufferStuff...
 323:_options/writeColor.c **** //#endif
 324:_options/writeColor.c **** //    do remaining Stuff...
 325:_options/writeColor.c **** // }
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 46


 326:_options/writeColor.c **** 
 327:_options/writeColor.c **** // But nonRSB stuff hasn't been tested in quite some time...
 328:_options/writeColor.c **** 
 329:_options/writeColor.c **** void nonRSB_drawPix(uint16_t rowNum)
 330:_options/writeColor.c **** {
 627               		.stabn	68,0,330,.LM56-.LFBB6
 628               	.LM56:
 629               	.LFBB6:
 630               	/* prologue: function */
 631               	/* frame size = 0 */
 632               	/* stack size = 0 */
 633               	.L__stack_usage = 0
 331:_options/writeColor.c ****    //uint8_t *setting = &(settingBuffer[rowNum][0]);
 332:_options/writeColor.c **** #if(defined(ROW_BUFFER) && ROW_BUFFER)
 333:_options/writeColor.c ****    uint8_t *color = &(rowBuffer[0]);
 334:_options/writeColor.c **** #else
 335:_options/writeColor.c **** 	rowNum = rowNum*FB_HEIGHT / V_COUNT;
 634               		.stabn	68,0,335,.LM57-.LFBB6
 635               	.LM57:
 636 01b0 24E0      		ldi r18,4
 637               		1:
 638 01b2 880F      		lsl r24
 639 01b4 991F      		rol r25
 640 01b6 2A95      		dec r18
 641 01b8 01F4      		brne 1b
 642 01ba 60E0      		ldi r22,0
 643 01bc 73E0      		ldi r23,lo8(3)
 644 01be 0E94 0000 		call __udivmodhi4
 645 01c2 FB01      		movw r30,r22
 336:_options/writeColor.c **** //	rowNum &= 0x0f;
 337:_options/writeColor.c **** 	uint8_t *color = &(frameBuffer[rowNum][0]);
 646               		.stabn	68,0,337,.LM58-.LFBB6
 647               	.LM58:
 648 01c4 34E0      		ldi r19,4
 649               		1:
 650 01c6 EE0F      		lsl r30
 651 01c8 FF1F      		rol r31
 652 01ca 3A95      		dec r19
 653 01cc 01F4      		brne 1b
 654 01ce E050      		subi r30,lo8(-(frameBuffer))
 655 01d0 F040      		sbci r31,hi8(-(frameBuffer))
 338:_options/writeColor.c **** #endif
 339:_options/writeColor.c **** 
 340:_options/writeColor.c **** 	//a/o v67:
 341:_options/writeColor.c **** 	// WTF... this didn't work without DEonly_init();
 342:_options/writeColor.c **** 	// despite the fact that writeColor() on the 161 sets DE?!
 343:_options/writeColor.c **** 	// AND it worked on the Tiny861 without this?!
 344:_options/writeColor.c **** 	// No... writeColor doesn't change one register, which needs to be set
 345:_options/writeColor.c **** 	// for blue...
 346:_options/writeColor.c **** 	DEonly_init();
 656               		.stabn	68,0,346,.LM59-.LFBB6
 657               	.LM59:
 658 01d2 AD9A      		sbi 0x15,5
 659 01d4 81E0      		ldi r24,lo8(1)
 660 01d6 90E0      		ldi r25,0
 661 01d8 9093 6500 		sts 100+1,r25
 662 01dc 8093 6400 		sts 100,r24
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 47


 663 01e0 84E0      		ldi r24,lo8(4)
 664 01e2 90E0      		ldi r25,0
 665 01e4 9FBD      		out 0x2e+1,r25
 666 01e6 8EBD      		out 0x2e,r24
 667 01e8 AD98      		cbi 0x15,5
 347:_options/writeColor.c **** 	//lockPSC2();
 348:_options/writeColor.c **** 	//OCR2SA=1;	//WTF, 0 doesn't work?!
 349:_options/writeColor.c **** 	//OCR2RA=4;
 350:_options/writeColor.c **** 	//unlockPSC2();
 351:_options/writeColor.c ****    /*
 352:_options/writeColor.c ****       DEonly_fromNada();
 353:_options/writeColor.c ****       //Enable complementary-output for Green (on /OC1B, where CLK is OC1B)
 354:_options/writeColor.c ****       TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
 355:_options/writeColor.c ****                | (0<<COM1B1) | (1<<COM1B0)
 356:_options/writeColor.c ****                | (1<<PWM1A) | (1<<PWM1B) );
 357:_options/writeColor.c ****    */
 358:_options/writeColor.c ****       //The Greenish-bar on the left is due to the time it takes to execute
 359:_options/writeColor.c ****       // the first writeColor (since its value is only written at the END)
 360:_options/writeColor.c ****       // Thus the greenish-bar is about one write-color wide...
 361:_options/writeColor.c **** 
 362:_options/writeColor.c ****    //Judging by some weird experiences re v21/22,
 363:_options/writeColor.c ****    // it's not entirely likely this will be predictable
 364:_options/writeColor.c ****    // it may try to recalculate the Z register between writeBlues...
 365:_options/writeColor.c ****    // hopefully not, for now. I should probably assemblify this
 366:_options/writeColor.c ****       writeColor(FALSE, *(color+0));
 668               		.stabn	68,0,366,.LM60-.LFBB6
 669               	.LM60:
 670 01ea 3081      		ld r19,Z
 671               	.LBB121:
 672               	.LBB122:
 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 673               		.stabn	68,0,205,.LM61-.LFBB6
 674               	.LM61:
 675 01ec 232F      		mov r18,r19
 676 01ee 2695      		lsr r18
 677 01f0 2695      		lsr r18
 207:_options/writeColor.c **** 
 678               		.stabn	68,0,207,.LM62-.LFBB6
 679               	.LM62:
 680 01f2 822F      		mov r24,r18
 681 01f4 8695      		lsr r24
 682 01f6 8695      		lsr r24
 683 01f8 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 684               		.stabn	68,0,219,.LM63-.LFBB6
 685               	.LM63:
 686 01fa 94E0      		ldi r25,lo8(4)
 687 01fc 980F      		add r25,r24
 237:_options/writeColor.c **** 	(                                                        // cycles
 688               		.stabn	68,0,237,.LM64-.LFBB6
 689               	.LM64:
 690               	/* #APP */
 691               	 ;  237 "_options/writeColor.c" 1
 692 01fe 8330      		cpi   r24, 3 ; 
 693 0200 01F4      		brne  nothingToDo_271 ; 
 694 0202 98E0      		ldi   r25, 8 ; 
 695               		nothingToDo_271: 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 48


 696               		
 697               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 698               		.stabn	68,0,254,.LM65-.LFBB6
 699               	.LM65:
 700               	/* #NOAPP */
 701 0204 AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 702               		.stabn	68,0,255,.LM66-.LFBB6
 703               	.LM66:
 704 0206 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 705               		.stabn	68,0,200,.LM67-.LFBB6
 706               	.LM67:
 707 0208 832F      		mov r24,r19
 708 020a 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 709               		.stabn	68,0,213,.LM68-.LFBB6
 710               	.LM68:
 711 020c 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 712               		.stabn	68,0,206,.LM69-.LFBB6
 713               	.LM69:
 714 020e 2370      		andi r18,lo8(3)
 214:_options/writeColor.c **** 
 715               		.stabn	68,0,214,.LM70-.LFBB6
 716               	.LM70:
 717 0210 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 718               		.stabn	68,0,264,.LM71-.LFBB6
 719               	.LM71:
 720               	/* #APP */
 721               	 ;  264 "_options/writeColor.c" 1
 722 0212 9093 4E00 		sts 78, r25; 
 723 0216 8093 6000 		sts 96, r24; 
 724 021a 2093 4200 		sts 66, r18; 
 725               		
 726               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 727               		.stabn	68,0,278,.LM72-.LFBB6
 728               	.LM72:
 729               	/* #NOAPP */
 730 021e 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 731               		.stabn	68,0,279,.LM73-.LFBB6
 732               	.LM73:
 733 0220 AD98      		cbi 0x15,5
 734 0222 87E0      		ldi r24,lo8(7)
 735 0224 90E0      		ldi r25,0
 736               	.L27:
 737               	.LBE122:
 738               	.LBE121:
 739               	.LBB123:
 740               	.LBB124:
 741               		.stabs	"delay_cyc.c",132,0,0,.Ltext10
 742               	.Ltext10:
   1:delay_cyc.c   **** /* mehPL:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 49


   2:delay_cyc.c   ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:delay_cyc.c   ****  *    I'm not too fond of long licenses at the top of the file.
   4:delay_cyc.c   ****  *    Please see the bottom.
   5:delay_cyc.c   ****  *    Enjoy!
   6:delay_cyc.c   ****  */
   7:delay_cyc.c   **** 
   8:delay_cyc.c   **** 
   9:delay_cyc.c   **** 
  10:delay_cyc.c   **** 
  11:delay_cyc.c   **** 
  12:delay_cyc.c   **** 
  13:delay_cyc.c   **** //delay_cyc intends to create "functions" that cause delays of a specific
  14:delay_cyc.c   **** //number of CPU cycles. This isn't by any means highly accurate...
  15:delay_cyc.c   **** 
  16:delay_cyc.c   **** //There are a couple compilation-options:
  17:delay_cyc.c   **** //  one uses _delay_loop_2 from <util/delay_basic.h> (this is newer)
  18:delay_cyc.c   **** //  the other is my original hokey implementation.
  19:delay_cyc.c   **** 
  20:delay_cyc.c   **** //The original "hokey" implementation was before I was familiar with
  21:delay_cyc.c   **** //assembly-inlining. Though, it makes use of gcc's optimizer to weed-out
  22:delay_cyc.c   **** //the unused code WHEN each function-call has a constant argument.
  23:delay_cyc.c   **** //Unfortunately, this means that different versions of C/gcc may compile
  24:delay_cyc.c   **** //these delays differently. In *my* configuration, it seems to work well,
  25:delay_cyc.c   **** //but no promises, here.
  26:delay_cyc.c   **** // 'avr-gcc -v' gives:
  27:delay_cyc.c   **** //Target: avr
  28:delay_cyc.c   **** //Configured with: ../gcc-4.4.5/configure --target=avr --enable-languages=c
  29:delay_cyc.c   **** //--disable-libssp
  30:delay_cyc.c   **** //Thread model: single
  31:delay_cyc.c   **** //gcc version 4.4.5 (GCC) 
  32:delay_cyc.c   **** 
  33:delay_cyc.c   **** // ALSO, there are *definitely* cases where it's called with VARIABLES as
  34:delay_cyc.c   **** // arguments, as opposed to constant, especially BLUE_DIAG_BAR(_SCROLL).
  35:delay_cyc.c   **** // In which case, things are pretty hokey.
  36:delay_cyc.c   **** // Both compilation-options work, in my testing, but not perfectly.
  37:delay_cyc.c   **** 
  38:delay_cyc.c   **** //(A more accurate method has since been developed in
  39:delay_cyc.c   **** // _commonCode/delay_cyc/, which can create a delay of exactly 1->127 
  40:delay_cyc.c   **** // cycles, if set-up ahead of time, even with a variable as an argument.
  41:delay_cyc.c   **** // This method is to be called via asm, and hasn't been implemented here).
  42:delay_cyc.c   **** 
  43:delay_cyc.c   **** // So, again, in cases here with a CONSTANT argument:
  44:delay_cyc.c   **** //  initial set-up math should optimize-out, and we'll be left with either
  45:delay_cyc.c   **** //  a specific number of loops, or a specific number of nops, inlined with
  46:delay_cyc.c   **** //  the original caller.
  47:delay_cyc.c   **** //  With _delay_loop_2() this results in a number of cycles rounded-up to
  48:delay_cyc.c   **** //  the nearest 4. (e.g. delay_cyc(3) results in 4 cycles. delay_cyc(13)
  49:delay_cyc.c   **** //  results in 16 cycles).
  50:delay_cyc.c   **** //  With the hokey method, it might very well result in exactly the number
  51:delay_cyc.c   **** //  of requested cycles, between a potential loop *and* remaining nops...
  52:delay_cyc.c   **** // And with a VARIABLE argument:
  53:delay_cyc.c   **** //  With _delay_loop_2() there's a bit of set-up overhead, which may in
  54:delay_cyc.c   **** //  fact be quite large (division by 4 => Shift-Rights. + an addition
  55:delay_cyc.c   **** //  + negative-argument testing). And then there's the number of 4-cycle
  56:delay_cyc.c   **** //  loops, rounded-up.
  57:delay_cyc.c   **** //  With the "hokey" method, it's probably all messed-up, a bunch of
  58:delay_cyc.c   **** //  switch-statements, set-up, and more... lots of jumping, etc.
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 50


  59:delay_cyc.c   **** 
  60:delay_cyc.c   **** // As it stands, this may result in row-timing (H-Blanks + DE) that aren't
  61:delay_cyc.c   **** // constant and/or aren't exactly as requested...
  62:delay_cyc.c   **** // This *may* affect some display's sync-ability.
  63:delay_cyc.c   **** // So far, it hasn't been found to be a problem, except visually where,
  64:delay_cyc.c   **** // e.g. in BLUE_DIAG_BAR(_SCROLL) the bar is not perfectly diagonal, more
  65:delay_cyc.c   **** // stair-stepped (or even slightly jagged, in the "hokey" case).
  66:delay_cyc.c   **** 
  67:delay_cyc.c   **** 
  68:delay_cyc.c   **** #include "delay_cyc.h"
  69:delay_cyc.c   **** 
  70:delay_cyc.c   **** //This'll optimze-out in some cases.
  71:delay_cyc.c   **** // The timings and instructions used are probably specific to the
  72:delay_cyc.c   **** // instruction-set in the MCU, the GCC version, optimization-level, etc.
  73:delay_cyc.c   **** // a/o LCDdirectLVDS11 HLow_delay() this is how it's compiling...
  74:delay_cyc.c   **** 
  75:delay_cyc.c   **** // The actual number of cycs will probably be a few higher...
  76:delay_cyc.c   **** // (or who knows, if things optimze-out, e.g. small ~0-8 numCycs)
  77:delay_cyc.c   **** // Due to init, and division...
  78:delay_cyc.c   **** // Using rounding-up as well...
  79:delay_cyc.c   **** 
  80:delay_cyc.c   **** // the argument is int32_t to allow for negative value testing
  81:delay_cyc.c   **** // BUT: numCyc is only tested against a uint16_t...
  82:delay_cyc.c   **** //  the greatest value (?) is (UINT16_MAX - 7)
  83:delay_cyc.c   **** // (maybe it'd make more sense to do the math outside the delay_cyc call
  84:delay_cyc.c   **** // and allow the preprocessor to change it to 0, instead of doing it here.
  85:delay_cyc.c   **** 
  86:delay_cyc.c   **** //This should probably be reimplemented using _delay_loop_1/2() from 
  87:delay_cyc.c   **** // util/delay_basic.h
  88:delay_cyc.c   **** //  1 uses three cycles per count, counts from 1-256, 
  89:delay_cyc.c   **** //      256 counts: _delay_loop_1(0)
  90:delay_cyc.c   **** //  2 uses four, counts from 1-65536, 65536 is passed as 0
  91:delay_cyc.c   **** 
  92:delay_cyc.c   **** //#define DELAY_CYC_DELAY_LOOP TRUE//FALSE
  93:delay_cyc.c   **** 
  94:delay_cyc.c   **** #if(defined(DELAY_CYC_DELAY_LOOP) && DELAY_CYC_DELAY_LOOP)
  95:delay_cyc.c   **** #warning "This has only been tested with v54+... rowSegBuffer, etc."
  96:delay_cyc.c   **** void delay_cyc(int32_t numCyc)
  97:delay_cyc.c   **** {
  98:delay_cyc.c   ****    if(numCyc <= 0)
  99:delay_cyc.c   ****       return;
 100:delay_cyc.c   **** 
 101:delay_cyc.c   ****    uint16_t numLoops = (numCyc+3)/4;
 102:delay_cyc.c   **** 
 103:delay_cyc.c   ****    _delay_loop_2(numLoops);
 104:delay_cyc.c   **** 
 105:delay_cyc.c   **** /*   uint32_t delayLoops = (numCyc+3)/4;
 106:delay_cyc.c   **** 
 107:delay_cyc.c   ****    do
 108:delay_cyc.c   ****    {
 109:delay_cyc.c   ****       delayLoops--;
 110:delay_cyc.c   **** //      _delay_loop_2(delayLoops&0xffff);
 111:delay_cyc.c   **** 
 112:delay_cyc.c   **** //      delayLoops -= (delayLoops&0xffff);
 113:delay_cyc.c   ****    } while(delayLoops);
 114:delay_cyc.c   **** */
 115:delay_cyc.c   **** /*
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 51


 116:delay_cyc.c   ****    //Since this is inline, AND it's only called with values computed
 117:delay_cyc.c   ****    // at compile time, only one of these should be compiled in...
 118:delay_cyc.c   ****    // as necessary...
 119:delay_cyc.c   ****    // If called without precomputed value (i.e. a variable)????
 120:delay_cyc.c   ****    // Maybe I should only use delay_loop_2...
 121:delay_cyc.c   ****    if(numCyc < 256*3)
 122:delay_cyc.c   ****       _delay_loop_1(numCyc/&0xff);
 123:delay_cyc.c   **** 
 124:delay_cyc.c   ****    else
 125:delay_cyc.c   **** */
 126:delay_cyc.c   **** }
 127:delay_cyc.c   **** 
 128:delay_cyc.c   **** #else
 129:delay_cyc.c   **** void delay_cyc(int32_t numCyc)
 130:delay_cyc.c   **** {
 131:delay_cyc.c   **** 
 132:delay_cyc.c   ****    //This shouldn't happen often, but some delay_cyc() calls use math
 133:delay_cyc.c   ****    // to calculate the number of cycles, and it could be negative
 134:delay_cyc.c   ****    if(numCyc < 0)
 135:delay_cyc.c   ****       return;
 136:delay_cyc.c   ****                                  //#Clocks
 137:delay_cyc.c   ****    //Two instructions:
 138:delay_cyc.c   ****    // ldi r24, 0                  //1          i=0
 139:delay_cyc.c   ****    // ldi r25, 0                  //1
 140:delay_cyc.c   ****    uint16_t i;
 141:delay_cyc.c   **** 
 142:delay_cyc.c   **** 
 143:delay_cyc.c   ****    //Loop instructions:
 144:delay_cyc.c   ****    //nop                           //1
 145:delay_cyc.c   ****    //adiw  r24, 0x01   ; 1         //2          i++
 146:delay_cyc.c   ****    //cpi   r24, 0x77   ; 119      //1          i<numCyc (119 in this case)
 147:delay_cyc.c   ****    //cpc   r25, r1               //1          Apparently it's also testing
 148:delay_cyc.c   ****                                  //           the high byte is 0
 149:delay_cyc.c   ****    //brne  .-10        ;         //"1/2"      return to nop
 150:delay_cyc.c   ****                                  //            if I understand, this is two
 151:delay_cyc.c   ****                                  //            cyc when branching
 152:delay_cyc.c   ****                                  //            or one if not (when complete)
 153:delay_cyc.c   **** 
 154:delay_cyc.c   ****    //READ THIS:
 155:delay_cyc.c   ****    // Current Compilation Settings: A/O v18:
 156:delay_cyc.c   ****    //    THIS LOOP WILL BE UNROLLED if numLoops <= 5!!!
 157:delay_cyc.c   ****    //    Which then turns into numLoops*2 cycles (instead of numLoops*8)
 158:delay_cyc.c   ****    // 
 159:delay_cyc.c   ****    // Here's an attempted hack...
 160:delay_cyc.c   ****    //  it *should* optimize the test out in either case, so it's like a 
 161:delay_cyc.c   ****    //  preprocessing directive...
 162:delay_cyc.c   **** 	uint8_t loopRemainder = numCyc & 0x07;
 163:delay_cyc.c   **** 	uint16_t numLoops = (((uint16_t)(numCyc)+7)>>3);
 164:delay_cyc.c   **** 
 165:delay_cyc.c   **** 
 166:delay_cyc.c   ****    // HACK ATTEMPT 2: THATS A LOT OF CODE.
 167:delay_cyc.c   ****       switch(numLoops)
 168:delay_cyc.c   ****       {
 169:delay_cyc.c   ****          case 5:
 170:delay_cyc.c   ****             asm("nop");
 171:delay_cyc.c   ****             asm("nop");
 172:delay_cyc.c   ****             asm("nop");
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 52


 173:delay_cyc.c   ****             asm("nop");
 174:delay_cyc.c   ****             asm("nop");
 175:delay_cyc.c   ****             asm("nop");
 176:delay_cyc.c   ****             asm("nop");
 177:delay_cyc.c   ****             asm("nop");
 178:delay_cyc.c   ****          case 4:
 179:delay_cyc.c   ****             asm("nop");
 180:delay_cyc.c   ****             asm("nop");
 181:delay_cyc.c   ****             asm("nop");
 182:delay_cyc.c   ****             asm("nop");
 183:delay_cyc.c   ****             asm("nop");
 184:delay_cyc.c   ****             asm("nop");
 185:delay_cyc.c   ****             asm("nop");
 186:delay_cyc.c   ****             asm("nop");
 187:delay_cyc.c   ****          case 3:
 188:delay_cyc.c   ****             asm("nop");
 189:delay_cyc.c   ****             asm("nop");
 190:delay_cyc.c   ****             asm("nop");
 191:delay_cyc.c   ****             asm("nop");
 192:delay_cyc.c   ****             asm("nop");
 193:delay_cyc.c   ****             asm("nop");
 194:delay_cyc.c   ****             asm("nop");
 195:delay_cyc.c   ****             asm("nop");
 196:delay_cyc.c   ****          case 2:
 197:delay_cyc.c   ****             asm("nop");
 198:delay_cyc.c   ****             asm("nop");
 199:delay_cyc.c   ****             asm("nop");
 200:delay_cyc.c   ****             asm("nop");
 201:delay_cyc.c   ****             asm("nop");
 202:delay_cyc.c   ****             asm("nop");
 203:delay_cyc.c   ****             asm("nop");
 204:delay_cyc.c   ****             asm("nop");
 205:delay_cyc.c   ****          case 1:
 206:delay_cyc.c   ****             asm("nop");
 207:delay_cyc.c   ****             asm("nop");
 208:delay_cyc.c   ****             asm("nop");
 209:delay_cyc.c   ****             asm("nop");
 210:delay_cyc.c   ****             asm("nop");
 211:delay_cyc.c   ****             asm("nop");
 212:delay_cyc.c   ****             asm("nop");
 213:delay_cyc.c   ****             asm("nop");
 214:delay_cyc.c   ****             return;
 215:delay_cyc.c   ****             break;
 216:delay_cyc.c   ****          default:
 217:delay_cyc.c   ****             break;
 218:delay_cyc.c   ****       }
 219:delay_cyc.c   ****    // THUS:
 220:delay_cyc.c   ****    // Each loop is 7 cycles, make it 8 by adding an extra nop and we can
 221:delay_cyc.c   ****    // use >> instead of / for calculations...
 222:delay_cyc.c   ****    // +7 assures rounding-up...
 223:delay_cyc.c   **** #warning "This loop seems to be optimizing out!"
 224:delay_cyc.c   ****    //for(i=0; i<((numCyc+7)>>3); i++)
 225:delay_cyc.c   ****    for(i=0; i<numLoops; i++)
 226:delay_cyc.c   ****    {
 227:delay_cyc.c   ****       //THIS IS A HACK DUE TO OPTIMIZATION, see above
 228:delay_cyc.c   ****       // It will NOT likely be happy with different versions of gcc...
 229:delay_cyc.c   ****    /*   // NOGO: Apparently it won't expand the loop if this is part of it
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 53


 230:delay_cyc.c   ****       // so then we have 5 loops AND 8 instructions /within/ the loop
 231:delay_cyc.c   ****       // AND the comparison overhead!`
 232:delay_cyc.c   ****       if(numLoops <= 5)
 233:delay_cyc.c   ****       {
 234:delay_cyc.c   ****          asm("nop");
 235:delay_cyc.c   ****          asm("nop");
 236:delay_cyc.c   ****       //   asm("nop");
 237:delay_cyc.c   ****       //   asm("nop");
 238:delay_cyc.c   ****       //   asm("nop");
 239:delay_cyc.c   ****       //   asm("nop");
 240:delay_cyc.c   ****       }
 241:delay_cyc.c   ****       else
 242:delay_cyc.c   ****       {
 243:delay_cyc.c   ****          asm("nop");
 244:delay_cyc.c   ****          asm("nop");
 245:delay_cyc.c   ****       }
 246:delay_cyc.c   ****    */
 247:delay_cyc.c   ****       //Apparently this loop will optimize-out without this:
 248:delay_cyc.c   ****       // Obviously, one instruction each...
 249:delay_cyc.c   ****       asm("nop");
 743               		.stabn	68,0,249,.LM74-.LFBB6
 744               	.LM74:
 745               	/* #APP */
 746               	 ;  249 "delay_cyc.c" 1
 747 0226 0000      		nop
 748               	 ;  0 "" 2
 250:delay_cyc.c   ****       asm("nop");
 749               		.stabn	68,0,250,.LM75-.LFBB6
 750               	.LM75:
 751               	 ;  250 "delay_cyc.c" 1
 752 0228 0000      		nop
 753               	 ;  0 "" 2
 754               	/* #NOAPP */
 755 022a 0197      		sbiw r24,1
 225:delay_cyc.c   ****    {
 756               		.stabn	68,0,225,.LM76-.LFBB6
 757               	.LM76:
 758 022c 0097      		sbiw r24,0
 759 022e 01F4      		brne .L27
 251:delay_cyc.c   ****    }
 252:delay_cyc.c   **** 
 253:delay_cyc.c   **** 	//This addition a/o v62-20
 254:delay_cyc.c   **** 	// When delay_cyc is called with a constant-value, it should optimize
 255:delay_cyc.c   **** 	// out to merely the number of nops... but if it's non-constant, then
 256:delay_cyc.c   **** 	// this will slow things a bit... UNTESTED.
 257:delay_cyc.c   **** 	// (Actually, briefly tested with BLUE_DIAG_BAR_SCROLL and seems to
 258:delay_cyc.c   **** 	// work, but not highly precise, as expected.
 259:delay_cyc.c   **** 	// In Other Words: It worked better in BLUE_DIAG_BAR_SCROLL withOUT the
 260:delay_cyc.c   **** 	// following addition, because this function is then called with a
 261:delay_cyc.c   **** 	// variable, instead of a constant, and it does not optimize out.)
 262:delay_cyc.c   **** 
 263:delay_cyc.c   **** 	//Realistically, this should probably be done in assembly, the whole
 264:delay_cyc.c   **** 	//thing...
 265:delay_cyc.c   **** 	// but doing-so might make optimization more difficult...?
 266:delay_cyc.c   **** 	switch(loopRemainder)
 267:delay_cyc.c   **** 	{
 268:delay_cyc.c   **** 		case 7:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 54


 269:delay_cyc.c   **** 			asm("nop");
 270:delay_cyc.c   **** 		case 6:
 271:delay_cyc.c   **** 			asm("nop");
 272:delay_cyc.c   **** 		case 5:
 273:delay_cyc.c   **** 			asm("nop");
 274:delay_cyc.c   **** 		case 4:
 275:delay_cyc.c   **** 			asm("nop");
 760               		.stabn	68,0,275,.LM77-.LFBB6
 761               	.LM77:
 762               	/* #APP */
 763               	 ;  275 "delay_cyc.c" 1
 764 0230 0000      		nop
 765               	 ;  0 "" 2
 276:delay_cyc.c   **** 		case 3:
 277:delay_cyc.c   **** 			asm("nop");
 766               		.stabn	68,0,277,.LM78-.LFBB6
 767               	.LM78:
 768               	 ;  277 "delay_cyc.c" 1
 769 0232 0000      		nop
 770               	 ;  0 "" 2
 278:delay_cyc.c   **** 		case 2:
 279:delay_cyc.c   **** 			asm("nop");
 771               		.stabn	68,0,279,.LM79-.LFBB6
 772               	.LM79:
 773               	 ;  279 "delay_cyc.c" 1
 774 0234 0000      		nop
 775               	 ;  0 "" 2
 280:delay_cyc.c   **** 		case 1:
 281:delay_cyc.c   **** 			asm("nop");
 776               		.stabn	68,0,281,.LM80-.LFBB6
 777               	.LM80:
 778               	 ;  281 "delay_cyc.c" 1
 779 0236 0000      		nop
 780               	 ;  0 "" 2
 781               	/* #NOAPP */
 782               	.LBE124:
 783               	.LBE123:
 784               		.stabs	"_options/writeColor.c",132,0,0,.Ltext11
 785               	.Ltext11:
 367:_options/writeColor.c **** 
 368:_options/writeColor.c **** 		lvds_enableGreen_MakeClockSensitiveToDT();
 369:_options/writeColor.c **** 
 370:_options/writeColor.c **** 		//Because includeDelay is FALSE, above, do it here...
 371:_options/writeColor.c **** 		// The intention being to get enableGreen as soon after the
 372:_options/writeColor.c **** 		// register-settings as possible.
 373:_options/writeColor.c **** 		delay_cyc(WRITE_COLOR_DELAY);
 374:_options/writeColor.c **** 		
 375:_options/writeColor.c ****       //Moving this here not only removes (most of) the green bar
 376:_options/writeColor.c ****       // but also seems to make the pixel edges significantly sharper
 377:_options/writeColor.c ****       // (v29 has ~1/8in of noise, v30 has ~1pixel noise at the right edge)
 378:_options/writeColor.c **** //      TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
 379:_options/writeColor.c **** //               | (0<<COM1B1) | (1<<COM1B0)
 380:_options/writeColor.c **** //               | (1<<PWM1A) | (1<<PWM1B) );
 381:_options/writeColor.c **** 
 382:_options/writeColor.c ****       writeColor(TRUE, *(color+1));    
 786               		.stabn	68,0,382,.LM81-.LFBB6
 787               	.LM81:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 55


 788 0238 3181      		ldd r19,Z+1
 789               	.LBB125:
 790               	.LBB126:
 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 791               		.stabn	68,0,205,.LM82-.LFBB6
 792               	.LM82:
 793 023a 232F      		mov r18,r19
 794 023c 2695      		lsr r18
 795 023e 2695      		lsr r18
 207:_options/writeColor.c **** 
 796               		.stabn	68,0,207,.LM83-.LFBB6
 797               	.LM83:
 798 0240 822F      		mov r24,r18
 799 0242 8695      		lsr r24
 800 0244 8695      		lsr r24
 801 0246 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 802               		.stabn	68,0,219,.LM84-.LFBB6
 803               	.LM84:
 804 0248 94E0      		ldi r25,lo8(4)
 805 024a 980F      		add r25,r24
 237:_options/writeColor.c **** 	(                                                        // cycles
 806               		.stabn	68,0,237,.LM85-.LFBB6
 807               	.LM85:
 808               	/* #APP */
 809               	 ;  237 "_options/writeColor.c" 1
 810 024c 8330      		cpi   r24, 3 ; 
 811 024e 01F4      		brne  nothingToDo_319 ; 
 812 0250 98E0      		ldi   r25, 8 ; 
 813               		nothingToDo_319: 
 814               		
 815               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 816               		.stabn	68,0,254,.LM86-.LFBB6
 817               	.LM86:
 818               	/* #NOAPP */
 819 0252 AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 820               		.stabn	68,0,255,.LM87-.LFBB6
 821               	.LM87:
 822 0254 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 823               		.stabn	68,0,200,.LM88-.LFBB6
 824               	.LM88:
 825 0256 832F      		mov r24,r19
 826 0258 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 827               		.stabn	68,0,213,.LM89-.LFBB6
 828               	.LM89:
 829 025a 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 830               		.stabn	68,0,206,.LM90-.LFBB6
 831               	.LM90:
 832 025c 2370      		andi r18,lo8(3)
 214:_options/writeColor.c **** 
 833               		.stabn	68,0,214,.LM91-.LFBB6
 834               	.LM91:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 56


 835 025e 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 836               		.stabn	68,0,264,.LM92-.LFBB6
 837               	.LM92:
 838               	/* #APP */
 839               	 ;  264 "_options/writeColor.c" 1
 840 0260 9093 4E00 		sts 78, r25; 
 841 0264 8093 6000 		sts 96, r24; 
 842 0268 2093 4200 		sts 66, r18; 
 843               		
 844               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 845               		.stabn	68,0,278,.LM93-.LFBB6
 846               	.LM93:
 847               	/* #NOAPP */
 848 026c 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 849               		.stabn	68,0,279,.LM94-.LFBB6
 850               	.LM94:
 851 026e AD98      		cbi 0x15,5
 852 0270 87E0      		ldi r24,lo8(7)
 853 0272 90E0      		ldi r25,0
 854               	.L29:
 855               	.LBB127:
 856               	.LBB128:
 857               		.stabs	"delay_cyc.c",132,0,0,.Ltext12
 858               	.Ltext12:
 249:delay_cyc.c   ****       asm("nop");
 859               		.stabn	68,0,249,.LM95-.LFBB6
 860               	.LM95:
 861               	/* #APP */
 862               	 ;  249 "delay_cyc.c" 1
 863 0274 0000      		nop
 864               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 865               		.stabn	68,0,250,.LM96-.LFBB6
 866               	.LM96:
 867               	 ;  250 "delay_cyc.c" 1
 868 0276 0000      		nop
 869               	 ;  0 "" 2
 870               	/* #NOAPP */
 871 0278 0197      		sbiw r24,1
 225:delay_cyc.c   ****    {
 872               		.stabn	68,0,225,.LM97-.LFBB6
 873               	.LM97:
 874 027a 0097      		sbiw r24,0
 875 027c 01F4      		brne .L29
 275:delay_cyc.c   **** 		case 3:
 876               		.stabn	68,0,275,.LM98-.LFBB6
 877               	.LM98:
 878               	/* #APP */
 879               	 ;  275 "delay_cyc.c" 1
 880 027e 0000      		nop
 881               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 882               		.stabn	68,0,277,.LM99-.LFBB6
 883               	.LM99:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 57


 884               	 ;  277 "delay_cyc.c" 1
 885 0280 0000      		nop
 886               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 887               		.stabn	68,0,279,.LM100-.LFBB6
 888               	.LM100:
 889               	 ;  279 "delay_cyc.c" 1
 890 0282 0000      		nop
 891               	 ;  0 "" 2
 892               		.stabn	68,0,281,.LM101-.LFBB6
 893               	.LM101:
 894               	 ;  281 "delay_cyc.c" 1
 895 0284 0000      		nop
 896               	 ;  0 "" 2
 897               	/* #NOAPP */
 898               	.LBE128:
 899               	.LBE127:
 900               	.LBE126:
 901               	.LBE125:
 902               		.stabs	"_options/writeColor.c",132,0,0,.Ltext13
 903               	.Ltext13:
 383:_options/writeColor.c ****       writeColor(TRUE, *(color+2));    
 904               		.stabn	68,0,383,.LM102-.LFBB6
 905               	.LM102:
 906 0286 3281      		ldd r19,Z+2
 907               	.LBB129:
 908               	.LBB130:
 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 909               		.stabn	68,0,205,.LM103-.LFBB6
 910               	.LM103:
 911 0288 232F      		mov r18,r19
 912 028a 2695      		lsr r18
 913 028c 2695      		lsr r18
 207:_options/writeColor.c **** 
 914               		.stabn	68,0,207,.LM104-.LFBB6
 915               	.LM104:
 916 028e 822F      		mov r24,r18
 917 0290 8695      		lsr r24
 918 0292 8695      		lsr r24
 919 0294 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 920               		.stabn	68,0,219,.LM105-.LFBB6
 921               	.LM105:
 922 0296 94E0      		ldi r25,lo8(4)
 923 0298 980F      		add r25,r24
 237:_options/writeColor.c **** 	(                                                        // cycles
 924               		.stabn	68,0,237,.LM106-.LFBB6
 925               	.LM106:
 926               	/* #APP */
 927               	 ;  237 "_options/writeColor.c" 1
 928 029a 8330      		cpi   r24, 3 ; 
 929 029c 01F4      		brne  nothingToDo_367 ; 
 930 029e 98E0      		ldi   r25, 8 ; 
 931               		nothingToDo_367: 
 932               		
 933               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 58


 934               		.stabn	68,0,254,.LM107-.LFBB6
 935               	.LM107:
 936               	/* #NOAPP */
 937 02a0 AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 938               		.stabn	68,0,255,.LM108-.LFBB6
 939               	.LM108:
 940 02a2 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 941               		.stabn	68,0,200,.LM109-.LFBB6
 942               	.LM109:
 943 02a4 832F      		mov r24,r19
 944 02a6 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 945               		.stabn	68,0,213,.LM110-.LFBB6
 946               	.LM110:
 947 02a8 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 948               		.stabn	68,0,206,.LM111-.LFBB6
 949               	.LM111:
 950 02aa 2370      		andi r18,lo8(3)
 214:_options/writeColor.c **** 
 951               		.stabn	68,0,214,.LM112-.LFBB6
 952               	.LM112:
 953 02ac 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 954               		.stabn	68,0,264,.LM113-.LFBB6
 955               	.LM113:
 956               	/* #APP */
 957               	 ;  264 "_options/writeColor.c" 1
 958 02ae 9093 4E00 		sts 78, r25; 
 959 02b2 8093 6000 		sts 96, r24; 
 960 02b6 2093 4200 		sts 66, r18; 
 961               		
 962               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 963               		.stabn	68,0,278,.LM114-.LFBB6
 964               	.LM114:
 965               	/* #NOAPP */
 966 02ba 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 967               		.stabn	68,0,279,.LM115-.LFBB6
 968               	.LM115:
 969 02bc AD98      		cbi 0x15,5
 970 02be 87E0      		ldi r24,lo8(7)
 971 02c0 90E0      		ldi r25,0
 972               	.L31:
 973               	.LBB131:
 974               	.LBB132:
 975               		.stabs	"delay_cyc.c",132,0,0,.Ltext14
 976               	.Ltext14:
 249:delay_cyc.c   ****       asm("nop");
 977               		.stabn	68,0,249,.LM116-.LFBB6
 978               	.LM116:
 979               	/* #APP */
 980               	 ;  249 "delay_cyc.c" 1
 981 02c2 0000      		nop
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 59


 982               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 983               		.stabn	68,0,250,.LM117-.LFBB6
 984               	.LM117:
 985               	 ;  250 "delay_cyc.c" 1
 986 02c4 0000      		nop
 987               	 ;  0 "" 2
 988               	/* #NOAPP */
 989 02c6 0197      		sbiw r24,1
 225:delay_cyc.c   ****    {
 990               		.stabn	68,0,225,.LM118-.LFBB6
 991               	.LM118:
 992 02c8 0097      		sbiw r24,0
 993 02ca 01F4      		brne .L31
 275:delay_cyc.c   **** 		case 3:
 994               		.stabn	68,0,275,.LM119-.LFBB6
 995               	.LM119:
 996               	/* #APP */
 997               	 ;  275 "delay_cyc.c" 1
 998 02cc 0000      		nop
 999               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 1000               		.stabn	68,0,277,.LM120-.LFBB6
 1001               	.LM120:
 1002               	 ;  277 "delay_cyc.c" 1
 1003 02ce 0000      		nop
 1004               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 1005               		.stabn	68,0,279,.LM121-.LFBB6
 1006               	.LM121:
 1007               	 ;  279 "delay_cyc.c" 1
 1008 02d0 0000      		nop
 1009               	 ;  0 "" 2
 1010               		.stabn	68,0,281,.LM122-.LFBB6
 1011               	.LM122:
 1012               	 ;  281 "delay_cyc.c" 1
 1013 02d2 0000      		nop
 1014               	 ;  0 "" 2
 1015               	/* #NOAPP */
 1016               	.LBE132:
 1017               	.LBE131:
 1018               	.LBE130:
 1019               	.LBE129:
 1020               		.stabs	"_options/writeColor.c",132,0,0,.Ltext15
 1021               	.Ltext15:
 384:_options/writeColor.c ****       writeColor(TRUE, *(color+3)); 
 1022               		.stabn	68,0,384,.LM123-.LFBB6
 1023               	.LM123:
 1024 02d4 3381      		ldd r19,Z+3
 1025               	.LBB133:
 1026               	.LBB134:
 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 1027               		.stabn	68,0,205,.LM124-.LFBB6
 1028               	.LM124:
 1029 02d6 232F      		mov r18,r19
 1030 02d8 2695      		lsr r18
 1031 02da 2695      		lsr r18
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 60


 207:_options/writeColor.c **** 
 1032               		.stabn	68,0,207,.LM125-.LFBB6
 1033               	.LM125:
 1034 02dc 822F      		mov r24,r18
 1035 02de 8695      		lsr r24
 1036 02e0 8695      		lsr r24
 1037 02e2 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 1038               		.stabn	68,0,219,.LM126-.LFBB6
 1039               	.LM126:
 1040 02e4 94E0      		ldi r25,lo8(4)
 1041 02e6 980F      		add r25,r24
 237:_options/writeColor.c **** 	(                                                        // cycles
 1042               		.stabn	68,0,237,.LM127-.LFBB6
 1043               	.LM127:
 1044               	/* #APP */
 1045               	 ;  237 "_options/writeColor.c" 1
 1046 02e8 8330      		cpi   r24, 3 ; 
 1047 02ea 01F4      		brne  nothingToDo_415 ; 
 1048 02ec 98E0      		ldi   r25, 8 ; 
 1049               		nothingToDo_415: 
 1050               		
 1051               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 1052               		.stabn	68,0,254,.LM128-.LFBB6
 1053               	.LM128:
 1054               	/* #NOAPP */
 1055 02ee AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 1056               		.stabn	68,0,255,.LM129-.LFBB6
 1057               	.LM129:
 1058 02f0 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 1059               		.stabn	68,0,200,.LM130-.LFBB6
 1060               	.LM130:
 1061 02f2 832F      		mov r24,r19
 1062 02f4 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 1063               		.stabn	68,0,213,.LM131-.LFBB6
 1064               	.LM131:
 1065 02f6 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 1066               		.stabn	68,0,206,.LM132-.LFBB6
 1067               	.LM132:
 1068 02f8 2370      		andi r18,lo8(3)
 214:_options/writeColor.c **** 
 1069               		.stabn	68,0,214,.LM133-.LFBB6
 1070               	.LM133:
 1071 02fa 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 1072               		.stabn	68,0,264,.LM134-.LFBB6
 1073               	.LM134:
 1074               	/* #APP */
 1075               	 ;  264 "_options/writeColor.c" 1
 1076 02fc 9093 4E00 		sts 78, r25; 
 1077 0300 8093 6000 		sts 96, r24; 
 1078 0304 2093 4200 		sts 66, r18; 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 61


 1079               		
 1080               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 1081               		.stabn	68,0,278,.LM135-.LFBB6
 1082               	.LM135:
 1083               	/* #NOAPP */
 1084 0308 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 1085               		.stabn	68,0,279,.LM136-.LFBB6
 1086               	.LM136:
 1087 030a AD98      		cbi 0x15,5
 1088 030c 87E0      		ldi r24,lo8(7)
 1089 030e 90E0      		ldi r25,0
 1090               	.L33:
 1091               	.LBB135:
 1092               	.LBB136:
 1093               		.stabs	"delay_cyc.c",132,0,0,.Ltext16
 1094               	.Ltext16:
 249:delay_cyc.c   ****       asm("nop");
 1095               		.stabn	68,0,249,.LM137-.LFBB6
 1096               	.LM137:
 1097               	/* #APP */
 1098               	 ;  249 "delay_cyc.c" 1
 1099 0310 0000      		nop
 1100               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 1101               		.stabn	68,0,250,.LM138-.LFBB6
 1102               	.LM138:
 1103               	 ;  250 "delay_cyc.c" 1
 1104 0312 0000      		nop
 1105               	 ;  0 "" 2
 1106               	/* #NOAPP */
 1107 0314 0197      		sbiw r24,1
 225:delay_cyc.c   ****    {
 1108               		.stabn	68,0,225,.LM139-.LFBB6
 1109               	.LM139:
 1110 0316 0097      		sbiw r24,0
 1111 0318 01F4      		brne .L33
 275:delay_cyc.c   **** 		case 3:
 1112               		.stabn	68,0,275,.LM140-.LFBB6
 1113               	.LM140:
 1114               	/* #APP */
 1115               	 ;  275 "delay_cyc.c" 1
 1116 031a 0000      		nop
 1117               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 1118               		.stabn	68,0,277,.LM141-.LFBB6
 1119               	.LM141:
 1120               	 ;  277 "delay_cyc.c" 1
 1121 031c 0000      		nop
 1122               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 1123               		.stabn	68,0,279,.LM142-.LFBB6
 1124               	.LM142:
 1125               	 ;  279 "delay_cyc.c" 1
 1126 031e 0000      		nop
 1127               	 ;  0 "" 2
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 62


 1128               		.stabn	68,0,281,.LM143-.LFBB6
 1129               	.LM143:
 1130               	 ;  281 "delay_cyc.c" 1
 1131 0320 0000      		nop
 1132               	 ;  0 "" 2
 1133               	/* #NOAPP */
 1134               	.LBE136:
 1135               	.LBE135:
 1136               	.LBE134:
 1137               	.LBE133:
 1138               		.stabs	"_options/writeColor.c",132,0,0,.Ltext17
 1139               	.Ltext17:
 385:_options/writeColor.c ****       writeColor(TRUE, *(color+4));    
 1140               		.stabn	68,0,385,.LM144-.LFBB6
 1141               	.LM144:
 1142 0322 3481      		ldd r19,Z+4
 1143               	.LBB137:
 1144               	.LBB138:
 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 1145               		.stabn	68,0,205,.LM145-.LFBB6
 1146               	.LM145:
 1147 0324 232F      		mov r18,r19
 1148 0326 2695      		lsr r18
 1149 0328 2695      		lsr r18
 207:_options/writeColor.c **** 
 1150               		.stabn	68,0,207,.LM146-.LFBB6
 1151               	.LM146:
 1152 032a 822F      		mov r24,r18
 1153 032c 8695      		lsr r24
 1154 032e 8695      		lsr r24
 1155 0330 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 1156               		.stabn	68,0,219,.LM147-.LFBB6
 1157               	.LM147:
 1158 0332 94E0      		ldi r25,lo8(4)
 1159 0334 980F      		add r25,r24
 237:_options/writeColor.c **** 	(                                                        // cycles
 1160               		.stabn	68,0,237,.LM148-.LFBB6
 1161               	.LM148:
 1162               	/* #APP */
 1163               	 ;  237 "_options/writeColor.c" 1
 1164 0336 8330      		cpi   r24, 3 ; 
 1165 0338 01F4      		brne  nothingToDo_463 ; 
 1166 033a 98E0      		ldi   r25, 8 ; 
 1167               		nothingToDo_463: 
 1168               		
 1169               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 1170               		.stabn	68,0,254,.LM149-.LFBB6
 1171               	.LM149:
 1172               	/* #NOAPP */
 1173 033c AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 1174               		.stabn	68,0,255,.LM150-.LFBB6
 1175               	.LM150:
 1176 033e 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 63


 1177               		.stabn	68,0,200,.LM151-.LFBB6
 1178               	.LM151:
 1179 0340 832F      		mov r24,r19
 1180 0342 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 1181               		.stabn	68,0,213,.LM152-.LFBB6
 1182               	.LM152:
 1183 0344 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 1184               		.stabn	68,0,206,.LM153-.LFBB6
 1185               	.LM153:
 1186 0346 2370      		andi r18,lo8(3)
 214:_options/writeColor.c **** 
 1187               		.stabn	68,0,214,.LM154-.LFBB6
 1188               	.LM154:
 1189 0348 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 1190               		.stabn	68,0,264,.LM155-.LFBB6
 1191               	.LM155:
 1192               	/* #APP */
 1193               	 ;  264 "_options/writeColor.c" 1
 1194 034a 9093 4E00 		sts 78, r25; 
 1195 034e 8093 6000 		sts 96, r24; 
 1196 0352 2093 4200 		sts 66, r18; 
 1197               		
 1198               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 1199               		.stabn	68,0,278,.LM156-.LFBB6
 1200               	.LM156:
 1201               	/* #NOAPP */
 1202 0356 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 1203               		.stabn	68,0,279,.LM157-.LFBB6
 1204               	.LM157:
 1205 0358 AD98      		cbi 0x15,5
 1206 035a 87E0      		ldi r24,lo8(7)
 1207 035c 90E0      		ldi r25,0
 1208               	.L35:
 1209               	.LBB139:
 1210               	.LBB140:
 1211               		.stabs	"delay_cyc.c",132,0,0,.Ltext18
 1212               	.Ltext18:
 249:delay_cyc.c   ****       asm("nop");
 1213               		.stabn	68,0,249,.LM158-.LFBB6
 1214               	.LM158:
 1215               	/* #APP */
 1216               	 ;  249 "delay_cyc.c" 1
 1217 035e 0000      		nop
 1218               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 1219               		.stabn	68,0,250,.LM159-.LFBB6
 1220               	.LM159:
 1221               	 ;  250 "delay_cyc.c" 1
 1222 0360 0000      		nop
 1223               	 ;  0 "" 2
 1224               	/* #NOAPP */
 1225 0362 0197      		sbiw r24,1
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 64


 225:delay_cyc.c   ****    {
 1226               		.stabn	68,0,225,.LM160-.LFBB6
 1227               	.LM160:
 1228 0364 0097      		sbiw r24,0
 1229 0366 01F4      		brne .L35
 275:delay_cyc.c   **** 		case 3:
 1230               		.stabn	68,0,275,.LM161-.LFBB6
 1231               	.LM161:
 1232               	/* #APP */
 1233               	 ;  275 "delay_cyc.c" 1
 1234 0368 0000      		nop
 1235               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 1236               		.stabn	68,0,277,.LM162-.LFBB6
 1237               	.LM162:
 1238               	 ;  277 "delay_cyc.c" 1
 1239 036a 0000      		nop
 1240               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 1241               		.stabn	68,0,279,.LM163-.LFBB6
 1242               	.LM163:
 1243               	 ;  279 "delay_cyc.c" 1
 1244 036c 0000      		nop
 1245               	 ;  0 "" 2
 1246               		.stabn	68,0,281,.LM164-.LFBB6
 1247               	.LM164:
 1248               	 ;  281 "delay_cyc.c" 1
 1249 036e 0000      		nop
 1250               	 ;  0 "" 2
 1251               	/* #NOAPP */
 1252               	.LBE140:
 1253               	.LBE139:
 1254               	.LBE138:
 1255               	.LBE137:
 1256               		.stabs	"_options/writeColor.c",132,0,0,.Ltext19
 1257               	.Ltext19:
 386:_options/writeColor.c ****       writeColor(TRUE, *(color+5));                
 1258               		.stabn	68,0,386,.LM165-.LFBB6
 1259               	.LM165:
 1260 0370 3581      		ldd r19,Z+5
 1261               	.LBB141:
 1262               	.LBB142:
 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 1263               		.stabn	68,0,205,.LM166-.LFBB6
 1264               	.LM166:
 1265 0372 232F      		mov r18,r19
 1266 0374 2695      		lsr r18
 1267 0376 2695      		lsr r18
 207:_options/writeColor.c **** 
 1268               		.stabn	68,0,207,.LM167-.LFBB6
 1269               	.LM167:
 1270 0378 822F      		mov r24,r18
 1271 037a 8695      		lsr r24
 1272 037c 8695      		lsr r24
 1273 037e 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 1274               		.stabn	68,0,219,.LM168-.LFBB6
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 65


 1275               	.LM168:
 1276 0380 94E0      		ldi r25,lo8(4)
 1277 0382 980F      		add r25,r24
 237:_options/writeColor.c **** 	(                                                        // cycles
 1278               		.stabn	68,0,237,.LM169-.LFBB6
 1279               	.LM169:
 1280               	/* #APP */
 1281               	 ;  237 "_options/writeColor.c" 1
 1282 0384 8330      		cpi   r24, 3 ; 
 1283 0386 01F4      		brne  nothingToDo_511 ; 
 1284 0388 98E0      		ldi   r25, 8 ; 
 1285               		nothingToDo_511: 
 1286               		
 1287               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 1288               		.stabn	68,0,254,.LM170-.LFBB6
 1289               	.LM170:
 1290               	/* #NOAPP */
 1291 038a AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 1292               		.stabn	68,0,255,.LM171-.LFBB6
 1293               	.LM171:
 1294 038c 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 1295               		.stabn	68,0,200,.LM172-.LFBB6
 1296               	.LM172:
 1297 038e 832F      		mov r24,r19
 1298 0390 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 1299               		.stabn	68,0,213,.LM173-.LFBB6
 1300               	.LM173:
 1301 0392 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 1302               		.stabn	68,0,206,.LM174-.LFBB6
 1303               	.LM174:
 1304 0394 2370      		andi r18,lo8(3)
 214:_options/writeColor.c **** 
 1305               		.stabn	68,0,214,.LM175-.LFBB6
 1306               	.LM175:
 1307 0396 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 1308               		.stabn	68,0,264,.LM176-.LFBB6
 1309               	.LM176:
 1310               	/* #APP */
 1311               	 ;  264 "_options/writeColor.c" 1
 1312 0398 9093 4E00 		sts 78, r25; 
 1313 039c 8093 6000 		sts 96, r24; 
 1314 03a0 2093 4200 		sts 66, r18; 
 1315               		
 1316               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 1317               		.stabn	68,0,278,.LM177-.LFBB6
 1318               	.LM177:
 1319               	/* #NOAPP */
 1320 03a4 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 1321               		.stabn	68,0,279,.LM178-.LFBB6
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 66


 1322               	.LM178:
 1323 03a6 AD98      		cbi 0x15,5
 1324 03a8 87E0      		ldi r24,lo8(7)
 1325 03aa 90E0      		ldi r25,0
 1326               	.L37:
 1327               	.LBB143:
 1328               	.LBB144:
 1329               		.stabs	"delay_cyc.c",132,0,0,.Ltext20
 1330               	.Ltext20:
 249:delay_cyc.c   ****       asm("nop");
 1331               		.stabn	68,0,249,.LM179-.LFBB6
 1332               	.LM179:
 1333               	/* #APP */
 1334               	 ;  249 "delay_cyc.c" 1
 1335 03ac 0000      		nop
 1336               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 1337               		.stabn	68,0,250,.LM180-.LFBB6
 1338               	.LM180:
 1339               	 ;  250 "delay_cyc.c" 1
 1340 03ae 0000      		nop
 1341               	 ;  0 "" 2
 1342               	/* #NOAPP */
 1343 03b0 0197      		sbiw r24,1
 225:delay_cyc.c   ****    {
 1344               		.stabn	68,0,225,.LM181-.LFBB6
 1345               	.LM181:
 1346 03b2 0097      		sbiw r24,0
 1347 03b4 01F4      		brne .L37
 275:delay_cyc.c   **** 		case 3:
 1348               		.stabn	68,0,275,.LM182-.LFBB6
 1349               	.LM182:
 1350               	/* #APP */
 1351               	 ;  275 "delay_cyc.c" 1
 1352 03b6 0000      		nop
 1353               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 1354               		.stabn	68,0,277,.LM183-.LFBB6
 1355               	.LM183:
 1356               	 ;  277 "delay_cyc.c" 1
 1357 03b8 0000      		nop
 1358               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 1359               		.stabn	68,0,279,.LM184-.LFBB6
 1360               	.LM184:
 1361               	 ;  279 "delay_cyc.c" 1
 1362 03ba 0000      		nop
 1363               	 ;  0 "" 2
 1364               		.stabn	68,0,281,.LM185-.LFBB6
 1365               	.LM185:
 1366               	 ;  281 "delay_cyc.c" 1
 1367 03bc 0000      		nop
 1368               	 ;  0 "" 2
 1369               	/* #NOAPP */
 1370               	.LBE144:
 1371               	.LBE143:
 1372               	.LBE142:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 67


 1373               	.LBE141:
 1374               		.stabs	"_options/writeColor.c",132,0,0,.Ltext21
 1375               	.Ltext21:
 387:_options/writeColor.c ****       writeColor(TRUE, *(color+6));  
 1376               		.stabn	68,0,387,.LM186-.LFBB6
 1377               	.LM186:
 1378 03be 3681      		ldd r19,Z+6
 1379               	.LBB145:
 1380               	.LBB146:
 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 1381               		.stabn	68,0,205,.LM187-.LFBB6
 1382               	.LM187:
 1383 03c0 232F      		mov r18,r19
 1384 03c2 2695      		lsr r18
 1385 03c4 2695      		lsr r18
 207:_options/writeColor.c **** 
 1386               		.stabn	68,0,207,.LM188-.LFBB6
 1387               	.LM188:
 1388 03c6 822F      		mov r24,r18
 1389 03c8 8695      		lsr r24
 1390 03ca 8695      		lsr r24
 1391 03cc 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 1392               		.stabn	68,0,219,.LM189-.LFBB6
 1393               	.LM189:
 1394 03ce 94E0      		ldi r25,lo8(4)
 1395 03d0 980F      		add r25,r24
 237:_options/writeColor.c **** 	(                                                        // cycles
 1396               		.stabn	68,0,237,.LM190-.LFBB6
 1397               	.LM190:
 1398               	/* #APP */
 1399               	 ;  237 "_options/writeColor.c" 1
 1400 03d2 8330      		cpi   r24, 3 ; 
 1401 03d4 01F4      		brne  nothingToDo_559 ; 
 1402 03d6 98E0      		ldi   r25, 8 ; 
 1403               		nothingToDo_559: 
 1404               		
 1405               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 1406               		.stabn	68,0,254,.LM191-.LFBB6
 1407               	.LM191:
 1408               	/* #NOAPP */
 1409 03d8 AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 1410               		.stabn	68,0,255,.LM192-.LFBB6
 1411               	.LM192:
 1412 03da 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 1413               		.stabn	68,0,200,.LM193-.LFBB6
 1414               	.LM193:
 1415 03dc 832F      		mov r24,r19
 1416 03de 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 1417               		.stabn	68,0,213,.LM194-.LFBB6
 1418               	.LM194:
 1419 03e0 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 68


 1420               		.stabn	68,0,206,.LM195-.LFBB6
 1421               	.LM195:
 1422 03e2 2370      		andi r18,lo8(3)
 214:_options/writeColor.c **** 
 1423               		.stabn	68,0,214,.LM196-.LFBB6
 1424               	.LM196:
 1425 03e4 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 1426               		.stabn	68,0,264,.LM197-.LFBB6
 1427               	.LM197:
 1428               	/* #APP */
 1429               	 ;  264 "_options/writeColor.c" 1
 1430 03e6 9093 4E00 		sts 78, r25; 
 1431 03ea 8093 6000 		sts 96, r24; 
 1432 03ee 2093 4200 		sts 66, r18; 
 1433               		
 1434               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 1435               		.stabn	68,0,278,.LM198-.LFBB6
 1436               	.LM198:
 1437               	/* #NOAPP */
 1438 03f2 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 1439               		.stabn	68,0,279,.LM199-.LFBB6
 1440               	.LM199:
 1441 03f4 AD98      		cbi 0x15,5
 1442 03f6 87E0      		ldi r24,lo8(7)
 1443 03f8 90E0      		ldi r25,0
 1444               	.L39:
 1445               	.LBB147:
 1446               	.LBB148:
 1447               		.stabs	"delay_cyc.c",132,0,0,.Ltext22
 1448               	.Ltext22:
 249:delay_cyc.c   ****       asm("nop");
 1449               		.stabn	68,0,249,.LM200-.LFBB6
 1450               	.LM200:
 1451               	/* #APP */
 1452               	 ;  249 "delay_cyc.c" 1
 1453 03fa 0000      		nop
 1454               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 1455               		.stabn	68,0,250,.LM201-.LFBB6
 1456               	.LM201:
 1457               	 ;  250 "delay_cyc.c" 1
 1458 03fc 0000      		nop
 1459               	 ;  0 "" 2
 1460               	/* #NOAPP */
 1461 03fe 0197      		sbiw r24,1
 225:delay_cyc.c   ****    {
 1462               		.stabn	68,0,225,.LM202-.LFBB6
 1463               	.LM202:
 1464 0400 0097      		sbiw r24,0
 1465 0402 01F4      		brne .L39
 275:delay_cyc.c   **** 		case 3:
 1466               		.stabn	68,0,275,.LM203-.LFBB6
 1467               	.LM203:
 1468               	/* #APP */
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 69


 1469               	 ;  275 "delay_cyc.c" 1
 1470 0404 0000      		nop
 1471               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 1472               		.stabn	68,0,277,.LM204-.LFBB6
 1473               	.LM204:
 1474               	 ;  277 "delay_cyc.c" 1
 1475 0406 0000      		nop
 1476               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 1477               		.stabn	68,0,279,.LM205-.LFBB6
 1478               	.LM205:
 1479               	 ;  279 "delay_cyc.c" 1
 1480 0408 0000      		nop
 1481               	 ;  0 "" 2
 1482               		.stabn	68,0,281,.LM206-.LFBB6
 1483               	.LM206:
 1484               	 ;  281 "delay_cyc.c" 1
 1485 040a 0000      		nop
 1486               	 ;  0 "" 2
 1487               	/* #NOAPP */
 1488               	.LBE148:
 1489               	.LBE147:
 1490               	.LBE146:
 1491               	.LBE145:
 1492               		.stabs	"_options/writeColor.c",132,0,0,.Ltext23
 1493               	.Ltext23:
 388:_options/writeColor.c ****       writeColor(TRUE, *(color+7));                         
 1494               		.stabn	68,0,388,.LM207-.LFBB6
 1495               	.LM207:
 1496 040c 3781      		ldd r19,Z+7
 1497               	.LBB149:
 1498               	.LBB150:
 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 1499               		.stabn	68,0,205,.LM208-.LFBB6
 1500               	.LM208:
 1501 040e 232F      		mov r18,r19
 1502 0410 2695      		lsr r18
 1503 0412 2695      		lsr r18
 207:_options/writeColor.c **** 
 1504               		.stabn	68,0,207,.LM209-.LFBB6
 1505               	.LM209:
 1506 0414 822F      		mov r24,r18
 1507 0416 8695      		lsr r24
 1508 0418 8695      		lsr r24
 1509 041a 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 1510               		.stabn	68,0,219,.LM210-.LFBB6
 1511               	.LM210:
 1512 041c 94E0      		ldi r25,lo8(4)
 1513 041e 980F      		add r25,r24
 237:_options/writeColor.c **** 	(                                                        // cycles
 1514               		.stabn	68,0,237,.LM211-.LFBB6
 1515               	.LM211:
 1516               	/* #APP */
 1517               	 ;  237 "_options/writeColor.c" 1
 1518 0420 8330      		cpi   r24, 3 ; 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 70


 1519 0422 01F4      		brne  nothingToDo_607 ; 
 1520 0424 98E0      		ldi   r25, 8 ; 
 1521               		nothingToDo_607: 
 1522               		
 1523               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 1524               		.stabn	68,0,254,.LM212-.LFBB6
 1525               	.LM212:
 1526               	/* #NOAPP */
 1527 0426 AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 1528               		.stabn	68,0,255,.LM213-.LFBB6
 1529               	.LM213:
 1530 0428 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 1531               		.stabn	68,0,200,.LM214-.LFBB6
 1532               	.LM214:
 1533 042a 832F      		mov r24,r19
 1534 042c 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 1535               		.stabn	68,0,213,.LM215-.LFBB6
 1536               	.LM215:
 1537 042e 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 1538               		.stabn	68,0,206,.LM216-.LFBB6
 1539               	.LM216:
 1540 0430 2370      		andi r18,lo8(3)
 214:_options/writeColor.c **** 
 1541               		.stabn	68,0,214,.LM217-.LFBB6
 1542               	.LM217:
 1543 0432 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 1544               		.stabn	68,0,264,.LM218-.LFBB6
 1545               	.LM218:
 1546               	/* #APP */
 1547               	 ;  264 "_options/writeColor.c" 1
 1548 0434 9093 4E00 		sts 78, r25; 
 1549 0438 8093 6000 		sts 96, r24; 
 1550 043c 2093 4200 		sts 66, r18; 
 1551               		
 1552               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 1553               		.stabn	68,0,278,.LM219-.LFBB6
 1554               	.LM219:
 1555               	/* #NOAPP */
 1556 0440 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 1557               		.stabn	68,0,279,.LM220-.LFBB6
 1558               	.LM220:
 1559 0442 AD98      		cbi 0x15,5
 1560 0444 87E0      		ldi r24,lo8(7)
 1561 0446 90E0      		ldi r25,0
 1562               	.L41:
 1563               	.LBB151:
 1564               	.LBB152:
 1565               		.stabs	"delay_cyc.c",132,0,0,.Ltext24
 1566               	.Ltext24:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 71


 249:delay_cyc.c   ****       asm("nop");
 1567               		.stabn	68,0,249,.LM221-.LFBB6
 1568               	.LM221:
 1569               	/* #APP */
 1570               	 ;  249 "delay_cyc.c" 1
 1571 0448 0000      		nop
 1572               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 1573               		.stabn	68,0,250,.LM222-.LFBB6
 1574               	.LM222:
 1575               	 ;  250 "delay_cyc.c" 1
 1576 044a 0000      		nop
 1577               	 ;  0 "" 2
 1578               	/* #NOAPP */
 1579 044c 0197      		sbiw r24,1
 225:delay_cyc.c   ****    {
 1580               		.stabn	68,0,225,.LM223-.LFBB6
 1581               	.LM223:
 1582 044e 0097      		sbiw r24,0
 1583 0450 01F4      		brne .L41
 275:delay_cyc.c   **** 		case 3:
 1584               		.stabn	68,0,275,.LM224-.LFBB6
 1585               	.LM224:
 1586               	/* #APP */
 1587               	 ;  275 "delay_cyc.c" 1
 1588 0452 0000      		nop
 1589               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 1590               		.stabn	68,0,277,.LM225-.LFBB6
 1591               	.LM225:
 1592               	 ;  277 "delay_cyc.c" 1
 1593 0454 0000      		nop
 1594               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 1595               		.stabn	68,0,279,.LM226-.LFBB6
 1596               	.LM226:
 1597               	 ;  279 "delay_cyc.c" 1
 1598 0456 0000      		nop
 1599               	 ;  0 "" 2
 1600               		.stabn	68,0,281,.LM227-.LFBB6
 1601               	.LM227:
 1602               	 ;  281 "delay_cyc.c" 1
 1603 0458 0000      		nop
 1604               	 ;  0 "" 2
 1605               	/* #NOAPP */
 1606               	.LBE152:
 1607               	.LBE151:
 1608               	.LBE150:
 1609               	.LBE149:
 1610               		.stabs	"_options/writeColor.c",132,0,0,.Ltext25
 1611               	.Ltext25:
 389:_options/writeColor.c ****       writeColor(TRUE, *(color+8));                         
 1612               		.stabn	68,0,389,.LM228-.LFBB6
 1613               	.LM228:
 1614 045a 3085      		ldd r19,Z+8
 1615               	.LBB153:
 1616               	.LBB154:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 72


 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 1617               		.stabn	68,0,205,.LM229-.LFBB6
 1618               	.LM229:
 1619 045c 232F      		mov r18,r19
 1620 045e 2695      		lsr r18
 1621 0460 2695      		lsr r18
 207:_options/writeColor.c **** 
 1622               		.stabn	68,0,207,.LM230-.LFBB6
 1623               	.LM230:
 1624 0462 822F      		mov r24,r18
 1625 0464 8695      		lsr r24
 1626 0466 8695      		lsr r24
 1627 0468 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 1628               		.stabn	68,0,219,.LM231-.LFBB6
 1629               	.LM231:
 1630 046a 94E0      		ldi r25,lo8(4)
 1631 046c 980F      		add r25,r24
 237:_options/writeColor.c **** 	(                                                        // cycles
 1632               		.stabn	68,0,237,.LM232-.LFBB6
 1633               	.LM232:
 1634               	/* #APP */
 1635               	 ;  237 "_options/writeColor.c" 1
 1636 046e 8330      		cpi   r24, 3 ; 
 1637 0470 01F4      		brne  nothingToDo_655 ; 
 1638 0472 98E0      		ldi   r25, 8 ; 
 1639               		nothingToDo_655: 
 1640               		
 1641               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 1642               		.stabn	68,0,254,.LM233-.LFBB6
 1643               	.LM233:
 1644               	/* #NOAPP */
 1645 0474 AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 1646               		.stabn	68,0,255,.LM234-.LFBB6
 1647               	.LM234:
 1648 0476 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 1649               		.stabn	68,0,200,.LM235-.LFBB6
 1650               	.LM235:
 1651 0478 832F      		mov r24,r19
 1652 047a 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 1653               		.stabn	68,0,213,.LM236-.LFBB6
 1654               	.LM236:
 1655 047c 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 1656               		.stabn	68,0,206,.LM237-.LFBB6
 1657               	.LM237:
 1658 047e 2370      		andi r18,lo8(3)
 214:_options/writeColor.c **** 
 1659               		.stabn	68,0,214,.LM238-.LFBB6
 1660               	.LM238:
 1661 0480 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 1662               		.stabn	68,0,264,.LM239-.LFBB6
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 73


 1663               	.LM239:
 1664               	/* #APP */
 1665               	 ;  264 "_options/writeColor.c" 1
 1666 0482 9093 4E00 		sts 78, r25; 
 1667 0486 8093 6000 		sts 96, r24; 
 1668 048a 2093 4200 		sts 66, r18; 
 1669               		
 1670               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 1671               		.stabn	68,0,278,.LM240-.LFBB6
 1672               	.LM240:
 1673               	/* #NOAPP */
 1674 048e 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 1675               		.stabn	68,0,279,.LM241-.LFBB6
 1676               	.LM241:
 1677 0490 AD98      		cbi 0x15,5
 1678 0492 87E0      		ldi r24,lo8(7)
 1679 0494 90E0      		ldi r25,0
 1680               	.L43:
 1681               	.LBB155:
 1682               	.LBB156:
 1683               		.stabs	"delay_cyc.c",132,0,0,.Ltext26
 1684               	.Ltext26:
 249:delay_cyc.c   ****       asm("nop");
 1685               		.stabn	68,0,249,.LM242-.LFBB6
 1686               	.LM242:
 1687               	/* #APP */
 1688               	 ;  249 "delay_cyc.c" 1
 1689 0496 0000      		nop
 1690               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 1691               		.stabn	68,0,250,.LM243-.LFBB6
 1692               	.LM243:
 1693               	 ;  250 "delay_cyc.c" 1
 1694 0498 0000      		nop
 1695               	 ;  0 "" 2
 1696               	/* #NOAPP */
 1697 049a 0197      		sbiw r24,1
 225:delay_cyc.c   ****    {
 1698               		.stabn	68,0,225,.LM244-.LFBB6
 1699               	.LM244:
 1700 049c 0097      		sbiw r24,0
 1701 049e 01F4      		brne .L43
 275:delay_cyc.c   **** 		case 3:
 1702               		.stabn	68,0,275,.LM245-.LFBB6
 1703               	.LM245:
 1704               	/* #APP */
 1705               	 ;  275 "delay_cyc.c" 1
 1706 04a0 0000      		nop
 1707               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 1708               		.stabn	68,0,277,.LM246-.LFBB6
 1709               	.LM246:
 1710               	 ;  277 "delay_cyc.c" 1
 1711 04a2 0000      		nop
 1712               	 ;  0 "" 2
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 74


 279:delay_cyc.c   **** 		case 1:
 1713               		.stabn	68,0,279,.LM247-.LFBB6
 1714               	.LM247:
 1715               	 ;  279 "delay_cyc.c" 1
 1716 04a4 0000      		nop
 1717               	 ;  0 "" 2
 1718               		.stabn	68,0,281,.LM248-.LFBB6
 1719               	.LM248:
 1720               	 ;  281 "delay_cyc.c" 1
 1721 04a6 0000      		nop
 1722               	 ;  0 "" 2
 1723               	/* #NOAPP */
 1724               	.LBE156:
 1725               	.LBE155:
 1726               	.LBE154:
 1727               	.LBE153:
 1728               		.stabs	"_options/writeColor.c",132,0,0,.Ltext27
 1729               	.Ltext27:
 390:_options/writeColor.c **** 		writeColor(TRUE, *(color+9));                         
 1730               		.stabn	68,0,390,.LM249-.LFBB6
 1731               	.LM249:
 1732 04a8 3185      		ldd r19,Z+9
 1733               	.LBB157:
 1734               	.LBB158:
 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 1735               		.stabn	68,0,205,.LM250-.LFBB6
 1736               	.LM250:
 1737 04aa 232F      		mov r18,r19
 1738 04ac 2695      		lsr r18
 1739 04ae 2695      		lsr r18
 207:_options/writeColor.c **** 
 1740               		.stabn	68,0,207,.LM251-.LFBB6
 1741               	.LM251:
 1742 04b0 822F      		mov r24,r18
 1743 04b2 8695      		lsr r24
 1744 04b4 8695      		lsr r24
 1745 04b6 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 1746               		.stabn	68,0,219,.LM252-.LFBB6
 1747               	.LM252:
 1748 04b8 94E0      		ldi r25,lo8(4)
 1749 04ba 980F      		add r25,r24
 237:_options/writeColor.c **** 	(                                                        // cycles
 1750               		.stabn	68,0,237,.LM253-.LFBB6
 1751               	.LM253:
 1752               	/* #APP */
 1753               	 ;  237 "_options/writeColor.c" 1
 1754 04bc 8330      		cpi   r24, 3 ; 
 1755 04be 01F4      		brne  nothingToDo_703 ; 
 1756 04c0 98E0      		ldi   r25, 8 ; 
 1757               		nothingToDo_703: 
 1758               		
 1759               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 1760               		.stabn	68,0,254,.LM254-.LFBB6
 1761               	.LM254:
 1762               	/* #NOAPP */
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 75


 1763 04c2 AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 1764               		.stabn	68,0,255,.LM255-.LFBB6
 1765               	.LM255:
 1766 04c4 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 1767               		.stabn	68,0,200,.LM256-.LFBB6
 1768               	.LM256:
 1769 04c6 832F      		mov r24,r19
 1770 04c8 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 1771               		.stabn	68,0,213,.LM257-.LFBB6
 1772               	.LM257:
 1773 04ca 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 1774               		.stabn	68,0,206,.LM258-.LFBB6
 1775               	.LM258:
 1776 04cc 2370      		andi r18,lo8(3)
 214:_options/writeColor.c **** 
 1777               		.stabn	68,0,214,.LM259-.LFBB6
 1778               	.LM259:
 1779 04ce 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 1780               		.stabn	68,0,264,.LM260-.LFBB6
 1781               	.LM260:
 1782               	/* #APP */
 1783               	 ;  264 "_options/writeColor.c" 1
 1784 04d0 9093 4E00 		sts 78, r25; 
 1785 04d4 8093 6000 		sts 96, r24; 
 1786 04d8 2093 4200 		sts 66, r18; 
 1787               		
 1788               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 1789               		.stabn	68,0,278,.LM261-.LFBB6
 1790               	.LM261:
 1791               	/* #NOAPP */
 1792 04dc 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 1793               		.stabn	68,0,279,.LM262-.LFBB6
 1794               	.LM262:
 1795 04de AD98      		cbi 0x15,5
 1796 04e0 87E0      		ldi r24,lo8(7)
 1797 04e2 90E0      		ldi r25,0
 1798               	.L45:
 1799               	.LBB159:
 1800               	.LBB160:
 1801               		.stabs	"delay_cyc.c",132,0,0,.Ltext28
 1802               	.Ltext28:
 249:delay_cyc.c   ****       asm("nop");
 1803               		.stabn	68,0,249,.LM263-.LFBB6
 1804               	.LM263:
 1805               	/* #APP */
 1806               	 ;  249 "delay_cyc.c" 1
 1807 04e4 0000      		nop
 1808               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 1809               		.stabn	68,0,250,.LM264-.LFBB6
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 76


 1810               	.LM264:
 1811               	 ;  250 "delay_cyc.c" 1
 1812 04e6 0000      		nop
 1813               	 ;  0 "" 2
 1814               	/* #NOAPP */
 1815 04e8 0197      		sbiw r24,1
 225:delay_cyc.c   ****    {
 1816               		.stabn	68,0,225,.LM265-.LFBB6
 1817               	.LM265:
 1818 04ea 0097      		sbiw r24,0
 1819 04ec 01F4      		brne .L45
 275:delay_cyc.c   **** 		case 3:
 1820               		.stabn	68,0,275,.LM266-.LFBB6
 1821               	.LM266:
 1822               	/* #APP */
 1823               	 ;  275 "delay_cyc.c" 1
 1824 04ee 0000      		nop
 1825               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 1826               		.stabn	68,0,277,.LM267-.LFBB6
 1827               	.LM267:
 1828               	 ;  277 "delay_cyc.c" 1
 1829 04f0 0000      		nop
 1830               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 1831               		.stabn	68,0,279,.LM268-.LFBB6
 1832               	.LM268:
 1833               	 ;  279 "delay_cyc.c" 1
 1834 04f2 0000      		nop
 1835               	 ;  0 "" 2
 1836               		.stabn	68,0,281,.LM269-.LFBB6
 1837               	.LM269:
 1838               	 ;  281 "delay_cyc.c" 1
 1839 04f4 0000      		nop
 1840               	 ;  0 "" 2
 1841               	/* #NOAPP */
 1842               	.LBE160:
 1843               	.LBE159:
 1844               	.LBE158:
 1845               	.LBE157:
 1846               		.stabs	"_options/writeColor.c",132,0,0,.Ltext29
 1847               	.Ltext29:
 391:_options/writeColor.c ****       writeColor(TRUE, *(color+10));                         
 1848               		.stabn	68,0,391,.LM270-.LFBB6
 1849               	.LM270:
 1850 04f6 3285      		ldd r19,Z+10
 1851               	.LBB161:
 1852               	.LBB162:
 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 1853               		.stabn	68,0,205,.LM271-.LFBB6
 1854               	.LM271:
 1855 04f8 232F      		mov r18,r19
 1856 04fa 2695      		lsr r18
 1857 04fc 2695      		lsr r18
 207:_options/writeColor.c **** 
 1858               		.stabn	68,0,207,.LM272-.LFBB6
 1859               	.LM272:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 77


 1860 04fe 822F      		mov r24,r18
 1861 0500 8695      		lsr r24
 1862 0502 8695      		lsr r24
 1863 0504 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 1864               		.stabn	68,0,219,.LM273-.LFBB6
 1865               	.LM273:
 1866 0506 94E0      		ldi r25,lo8(4)
 1867 0508 980F      		add r25,r24
 237:_options/writeColor.c **** 	(                                                        // cycles
 1868               		.stabn	68,0,237,.LM274-.LFBB6
 1869               	.LM274:
 1870               	/* #APP */
 1871               	 ;  237 "_options/writeColor.c" 1
 1872 050a 8330      		cpi   r24, 3 ; 
 1873 050c 01F4      		brne  nothingToDo_751 ; 
 1874 050e 98E0      		ldi   r25, 8 ; 
 1875               		nothingToDo_751: 
 1876               		
 1877               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 1878               		.stabn	68,0,254,.LM275-.LFBB6
 1879               	.LM275:
 1880               	/* #NOAPP */
 1881 0510 AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 1882               		.stabn	68,0,255,.LM276-.LFBB6
 1883               	.LM276:
 1884 0512 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 1885               		.stabn	68,0,200,.LM277-.LFBB6
 1886               	.LM277:
 1887 0514 832F      		mov r24,r19
 1888 0516 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 1889               		.stabn	68,0,213,.LM278-.LFBB6
 1890               	.LM278:
 1891 0518 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 1892               		.stabn	68,0,206,.LM279-.LFBB6
 1893               	.LM279:
 1894 051a 2370      		andi r18,lo8(3)
 214:_options/writeColor.c **** 
 1895               		.stabn	68,0,214,.LM280-.LFBB6
 1896               	.LM280:
 1897 051c 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 1898               		.stabn	68,0,264,.LM281-.LFBB6
 1899               	.LM281:
 1900               	/* #APP */
 1901               	 ;  264 "_options/writeColor.c" 1
 1902 051e 9093 4E00 		sts 78, r25; 
 1903 0522 8093 6000 		sts 96, r24; 
 1904 0526 2093 4200 		sts 66, r18; 
 1905               		
 1906               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 78


 1907               		.stabn	68,0,278,.LM282-.LFBB6
 1908               	.LM282:
 1909               	/* #NOAPP */
 1910 052a 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 1911               		.stabn	68,0,279,.LM283-.LFBB6
 1912               	.LM283:
 1913 052c AD98      		cbi 0x15,5
 1914 052e 87E0      		ldi r24,lo8(7)
 1915 0530 90E0      		ldi r25,0
 1916               	.L47:
 1917               	.LBB163:
 1918               	.LBB164:
 1919               		.stabs	"delay_cyc.c",132,0,0,.Ltext30
 1920               	.Ltext30:
 249:delay_cyc.c   ****       asm("nop");
 1921               		.stabn	68,0,249,.LM284-.LFBB6
 1922               	.LM284:
 1923               	/* #APP */
 1924               	 ;  249 "delay_cyc.c" 1
 1925 0532 0000      		nop
 1926               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 1927               		.stabn	68,0,250,.LM285-.LFBB6
 1928               	.LM285:
 1929               	 ;  250 "delay_cyc.c" 1
 1930 0534 0000      		nop
 1931               	 ;  0 "" 2
 1932               	/* #NOAPP */
 1933 0536 0197      		sbiw r24,1
 225:delay_cyc.c   ****    {
 1934               		.stabn	68,0,225,.LM286-.LFBB6
 1935               	.LM286:
 1936 0538 0097      		sbiw r24,0
 1937 053a 01F4      		brne .L47
 275:delay_cyc.c   **** 		case 3:
 1938               		.stabn	68,0,275,.LM287-.LFBB6
 1939               	.LM287:
 1940               	/* #APP */
 1941               	 ;  275 "delay_cyc.c" 1
 1942 053c 0000      		nop
 1943               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 1944               		.stabn	68,0,277,.LM288-.LFBB6
 1945               	.LM288:
 1946               	 ;  277 "delay_cyc.c" 1
 1947 053e 0000      		nop
 1948               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 1949               		.stabn	68,0,279,.LM289-.LFBB6
 1950               	.LM289:
 1951               	 ;  279 "delay_cyc.c" 1
 1952 0540 0000      		nop
 1953               	 ;  0 "" 2
 1954               		.stabn	68,0,281,.LM290-.LFBB6
 1955               	.LM290:
 1956               	 ;  281 "delay_cyc.c" 1
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 79


 1957 0542 0000      		nop
 1958               	 ;  0 "" 2
 1959               	/* #NOAPP */
 1960               	.LBE164:
 1961               	.LBE163:
 1962               	.LBE162:
 1963               	.LBE161:
 1964               		.stabs	"_options/writeColor.c",132,0,0,.Ltext31
 1965               	.Ltext31:
 392:_options/writeColor.c ****       writeColor(TRUE, *(color+11));                         
 1966               		.stabn	68,0,392,.LM291-.LFBB6
 1967               	.LM291:
 1968 0544 3385      		ldd r19,Z+11
 1969               	.LBB165:
 1970               	.LBB166:
 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 1971               		.stabn	68,0,205,.LM292-.LFBB6
 1972               	.LM292:
 1973 0546 232F      		mov r18,r19
 1974 0548 2695      		lsr r18
 1975 054a 2695      		lsr r18
 207:_options/writeColor.c **** 
 1976               		.stabn	68,0,207,.LM293-.LFBB6
 1977               	.LM293:
 1978 054c 822F      		mov r24,r18
 1979 054e 8695      		lsr r24
 1980 0550 8695      		lsr r24
 1981 0552 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 1982               		.stabn	68,0,219,.LM294-.LFBB6
 1983               	.LM294:
 1984 0554 94E0      		ldi r25,lo8(4)
 1985 0556 980F      		add r25,r24
 237:_options/writeColor.c **** 	(                                                        // cycles
 1986               		.stabn	68,0,237,.LM295-.LFBB6
 1987               	.LM295:
 1988               	/* #APP */
 1989               	 ;  237 "_options/writeColor.c" 1
 1990 0558 8330      		cpi   r24, 3 ; 
 1991 055a 01F4      		brne  nothingToDo_799 ; 
 1992 055c 98E0      		ldi   r25, 8 ; 
 1993               		nothingToDo_799: 
 1994               		
 1995               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 1996               		.stabn	68,0,254,.LM296-.LFBB6
 1997               	.LM296:
 1998               	/* #NOAPP */
 1999 055e AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 2000               		.stabn	68,0,255,.LM297-.LFBB6
 2001               	.LM297:
 2002 0560 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 2003               		.stabn	68,0,200,.LM298-.LFBB6
 2004               	.LM298:
 2005 0562 832F      		mov r24,r19
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 80


 2006 0564 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 2007               		.stabn	68,0,213,.LM299-.LFBB6
 2008               	.LM299:
 2009 0566 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 2010               		.stabn	68,0,206,.LM300-.LFBB6
 2011               	.LM300:
 2012 0568 2370      		andi r18,lo8(3)
 214:_options/writeColor.c **** 
 2013               		.stabn	68,0,214,.LM301-.LFBB6
 2014               	.LM301:
 2015 056a 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 2016               		.stabn	68,0,264,.LM302-.LFBB6
 2017               	.LM302:
 2018               	/* #APP */
 2019               	 ;  264 "_options/writeColor.c" 1
 2020 056c 9093 4E00 		sts 78, r25; 
 2021 0570 8093 6000 		sts 96, r24; 
 2022 0574 2093 4200 		sts 66, r18; 
 2023               		
 2024               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 2025               		.stabn	68,0,278,.LM303-.LFBB6
 2026               	.LM303:
 2027               	/* #NOAPP */
 2028 0578 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 2029               		.stabn	68,0,279,.LM304-.LFBB6
 2030               	.LM304:
 2031 057a AD98      		cbi 0x15,5
 2032 057c 87E0      		ldi r24,lo8(7)
 2033 057e 90E0      		ldi r25,0
 2034               	.L49:
 2035               	.LBB167:
 2036               	.LBB168:
 2037               		.stabs	"delay_cyc.c",132,0,0,.Ltext32
 2038               	.Ltext32:
 249:delay_cyc.c   ****       asm("nop");
 2039               		.stabn	68,0,249,.LM305-.LFBB6
 2040               	.LM305:
 2041               	/* #APP */
 2042               	 ;  249 "delay_cyc.c" 1
 2043 0580 0000      		nop
 2044               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 2045               		.stabn	68,0,250,.LM306-.LFBB6
 2046               	.LM306:
 2047               	 ;  250 "delay_cyc.c" 1
 2048 0582 0000      		nop
 2049               	 ;  0 "" 2
 2050               	/* #NOAPP */
 2051 0584 0197      		sbiw r24,1
 225:delay_cyc.c   ****    {
 2052               		.stabn	68,0,225,.LM307-.LFBB6
 2053               	.LM307:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 81


 2054 0586 0097      		sbiw r24,0
 2055 0588 01F4      		brne .L49
 275:delay_cyc.c   **** 		case 3:
 2056               		.stabn	68,0,275,.LM308-.LFBB6
 2057               	.LM308:
 2058               	/* #APP */
 2059               	 ;  275 "delay_cyc.c" 1
 2060 058a 0000      		nop
 2061               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 2062               		.stabn	68,0,277,.LM309-.LFBB6
 2063               	.LM309:
 2064               	 ;  277 "delay_cyc.c" 1
 2065 058c 0000      		nop
 2066               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 2067               		.stabn	68,0,279,.LM310-.LFBB6
 2068               	.LM310:
 2069               	 ;  279 "delay_cyc.c" 1
 2070 058e 0000      		nop
 2071               	 ;  0 "" 2
 2072               		.stabn	68,0,281,.LM311-.LFBB6
 2073               	.LM311:
 2074               	 ;  281 "delay_cyc.c" 1
 2075 0590 0000      		nop
 2076               	 ;  0 "" 2
 2077               	/* #NOAPP */
 2078               	.LBE168:
 2079               	.LBE167:
 2080               	.LBE166:
 2081               	.LBE165:
 2082               		.stabs	"_options/writeColor.c",132,0,0,.Ltext33
 2083               	.Ltext33:
 393:_options/writeColor.c ****       writeColor(TRUE, *(color+12));                         
 2084               		.stabn	68,0,393,.LM312-.LFBB6
 2085               	.LM312:
 2086 0592 3485      		ldd r19,Z+12
 2087               	.LBB169:
 2088               	.LBB170:
 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 2089               		.stabn	68,0,205,.LM313-.LFBB6
 2090               	.LM313:
 2091 0594 232F      		mov r18,r19
 2092 0596 2695      		lsr r18
 2093 0598 2695      		lsr r18
 207:_options/writeColor.c **** 
 2094               		.stabn	68,0,207,.LM314-.LFBB6
 2095               	.LM314:
 2096 059a 822F      		mov r24,r18
 2097 059c 8695      		lsr r24
 2098 059e 8695      		lsr r24
 2099 05a0 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 2100               		.stabn	68,0,219,.LM315-.LFBB6
 2101               	.LM315:
 2102 05a2 94E0      		ldi r25,lo8(4)
 2103 05a4 980F      		add r25,r24
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 82


 237:_options/writeColor.c **** 	(                                                        // cycles
 2104               		.stabn	68,0,237,.LM316-.LFBB6
 2105               	.LM316:
 2106               	/* #APP */
 2107               	 ;  237 "_options/writeColor.c" 1
 2108 05a6 8330      		cpi   r24, 3 ; 
 2109 05a8 01F4      		brne  nothingToDo_847 ; 
 2110 05aa 98E0      		ldi   r25, 8 ; 
 2111               		nothingToDo_847: 
 2112               		
 2113               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 2114               		.stabn	68,0,254,.LM317-.LFBB6
 2115               	.LM317:
 2116               	/* #NOAPP */
 2117 05ac AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 2118               		.stabn	68,0,255,.LM318-.LFBB6
 2119               	.LM318:
 2120 05ae 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 2121               		.stabn	68,0,200,.LM319-.LFBB6
 2122               	.LM319:
 2123 05b0 832F      		mov r24,r19
 2124 05b2 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 2125               		.stabn	68,0,213,.LM320-.LFBB6
 2126               	.LM320:
 2127 05b4 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 2128               		.stabn	68,0,206,.LM321-.LFBB6
 2129               	.LM321:
 2130 05b6 2370      		andi r18,lo8(3)
 214:_options/writeColor.c **** 
 2131               		.stabn	68,0,214,.LM322-.LFBB6
 2132               	.LM322:
 2133 05b8 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 2134               		.stabn	68,0,264,.LM323-.LFBB6
 2135               	.LM323:
 2136               	/* #APP */
 2137               	 ;  264 "_options/writeColor.c" 1
 2138 05ba 9093 4E00 		sts 78, r25; 
 2139 05be 8093 6000 		sts 96, r24; 
 2140 05c2 2093 4200 		sts 66, r18; 
 2141               		
 2142               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 2143               		.stabn	68,0,278,.LM324-.LFBB6
 2144               	.LM324:
 2145               	/* #NOAPP */
 2146 05c6 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 2147               		.stabn	68,0,279,.LM325-.LFBB6
 2148               	.LM325:
 2149 05c8 AD98      		cbi 0x15,5
 2150 05ca 87E0      		ldi r24,lo8(7)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 83


 2151 05cc 90E0      		ldi r25,0
 2152               	.L51:
 2153               	.LBB171:
 2154               	.LBB172:
 2155               		.stabs	"delay_cyc.c",132,0,0,.Ltext34
 2156               	.Ltext34:
 249:delay_cyc.c   ****       asm("nop");
 2157               		.stabn	68,0,249,.LM326-.LFBB6
 2158               	.LM326:
 2159               	/* #APP */
 2160               	 ;  249 "delay_cyc.c" 1
 2161 05ce 0000      		nop
 2162               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 2163               		.stabn	68,0,250,.LM327-.LFBB6
 2164               	.LM327:
 2165               	 ;  250 "delay_cyc.c" 1
 2166 05d0 0000      		nop
 2167               	 ;  0 "" 2
 2168               	/* #NOAPP */
 2169 05d2 0197      		sbiw r24,1
 225:delay_cyc.c   ****    {
 2170               		.stabn	68,0,225,.LM328-.LFBB6
 2171               	.LM328:
 2172 05d4 0097      		sbiw r24,0
 2173 05d6 01F4      		brne .L51
 275:delay_cyc.c   **** 		case 3:
 2174               		.stabn	68,0,275,.LM329-.LFBB6
 2175               	.LM329:
 2176               	/* #APP */
 2177               	 ;  275 "delay_cyc.c" 1
 2178 05d8 0000      		nop
 2179               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 2180               		.stabn	68,0,277,.LM330-.LFBB6
 2181               	.LM330:
 2182               	 ;  277 "delay_cyc.c" 1
 2183 05da 0000      		nop
 2184               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 2185               		.stabn	68,0,279,.LM331-.LFBB6
 2186               	.LM331:
 2187               	 ;  279 "delay_cyc.c" 1
 2188 05dc 0000      		nop
 2189               	 ;  0 "" 2
 2190               		.stabn	68,0,281,.LM332-.LFBB6
 2191               	.LM332:
 2192               	 ;  281 "delay_cyc.c" 1
 2193 05de 0000      		nop
 2194               	 ;  0 "" 2
 2195               	/* #NOAPP */
 2196               	.LBE172:
 2197               	.LBE171:
 2198               	.LBE170:
 2199               	.LBE169:
 2200               		.stabs	"_options/writeColor.c",132,0,0,.Ltext35
 2201               	.Ltext35:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 84


 394:_options/writeColor.c ****       writeColor(TRUE, *(color+13));                         
 2202               		.stabn	68,0,394,.LM333-.LFBB6
 2203               	.LM333:
 2204 05e0 3585      		ldd r19,Z+13
 2205               	.LBB173:
 2206               	.LBB174:
 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 2207               		.stabn	68,0,205,.LM334-.LFBB6
 2208               	.LM334:
 2209 05e2 232F      		mov r18,r19
 2210 05e4 2695      		lsr r18
 2211 05e6 2695      		lsr r18
 207:_options/writeColor.c **** 
 2212               		.stabn	68,0,207,.LM335-.LFBB6
 2213               	.LM335:
 2214 05e8 822F      		mov r24,r18
 2215 05ea 8695      		lsr r24
 2216 05ec 8695      		lsr r24
 2217 05ee 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 2218               		.stabn	68,0,219,.LM336-.LFBB6
 2219               	.LM336:
 2220 05f0 94E0      		ldi r25,lo8(4)
 2221 05f2 980F      		add r25,r24
 237:_options/writeColor.c **** 	(                                                        // cycles
 2222               		.stabn	68,0,237,.LM337-.LFBB6
 2223               	.LM337:
 2224               	/* #APP */
 2225               	 ;  237 "_options/writeColor.c" 1
 2226 05f4 8330      		cpi   r24, 3 ; 
 2227 05f6 01F4      		brne  nothingToDo_895 ; 
 2228 05f8 98E0      		ldi   r25, 8 ; 
 2229               		nothingToDo_895: 
 2230               		
 2231               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 2232               		.stabn	68,0,254,.LM338-.LFBB6
 2233               	.LM338:
 2234               	/* #NOAPP */
 2235 05fa AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 2236               		.stabn	68,0,255,.LM339-.LFBB6
 2237               	.LM339:
 2238 05fc 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 2239               		.stabn	68,0,200,.LM340-.LFBB6
 2240               	.LM340:
 2241 05fe 832F      		mov r24,r19
 2242 0600 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 2243               		.stabn	68,0,213,.LM341-.LFBB6
 2244               	.LM341:
 2245 0602 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 2246               		.stabn	68,0,206,.LM342-.LFBB6
 2247               	.LM342:
 2248 0604 2370      		andi r18,lo8(3)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 85


 214:_options/writeColor.c **** 
 2249               		.stabn	68,0,214,.LM343-.LFBB6
 2250               	.LM343:
 2251 0606 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 2252               		.stabn	68,0,264,.LM344-.LFBB6
 2253               	.LM344:
 2254               	/* #APP */
 2255               	 ;  264 "_options/writeColor.c" 1
 2256 0608 9093 4E00 		sts 78, r25; 
 2257 060c 8093 6000 		sts 96, r24; 
 2258 0610 2093 4200 		sts 66, r18; 
 2259               		
 2260               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 2261               		.stabn	68,0,278,.LM345-.LFBB6
 2262               	.LM345:
 2263               	/* #NOAPP */
 2264 0614 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 2265               		.stabn	68,0,279,.LM346-.LFBB6
 2266               	.LM346:
 2267 0616 AD98      		cbi 0x15,5
 2268 0618 87E0      		ldi r24,lo8(7)
 2269 061a 90E0      		ldi r25,0
 2270               	.L53:
 2271               	.LBB175:
 2272               	.LBB176:
 2273               		.stabs	"delay_cyc.c",132,0,0,.Ltext36
 2274               	.Ltext36:
 249:delay_cyc.c   ****       asm("nop");
 2275               		.stabn	68,0,249,.LM347-.LFBB6
 2276               	.LM347:
 2277               	/* #APP */
 2278               	 ;  249 "delay_cyc.c" 1
 2279 061c 0000      		nop
 2280               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 2281               		.stabn	68,0,250,.LM348-.LFBB6
 2282               	.LM348:
 2283               	 ;  250 "delay_cyc.c" 1
 2284 061e 0000      		nop
 2285               	 ;  0 "" 2
 2286               	/* #NOAPP */
 2287 0620 0197      		sbiw r24,1
 225:delay_cyc.c   ****    {
 2288               		.stabn	68,0,225,.LM349-.LFBB6
 2289               	.LM349:
 2290 0622 0097      		sbiw r24,0
 2291 0624 01F4      		brne .L53
 275:delay_cyc.c   **** 		case 3:
 2292               		.stabn	68,0,275,.LM350-.LFBB6
 2293               	.LM350:
 2294               	/* #APP */
 2295               	 ;  275 "delay_cyc.c" 1
 2296 0626 0000      		nop
 2297               	 ;  0 "" 2
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 86


 277:delay_cyc.c   **** 		case 2:
 2298               		.stabn	68,0,277,.LM351-.LFBB6
 2299               	.LM351:
 2300               	 ;  277 "delay_cyc.c" 1
 2301 0628 0000      		nop
 2302               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 2303               		.stabn	68,0,279,.LM352-.LFBB6
 2304               	.LM352:
 2305               	 ;  279 "delay_cyc.c" 1
 2306 062a 0000      		nop
 2307               	 ;  0 "" 2
 2308               		.stabn	68,0,281,.LM353-.LFBB6
 2309               	.LM353:
 2310               	 ;  281 "delay_cyc.c" 1
 2311 062c 0000      		nop
 2312               	 ;  0 "" 2
 2313               	/* #NOAPP */
 2314               	.LBE176:
 2315               	.LBE175:
 2316               	.LBE174:
 2317               	.LBE173:
 2318               		.stabs	"_options/writeColor.c",132,0,0,.Ltext37
 2319               	.Ltext37:
 395:_options/writeColor.c ****       writeColor(TRUE, *(color+14));                         
 2320               		.stabn	68,0,395,.LM354-.LFBB6
 2321               	.LM354:
 2322 062e 3685      		ldd r19,Z+14
 2323               	.LBB177:
 2324               	.LBB178:
 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 2325               		.stabn	68,0,205,.LM355-.LFBB6
 2326               	.LM355:
 2327 0630 232F      		mov r18,r19
 2328 0632 2695      		lsr r18
 2329 0634 2695      		lsr r18
 207:_options/writeColor.c **** 
 2330               		.stabn	68,0,207,.LM356-.LFBB6
 2331               	.LM356:
 2332 0636 822F      		mov r24,r18
 2333 0638 8695      		lsr r24
 2334 063a 8695      		lsr r24
 2335 063c 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 2336               		.stabn	68,0,219,.LM357-.LFBB6
 2337               	.LM357:
 2338 063e 94E0      		ldi r25,lo8(4)
 2339 0640 980F      		add r25,r24
 237:_options/writeColor.c **** 	(                                                        // cycles
 2340               		.stabn	68,0,237,.LM358-.LFBB6
 2341               	.LM358:
 2342               	/* #APP */
 2343               	 ;  237 "_options/writeColor.c" 1
 2344 0642 8330      		cpi   r24, 3 ; 
 2345 0644 01F4      		brne  nothingToDo_943 ; 
 2346 0646 98E0      		ldi   r25, 8 ; 
 2347               		nothingToDo_943: 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 87


 2348               		
 2349               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 2350               		.stabn	68,0,254,.LM359-.LFBB6
 2351               	.LM359:
 2352               	/* #NOAPP */
 2353 0648 AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 2354               		.stabn	68,0,255,.LM360-.LFBB6
 2355               	.LM360:
 2356 064a 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 2357               		.stabn	68,0,200,.LM361-.LFBB6
 2358               	.LM361:
 2359 064c 832F      		mov r24,r19
 2360 064e 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 2361               		.stabn	68,0,213,.LM362-.LFBB6
 2362               	.LM362:
 2363 0650 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 2364               		.stabn	68,0,206,.LM363-.LFBB6
 2365               	.LM363:
 2366 0652 2370      		andi r18,lo8(3)
 214:_options/writeColor.c **** 
 2367               		.stabn	68,0,214,.LM364-.LFBB6
 2368               	.LM364:
 2369 0654 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 2370               		.stabn	68,0,264,.LM365-.LFBB6
 2371               	.LM365:
 2372               	/* #APP */
 2373               	 ;  264 "_options/writeColor.c" 1
 2374 0656 9093 4E00 		sts 78, r25; 
 2375 065a 8093 6000 		sts 96, r24; 
 2376 065e 2093 4200 		sts 66, r18; 
 2377               		
 2378               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 2379               		.stabn	68,0,278,.LM366-.LFBB6
 2380               	.LM366:
 2381               	/* #NOAPP */
 2382 0662 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 2383               		.stabn	68,0,279,.LM367-.LFBB6
 2384               	.LM367:
 2385 0664 AD98      		cbi 0x15,5
 2386 0666 87E0      		ldi r24,lo8(7)
 2387 0668 90E0      		ldi r25,0
 2388               	.L55:
 2389               	.LBB179:
 2390               	.LBB180:
 2391               		.stabs	"delay_cyc.c",132,0,0,.Ltext38
 2392               	.Ltext38:
 249:delay_cyc.c   ****       asm("nop");
 2393               		.stabn	68,0,249,.LM368-.LFBB6
 2394               	.LM368:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 88


 2395               	/* #APP */
 2396               	 ;  249 "delay_cyc.c" 1
 2397 066a 0000      		nop
 2398               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 2399               		.stabn	68,0,250,.LM369-.LFBB6
 2400               	.LM369:
 2401               	 ;  250 "delay_cyc.c" 1
 2402 066c 0000      		nop
 2403               	 ;  0 "" 2
 2404               	/* #NOAPP */
 2405 066e 0197      		sbiw r24,1
 225:delay_cyc.c   ****    {
 2406               		.stabn	68,0,225,.LM370-.LFBB6
 2407               	.LM370:
 2408 0670 0097      		sbiw r24,0
 2409 0672 01F4      		brne .L55
 275:delay_cyc.c   **** 		case 3:
 2410               		.stabn	68,0,275,.LM371-.LFBB6
 2411               	.LM371:
 2412               	/* #APP */
 2413               	 ;  275 "delay_cyc.c" 1
 2414 0674 0000      		nop
 2415               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 2416               		.stabn	68,0,277,.LM372-.LFBB6
 2417               	.LM372:
 2418               	 ;  277 "delay_cyc.c" 1
 2419 0676 0000      		nop
 2420               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 2421               		.stabn	68,0,279,.LM373-.LFBB6
 2422               	.LM373:
 2423               	 ;  279 "delay_cyc.c" 1
 2424 0678 0000      		nop
 2425               	 ;  0 "" 2
 2426               		.stabn	68,0,281,.LM374-.LFBB6
 2427               	.LM374:
 2428               	 ;  281 "delay_cyc.c" 1
 2429 067a 0000      		nop
 2430               	 ;  0 "" 2
 2431               	/* #NOAPP */
 2432               	.LBE180:
 2433               	.LBE179:
 2434               	.LBE178:
 2435               	.LBE177:
 2436               		.stabs	"_options/writeColor.c",132,0,0,.Ltext39
 2437               	.Ltext39:
 396:_options/writeColor.c ****       writeColor(TRUE, *(color+15));   
 2438               		.stabn	68,0,396,.LM375-.LFBB6
 2439               	.LM375:
 2440 067c 3785      		ldd r19,Z+15
 2441               	.LBB181:
 2442               	.LBB182:
 205:_options/writeColor.c **** 	 uint8_t greenVal = bgTemp&0x03;
 2443               		.stabn	68,0,205,.LM376-.LFBB6
 2444               	.LM376:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 89


 2445 067e 232F      		mov r18,r19
 2446 0680 2695      		lsr r18
 2447 0682 2695      		lsr r18
 207:_options/writeColor.c **** 
 2448               		.stabn	68,0,207,.LM377-.LFBB6
 2449               	.LM377:
 2450 0684 822F      		mov r24,r18
 2451 0686 8695      		lsr r24
 2452 0688 8695      		lsr r24
 2453 068a 8370      		andi r24,lo8(3)
 219:_options/writeColor.c **** 
 2454               		.stabn	68,0,219,.LM378-.LFBB6
 2455               	.LM378:
 2456 068c 94E0      		ldi r25,lo8(4)
 2457 068e 980F      		add r25,r24
 237:_options/writeColor.c **** 	(                                                        // cycles
 2458               		.stabn	68,0,237,.LM379-.LFBB6
 2459               	.LM379:
 2460               	/* #APP */
 2461               	 ;  237 "_options/writeColor.c" 1
 2462 0690 8330      		cpi   r24, 3 ; 
 2463 0692 01F4      		brne  nothingToDo_991 ; 
 2464 0694 98E0      		ldi   r25, 8 ; 
 2465               		nothingToDo_991: 
 2466               		
 2467               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 2468               		.stabn	68,0,254,.LM380-.LFBB6
 2469               	.LM380:
 2470               	/* #NOAPP */
 2471 0696 AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 2472               		.stabn	68,0,255,.LM381-.LFBB6
 2473               	.LM381:
 2474 0698 8D9A      		sbi 0x11,5
 200:_options/writeColor.c **** 	 //uint8_t greenVal = (colorVal>>2)&0x03;
 2475               		.stabn	68,0,200,.LM382-.LFBB6
 2476               	.LM382:
 2477 069a 832F      		mov r24,r19
 2478 069c 8370      		andi r24,lo8(3)
 213:_options/writeColor.c **** 	 uint8_t greenOCR_val = (greenVal + 3);
 2479               		.stabn	68,0,213,.LM383-.LFBB6
 2480               	.LM383:
 2481 069e 8E5F      		subi r24,lo8(-(2))
 206:_options/writeColor.c **** 	 uint8_t blueVal = (bgTemp>>2)&0x03;
 2482               		.stabn	68,0,206,.LM384-.LFBB6
 2483               	.LM384:
 2484 06a0 2370      		andi r18,lo8(3)
 214:_options/writeColor.c **** 
 2485               		.stabn	68,0,214,.LM385-.LFBB6
 2486               	.LM385:
 2487 06a2 2D5F      		subi r18,lo8(-(3))
 264:_options/writeColor.c **** 		(
 2488               		.stabn	68,0,264,.LM386-.LFBB6
 2489               	.LM386:
 2490               	/* #APP */
 2491               	 ;  264 "_options/writeColor.c" 1
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 90


 2492 06a4 9093 4E00 		sts 78, r25; 
 2493 06a8 8093 6000 		sts 96, r24; 
 2494 06ac 2093 4200 		sts 66, r18; 
 2495               		
 2496               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 2497               		.stabn	68,0,278,.LM387-.LFBB6
 2498               	.LM387:
 2499               	/* #NOAPP */
 2500 06b0 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
 2501               		.stabn	68,0,279,.LM388-.LFBB6
 2502               	.LM388:
 2503 06b2 AD98      		cbi 0x15,5
 2504 06b4 87E0      		ldi r24,lo8(7)
 2505 06b6 90E0      		ldi r25,0
 2506               	.L57:
 2507               	.LBB183:
 2508               	.LBB184:
 2509               		.stabs	"delay_cyc.c",132,0,0,.Ltext40
 2510               	.Ltext40:
 249:delay_cyc.c   ****       asm("nop");
 2511               		.stabn	68,0,249,.LM389-.LFBB6
 2512               	.LM389:
 2513               	/* #APP */
 2514               	 ;  249 "delay_cyc.c" 1
 2515 06b8 0000      		nop
 2516               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 2517               		.stabn	68,0,250,.LM390-.LFBB6
 2518               	.LM390:
 2519               	 ;  250 "delay_cyc.c" 1
 2520 06ba 0000      		nop
 2521               	 ;  0 "" 2
 2522               	/* #NOAPP */
 2523 06bc 0197      		sbiw r24,1
 225:delay_cyc.c   ****    {
 2524               		.stabn	68,0,225,.LM391-.LFBB6
 2525               	.LM391:
 2526 06be 0097      		sbiw r24,0
 2527 06c0 01F4      		brne .L57
 275:delay_cyc.c   **** 		case 3:
 2528               		.stabn	68,0,275,.LM392-.LFBB6
 2529               	.LM392:
 2530               	/* #APP */
 2531               	 ;  275 "delay_cyc.c" 1
 2532 06c2 0000      		nop
 2533               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 2534               		.stabn	68,0,277,.LM393-.LFBB6
 2535               	.LM393:
 2536               	 ;  277 "delay_cyc.c" 1
 2537 06c4 0000      		nop
 2538               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 2539               		.stabn	68,0,279,.LM394-.LFBB6
 2540               	.LM394:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 91


 2541               	 ;  279 "delay_cyc.c" 1
 2542 06c6 0000      		nop
 2543               	 ;  0 "" 2
 2544               		.stabn	68,0,281,.LM395-.LFBB6
 2545               	.LM395:
 2546               	 ;  281 "delay_cyc.c" 1
 2547 06c8 0000      		nop
 2548               	 ;  0 "" 2
 2549               	/* #NOAPP */
 2550               	.LBE184:
 2551               	.LBE183:
 2552               	.LBE182:
 2553               	.LBE181:
 2554               	.LBB185:
 2555               	.LBB186:
 2556               		.stabs	"_options/writeColor.c",132,0,0,.Ltext41
 2557               	.Ltext41:
 237:_options/writeColor.c **** 	(                                                        // cycles
 2558               		.stabn	68,0,237,.LM396-.LFBB6
 2559               	.LM396:
 2560 06ca 84E0      		ldi r24,lo8(4)
 2561 06cc 90E0      		ldi r25,0
 2562               	/* #APP */
 2563               	 ;  237 "_options/writeColor.c" 1
 2564 06ce 9330      		cpi   r25, 3 ; 
 2565 06d0 01F4      		brne  nothingToDo_1033 ; 
 2566 06d2 88E0      		ldi   r24, 8 ; 
 2567               		nothingToDo_1033: 
 2568               		
 2569               	 ;  0 "" 2
 254:_options/writeColor.c **** 	lockPSC0();
 2570               		.stabn	68,0,254,.LM397-.LFBB6
 2571               	.LM397:
 2572               	/* #NOAPP */
 2573 06d4 AD9A      		sbi 0x15,5
 255:_options/writeColor.c **** //		OCR2RA = blueOCR_val;
 2574               		.stabn	68,0,255,.LM398-.LFBB6
 2575               	.LM398:
 2576 06d6 8D9A      		sbi 0x11,5
 264:_options/writeColor.c **** 		(
 2577               		.stabn	68,0,264,.LM399-.LFBB6
 2578               	.LM399:
 2579 06d8 23E0      		ldi r18,lo8(3)
 2580 06da 92E0      		ldi r25,lo8(2)
 2581               	/* #APP */
 2582               	 ;  264 "_options/writeColor.c" 1
 2583 06dc 8093 4E00 		sts 78, r24; 
 2584 06e0 9093 6000 		sts 96, r25; 
 2585 06e4 2093 4200 		sts 66, r18; 
 2586               		
 2587               	 ;  0 "" 2
 278:_options/writeColor.c **** 	unlockPSC2();
 2588               		.stabn	68,0,278,.LM400-.LFBB6
 2589               	.LM400:
 2590               	/* #NOAPP */
 2591 06e8 8D98      		cbi 0x11,5
 279:_options/writeColor.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 92


 2592               		.stabn	68,0,279,.LM401-.LFBB6
 2593               	.LM401:
 2594 06ea AD98      		cbi 0x15,5
 2595               	.LBE186:
 2596               	.LBE185:
 397:_options/writeColor.c **** #define COLORS_WRITTEN   16      
 398:_options/writeColor.c **** #if ( (defined(COLOR_BAR_SCROLL) && COLOR_BAR_SCROLL) \
 399:_options/writeColor.c ****    || (defined(ROW_BUFFER) && (ROW_BUFFER)) )
 400:_options/writeColor.c ****       writeColor(TRUE, *(color+16));
 401:_options/writeColor.c ****       writeColor(TRUE, *(color+17));
 402:_options/writeColor.c ****       writeColor(TRUE, *(color+18));
 403:_options/writeColor.c ****       writeColor(TRUE, *(color+19));
 404:_options/writeColor.c **** writeColor(TRUE, *(color+20));
 405:_options/writeColor.c **** writeColor(TRUE, *(color+21));
 406:_options/writeColor.c **** writeColor(TRUE, *(color+22));
 407:_options/writeColor.c **** writeColor(TRUE, *(color+23));
 408:_options/writeColor.c **** writeColor(TRUE, *(color+24));
 409:_options/writeColor.c **** writeColor(TRUE, *(color+25));
 410:_options/writeColor.c **** writeColor(TRUE, *(color+26));
 411:_options/writeColor.c **** writeColor(TRUE, *(color+27));
 412:_options/writeColor.c **** #define COLORS_WRITTEN   28
 413:_options/writeColor.c **** #if (defined(ROW_BUFFER) && (ROW_BUFFER))
 414:_options/writeColor.c **** writeColor(TRUE, *(color+28));
 415:_options/writeColor.c **** writeColor(TRUE, *(color+29));
 416:_options/writeColor.c **** writeColor(TRUE, *(color+30));
 417:_options/writeColor.c **** writeColor(TRUE, *(color+31));
 418:_options/writeColor.c **** //Some sort of syncing problem after 32... (?)
 419:_options/writeColor.c **** 
 420:_options/writeColor.c **** writeColor(TRUE, *(color+32));
 421:_options/writeColor.c **** writeColor(TRUE, *(color+33));
 422:_options/writeColor.c **** writeColor(TRUE, *(color+34));
 423:_options/writeColor.c **** writeColor(TRUE, *(color+35));
 424:_options/writeColor.c **** writeColor(TRUE, *(color+36));
 425:_options/writeColor.c **** writeColor(TRUE, *(color+37));
 426:_options/writeColor.c **** writeColor(TRUE, *(color+38));
 427:_options/writeColor.c **** writeColor(TRUE, *(color+39));
 428:_options/writeColor.c **** writeColor(TRUE, *(color+40));
 429:_options/writeColor.c **** writeColor(TRUE, *(color+41));
 430:_options/writeColor.c **** writeColor(TRUE, *(color+42));
 431:_options/writeColor.c **** writeColor(TRUE, *(color+43));
 432:_options/writeColor.c **** writeColor(TRUE, *(color+44));
 433:_options/writeColor.c **** writeColor(TRUE, *(color+45));
 434:_options/writeColor.c **** writeColor(TRUE, *(color+46));
 435:_options/writeColor.c **** writeColor(TRUE, *(color+47));
 436:_options/writeColor.c **** writeColor(TRUE, *(color+48));
 437:_options/writeColor.c **** writeColor(TRUE, *(color+49));
 438:_options/writeColor.c **** writeColor(TRUE, *(color+50));
 439:_options/writeColor.c **** writeColor(TRUE, *(color+51));
 440:_options/writeColor.c **** writeColor(TRUE, *(color+52));
 441:_options/writeColor.c **** writeColor(TRUE, *(color+53));
 442:_options/writeColor.c **** writeColor(TRUE, *(color+54));
 443:_options/writeColor.c **** writeColor(TRUE, *(color+55));
 444:_options/writeColor.c **** writeColor(TRUE, *(color+56));
 445:_options/writeColor.c **** writeColor(TRUE, *(color+57));
 446:_options/writeColor.c **** writeColor(TRUE, *(color+58));
 447:_options/writeColor.c **** writeColor(TRUE, *(color+59));
 448:_options/writeColor.c **** writeColor(TRUE, *(color+60));
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 93


 449:_options/writeColor.c **** writeColor(TRUE, *(color+61));
 450:_options/writeColor.c **** writeColor(TRUE, *(color+62));
 451:_options/writeColor.c **** writeColor(TRUE, *(color+63));
 452:_options/writeColor.c **** // WriteColor writes the pixel *after* the calculations...
 453:_options/writeColor.c **** // thus the pixel appears basically after writeColor completes
 454:_options/writeColor.c **** // These nops assure the 64th pixel is fully-displayed before exitting
 455:_options/writeColor.c **** // (Not sure how the other following instructions apply to this)
 456:_options/writeColor.c **** // The number of nops was found experimentally...
 457:_options/writeColor.c **** asm("nop");
 458:_options/writeColor.c **** asm("nop");
 459:_options/writeColor.c **** asm("nop");
 460:_options/writeColor.c **** asm("nop");
 461:_options/writeColor.c **** asm("nop");
 462:_options/writeColor.c **** asm("nop");
 463:_options/writeColor.c **** asm("nop");
 464:_options/writeColor.c **** asm("nop");
 465:_options/writeColor.c **** //count "0" below, as well..
 466:_options/writeColor.c **** #define COLORS_WRITTEN 65
 467:_options/writeColor.c **** #endif //ROW_BUFFER
 468:_options/writeColor.c **** #else
 469:_options/writeColor.c **** //   writeColor(0);
 470:_options/writeColor.c **** #endif //COLOR_BARS || ROW_BUFFER
 471:_options/writeColor.c **** /*      reg[17] = colorBuffer[rowNum][17];                         
 472:_options/writeColor.c ****       writeColor(reg[17]);                         
 473:_options/writeColor.c ****       ...
 474:_options/writeColor.c ****       reg[20] = colorBuffer[rowNum][20];                         
 475:_options/writeColor.c ****       writeColor(reg[20]);  
 476:_options/writeColor.c ****       
 477:_options/writeColor.c ****       //REPEATING to fill screen... (delayDots = 342 worked prior to this)
 478:_options/writeColor.c ****       reg[0] = colorBuffer[rowNum][0];
 479:_options/writeColor.c ****       writeColor(reg[0]);
 480:_options/writeColor.c ****       ...
 481:_options/writeColor.c ****       reg[10] = colorBuffer[rowNum][10];
 482:_options/writeColor.c ****       writeColor(reg[10]);
 483:_options/writeColor.c **** */
 484:_options/writeColor.c ****       //Display the rest as black...
 485:_options/writeColor.c ****       writeColor(FALSE, 0);
 486:_options/writeColor.c **** 		//Do it as quickly as possible.
 487:_options/writeColor.c **** 		// (No, this cuts off the last pixel...)
 488:_options/writeColor.c **** 		//OCR1D = 0;	//Red Off
 489:_options/writeColor.c **** 		//DT1 = 0;		//Green Off
 490:_options/writeColor.c **** 		//OCR1A = 4;  //Blue Off
 491:_options/writeColor.c **** 
 492:_options/writeColor.c **** 		//writeColor(0xff);
 493:_options/writeColor.c ****         //delay_Dots(500);//142); //Don't want to disable DE too early...   
 494:_options/writeColor.c ****       //900 leaves a buffer for various calculations while also showing
 495:_options/writeColor.c ****       // a blue bar at the right-side...
 496:_options/writeColor.c ****       //LTN Last Used 900
 497:_options/writeColor.c ****       // -68 is from 900's intent, IIRC
 498:_options/writeColor.c ****       //  seems arbitrary, but its value (especially if too small)
 499:_options/writeColor.c ****       // causes blank lines... (?!)
 500:_options/writeColor.c ****       // -60 makes more sense for a delay (was the original post-900)
 501:_options/writeColor.c ****       //  (outside DOTS_TO_CYC because it's for cycles used for calcs...
 502:_options/writeColor.c ****       // -68 worked for LVDS_PRE=2
 503:_options/writeColor.c ****       // -60 for 1
 504:_options/writeColor.c ****       // 4 doesn't work... blue-lines
 505:_options/writeColor.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 94


 506:_options/writeColor.c **** //a/o v60
 507:_options/writeColor.c **** //From Here Down, everything has only been tested recently with rowSegBuf
 508:_options/writeColor.c **** // I did a nice #if-#else scheme which makes this redundant
 509:_options/writeColor.c **** // with what's in rsb_drawPix()...
 510:_options/writeColor.c **** 
 511:_options/writeColor.c **** // a/o v59-12ish... ROW_COMPLETION_DELAY uses were already commented-out
 512:_options/writeColor.c **** // BUT WHY WAS IT REMOVED?! Seems to help, now.
 513:_options/writeColor.c **** // 
 514:_options/writeColor.c **** //   Some Experimenting has led to the conclusion:
 515:_options/writeColor.c **** //   DE's active-duration needn't be exact. In fact, it can be *way* off
 516:_options/writeColor.c **** //     White is shown between the end of drawSegs, and cyan is shown after
 517:_options/writeColor.c **** //   ROW_COMPLETION_DELAY (which, for now, is constant, regardless of how
 518:_options/writeColor.c **** //    many pixels were drawn)
 519:_options/writeColor.c **** //   Almost immediately after the ROW_COMPLETION_DELAY (when it turns cyan)
 520:_options/writeColor.c **** //    DE is disabled
 521:_options/writeColor.c **** //    Yet the remainder of the screen still fills with cyan.
 522:_options/writeColor.c **** //   THUS: Disabling DE before the end of the screen appears to have the
 523:_options/writeColor.c **** //    effect of either not being acknowledged, or of repeating the last
 524:_options/writeColor.c **** //    color (untested)
 525:_options/writeColor.c **** //   Also, DE durations that are *longer* than the screen, seem to be 
 526:_options/writeColor.c **** //    absorbed by nonexistent pixels to the left...
 527:_options/writeColor.c **** //    (setting ROW_COMPLETION_DELAY==65535 unreasonably high,
 528:_options/writeColor.c **** //         just shows white at the right side, and still syncs)
 529:_options/writeColor.c **** //   Now, the original problem was that there seemed to be some carry-over
 530:_options/writeColor.c **** //   which maybe due to DEs that are EXTRAORDINARILY long?
 531:_options/writeColor.c **** //   NO!
 532:_options/writeColor.c **** //   Actually, it appears to be due to DEs that are TOO SHORT (?)
 533:_options/writeColor.c **** //      (setting ROW_COMPLETION_DELAY to 0 causes the problem again)
 534:_options/writeColor.c **** //   Doesn't appear to be *entirely* scientific, as using SEG_SINE
 535:_options/writeColor.c **** //    would suggest that these (now cyan) bars would appear at the troughs
 536:_options/writeColor.c **** //    in the diagonal-color-stripes at the top...
 537:_options/writeColor.c **** //    they seem, instead to be somewhat random, though maybe more common
 538:_options/writeColor.c **** //      at those locations.
 539:_options/writeColor.c **** //   But Wait! Setting ROW_COMPLETION_DELAY to 1 fixes it again.
 540:_options/writeColor.c **** //    realistically, that should be nothing more than a single nop; no?
 541:_options/writeColor.c **** //    (Maybe not, with a few cycles to entry, and minimum execution times)
 542:_options/writeColor.c **** //    a handful of nops does the trick, as well.
 543:_options/writeColor.c **** //    So is it a problem with too short a DE, or is it a matter of
 544:_options/writeColor.c **** //    e.g. the last segment drawn is setting new values that might only
 545:_options/writeColor.c **** //    be *completely transmitted* after a full PWM cycle...
 546:_options/writeColor.c **** //    So maybe somehow that last transaction is being interrupted
 547:_options/writeColor.c **** //     by the TCCR1A settings, or new values...
 548:_options/writeColor.c **** //    Plausible.
 549:_options/writeColor.c **** //
 550:_options/writeColor.c **** // FURTHER. Lest it be revisited. It was noted elsewhere that I thought
 551:_options/writeColor.c **** // this display was NOT DE-Only. In fact, the datasheet specifically says
 552:_options/writeColor.c **** // "DE-Only Mode"
 553:_options/writeColor.c **** 
 554:_options/writeColor.c **** 
 555:_options/writeColor.c **** 
 556:_options/writeColor.c **** 
 557:_options/writeColor.c **** /*#define ROW_COMPLETION_DELAY \
 558:_options/writeColor.c ****       (DOTS_TO_CYC(DE_ACTIVE_DOTS) -60  \
 559:_options/writeColor.c ****        - WRITE_COLOR_CYCS * COLORS_WRITTEN)
 560:_options/writeColor.c **** */
 561:_options/writeColor.c **** //I think -60 was an arbitrary value just chosen to compensate for
 562:_options/writeColor.c **** //calculations/instructions...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 95


 563:_options/writeColor.c **** // -90 has been found to be right at the edge of the screen, now...
 564:_options/writeColor.c **** // ish. maybe it's not accurate since delay_loop_2 is four instructions per
 565:_options/writeColor.c **** // loop...?
 566:_options/writeColor.c **** #define ROW_COMPLETION_DELAY \
 567:_options/writeColor.c ****       (DOTS_TO_CYC(DE_ACTIVE_DOTS) - 90  \
 568:_options/writeColor.c ****        - (WRITE_COLOR_CYCS + WRITE_COLOR_DELAY) * COLORS_WRITTEN)
 569:_options/writeColor.c **** //#define ROW_COMPLETION_DELAY 512 //1 //65535//512
 570:_options/writeColor.c **** 
 571:_options/writeColor.c **** 
 572:_options/writeColor.c **** 
 573:_options/writeColor.c **** 
 574:_options/writeColor.c **** //#error "should add SEG_STRETCH here..."
 575:_options/writeColor.c **** #if (ROW_COMPLETION_DELAY > 0)
 576:_options/writeColor.c **** //      delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS) -60 // - 68)// - 60
 577:_options/writeColor.c **** //            - WRITE_COLOR_CYCS*COLORS_WRITTEN);
 578:_options/writeColor.c **** 
 579:_options/writeColor.c **** 
 580:_options/writeColor.c **** 		delay_cyc(ROW_COMPLETION_DELAY);
 581:_options/writeColor.c **** 
 582:_options/writeColor.c **** 		
 583:_options/writeColor.c **** //      asm("nop;");
 584:_options/writeColor.c **** //      asm("nop;");
 585:_options/writeColor.c **** //      asm("nop;");
 586:_options/writeColor.c **** //      asm("nop;");
 587:_options/writeColor.c **** //      asm("nop;");
 588:_options/writeColor.c **** //      asm("nop;");
 589:_options/writeColor.c **** //      asm("nop;");
 590:_options/writeColor.c **** //      asm("nop;");
 591:_options/writeColor.c ****       
 592:_options/writeColor.c **** #else
 593:_options/writeColor.c **** #warning "ROW_COMPLETION_DELAY <= 0"
 594:_options/writeColor.c **** #define ROW_COMPLETION_DELAY 0
 595:_options/writeColor.c **** #endif
 596:_options/writeColor.c **** 
 597:_options/writeColor.c **** 		//a/o v62: (Original notes removed)
 598:_options/writeColor.c **** 		//OCR1D controls RED... >=6 is full-red
 599:_options/writeColor.c **** 		// Setting this here indicates where the drawing has completed
 600:_options/writeColor.c **** 		// This is handy for determining timing, stretching, etc...
 601:_options/writeColor.c **** 		//OCR1D = 6; //0;
 602:_options/writeColor.c **** 		fullRed();
 2597               		.stabn	68,0,602,.LM402-.LFBB6
 2598               	.LM402:
 2599 06ec 8D9A      		sbi 0x11,5
 2600 06ee 85E0      		ldi r24,lo8(5)
 2601 06f0 90E0      		ldi r25,0
 2602 06f2 9093 6100 		sts 96+1,r25
 2603 06f6 8093 6000 		sts 96,r24
 2604 06fa 8D98      		cbi 0x11,5
 603:_options/writeColor.c **** 
 604:_options/writeColor.c ****       //DE->Nada transition expects fullBlue...
 605:_options/writeColor.c ****       //Also helps to show the edge of the DE timing...
 606:_options/writeColor.c **** 
 607:_options/writeColor.c ****       //!!! Not sure what the state is at this point...
 608:_options/writeColor.c ****       // could be any DE+Blue level, or could be NADA...
 609:_options/writeColor.c ****       // Nada: DT1=3, still leaves one bit for clocking, might be OK
 610:_options/writeColor.c ****          
 611:_options/writeColor.c ****       //Among the things that don't make sense...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 96


 612:_options/writeColor.c ****       // This appears to go into affect BEFORE delay_cyc (?)
 613:_options/writeColor.c ****       // as, without a pull-up resistor on the /OC1B output, 
 614:_options/writeColor.c ****       // green seems to be floating between the last pixel and the
 615:_options/writeColor.c ****       // delay_cyc (!)
 616:_options/writeColor.c ****       //Disable complementary-output for Green 
 617:_options/writeColor.c ****       //  (on /OC1B, where CLK is OC1B)
 618:_options/writeColor.c ****       // Since Nada, V, and H DT's might be bad for clocking.
 619:_options/writeColor.c **** //		TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
 620:_options/writeColor.c **** //         | (1<<COM1B1) | (0<<COM1B0)
 621:_options/writeColor.c **** //         | (1<<PWM1A) | (1<<PWM1B) );
 622:_options/writeColor.c **** 
 623:_options/writeColor.c **** 		lvds_disableGreen_MakeClockInsensitiveToDT();
 624:_options/writeColor.c **** 
 625:_options/writeColor.c ****       //fullBlue();
 626:_options/writeColor.c ****       //Nada_fromDEonly();
 627:_options/writeColor.c **** 		Nada_init();
 2605               		.stabn	68,0,627,.LM403-.LFBB6
 2606               	.LM403:
 2607 06fc AD9A      		sbi 0x15,5
 2608 06fe 82E0      		ldi r24,lo8(2)
 2609 0700 90E0      		ldi r25,0
 2610 0702 9093 6500 		sts 100+1,r25
 2611 0706 8093 6400 		sts 100,r24
 2612 070a 84E0      		ldi r24,lo8(4)
 2613 070c 90E0      		ldi r25,0
 2614 070e 9FBD      		out 0x2e+1,r25
 2615 0710 8EBD      		out 0x2e,r24
 2616 0712 AD98      		cbi 0x15,5
 2617 0714 0895      		ret
 2618               		.size	nonRSB_drawPix, .-nonRSB_drawPix
 2619               		.stabs	"color:r(0,51)=*(4,2)",64,0,337,30
 2620               		.stabn	192,0,0,.LFBB6-.LFBB6
 2621               		.stabs	"bgTemp:r(4,2)",64,0,205,18
 2622               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2623               		.stabn	192,0,0,.LBB122-.LFBB6
 2624               		.stabn	224,0,0,.LBE122-.LFBB6
 2625               		.stabs	"bgTemp:r(4,2)",64,0,205,18
 2626               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2627               		.stabn	192,0,0,.LBB126-.LFBB6
 2628               		.stabn	224,0,0,.LBE126-.LFBB6
 2629               		.stabs	"bgTemp:r(4,2)",64,0,205,18
 2630               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2631               		.stabn	192,0,0,.LBB130-.LFBB6
 2632               		.stabn	224,0,0,.LBE130-.LFBB6
 2633               		.stabs	"bgTemp:r(4,2)",64,0,205,18
 2634               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2635               		.stabn	192,0,0,.LBB134-.LFBB6
 2636               		.stabn	224,0,0,.LBE134-.LFBB6
 2637               		.stabs	"bgTemp:r(4,2)",64,0,205,18
 2638               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2639               		.stabn	192,0,0,.LBB138-.LFBB6
 2640               		.stabn	224,0,0,.LBE138-.LFBB6
 2641               		.stabs	"bgTemp:r(4,2)",64,0,205,18
 2642               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2643               		.stabn	192,0,0,.LBB142-.LFBB6
 2644               		.stabn	224,0,0,.LBE142-.LFBB6
 2645               		.stabs	"bgTemp:r(4,2)",64,0,205,18
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 97


 2646               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2647               		.stabn	192,0,0,.LBB146-.LFBB6
 2648               		.stabn	224,0,0,.LBE146-.LFBB6
 2649               		.stabs	"bgTemp:r(4,2)",64,0,205,18
 2650               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2651               		.stabn	192,0,0,.LBB150-.LFBB6
 2652               		.stabn	224,0,0,.LBE150-.LFBB6
 2653               		.stabs	"bgTemp:r(4,2)",64,0,205,18
 2654               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2655               		.stabn	192,0,0,.LBB154-.LFBB6
 2656               		.stabn	224,0,0,.LBE154-.LFBB6
 2657               		.stabs	"bgTemp:r(4,2)",64,0,205,18
 2658               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2659               		.stabn	192,0,0,.LBB158-.LFBB6
 2660               		.stabn	224,0,0,.LBE158-.LFBB6
 2661               		.stabs	"bgTemp:r(4,2)",64,0,205,18
 2662               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2663               		.stabn	192,0,0,.LBB162-.LFBB6
 2664               		.stabn	224,0,0,.LBE162-.LFBB6
 2665               		.stabs	"bgTemp:r(4,2)",64,0,205,18
 2666               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2667               		.stabn	192,0,0,.LBB166-.LFBB6
 2668               		.stabn	224,0,0,.LBE166-.LFBB6
 2669               		.stabs	"bgTemp:r(4,2)",64,0,205,18
 2670               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2671               		.stabn	192,0,0,.LBB170-.LFBB6
 2672               		.stabn	224,0,0,.LBE170-.LFBB6
 2673               		.stabs	"bgTemp:r(4,2)",64,0,205,18
 2674               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2675               		.stabn	192,0,0,.LBB174-.LFBB6
 2676               		.stabn	224,0,0,.LBE174-.LFBB6
 2677               		.stabs	"bgTemp:r(4,2)",64,0,205,18
 2678               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2679               		.stabn	192,0,0,.LBB178-.LFBB6
 2680               		.stabn	224,0,0,.LBE178-.LFBB6
 2681               		.stabs	"bgTemp:r(4,2)",64,0,205,18
 2682               		.stabs	"blueVal:r(4,2)",64,0,207,24
 2683               		.stabn	192,0,0,.LBB182-.LFBB6
 2684               		.stabn	224,0,0,.LBE182-.LFBB6
 2685               		.stabn	224,0,0,.Lscope6-.LFBB6
 2686               	.Lscope6:
 2687               		.stabs	"",36,0,0,.Lscope6-.LFBB6
 2688               		.stabd	78,0,0
 2689               		.stabs	"lcd_Init:F(0,47)",36,0,969,lcd_Init
 2690               	.global	lcd_Init
 2691               		.type	lcd_Init, @function
 2692               	lcd_Init:
 2693               		.stabd	46,0,0
 2694               		.stabs	"_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c",132,0,0,.Ltext42
 2695               	.Ltext42:
   1:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** /* mehPL:
   2:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  *    I'm not too fond of long licenses at the top of the file.
   4:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  *    Please see the bottom.
   5:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  *    Enjoy!
   6:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  */
   7:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 98


   8:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
   9:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
  10:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
  11:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //lcdStuff 0.55ncf-2
  12:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
  13:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.55ncf-2 - a/o LCDdirectLVDS67:
  14:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            Adding notes to loadData() re: transitions...
  15:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            TODO: it's still a little unclear...
  16:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.55ncf-1 - adding BLUE_DIAG_SCROLL_FLASH
  17:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.55ncf - drawPix had uint8_t rowNum... switching to uint16_t
  18:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          a/o LCDdirectLVDS-62 (attempting to use DE_BLUE with ChiMei
  19:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          display)
  20:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          Also added BLUE_DIAG_BAR_SCROLL
  21:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.52ncf-1 - Adding notes re: old mental hurdles.
  22:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.52ncf - getting rid of git in this directory...
  23:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.51ncf-git-1ish Adding a few notes remaining from LCDdirectLVDS:
  24:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //						"SCOPING has been removed in LVDS, revisit LCDdirect50"
  25:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.51ncf-git first attempt at using git for uploading to googleCode...
  26:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        this version isn't yet used by any projects
  27:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.50ncf cleanup, colorOverride is unused...
  28:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //				SMILEY -> LCD_SMILEY
  29:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.40ncf-1 loadRow unused... removal untested...
  30:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.40ncf drawPix...
  31:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.30ncf-6 HSYNC_INACTIVE, etc. definable elsewhere
  32:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.30ncf-5 Adding BLUE_VERT_BAR_REVERSED
  33:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.30ncf-4 Adding NOTES: DON'T START WITH BLUE_DIAG_BAR
  34:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.30ncf-3 T_DV and T_Vlow overrideable
  35:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.30ncf-2 Not sure if I've modified it between... but here: 
  36:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        FRAME_COUNT_TO_DELAY wasn't defined, giving warnings
  37:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.30ncf-1 updateLCD() has return-values for state-switches
  38:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          (VFP, VSync, VBP, DE)
  39:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        ACTUALLY, that's unnecessary... state-transitions can be
  40:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        determined by vSync and dataEnable...
  41:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.30ncf Haven't been keeping these backed up regularly...
  42:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        More toward realtime adjustable timing values
  43:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        V Front Porch now occurs at the beginning of the frame, instead
  44:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        of at the end...
  45:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
  46:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.20ncf More Timing Value experiment preparation... 
  47:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.10ncf-3ish looking into reloading methods for e.g. experimenting with
  48:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          timing values: sdramThing2.0-7
  49:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          How to "move" timing-values around data which needn't be
  50:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          changed...
  51:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.10ncf-andsomemore
  52:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          Added MAKELONG to fix integer overflow warnings
  53:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          Revised it from "... + MAKELONG" to "MAKELONG(...)"
  54:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          (The +MAKELONG version is lost in the ether... if you *really*
  55:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //           want it, there's a localized version in sdramThing2.0-6)
  56:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.10ncf-1ish - Adding HSYNC_COUNT_FRAME_COMPLETE
  57:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //               Removal of LVDS_PRESCALER stuff...
  58:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //0.10ncf - Stolen from LCDdirectLVDS/54-moreColorStuff/main.c
  59:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          Removal of LCDdirectLVDS-specific stuff...
  60:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //				A little bit of rewriting of notes to be more generalized
  61:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          All delay_cyc references replaced with delay_Dots,
  62:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //					math changed accordingly...
  63:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
  64:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 99


  65:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // I hereby declare this FPD-Link simulation technique to forever be called
  66:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  PW-BANGing
  67:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
  68:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // a/o 0.10ncf-4: (sdramThing2.0v8-28)
  69:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   DON'T START WITH BLUE_DIAG_BAR
  70:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Unless you want to be depressed
  71:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Good Starting Point DE_BLUE
  72:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
  73:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
  74:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
  75:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // GENERAL TIMING NOTES
  76:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // a/o 0.52ncf-1:
  77:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Upon revisiting an ancient display controller project I did 15 years
  78:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   ago, I'm finding myself falling into similar thought-hurdles I had
  79:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   the first go-round with a graphic LCD display... so here're some
  80:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   concepts:
  81:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
  82:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Most graphical displays without onboard memory have basically these 
  83:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // same signals:
  84:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
  85:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //	Pixel Clock: Each clock-pulse *generally* corresponds to one pixel...
  86:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Whether these clock-pulses are used for drawing actual pixels, or
  87:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   otherwise...
  88:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
  89:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Horizontal Sync: Each time the Hsync pin is active, the display starts a
  90:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // 	new row. It syncs up the pixels horizontally, at the left of the
  91:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // 	screen.
  92:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
  93:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (This was one of my biggest mental-hurdles from those old days...
  94:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    aided by the fact that my display's timing-chips had different names
  95:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    for the Pixexl-Clock, Hsync, and Vsync pins.) 
  96:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Hsync is only pulsed *once* at the *beginning* of each row. 
  97:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   It is *not* pulsed with each pixel. It syncs the edge of the
  98:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   pixel-data with the edge of the screen.
  99:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 100:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Vertical Sync: Each time the Vsync pin is active, the display starts a
 101:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // new frame. It syncs the pixel-data with the top of the screen.
 102:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 103:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (Data Enable: This tells the (usually LCD) display that actual pixels
 104:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  are now being transmitted. It's a bit redundant, and some displays,
 105:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  especially older non-TFT displays don't even have it. 
 106:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Some newer TFT displays *only* use Data-Enable, determining the
 107:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  horizontal and vertical positions of the pixels based on the delay
 108:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  between Data-Enable pulses).
 109:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 110:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // I can't recall what the names were on my old display... but they were
 111:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // danged confusing. Especially to someone who'd never messed with graphics
 112:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // prior and had to reverse-engineer the whole thing. 
 113:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Oh yes, here they are: CPX, Frame, and Load. 
 114:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 115:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // As far as these three signals (Pixel Clock, Hsync, and Vsync):
 116:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  The actual timing-requirements may vary from display to display.
 117:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  But, it's pretty-well-established that for most displays these signals
 118:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  remain pretty constant. For example, an Hsync pulse may arrive at a
 119:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  specific rate (the duration of a "row"). Vsync, therefore, remains
 120:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  active for a number of "rows", even though no pixel-data is being sent
 121:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  during this time. And, again, even though no pixel-data is being sent,
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 100


 122:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  the Hsync pulse still occurs at the same rate it would if pixels were
 123:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  being drawn.
 124:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 125:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  This, I guess, is a remnant of ancient times, probably something to do
 126:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  with analog TV signals... the durations necessary for the electro-
 127:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  magnets to be moved from one side of the screen to the next, and the
 128:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  time necessary to move them again from top-to-bottom.
 129:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 130:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  In this digital era, it doesn't seem these timings would be necessary,
 131:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  and, in fact, most displays I've gotten working are highly tolerant of
 132:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  timing that doesn't match this rigidity.
 133:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 134:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  E.G. my *ancient* LCD project was designed long before I understood
 135:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  these "standard" timing specifications. As I recall, I don't have any
 136:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  delays between the "Frame" signal indicating the beginning of the next
 137:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  frame and the "Load" signal indicating the beginning of the first row
 138:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  of data. Certainly not several "rows" of Frame (aka Vsync)
 139:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  pulse-active.
 140:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 141:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Further, most of these standardized timings involve "porches", both
 142:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  front and back. The "Horizontal Front Porch" is the time between the
 143:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  end of a row and the Hsync signal. The "Horizontal Back Porch" is the
 144:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  time between the Hsync signal and the beginning of the actual 
 145:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  pixel-data. During these "porches", no pixel-data is sent, and the
 146:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Hsync signal is not active. Again, in the digital era these are pretty
 147:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  much unnecessary, but some displays still rely on them, and most
 148:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  specify timing-values for them.
 149:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 150:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 151:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 152:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //new notes a/o 0.10ncf-3ish:
 153:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // The basic idea is that timing is something that needs to be experimented
 154:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // with, often... so, for cases where LCD timing/drawing data is loaded
 155:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // beforehand (e.g. sdramThing2.0-7), it would be nice not to have to
 156:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // reload *all* the data, only to change the necessary timing data
 157:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 158:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Neglecting the SDRAM for a second, we have essentially:
 159:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (The exact placement is not necessarily in order... e.g. DH_DOTS could
 160:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  be at the end of a row, or at the beginning... VSYNC rows could be at
 161:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  the top, or at the bottom.....)
 162:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (See also notes "Here's how it worked pre-lvds:", which actually are a
 163:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   bit off, e.g. I don't think VSYNC L->H was delayed by DE_TIME after
 164:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Hsync)
 165:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 166:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // H_LOW_DOTS + HD_DOTS + DH_DOTS = "Horizontal Blank Time"
 167:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (This "front/back" thing always confused me...
 168:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  DH_DOTS is *in front of* Hsync as far as *time* is concerned...
 169:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  i.e. looking at a 'scope trace... But something about reading left-to-
 170:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  right causes me to feel like "front" is the furthest to the right
 171:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  which would be *later* in time... weird.
 172:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  
 173:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 174:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        |--|<--H_LOW_DOTS                       "Horiz Front Porch"
 175:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        |  |--|<--HD_DOTS="Horiz Back Porch"    |<---->|<--DH_DOTS
 176:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        |  .  .                                 .      |
 177:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        |<............................................./
 178:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        |  .  .                                 .    
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 101


 179:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        v  v  .                                 .      
 180:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /V _______________________________________________  \ VSYNC Rows
 181:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /H |__|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 182:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     DE _______________________________________________  /  T_Vlow times)
 183:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              .                                 .
 184:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              .                                 .      "Vsync Back Porch"
 185:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 186:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /H |__|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 187:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     DE _______________________________________________  /  T_VD times)
 188:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              .                                 .         "Vbp should be
 189:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              v                                 v          static"
 190:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              ***********************************
 191:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *                                 *
 192:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 193:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /H |__|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 194:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     DE ______|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|______   /
 195:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *                                 *
 196:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *<------ DE_ACTIVE_DOTS --------->*        (Repeat V_COUNT
 197:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *      .                          *         =1024 times)
 198:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                     .   Displayed Pixels
 199:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *      .                          *
 200:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *                                 *
 201:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *                                 *
 202:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 203:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /H |__|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 204:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     DE ______|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|______   /
 205:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              *                                 *
 206:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              ***********************************      
 207:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                                                      "Vsync Front Porch"
 208:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 209:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     /H |__|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 210:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     DE _______________________________________________  /  T_DV times)
 211:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 212:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 213:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #warning "TODO Maybe: LCDdirectLVDS (which so far is the only version which synced with such low re
 214:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 215:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Front vs. Back porches....
 216:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   If I were to draw a car driving down a street... 
 217:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   I would draw it with its front to the right, driving to the right...
 218:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 219:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       _____/¯¯¯¯\________     \O/
 220:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   ...|__   _________   __\     |
 221:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      ...\_/         \_/       / \							//
 222:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 223:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   The person is *in front of* the car... which means the car has not yet
 224:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   arrived at the person, but will soon... 
 225:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (later in time, not *before* in time)
 226:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  This is my logic...
 227:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   So The "Horizontal Front Porch", to me, should be to the RIGHT of the
 228:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Horizontal Sync Pulse...
 229:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   But that ain't how it is (unless I've confused myself into a circle
 230:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   where my logic is actually right, and I just think it's wrong?)
 231:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   
 232:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  By the logic that the front porch occurs *before* the sync pulse,
 233:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   ... I suppose we could think of a person in front of a house... it
 234:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   makes more sense, anyhow, since it's a porch in front of a house, 
 235:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   not person in front of a car.
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 102


 236:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   The person's walking into the house, crosses the *front*-porch 
 237:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   *before* enterring the doorway. If he continues walking all the way
 238:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   through the house and out the back-door, he'll be crossing the *back*
 239:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   porch later in time...
 240:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 241:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Right, so the logic makes sense... but for some reason I have to run 
 242:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  through this whole diatribe every time I see the terms.
 243:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Heh, and even after going through it, the damned thing seems backwards.
 244:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (Probably because I drew it with the front-porch to the right side...)
 245:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (AND THEN there's the issue that it seems to me like the front-porch
 246:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   should be to the left of the drawing-area whereas the back-porch
 247:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   should be to the right of it... rather than to the HSYNC pulse)
 248:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 249:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 250:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Anyways, all that drawing was to figure out where to position this
 251:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // in memory, such that it would be the least processing-effort to modify
 252:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // timing values for testing... (because loading the SDRAM's free-running 
 253:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // data takes ~20minutes!)
 254:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 255:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 256:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 257:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Options LTN, IDT, or TESTVALS
 258:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // IDT display *still* doesn't sync... maybe my H/V signals aren't right
 259:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef DISPLAY
 260:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DISPLAY TESTVALS //LTN //TESTVALS //IDT //LTN
 261:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 262:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 263:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //oldNote:
 264:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // TODO: Between OSCCAL_VAL and FRAME_UPDATE_DELAY
 265:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  it seems the speed (at least for the LTN) isn't so important after all
 266:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  This could be used to my advantage...
 267:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Maybe bump OSCCAL_VAL all the way up, but use a slower "bit-rate"
 268:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Thus, pixels could be skinnier, thus higher-resolution.
 269:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Or more instructions could be used for the same resolution
 270:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   allowing, e.g. sprites from program-memory, without necessitating a
 271:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   large (or any?) frame-buffer...
 272:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 273:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 274:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //This would normally be 0 for the highest-speed frame-refresh possible
 275:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // However, increasing this value can slow the frame-refresh rate
 276:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   if desired
 277:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // e.g. 50000 causes it to refresh ~ every few seconds
 278:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (durn-near the limit for how long the LCD will retain an image)
 279:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // The benefit being that it doesn't flicker at annoying rates for
 280:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  stationary images
 281:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  worth exploring...
 282:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This may be highly dependent on the screen capabilities...
 283:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   of course, this sorta thing is undocumented
 284:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   it just has to be experimented with
 285:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Further, it may be quite hard on the Liquid Crystals, since they'd 
 286:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   likely be driven DC... not sure what the long term effects are.
 287:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This could be a hell of a lot more sophisticated...
 288:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // e.g. refresh after a frameBuffer change
 289:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      refresh based on a seconds-timer
 290:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      ...
 291:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // AS-IS: Does refreshes completely independent of the frame-buffer
 292:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      if it's too slow, some images may be missed completely.
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 103


 293:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      This is not true for FRAME_SYNC TRUE (below)
 294:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      (and it's not really useful anymore with FRAME_SYNC)
 295:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // a/o sdramThing2.0, this is not really relevent...
 296:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // 	if the frame needs updating, just stop free-running, right?
 297:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // 	well, doing-so might cause issues, since the LVDS clock will not be
 298:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    running... this is a TBD
 299:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define FRAME_UPDATE_DELAY 0//5000//50000 //2000 //5000 //20000 //50000
 300:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 301:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 302:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //New Idea:
 303:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Disable the Hsync timer interrupt after the frame completes
 304:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  and reenable elsewhere...
 305:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (It seems pixels changing from one shade to another take an
 306:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   intermediate step halfway between)
 307:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (Thus, two updates then a pause might clear that up)
 308:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (Duh... it doesn't clear that up, because the fastest refresh rate
 309:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   is the same...)
 310:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (but it is an interesting effect)
 311:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (Double-Duh... I was using a slow refresh with FRAME_UPDATE_DELAY)
 312:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Reworded: Having several frame refreshes before a pause helps to
 313:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  "solidify" the color changes... especially the sharp changes 
 314:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (e.g. yellow<->black)
 315:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (Side Note: I saw this effect on a regular (NON-LVDS) TFT display 
 316:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   in LCDdirect that was only connected such that R, G, and B were each
 317:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   either full-off or full-on, i.e. all Red bits were connected to a
 318:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   single output pin (full on when 1, full off when 0).
 319:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   I hadn't attributed it to improper refresh synchronization
 320:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   as the refresh rate was too fast to see... That's a handy way to get
 321:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   intermediate shades/colors without refresh-flicker from pulsing them!)
 322:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  connected with each color 
 323:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  0 means no delay (except FRAME_UPDATE_DELAY) via interrupt disabling
 324:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  If you WANT this effect (for intermediate shades?) 
 325:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   set FRAME_COUNT_TO_DELAY to 1
 326:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Then, each change of color will (apparently) result in a value halfway
 327:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   between the old color and the new color
 328:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Not sure whether it's an electrical problem, but these half-shades 
 329:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   appear dithered, sometimes ugilly, sometimes it's nice. I guess it
 330:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   depends on the goal...
 331:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define FRAME_COUNT_TO_DELAY 2//7//1//5//2//3
 332:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 333:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 334:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //A/O v13: Using the Samsung LTN display, instead of the IDTech IAXG
 335:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // LTN appears to be content with my pseudo-LVDS scheme.
 336:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // IAXG has never unblanked
 337:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      Even though suitable timings were found with SwitchResX
 338:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      Maybe due to psuedo-LVDS
 339:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            slight timing issues // It probably doesn't work with all cases...
 340:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Definitely with drawPix/Images...(RC oscillator variances?)
 341:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            glitches when switching LVDS states 
 342:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 (thought I had that figured out, originally)
 343:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      The fact the LTN appears to recognize the signalling suggests the
 344:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      IAXG would be worth further exploration...
 345:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //         Unfortunately, the CCFT blew out my inverter
 346:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                        And I must have put it back together incorrectly
 347:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                        (backlight filters out of order or flipped?)
 348:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                        (which actually makes for some very interesting
 349:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                         visuals, but hard to develop with)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 104


 350:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      IAXG: uses DE, V, and H
 351:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             At low pixel-clock DE is active for fewer pixels...
 352:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              Last Tested: 680 was full-screen
 353:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             Nice because it increases the frame-rate!
 354:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      LTN:  uses DE only
 355:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 356:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 357:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // The idea is to use FastPWM with the PLL to implement 64-85Mbits/sec
 358:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (the PLL on the Tiny861 supposedly maxes out at 85MHz)
 359:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (Though I am currently running with OSCAL set to the highest frequency
 360:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   and the PLL seems to be syncing at about 128MHz)
 361:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (New Note, a/o sdramThing2.0v5... it's kinda ironic that I was able to
 362:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   run it at 128MHz with nothing more than an AVR and some gates...
 363:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   seeing as how sdramThing has been fidgetty just running at 8MHz
 364:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Anyways, an eventual goal is to run at 133MHz+, using basically
 365:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   nothing more than the SDRAM itself for timing and refreshes...
 366:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   would allow for full resolution and full color-depth)
 367:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 368:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 369:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 370:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 371:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Wiring:
 372:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Many iterations of AVR->Differential "LVDS" circuitry resulted in the
 373:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   simplest of all:
 374:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 375:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Believe it or not, the XOR is a standard TTL LS-series XOR: 74LS86
 376:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     Specifically: TI SN74LS86N from 1980 (the only XOR in my collection)
 377:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   It's spec'd to run from 4.5-5.5V, and its propagation delays and slew
 378:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     rates aren't really spec'd to be good enough for 128MHz pixel clock
 379:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     yet it's working...
 380:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Further, the output voltages are right in the LVDS range,
 381:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     IIRC (last I 'scoped) around 1.5V High and 1.0V Low
 382:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      (Don't forget the LCD has a 100ohm resistor between
 383:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //         RXinN/clk+ and RXinN/clk-)
 384:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 385:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   It's probably best to use two XORs from the same chip for a single
 386:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    LVDS channel, since different chips may have slightly different
 387:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    characteristics. 
 388:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 389:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   The entire circuit, thus, requires TWO 74LS86's 
 390:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    (four XORs apiece, two per LVDS channel, 8-total)
 391:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 392:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 393:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              VCC3V3   VCC3V3
 394:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                |        |                           ______________
 395:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                +---\ \¯¯¯-_                        |  LCD (1 channel
 396:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                     | |    ¯-                      |       of 4)
 397:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                     | | XOR   >------> RXinN/clk-  | ----.
 398:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   AVR, etc.         | |    _-                      |     |
 399:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   3.3V TTL >---+---/ /___-¯                        |     \ 100
 400:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   output       |                                   |     /
 401:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                |                                   |     \ ohms
 402:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                |                                   |     /
 403:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                `---\ \¯¯¯-_                        |     |
 404:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                     | |    ¯-                      |     |
 405:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                     | | XOR   >------> RXinN/clk+  | ----'
 406:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                     | |    _-                      |
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 105


 407:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                +---/ /___-¯                        |
 408:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                |        |                          |
 409:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //               GND      GND
 410:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 411:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  
 412:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Also used: The TTL 74AHC series...
 413:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    I found some one-gang 74AHC1G32 and 74AHC1G86's on an old iBook
 414:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     motherboard. (An OR and an XOR, respectively). These are spec'd for
 415:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     3.3V operation, and faster. The output voltages appear OK for LVDS
 416:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     (with a 100ohm load in the LCD)
 417:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 418:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  NOTE: Since I only had enough of these 1-gang devices for two LVDS
 419:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     channels, I had to implement Red and Green with the LS 
 420:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     before switching all channels to the LS... Using different chips
 421:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     (specifically, different TYPES of chips) for different channels
 422:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     caused timing issues: Since the AHC is faster, the clock and Blue
 423:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     signals are synchronized, but the red and green signals were shifted
 424:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     a bit or two (resulting in "Black" appearing green)
 425:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 426:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  For other circuits attempted, see oldNotes.txt
 427:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     (and boy there were many, involving voltage dividers, AC coupling,
 428:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      reference voltages, BJT differential amplifiers... I doubt I 
 429:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      documented them all, or even most. Whoda thunk the simplest, 
 430:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      especially under- AND over-spec'd--timing, supply voltage, and
 431:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      output voltage--would be the one...?)
 432:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 433:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // LVDS/FPD-Link timing:
 434:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 435:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |<--- (LCDdirectLVDS: "pixel") --->|
 436:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Timer1:   |<-- One Timer1 Cycle (OCR1C=6) -->|
 437:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  TCNT:     |  0   1    2    3    4    5    6  |  0   1    2    3    
 438:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |____.____.____.____               |____.____.____.____
 439:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  RXclk+:   /         |         \    .    .    /         |         \ //
 440:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |         |          ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|         |
 441:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // One Pixel: |         |<--- One FPD-Link Pixel Cycle --->|
 442:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |                                  |
 443:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // "Blue/DVH" |____ ____v____ ____ ____v____ ____|____ ____
 444:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  RXin2:    X B3 X B2 X DE X /V X /H X B5 X B4 X B3 X B2 X ...
 445:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯
 446:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |         |<--Not Blue-->|         |
 447:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |                                  |
 448:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // "Green"    |____ ____v____ ____v____ ____ ____|____ ____
 449:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  RXin1:    X G2 X G1 X B1 X B0 X G5 X G4 X G3 X G2 X G1 X ...
 450:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯ 
 451:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |         |<------->|-Not Green    |
 452:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 453:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // "Red"      |____ ____v____v____ ____ ____ ____|____ ____
 454:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  RXin0:    X R1 X R0 X G0 X R5 X R4 X R3 X R2 X R1 X R0 X ...
 455:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯
 456:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |         |<-->|-Not Red
 457:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 458:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Of course: The "Not Green/Red" bits above are least-significant-bits
 459:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              and basically have little/no visible effect
 460:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 461:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 462:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Implementations/prospects:
 463:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  * rowBuffer.c (more like row-settings-buffer)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 106


 464:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     calculate a row's worth of pixels before drawing that row
 465:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     (uses packed color settings in a single byte per drawable pixel)
 466:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     64 drawable pixels across, regardless of LVDS speed
 467:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  * For faster pixels: these settings values could be stored 
 468:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     in individual bytes. Gives about 1/3 more pixels at 3x the memory
 469:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     (not implemented)
 470:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  * rowSegBuffer.c
 471:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     also calculates an entire row before drawing it
 472:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     instead of storing pixels, store "segments"
 473:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     i.e. each segment is defined by a color value and a length
 474:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     Number of segments is limited only by memory...
 475:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      e.g. 64 segments per row (max) is 64*3Bytes
 476:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       Three bytes for color, and *really simple* packing for seg-length
 477:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      BUT: at slow LVDS speeds, the resolution of these segments could be
 478:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       as high as one LCD pixel.
 479:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      possibly: at *really* low LVDS speeds we could be 64*2Bytes
 480:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      (with packing)
 481:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      Actually: Using GB_COMBINED gives 2Bytes per segment
 482:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      only adds two clock cycles to each "pixel", so probably worth it
 483:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 484:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   In Any Case: There's not enough RAM for a full frame
 485:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          64 pixels across * 64 pixels down is 4096 bytes
 486:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          So whatever method, we need to precalculate each row before
 487:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          displaying it
 488:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          Could be as simple as loading direct from program memory
 489:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 490:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 491:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Since low-bits are barely visible, their effect is neglected.
 492:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 493:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 494:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE/V/H Timing (LCDdirectLVDS):
 495:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  
 496:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 497:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |  0   1    2    3    4    5    6       All: set @ 0
 498:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            |____.____.____.____                         OCR1C = 6 
 499:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Clock:    /                   \    .    .    /         Complementary-
 500:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                                 ¯¯¯¯ ¯¯¯¯ ¯¯¯¯          Output Mode
 501:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                                                          required for DT
 502:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Signal:    B3   B2   DE   /V   /H   B5   B4 | B3
 503:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ____ ____ ____ ____ ____ ____ ____|____    
 504:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   DE:      X B3 X B2 /    .    .    \ B5 X B4 X B3 X    
 505:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   state2    ¯¯¯¯ ¯¯¯¯                ¯¯¯¯ ¯¯¯¯|¯¯¯¯    
 506:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   DE_BLUE: >¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|    DT=X, OCR=0
 507:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                         Watch the transition!! -------^
 508:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   DE_NORM: >_________/¯¯¯¯¯¯¯¯¯¯¯¯¯¯\_________|    DT=2, OCR=4
 509:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   DC_DISABLED:
 510:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   maxBlue: >¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯\____|		DT=0, OCR=5
 511:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             See below for more blue settings...
 512:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 513:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ____ ____      ____      ____ ____|____ 
 514:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H (only): X xx X xx \    /    \    / xx X xx X xx X    
 515:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   state1    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯      ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ 
 516:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            >______________/¯¯¯¯\______________|    DT=3, OCR=3
 517:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  DC_DISABLED:
 518:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Not much can be done...
 519:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 520:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ____ ____           ____ ____ ____|____ 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 107


 521:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V w/o H:  X xx X xx \    .    /    \ xx X xx X xx X
 522:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   state3    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯      ¯¯¯¯ ¯¯¯¯|¯¯¯¯
 523:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            >___________________/¯¯¯¯\_________|    DT=4, OCR=4 (+?)
 524:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DC_DISABLED:
 525:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            >___________________/¯¯¯¯¯¯¯¯¯\____|		DT=4, OCR=5
 526:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 527:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ____ ____                ____ ____|____ 
 528:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V w/ H:   X xx X xx \    .    .    / xx X xx X xx X
 529:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   state4    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ 
 530:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            >__________________________________|    DT=X, OCR=0
 531:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                             TransitionWatch!!! -------^
 532:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                             Shouldn't matter... DT from no-edge
 533:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DC_DISABLED:
 534:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            >¯¯¯¯¯¯¯¯¯\________________________|		DT=0, OCR=1
 535:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 536:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ____ ____      ____ ____ ____ ____|____ 
 537:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Nada:     X xx X xx \    /    .    \ xx X xx X xx X    
 538:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   state0    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯           ¯¯¯¯ ¯¯¯¯|¯¯¯¯     
 539:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            >______________/¯¯¯¯¯¯¯¯¯\_________|    DT=3, OCR=4 (+?)
 540:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DC_DISABLED:
 541:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //            >______________/¯¯¯¯¯¯¯¯¯¯¯¯¯¯\____|		DT=3, OCR=5
 542:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 543:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //So far this is the only case I've seen:
 544:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // /Vsync
 545:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef VSYNC_ACTIVE
 546:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define VSYNC_ACTIVE		0
 547:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 548:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef VSYNC_INACTIVE
 549:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define VSYNC_INACTIVE	1
 550:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 551:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // /Hsync
 552:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef HSYNC_ACTIVE
 553:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define HSYNC_ACTIVE		0
 554:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 555:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef HSYNC_INACTIVE
 556:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define HSYNC_INACTIVE	1
 557:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 558:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE (active high)
 559:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef DE_ACTIVE
 560:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DE_ACTIVE			1
 561:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 562:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef DE_INACTIVE
 563:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DE_INACTIVE		0
 564:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 565:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 566:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // HERE!
 567:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 568:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 569:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 570:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 571:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Transitions: OLD!!!!! WRONG!!!!
 572:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (are they? There're several additional transitions, now, for one.)
 573:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  The idea is to reduce the number of instructions between each
 574:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  LVDS "state."
 575:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  These are implemented below in the case:
 576:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    "#else //NOT FULL_INIT_TESTS"
 577:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Since each instruction takes *longer than* a single pixel
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 108


 578:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    two instructions would *at best* occur on two consecutive pixels
 579:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    Thus, there's likely to be a transition-glitch
 580:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    (e.g. old OCR value with new DT value)
 581:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Note that the new DT values are implemented at the next corresponding
 582:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    edge after the DT-write instruction completes
 583:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    (for +OC1A/DT1H, when TCNT is reset to 0)
 584:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    (for -OC1A/DT1L, when TCNT passes OCR1A)
 585:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    New OCR values are delayed until the next TCNT reset to 0
 586:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 587:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Initial:
 588:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Nada					DT=2  NADA_OCR = (3<=OCR<(=?)6)
 589:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 590:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Nada	->	H			OCR=2
 591:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H		->	Nada		OCR=NADA_OCR
 592:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  
 593:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Nada	->	V			DT=3
 594:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V		->	V+H		OCR=0
 595:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V+H	->	V			OCR=NADA_OCR
 596:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V		->	Nada		DT=2
 597:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 598:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Nada	->	DE			DT=1
 599:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  DE	->	Nada		DT=2
 600:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 601:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0
 602:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (defined(REMOVE_DC) && REMOVE_DC)
 603:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define Nada_init()         { DT1=(3<<4); OCR1A=5; }
 604:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 605:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //Unused, normally...
 606:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define Vsync_init()       { DT1=(4<<4);  OCR1A=5; }
 607:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define VplusH_init()      { DT1=0;       OCR1A=1; }
 608:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define Hsync_init()       { DT1=(3<<4);  OCR1A=3; }
 609:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DEonly_init()      { DT1=(2<<4);  OCR1A=4; }
 610:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DEblue_init()		 { DT1=0;       OCR1A=5; }
 611:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 612:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else //!REMOVE_DC
 613:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Nada init
 614:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define Nada_init()         { DT1=(3<<4); OCR1A=4; }
 615:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 616:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Unused, normally...
 617:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define Vsync_init()			{ DT1=(4<<4);	OCR1A=4; }
 618:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define VplusH_init()		{ DT1=0;			OCR1A=0; }
 619:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define Hsync_init()			{ DT1=(3<<4);	OCR1A=3; }
 620:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // #define DE_init()				{ DT1=(2<<4);	OCR1A=4; } //...SHOULD BE
 621:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DEonly_init()			{ DT1=(2<<4);  OCR1A=4; }
 622:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DEblue_init()			{ DT1=0;       OCR1A=6; }
 623:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define DE_init()				{ DT1=(1<<4);	OCR1A=2; } //Works with DE_ONLY
 624:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //#define DE_init()				{ DT1=0;			OCR1A=0xff; }	//DE_BLUE
 625:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif //REMOVE_DC
 626:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 627:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 628:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define FULL_INIT_TESTS TRUE
 629:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 630:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Display is DE-Only (doesn't use H/Vsync)
 631:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Shouldn't be necessary to select this if it is,
 632:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // since DE timing is the same either way
 633:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // but I want to test whether a single-bit is being detected
 634:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (e.g. maybe the rise/fall-times of the output aren't fast enough for a
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 109


 635:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  single bit, which might explain why the other display didn't work)
 636:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //These are just examples... the project should define them:
 637:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0
 638:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (defined(DE_ONLY_DISPLAY) && DE_ONLY_DISPLAY)
 639:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Vsync_fromNada()      Nada_init()
 640:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define VplusH_fromVsync()    Nada_init()
 641:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Vsync_fromVplusH()    Nada_init()
 642:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromVsync()      Nada_init()
 643:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Hsync_fromNada()      Nada_init()
 644:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromHsync()      Nada_init()
 645:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DEonly_fromNada()     DE_init()
 646:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DEblue_fromDEonly()	DE_init()
 647:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromDEblue()		Nada_init()
 648:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #if(DE_BLUE)
 649:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "DE_BLUE is true, but not implemented with DE_ONLY_DISPLAY"
 650:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "...The display should be blank"
 651:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #endif
 652:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Use full initialization of each LVDS state
 653:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (might not be good during transitions, but should guarantee
 654:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  steady-state, in case my transitions aren't correct...)
 655:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (defined(FULL_INIT_TESTS) && FULL_INIT_TESTS)
 656:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Vsync_fromNada()		Vsync_init()
 657:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define VplusH_fromVsync()		VplusH_init()
 658:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Vsync_fromVplusH()		Vsync_init()
 659:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromVsync()		Nada_init()
 660:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Hsync_fromNada()		Hsync_init()
 661:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromHsync()		Nada_init()
 662:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DEonly_fromNada()		DEonly_init()
 663:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DEblue_fromDEonly()	DEblue_init()
 664:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromDEonly()		Nada_init()
 665:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromDEblue()		Nada_init()
 666:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 667:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 668:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else	//NOT FULL_INIT_TESTS
 669:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define Vsync_fromNada()   { DT1=(4<<4); }
 670:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Vsync_fromNada()   { DT1=(4<<4); OCR1A=5; } //Leave two bits high
 671:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 																	 //for easy-scoping
 672:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 						//Three would be nicer, but I'm pretty sure OCR=TOP=ON
 673:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define VplusH_fromVsync() { OCR1A=0; }
 674:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define Vsync_fromVplusH() { OCR1A=4; }
 675:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Vsync_fromVplusH() { OCR1A=5; }				//Extra bits for scoping
 676:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define Nada_fromVsync()   { DT1=(3<<4); }
 677:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromVsync()   { DT1=(3<<4); OCR1A=4; } //scoping...
 678:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Hsync_fromNada()   { OCR1A=3; }
 679:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromHsync()   { OCR1A=4; }
 680:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 681:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromDEblue()	{ DT1=(3<<4); OCR1A=4; }
 682:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define Nada_fromDEonly()	{ DT1=(3<<4); }
 683:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DEonly_fromNada()	{ DT1=(2<<4); }
 684:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DEblue_fromNada()	{ OCR1A=0xff; }
 685:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DEblue_fromDEonly() { OCR1A=0xff; }
 686:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 687:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif //End Of FULL_INIT_TESTS
 688:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
 689:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 690:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 691:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 110


 692:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // The typical patterns look like this (not at all to scale):
 693:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   ----______------------------------------------------______-- V
 694:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ....
 695:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      --_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_ H
 696:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ....
 697:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      __________-__-__-__-__-__-__-__-__-__-__________________  DE
 698:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 
 699:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             ^^^^\														//blah
 700:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //             1234 5?
 701:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Pixels are sent during DE High (basically all the CPU will be used here)
 702:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Ideally, 
 703:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  there won't be any glitches when changing from one state to another
 704:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 705:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Init (pre 1):
 706:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    DeadTimerRising=1
 707:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 708:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  The states are:
 709:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (Not necessarily accurate, just looking into necessary changes)
 710:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (from Vsync L->H)
 711:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 712:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   1  NothingActive (long, No DE, VporchFrontTimes)
 713:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 714:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   2  Hsync
 715:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 716:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   3  NothingActive (short)
 717:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 718:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   4  DE
 719:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 720:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   5  NothingActive(?)
 721:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 722:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   7  Repeat 2-5 for each row
 723:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 724:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   8  NothingActive (long, No DE, VporchBackTimes)
 725:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 726:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   9  V w/o H
 727:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 728:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   10 V w/  H
 729:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 730:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   11 Repeat 9-10 for Vsync time...
 731:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 732:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 733:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Here's how it worked pre-lvds:
 734:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // HSYNC, VSYNC, and DE refer to the actual pins
 735:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // In the LVDS setup, there're modes corresponding to each pin-combination
 736:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 737:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Timer Interrupt:
 738:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  loadData:
 739:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   HSYNC active
 740:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   HSYNC Low delay
 741:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   HSYNC inactive
 742:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   if(dataEnable)
 743:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    DE active
 744:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     Send row data
 745:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    DE inactive
 746:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  //Prep for next interrupt
 747:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  switch(hsyncCount++)
 748:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    //Vsync H->L (active)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 111


 749:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    1:
 750:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          dataEnable=FALSE
 751:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          VSYNC active
 752:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    //Vsync L->H (inactive)
 753:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    T_Vlow:
 754:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          VSYNC inactive
 755:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    //Start of frame
 756:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    T_VD +(T_Vlow):
 757:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          dataEnable=TRUE
 758:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    //All rows have been displayed
 759:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    V_COUNT +(T_VD+T_Vlow):
 760:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          dataEnable=FALSE
 761:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    //Frame Complete
 762:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    T_DV +(V_COUNT+T_VD+T_Vlow): 
 763:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          hsyncCount=0
 764:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  if(dataEnable)
 765:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    Use the remaining time to load the next row to memory
 766:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 767:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  So:
 768:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Interrupt0       End
 769:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |  Interrupt1
 770:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v  v
 771:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 772:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___________________________________________________ ...
 773:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯|_____________________________________ ...
 774:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       |        ||
 775:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DETIME^--------^|
 776:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 |
 777:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 VSYNC active
 778:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 dataEnable=FALSE (not necessary?)
 779:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 780:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptT_Vlow   End
 781:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |
 782:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v
 783:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 784:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___________________________________________________ ...
 785:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V _____________|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ ...
 786:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       |        ||
 787:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DETIME^--------^|
 788:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 |
 789:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 VSYNC inactive
 790:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 791:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 792:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptT_VD   End  InterruptT_VD+1
 793:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |  |            End
 794:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v  v            v
 795:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 796:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ____________________|¯¯¯¯¯¯¯¯|_______|¯¯¯¯¯¯¯¯|____ ...
 797:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 798:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       |        ||      |        |
 799:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DETIME^--------^|      ^--------^
 800:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 |
 801:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 dataEnable=TRUE
 802:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 803:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptV_COUNT  End
 804:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |
 805:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 112


 806:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 807:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___|¯¯¯¯¯¯¯¯|______________________________________ ...
 808:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 809:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       |        ||      |        |
 810:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DETIME^--------^|      ^--------^
 811:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 |
 812:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 dataEnable=FALSE
 813:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 814:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 815:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This isn't really a state, it's basically just:
 816:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // if(hsyncCount == NUM_HYSYNCS_PER_FRAME)
 817:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    hsyncCount = 0;
 818:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                    .....................................
 819:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                    .                                   .
 820:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptT_DV   End .Interrupt0                         .
 821:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             | .|                                  .
 822:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v .v                                  .
 823:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 824:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___________________________________________________ .
 825:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|____________________ .
 826:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       |        ||  .   |        |                      .
 827:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DETIME^--------^|  .   ^--------^                      .
 828:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 |  .                                   .
 829:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                 hsyncCount=0 (repeat from Interrupt0)  .
 830:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                    .                                   .
 831:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                    .....................................
 832:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 833:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 834:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 835:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // THESE STATES ARE NO LONGER ACCURATE
 836:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // ESPECIALLY THIS FIRST STATE.
 837:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // V Front Porch originally (and in these drawings) occurred at the end
 838:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // of the frame...
 839:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // More logically, it now starts at the beginning of the frame
 840:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (Also removing this initial "glitch" of a single interrupt with
 841:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  NothingActive)
 842:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 843:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // THESE STATES ARE NO LONGER ACCURATE (a/o 0.30, for certain)
 844:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // NOW to compare with LVDS states:
 845:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 846:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Interrupt0       End
 847:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |  Interrupt1
 848:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v  v
 849:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 850:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___________________________________________________ ...
 851:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯|_____________________________________ ...
 852:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    ^ ^          ^   ^ ^
 853:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |   | |
 854:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |   | +--- V w/o H  \ These two toggle until
 855:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |   +----- V w/ H   / next LCD state...
 856:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |
 857:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          +--------- V w/o H > Intermediate change of state
 858:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |
 859:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | +----- NothingActive  \ From Previous State (?)
 860:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    +------- H_Only         /
 861:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 862:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 113


 863:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptT_Vlow   End
 864:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |
 865:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v
 866:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 867:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___________________________________________________ ...
 868:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V _____________|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ ...
 869:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    ^ ^          ^   ^ ^
 870:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |   | |
 871:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |   | +--- NothingActive  \ These two toggle until
 872:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |   +----- H_Only         / next LCD state...
 873:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          |
 874:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |          +--------- NothingActive > Intermediate change of state
 875:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |
 876:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | +----- V w/o H   \ From previous state
 877:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    +------- V w/ H    /
 878:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 879:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 880:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptT_VD   End  InterruptT_VD+1
 881:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |  |            End
 882:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v  v            v
 883:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 884:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ____________________|¯¯¯¯¯¯¯¯|_______|¯¯¯¯¯¯¯¯|____ ...
 885:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 886:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    ^ ^              ^ ^^        ^ 
 887:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |              | ||        |
 888:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |              | ||        +--- NothingActive  \  These four
 889:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |              | |+------------ DE              | cycle until
 890:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |              | +------------- NothingActive   | next LCD state...
 891:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |              +--------------- H_Only  ^      /
 892:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |                                       |
 893:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | +----- NothingActive  \ From previous   |
 894:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    +------- H_Only         / state           +-This intermediate state
 895:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                                                may not be necessary
 896:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                                                (IAXG01 shows 160 dots!)
 897:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 898:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 899:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 900:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptV_COUNT  End
 901:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             |
 902:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v
 903:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 904:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___|¯¯¯¯¯¯¯¯|______________________________________ ...
 905:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 906:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    ^ ^^        ^    ^ ^
 907:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | ||        |    | |
 908:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | ||        |    | +--- NothingActive \  These two toggle
 909:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | ||        |    +----- H_Only        /  until next LCD state
 910:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | ||        |
 911:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | ||        +---- NothingActive \ 								//blah
 912:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |+------------- DE             |  From previous state
 913:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | +-------------- NothingActive  |
 914:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    +---------------- H_Only        /
 915:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 916:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This isn't really a state, it's essentially just:
 917:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  if(hsyncCount == NUM_HSYNCS_PER_FRAME)
 918:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    hsyncCount = 0;
 919:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                    .....................................
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 114


 920:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                    .                                   .
 921:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //InterruptT_DV   End .Interrupt0                         .
 922:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    |             | .|                                  .
 923:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    v             v .v                                  .
 924:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 925:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE ___________________________________________________ .
 926:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|____________________ .
 927:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    ^ ^             .                                   .
 928:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | |             .....................................
 929:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    | +--- NothingActive \											//blah
 930:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    +----- H_Only        / From previous state...
 931:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 932:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 933:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 934:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  LVDS State transitions:
 935:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   1 H_Only
 936:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   2 NothingActive
 937:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 938:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   3 V w/o H
 939:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   4 V w/ H
 940:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    
 941:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (repeat 3,4)
 942:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 943:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   5 V w/o H
 944:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 945:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   6 NothingActive
 946:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   7 H_Only
 947:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 948:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (repeat 6,7)
 949:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 950:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   8 NothingActive
 951:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 952:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   9 H_Only
 953:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  10 NothingActive
 954:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  11 DE
 955:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  12 NothingActive
 956:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 957:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (repeat 9-12)
 958:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 959:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  13 H_Only
 960:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  14 NothingActive
 961:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 962:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (repeat 13-14)
 963:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 964:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   These should be reviewed to determine which changes are necessary
 965:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   between each state...
 966:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (the fewer changes, the less likely we'll glitch...?)
 967:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 968:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 969:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void lcd_Init(void)
 970:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
 2696               		.stabn	68,0,970,.LM404-.LFBB7
 2697               	.LM404:
 2698               	.LFBB7:
 2699               	/* prologue: function */
 2700               	/* frame size = 0 */
 2701               	/* stack size = 0 */
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 115


 2702               	.L__stack_usage = 0
 971:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  	Nada_init();
 2703               		.stabn	68,0,971,.LM405-.LFBB7
 2704               	.LM405:
 2705 0716 AD9A      		sbi 0x15,5
 2706 0718 82E0      		ldi r24,lo8(2)
 2707 071a 90E0      		ldi r25,0
 2708 071c 9093 6500 		sts 100+1,r25
 2709 0720 8093 6400 		sts 100,r24
 2710 0724 84E0      		ldi r24,lo8(4)
 2711 0726 90E0      		ldi r25,0
 2712 0728 9FBD      		out 0x2e+1,r25
 2713 072a 8EBD      		out 0x2e,r24
 2714 072c AD98      		cbi 0x15,5
 2715 072e 0895      		ret
 2716               		.size	lcd_Init, .-lcd_Init
 2717               	.Lscope7:
 2718               		.stabs	"",36,0,0,.Lscope7-.LFBB7
 2719               		.stabd	78,0,0
 2720               		.stabs	"updateLCD:F(4,2)",36,0,1264,updateLCD
 2721               	.global	updateLCD
 2722               		.type	updateLCD, @function
 2723               	updateLCD:
 2724               		.stabd	46,0,0
 972:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
 973:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 974:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 975:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define TESTVALS	0
 976:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define LTN 1
 977:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define IDT 2
 978:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 979:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 980:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //TIMING:
 981:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Measurements below (in microseconds) are referring to preLVDS
 982:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  There may be other such old-notes...
 983:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 984:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 985:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        |<--T_Hhigh-->| |<-T_Hlow
 986:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    __   _____________   ____________  3.6V
 987:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // H    |_|             |_|           _  0V
 988:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 989:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    Data Enable
 990:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       Only active when there's valid pixel data
 991:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       (For a dual-pixel 1024x768 display:
 992:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //         for 512 of the 717 clocks in HSYNC-active)
 993:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       Low during Vsync... (~720us)
 994:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
 995:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 996:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //IDTech display: 136 dots
 997:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //2-136+
 998:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //IDTech, last used: 40
 999:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //LTN Last used 8
1000:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // LTN: 1072<=1344<=1500 clocks per line, 1024DE... Hsync unused
1001:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // SEE Hlow_Delay() notes if this value is large!
1002:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1003:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef H_LOW_DOTS
1004:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 116


1005:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define H_LOW_DOTS	8
1006:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1007:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define H_LOW_DOTS   40//8//1//40 //30 //2//136
1008:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1009:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define H_LOW_DOTS	100//0 //LTN doesn't use H_LOW (DE-only)
1010:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 							  // And having a value here increases codesize
1011:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1012:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1013:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1014:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //H is set low immediately upon entry of the timer interrupt
1015:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // its low-time is controlled via nops
1016:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (so if HLow is long for a particular display, this might need revising)
1017:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1018:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if((!defined(HLOW_DELAY_OVERRIDE) || !HLOW_DELAY_OVERRIDE) \
1019:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		                                         && !defined(Hlow_Delay))
1020:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define Hlow_Delay() \
1021:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	delay_Dots(H_LOW_DOTS)
1022:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1023:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1024:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1025:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1026:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1027:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //This was found expermentally with SwitchResX
1028:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //IDTech Last Used: 680
1029:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (IDTech had some oddities regarding slow pixel-clocks, where pixels
1030:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  would be repeated, regardless of the pixel-clock, thus, for slow clocks
1031:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  it has the effect of *stretching* the image, thus 680 "pixels" across
1032:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  instead of its 1024 *physical* pixels)
1033:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //LTN last used 1024
1034:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Oddly: For the LTN, this doesn't seem to affect the horizontal
1035:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //        it does, however, affect the vertical(!)
1036:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // If I recall Correctly, this is used only for setting the timer interrupt
1037:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  rate...
1038:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1039:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DE_ACTIVE_DOTS	1024
1040:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1041:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DE_ACTIVE_DOTS	680 //1024 //800 //920 //943 //812 //472 //1024
1042:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1043:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DE_ACTIVE_DOTS	1024
1044:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1045:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1046:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1047:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Horizontal Blank Time: HD_DOTS + H_LOW + DH_DOTS
1048:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  90-320+
1049:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Horizontal Total Time: 1206<=1344<=2047
1050:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // ... but Total = Blank + Pixels, so 90+1024 != 1206
1051:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Excess waits should be thrown in DH (since that's between interrupts)
1052:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //T_HD is the time from H inactivated to DE activated
1053:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //aka H back-porch: 1-160+
1054:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //IDTech Last Used: 50
1055:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //LTN last used 5
1056:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1057:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef HD_DOTS
1058:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1059:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define HD_DOTS 5
1060:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1061:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define HD_DOTS	50 //5 //0//20//5 //50 //30 //1 //160
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 117


1062:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1063:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define HD_DOTS 50//5
1064:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1065:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1066:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1067:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef HD_Delay
1068:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define HD_Delay()	delay_Dots(HD_DOTS)
1069:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1070:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1071:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // I think this was just a mistake. This change to delay_Dots a/o 0.10ncf
1072:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (untested in LCDdirectLVDS)
1073:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //delay_cyc(HD_DOTS)
1074:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1075:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1076:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This is the number of CPU cycles between DE->L and Horiz->L
1077:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This is just used in calculating the OCR value...
1078:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // aka H Front Porch: 0-24+
1079:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // IDTech Last Used: 24
1080:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // LTN last used 46
1081:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // 1072-1024-1-1 = 46
1082:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef DH_DOTS
1083:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1084:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DH_DOTS	46
1085:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1086:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DH_DOTS	24 //46 //480//6//12//24 //46 //24 //122//30 //0 //24
1087:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1088:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define DH_DOTS	0//1000//100//46
1089:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1090:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1091:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1092:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       |
1093:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       v
1094:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      T_DH
1095:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      ||    |<-T_DE->|  |  |<--T_HD (Hsync->DE)
1096:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // H   __.  ____________  .___________
1097:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      .|_|  .        .|_|  .
1098:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     _.     .________.     .___________
1099:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE   |_____| 512clk |_____|
1100:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //      ^              ^
1101:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //       \___________   \                        (just avoiding \ warning)
1102:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                   \  |     768 Hsyncs
1103:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                    v v
1104:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     _             _ _ _ _ _ _ _ _ _ _ 
1105:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE   |___________| | | | | | | | | | |______
1106:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
1107:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // one Hsync = T_HD+T_DH+T_Hlow+T_DE = 19.865us
1108:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1109:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //aka V-sync back porch: 7-29-63 "Vbp should be static"
1110:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // IDTech Last Used: 29
1111:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // LTN last used 3
1112:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //LTN Frame: 772<=806<=1000 lines...
1113:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1114:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef T_VD
1115:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1116:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_VD 3
1117:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1118:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define  T_VD 29 //3//29 //7 //29
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 118


1119:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1120:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_VD 3
1121:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1122:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1123:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1124:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //aka V-sync front porch: 1-3+
1125:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // IDTech Last Used: 3
1126:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // LTN last used 3
1127:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef T_DV
1128:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1129:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_DV 3
1130:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1131:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_DV 3//3 //1 //3
1132:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1133:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_DV 3
1134:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1135:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1136:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1137:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //1-6+ (1 is used by the first switch-case...)
1138:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // IDTech Last Used: 6
1139:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // LTN Last used 16
1140:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // 772 - 768 - 1 - 1 = 2
1141:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef T_Vlow
1142:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1143:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_Vlow 16
1144:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1145:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_Vlow	6 //16//6 //2 //6
1146:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1147:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define T_Vlow 32
1148:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1149:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1150:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1151:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // IDTech Last Used: 768
1152:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #ifndef V_COUNT
1153:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1154:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define V_COUNT	768
1155:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1156:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define V_COUNT	768
1157:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1158:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // #if (LVDS_PRESCALER == 8)
1159:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define V_COUNT 768
1160:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // #else
1161:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  #define V_COUNT	(768*2/3)
1162:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // #endif
1163:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1164:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1165:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1166:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                       
1167:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                      |           
1168:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                      V           
1169:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              |<-T_DV>|           |<-T_VD-->|
1170:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              .       .           .         .
1171:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     _____________||__.   124us   .____||___________________
1172:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V           .   ||  |___________|    ||   .
1173:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     _ _ _ _ _ _ _|| _ _ _ _ _ _ _ _ _ ||_ _ _ _ _ _ _ _ _ _ _
1174:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H   | | | | | | ||| | | | | | | | | ||| | | | | | | | | | |
1175:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //              .   ||                   ||   .
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 119


1176:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     _ _ _ _ _.   ||       720us       ||   ._ _ _ _ _ _ _ _ _
1177:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE   | | | | |___||___________________||___| | | | | | | | |
1178:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                  ||                   ||
1179:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
1180:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                        1
1181:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                        |
1182:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                        v               
1183:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     _________________   ___________________   _____________
1184:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  V                   |_|                   |_|
1185:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  H  |||||||||||||||||||||||||||||||||||||||||||||||||||||||
1186:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE  ||||||||||||||||_____|||||||||||||||||_____||||||||||||
1187:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                          ^
1188:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                          |
1189:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //                          2
1190:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1191:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1192:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1193:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define HSYNC_COUNT_FRAME_COMPLETE  \
1194:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	(T_DV +(V_COUNT+T_VD+T_Vlow) + FRAME_UPDATE_DELAY)
1195:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // T_DV = 3
1196:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // V_COUNT = 768 
1197:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // T_VD = 3
1198:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // T_Vlow = 32
1199:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // FRAME_UPDATE_DELAY = 0
1200:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // TOTAL = 806
1201:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1202:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(FRAME_UPDATE_DELAY != 0)
1203:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #error "FRAME_UPDATE_DELAY is no longer implemented..."
1204:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1205:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1206:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1207:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#if(HSYNC_COUNT_FRAME_COMPLETE & 0x01)
1208:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // #warning "Total vertical lines might need to be even!"
1209:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //This should be fixed...
1210:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#endif
1211:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1212:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1213:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DOT_COUNT_PER_HSYNC \
1214:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	(H_LOW_DOTS + HD_DOTS + DE_ACTIVE_DOTS + DH_DOTS)
1215:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // H_LOW_DOTS = 100
1216:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // HD_DOTS = 50 
1217:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DE_ACTIVE_DOTS = 1024
1218:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DH_DOTS = 0
1219:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // TOTAL = 1174
1220:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1221:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1222:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define MAKELONG (0L)
1223:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1224:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DOT_COUNT_PER_FRAME \
1225:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  ((MAKELONG(HSYNC_COUNT_FRAME_COMPLETE)) * (MAKELONG(DOT_COUNT_PER_HSYNC)))
1226:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // TOTAL = 946,244
1227:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1228:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Hlow_Delay 		H_LOW_DOTS
1229:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //HD_Delay			HD_DOTS	
1230:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //DE_ACTIVE_DOTS
1231:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //DH_DOTS
1232:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 120


1233:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1234:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1235:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ \
1236:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void loadData(uint16_t rowNum, uint8_t dataEnable) \
1237:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	  __attribute__((__always_inline__));
1238:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1239:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1240:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** uint8_t dataEnable = 0;
1241:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** uint8_t vSync = 0;
1242:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** uint16_t hsyncCount = 0;
1243:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1244:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //frameCount=0 can be used in main to detect whether we've completed a 
1245:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  a frame AND its FRAME_UPDATE_DELAY
1246:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (defined(FRAME_COUNT_TO_DELAY) && (FRAME_COUNT_TO_DELAY != 0))
1247:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** uint8_t frameCount = 0;
1248:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1249:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1250:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** /*
1251:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ \
1252:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void loadRow(uint16_t rowNum) \
1253:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	__attribute__((__always_inline__));
1254:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** */
1255:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1256:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Returns TRUE when the frame is complete
1257:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Should send nada (and maybe hsyncs?) thereafter(?)
1258:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // In sdramThing2.0, when this returns TRUE, the SDRAM loading is complete
1259:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // EXCEPT: the final HD_Dots' FR_READ/ACTIVATE commands will point to a
1260:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  non-existent "next" Hsync... these commands need to be rewritten to
1261:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  point to the "first" Hsync. This is handled in sdramThing2.0's code
1262:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Used to be:
1263:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //SIGNAL(TIMER0_COMPA_vect)
1264:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** uint8_t updateLCD(void)
1265:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
 2725               		.stabn	68,0,1265,.LM406-.LFBB8
 2726               	.LM406:
 2727               	.LFBB8:
 2728               	/* prologue: function */
 2729               	/* frame size = 0 */
 2730               	/* stack size = 0 */
 2731               	.L__stack_usage = 0
1266:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	uint8_t frameComplete = FALSE;
1267:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1268:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//static uint8_t frameCount = 0;
1269:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1270:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0 // (defined(SLOW_EVERYTHING_TEST) && SLOW_EVERYTHING_TEST)
1271:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	while(TCNT0L != 7){};
1272:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//This won't work... who knows how many cycles interrupt-entry will be
1273:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//Above should fix that...
1274:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//I think this was just an indicator for scope triggering...
1275:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// not relevent for 
1276:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	setpinPORT(PB2, PORTB);
1277:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	clrpinPORT(PB2, PORTB);
1278:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1279:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1280:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//Hsync and Actually draw the pixels... (when DE is active)
1281:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// This takes a LONG time and will occupy most of the CPU...
1282:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//  ... IN THIS INTERRUPT
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 121


1283:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//loadData(((hsyncCount-T_VD-T_Vlow)>>3)&31, dataEnable,colorOverride);
1284:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	loadData(hsyncCount-T_DV-T_VD-T_Vlow, dataEnable);
 2732               		.stabn	68,0,1284,.LM407-.LFBB8
 2733               	.LM407:
 2734 0730 4091 0000 		lds r20,dataEnable
 2735 0734 8091 0000 		lds r24,hsyncCount
 2736 0738 9091 0000 		lds r25,hsyncCount+1
 2737               	.LBB187:
 2738               	.LBB188:
1285:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1286:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	hsyncCount++;
1287:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1288:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	switch(hsyncCount)
1289:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	{
1290:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//V Front Porch, begins with initLCD
1291:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1292:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Vsync H->L (Begin V-Sync)
1293:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		case T_DV:
1294:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			dataEnable = FALSE;
1295:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			//clrpinPORT(VSYNC_PIN, VSYNC_PORT);
1296:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			vSync = TRUE;
1297:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			Vsync_fromNada();
1298:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
1299:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Vsync L->H (Begin V Back Porch)
1300:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		case T_Vlow + T_DV:
1301:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//	if(hfm_nextOutput(&modulator))
1302:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//		colorOverride = 0xff;
1303:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//	else
1304:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//		colorOverride = 7;
1305:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			//setpinPORT(VSYNC_PIN, VSYNC_PORT);
1306:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			vSync = FALSE;
1307:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			Nada_fromVsync();
1308:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
1309:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Start of frame (DE active)
1310:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		case T_VD +(T_Vlow + T_DV):
1311:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			dataEnable = TRUE;
1312:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
1313:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// All rows have been displayed
1314:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// Return to V Front Porch
1315:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		case V_COUNT +(T_VD + T_Vlow + T_DV):
1316:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			dataEnable = FALSE;
1317:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//	break;
1318:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Frame complete
1319:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//case HSYNC_COUNT_FRAME_COMPLETE:
1320:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			//T_DV +(V_COUNT+T_VD+T_Vlow) + FRAME_UPDATE_DELAY:
1321:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			hsyncCount = 0;
1322:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0 //(FRAME_COUNT_TO_DELAY != 0)
1323:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			//static uint8_t frameCount = 0;
1324:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			frameCount++;
1325:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			if(frameCount == FRAME_COUNT_TO_DELAY)
1326:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			{
1327:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 				frameCount = 0;
1328:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 				timer_compareMatchIntSetup(0, OUT_CHANNELA, FALSE);
1329:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 				//timer_compareMatchIntDisable(0, OUT_CHANNELA);
1330:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			}
1331:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1332:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 122


1333:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#warning "NewNote: WTF, are we relying on loadData to have properly set the mode?"
1334:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Yeah, guess that makes sense... Must be Nada...
1335:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			frameComplete = TRUE;
1336:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
1337:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		default:
1338:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
1339:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	}
1340:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1341:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1342:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0 // (defined(LOADROW) && LOADROW)
1343:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//Load the next row into the row(seg)buffer
1344:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//data is enabled after T_VD+T_Vlow...
1345:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	if((hsyncCount >= T_VD+T_Vlow) && (hsyncCount < T_VD+T_Vlow+V_COUNT))
1346:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		loadRow(hsyncCount - (T_VD+T_Vlow));
1347:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1348:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1349:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//This note was written long before the above was commented-out...
1350:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//So...?
1351:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// Here is where loadRow used to be called
1352:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// it has been moved to oldNotes.txt, but it would make more sense
1353:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// to look at LCDdirectLVDS <25 or LCDdirect
1354:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// loadRow used the time between DE inactive and the next Hsync
1355:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// to load a row to a row-buffer (as opposed to a frame-buffer)
1356:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// thus, DE could gain more pixels because there would be fewer
1357:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// calculations to determine the memory location to write from
1358:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// This effect has since been minimized
1359:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// BUT loadRow might be necessary for program-memory-based images...
1360:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1361:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	return frameComplete;
1362:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1363:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1364:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1365:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //See LCDdirectLVDS for an example...
1366:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // basically it loads a single row into a buffer for the next dateEnable
1367:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  (either the row-buffer or the row-segment-buffer) 
1368:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This has been *greatly* reduced, is not at all functional, just
1369:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // to give an idea of loadRow's purpose.
1370:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0 //(defined(LOADROW) && LOADROW)
1371:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void loadRow(uint16_t rowNum)
1372:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1373:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//e.g....
1374:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	tet_drawRow(rbRowNum, rowBuffer);
1375:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	
1376:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//and...	
1377:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	rowBuffer[i] = fb_to_rb(colorVal);
1378:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	
1379:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//and...
1380:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	if((rbRowNum >= SMILE_TOP_ROW) &&
1381:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			(rbRowNum < (SMILE_HEIGHT+SMILE_TOP_ROW)))
1382:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	{
1383:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			for(i=0; i<FB_WIDTH; i++)
1384:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			{
1385:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****          	temp=pgm_readImageByte(pimage, rbRowNum-SMILE_TOP_ROW, i);
1386:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 				if(!(temp & 0xC0))
1387:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 					rowBuffer[i+SMILE_SHIFT] = fb_to_rb(temp);
1388:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			}
1389:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	}
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 123


1390:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1391:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	life_drawRow(rbRowNum, &(rowBuffer[RB_WIDTH-LIFE_WIDTH]));
1392:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1393:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//HORIZONTAL_COLOR_BARS
1394:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	for(i=0; i<RB_WIDTH; i++)
1395:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		rowBuffer[i] = fb_to_rb(rowNum);
1396:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1397:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//Good for syncing to have white on both borders...
1398:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	newSeg(1, 0x06, (6<<4) | 3);
1399:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	
1400:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1401:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif //LOAD_ROW
1402:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1403:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1404:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Including inactive pixel-clocks (timing)
1405:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // DotCount per row...
1406:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  TOTAL_CYC_COUNT was used for the timer-interrupt in LCDdirectLVDS
1407:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  This was DOTS_TO_CYC(DISPLAY_DOT_COUNT) + ROW_CALCULATION_CYCS
1408:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  ROW_CALCULATION_CYCS was 50,000 (!!!)
1409:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   DOTS_TO_CYC(dots), last-used, was dots*7 (LVDS_PRESCALER nullified /8)
1410:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   So, the overall dot-count per row was... 
1411:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     DISPLAY_DOT_COUNT + ROW_CALCULATION_DOTS
1412:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     where ROW_CALCULATION_DOTS = 50,000cyc/7 = 7142 dots
1413:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //     So... the overall dot-count per row was *MUCH* longer than usual
1414:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  Pretty certain there's not nearly enough memory to simulate that
1415:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (in sdramThing2.0)
1416:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   But It does suggest that it would be worthwhile to try to stretch
1417:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   the rows as much as possible...
1418:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   During this time, NADA is sent normally, (V=H, H=H, DE=L)
1419:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //    Or Vsync (V=L, H=H, DE=L)
1420:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   Maybe something could be simulated with PWM again, if necessary...
1421:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //   (Certainly not at full-speed)
1422:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DISPLAY_DOT_COUNT \
1423:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	(H_LOW_DOTS + HD_DOTS + DE_ACTIVE_DOTS + DH_DOTS)
1424:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1425:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0
1426:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1427:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define T_Hlow_CYC 1//8 //(T_Halow_REAL*3)
1428:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define T_Hlow_CYC DOTS_TO_CYC(H_LOW_DOTS)
1429:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1430:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define T_DE_CYC	DOTS_TO_CYC(DE_ACTIVE_DOTS)
1431:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1432:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define T_HD_CYC 1//3//(T_HD_REAL*3)
1433:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define T_HD_CYC	DOTS_TO_CYC(HD_DOTS)
1434:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1435:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define T_DH_CYC	DOTS_TO_CYC(DH_DOTS)
1436:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1437:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1438:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1439:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1440:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1441:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void init_timer0Hsync(void)
1442:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1443:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//T_HD + T_DH + T_low + T_DE
1444:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// For the original system, 19.865us = 695 dot-clocks
1445:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// We'd need to take advantage of the 16-bit timer
1446:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//  OCR1A may not be written properly (with a temporary high-byte)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 124


1447:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//  ... not sure.
1448:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// TIMER0 DOES NOT HAVE CTC MODE in 16-bit mode
1449:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1450:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This is a hack, for testing syncability with long row-calculations
1451:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // before actually drawing it... e.g. loading from program memory
1452:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This value needs to be larger than the calculation time
1453:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // otherwise, it seems, syncing isn't stable
1454:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // BUT THIS IS A HACK, has nothing to do with actual calculation time
1455:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // And for slow LVDS or whatnot, this may be unnecessarily HUGE
1456:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1457:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define DISPLAY_CYC_COUNT	(DOTS_TO_CYC(DISPLAY_DOT_COUNT))
1458:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //	(T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC)
1459:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1460:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //NOTE that with longer ROW_CALCULATION_CYCS, lines can be repeated...
1461:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // apparently an effect of the display, definitely not a code-thing
1462:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // in which case the vertical resolution decreases
1463:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // though, this could be used to advantage... 
1464:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (e.g. more processing time outside the drawing interrupts?)
1465:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // NOTE that if the value is too small and calculations take longer in some
1466:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // lines than others (?), those lines may repeat, or syncing could be off
1467:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (LVDS_PRESCALER == 8)
1468:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //#define ROW_CALCULATION_DELAY 1//20
1469:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define ROW_CALCULATION_CYCS (50000) //0 //(70000) //(100000)
1470:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else
1471:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //#define ROW_CALCULATION_DELAY 9//7//5//2//1//10
1472:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define ROW_CALCULATION_CYCS	(8*DISPLAY_CYC_COUNT)
1473:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1474:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1475:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define TOTAL_CYC_COUNT \
1476:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	(ROW_CALCULATION_CYCS + DISPLAY_CYC_COUNT)
1477:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //	(ROW_CALCULATION_DELAY * (T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC))
1478:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //#define TOTAL_CYC_COUNT 2000
1479:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (TOTAL_CYC_COUNT > 255)
1480:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //Adding +7 causes it to round up (hopefully)
1481:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define TIMER0_TCNTS ((TOTAL_CYC_COUNT+7)/8)
1482:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define TIMER0_CLKDIV	CLKDIV8
1483:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+7)/8: Timer0 CLKDIV8"
1484:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #if (TIMER0_TCNTS > 255)
1485:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+63)/64: Timer0 CLKDIV64"
1486:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_TCNTS ((TOTAL_CYC_COUNT+63)/64)
1487:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_CLKDIV CLKDIV64
1488:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #if (TIMER0_TCNTS > 255)
1489:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	 #warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+255)/256: Timer0 CLKDIV256"
1490:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	 #define TIMER0_TCNTS ((TOTAL_CYC_COUNT+255)/256)
1491:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	 #define TIMER0_CLKDIV CLKDIV256
1492:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	 #if (TIMER0_TCNTS > 255)
1493:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		#warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+1023)/1024: Timer0 CLKDIV1024"
1494:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		#define TIMER0_TCNTS ((TOTAL_CYC_COUNT+1023)/1024)
1495:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		#define TIMER0_CLKDIV	CLKDIV1024
1496:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	 #endif
1497:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #endif
1498:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #endif
1499:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #if (TIMER0_TCNTS == 0)
1500:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #error "TIMER0_OCRVAL == 0"
1501:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #endif
1502:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else
1503:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define TIMER0_TCNTS TOTAL_CYC_COUNT
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 125


1504:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define TIMER0_CLKDIV CLKDIV1
1505:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1506:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1507:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (defined(SLOW_EVERYTHING_TEST) && SLOW_EVERYTHING_TEST)
1508:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //For testing, I want to see the pulses with the 'scope
1509:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  // Unless the timer is divisible by 7 the pulses will not align with the
1510:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  // timer overflow...
1511:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //but shit... it's running at clkdiv8 so each TCNT is 64 bits!
1512:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  // but this shouldn't matter for visualizing, that's only ~10 pixel clocks
1513:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  // and we'll only start visualizing *after* the extra TCNTs...
1514:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  //Since the timer counts from 0 to (and including) OCR1A
1515:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  // Add one to this test...
1516:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #if (((TIMER0_TCNTS + 1) % 7) == 0)
1517:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 1) % 7 == 0"
1518:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS"
1519:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS)
1520:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1521:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 2) % 7) == 0)
1522:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 2) % 7 == 0"
1523:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 1"
1524:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 1)
1525:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1526:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 3) % 7) == 0)
1527:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 3) % 7 == 0"
1528:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 2"
1529:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 2)
1530:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1531:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 4) % 7) == 0)
1532:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 4) % 7 == 0"
1533:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 3"
1534:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 3)
1535:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1536:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 5) % 7) == 0)
1537:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 5) % 7 == 0"
1538:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 4"
1539:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 4)
1540:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1541:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 6) % 7) == 0)
1542:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 6) % 7 == 0"
1543:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 5"
1544:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 5)
1545:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1546:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS) % 7) == 0)
1547:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS) % 7 == 0"
1548:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS - 1"
1549:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS - 1)
1550:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1551:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #else
1552:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****   #error "WTF?"
1553:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #endif
1554:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else
1555:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #define TIMER0_OCRVAL (TIMER0_TCNTS-1)
1556:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1557:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1558:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (TIMER0_OCRVAL > 255)
1559:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #error "Despite all my efforts, TIMER0_OCRVAL is *still* > 255!"
1560:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 126


1561:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1562:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    OCR0A = TIMER0_OCRVAL; //T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC;
1563:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	timer_setWGM(0, WGM_CLR_ON_COMPARE);
1564:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    timer_selectDivisor(0, TIMER0_CLKDIV); //CLKDIV1);
1565:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    timer_compareMatchIntEnable(0, OUT_CHANNELA);
1566:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1567:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1568:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #define fullBlue()	DEblue_init()
1569:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1570:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1571:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1572:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //Either use one of the ones here, or define your own...
1573:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // rowNum is the drawable row number on the LCD...
1574:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //static __inline__ void drawPix(uint16_t rowNum);
1575:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1576:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // This should have a uint16 rowNum!
1577:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // But, so far, the only cases which use all 768 rows are LCDdirectLVDS
1578:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // with RowSegBuffer, and sdramThing (how did this uint8_t thing not cause
1579:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // trouble there?!)
1580:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // RowSegBuffer doesn't pay attention to rowNum in drawPix...
1581:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1582:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1583:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ \
1584:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void drawPix(uint16_t rowNum) \
1585:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	  __attribute__((__always_inline__));
1586:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0
1587:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if (!defined(ROW_SEG_BUFFER) || !ROW_SEG_BUFFER)
1588:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //drawPix loads each pixel individually... It doesn't use a for-loop
1589:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // since that would take away from actual pixel-drawing time...
1590:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // I think it's been removed... but here's a (non-functional) example...
1591:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void drawPix(uint8_t rowNum)
1592:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1593:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	writeColor(*(color+1));	 
1594:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	writeColor(*(color+2));	 
1595:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	writeColor(*(color+3)); 
1596:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	...
1597:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	writeColor(*(color+61));
1598:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	writeColor(*(color+62));
1599:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	writeColor(*(color+63));
1600:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// WriteColor writes the pixel *after* the calculations...
1601:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// thus the pixel appears basically after writeColor completes
1602:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	// These nops assure the 64th pixel is fully-displayed before exitting
1603:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	asm("nop");
1604:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	...
1605:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	asm("nop");
1606:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1607:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** /*		reg[17] = colorBuffer[rowNum][17];                         
1608:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		writeColor(reg[17]);                         
1609:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		...
1610:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		reg[20] = colorBuffer[rowNum][20];                         
1611:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		writeColor(reg[20]);  
1612:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		
1613:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//REPEATING to fill screen... (delayDots = 342 worked prior to this)
1614:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		reg[0] = colorBuffer[rowNum][0];
1615:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		writeColor(reg[0]);
1616:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		...
1617:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		reg[10] = colorBuffer[rowNum][10];
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 127


1618:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		writeColor(reg[10]);
1619:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** */
1620:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Display the rest as black...
1621:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		writeColor(0);
1622:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1623:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else		//ROW_SEG_BUFFER
1624:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void drawPix(uint8_t rowNum)
1625:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1626:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
1627:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	         | (0<<COM1B1) | (1<<COM1B0)
1628:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	         | (1<<PWM1A) | (1<<PWM1B) );
1629:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1630:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** /* This bit was in loadData, just some notes, now...
1631:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1632:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  WTF, how did this work?! Am I not using drawPix?!
1633:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    Yes, but drawPix calls drawSegs, which doesn't have an argument
1634:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    because loadRow takes the row argument elsewhere, drawSegs just
1635:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    draws 'em
1636:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       //#warning "see 'shouldBe' here..."
1637:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       //Should be:
1638:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       rowNum = rowNum*FB_HEIGHT/V_COUNT;
1639:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       //rowNum = rowNum / (768/FB_HEIGHT);
1640:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1641:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	So, rowNum change left-over from the ol' FrameBuffer days had no effect
1642:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	on drawSegs.
1643:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** */
1644:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1645:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1646:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1647:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		drawSegs();
1648:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1649:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1650:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//DE->Nada transition expects fullBlue...
1651:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Also helps to show the edge of the DE timing...
1652:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1653:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//!!! Not sure what the state is at this point...
1654:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// could be any DE+Blue level, or could be NADA...
1655:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// Nada: DT1=3, still leaves one bit for clocking, might be OK
1656:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****          
1657:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Among the things that don't make sense...
1658:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// This appears to go into affect BEFORE delay_cyc (?)
1659:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// as, without a pull-up resistor on the /OC1B output, 
1660:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// green seems to be floating between the last pixel and the
1661:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// delay_cyc (!)
1662:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Disable complementary-output for Green 
1663:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//  (on /OC1B, where CLK is OC1B)
1664:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// Since Nada, V, and H DT's might be bad for clocking.
1665:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
1666:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****          | (1<<COM1B1) | (0<<COM1B0)
1667:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****          | (1<<PWM1A) | (1<<PWM1B) );
1668:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1669:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		fullBlue();
1670:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1671:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif //0
1672:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1673:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1674:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 128


1675:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //          G) groovy little spiral...
1676:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
1677:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1678:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0 //(defined(CLOCK_INSENSITIVITY_TESTING) && CLOCK_INSENSITIVITY_TESTING)
1679:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromNada();
1680:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Enable complementary-output for Green (on /OC1B, where CLK is OC1B)
1681:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
1682:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 				   | (0<<COM1B1) | (1<<COM1B0)
1683:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 					| (1<<PWM1A) | (1<<PWM1B) );
1684:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1685:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1686:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1687:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1688:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1689:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1690:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1691:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1692:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1693:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1694:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** /* These are old tests from above, under if(dataEnable)
1695:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    They should all be implemented in lcdStuff.c, but have not been
1696:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    retested since...
1697:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BLUE_DIAG_BAR) && BLUE_DIAG_BAR)
1698:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       uint16_t blueCyc = DOTS_TO_CYC(rowNum);
1699:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
1700:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       
1701:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       DEonly_fromNada();
1702:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       delay_cyc(notBlueCyc);
1703:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       DEblue_fromDEonly();
1704:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       delay_cyc(blueCyc);
1705:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1706:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Nada_fromDEblue();
1707:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif(defined(BLUE_VERT_BAR) && BLUE_VERT_BAR)
1708:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       DEonly_fromNada();
1709:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)/3);
1710:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       DEblue_fromDEonly();
1711:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)*2/3);
1712:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Nada_fromDEblue();
1713:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #elif(defined(DE_BLUE) && DE_BLUE)
1714:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       DEblue_fromNada();
1715:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS));
1716:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Nada_fromDEblue();
1717:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else  //NOT BLUE_DIAG_BAR, BLUE_VERT_BAR, NOR DE_BLUE
1718:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #if ( defined(COLOR_BAR_SCROLL) && COLOR_BAR_SCROLL)
1719:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       if(rowNum <= 256)
1720:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****          rowNum=0;
1721:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       else
1722:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****          rowNum=1;
1723:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #else //NOT COLOR_BAR_SCROLL... drawPix...
1724:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** */
1725:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1726:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1727:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1728:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //a/o LCDdirectLVDS62:
1729:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // These BLUE_... tests are being reimplemented.
1730:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // They're *quite* handy for initial-testing of an untested display.
1731:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 129


1732:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // Realistically, they should probably be less LVDS-specific
1733:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (non-LVDS displays needn't be coded with these transition-specific
1734:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // functions like DEonly_fromNada() or DEblue_fromDEonly(), and certainly
1735:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // needn't be limited to blue/black testing. LVDS displays contain their
1736:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // syncing signals on the same wire as the blue pixel-data, thus these
1737:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // tests...)
1738:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // In the long-run, maybe they should be moved to an lvdsLCD commonCode
1739:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // and the transition-specific code removed from here, but I've yet to
1740:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // explore this.
1741:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // For non-LVDS displays, these should still be pretty good tests, and
1742:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // implementing transition-specific functions shouldn't be too difficult...
1743:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // e.g. "#define DEonly_fromNada()    setpinPORT(DE_PIN, DE_PORT)"
1744:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // or   "#define DEblue_fromDEonly()  BLUE_PORT = 0xff"
1745:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (Actually, transition-specific functions make it faster regardless of
1746:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // the LVDS/non-LVDS nature of the display, as some things are redundant...
1747:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // e.g. if calls to DEonly_fromNada() were replaced with calls to DEonly(),
1748:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // it would require disabling H-sync and V-sync, in addition to enabling DE
1749:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // in every call. When we start getting into worrying about aligning pixels
1750:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // with the edge of the display and making them as skinny as possible, each
1751:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // cpu instruction counts.
1752:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // So, I guess, the only LVDS-specific stuff here is the blue-related
1753:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // transitions (and, more specifically, the fact that there are *only*
1754:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // blue-related transitions, as opposed to red and green)
1755:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1756:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //a/o sdramThing2.0v8 early... appears to be syncing on Blue signal
1757:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // thus we get diagonal data including Hsync (colored in red) along the
1758:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // as a diagonal stripe at the right
1759:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BLUE_DIAG_BAR) && BLUE_DIAG_BAR)
1760:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1761:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1762:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//uint16_t blueCyc = DOTS_TO_CYC(rowNum);
1763:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
1764:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		uint16_t blueDots = rowNum;
1765:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		uint16_t notBlueDots = DE_ACTIVE_DOTS - blueDots;
1766:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1767:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromNada();
1768:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(notBlueCyc);
1769:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(notBlueDots);
1770:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(notBlueDots);
1771:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromDEonly();
1772:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(blueCyc);
1773:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(blueDots);
1774:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(blueDots);
1775:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEblue();
1776:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1777:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1778:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1779:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1780:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //a/o LCDdirectLVDS62: This is the same as above, but scrolls vertically
1781:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // one line per refresh... so it's easy to calculate the refresh-rate
1782:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BLUE_DIAG_BAR_SCROLL) && BLUE_DIAG_BAR_SCROLL)
1783:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1784:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1785:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	static uint16_t rowOffset;
1786:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	if(rowNum == 0)
1787:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		rowOffset++;
1788:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//uint16_t blueCyc = DOTS_TO_CYC(rowNum);
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 130


1789:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
1790:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		uint16_t blueDots = (rowNum + rowOffset)%DE_ACTIVE_DOTS;
1791:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		uint16_t notBlueDots = DE_ACTIVE_DOTS - blueDots;
1792:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1793:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromNada();
1794:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(notBlueCyc);
1795:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(notBlueDots);
1796:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(notBlueDots);
1797:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromDEonly();
1798:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(blueCyc);
1799:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(blueDots);
1800:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(blueDots);
1801:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEblue();
1802:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1803:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1804:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1805:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1806:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1807:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //a/o LCDdirectLVDS62: This is the same as above, but alternates colors
1808:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //between each frame...
1809:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // (Careful, this one'll cause seizures!)
1810:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BLUE_DIAG_SCROLL_FLASH) && BLUE_DIAG_SCROLL_FLASH)
1811:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1812:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1813:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	static uint16_t rowOffset;
1814:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	if(rowNum == 0)
1815:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		rowOffset++;
1816:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//uint16_t blueCyc = DOTS_TO_CYC(rowNum);
1817:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
1818:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		uint16_t blueDots = (rowNum + rowOffset)%DE_ACTIVE_DOTS;
1819:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		uint16_t notBlueDots = DE_ACTIVE_DOTS - blueDots;
1820:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1821:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BDSF_ALTERNATE_ROWS) && BDSF_ALTERNATE_ROWS)
1822:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	if(rowNum&0x01)
1823:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #else
1824:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	if(rowOffset&0x01)
1825:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1826:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	{
1827:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromNada();
1828:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(notBlueCyc);
1829:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(notBlueDots);
1830:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(notBlueDots);
1831:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromDEonly();
1832:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(blueCyc);
1833:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(blueDots);
1834:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(blueDots);
1835:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEblue();
1836:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	}
1837:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	else
1838:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	{
1839:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromNada();
1840:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(notBlueCyc);
1841:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(notBlueDots);
1842:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(notBlueDots);
1843:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromDEblue();
1844:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(blueCyc);
1845:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(blueDots);
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 131


1846:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(blueDots);
1847:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEonly();
1848:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	}
1849:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1850:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1851:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1852:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1853:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //a/o sdramThing2.0v8-31ish: LooksPromising, but delayed
1854:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // also LVDS bit-shifts causing vertical striping
1855:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BLUE_VERT_BAR) && BLUE_VERT_BAR)
1856:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1857:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1858:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromNada();
1859:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)/3);
1860:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS/3);
1861:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS/3);
1862:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromDEonly();
1863:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)*2/3);
1864:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
1865:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
1866:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEblue();
1867:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1868:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1869:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1870:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //a/o sdramThing2.0v8-32 nogo... syncs at end of blue instead of Hsync
1871:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BLUE_VERT_BAR_REVERSED) && BLUE_VERT_BAR_REVERSED)
1872:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1873:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1874:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromNada();
1875:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)/3);
1876:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS/3);
1877:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS/3);
1878:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromDEblue();
1879:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)*2/3);
1880:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
1881:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
1882:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEonly();
1883:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1884:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1885:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1886:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1887:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(DE_BLUE) && DE_BLUE)
1888:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1889:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1890:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromNada();
1891:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS));
1892:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS);
1893:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS);
1894:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEblue();
1895:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1896:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1897:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1898:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if(defined(BLUE_BORDER) && (BLUE_BORDER!=0))
1899:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1900:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1901:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromNada();
1902:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(BLUE_BORDER);
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 132


1903:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEonly_fromDEblue();
1904:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS - BLUE_BORDER*2);
1905:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DEblue_fromDEonly();
1906:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		DE_DotDelay(BLUE_BORDER);
1907:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEblue();
1908:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** }
1909:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1910:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1911:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0
1912:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //NOT BLUE_DIAG_BAR, BLUE_VERT_BAR, NOR DE_BLUE
1913:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #if ( defined(COLOR_BAR_SCROLL) && COLOR_BAR_SCROLL)
1914:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		if(rowNum <= 256)
1915:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			rowNum=0;
1916:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		else
1917:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			rowNum=1;
1918:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #else //NOT COLOR_BAR_SCROLL... drawPix...
1919:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//#warning "see 'shouldBe' here..."
1920:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Should be:
1921:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		rowNum = rowNum*FB_HEIGHT/V_COUNT;
1922:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//rowNum = rowNum / (768/FB_HEIGHT);
1923:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #endif
1924:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1925:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//DEonly_fromNada();
1926:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       drawPix(rowNum);
1927:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Nada_init();
1928:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****  #warning "THIS ISN'T SAFE"
1929:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		Nada_fromDEonly();
1930:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//Drawing Methods...
1931:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1932:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0 //(defined(CLOCK_INSENSITIVITY_TESTING) && CLOCK_INSENSITIVITY_TESTING)
1933:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//!!! Not sure what the state is at this point...
1934:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// could be any DE+Blue level, or could be NADA...
1935:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// Nada: DT1=3, still leaves one bit for clocking, might be OK
1936:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1937:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       //Disable complementary-output for Green 
1938:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//  (on /OC1B, where CLK is OC1B)
1939:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		// Since Nada, V, and H DT's might be bad for clocking.
1940:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
1941:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****                | (1<<COM1B1) | (0<<COM1B0)
1942:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****                | (1<<PWM1A) | (1<<PWM1B) );
1943:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1944:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1945:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//colorOverride removed in LVDS, revisit LCDdirect50
1946:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #endif
1947:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1948:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1949:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1950:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // AND HERE!!!
1951:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1952:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** // rowNum is only used when DE is active...
1953:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** //  and should be 0 at *drawn row* 0
1954:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** void loadData(uint16_t rowNum, uint8_t dataEnable)
1955:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** {
1956:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	//H Active pulse...
1957:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    if(vSync)
 2739               		.stabn	68,0,1957,.LM408-.LFBB8
 2740               	.LM408:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 133


 2741 073c 2091 0000 		lds r18,vSync
1958:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    {
1959:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//Vsync_fromNada() is called at the end of the last interupt
1960:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       VplusH_fromVsync();
 2742               		.stabn	68,0,1960,.LM409-.LFBB8
 2743               	.LM409:
 2744 0740 AD9A      		sbi 0x15,5
1957:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    {
 2745               		.stabn	68,0,1957,.LM410-.LFBB8
 2746               	.LM410:
 2747 0742 2223      		tst r18
 2748 0744 01F0      		breq .L60
 2749               		.stabn	68,0,1960,.LM411-.LFBB8
 2750               	.LM411:
 2751 0746 26E0      		ldi r18,lo8(6)
 2752 0748 30E0      		ldi r19,0
 2753 074a 3093 6500 		sts 100+1,r19
 2754 074e 2093 6400 		sts 100,r18
 2755 0752 3FBD      		out 0x2e+1,r19
 2756 0754 2EBD      		out 0x2e,r18
 2757 0756 AD98      		cbi 0x15,5
 2758 0758 26E1      		ldi r18,lo8(22)
 2759 075a 30E0      		ldi r19,0
 2760               	.L62:
 2761               	.LBB189:
 2762               	.LBB190:
 2763               		.stabs	"delay_cyc.c",132,0,0,.Ltext43
 2764               	.Ltext43:
 249:delay_cyc.c   ****       asm("nop");
 2765               		.stabn	68,0,249,.LM412-.LFBB8
 2766               	.LM412:
 2767               	/* #APP */
 2768               	 ;  249 "delay_cyc.c" 1
 2769 075c 0000      		nop
 2770               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 2771               		.stabn	68,0,250,.LM413-.LFBB8
 2772               	.LM413:
 2773               	 ;  250 "delay_cyc.c" 1
 2774 075e 0000      		nop
 2775               	 ;  0 "" 2
 2776               	/* #NOAPP */
 2777 0760 2150      		subi r18,1
 2778 0762 3109      		sbc r19,__zero_reg__
 225:delay_cyc.c   ****    {
 2779               		.stabn	68,0,225,.LM414-.LFBB8
 2780               	.LM414:
 2781 0764 2115      		cp r18,__zero_reg__
 2782 0766 3105      		cpc r19,__zero_reg__
 2783 0768 01F4      		brne .L62
 269:delay_cyc.c   **** 		case 6:
 2784               		.stabn	68,0,269,.LM415-.LFBB8
 2785               	.LM415:
 2786               	/* #APP */
 2787               	 ;  269 "delay_cyc.c" 1
 2788 076a 0000      		nop
 2789               	 ;  0 "" 2
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 134


 271:delay_cyc.c   **** 		case 5:
 2790               		.stabn	68,0,271,.LM416-.LFBB8
 2791               	.LM416:
 2792               	 ;  271 "delay_cyc.c" 1
 2793 076c 0000      		nop
 2794               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 4:
 2795               		.stabn	68,0,273,.LM417-.LFBB8
 2796               	.LM417:
 2797               	 ;  273 "delay_cyc.c" 1
 2798 076e 0000      		nop
 2799               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 3:
 2800               		.stabn	68,0,275,.LM418-.LFBB8
 2801               	.LM418:
 2802               	 ;  275 "delay_cyc.c" 1
 2803 0770 0000      		nop
 2804               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 2805               		.stabn	68,0,277,.LM419-.LFBB8
 2806               	.LM419:
 2807               	 ;  277 "delay_cyc.c" 1
 2808 0772 0000      		nop
 2809               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 2810               		.stabn	68,0,279,.LM420-.LFBB8
 2811               	.LM420:
 2812               	 ;  279 "delay_cyc.c" 1
 2813 0774 0000      		nop
 2814               	 ;  0 "" 2
 2815               		.stabn	68,0,281,.LM421-.LFBB8
 2816               	.LM421:
 2817               	 ;  281 "delay_cyc.c" 1
 2818 0776 0000      		nop
 2819               	 ;  0 "" 2
 2820               	/* #NOAPP */
 2821               	.LBE190:
 2822               	.LBE189:
 2823               		.stabs	"_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c",132,0,0,.Ltext44
 2824               	.Ltext44:
1961:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Hlow_Delay();
1962:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Vsync_fromVplusH();
 2825               		.stabn	68,0,1962,.LM422-.LFBB8
 2826               	.LM422:
 2827 0778 AD9A      		sbi 0x15,5
 2828 077a 23E0      		ldi r18,lo8(3)
 2829 077c 30E0      		ldi r19,0
 2830 077e 3093 6500 		sts 100+1,r19
 2831 0782 2093 6400 		sts 100,r18
 2832 0786 24E0      		ldi r18,lo8(4)
 2833 0788 30E0      		ldi r19,0
 2834 078a 3FBD      		out 0x2e+1,r19
 2835 078c 2EBD      		out 0x2e,r18
 2836 078e AD98      		cbi 0x15,5
 2837 0790 2BE0      		ldi r18,lo8(11)
 2838 0792 30E0      		ldi r19,0
 2839               	.L64:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 135


 2840               	.LBB191:
 2841               	.LBB192:
 2842               		.stabs	"delay_cyc.c",132,0,0,.Ltext45
 2843               	.Ltext45:
 249:delay_cyc.c   ****       asm("nop");
 2844               		.stabn	68,0,249,.LM423-.LFBB8
 2845               	.LM423:
 2846               	/* #APP */
 2847               	 ;  249 "delay_cyc.c" 1
 2848 0794 0000      		nop
 2849               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 2850               		.stabn	68,0,250,.LM424-.LFBB8
 2851               	.LM424:
 2852               	 ;  250 "delay_cyc.c" 1
 2853 0796 0000      		nop
 2854               	 ;  0 "" 2
 2855               	/* #NOAPP */
 2856 0798 2150      		subi r18,1
 2857 079a 3109      		sbc r19,__zero_reg__
 225:delay_cyc.c   ****    {
 2858               		.stabn	68,0,225,.LM425-.LFBB8
 2859               	.LM425:
 2860 079c 2115      		cp r18,__zero_reg__
 2861 079e 3105      		cpc r19,__zero_reg__
 2862 07a0 01F4      		brne .L64
 2863 07a2 00C0      		rjmp .L81
 2864               	.L60:
 2865               	.LBE192:
 2866               	.LBE191:
 2867               		.stabs	"_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c",132,0,0,.Ltext46
 2868               	.Ltext46:
1963:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       HD_Delay();
1964:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    }
1965:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    else
1966:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    {
1967:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Hsync_fromNada();
 2869               		.stabn	68,0,1967,.LM426-.LFBB8
 2870               	.LM426:
 2871 07a4 22E0      		ldi r18,lo8(2)
 2872 07a6 30E0      		ldi r19,0
 2873 07a8 3093 6500 		sts 100+1,r19
 2874 07ac 2093 6400 		sts 100,r18
 2875 07b0 23E0      		ldi r18,lo8(3)
 2876 07b2 30E0      		ldi r19,0
 2877 07b4 3FBD      		out 0x2e+1,r19
 2878 07b6 2EBD      		out 0x2e,r18
 2879 07b8 AD98      		cbi 0x15,5
 2880 07ba 26E1      		ldi r18,lo8(22)
 2881 07bc 30E0      		ldi r19,0
 2882               	.L67:
 2883               	.LBB193:
 2884               	.LBB194:
 2885               		.stabs	"delay_cyc.c",132,0,0,.Ltext47
 2886               	.Ltext47:
 249:delay_cyc.c   ****       asm("nop");
 2887               		.stabn	68,0,249,.LM427-.LFBB8
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 136


 2888               	.LM427:
 2889               	/* #APP */
 2890               	 ;  249 "delay_cyc.c" 1
 2891 07be 0000      		nop
 2892               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 2893               		.stabn	68,0,250,.LM428-.LFBB8
 2894               	.LM428:
 2895               	 ;  250 "delay_cyc.c" 1
 2896 07c0 0000      		nop
 2897               	 ;  0 "" 2
 2898               	/* #NOAPP */
 2899 07c2 2150      		subi r18,1
 2900 07c4 3109      		sbc r19,__zero_reg__
 225:delay_cyc.c   ****    {
 2901               		.stabn	68,0,225,.LM429-.LFBB8
 2902               	.LM429:
 2903 07c6 2115      		cp r18,__zero_reg__
 2904 07c8 3105      		cpc r19,__zero_reg__
 2905 07ca 01F4      		brne .L67
 269:delay_cyc.c   **** 		case 6:
 2906               		.stabn	68,0,269,.LM430-.LFBB8
 2907               	.LM430:
 2908               	/* #APP */
 2909               	 ;  269 "delay_cyc.c" 1
 2910 07cc 0000      		nop
 2911               	 ;  0 "" 2
 271:delay_cyc.c   **** 		case 5:
 2912               		.stabn	68,0,271,.LM431-.LFBB8
 2913               	.LM431:
 2914               	 ;  271 "delay_cyc.c" 1
 2915 07ce 0000      		nop
 2916               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 4:
 2917               		.stabn	68,0,273,.LM432-.LFBB8
 2918               	.LM432:
 2919               	 ;  273 "delay_cyc.c" 1
 2920 07d0 0000      		nop
 2921               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 3:
 2922               		.stabn	68,0,275,.LM433-.LFBB8
 2923               	.LM433:
 2924               	 ;  275 "delay_cyc.c" 1
 2925 07d2 0000      		nop
 2926               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 2927               		.stabn	68,0,277,.LM434-.LFBB8
 2928               	.LM434:
 2929               	 ;  277 "delay_cyc.c" 1
 2930 07d4 0000      		nop
 2931               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 2932               		.stabn	68,0,279,.LM435-.LFBB8
 2933               	.LM435:
 2934               	 ;  279 "delay_cyc.c" 1
 2935 07d6 0000      		nop
 2936               	 ;  0 "" 2
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 137


 2937               		.stabn	68,0,281,.LM436-.LFBB8
 2938               	.LM436:
 2939               	 ;  281 "delay_cyc.c" 1
 2940 07d8 0000      		nop
 2941               	 ;  0 "" 2
 2942               	/* #NOAPP */
 2943               	.LBE194:
 2944               	.LBE193:
 2945               		.stabs	"_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c",132,0,0,.Ltext48
 2946               	.Ltext48:
1968:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Hlow_Delay();
1969:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       Nada_fromHsync();
 2947               		.stabn	68,0,1969,.LM437-.LFBB8
 2948               	.LM437:
 2949 07da AD9A      		sbi 0x15,5
 2950 07dc 22E0      		ldi r18,lo8(2)
 2951 07de 30E0      		ldi r19,0
 2952 07e0 3093 6500 		sts 100+1,r19
 2953 07e4 2093 6400 		sts 100,r18
 2954 07e8 24E0      		ldi r18,lo8(4)
 2955 07ea 30E0      		ldi r19,0
 2956 07ec 3FBD      		out 0x2e+1,r19
 2957 07ee 2EBD      		out 0x2e,r18
 2958 07f0 AD98      		cbi 0x15,5
 2959 07f2 2BE0      		ldi r18,lo8(11)
 2960 07f4 30E0      		ldi r19,0
 2961               	.L69:
 2962               	.LBB195:
 2963               	.LBB196:
 2964               		.stabs	"delay_cyc.c",132,0,0,.Ltext49
 2965               	.Ltext49:
 249:delay_cyc.c   ****       asm("nop");
 2966               		.stabn	68,0,249,.LM438-.LFBB8
 2967               	.LM438:
 2968               	/* #APP */
 2969               	 ;  249 "delay_cyc.c" 1
 2970 07f6 0000      		nop
 2971               	 ;  0 "" 2
 250:delay_cyc.c   ****    }
 2972               		.stabn	68,0,250,.LM439-.LFBB8
 2973               	.LM439:
 2974               	 ;  250 "delay_cyc.c" 1
 2975 07f8 0000      		nop
 2976               	 ;  0 "" 2
 2977               	/* #NOAPP */
 2978 07fa 2150      		subi r18,1
 2979 07fc 3109      		sbc r19,__zero_reg__
 225:delay_cyc.c   ****    {
 2980               		.stabn	68,0,225,.LM440-.LFBB8
 2981               	.LM440:
 2982 07fe 2115      		cp r18,__zero_reg__
 2983 0800 3105      		cpc r19,__zero_reg__
 2984 0802 01F4      		brne .L69
 2985               	.L81:
 269:delay_cyc.c   **** 		case 6:
 2986               		.stabn	68,0,269,.LM441-.LFBB8
 2987               	.LM441:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 138


 2988               	/* #APP */
 2989               	 ;  269 "delay_cyc.c" 1
 2990 0804 0000      		nop
 2991               	 ;  0 "" 2
 271:delay_cyc.c   **** 		case 5:
 2992               		.stabn	68,0,271,.LM442-.LFBB8
 2993               	.LM442:
 2994               	 ;  271 "delay_cyc.c" 1
 2995 0806 0000      		nop
 2996               	 ;  0 "" 2
 273:delay_cyc.c   **** 		case 4:
 2997               		.stabn	68,0,273,.LM443-.LFBB8
 2998               	.LM443:
 2999               	 ;  273 "delay_cyc.c" 1
 3000 0808 0000      		nop
 3001               	 ;  0 "" 2
 275:delay_cyc.c   **** 		case 3:
 3002               		.stabn	68,0,275,.LM444-.LFBB8
 3003               	.LM444:
 3004               	 ;  275 "delay_cyc.c" 1
 3005 080a 0000      		nop
 3006               	 ;  0 "" 2
 277:delay_cyc.c   **** 		case 2:
 3007               		.stabn	68,0,277,.LM445-.LFBB8
 3008               	.LM445:
 3009               	 ;  277 "delay_cyc.c" 1
 3010 080c 0000      		nop
 3011               	 ;  0 "" 2
 279:delay_cyc.c   **** 		case 1:
 3012               		.stabn	68,0,279,.LM446-.LFBB8
 3013               	.LM446:
 3014               	 ;  279 "delay_cyc.c" 1
 3015 080e 0000      		nop
 3016               	 ;  0 "" 2
 3017               		.stabn	68,0,281,.LM447-.LFBB8
 3018               	.LM447:
 3019               	 ;  281 "delay_cyc.c" 1
 3020 0810 0000      		nop
 3021               	 ;  0 "" 2
 3022               	/* #NOAPP */
 3023               	.LBE196:
 3024               	.LBE195:
 3025               		.stabs	"_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c",132,0,0,.Ltext50
 3026               	.Ltext50:
1970:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****       HD_Delay();
1971:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    }
1972:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
1973:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c ****    if(dataEnable)
 3027               		.stabn	68,0,1973,.LM448-.LFBB8
 3028               	.LM448:
 3029 0812 4423      		tst r20
 3030 0814 01F0      		breq .L70
 3031               	.LBB197:
 3032               	.LBB198:
 3033               		.stabs	"main.c",132,0,0,.Ltext51
 3034               	.Ltext51:
   1:main.c        **** /* mehPL:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 139


   2:main.c        ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:main.c        ****  *    I'm not too fond of long licenses at the top of the file.
   4:main.c        ****  *    Please see the bottom.
   5:main.c        ****  *    Enjoy!
   6:main.c        ****  */
   7:main.c        **** 
   8:main.c        **** 
   9:main.c        **** 
  10:main.c        **** 
  11:main.c        **** 
  12:main.c        **** 
  13:main.c        **** 
  14:main.c        **** 
  15:main.c        **** 
  16:main.c        **** 
  17:main.c        **** // Please see mainConfig.h!
  18:main.c        **** 
  19:main.c        **** 
  20:main.c        **** //The order of these #includes is *very specific*
  21:main.c        **** // please see the associated files (especially lcdStuff, lcdDefines, and
  22:main.c        **** // lvds)
  23:main.c        **** 
  24:main.c        **** 
  25:main.c        **** //This file contains code for *many* options, chosen by mainConfig.h
  26:main.c        **** // (and possibly makefile)
  27:main.c        **** 
  28:main.c        **** 
  29:main.c        **** 
  30:main.c        **** #include "projInfo.h"   //Don't include in main.h 'cause that's included in other .c's?
  31:main.c        **** #include "main.h"
  32:main.c        **** #include <util/delay.h> //For delay_us in pll_enable
  33:main.c        **** #include <avr/pgmspace.h>
  34:main.c        **** #include _TIMERCOMMON_HEADER_
  35:main.c        **** //#include "../../../_commonCode/charBitmap/0.10/charBitmap.h"
  36:main.c        **** #include _CHARBITMAP_HEADER_
  37:main.c        **** #include "fbColors.h"
  38:main.c        **** 
  39:main.c        **** #include _SINETABLE_HEADER_
  40:main.c        **** 
  41:main.c        **** 
  42:main.c        **** 
  43:main.c        **** #include "mainConfig.h"
  44:main.c        **** 
  45:main.c        **** 
  46:main.c        **** 
  47:main.c        **** #include "delay_cyc.h"
  48:main.c        **** 
  49:main.c        **** 
  50:main.c        **** #if (defined(ROW_SEG_BUFFER) && ROW_SEG_BUFFER)
  51:main.c        **** 	 #include "rowSegBuffer.h"
  52:main.c        **** #endif
  53:main.c        **** 
  54:main.c        **** //Nope, can't be removed yet...
  55:main.c        **** //#define ROW_BUFFER FALSE
  56:main.c        **** //#define LOADROW TRUE
  57:main.c        **** #if (defined(ROW_BUFFER) && ROW_BUFFER)
  58:main.c        **** #error
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 140


  59:main.c        **** #include "rowBuffer.c"
  60:main.c        **** #endif
  61:main.c        **** 
  62:main.c        **** #if (defined(SEG_TET) && SEG_TET)
  63:main.c        ****  #include "tetStuff.c"
  64:main.c        **** #endif
  65:main.c        **** 
  66:main.c        **** 
  67:main.c        **** #if (defined(BLUE_ADC) && BLUE_ADC)
  68:main.c        ****  #include _ADC_HEADER_
  69:main.c        **** #endif
  70:main.c        **** 
  71:main.c        **** #if (defined(FB_QUESTION) && FB_QUESTION)
  72:main.c        ****  #include _PIEZOHITDETECTOR_CFILE_
  73:main.c        **** #endif
  74:main.c        **** 
  75:main.c        **** #define OSCCAL_VAL	0xff//0xDB//0xDC//0xE0//0//0xff//0x20//0xff //0x00
  76:main.c        **** #include "delay_cyc.c"
  77:main.c        **** #include "lcdDefines.h"
  78:main.c        **** #include "pll.c"
  79:main.c        **** 
  80:main.c        **** #if (defined(__AVR_AT90PWM161__))
  81:main.c        ****  #include "lvds161.c"
  82:main.c        **** #else
  83:main.c        ****  #include "lvds.c"
  84:main.c        **** #endif
  85:main.c        **** 
  86:main.c        **** #if(defined(FB_SMILEY) && FB_SMILEY)
  87:main.c        ****  #define fb_updater()	smileyUpdate()
  88:main.c        **** #elif (defined(FB_QUESTION) && FB_QUESTION)
  89:main.c        ****  #include "fb_question.h"
  90:main.c        ****  #define fb_updater()	fbQuestion_update()
  91:main.c        **** #endif
  92:main.c        **** 
  93:main.c        **** uint8_t isNewFrame(void);
  94:main.c        **** 
  95:main.c        **** #if (defined(FRAMEBUFFER_TESTING) && FRAMEBUFFER_TESTING)
  96:main.c        ****  #include "_options/writeColor.c"
  97:main.c        **** #endif
  98:main.c        **** 
  99:main.c        **** #if (defined(FB_QUESTION) && FB_QUESTION)
 100:main.c        ****  #include "fb_question.c"
 101:main.c        **** #endif
 102:main.c        **** 
 103:main.c        **** // a/o v59:
 104:main.c        **** //PSEGS are the "pixel segments" addressable in RowSegmentBuffer
 105:main.c        **** // e.g. one could load a single row-segment NUM_PSEGS long, and it would 
 106:main.c        **** // reach from one edge of the screen to the other
 107:main.c        **** // or any number <=NUM_SEGMENTS of row segments whose lengths all add up to
 108:main.c        **** // <=NUM_PSEGS. (It's possible to extend beyond NUM_PSEGS, which would draw
 109:main.c        **** // beyond the edge of the screen, but it may affect the screen's ability 
 110:main.c        **** // to sync properly)
 111:main.c        **** // This value isn't exactly adjustable, it's a characteristic of the
 112:main.c        **** // ratio of the pixel-clock and the system-clock, along with the number of
 113:main.c        **** // system clock cycles used to draw each pixel.
 114:main.c        **** // This value was determined by experimentation with the very specific 
 115:main.c        **** // configuration currently in use, though it could probably be calculated 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 141


 116:main.c        **** // from other #defines elsewhere.
 117:main.c        **** // (and probably *should* be, at some point, especially with 
 118:main.c        **** //  experimentations with PLLSYSCLK, LVDS_PRESCALER, SLOW_LVDS, etc...)
 119:main.c        **** // For now, changing this doesn't really do anything except scale some 
 120:main.c        **** // drawings horizontally (E.G. SEG_RACER)
 121:main.c        **** //These notes were determined long ago when developing SEG_RACER:
 122:main.c        **** // Wasn't sure where 357 came from... and now I'm wondering where the
 123:main.c        **** // notes I wrote regarding it disappeared to...
 124:main.c        **** // Anyhow, from line 72, if ROW_SEG_BUFFER && !LVDS_PRESCALER
 125:main.c        **** // "ROW_SEG_BUFFER uses 20cyc/pixel" (doesn't match the math I've 
 126:main.c        **** // elsewhere) 1024/20*7 = 358.4... so maybe that's something to do with it
 127:main.c        **** // TODO: If it was 21cyc/pixel, wouldn't we have perfect alignment with
 128:main.c        **** //       color-transitions and segment widths?
 129:main.c        **** //#define NUM_PSEGS	(1024/3+16) //357
 130:main.c        **** 
 131:main.c        **** #if (LVDS_PRESCALER == 1)
 132:main.c        ****  #warning "LVDS_PRESCALER == 1 is used extensively a/o v62 to indicate that	we're testing v62... th
 133:main.c        ****  //Let's see if this math can be figured out...
 134:main.c        ****  //
 135:main.c        ****  // Hah, right??? I completely forgot about SQUARE_SEGMENTS in all this
 136:main.c        ****  // Assuming they're always square, for now.
 137:main.c        ****  //
 138:main.c        ****  // H_PIXELS (DE_ACTIVE_DOTS)		1024             pixels
 139:main.c        ****  
 140:main.c        ****  // LVDS_PRESCALER					(1,2,4,8...)     pll_cyc/lvds_bit
 141:main.c        ****  //    PLLCYC_PER_LVDSBIT        LVDS_PRESCALER
 142:main.c        **** 
 143:main.c        ****  // LVDS_BITS_PER_PIXEL				7                lvds_bits/pixel
 144:main.c        ****  // PLL_SYSCLK
 145:main.c        ****  //    TRUE:  PLLCYC_PER_CPUCYC  4                pll_cyc/cpu_cyc
 146:main.c        ****  //    FALSE: PLLCYC_PER_CPUCYC  8                pll_cyc/cpu_cyc
 147:main.c        ****  // DRAWSEG_CPU_CYCS_PER_PSEG		20               cpu_cyc/pseg
 148:main.c        ****  //
 149:main.c        ****  // PIXELS_PER_PSEG = 1pseg * CPUCYCS_PER_PSEG   -> cpu_cycs
 150:main.c        ****  //                         * PLLCYC_PER_CPUCYC  -> pll_cycs
 151:main.c        ****  //                         / PLLCYC_PER_LVDSBIT -> lvds_bits
 152:main.c        ****  //                         / LVDSBITS_PER_PIXEL -> pixels
 153:main.c        ****  //   This is where dimensional-analysis always bites me in the ass...
 154:main.c        ****  //   my units are now PIXELS_PER_PSEG = pix/pseg = pix
 155:main.c        ****  //   I THINK (and this is an epiphany after years of recurring troubles
 156:main.c        ****  //   here) it's possible to, instead, note that 1pseg came from *nowhere*
 157:main.c        ****  //   so should be 1pseg/1pseg * <all the dimensional-analysis stuff>
 158:main.c        ****  //   Then:
 159:main.c        ****  //   (Note, in most cases PIXELS_PER_PSEG will be small, and here
 160:main.c        ****  //   fractions are highly important...)
 161:main.c        ****  #define CPUCYC_PER_PSEG	(DRAWSEG_CPU_CYCS_PER_PSEG)
 162:main.c        ****  #if(defined(PLL_SYSCLK) && PLL_SYSCLK)
 163:main.c        ****   #define PLLCYC_PER_CPUCYC	4
 164:main.c        ****  #else
 165:main.c        ****   #define PLLCYC_PER_CPUCYC	8
 166:main.c        ****  #endif
 167:main.c        ****  #define PLLCYC_PER_LVDSBIT	(LVDS_PRESCALER)
 168:main.c        ****  #define LVDSBITS_PER_PIXEL	7
 169:main.c        **** 
 170:main.c        ****  #define PIXELS_PER_PSEG_F ( MAKEFLOAT( CPUCYC_PER_PSEG   ) \
 171:main.c        **** 		 							* MAKEFLOAT( PLLCYC_PER_CPUCYC  ) \
 172:main.c        **** 		 							/ MAKEFLOAT( PLLCYC_PER_LVDSBIT ) \
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 142


 173:main.c        **** 		 							/ MAKEFLOAT( LVDSBITS_PER_PIXEL ) )
 174:main.c        ****  // NUM_PSEGS = H_PIXELS / PIXELS_PER_PSEG
 175:main.c        ****  #define NUM_PSEGS_F (MAKEFLOAT(DE_ACTIVE_DOTS) / PIXELS_PER_PSEG_F)
 176:main.c        ****  // And here, we're leaving NUM_PSEGS_F as a float so it can be used in 
 177:main.c        ****  // macro-comparisons, if necessary...
 178:main.c        ****  // (I don't think MAKELONG or any other such macro could handle this
 179:main.c        ****  // casting... it may be redundant since most uses would be assignments in
 180:main.c        ****  // integers, but if math is used, we don't want floating-point math to be
 181:main.c        ****  // run on it in real-time calculations...)
 182:main.c        ****  #define NUM_PSEGS ((uint16_t)(NUM_PSEGS_F))
 183:main.c        ****  // As a hand-job test: Using old values (when 357 was determined)
 184:main.c        ****  // DE_ACTIVE_DOTS = 1024
 185:main.c        ****  // CPUCYCS_PER_PSEG = 20
 186:main.c        ****  // PLLCYC_PER_CPUCYC = 8
 187:main.c        ****  // PLLCYC_PER_LVDSBIT =8
 188:main.c        ****  // LVDSBITS_PER_PIXEL =7
 189:main.c        ****  // 1024 / (20 * 8 / 8 / 7) = 358.4
 190:main.c        ****  // (The old NUM_PSEGS = 1024/3+16 = 357.333)
 191:main.c        ****  // (As an aside, if CPUCYCS_PER_PSEG = 21: 1024/(21*8/8/7)=341.333 
 192:main.c        ****  //    == exactly three pixels per pseg)
 193:main.c        **** #else
 194:main.c        ****  #warning "NUM_PSEGS is hardcoded, but should be calculated by many factors, such as LVDS_PRESCALER
 195:main.c        ****  #define NUM_PSEGS (1024/3+16)
 196:main.c        **** #endif
 197:main.c        **** 
 198:main.c        **** //Yes, I know #including C files is bad-practice...
 199:main.c        **** // and yes, this has to be here... for now.
 200:main.c        **** #if(defined(SEG_RACER) && SEG_RACER)
 201:main.c        ****  #include "seg_racer.c"
 202:main.c        **** #endif
 203:main.c        **** 
 204:main.c        **** 
 205:main.c        **** 
 206:main.c        **** 
 207:main.c        **** 
 208:main.c        **** // a/o v60, this note is OLD, and actually is the whole point behind
 209:main.c        **** // ROW_SEG_BUFFER's current implementation.
 210:main.c        **** // TODO: Between OSCCAL_VAL and FRAME_UPDATE_DELAY
 211:main.c        **** //  it seems the speed (at least for the LTN) isn't so important after all
 212:main.c        **** //  This could be used to my advantage...
 213:main.c        **** //  Maybe bump OSCCAL_VAL all the way up, but use a slower "bit-rate"
 214:main.c        **** //  Thus, pixels could be skinnier, thus higher-resolution.
 215:main.c        **** //   Or more instructions could be used for the same resolution
 216:main.c        **** //   allowing, e.g. sprites from program-memory, without necessitating a
 217:main.c        **** //   large (or any?) frame-buffer...
 218:main.c        **** 
 219:main.c        **** 
 220:main.c        **** //This used to be handled by TOOFAST_TEST, but now can be configured here
 221:main.c        **** // 0xff sets the processor to run as fast as possible 
 222:main.c        **** //  (~16MHz? ~128MHz bit-rate)
 223:main.c        **** // 0x00 sets it as slow as possible (~4MHz, ~32MHz bit-rate)
 224:main.c        **** //  good for testing whether odd colors
 225:main.c        **** //  or bad syncing is due to bits being shifted, etc. 
 226:main.c        **** //  Maybe due to slow "LVDS" conversion chips, or whatnot.
 227:main.c        **** //   This seems to be the case right now... 0xff: black is appearing green
 228:main.c        **** //   There should be *some* green in it, but not this much.
 229:main.c        **** //   Likely due to different propagation delays between my under-driven
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 143


 230:main.c        **** //    74LS86's (running red and green), from 3.3V!
 231:main.c        **** //    and the happier and newer 74AHC XOR and OR currently driving the
 232:main.c        **** //    clock and DVH/Blue signals
 233:main.c        **** //  Highly dependent on the screen itself, some may not run at all with
 234:main.c        **** //  such slow bitrates... heck, some may not run at all even at the fastest
 235:main.c        **** // If SLOW_EVERYTHING_TEST is true, this value is overridden
 236:main.c        **** // LTN last used 0x20
 237:main.c        **** // a/o v59:
 238:main.c        **** // 0xD8 is the lowest value that syncs reliably, a few glitches from time
 239:main.c        **** // to time.
 240:main.c        **** // The effect of lower values isn't *quite* what I was expecting, but
 241:main.c        **** // definitely suggests that using ROW_SEG_BUFFER at this bit/refresh-rate
 242:main.c        **** // is dang-near right at the minimum required for this display.
 243:main.c        **** // This might be why the other (same model) display didn't work, but its
 244:main.c        **** // flakeyness at 0xff appeared different than this one's at lower OSCCALs
 245:main.c        **** // --Later note... actually retrying the "flakey" display with the same
 246:main.c        **** //   configuration. Actually, yes, the problem looks dang-near identical to
 247:main.c        **** //   the "reliable" display's being run at OSCCAL_VALs lower than 0xD8
 248:main.c        **** //   Both displays are of the same manufacturer/model.
 249:main.c        **** //    "reliable" has the chip: LXD91810 VS252AG
 250:main.c        **** //    "flakey"   has the chip: LXD91810 VS242AC
 251:main.c        **** //   The only bit I don't get is that I'm dang-near certain I had both
 252:main.c        **** //   displays working at one point, and from the same code...
 253:main.c        **** //   but this OSCCAL value is the maximum, and the only other way to speed
 254:main.c        **** //   up the bit-rate changes the resolution; which I haven't done
 255:main.c        **** //   for quite some time.
 256:main.c        **** //   Also different about this test than when I originally determined it
 257:main.c        **** //   "flakey": I've since switched the 74LS00 and LS32 out for LS86's
 258:main.c        **** //   (These are wired such that one chip is responsible for the + side of
 259:main.c        **** //    every LVDS signal, and one chip is responsible for the - side.
 260:main.c        **** //    The best-practice, probably, would be to have the + and - sides of
 261:main.c        **** //    an LVDS signal on the same chip. It's also plausible that my test was
 262:main.c        **** //    so long ago that it was on the old board which had this configuration
 263:main.c        **** //    but I doubt that, since that board was so hokily-implemented (with
 264:main.c        **** //    chip-clips and grabbers all over the place) that I can't imagine it
 265:main.c        **** //    was ever running again after all those months of disuse. Though...
 266:main.c        **** //    if that *was* the case... it could also be that I'm using a different
 267:main.c        **** //    ATtiny861... in which case, maybe the RC oscillator and/or PLL aren't
 268:main.c        **** //    capable of running as fast... 
 269:main.c        **** //    Not that I have a ton of these things lying around (three total, in
 270:main.c        **** //    various projects already)
 271:main.c        **** //    BUT the end-result may be that I just happen to have the one display
 272:main.c        **** //    and ATtiny861 on the planet that will work together. That'd be lame.)
 273:main.c        **** //#define OSCCAL_VAL	0xff//0xDB//0xDC//0xE0//0//0xff//0x20//0xff //0x00
 274:main.c        **** //This has been moved to the top...
 275:main.c        **** 
 276:main.c        **** 
 277:main.c        **** 
 278:main.c        **** 
 279:main.c        **** //a/o v60: These are old experiments...
 280:main.c        **** // they *are useful* for testing new displays...
 281:main.c        **** // but I can't recall off-hand how to use them instead of (or with?)
 282:main.c        **** // rowSegBuffer...
 283:main.c        **** // They're defined and better-described in lcdStuff.c...
 284:main.c        **** //These three are mutually-exclusive (BLUE_VERT_BAR overrides DE_BLUE)
 285:main.c        **** // (BLUE_DIAG_BAR overrides both...)
 286:main.c        **** //#define BLUE_DIAG_BAR TRUE
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 144


 287:main.c        **** //A single black bar, followed by a single blue bar... ~1/3 and 2/3's width
 288:main.c        **** //#define BLUE_VERT_BAR TRUE
 289:main.c        **** //#define DE_BLUE TRUE
 290:main.c        **** // OLD NOTE:
 291:main.c        **** // NONE SELECTED DOESN'T SYNC!!! DE not detected???
 292:main.c        **** 
 293:main.c        **** 
 294:main.c        **** 
 295:main.c        **** // Default is drawPix, from program memory...
 296:main.c        **** // a/o v60: drawPix() has since become the de-facto function for drawing
 297:main.c        **** // a row of pixels, regardless of the method.
 298:main.c        **** // It's defined as necessary...
 299:main.c        **** 
 300:main.c        **** 
 301:main.c        **** 
 302:main.c        **** //This is where COLOR_BAR_SCROLL and PIXEL_SCROLL were, in part.
 303:main.c        **** 
 304:main.c        **** 
 305:main.c        **** 
 306:main.c        **** 
 307:main.c        **** 
 308:main.c        **** 
 309:main.c        **** //#include "lvds.c"
 310:main.c        **** 
 311:main.c        **** 
 312:main.c        **** 
 313:main.c        **** #if(defined(LOADROW) && LOADROW)
 314:main.c        **** static __inline__ \
 315:main.c        **** void loadRow(uint16_t rowNum) \
 316:main.c        **** 	__attribute__((__always_inline__));
 317:main.c        **** #endif
 318:main.c        **** 
 319:main.c        **** 
 320:main.c        **** //The endOfFrameHandler() function might e.g. cause the timer-interrupt to
 321:main.c        **** //be disabled until it's time to redraw a new frame
 322:main.c        **** // Since we're working with TFT displays, there is inherent "memory" of the
 323:main.c        **** // last-written frame, so we needn't refresh at the maximum rate possible
 324:main.c        **** // For some displays (e.g. the LTN) the act of refreshing is visible, so
 325:main.c        **** // unless the image changes (or the pixels have faded) it would be best
 326:main.c        **** // *not* to refresh
 327:main.c        **** static __inline__
 328:main.c        **** void endOfFrameHandler(void)
 329:main.c        **** 	__attribute__((__always_inline__));
 330:main.c        **** 
 331:main.c        **** #if(!defined(PWM_TESTING) || !PWM_TESTING)
 332:main.c        ****  #include _LCDSTUFF_CFILE_
 333:main.c        ****  //#include "../../../_commonCode/lcdStuff/0.50ncf/lcdStuff.c"
 334:main.c        **** 
 335:main.c        **** 
 336:main.c        ****  volatile uint8_t updateFrame = TRUE;
 337:main.c        ****  volatile uint8_t frameCount = 0;
 338:main.c        **** 
 339:main.c        ****  //Nearly everything display-related happens in this interrupt
 340:main.c        ****  // It even calls the functions that load (and calculate!) the data for the
 341:main.c        ****  // next row.
 342:main.c        ****  // So basically, the entire project is running via timer-interrupt.
 343:main.c        ****  SIGNAL(HSYNC_TIMER_INTERRUPT_VECT) //TIMER0_COMPA_vect)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 145


 344:main.c        ****  {
 345:main.c        **** #if(defined(_DMS_EXTERNALUPDATE_) && _DMS_EXTERNALUPDATE_)
 346:main.c        **** 	 dms_update();
 347:main.c        **** #endif
 348:main.c        **** 
 349:main.c        **** 	 if(!updateFrame)
 350:main.c        **** 		 return;
 351:main.c        ****  //	static uint8_t frameCount = 0;
 352:main.c        **** 
 353:main.c        **** 	//Could insert a delay of sorts for scopability...
 354:main.c        **** 	// (otherwise there's not much guarantee that register-assignments
 355:main.c        **** 	//  later will align with the LVDS frame... though ALIGN should help)
 356:main.c        **** 	// see scopeHsync.c
 357:main.c        **** 
 358:main.c        **** 	//So here's the deal:
 359:main.c        **** 	// This handles a single row of pixel/timing data (Hblanks included)
 360:main.c        **** 	// updateLCD()             (from lcdStuff.c) 
 361:main.c        **** 	//  --> loadData()         (from lcdStuff.c)
 362:main.c        **** 	//        HSync
 363:main.c        **** 	//        H-Back-Porch
 364:main.c        **** 	//        --> drawPix()    (drawPix() may be here or elsewhere)
 365:main.c        **** 	//        (H-Front-Porch)
 366:main.c        **** 	//
 367:main.c        **** 	// drawPix is only called for drawn-rows (where DE is active, NOT for
 368:main.c        **** 	// Vblank rows)
 369:main.c        **** 	// H-Front-Porch is handled in the time between completion of this
 370:main.c        **** 	// interrupt and the next interrupt...
 371:main.c        **** 
 372:main.c        **** 	if(updateLCD())
 373:main.c        **** 	{
 374:main.c        **** 		frameCount++;
 375:main.c        **** 		//updateLCD() returns TRUE when the frame is complete
 376:main.c        **** 		// which can be used for whatever purposes 
 377:main.c        **** 		// (e.g. FRAME_COUNT_TO_DELAY)
 378:main.c        **** 
 379:main.c        **** 		endOfFrameHandler();
 380:main.c        **** 	}
 381:main.c        **** 
 382:main.c        ****  #if(defined(LOADROW) && LOADROW)
 383:main.c        **** 	//Load the next row into the row(seg)buffer
 384:main.c        **** 	//data is enabled after T_VD+T_Vlow...
 385:main.c        **** 	//a/o v60: Rereading this is confusing...
 386:main.c        **** 	// Basically, there's no reason to call loadRow for display-lines
 387:main.c        **** 	// which don't display data (e.g. V-Sync)
 388:main.c        **** 	if((hsyncCount >= T_VD+T_Vlow) && (hsyncCount < T_VD+T_Vlow+V_COUNT))
 389:main.c        **** 		loadRow(hsyncCount - (T_VD+T_Vlow));
 390:main.c        ****  #endif
 391:main.c        **** 	// a/o v60: This is a funny old note... I can't recall a time when
 392:main.c        **** 	// loadRow was written, then removed, then added again. Weird:
 393:main.c        **** 	// Here is where loadRow used to be called
 394:main.c        **** 	// it has been moved to oldNotes.txt, but it would make more sense
 395:main.c        **** 	// to look at LCDdirectLVDS <25 or LCDdirect
 396:main.c        **** 	// loadRow used the time between DE inactive and the next Hsync
 397:main.c        **** 	// to load a row to a row-buffer (as opposed to a frame-buffer)
 398:main.c        **** 	// thus, DE could gain more pixels because there would be fewer
 399:main.c        **** 	// calculations to determine the memory location to write from
 400:main.c        **** 	// This effect has since been minimized
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 146


 401:main.c        **** 	// BUT loadRow might be necessary for program-memory-based images...
 402:main.c        ****  }
 403:main.c        **** #endif //!PWM_TESTING
 404:main.c        **** 
 405:main.c        **** 
 406:main.c        **** #if(defined(SEG_HFM) && SEG_HFM)
 407:main.c        **** 	#include "seg_hfm.c"
 408:main.c        **** #endif
 409:main.c        **** 
 410:main.c        **** #if(defined(SEG_QUESTION) && SEG_QUESTION)
 411:main.c        **** 	#include "seg_question.c"
 412:main.c        **** #endif
 413:main.c        **** 
 414:main.c        **** #if(defined(SEG_SINE) && SEG_SINE)
 415:main.c        **** 	#include "seg_sine.c"
 416:main.c        **** #endif
 417:main.c        **** 
 418:main.c        **** #if(defined(LOADROW) && LOADROW)
 419:main.c        **** // whatever this means... it's OLD.
 420:main.c        **** //#warning "loadRow is currently in an intermediate phase..."
 421:main.c        **** void loadRow(uint16_t rowNum)
 422:main.c        **** {
 423:main.c        **** 
 424:main.c        **** 
 425:main.c        **** #if(defined(ROW_SEG_BUFFER) && ROW_SEG_BUFFER)
 426:main.c        ****  #if (defined(SEG_RACER) && SEG_RACER)
 427:main.c        **** 	racer_loadRow(rowNum);
 428:main.c        ****  #elif (defined(SEG_HFM) && SEG_HFM)
 429:main.c        ****  	segHFM_loadRow(rowNum);
 430:main.c        ****  #elif (defined(SEG_QUESTION) && SEG_QUESTION)
 431:main.c        ****  	segQuestion_loadRow(rowNum);
 432:main.c        ****  #elif (defined(SEG_SINE) && SEG_SINE)
 433:main.c        ****  	segSine_loadRow(rowNum);
 434:main.c        ****  #elif (defined(SEG_LINE) && SEG_LINE)
 435:main.c        **** 	//Left here for an example...
 436:main.c        **** 	// Draws a diagonal line 
 437:main.c        **** 	//OLD NOTE:
 438:main.c        **** 	//syncing issues due to recursion overflowing the stack???
 439:main.c        **** 	// Apparently was
 440:main.c        **** 	   
 441:main.c        **** 	//Isn't BLAH = 1 necessary so we don't get a row with no data?
 442:main.c        **** 	// *looks* like it's working, but I dunno...
 443:main.c        **** 	#define BLAH 0
 444:main.c        **** 
 445:main.c        **** 	segClear();
 446:main.c        **** 	newSeg(3,0x06, (6<<4) | 3);									//W
 447:main.c        **** 	newSeg((rowNum&0xff) | BLAH, 0x06, (4<<4) | 0);				//R
 448:main.c        **** 	newSeg(1,0x06, (6<<4) | 3);									//W
 449:main.c        **** 	newSeg((255-(rowNum&0xff)) | BLAH, 0x06, (4<<4) | 0 );	//R
 450:main.c        **** 	newSeg(3,0x06, (6<<4) | 3);									//W
 451:main.c        **** 	segTerminate();
 452:main.c        **** 
 453:main.c        ****  #elif (defined(SEG_TET) && SEG_TET)
 454:main.c        **** 	//This isn't particularly functional, anymore
 455:main.c        **** 	// it used to be an intermediate stage between rowBuffer and 
 456:main.c        **** 	//  rowSegBuffer... Left here for an example of how it could be done...
 457:main.c        **** 	//ACTUALLY, a/o v60ish it has been reinstated...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 147


 458:main.c        **** 	// and, in fact, a/o v62, this may become a great early-test for new
 459:main.c        **** 	// displays, as the necessary resolution is low, which would allow for
 460:main.c        **** 	// higher refresh-rates (which some displays may need)
 461:main.c        **** 	// (There are certainly other ways to make things more suitable for new
 462:main.c        **** 	// displays... these'll be explored in later code-revisions, probably)
 463:main.c        **** 
 464:main.c        ****   //SEG_STRETCH is the number of PSEGS that each row-buffer pixel is
 465:main.c        ****   //stretched-across. In this case (SEG_TET) (or any case where *only* the
 466:main.c        ****   //rowbuffer is used to fill the screen), the value of SEG_STRETCH should
 467:main.c        ****   //probably be varied dependent on NUM_PSEGS (which should be dependent on
 468:main.c        ****   //LVDS_PRESCALER and a few other factors) in order to stretch the
 469:main.c        ****   //row-buffer acreoss the entire screen. But I think most of these things
 470:main.c        ****   //are so-far hard-coded...
 471:main.c        ****   // Further, it's entirely possible (in a not-implemented-here case) to
 472:main.c        ****   // have the row-buffer occupy only a certain portion of the screen and
 473:main.c        ****   // modify the remaining psegs directly via other means... (I had this
 474:main.c        ****   // once, when displaying Tetris, Life, and a few others on the same
 475:main.c        ****   // screen, I think, right?)
 476:main.c        ****   //Anyhow, a/o a while back, SEG_TET is the only case using SEG_STRETCH 
 477:main.c        **** //  #if(!defined(SEG_STRETCH))
 478:main.c        **** // And a/o v62 Trying to bump the frame-rate up so the ChiMei display will
 479:main.c        **** // work, using LVDS_PRESCALER, this might help... again hardcoded where
 480:main.c        **** // ideally the thing would calculate itself... Though it's also handy to
 481:main.c        **** // have it hard-coded as it allows for testing the display's immunity (or
 482:main.c        **** // lack thereof) for long/short DEs
 483:main.c        **** #if(LVDS_PRESCALER == 1)
 484:main.c        ****  #define SEG_STRETCH 1
 485:main.c        **** #else
 486:main.c        ****  #define SEG_STRETCH 5 //(((NUM_PSEGS-6)+RB_WIDTH-1)/RB_WIDTH)
 487:main.c        **** #endif
 488:main.c        **** 	//3-5 = white + cyan
 489:main.c        **** 	//6 = letters alternating with above
 490:main.c        **** 	//7-9 = ditto, stretched
 491:main.c        **** 
 492:main.c        **** #define TET_VSTRETCH	16
 493:main.c        **** 	if(rowNum == 0)
 494:main.c        **** 	{
 495:main.c        **** 		//Probably not best to put this here, as we're still in the interrupt
 496:main.c        **** 		// extra-long calculations might cause syncing issues with displays
 497:main.c        **** 		// that require rows to be a constant time
 498:main.c        **** 		tetUpdate();
 499:main.c        **** 	}
 500:main.c        **** 	if(rowNum % TET_VSTRETCH == 0)
 501:main.c        **** 	{
 502:main.c        **** 		uint8_t i;
 503:main.c        **** 		for(i=0; i<RB_WIDTH; i++)
 504:main.c        **** 			rowBuffer[i] = fb_to_rb(_K);
 505:main.c        **** 		//	rowBuffer[i] = fb_to_rb((i+rowNum/TET_VSTRETCH)&0x3f);
 506:main.c        **** 		
 507:main.c        **** 		tet_drawRow(rowNum/TET_VSTRETCH, rowBuffer);
 508:main.c        **** 	}
 509:main.c        **** 	segClear();
 510:main.c        **** 
 511:main.c        **** 	//Good for syncing to have white on both borders...
 512:main.c        **** 	newSeg(3, 0x06, (6<<4) | 3);
 513:main.c        **** 	
 514:main.c        **** 	uint16_t i;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 148


 515:main.c        **** 	//TET_OVERLAY alternates rows between the TETRIS board and
 516:main.c        **** 	// an rgb "gradient" The only purpose is to test the idea of
 517:main.c        **** 	// using the high vertical-resolution to essentially increase the
 518:main.c        **** 	// number of colors available to a low-resolution image
 519:main.c        **** 	// sort of like "dithering" in the ol' days of 256 colors in Windows
 520:main.c        **** 	// but easy to implement in this case with very little overhead 
 521:main.c        **** 	// row-by-row
 522:main.c        **** 	// The effect, from a ways back, looks like the colors are blended
 523:main.c        **** 	// (like the Text and Game-board are translucent)
 524:main.c        **** #define TET_OVERLAY TRUE
 525:main.c        **** 
 526:main.c        **** 	//TET_GRADIENT takes that a step further and attempts to create a
 527:main.c        **** 	// gradient between each color in that rgb-gradient.
 528:main.c        **** 	// It's not as pretty as I'd hoped... though it makes sense...
 529:main.c        **** 	// first we're alternating between TET's color and the background color
 530:main.c        **** 	// then the background color is (roughly) alternating between a couple
 531:main.c        **** 	// colors, several rows between...
 532:main.c        **** 	// so if a color is stretched 16 rows vertically, that only leaves 8
 533:main.c        **** 	// rows for the color-gradient... might work better over more gradual
 534:main.c        **** 	// color-changes
 535:main.c        **** #define TET_GRADIENT TRUE
 536:main.c        **** 
 537:main.c        **** #if (defined(TET_OVERLAY) && TET_OVERLAY)
 538:main.c        **** 	if(rowNum & 0x01)
 539:main.c        **** 	{
 540:main.c        **** #endif
 541:main.c        **** 	for(i=0; i<RB_WIDTH; i++)
 542:main.c        **** 	{
 543:main.c        **** 		//i+1 because we don't want to overwrite the white border...
 544:main.c        **** 		rbpix_to_seg(rowBuffer[i], i+1, SEG_STRETCH);
 545:main.c        **** 	}
 546:main.c        **** 
 547:main.c        **** #if (defined(TET_OVERLAY) && TET_OVERLAY)
 548:main.c        **** 	}
 549:main.c        **** 	else
 550:main.c        **** 	{
 551:main.c        **** 		#define ROWS_PER 64//(V_COUNT/NUM_COLORS)
 552:main.c        **** 
 553:main.c        **** 		uint8_t fbColor;
 554:main.c        **** 
 555:main.c        **** #if (defined(TET_GRADIENT) && TET_GRADIENT)
 556:main.c        **** 		static hfm_t hfmGradient;
 557:main.c        **** 		if(rowNum%ROWS_PER == 0)
 558:main.c        **** 			hfm_setup(&hfmGradient, 0, ROWS_PER/2-4);
 559:main.c        **** 
 560:main.c        **** 		//It's worth it to experiment with changing the range of the 
 561:main.c        **** 		// hfmGradient, ('-4' above and '+4' below).
 562:main.c        **** 		// to try to avoid one or two stray spikes
 563:main.c        **** 		// (e.g. power = 1, maxPower = 15, there'll be one bright row
 564:main.c        **** 		//  and 14 dark, it sticks out like a sore-thumb)
 565:main.c        **** 		//  These values are experimental, and entirely dependent on the
 566:main.c        **** 		//  values used...
 567:main.c        **** 
 568:main.c        **** 		hfm_setPower(&hfmGradient, (rowNum/2)%(ROWS_PER/2)+4);
 569:main.c        **** 
 570:main.c        **** 		if(hfm_nextOutput(&hfmGradient))
 571:main.c        **** 			fbColor = rgbGradient(ROWS_PER-1 - rowNum/(ROWS_PER)+16-1);
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 149


 572:main.c        **** 		else
 573:main.c        **** #endif	//TET_GRADIENT
 574:main.c        **** 			fbColor = rgbGradient(ROWS_PER-1 - rowNum/(ROWS_PER)+16);
 575:main.c        **** 
 576:main.c        **** 		addSegfb(RB_WIDTH*SEG_STRETCH, (fbColor));
 577:main.c        **** 		//newSeg(SEG_STRETCH, fb_to_seg((rowNum*64/768)&0x3f));
 578:main.c        **** 
 579:main.c        **** 	}
 580:main.c        **** #endif	//TET_OVERLAY
 581:main.c        **** 	//white...
 582:main.c        **** 	newSeg(3, 0x06, (6<<4) | 3);
 583:main.c        **** 	segTerminate();
 584:main.c        ****  #elif (defined(SEG_GRADIENT) && SEG_GRADIENT)
 585:main.c        **** 	static hfm_t hfmGradient;
 586:main.c        **** #define ROWS_PER	(255)	//(V_COUNT/3) == 256
 587:main.c        **** 
 588:main.c        **** 	if(rowNum%ROWS_PER == 0)
 589:main.c        **** 		hfm_setup(&hfmGradient, 0, ROWS_PER);
 590:main.c        **** 
 591:main.c        **** 	uint8_t color;
 592:main.c        **** 
 593:main.c        **** 	uint16_t power;
 594:main.c        **** 
 595:main.c        **** 	if(rowNum < ROWS_PER/16)
 596:main.c        **** 		rowNum = 0;
 597:main.c        **** 	else
 598:main.c        **** 		rowNum -= ROWS_PER/16;
 599:main.c        **** 
 600:main.c        **** 	//Since there are four shades, there will be three gradients...
 601:main.c        **** 	if(rowNum < ROWS_PER)
 602:main.c        **** 	{
 603:main.c        **** 		//The ROWS_PER/16 stuff is to help alleviate sharp color-spikes
 604:main.c        **** 		// which occur early-on... see the explanation in SEG_TET.
 605:main.c        **** 		color = 0;
 606:main.c        **** 		//hfm_setPower(&hfmGradient, 
 607:main.c        **** 		power = (rowNum); // + ROWS_PER/16);
 608:main.c        **** 	}
 609:main.c        **** 	else if(rowNum < ROWS_PER*2)
 610:main.c        **** 	{
 611:main.c        **** 		color = 1;
 612:main.c        **** 		//hfm_setPower(&hfmGradient, 
 613:main.c        **** 		power = rowNum-(ROWS_PER); // + ROWS_PER/16;
 614:main.c        **** 	}
 615:main.c        **** 	else
 616:main.c        **** 	{
 617:main.c        **** 		color = 2;
 618:main.c        **** 		//hfm_setPower(&hfmGradient, 
 619:main.c        **** 		power = rowNum-(ROWS_PER*2); // + ROWS_PER/16;
 620:main.c        **** 	}
 621:main.c        **** 
 622:main.c        **** 
 623:main.c        **** 	if(power < ROWS_PER/16)
 624:main.c        **** 		power = 0;
 625:main.c        **** 
 626:main.c        **** 	hfm_setPower(&hfmGradient, (power <= 255) ? power : 255);
 627:main.c        **** 
 628:main.c        **** 	if(hfm_nextOutput(&hfmGradient))
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 150


 629:main.c        **** 		color++;
 630:main.c        **** 
 631:main.c        **** 	color |= color<<2 | color<<4;
 632:main.c        **** 
 633:main.c        **** 	segClear();
 634:main.c        **** 	addSegfb(3, _W);
 635:main.c        **** 	addSegfb(NUM_PSEGS-6, color); 
 636:main.c        **** 	addSegfb(3, _W);
 637:main.c        **** 	segTerminate();
 638:main.c        ****  #elif(defined(SEG_GRADIENT2) && SEG_GRADIENT2)
 639:main.c        **** #error "Heh, never did implement this..."
 640:main.c        ****  #else
 641:main.c        **** 	#error "Gotta select a SEG_... option, or create your own"
 642:main.c        ****  #endif //SEG_ selection
 643:main.c        **** #endif //ROW_SEG_BUFFER
 644:main.c        **** }
 645:main.c        **** #endif //LOAD_ROW
 646:main.c        **** 
 647:main.c        **** #include "hsyncTimerStuff.c"
 648:main.c        **** 
 649:main.c        **** 
 650:main.c        **** #if (!defined(EXTERNAL_DRAWPIX) || !EXTERNAL_DRAWPIX)
 651:main.c        **** #if (defined(ROW_SEG_BUFFER) && ROW_SEG_BUFFER)
 652:main.c        **** void drawPix(uint16_t rowNum)
 653:main.c        **** {
 654:main.c        **** 	//Note that rowNum isn't really used here...
 655:main.c        **** 	// and it's only a uint8_t!
 656:main.c        **** 	rsb_drawPix(rowNum);
 657:main.c        **** }
 658:main.c        **** 
 659:main.c        **** #elif (defined(BLUE_ADC) && BLUE_ADC)
 660:main.c        **** //This is pretty much identical to most of the BLUE_TESTING in lcdStuff.c
 661:main.c        **** // with a slight twist...
 662:main.c        **** static __inline__ void drawPix(uint16_t rowNum)
 663:main.c        **** {
 664:main.c        ****       //uint16_t blueCyc = DOTS_TO_CYC(rowNum);
 665:main.c        ****       //uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
 666:main.c        **** 		adc_startConversion();
 667:main.c        **** 		while(adc_isBusy())
 668:main.c        **** 			asm("nop;");
 669:main.c        **** 
 670:main.c        ****       uint16_t blueDots = adc_getValue();
 671:main.c        ****       uint16_t notBlueDots = DE_ACTIVE_DOTS - blueDots;
 672:main.c        **** 
 673:main.c        ****       DEonly_fromNada();
 674:main.c        ****       //delay_cyc(notBlueCyc);
 675:main.c        ****       //delay_Dots(notBlueDots);
 676:main.c        ****       DE_DotDelay(notBlueDots);
 677:main.c        ****       DEblue_fromDEonly();
 678:main.c        ****       //delay_cyc(blueCyc);
 679:main.c        ****       //delay_Dots(blueDots);
 680:main.c        ****       DE_DotDelay(blueDots);
 681:main.c        ****       Nada_fromDEblue();
 682:main.c        **** }
 683:main.c        **** 
 684:main.c        **** #elif (defined(BLUE_AND_COLORS) && BLUE_AND_COLORS)
 685:main.c        **** // This draws four colors on the screen, black, red, blue, and cyan
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 151


 686:main.c        **** // in order to test the other colors (red and green)
 687:main.c        **** static __inline__ void drawPix(uint16_t rowNum)
 688:main.c        **** {
 689:main.c        **** 	//DE_ACTIVE_DELAYABLE attempts to take into account the overhead of
 690:main.c        **** 	//DE_DotDelay, setColors(), etc...
 691:main.c        **** 	//It's entirely arbitrary, and dependent on CPU speed (PLL_SYSCLK)
 692:main.c        **** 	// and many other factors...
 693:main.c        **** #if(defined(PLL_SYSCLK) && PLL_SYSCLK)
 694:main.c        ****  #define DE_ACTIVE_DELAYABLE	(DE_ACTIVE_DOTS-100)
 695:main.c        **** 		//Attempting to stretch the diagonal from corner-to-corner...
 696:main.c        **** 		uint16_t blueDots = (uint32_t)DE_ACTIVE_DELAYABLE * (uint32_t)rowNum
 697:main.c        **** 		  										/ V_COUNT;
 698:main.c        **** #else
 699:main.c        **** 		//Because, I guess, the math is too long without PLL_SYSCLK
 700:main.c        **** 		// since it's not syncing
 701:main.c        ****  #define DE_ACTIVE_DELAYABLE	(DE_ACTIVE_DOTS-200)
 702:main.c        **** 		uint16_t blueDots = rowNum;
 703:main.c        **** #endif
 704:main.c        **** 		uint16_t notBlueDots = DE_ACTIVE_DELAYABLE - blueDots;
 705:main.c        **** 
 706:main.c        **** 		uint16_t halfNotBlueDots = notBlueDots/2;
 707:main.c        **** 
 708:main.c        **** 		uint16_t halfBlueDots = blueDots/2;
 709:main.c        **** 
 710:main.c        **** 
 711:main.c        **** 		//fullRed(), noRed(), fullGreen(), and noGreen()
 712:main.c        **** 		// function differently than the DEblue...() functions.
 713:main.c        **** 		// Since "blue" is shared with the timing-signals,
 714:main.c        **** 		// changing a blue-value requires keeping in mind the previous and
 715:main.c        **** 		// next states of the timing (usually DE-active in all cases, but not
 716:main.c        **** 		// always).
 717:main.c        **** 		// Changing of the "red" and "green" signals is easier, since
 718:main.c        **** 		// doing-so doesn't affect anything else.
 719:main.c        **** 
 720:main.c        **** 		DEonly_fromNada();
 721:main.c        **** 
 722:main.c        **** 		//Black
 723:main.c        **** 		DE_DotDelay(halfNotBlueDots);
 724:main.c        **** 		
 725:main.c        **** 		//Red
 726:main.c        **** 		fullRed();
 727:main.c        **** 		DE_DotDelay(halfNotBlueDots);
 728:main.c        **** 
 729:main.c        **** 		//Blue
 730:main.c        **** 		noRed();
 731:main.c        **** 		DEblue_fromDEonly();
 732:main.c        **** 		
 733:main.c        **** 		DE_DotDelay(halfBlueDots);
 734:main.c        **** 
 735:main.c        **** 		//Cyan
 736:main.c        **** 		fullGreen();
 737:main.c        **** 		
 738:main.c        **** 		DE_DotDelay(halfBlueDots);
 739:main.c        **** 
 740:main.c        **** 		noGreen();
 741:main.c        **** 		Nada_fromDEblue();
 742:main.c        **** }
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 152


 743:main.c        **** #elif (defined(BLUE_ALLSHADES) && BLUE_ALLSHADES)
 744:main.c        **** //This is an attempt at showing all available shades of blue
 745:main.c        **** // Originally it was determined that 11 shades could be shown
 746:main.c        **** // but there seems to be some trouble with using wrap-around values
 747:main.c        **** // (e.g. when reset occurs before set in the count)
 748:main.c        **** // It works fine when it's the *only* shade shown, but if shown with other
 749:main.c        **** // shades on the screen, it causes syncing problems
 750:main.c        **** // So, it's been determined that there are basically four discernable
 751:main.c        **** // shades of blue which are usable with the PWM161
 752:main.c        **** //
 753:main.c        **** // The original idea: BLUE_ALLSHADES=TRUE, ALLSHADES_GRADIENT=FALSE
 754:main.c        **** //  would fade the screen from black to bright blue
 755:main.c        **** //  (it makes use of the wraparound-values)
 756:main.c        **** // Then ALLSHADES_GRADIENT would display them all on the screen at once
 757:main.c        **** // 
 758:main.c        **** // It's since been somewhat hacked, to disable the unstable wrap-around
 759:main.c        **** // values...
 760:main.c        **** // Then ALLSHADES_AND_COLORS was added, to show all usable colors
 761:main.c        **** // This's gotten a bit bloated, and would probably be better-implemented as
 762:main.c        **** // several different BLUE_WHATEVERs
 763:main.c        **** static __inline__ void drawPix(uint16_t rowNum)
 764:main.c        **** {
 765:main.c        **** #define BLUESHADES_MAX 11
 766:main.c        **** 		
 767:main.c        **** #if(!defined(ALLSHADES_GRADIENT) || !ALLSHADES_GRADIENT)
 768:main.c        ****  #define DOTSPERSHADE (DE_ACTIVE_DOTS) ///BLUESHADES_MAX)
 769:main.c        **** 		static uint8_t frameCount = 0;
 770:main.c        **** 		static uint8_t shadeNum = 0;
 771:main.c        **** 
 772:main.c        **** 		if(rowNum == 0)
 773:main.c        **** 			frameCount++;
 774:main.c        **** 
 775:main.c        **** 		if(frameCount == 60)
 776:main.c        **** 		{
 777:main.c        **** 			frameCount = 0;
 778:main.c        **** 			shadeNum++;
 779:main.c        **** 			if(shadeNum >= BLUESHADES_MAX)
 780:main.c        **** 				shadeNum = 0;
 781:main.c        **** 		}
 782:main.c        **** #else
 783:main.c        ****  #if(defined(ALLSHADES_AND_COLORS) && ALLSHADES_AND_COLORS)
 784:main.c        **** 		setRed4(4*rowNum/V_COUNT);
 785:main.c        **** 		setGreen4((16*rowNum/V_COUNT)%4);
 786:main.c        **** 		/*
 787:main.c        **** 		//K, R, G, Y
 788:main.c        **** 		if(rowNum < V_COUNT/4)
 789:main.c        **** 		{
 790:main.c        **** 			noRed();
 791:main.c        **** 			noGreen();
 792:main.c        **** 		}
 793:main.c        **** 		else if(rowNum < 2*V_COUNT/4)
 794:main.c        **** 		{
 795:main.c        **** 			fullRed();
 796:main.c        **** 			noGreen();
 797:main.c        **** 		}
 798:main.c        **** 		else if(rowNum < 3*V_COUNT/4)
 799:main.c        **** 		{
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 153


 800:main.c        **** 			fullGreen();
 801:main.c        **** 			noRed();
 802:main.c        **** 		}
 803:main.c        **** 		else
 804:main.c        **** 		{
 805:main.c        **** 			fullGreen();
 806:main.c        **** 			fullRed();
 807:main.c        **** 		}
 808:main.c        **** 		*/
 809:main.c        ****  #endif
 810:main.c        ****  //Add a little bit of extra delay for calculations...
 811:main.c        ****  #define START_SHADE 0//10 //5 //10
 812:main.c        ****  #define END_SHADE   10//0 //7 //10 //0
 813:main.c        **** 
 814:main.c        ****  #define SHADE_DIR_SIGN ((END_SHADE > START_SHADE) ? +1 : -1)
 815:main.c        ****  #define NUM_SHADES  (((SHADE_DIR_SIGN > 0) ? (END_SHADE-START_SHADE) \
 816:main.c        **** 			 :(START_SHADE-END_SHADE))+1)
 817:main.c        **** 
 818:main.c        **** // Weird... with +0, syncing is way-off (such that the red/green doesn't
 819:main.c        **** // come through *at all*
 820:main.c        **** // and so-forth.
 821:main.c        ****  #define DOTSPERSHADE (DE_ACTIVE_DOTS/(NUM_SHADES+15))
 822:main.c        **** 		int8_t shadeNum;
 823:main.c        **** 
 824:main.c        **** 		DEonly_init();
 825:main.c        **** 
 826:main.c        **** 		for(shadeNum=START_SHADE; shadeNum != (END_SHADE+SHADE_DIR_SIGN);
 827:main.c        **** 				shadeNum+=SHADE_DIR_SIGN)
 828:main.c        **** 		{
 829:main.c        **** 
 830:main.c        **** #endif
 831:main.c        **** 		uint8_t ocr2sa_val;
 832:main.c        **** 		uint8_t ocr2ra_val;
 833:main.c        **** 
 834:main.c        **** 		//Black
 835:main.c        **** //		DE_DotDelay(DOTSPERSHADE);
 836:main.c        **** 
 837:main.c        **** 		//The commented-out cases are those that require wrapping
 838:main.c        **** 		// (e.g. "set" occurs *after* "reset")
 839:main.c        **** 		// They don't seem to work too well, when switching back and forth
 840:main.c        **** /*		switch(shadeNum)
 841:main.c        **** 		{
 842:main.c        **** 			//Black	//these're from DEonly_init();
 843:main.c        **** 			case 0:
 844:main.c        **** 				ocr2sa_val = 1;
 845:main.c        **** 				ocr2ra_val = 4;
 846:main.c        **** 				break;
 847:main.c        **** 			case 1:
 848:main.c        **** 				//4:
 849:main.c        **** 				ocr2sa_val = 0;
 850:main.c        **** 				ocr2ra_val = 4;	
 851:main.c        **** 				break;
 852:main.c        **** //			case 2:
 853:main.c        **** //				//12:
 854:main.c        **** //				ocr2sa_val = 6;
 855:main.c        **** //				ocr2ra_val = 4;	
 856:main.c        **** //				break;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 154


 857:main.c        **** //			case 3:
 858:main.c        **** //				//28:
 859:main.c        **** //				ocr2sa_val = 5;
 860:main.c        **** //				ocr2ra_val = 4;	
 861:main.c        **** //				break;
 862:main.c        **** 			case 2:
 863:main.c        **** 				//32:
 864:main.c        **** 				ocr2sa_val = 1;
 865:main.c        **** 				ocr2ra_val = 5;	
 866:main.c        **** 				break;
 867:main.c        **** 			case 3:
 868:main.c        **** 				//36:
 869:main.c        **** 				ocr2sa_val = 0;
 870:main.c        **** 				ocr2ra_val = 5;	
 871:main.c        **** 				break;
 872:main.c        **** //			case 6:
 873:main.c        **** //				//44:
 874:main.c        **** //				ocr2sa_val = 6;
 875:main.c        **** //				ocr2ra_val = 5;	
 876:main.c        **** //				break;
 877:main.c        **** 			case 4:
 878:main.c        **** 				//48:
 879:main.c        **** 				ocr2sa_val = 1;
 880:main.c        **** 				ocr2ra_val = 6;	
 881:main.c        **** 				break;
 882:main.c        **** 			case 5:
 883:main.c        **** 				//52:
 884:main.c        **** 				ocr2sa_val = 0;
 885:main.c        **** 				ocr2ra_val = 6;	
 886:main.c        **** 				break;
 887:main.c        **** //			case 9:
 888:main.c        **** //				//56:
 889:main.c        **** //				ocr2sa_val = 1;
 890:main.c        **** //				ocr2ra_val = 0;	
 891:main.c        **** //				break;
 892:main.c        **** 			default:
 893:main.c        **** 				//60:
 894:main.c        **** 				ocr2sa_val = 0;
 895:main.c        **** 				ocr2ra_val = 8;	//7 dun woik... all-low
 896:main.c        **** 				break;
 897:main.c        **** 		}
 898:main.c        **** 
 899:main.c        **** 		//DEonly_fromNada();
 900:main.c        **** 	
 901:main.c        **** 		//setbit(PLOCK2, PCNF2);
 902:main.c        **** 
 903:main.c        **** 		lockPSC2();
 904:main.c        **** 		OCR2SAL = ocr2sa_val;
 905:main.c        **** 		OCR2RAL = ocr2ra_val;
 906:main.c        **** 		unlockPSC2();
 907:main.c        **** 		//clrbit(PLOCK2, PCNF2);
 908:main.c        **** */
 909:main.c        **** 		uint8_t newShade = shadeNum; //rowNum*64/V_COUNT) % NUM_SHADES;
 910:main.c        **** 
 911:main.c        **** 		if(newShade <= 3)			//0, 1, 2, 3
 912:main.c        **** 			newShade = newShade;
 913:main.c        **** 		else if(newShade <= 6)   //4->2, 5->1, 6->0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 155


 914:main.c        **** 			newShade = (6-newShade);
 915:main.c        **** 		else
 916:main.c        **** 			newShade = 3;
 917:main.c        **** 
 918:main.c        **** 		setBlue4(newShade);
 919:main.c        **** 
 920:main.c        **** 		DE_DotDelay(DOTSPERSHADE);
 921:main.c        **** 
 922:main.c        **** #if(defined(ALLSHADES_GRADIENT) && ALLSHADES_GRADIENT)
 923:main.c        **** 		}
 924:main.c        ****  #if(defined(ALLSHADES_AND_COLORS) && ALLSHADES_AND_COLORS)
 925:main.c        **** 		setRed4(0); //4*rowNum/V_COUNT);
 926:main.c        **** 		setGreen4(0); //(16*rowNum/V_COUNT)%4);
 927:main.c        ****  #endif
 928:main.c        **** #endif
 929:main.c        **** 		Nada_init(); //fromDEblue();
 930:main.c        **** }
 931:main.c        **** 
 932:main.c        **** #elif (defined(PWM_TESTING) && PWM_TESTING)
 933:main.c        **** 	//No drawPix necessary...
 934:main.c        **** 
 935:main.c        **** #else
 936:main.c        **** //#include "_options/writeColor.c"
 937:main.c        **** //#include "nonRSB_drawPix.c"
 938:main.c        **** void drawPix(uint16_t rowNum)
 939:main.c        **** {
 940:main.c        **** 	//a/o v67, this is used by FRAMEBUFFER_TESTING...
 941:main.c        **** 	//Old:
 942:main.c        **** 	//This hasn't been used in quite some time... 
 943:main.c        **** 	// it may not work at all anymore.
 944:main.c        **** 	nonRSB_drawPix(rowNum);
 3035               		.stabn	68,0,944,.LM449-.LFBB8
 3036               	.LM449:
 3037 0816 8697      		sbiw r24,38
 3038 0818 0E94 0000 		call nonRSB_drawPix
 3039               	.L70:
 3040               	.LBE198:
 3041               	.LBE197:
 3042               	.LBE188:
 3043               	.LBE187:
 3044               		.stabs	"_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c",132,0,0,.Ltext52
 3045               	.Ltext52:
1286:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 3046               		.stabn	68,0,1286,.LM450-.LFBB8
 3047               	.LM450:
 3048 081c 8091 0000 		lds r24,hsyncCount
 3049 0820 9091 0000 		lds r25,hsyncCount+1
 3050 0824 0196      		adiw r24,1
 3051 0826 9093 0000 		sts hsyncCount+1,r25
 3052 082a 8093 0000 		sts hsyncCount,r24
1288:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	{
 3053               		.stabn	68,0,1288,.LM451-.LFBB8
 3054               	.LM451:
 3055 082e 8332      		cpi r24,35
 3056 0830 9105      		cpc r25,__zero_reg__
 3057 0832 01F0      		breq .L72
 3058 0834 00F4      		brsh .L73
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 156


 3059 0836 8330      		cpi r24,3
 3060 0838 9105      		cpc r25,__zero_reg__
 3061 083a 01F4      		brne .L77
1294:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			//clrpinPORT(VSYNC_PIN, VSYNC_PORT);
 3062               		.stabn	68,0,1294,.LM452-.LFBB8
 3063               	.LM452:
 3064 083c 1092 0000 		sts dataEnable,__zero_reg__
1296:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			Vsync_fromNada();
 3065               		.stabn	68,0,1296,.LM453-.LFBB8
 3066               	.LM453:
 3067 0840 21E0      		ldi r18,lo8(1)
 3068 0842 2093 0000 		sts vSync,r18
1297:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
 3069               		.stabn	68,0,1297,.LM454-.LFBB8
 3070               	.LM454:
 3071 0846 AD9A      		sbi 0x15,5
 3072 0848 00C0      		rjmp .L82
 3073               	.L73:
1288:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 	{
 3074               		.stabn	68,0,1288,.LM455-.LFBB8
 3075               	.LM455:
 3076 084a 8632      		cpi r24,38
 3077 084c 9105      		cpc r25,__zero_reg__
 3078 084e 01F0      		breq .L75
 3079 0850 8632      		cpi r24,38
 3080 0852 9340      		sbci r25,3
 3081 0854 01F4      		brne .L77
1316:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		//	break;
 3082               		.stabn	68,0,1316,.LM456-.LFBB8
 3083               	.LM456:
 3084 0856 1092 0000 		sts dataEnable,__zero_reg__
1321:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** #if 0 //(FRAME_COUNT_TO_DELAY != 0)
 3085               		.stabn	68,0,1321,.LM457-.LFBB8
 3086               	.LM457:
 3087 085a 1092 0000 		sts hsyncCount+1,__zero_reg__
 3088 085e 1092 0000 		sts hsyncCount,__zero_reg__
1335:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
 3089               		.stabn	68,0,1335,.LM458-.LFBB8
 3090               	.LM458:
 3091 0862 81E0      		ldi r24,lo8(1)
1336:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 		default:
 3092               		.stabn	68,0,1336,.LM459-.LFBB8
 3093               	.LM459:
 3094 0864 0895      		ret
 3095               	.L72:
1306:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			Nada_fromVsync();
 3096               		.stabn	68,0,1306,.LM460-.LFBB8
 3097               	.LM460:
 3098 0866 1092 0000 		sts vSync,__zero_reg__
1307:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
 3099               		.stabn	68,0,1307,.LM461-.LFBB8
 3100               	.LM461:
 3101 086a AD9A      		sbi 0x15,5
 3102 086c 82E0      		ldi r24,lo8(2)
 3103 086e 90E0      		ldi r25,0
 3104               	.L82:
 3105 0870 9093 6500 		sts 100+1,r25
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 157


 3106 0874 8093 6400 		sts 100,r24
 3107 0878 84E0      		ldi r24,lo8(4)
 3108 087a 90E0      		ldi r25,0
 3109 087c 9FBD      		out 0x2e+1,r25
 3110 087e 8EBD      		out 0x2e,r24
 3111 0880 AD98      		cbi 0x15,5
 3112 0882 00C0      		rjmp .L77
 3113               	.L75:
1311:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 			break;
 3114               		.stabn	68,0,1311,.LM462-.LFBB8
 3115               	.LM462:
 3116 0884 81E0      		ldi r24,lo8(1)
 3117 0886 8093 0000 		sts dataEnable,r24
 3118               	.L77:
1266:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 3119               		.stabn	68,0,1266,.LM463-.LFBB8
 3120               	.LM463:
 3121 088a 80E0      		ldi r24,0
1362:_commonCode_localized/lcdStuff/0.55ncf/lcdStuff.c **** 
 3122               		.stabn	68,0,1362,.LM464-.LFBB8
 3123               	.LM464:
 3124 088c 0895      		ret
 3125               		.size	updateLCD, .-updateLCD
 3126               		.stabs	"frameComplete:r(4,2)",64,0,1266,24
 3127               		.stabn	192,0,0,.LFBB8-.LFBB8
 3128               		.stabn	224,0,0,.Lscope8-.LFBB8
 3129               	.Lscope8:
 3130               		.stabs	"",36,0,0,.Lscope8-.LFBB8
 3131               		.stabd	78,0,0
 3132               		.stabs	"__vector_11:F(0,47)",36,0,343,__vector_11
 3133               	.global	__vector_11
 3134               		.type	__vector_11, @function
 3135               	__vector_11:
 3136               		.stabd	46,0,0
 3137               		.stabs	"main.c",132,0,0,.Ltext53
 3138               	.Ltext53:
 344:main.c        **** #if(defined(_DMS_EXTERNALUPDATE_) && _DMS_EXTERNALUPDATE_)
 3139               		.stabn	68,0,344,.LM465-.LFBB9
 3140               	.LM465:
 3141               	.LFBB9:
 3142 088e 1F92      		push r1
 3143 0890 0F92      		push r0
 3144 0892 0FB6      		in r0,__SREG__
 3145 0894 0F92      		push r0
 3146 0896 1124      		clr __zero_reg__
 3147 0898 2F93      		push r18
 3148 089a 3F93      		push r19
 3149 089c 4F93      		push r20
 3150 089e 5F93      		push r21
 3151 08a0 6F93      		push r22
 3152 08a2 7F93      		push r23
 3153 08a4 8F93      		push r24
 3154 08a6 9F93      		push r25
 3155 08a8 AF93      		push r26
 3156 08aa BF93      		push r27
 3157 08ac EF93      		push r30
 3158 08ae FF93      		push r31
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 158


 3159               	/* prologue: Signal */
 3160               	/* frame size = 0 */
 3161               	/* stack size = 15 */
 3162               	.L__stack_usage = 15
 3163               	.LBB199:
 3164               	.LBB200:
 3165               	.LBB201:
 3166               	.LBB202:
 3167               		.stabs	"./_commonCode_localized/xyTracker/3.05/xyTracker.h",132,0,0,.Ltext54
 3168               	.Ltext54:
   1:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** /* mehPL:
   2:./_commonCode_localized/xyTracker/3.05/xyTracker.h ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:./_commonCode_localized/xyTracker/3.05/xyTracker.h ****  *    I'm not too fond of long licenses at the top of the file.
   4:./_commonCode_localized/xyTracker/3.05/xyTracker.h ****  *    Please see the bottom.
   5:./_commonCode_localized/xyTracker/3.05/xyTracker.h ****  *    Enjoy!
   6:./_commonCode_localized/xyTracker/3.05/xyTracker.h ****  */
   7:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
   8:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
   9:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
  10:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
  11:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //xyTracker 3.05-2
  12:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** // NOTE: run=0 is replaced with run=1. 
  13:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //       rise-sign is determined by rise EXCLUSIVELY
  14:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //         because xyt_next() implies *time* which is always increasing
  15:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //         (thus for rise/run=y/x xyt_next() should be followed by x+=xDir)
  16:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //         (run is now unsigned)
  17:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //         signed values for run are abs()'d but do not change outsign
  18:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //       run has limits abs(run) <= INT32_MAX for certain (TBD)
  19:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //       LIMITS:
  20:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //         rise is 30bits: RISEMAX = 2^30-1 = 1,073,741,823
  21:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //              after dropping the sign... (RISEMIN = -RISEMAX)
  22:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //              so unmolested input values are RISEMIN >= rise >= RISEMAX
  23:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //         run is 31bits: RUNMAX = 2^31-1 = 2,147,483,647
  24:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //              run=0 is replaced with run=1 in order to avoid while-lockup
  25:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //              so unmolested input values are RUNMIN >= run >= RUNMAX
  26:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //       See 0.93 notes and notes in xyt_init/next code.
  27:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //
  28:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** // NOTE!!!
  29:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //   addition of coordStuff (mainly?) increases code size by 300+ bytes!
  30:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //3.05-2 Adding this note: 
  31:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //       TODO: hfm has been modified to remove the need for runningSum
  32:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //             The same could probably be done here
  33:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //             Further: It could reduce necessity for huge integers...
  34:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //             Further: It could handle signedness without outSign... (?)
  35:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //3.05-1 nextOutput now a macro... might as well be inlined
  36:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //3.05 when rise > run we know the base increment...
  37:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //     e.g. rise = 17, run = 5
  38:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //     17/5 = 3 (integer)
  39:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //     no steps will be smaller than 3
  40:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //     Apparently a significant speed improvement (at the cost of size...
  41:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //      nearly 200B)
  42:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //     was 28000 cyc/sec (with other code) now 31600 cyc/sec
  43:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //      (with xyTracker being used in dmsUpdate in Timer0 at 9600Hz)
  44:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //3.00-1 attempting to shrink code-size for threePinIDer47i
  45:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //       a failed attempt at creating _USED makefile options
  46:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //       ended up in 47iUSED...
  47:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //3.00 Working with gotoPoxn3, etc... 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 159


  48:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //     replacing xyt_nextOutput with xyt_update (returns recent change)
  49:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //     Making run sign-stuff and max more... intuitive
  50:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //     removing all signs of signedness in run.
  51:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //     Maximum/Minimum values...
  52:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //.93-1 NOTES Re: 
  53:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //      RUN CANNOT EXCEED (not certain this is the max) INT32_MAX
  54:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //         due to coord_t in xyt_init
  55:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //      THERE MIGHT BE OTHER LIMITS
  56:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //      ALSO: run must always be positive!!! (since outsign is not changed
  57:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //         when negative)
  58:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //.93 using coordStuff now for coord_t
  59:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //    HACK: run=0 would cause a stall in the while-loop
  60:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //    ASSUMED: run=0 means increment to endpoint immediately (next update)
  61:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //      e.g. run = 1
  62:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //    I can't imagine a case where I'd WANT it to stall...
  63:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //.92 rise > run NOW OK (but ONLY SLIGHTLY slower)
  64:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //    using while() instead of if()
  65:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //    For motions, however, it should probably still be rise<run
  66:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //    (since the motor has to keep up... then again...
  67:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //     near should take care of that for SMALL abs(rise-run))
  68:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //.91-7 runningSum remainder
  69:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //.91-6 notes re: rise vs. run
  70:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //.91-5 clearing "Anonymous Struct" error with g++ (working with glTest)
  71:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //.91-4 cleaning up comparisons between signed and unsigned...
  72:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //Doh//.91-3 fix abs mistake in xytInit... (VERY unlikely, but let's fix it)
  73:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //#warning "xyT.91 has no necessary changes?!"
  74:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //#warning "no, output is always same-sign as rise since run is always /incremented/ once, 
  75:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //actual value is inc/decremented externally... x(t), y(t) rather than y(x)..."
  76:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //.91-2 minor cleanup, annoying warning removal
  77:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //.91-1 dividend/divisor -> rise/run
  78:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //.91 runningSum addition error fix (secondary-axis direction fix) 
  79:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //.90 stolen from hfModulation 0.92.2
  80:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //---------
  81:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //.92 added makefile, updated bithandling...
  82:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //.91cf moved to _common from MotorDriver11
  83:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //.91 stepNum implemented
  84:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //.90 Stolen from heartbeat .95
  85:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
  86:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** #ifndef __XYTRACKER_H__
  87:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** #define __XYTRACKER_H__
  88:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
  89:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** #include <inttypes.h>
  90:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** #include _COORDSTUFF_HEADER_
  91:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
  92:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
  93:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** /*	basically:
  94:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	given m (deltaY/deltaX), the output (y) is incremented/decremented 
  95:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	as appropriate given a trigger to update...
  96:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	
  97:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	e.g.
  98:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	deltaY = 5
  99:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	deltaX = 7
 100:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	
 101:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	first update:
 102:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	runningSum = 5
 103:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	run = 7
 104:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	5 < 7
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 160


 105:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	out = 0
 106:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	
 107:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	second:
 108:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	rS += 5 // = 10
 109:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	run = 7
 110:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	10 > 7
 111:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	rS -= 7	// = 10-7 = 3
 112:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** ?	(is there any case where 7 might go into rS twice?)
 113:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	out++	// = 1
 114:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
 115:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	third:
 116:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	rS += 5 // = 3+5 = 8
 117:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	8>7
 118:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	rS -= 7	//	8-7 = 1
 119:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	out++	// = 2
 120:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	
 121:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	fourth:
 122:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	rS += 5	// = 1+5 = 6
 123:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	6 < 7
 124:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	out		// = 2 no change
 125:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	
 126:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	fifth:
 127:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	rS += 5	// = 6+5 = 11
 128:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	11 > 7
 129:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	rS -= 7	// 11-7=4
 130:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	out++	// = 3
 131:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	
 132:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	sixth:
 133:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	rS += 5	// = 4+5 = 9
 134:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	9 > 7
 135:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	rS -= 7	// = 9-7 = 2
 136:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	out++	// = 4
 137:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	
 138:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	seventh:
 139:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	rS += 5	// = 2+5 = 7
 140:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	7 = 7
 141:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	rS -= 7	// = 7-7 = 0
 142:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	//Don't stop just because rS = 0, what if 4/8?...
 143:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	out++	// = 5
 144:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	
 145:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	
 146:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	in general:
 147:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	update:
 148:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	runningSum += rise;
 149:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	if(runningSum >= run)
 150:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 		runningSum -= run;
 151:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 		output += outSign;
 152:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 		
 153:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** */
 154:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
 155:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //"Anonymous structs" are not allowed in g++
 156:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** // This isn't necessary for gcc, but it shouldn't hurt
 157:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** // ("_XYTSTRUCTRECORD" won't be used anywhere)
 158:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** typedef volatile struct _XYTSTRUCTRECORD
 159:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** {
 160:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	ucoord_t runningSum;
 161:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	coord_t incrementBase; // for rise>run this is floor(rise/run)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 161


 162:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	//rise and run are unsigned for efficiency since they're initted in init
 163:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	// Also to assure no overflows in math
 164:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	ucoord_t rise;		// 30bits, max
 165:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	// RISE IS NOW the rise-difference 
 166:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	// e.g. riseSetup=17, run=5
 167:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	// rise(Here) = 2 (incrementBase=floor(17/5)=3 riseHere=riseSetup-3*5
 168:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	ucoord_t run;		// 31bits, max
 169:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	int8_t outSign;         // sign of inc/decrement of the output
 170:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	coord_t output;			// current output of the division process...
 171:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** }  xyt_t;
 172:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
 173:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
 174:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //This value (+/-) is safe to use for both rise and run
 175:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** // xyt_init limits inputs safely, 
 176:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //   but could destroy math/motion that called it
 177:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** #define XYT_MAX (((uint32_t)1<<30)-1)
 178:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
 179:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** #define XYT_RISE_MAX XYT_MAX
 180:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** #define XYT_RISE_MIN (-XYT_MAX)
 181:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
 182:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** #define XYT_RUN_MAX (((uint32_t)1<<31)-1)
 183:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** #define XYT_RUN_MIN 1
 184:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
 185:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //Intentional redefinitions:
 186:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** #define COORD_MAX XYT_MAX
 187:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** #define COORD_MIN (-XYT_MAX)
 188:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
 189:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** // Rise is signed... Run is UNSIGNED (see notes and definitions above)
 190:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** // out-of-range values are limited as above and 0x01 is ored with 0x02
 191:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //  to indicate run or rise limited, respectively
 192:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** uint8_t xyt_init(xyt_t *line, coord_t rise, ucoord_t run);
 193:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
 194:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** //Calculates the next output...
 195:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** // Returns the dY value (the amount of change in this call)
 196:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** coord_t xyt_update(xyt_t *line);
 197:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
 198:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
 199:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** static __inline__ \
 200:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** coord_t xyt_nextOutput(xyt_t *line) 
 201:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 									__attribute__((__always_inline__));
 202:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 
 203:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** __inline__ \
 204:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** coord_t xyt_nextOutput(xyt_t *line)
 205:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** {
 206:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	xyt_update(line);
 3169               		.stabn	68,0,206,.LM466-.LFBB9
 3170               	.LM466:
 3171 08b0 80E0      		ldi r24,lo8(dmsLine)
 3172 08b2 90E0      		ldi r25,hi8(dmsLine)
 3173 08b4 0E94 0000 		call xyt_update
 207:./_commonCode_localized/xyTracker/3.05/xyTracker.h **** 	return line->output;
 3174               		.stabn	68,0,207,.LM467-.LFBB9
 3175               	.LM467:
 3176 08b8 8091 0000 		lds r24,dmsLine+17
 3177 08bc 9091 0000 		lds r25,dmsLine+17+1
 3178 08c0 A091 0000 		lds r26,dmsLine+17+2
 3179 08c4 B091 0000 		lds r27,dmsLine+17+3
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 162


 3180               	.LBE202:
 3181               	.LBE201:
 3182               		.stabs	"./_commonCode_localized/dmsTimer/1.13/dmsExternal.h",132,0,0,.Ltext55
 3183               	.Ltext55:
   1:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** /* mehPL:
   2:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h ****  *    I'm not too fond of long licenses at the top of the file.
   4:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h ****  *    Please see the bottom.
   5:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h ****  *    Enjoy!
   6:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h ****  */
   7:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
   8:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
   9:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
  10:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
  11:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** #ifndef __DMS_EXTERNAL_H__
  12:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** #define __DMS_EXTERNAL_H__
  13:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** extern volatile uint32_t dmsCount;	//deci-milliseconds
  14:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
  15:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** #if (!defined(DMS_FRAC_UNUSED) || !DMS_FRAC_UNUSED)
  16:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** extern volatile uint8_t dmsFrac;
  17:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** #endif
  18:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
  19:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** //These WERE specific to externalUpdate, 
  20:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** // however they can also be used for dmsFrac with timer0 interrupt
  21:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** // (Along with dmsFrac, below)
  22:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** // Also with nonAVR code, where us is read directly...
  23:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** //   these defaults are changed in init functions
  24:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** //   (defaults correspond to us-reading)
  25:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** // a/o 1.12: Apparently these were a remnant of pre-xyt times...
  26:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** //           Though, as stated above, they are usable by dmsFrac
  27:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** //           So remove them if dmsFrac is disabled!
  28:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** #if (!defined(DMS_FRAC_UNUSED) || !DMS_FRAC_UNUSED)
  29:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** extern uint8_t dmsNumUpdates; 
  30:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** extern uint8_t dmsIncrementSize;
  31:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** #endif
  32:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
  33:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** //Fractional part of the last-read dmsTime...
  34:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** // This'll likely be handled differently in different cases
  35:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** // for now it's only implemented in NON-AVR code or AVR code based on
  36:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** // timer interrupt 0 (untested)
  37:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** //volatile uint8_t dmsFrac = 0;
  38:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
  39:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
  40:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** //DMS timer is updated spurradically by an externally-defined source...
  41:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** extern xyt_t dmsLine;
  42:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
  43:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** //__inline__ prefix might be unnecessary since the prototype includes it
  44:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** __inline__ \
  45:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** void init_dmsExternalUpdate(uint32_t numUpdates, uint32_t incrementSize)
  46:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** {
  47:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** #if (!defined(DMS_FRAC_UNUSED) || !DMS_FRAC_UNUSED)
  48:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
  49:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** //This is the result of 1.12-1:
  50:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** // which was developed with FRAC_UNUSED...
  51:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** // an easy option would be to step back to 1.12
  52:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** // OR replace dmsNumUpdates and dmsIncrementSize with uint32_t's.
  53:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** // Alternatively (memory limited?) do some divisions here...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 163


  54:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** #error "DMS_FRAC was unused a/o the creation of this version"
  55:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** #error "numUpdates and/or incrementSize > UINT8_MAX will be destroyed!"
  56:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** #error "It's an easy fix, see notes in this file"
  57:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
  58:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 	dmsIncrementSize = incrementSize;
  59:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 	//one less than the actual count since it counts from 0...
  60:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 	dmsNumUpdates = numUpdates;
  61:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** #endif
  62:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
  63:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** //#warning "xyt requires incrementSize < numUpdates!"
  64:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 	xyt_init(&dmsLine, incrementSize, numUpdates);
  65:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** }
  66:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
  67:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** //__inline__ prefix might be unnecessary since the prototype includes it
  68:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** __inline__ \
  69:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** void dms_update(void)
  70:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** {
  71:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** //	static uint8_t counter = 0;
  72:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** //	static dms4day_t lastTime;
  73:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
  74:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** //	lastTime = dmsCount;
  75:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 
  76:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** 	dmsCount=xyt_nextOutput(&dmsLine);	
 3184               		.stabn	68,0,76,.LM468-.LFBB9
 3185               	.LM468:
 3186 08c8 8093 0000 		sts dmsCount,r24
 3187 08cc 9093 0000 		sts dmsCount+1,r25
 3188 08d0 A093 0000 		sts dmsCount+2,r26
 3189 08d4 B093 0000 		sts dmsCount+3,r27
 3190               	.LBE200:
 3191               	.LBE199:
 3192               		.stabs	"main.c",132,0,0,.Ltext56
 3193               	.Ltext56:
 349:main.c        **** 		 return;
 3194               		.stabn	68,0,349,.LM469-.LFBB9
 3195               	.LM469:
 3196 08d8 8091 0000 		lds r24,updateFrame
 3197 08dc 8823      		tst r24
 3198 08de 01F0      		breq .L83
 372:main.c        **** 	{
 3199               		.stabn	68,0,372,.LM470-.LFBB9
 3200               	.LM470:
 3201 08e0 0E94 0000 		call updateLCD
 3202 08e4 8823      		tst r24
 3203 08e6 01F0      		breq .L83
 374:main.c        **** 		//updateLCD() returns TRUE when the frame is complete
 3204               		.stabn	68,0,374,.LM471-.LFBB9
 3205               	.LM471:
 3206 08e8 8091 0000 		lds r24,frameCount
 3207 08ec 8F5F      		subi r24,lo8(-(1))
 3208 08ee 8093 0000 		sts frameCount,r24
 3209               	.L83:
 3210               	/* epilogue start */
 402:main.c        **** #endif //!PWM_TESTING
 3211               		.stabn	68,0,402,.LM472-.LFBB9
 3212               	.LM472:
 3213 08f2 FF91      		pop r31
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 164


 3214 08f4 EF91      		pop r30
 3215 08f6 BF91      		pop r27
 3216 08f8 AF91      		pop r26
 3217 08fa 9F91      		pop r25
 3218 08fc 8F91      		pop r24
 3219 08fe 7F91      		pop r23
 3220 0900 6F91      		pop r22
 3221 0902 5F91      		pop r21
 3222 0904 4F91      		pop r20
 3223 0906 3F91      		pop r19
 3224 0908 2F91      		pop r18
 3225 090a 0F90      		pop r0
 3226 090c 0FBE      		out __SREG__,r0
 3227 090e 0F90      		pop r0
 3228 0910 1F90      		pop r1
 3229 0912 1895      		reti
 3230               		.size	__vector_11, .-__vector_11
 3231               	.Lscope9:
 3232               		.stabs	"",36,0,0,.Lscope9-.LFBB9
 3233               		.stabd	78,0,0
 3234               		.stabs	"init_hsyncTimer:F(0,47)",36,0,21,init_hsyncTimer
 3235               	.global	init_hsyncTimer
 3236               		.type	init_hsyncTimer, @function
 3237               	init_hsyncTimer:
 3238               		.stabd	46,0,0
 3239               		.stabs	"hsyncTimerStuff.c",132,0,0,.Ltext57
 3240               	.Ltext57:
   1:hsyncTimerStuff.c **** /* mehPL:
   2:hsyncTimerStuff.c ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:hsyncTimerStuff.c ****  *    I'm not too fond of long licenses at the top of the file.
   4:hsyncTimerStuff.c ****  *    Please see the bottom.
   5:hsyncTimerStuff.c ****  *    Enjoy!
   6:hsyncTimerStuff.c ****  */
   7:hsyncTimerStuff.c **** 
   8:hsyncTimerStuff.c **** 
   9:hsyncTimerStuff.c **** 
  10:hsyncTimerStuff.c **** 
  11:hsyncTimerStuff.c **** 
  12:hsyncTimerStuff.c **** 
  13:hsyncTimerStuff.c **** //hsyncTimer is used for timing each LCD row.
  14:hsyncTimerStuff.c **** // Please see hsyncTimerStuff.h for implementation notes.
  15:hsyncTimerStuff.c **** 
  16:hsyncTimerStuff.c **** #include "hsyncTimerStuff.h"
  17:hsyncTimerStuff.c **** 
  18:hsyncTimerStuff.c **** //Testing with values returned by hsyncTimerCalculator
  19:hsyncTimerStuff.c **** //#define HSYNC_TIMER_OCRVAL	65
  20:hsyncTimerStuff.c **** 
  21:hsyncTimerStuff.c **** void init_hsyncTimer(void)
  22:hsyncTimerStuff.c **** {
 3241               		.stabn	68,0,22,.LM473-.LFBB10
 3242               	.LM473:
 3243               	.LFBB10:
 3244               	/* prologue: function */
 3245               	/* frame size = 0 */
 3246               	/* stack size = 0 */
 3247               	.L__stack_usage = 0
  23:hsyncTimerStuff.c ****    HSYNC_TIMER_OCR = HSYNC_TIMER_OCRVAL; 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 165


 3248               		.stabn	68,0,23,.LM474-.LFBB10
 3249               	.LM474:
 3250 0914 85E0      		ldi r24,lo8(5)
 3251 0916 98E0      		ldi r25,lo8(8)
 3252 0918 9093 8D00 		sts 140+1,r25
 3253 091c 8093 8C00 		sts 140,r24
  24:hsyncTimerStuff.c **** 							//T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC;
  25:hsyncTimerStuff.c ****    timer_setWGM(HSYNC_TIMER_NUM, WGM_CLR_ON_COMPARE);
 3254               		.stabn	68,0,25,.LM475-.LFBB10
 3255               	.LM475:
 3256 0920 62E0      		ldi r22,lo8(2)
 3257 0922 81E0      		ldi r24,lo8(1)
 3258 0924 0E94 0000 		call timer_setWGM
  26:hsyncTimerStuff.c ****    timer_selectDivisor(HSYNC_TIMER_NUM, HSYNC_TIMER_CLKDIV); //CLKDIV1);
 3259               		.stabn	68,0,26,.LM476-.LFBB10
 3260               	.LM476:
 3261 0928 60E0      		ldi r22,0
 3262 092a 81E0      		ldi r24,lo8(1)
 3263 092c 0E94 0000 		call timer_selectDivisor
  27:hsyncTimerStuff.c ****    timer_compareMatchIntEnable(HSYNC_TIMER_NUM, OUT_CHANNELA);
 3264               		.stabn	68,0,27,.LM477-.LFBB10
 3265               	.LM477:
 3266 0930 41E0      		ldi r20,lo8(1)
 3267 0932 60E0      		ldi r22,0
 3268 0934 81E0      		ldi r24,lo8(1)
 3269 0936 0C94 0000 		jmp timer_compareMatchIntSetup
 3270               		.size	init_hsyncTimer, .-init_hsyncTimer
 3271               	.Lscope10:
 3272               		.stabs	"",36,0,0,.Lscope10-.LFBB10
 3273               		.stabd	78,0,0
 3274               		.stabs	"isNewFrame:F(4,2)",36,0,950,isNewFrame
 3275               	.global	isNewFrame
 3276               		.type	isNewFrame, @function
 3277               	isNewFrame:
 3278               		.stabd	46,0,0
 3279               		.stabs	"main.c",132,0,0,.Ltext58
 3280               	.Ltext58:
 945:main.c        **** }
 946:main.c        **** #endif
 947:main.c        **** #endif
 948:main.c        **** 
 949:main.c        **** 
 950:main.c        **** uint8_t isNewFrame(void)
 951:main.c        **** {
 3281               		.stabn	68,0,951,.LM478-.LFBB11
 3282               	.LM478:
 3283               	.LFBB11:
 3284               	/* prologue: function */
 3285               	/* frame size = 0 */
 3286               	/* stack size = 0 */
 3287               	.L__stack_usage = 0
 952:main.c        **** 	uint8_t newFrame = FALSE;
 953:main.c        **** 
 954:main.c        **** 	static uint8_t lastFrameCount = 0;
 955:main.c        **** #define FRAME_COUNT_LIMIT 0x03
 956:main.c        **** 	uint8_t thisFrameCount = frameCount&FRAME_COUNT_LIMIT;
 3288               		.stabn	68,0,956,.LM479-.LFBB11
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 166


 3289               	.LM479:
 3290 093a 9091 0000 		lds r25,frameCount
 3291 093e 9370      		andi r25,lo8(3)
 957:main.c        **** 
 958:main.c        **** //		if(( (thisFrameCount==0) && (lastFrameCount==FRAME_COUNT_LIMIT) ))
 959:main.c        **** 	if(thisFrameCount != lastFrameCount)
 3292               		.stabn	68,0,959,.LM480-.LFBB11
 3293               	.LM480:
 3294 0940 81E0      		ldi r24,lo8(1)
 3295 0942 2091 0000 		lds r18,lastFrameCount.2222
 3296 0946 9213      		cpse r25,r18
 3297 0948 00C0      		rjmp .L92
 3298 094a 80E0      		ldi r24,0
 3299               	.L92:
 960:main.c        **** 		newFrame = TRUE;
 961:main.c        **** 
 962:main.c        **** 	lastFrameCount = thisFrameCount;
 3300               		.stabn	68,0,962,.LM481-.LFBB11
 3301               	.LM481:
 3302 094c 9093 0000 		sts lastFrameCount.2222,r25
 963:main.c        **** 
 964:main.c        **** 	return newFrame;
 965:main.c        **** }
 3303               		.stabn	68,0,965,.LM482-.LFBB11
 3304               	.LM482:
 3305 0950 0895      		ret
 3306               		.size	isNewFrame, .-isNewFrame
 3307               		.stabs	"lastFrameCount:V(4,2)",38,0,954,lastFrameCount.2222
 3308               		.stabs	"thisFrameCount:r(4,2)",64,0,956,25
 3309               		.stabn	192,0,0,.LFBB11-.LFBB11
 3310               		.stabn	224,0,0,.Lscope11-.LFBB11
 3311               	.Lscope11:
 3312               		.stabs	"",36,0,0,.Lscope11-.LFBB11
 3313               		.stabd	78,0,0
 3314               		.stabs	"frameBufferUpdate:F(0,47)",36,0,132,frameBufferUpdate
 3315               	.global	frameBufferUpdate
 3316               		.type	frameBufferUpdate, @function
 3317               	frameBufferUpdate:
 3318               		.stabd	46,0,0
 3319               		.stabs	"./_options/frameBuffer.c",132,0,0,.Ltext59
 3320               	.Ltext59:
 115:./_options/frameBuffer.c **** 	}
 116:./_options/frameBuffer.c **** }
 117:./_options/frameBuffer.c **** 
 118:./_options/frameBuffer.c **** #define frameBufferSet(row, col, color) \
 119:./_options/frameBuffer.c **** 				frameBufferChange(NULL, (row), (col), (color))
 120:./_options/frameBuffer.c **** 
 121:./_options/frameBuffer.c **** 
 122:./_options/frameBuffer.c **** #if(defined(FB_SMILEY) && FB_SMILEY)
 123:./_options/frameBuffer.c **** #include "_options/smiley.c"
 124:./_options/frameBuffer.c **** #endif
 125:./_options/frameBuffer.c **** 
 126:./_options/frameBuffer.c **** // This code was in main...
 127:./_options/frameBuffer.c **** // This isn't generalized enough to justify this function-name
 128:./_options/frameBuffer.c **** // just not ready to delete it completely
 129:./_options/frameBuffer.c **** // Returns TRUE if there's a change to the frameBuffer image
 130:./_options/frameBuffer.c **** // (so a refresh can be scheduled, if so desired)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 167


 131:./_options/frameBuffer.c **** 
 132:./_options/frameBuffer.c **** void frameBufferUpdate(void)
 133:./_options/frameBuffer.c **** {
 3321               		.stabn	68,0,133,.LM483-.LFBB12
 3322               	.LM483:
 3323               	.LFBB12:
 3324               	/* prologue: function */
 3325               	/* frame size = 0 */
 3326               	/* stack size = 0 */
 3327               	.L__stack_usage = 0
 134:./_options/frameBuffer.c ****  #if(defined(FB_REFRESH_ON_CHANGE) && FB_REFRESH_ON_CHANGE)
 135:./_options/frameBuffer.c ****       static uint8_t lastUpdated = FALSE;
 136:./_options/frameBuffer.c ****       static dms4day_t fbLastUpdateTime = 0;
 137:./_options/frameBuffer.c **** 
 138:./_options/frameBuffer.c ****       //Because the dmsTimer is running somewhat arbitarily, this "200ms"
 139:./_options/frameBuffer.c ****       // isn't particularly accurate...
 140:./_options/frameBuffer.c ****       if(updateFrame)
 141:./_options/frameBuffer.c ****          fbLastUpdateTime = dmsGetTime();
 142:./_options/frameBuffer.c ****       else  //!updateFrame
 143:./_options/frameBuffer.c ****       {
 144:./_options/frameBuffer.c ****          if(dmsIsItTime(&fbLastUpdateTime, 100*DMS_MS))
 145:./_options/frameBuffer.c ****          {
 146:./_options/frameBuffer.c ****             if(fb_updater())
 147:./_options/frameBuffer.c ****             {
 148:./_options/frameBuffer.c ****                updateFrame = TRUE;
 149:./_options/frameBuffer.c ****                lastUpdated = TRUE;
 150:./_options/frameBuffer.c ****             }
 151:./_options/frameBuffer.c ****          }
 152:./_options/frameBuffer.c ****          //Attempt to get double-refresh on stationary images
 153:./_options/frameBuffer.c ****          // to overcome the previous image
 154:./_options/frameBuffer.c ****          else if(lastUpdated)
 155:./_options/frameBuffer.c ****          {
 156:./_options/frameBuffer.c ****             updateFrame = TRUE;
 157:./_options/frameBuffer.c ****             lastUpdated = FALSE;
 158:./_options/frameBuffer.c ****          }
 159:./_options/frameBuffer.c ****       }
 160:./_options/frameBuffer.c ****  #else
 161:./_options/frameBuffer.c ****       if(isNewFrame())
 3328               		.stabn	68,0,161,.LM484-.LFBB12
 3329               	.LM484:
 3330 0952 0E94 0000 		call isNewFrame
 3331 0956 8111      		cpse r24,__zero_reg__
 162:./_options/frameBuffer.c ****       {
 163:./_options/frameBuffer.c ****          fb_updater();
 3332               		.stabn	68,0,163,.LM485-.LFBB12
 3333               	.LM485:
 3334 0958 0C94 0000 		jmp smileyUpdate
 3335               	.L93:
 3336 095c 0895      		ret
 3337               		.size	frameBufferUpdate, .-frameBufferUpdate
 3338               	.Lscope12:
 3339               		.stabs	"",36,0,0,.Lscope12-.LFBB12
 3340               		.stabd	78,0,0
 3341               		.section	.text.startup,"ax",@progbits
 3342               		.stabs	"main:F(0,1)",36,0,988,main
 3343               	.global	main
 3344               		.type	main, @function
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 168


 3345               	main:
 3346               		.stabd	46,0,0
 3347               		.stabs	"main.c",132,0,0,.Ltext60
 3348               	.Ltext60:
 966:main.c        **** 
 967:main.c        **** 
 968:main.c        **** 
 969:main.c        **** #if(defined(FB_REFRESH_ON_CHANGE) && FB_REFRESH_ON_CHANGE)
 970:main.c        **** //For FB_QUESTION, FB_SMILEY, etc. it might be nice to only refresh when 
 971:main.c        **** // the actual image changes...
 972:main.c        **** // This is revisited from _unusedIdeas/frameCountToDelay.c
 973:main.c        **** void endOfFrameHandler(void)
 974:main.c        **** {
 975:main.c        **** 	//The original plan was to stop the timer, but now that is used by
 976:main.c        **** 	//dmsTimer... so instead:
 977:main.c        **** 	updateFrame = FALSE;
 978:main.c        **** }
 979:main.c        **** #else
 980:main.c        **** //See the declaration, above...
 981:main.c        **** void endOfFrameHandler(void)
 982:main.c        **** {
 983:main.c        **** }
 984:main.c        **** #endif
 985:main.c        **** 
 986:main.c        **** 
 987:main.c        **** 
 988:main.c        **** int main(void)
 989:main.c        **** {
 3349               		.stabn	68,0,989,.LM486-.LFBB13
 3350               	.LM486:
 3351               	.LFBB13:
 3352               	/* prologue: function */
 3353               	/* frame size = 0 */
 3354               	/* stack size = 0 */
 3355               	.L__stack_usage = 0
 3356               	.LBB203:
 3357               	.LBB204:
 3358               		.stabs	"./_commonCode_localized/dmsTimer/1.13/dmsExternal.h",132,0,0,.Ltext61
 3359               	.Ltext61:
  64:./_commonCode_localized/dmsTimer/1.13/dmsExternal.h **** }
 3360               		.stabn	68,0,64,.LM487-.LFBB13
 3361               	.LM487:
 3362 0000 01E0      		ldi r16,lo8(1)
 3363 0002 10E0      		ldi r17,0
 3364 0004 20E0      		ldi r18,0
 3365 0006 30E0      		ldi r19,0
 3366 0008 41E0      		ldi r20,lo8(1)
 3367 000a 50E0      		ldi r21,0
 3368 000c 60E0      		ldi r22,0
 3369 000e 70E0      		ldi r23,0
 3370 0010 80E0      		ldi r24,lo8(dmsLine)
 3371 0012 90E0      		ldi r25,hi8(dmsLine)
 3372 0014 0E94 0000 		call xyt_init
 3373               	.LBE204:
 3374               	.LBE203:
 3375               		.stabs	"main.c",132,0,0,.Ltext62
 3376               	.Ltext62:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 169


 990:main.c        **** 
 991:main.c        **** 
 992:main.c        **** #if(defined(SEG_RACER) && SEG_RACER)
 993:main.c        **** 	racer_init();
 994:main.c        **** #endif
 995:main.c        **** 
 996:main.c        **** #if (defined(BLUE_ADC) && BLUE_ADC)
 997:main.c        **** 	adc_takeInput(6);
 998:main.c        **** 	adc_init();
 999:main.c        **** 	adc_select(6);
1000:main.c        **** #endif
1001:main.c        **** 
1002:main.c        **** 
1003:main.c        **** #if (defined(FB_QUESTION) && FB_QUESTION)
1004:main.c        **** 	//This is identical to the BLUE_ADC case, above, but the adc is used
1005:main.c        **** 	//differently... and I'm trying to do some cleanup, which is more messy
1006:main.c        **** 	//here, because of it. Wee!
1007:main.c        **** 
1008:main.c        **** 	//Actually, it runs adc_startConversion() at the end, so it's no longer
1009:main.c        **** 	//*identical*
1010:main.c        **** 	phd_init();
1011:main.c        **** #endif
1012:main.c        **** 
1013:main.c        **** #if(defined(SEG_TET) && SEG_TET)
1014:main.c        **** 	tetInit(3);
1015:main.c        **** #endif
1016:main.c        **** 
1017:main.c        **** #if(defined(_DMS_EXTERNALUPDATE_) && _DMS_EXTERNALUPDATE_)
1018:main.c        **** 	//These values could probably be calculated...
1019:main.c        **** 	// (as long as OSCCAL_VAL isn't changed)
1020:main.c        **** 	// But I'm going on the fact, it's refreshing about 8Hz
1021:main.c        **** 	// and there's roughly 768 rows (HSYNC interrupts)
1022:main.c        **** 	// (of course, there's vsync rows, too)
1023:main.c        **** 	// so... that's about .000125s per HSYNC interrupt
1024:main.c        **** 	// or 8000 interrupts per second
1025:main.c        **** 	// Which is roughly 1dms per interrupt...
1026:main.c        **** 	init_dmsExternalUpdate(1,1);
1027:main.c        **** #endif
1028:main.c        **** 
1029:main.c        **** 
1030:main.c        **** 
1031:main.c        **** #if(!defined(PWM_TESTING) || !PWM_TESTING)
1032:main.c        **** 	init_hsyncTimer();
 3377               		.stabn	68,0,1032,.LM488-.LFBB13
 3378               	.LM488:
 3379 0018 0E94 0000 		call init_hsyncTimer
1033:main.c        **** #endif
1034:main.c        **** 
1035:main.c        **** 	//This starts pretty late... watch out for WDT
1036:main.c        **** 	init_heartBeat();
 3380               		.stabn	68,0,1036,.LM489-.LFBB13
 3381               	.LM489:
 3382 001c 0E94 0000 		call init_heartBeat
1037:main.c        **** 
1038:main.c        **** 	setHeartRate(0);
 3383               		.stabn	68,0,1038,.LM490-.LFBB13
 3384               	.LM490:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 170


 3385 0020 80E0      		ldi r24,0
 3386 0022 0E94 0000 		call setHeartRate
1039:main.c        **** 
1040:main.c        **** 	lvds_timerInit();
 3387               		.stabn	68,0,1040,.LM491-.LFBB13
 3388               	.LM491:
 3389 0026 0E94 0000 		call lvds_timerInit
 3390               	.L96:
1041:main.c        **** 
1042:main.c        **** 
1043:main.c        **** 
1044:main.c        **** 	while(1)
1045:main.c        **** 	{
1046:main.c        **** #if(defined(FB_QUESTION) && FB_QUESTION)
1047:main.c        **** 		if(phd_update())				
1048:main.c        **** 			fbQuestion_hitDetected();
1049:main.c        **** #endif
1050:main.c        **** 
1051:main.c        **** 
1052:main.c        **** //#if( (defined(FB_QUESTION) && FB_QUESTION) \
1053:main.c        **** //	  ||	(defined(FB_SMILEY) && FB_SMILEY) )
1054:main.c        **** #if( defined(FRAMEBUFFER_TESTING) && (FRAMEBUFFER_TESTING))
1055:main.c        **** 		frameBufferUpdate();
 3391               		.stabn	68,0,1055,.LM492-.LFBB13
 3392               	.LM492:
 3393 002a 0E94 0000 		call frameBufferUpdate
1056:main.c        **** #endif
1057:main.c        **** 
1058:main.c        **** 		heartUpdate();
 3394               		.stabn	68,0,1058,.LM493-.LFBB13
 3395               	.LM493:
 3396 002e 0E94 0000 		call heartUpdate
 3397 0032 00C0      		rjmp .L96
 3398               		.size	main, .-main
 3399               	.Lscope13:
 3400               		.stabs	"",36,0,0,.Lscope13-.LFBB13
 3401               		.stabd	78,0,0
 3402               		.local	lastFrameCount.2222
 3403               		.comm	lastFrameCount.2222,1,1
 3404               		.data
 3405               		.type	pimage.2141, @object
 3406               		.size	pimage.2141, 2
 3407               	pimage.2141:
 3408 0000 0000      		.word	pgm_image1
 3409               		.local	imageNum.2142
 3410               		.comm	imageNum.2142,1,1
 3411               		.local	colorShift.2144
 3412               		.comm	colorShift.2144,1,1
 3413               		.local	updateCount.2143
 3414               		.comm	updateCount.2143,2,1
 3415               	.global	frameCount
 3416               		.section .bss
 3417               		.type	frameCount, @object
 3418               		.size	frameCount, 1
 3419               	frameCount:
 3420 0000 00        		.zero	1
 3421               	.global	updateFrame
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 171


 3422               		.data
 3423               		.type	updateFrame, @object
 3424               		.size	updateFrame, 1
 3425               	updateFrame:
 3426 0002 01        		.byte	1
 3427               	.global	hsyncCount
 3428               		.section .bss
 3429               		.type	hsyncCount, @object
 3430               		.size	hsyncCount, 2
 3431               	hsyncCount:
 3432 0001 0000      		.zero	2
 3433               	.global	vSync
 3434               		.type	vSync, @object
 3435               		.size	vSync, 1
 3436               	vSync:
 3437 0003 00        		.zero	1
 3438               	.global	dataEnable
 3439               		.type	dataEnable, @object
 3440               		.size	dataEnable, 1
 3441               	dataEnable:
 3442 0004 00        		.zero	1
 3443               	.global	pgm_image2
 3444               		.section	.progmem.data,"a",@progbits
 3445               		.type	pgm_image2, @object
 3446               		.size	pgm_image2, 256
 3447               	pgm_image2:
 3448 0000 C0        		.byte	-64
 3449 0001 C0        		.byte	-64
 3450 0002 C0        		.byte	-64
 3451 0003 C0        		.byte	-64
 3452 0004 C0        		.byte	-64
 3453 0005 00        		.byte	0
 3454 0006 00        		.byte	0
 3455 0007 00        		.byte	0
 3456 0008 00        		.byte	0
 3457 0009 00        		.byte	0
 3458 000a 00        		.byte	0
 3459 000b C0        		.byte	-64
 3460 000c C0        		.byte	-64
 3461 000d C0        		.byte	-64
 3462 000e C0        		.byte	-64
 3463 000f C0        		.byte	-64
 3464 0010 C0        		.byte	-64
 3465 0011 C0        		.byte	-64
 3466 0012 C0        		.byte	-64
 3467 0013 00        		.byte	0
 3468 0014 00        		.byte	0
 3469 0015 0F        		.byte	15
 3470 0016 0F        		.byte	15
 3471 0017 0F        		.byte	15
 3472 0018 0F        		.byte	15
 3473 0019 0F        		.byte	15
 3474 001a 0F        		.byte	15
 3475 001b 00        		.byte	0
 3476 001c 00        		.byte	0
 3477 001d C0        		.byte	-64
 3478 001e C0        		.byte	-64
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 172


 3479 001f C0        		.byte	-64
 3480 0020 C0        		.byte	-64
 3481 0021 C0        		.byte	-64
 3482 0022 00        		.byte	0
 3483 0023 00        		.byte	0
 3484 0024 0F        		.byte	15
 3485 0025 0F        		.byte	15
 3486 0026 0F        		.byte	15
 3487 0027 0F        		.byte	15
 3488 0028 0F        		.byte	15
 3489 0029 0F        		.byte	15
 3490 002a 0F        		.byte	15
 3491 002b 0F        		.byte	15
 3492 002c 00        		.byte	0
 3493 002d 00        		.byte	0
 3494 002e C0        		.byte	-64
 3495 002f C0        		.byte	-64
 3496 0030 C0        		.byte	-64
 3497 0031 00        		.byte	0
 3498 0032 00        		.byte	0
 3499 0033 0F        		.byte	15
 3500 0034 0F        		.byte	15
 3501 0035 0F        		.byte	15
 3502 0036 0F        		.byte	15
 3503 0037 0F        		.byte	15
 3504 0038 0F        		.byte	15
 3505 0039 0F        		.byte	15
 3506 003a 0F        		.byte	15
 3507 003b 0F        		.byte	15
 3508 003c 0F        		.byte	15
 3509 003d 00        		.byte	0
 3510 003e 00        		.byte	0
 3511 003f C0        		.byte	-64
 3512 0040 C0        		.byte	-64
 3513 0041 00        		.byte	0
 3514 0042 0F        		.byte	15
 3515 0043 0F        		.byte	15
 3516 0044 0F        		.byte	15
 3517 0045 00        		.byte	0
 3518 0046 0F        		.byte	15
 3519 0047 0F        		.byte	15
 3520 0048 0F        		.byte	15
 3521 0049 0F        		.byte	15
 3522 004a 0F        		.byte	15
 3523 004b 0F        		.byte	15
 3524 004c 0F        		.byte	15
 3525 004d 0F        		.byte	15
 3526 004e 00        		.byte	0
 3527 004f C0        		.byte	-64
 3528 0050 00        		.byte	0
 3529 0051 0F        		.byte	15
 3530 0052 0F        		.byte	15
 3531 0053 0F        		.byte	15
 3532 0054 00        		.byte	0
 3533 0055 00        		.byte	0
 3534 0056 00        		.byte	0
 3535 0057 0F        		.byte	15
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 173


 3536 0058 0F        		.byte	15
 3537 0059 00        		.byte	0
 3538 005a 0F        		.byte	15
 3539 005b 0F        		.byte	15
 3540 005c 0F        		.byte	15
 3541 005d 0F        		.byte	15
 3542 005e 0F        		.byte	15
 3543 005f 00        		.byte	0
 3544 0060 00        		.byte	0
 3545 0061 0F        		.byte	15
 3546 0062 0F        		.byte	15
 3547 0063 0F        		.byte	15
 3548 0064 0F        		.byte	15
 3549 0065 00        		.byte	0
 3550 0066 0F        		.byte	15
 3551 0067 0F        		.byte	15
 3552 0068 0F        		.byte	15
 3553 0069 0F        		.byte	15
 3554 006a 00        		.byte	0
 3555 006b 00        		.byte	0
 3556 006c 0F        		.byte	15
 3557 006d 0F        		.byte	15
 3558 006e 0F        		.byte	15
 3559 006f 00        		.byte	0
 3560 0070 00        		.byte	0
 3561 0071 0F        		.byte	15
 3562 0072 0F        		.byte	15
 3563 0073 0F        		.byte	15
 3564 0074 0F        		.byte	15
 3565 0075 0F        		.byte	15
 3566 0076 0F        		.byte	15
 3567 0077 0F        		.byte	15
 3568 0078 0F        		.byte	15
 3569 0079 0F        		.byte	15
 3570 007a 0F        		.byte	15
 3571 007b 0F        		.byte	15
 3572 007c 0F        		.byte	15
 3573 007d 0F        		.byte	15
 3574 007e 0F        		.byte	15
 3575 007f 00        		.byte	0
 3576 0080 00        		.byte	0
 3577 0081 0F        		.byte	15
 3578 0082 0F        		.byte	15
 3579 0083 0F        		.byte	15
 3580 0084 0F        		.byte	15
 3581 0085 0F        		.byte	15
 3582 0086 0F        		.byte	15
 3583 0087 0F        		.byte	15
 3584 0088 0F        		.byte	15
 3585 0089 0F        		.byte	15
 3586 008a 0F        		.byte	15
 3587 008b 0F        		.byte	15
 3588 008c 0F        		.byte	15
 3589 008d 0F        		.byte	15
 3590 008e 0F        		.byte	15
 3591 008f 00        		.byte	0
 3592 0090 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 174


 3593 0091 0F        		.byte	15
 3594 0092 0F        		.byte	15
 3595 0093 00        		.byte	0
 3596 0094 00        		.byte	0
 3597 0095 0F        		.byte	15
 3598 0096 0F        		.byte	15
 3599 0097 0F        		.byte	15
 3600 0098 0F        		.byte	15
 3601 0099 0F        		.byte	15
 3602 009a 0F        		.byte	15
 3603 009b 00        		.byte	0
 3604 009c 00        		.byte	0
 3605 009d 0F        		.byte	15
 3606 009e 0F        		.byte	15
 3607 009f 00        		.byte	0
 3608 00a0 00        		.byte	0
 3609 00a1 0F        		.byte	15
 3610 00a2 0F        		.byte	15
 3611 00a3 0F        		.byte	15
 3612 00a4 00        		.byte	0
 3613 00a5 00        		.byte	0
 3614 00a6 0F        		.byte	15
 3615 00a7 0F        		.byte	15
 3616 00a8 0F        		.byte	15
 3617 00a9 0F        		.byte	15
 3618 00aa 00        		.byte	0
 3619 00ab 00        		.byte	0
 3620 00ac 0F        		.byte	15
 3621 00ad 0F        		.byte	15
 3622 00ae 0F        		.byte	15
 3623 00af 00        		.byte	0
 3624 00b0 C0        		.byte	-64
 3625 00b1 00        		.byte	0
 3626 00b2 0F        		.byte	15
 3627 00b3 0F        		.byte	15
 3628 00b4 0F        		.byte	15
 3629 00b5 00        		.byte	0
 3630 00b6 00        		.byte	0
 3631 00b7 00        		.byte	0
 3632 00b8 00        		.byte	0
 3633 00b9 00        		.byte	0
 3634 00ba 00        		.byte	0
 3635 00bb 0F        		.byte	15
 3636 00bc 0F        		.byte	15
 3637 00bd 0F        		.byte	15
 3638 00be 00        		.byte	0
 3639 00bf C0        		.byte	-64
 3640 00c0 C0        		.byte	-64
 3641 00c1 00        		.byte	0
 3642 00c2 00        		.byte	0
 3643 00c3 0F        		.byte	15
 3644 00c4 0F        		.byte	15
 3645 00c5 0F        		.byte	15
 3646 00c6 00        		.byte	0
 3647 00c7 03        		.byte	3
 3648 00c8 00        		.byte	0
 3649 00c9 03        		.byte	3
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 175


 3650 00ca 00        		.byte	0
 3651 00cb 0F        		.byte	15
 3652 00cc 0F        		.byte	15
 3653 00cd 00        		.byte	0
 3654 00ce 00        		.byte	0
 3655 00cf C0        		.byte	-64
 3656 00d0 C0        		.byte	-64
 3657 00d1 C0        		.byte	-64
 3658 00d2 00        		.byte	0
 3659 00d3 00        		.byte	0
 3660 00d4 0F        		.byte	15
 3661 00d5 0F        		.byte	15
 3662 00d6 00        		.byte	0
 3663 00d7 03        		.byte	3
 3664 00d8 03        		.byte	3
 3665 00d9 03        		.byte	3
 3666 00da 00        		.byte	0
 3667 00db 0F        		.byte	15
 3668 00dc 00        		.byte	0
 3669 00dd 00        		.byte	0
 3670 00de C0        		.byte	-64
 3671 00df C0        		.byte	-64
 3672 00e0 C0        		.byte	-64
 3673 00e1 C0        		.byte	-64
 3674 00e2 C0        		.byte	-64
 3675 00e3 00        		.byte	0
 3676 00e4 00        		.byte	0
 3677 00e5 0F        		.byte	15
 3678 00e6 0F        		.byte	15
 3679 00e7 00        		.byte	0
 3680 00e8 00        		.byte	0
 3681 00e9 00        		.byte	0
 3682 00ea 0F        		.byte	15
 3683 00eb 00        		.byte	0
 3684 00ec 00        		.byte	0
 3685 00ed C0        		.byte	-64
 3686 00ee C0        		.byte	-64
 3687 00ef C0        		.byte	-64
 3688 00f0 C0        		.byte	-64
 3689 00f1 C0        		.byte	-64
 3690 00f2 C0        		.byte	-64
 3691 00f3 C0        		.byte	-64
 3692 00f4 C0        		.byte	-64
 3693 00f5 00        		.byte	0
 3694 00f6 00        		.byte	0
 3695 00f7 00        		.byte	0
 3696 00f8 00        		.byte	0
 3697 00f9 00        		.byte	0
 3698 00fa 00        		.byte	0
 3699 00fb C0        		.byte	-64
 3700 00fc C0        		.byte	-64
 3701 00fd C0        		.byte	-64
 3702 00fe C0        		.byte	-64
 3703 00ff C0        		.byte	-64
 3704               	.global	pgm_image1
 3705               		.type	pgm_image1, @object
 3706               		.size	pgm_image1, 256
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 176


 3707               	pgm_image1:
 3708 0100 C0        		.byte	-64
 3709 0101 C0        		.byte	-64
 3710 0102 C0        		.byte	-64
 3711 0103 C0        		.byte	-64
 3712 0104 C0        		.byte	-64
 3713 0105 00        		.byte	0
 3714 0106 00        		.byte	0
 3715 0107 00        		.byte	0
 3716 0108 00        		.byte	0
 3717 0109 00        		.byte	0
 3718 010a 00        		.byte	0
 3719 010b C0        		.byte	-64
 3720 010c C0        		.byte	-64
 3721 010d C0        		.byte	-64
 3722 010e C0        		.byte	-64
 3723 010f C0        		.byte	-64
 3724 0110 C0        		.byte	-64
 3725 0111 C0        		.byte	-64
 3726 0112 C0        		.byte	-64
 3727 0113 00        		.byte	0
 3728 0114 00        		.byte	0
 3729 0115 0F        		.byte	15
 3730 0116 0F        		.byte	15
 3731 0117 0F        		.byte	15
 3732 0118 0F        		.byte	15
 3733 0119 0F        		.byte	15
 3734 011a 0F        		.byte	15
 3735 011b 00        		.byte	0
 3736 011c 00        		.byte	0
 3737 011d C0        		.byte	-64
 3738 011e C0        		.byte	-64
 3739 011f C0        		.byte	-64
 3740 0120 C0        		.byte	-64
 3741 0121 C0        		.byte	-64
 3742 0122 00        		.byte	0
 3743 0123 00        		.byte	0
 3744 0124 0F        		.byte	15
 3745 0125 0F        		.byte	15
 3746 0126 0F        		.byte	15
 3747 0127 0F        		.byte	15
 3748 0128 0F        		.byte	15
 3749 0129 0F        		.byte	15
 3750 012a 0F        		.byte	15
 3751 012b 0F        		.byte	15
 3752 012c 00        		.byte	0
 3753 012d 00        		.byte	0
 3754 012e C0        		.byte	-64
 3755 012f C0        		.byte	-64
 3756 0130 C0        		.byte	-64
 3757 0131 00        		.byte	0
 3758 0132 00        		.byte	0
 3759 0133 0F        		.byte	15
 3760 0134 0F        		.byte	15
 3761 0135 0F        		.byte	15
 3762 0136 0F        		.byte	15
 3763 0137 0F        		.byte	15
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 177


 3764 0138 0F        		.byte	15
 3765 0139 0F        		.byte	15
 3766 013a 0F        		.byte	15
 3767 013b 0F        		.byte	15
 3768 013c 0F        		.byte	15
 3769 013d 00        		.byte	0
 3770 013e 00        		.byte	0
 3771 013f C0        		.byte	-64
 3772 0140 C0        		.byte	-64
 3773 0141 00        		.byte	0
 3774 0142 0F        		.byte	15
 3775 0143 0F        		.byte	15
 3776 0144 0F        		.byte	15
 3777 0145 00        		.byte	0
 3778 0146 0F        		.byte	15
 3779 0147 0F        		.byte	15
 3780 0148 0F        		.byte	15
 3781 0149 0F        		.byte	15
 3782 014a 00        		.byte	0
 3783 014b 0F        		.byte	15
 3784 014c 0F        		.byte	15
 3785 014d 0F        		.byte	15
 3786 014e 00        		.byte	0
 3787 014f C0        		.byte	-64
 3788 0150 00        		.byte	0
 3789 0151 0F        		.byte	15
 3790 0152 0F        		.byte	15
 3791 0153 0F        		.byte	15
 3792 0154 00        		.byte	0
 3793 0155 00        		.byte	0
 3794 0156 00        		.byte	0
 3795 0157 0F        		.byte	15
 3796 0158 0F        		.byte	15
 3797 0159 00        		.byte	0
 3798 015a 00        		.byte	0
 3799 015b 00        		.byte	0
 3800 015c 0F        		.byte	15
 3801 015d 0F        		.byte	15
 3802 015e 0F        		.byte	15
 3803 015f 00        		.byte	0
 3804 0160 00        		.byte	0
 3805 0161 0F        		.byte	15
 3806 0162 0F        		.byte	15
 3807 0163 0F        		.byte	15
 3808 0164 0F        		.byte	15
 3809 0165 00        		.byte	0
 3810 0166 0F        		.byte	15
 3811 0167 0F        		.byte	15
 3812 0168 0F        		.byte	15
 3813 0169 0F        		.byte	15
 3814 016a 00        		.byte	0
 3815 016b 0F        		.byte	15
 3816 016c 0F        		.byte	15
 3817 016d 0F        		.byte	15
 3818 016e 0F        		.byte	15
 3819 016f 00        		.byte	0
 3820 0170 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 178


 3821 0171 0F        		.byte	15
 3822 0172 0F        		.byte	15
 3823 0173 0F        		.byte	15
 3824 0174 0F        		.byte	15
 3825 0175 0F        		.byte	15
 3826 0176 0F        		.byte	15
 3827 0177 0F        		.byte	15
 3828 0178 0F        		.byte	15
 3829 0179 0F        		.byte	15
 3830 017a 0F        		.byte	15
 3831 017b 0F        		.byte	15
 3832 017c 0F        		.byte	15
 3833 017d 0F        		.byte	15
 3834 017e 0F        		.byte	15
 3835 017f 00        		.byte	0
 3836 0180 00        		.byte	0
 3837 0181 0F        		.byte	15
 3838 0182 0F        		.byte	15
 3839 0183 0F        		.byte	15
 3840 0184 0F        		.byte	15
 3841 0185 0F        		.byte	15
 3842 0186 0F        		.byte	15
 3843 0187 0F        		.byte	15
 3844 0188 0F        		.byte	15
 3845 0189 0F        		.byte	15
 3846 018a 0F        		.byte	15
 3847 018b 0F        		.byte	15
 3848 018c 0F        		.byte	15
 3849 018d 0F        		.byte	15
 3850 018e 0F        		.byte	15
 3851 018f 00        		.byte	0
 3852 0190 00        		.byte	0
 3853 0191 0F        		.byte	15
 3854 0192 0F        		.byte	15
 3855 0193 00        		.byte	0
 3856 0194 00        		.byte	0
 3857 0195 0F        		.byte	15
 3858 0196 0F        		.byte	15
 3859 0197 0F        		.byte	15
 3860 0198 0F        		.byte	15
 3861 0199 0F        		.byte	15
 3862 019a 0F        		.byte	15
 3863 019b 00        		.byte	0
 3864 019c 00        		.byte	0
 3865 019d 0F        		.byte	15
 3866 019e 0F        		.byte	15
 3867 019f 00        		.byte	0
 3868 01a0 00        		.byte	0
 3869 01a1 0F        		.byte	15
 3870 01a2 0F        		.byte	15
 3871 01a3 0F        		.byte	15
 3872 01a4 00        		.byte	0
 3873 01a5 00        		.byte	0
 3874 01a6 0F        		.byte	15
 3875 01a7 0F        		.byte	15
 3876 01a8 0F        		.byte	15
 3877 01a9 0F        		.byte	15
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 179


 3878 01aa 00        		.byte	0
 3879 01ab 00        		.byte	0
 3880 01ac 0F        		.byte	15
 3881 01ad 0F        		.byte	15
 3882 01ae 0F        		.byte	15
 3883 01af 00        		.byte	0
 3884 01b0 C0        		.byte	-64
 3885 01b1 00        		.byte	0
 3886 01b2 0F        		.byte	15
 3887 01b3 0F        		.byte	15
 3888 01b4 0F        		.byte	15
 3889 01b5 00        		.byte	0
 3890 01b6 00        		.byte	0
 3891 01b7 00        		.byte	0
 3892 01b8 00        		.byte	0
 3893 01b9 00        		.byte	0
 3894 01ba 00        		.byte	0
 3895 01bb 0F        		.byte	15
 3896 01bc 0F        		.byte	15
 3897 01bd 0F        		.byte	15
 3898 01be 00        		.byte	0
 3899 01bf C0        		.byte	-64
 3900 01c0 C0        		.byte	-64
 3901 01c1 00        		.byte	0
 3902 01c2 00        		.byte	0
 3903 01c3 0F        		.byte	15
 3904 01c4 0F        		.byte	15
 3905 01c5 0F        		.byte	15
 3906 01c6 0F        		.byte	15
 3907 01c7 0F        		.byte	15
 3908 01c8 0F        		.byte	15
 3909 01c9 0F        		.byte	15
 3910 01ca 0F        		.byte	15
 3911 01cb 0F        		.byte	15
 3912 01cc 0F        		.byte	15
 3913 01cd 00        		.byte	0
 3914 01ce 00        		.byte	0
 3915 01cf C0        		.byte	-64
 3916 01d0 C0        		.byte	-64
 3917 01d1 C0        		.byte	-64
 3918 01d2 00        		.byte	0
 3919 01d3 00        		.byte	0
 3920 01d4 0F        		.byte	15
 3921 01d5 0F        		.byte	15
 3922 01d6 0F        		.byte	15
 3923 01d7 0F        		.byte	15
 3924 01d8 0F        		.byte	15
 3925 01d9 0F        		.byte	15
 3926 01da 0F        		.byte	15
 3927 01db 0F        		.byte	15
 3928 01dc 00        		.byte	0
 3929 01dd 00        		.byte	0
 3930 01de C0        		.byte	-64
 3931 01df C0        		.byte	-64
 3932 01e0 C0        		.byte	-64
 3933 01e1 C0        		.byte	-64
 3934 01e2 C0        		.byte	-64
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 180


 3935 01e3 00        		.byte	0
 3936 01e4 00        		.byte	0
 3937 01e5 0F        		.byte	15
 3938 01e6 0F        		.byte	15
 3939 01e7 0F        		.byte	15
 3940 01e8 0F        		.byte	15
 3941 01e9 0F        		.byte	15
 3942 01ea 0F        		.byte	15
 3943 01eb 00        		.byte	0
 3944 01ec 00        		.byte	0
 3945 01ed C0        		.byte	-64
 3946 01ee C0        		.byte	-64
 3947 01ef C0        		.byte	-64
 3948 01f0 C0        		.byte	-64
 3949 01f1 C0        		.byte	-64
 3950 01f2 C0        		.byte	-64
 3951 01f3 C0        		.byte	-64
 3952 01f4 C0        		.byte	-64
 3953 01f5 00        		.byte	0
 3954 01f6 00        		.byte	0
 3955 01f7 00        		.byte	0
 3956 01f8 00        		.byte	0
 3957 01f9 00        		.byte	0
 3958 01fa 00        		.byte	0
 3959 01fb C0        		.byte	-64
 3960 01fc C0        		.byte	-64
 3961 01fd C0        		.byte	-64
 3962 01fe C0        		.byte	-64
 3963 01ff C0        		.byte	-64
 3964               		.comm	frameBuffer,256,1
 3965               	.global	characters
 3966               		.type	characters, @object
 3967               		.size	characters, 768
 3968               	characters:
 3969 0200 00        		.byte	0
 3970 0201 0C        		.byte	12
 3971 0202 36        		.byte	54
 3972 0203 36        		.byte	54
 3973 0204 0C        		.byte	12
 3974 0205 00        		.byte	0
 3975 0206 1C        		.byte	28
 3976 0207 06        		.byte	6
 3977 0208 18        		.byte	24
 3978 0209 06        		.byte	6
 3979 020a 00        		.byte	0
 3980 020b 00        		.byte	0
 3981 020c 00        		.byte	0
 3982 020d 00        		.byte	0
 3983 020e 00        		.byte	0
 3984 020f 60        		.byte	96
 3985 0210 1E        		.byte	30
 3986 0211 0C        		.byte	12
 3987 0212 1E        		.byte	30
 3988 0213 1E        		.byte	30
 3989 0214 38        		.byte	56
 3990 0215 3F        		.byte	63
 3991 0216 1C        		.byte	28
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 181


 3992 0217 3F        		.byte	63
 3993 0218 1E        		.byte	30
 3994 0219 1E        		.byte	30
 3995 021a 00        		.byte	0
 3996 021b 00        		.byte	0
 3997 021c 18        		.byte	24
 3998 021d 00        		.byte	0
 3999 021e 06        		.byte	6
 4000 021f 1E        		.byte	30
 4001 0220 3E        		.byte	62
 4002 0221 0C        		.byte	12
 4003 0222 3F        		.byte	63
 4004 0223 3C        		.byte	60
 4005 0224 3F        		.byte	63
 4006 0225 7F        		.byte	127
 4007 0226 7F        		.byte	127
 4008 0227 3C        		.byte	60
 4009 0228 33        		.byte	51
 4010 0229 1E        		.byte	30
 4011 022a 78        		.byte	120
 4012 022b 67        		.byte	103
 4013 022c 0F        		.byte	15
 4014 022d 63        		.byte	99
 4015 022e 63        		.byte	99
 4016 022f 1C        		.byte	28
 4017 0230 3F        		.byte	63
 4018 0231 1E        		.byte	30
 4019 0232 3F        		.byte	63
 4020 0233 1E        		.byte	30
 4021 0234 3F        		.byte	63
 4022 0235 33        		.byte	51
 4023 0236 33        		.byte	51
 4024 0237 63        		.byte	99
 4025 0238 63        		.byte	99
 4026 0239 33        		.byte	51
 4027 023a 7F        		.byte	127
 4028 023b 1E        		.byte	30
 4029 023c 03        		.byte	3
 4030 023d 1E        		.byte	30
 4031 023e 08        		.byte	8
 4032 023f 00        		.byte	0
 4033 0240 0C        		.byte	12
 4034 0241 00        		.byte	0
 4035 0242 07        		.byte	7
 4036 0243 00        		.byte	0
 4037 0244 38        		.byte	56
 4038 0245 00        		.byte	0
 4039 0246 1C        		.byte	28
 4040 0247 00        		.byte	0
 4041 0248 07        		.byte	7
 4042 0249 0C        		.byte	12
 4043 024a 18        		.byte	24
 4044 024b 07        		.byte	7
 4045 024c 0E        		.byte	14
 4046 024d 00        		.byte	0
 4047 024e 00        		.byte	0
 4048 024f 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 182


 4049 0250 00        		.byte	0
 4050 0251 00        		.byte	0
 4051 0252 00        		.byte	0
 4052 0253 00        		.byte	0
 4053 0254 08        		.byte	8
 4054 0255 00        		.byte	0
 4055 0256 00        		.byte	0
 4056 0257 00        		.byte	0
 4057 0258 00        		.byte	0
 4058 0259 00        		.byte	0
 4059 025a 00        		.byte	0
 4060 025b 38        		.byte	56
 4061 025c 18        		.byte	24
 4062 025d 07        		.byte	7
 4063 025e 6E        		.byte	110
 4064 025f 0E        		.byte	14
 4065 0260 00        		.byte	0
 4066 0261 1E        		.byte	30
 4067 0262 36        		.byte	54
 4068 0263 36        		.byte	54
 4069 0264 3E        		.byte	62
 4070 0265 63        		.byte	99
 4071 0266 36        		.byte	54
 4072 0267 06        		.byte	6
 4073 0268 0C        		.byte	12
 4074 0269 0C        		.byte	12
 4075 026a 66        		.byte	102
 4076 026b 0C        		.byte	12
 4077 026c 00        		.byte	0
 4078 026d 00        		.byte	0
 4079 026e 00        		.byte	0
 4080 026f 30        		.byte	48
 4081 0270 33        		.byte	51
 4082 0271 0F        		.byte	15
 4083 0272 33        		.byte	51
 4084 0273 33        		.byte	51
 4085 0274 3C        		.byte	60
 4086 0275 03        		.byte	3
 4087 0276 06        		.byte	6
 4088 0277 33        		.byte	51
 4089 0278 33        		.byte	51
 4090 0279 33        		.byte	51
 4091 027a 00        		.byte	0
 4092 027b 00        		.byte	0
 4093 027c 0C        		.byte	12
 4094 027d 00        		.byte	0
 4095 027e 0C        		.byte	12
 4096 027f 33        		.byte	51
 4097 0280 63        		.byte	99
 4098 0281 1E        		.byte	30
 4099 0282 66        		.byte	102
 4100 0283 66        		.byte	102
 4101 0284 36        		.byte	54
 4102 0285 46        		.byte	70
 4103 0286 46        		.byte	70
 4104 0287 66        		.byte	102
 4105 0288 33        		.byte	51
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 183


 4106 0289 0C        		.byte	12
 4107 028a 30        		.byte	48
 4108 028b 66        		.byte	102
 4109 028c 06        		.byte	6
 4110 028d 77        		.byte	119
 4111 028e 67        		.byte	103
 4112 028f 36        		.byte	54
 4113 0290 66        		.byte	102
 4114 0291 33        		.byte	51
 4115 0292 66        		.byte	102
 4116 0293 33        		.byte	51
 4117 0294 2D        		.byte	45
 4118 0295 33        		.byte	51
 4119 0296 33        		.byte	51
 4120 0297 63        		.byte	99
 4121 0298 63        		.byte	99
 4122 0299 33        		.byte	51
 4123 029a 33        		.byte	51
 4124 029b 06        		.byte	6
 4125 029c 06        		.byte	6
 4126 029d 18        		.byte	24
 4127 029e 1C        		.byte	28
 4128 029f 00        		.byte	0
 4129 02a0 0C        		.byte	12
 4130 02a1 00        		.byte	0
 4131 02a2 06        		.byte	6
 4132 02a3 00        		.byte	0
 4133 02a4 30        		.byte	48
 4134 02a5 00        		.byte	0
 4135 02a6 36        		.byte	54
 4136 02a7 00        		.byte	0
 4137 02a8 06        		.byte	6
 4138 02a9 00        		.byte	0
 4139 02aa 00        		.byte	0
 4140 02ab 06        		.byte	6
 4141 02ac 0C        		.byte	12
 4142 02ad 00        		.byte	0
 4143 02ae 00        		.byte	0
 4144 02af 00        		.byte	0
 4145 02b0 00        		.byte	0
 4146 02b1 00        		.byte	0
 4147 02b2 00        		.byte	0
 4148 02b3 00        		.byte	0
 4149 02b4 0C        		.byte	12
 4150 02b5 00        		.byte	0
 4151 02b6 00        		.byte	0
 4152 02b7 00        		.byte	0
 4153 02b8 00        		.byte	0
 4154 02b9 00        		.byte	0
 4155 02ba 00        		.byte	0
 4156 02bb 0C        		.byte	12
 4157 02bc 18        		.byte	24
 4158 02bd 0C        		.byte	12
 4159 02be 3B        		.byte	59
 4160 02bf 13        		.byte	19
 4161 02c0 00        		.byte	0
 4162 02c1 1E        		.byte	30
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 184


 4163 02c2 36        		.byte	54
 4164 02c3 7F        		.byte	127
 4165 02c4 03        		.byte	3
 4166 02c5 33        		.byte	51
 4167 02c6 1C        		.byte	28
 4168 02c7 03        		.byte	3
 4169 02c8 06        		.byte	6
 4170 02c9 18        		.byte	24
 4171 02ca 3C        		.byte	60
 4172 02cb 0C        		.byte	12
 4173 02cc 00        		.byte	0
 4174 02cd 00        		.byte	0
 4175 02ce 00        		.byte	0
 4176 02cf 18        		.byte	24
 4177 02d0 3B        		.byte	59
 4178 02d1 0C        		.byte	12
 4179 02d2 30        		.byte	48
 4180 02d3 30        		.byte	48
 4181 02d4 36        		.byte	54
 4182 02d5 1F        		.byte	31
 4183 02d6 03        		.byte	3
 4184 02d7 30        		.byte	48
 4185 02d8 33        		.byte	51
 4186 02d9 33        		.byte	51
 4187 02da 0C        		.byte	12
 4188 02db 0C        		.byte	12
 4189 02dc 06        		.byte	6
 4190 02dd 3F        		.byte	63
 4191 02de 18        		.byte	24
 4192 02df 30        		.byte	48
 4193 02e0 7B        		.byte	123
 4194 02e1 33        		.byte	51
 4195 02e2 66        		.byte	102
 4196 02e3 03        		.byte	3
 4197 02e4 66        		.byte	102
 4198 02e5 16        		.byte	22
 4199 02e6 16        		.byte	22
 4200 02e7 03        		.byte	3
 4201 02e8 33        		.byte	51
 4202 02e9 0C        		.byte	12
 4203 02ea 30        		.byte	48
 4204 02eb 36        		.byte	54
 4205 02ec 06        		.byte	6
 4206 02ed 7F        		.byte	127
 4207 02ee 6F        		.byte	111
 4208 02ef 63        		.byte	99
 4209 02f0 66        		.byte	102
 4210 02f1 33        		.byte	51
 4211 02f2 66        		.byte	102
 4212 02f3 07        		.byte	7
 4213 02f4 0C        		.byte	12
 4214 02f5 33        		.byte	51
 4215 02f6 33        		.byte	51
 4216 02f7 63        		.byte	99
 4217 02f8 36        		.byte	54
 4218 02f9 33        		.byte	51
 4219 02fa 19        		.byte	25
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 185


 4220 02fb 06        		.byte	6
 4221 02fc 0C        		.byte	12
 4222 02fd 18        		.byte	24
 4223 02fe 36        		.byte	54
 4224 02ff 00        		.byte	0
 4225 0300 18        		.byte	24
 4226 0301 1E        		.byte	30
 4227 0302 3E        		.byte	62
 4228 0303 1E        		.byte	30
 4229 0304 30        		.byte	48
 4230 0305 1E        		.byte	30
 4231 0306 06        		.byte	6
 4232 0307 6E        		.byte	110
 4233 0308 36        		.byte	54
 4234 0309 0E        		.byte	14
 4235 030a 1E        		.byte	30
 4236 030b 66        		.byte	102
 4237 030c 0C        		.byte	12
 4238 030d 37        		.byte	55
 4239 030e 1F        		.byte	31
 4240 030f 1E        		.byte	30
 4241 0310 3B        		.byte	59
 4242 0311 6E        		.byte	110
 4243 0312 1B        		.byte	27
 4244 0313 3E        		.byte	62
 4245 0314 3E        		.byte	62
 4246 0315 33        		.byte	51
 4247 0316 33        		.byte	51
 4248 0317 63        		.byte	99
 4249 0318 63        		.byte	99
 4250 0319 33        		.byte	51
 4251 031a 3F        		.byte	63
 4252 031b 0C        		.byte	12
 4253 031c 18        		.byte	24
 4254 031d 0C        		.byte	12
 4255 031e 00        		.byte	0
 4256 031f 39        		.byte	57
 4257 0320 00        		.byte	0
 4258 0321 0C        		.byte	12
 4259 0322 00        		.byte	0
 4260 0323 36        		.byte	54
 4261 0324 1E        		.byte	30
 4262 0325 18        		.byte	24
 4263 0326 6E        		.byte	110
 4264 0327 00        		.byte	0
 4265 0328 06        		.byte	6
 4266 0329 18        		.byte	24
 4267 032a FF        		.byte	-1
 4268 032b 3F        		.byte	63
 4269 032c 00        		.byte	0
 4270 032d 3F        		.byte	63
 4271 032e 00        		.byte	0
 4272 032f 0C        		.byte	12
 4273 0330 3F        		.byte	63
 4274 0331 0C        		.byte	12
 4275 0332 1C        		.byte	28
 4276 0333 1C        		.byte	28
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 186


 4277 0334 33        		.byte	51
 4278 0335 30        		.byte	48
 4279 0336 1F        		.byte	31
 4280 0337 18        		.byte	24
 4281 0338 1E        		.byte	30
 4282 0339 3E        		.byte	62
 4283 033a 0C        		.byte	12
 4284 033b 0C        		.byte	12
 4285 033c 03        		.byte	3
 4286 033d 00        		.byte	0
 4287 033e 30        		.byte	48
 4288 033f 18        		.byte	24
 4289 0340 7B        		.byte	123
 4290 0341 33        		.byte	51
 4291 0342 3E        		.byte	62
 4292 0343 03        		.byte	3
 4293 0344 66        		.byte	102
 4294 0345 1E        		.byte	30
 4295 0346 1E        		.byte	30
 4296 0347 03        		.byte	3
 4297 0348 3F        		.byte	63
 4298 0349 0C        		.byte	12
 4299 034a 30        		.byte	48
 4300 034b 1E        		.byte	30
 4301 034c 06        		.byte	6
 4302 034d 6B        		.byte	107
 4303 034e 7B        		.byte	123
 4304 034f 63        		.byte	99
 4305 0350 3E        		.byte	62
 4306 0351 33        		.byte	51
 4307 0352 3E        		.byte	62
 4308 0353 1C        		.byte	28
 4309 0354 0C        		.byte	12
 4310 0355 33        		.byte	51
 4311 0356 33        		.byte	51
 4312 0357 6B        		.byte	107
 4313 0358 1C        		.byte	28
 4314 0359 1E        		.byte	30
 4315 035a 0C        		.byte	12
 4316 035b 06        		.byte	6
 4317 035c 18        		.byte	24
 4318 035d 18        		.byte	24
 4319 035e 63        		.byte	99
 4320 035f 00        		.byte	0
 4321 0360 00        		.byte	0
 4322 0361 30        		.byte	48
 4323 0362 66        		.byte	102
 4324 0363 33        		.byte	51
 4325 0364 3E        		.byte	62
 4326 0365 33        		.byte	51
 4327 0366 0F        		.byte	15
 4328 0367 33        		.byte	51
 4329 0368 6E        		.byte	110
 4330 0369 0C        		.byte	12
 4331 036a 18        		.byte	24
 4332 036b 36        		.byte	54
 4333 036c 0C        		.byte	12
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 187


 4334 036d 7F        		.byte	127
 4335 036e 33        		.byte	51
 4336 036f 33        		.byte	51
 4337 0370 66        		.byte	102
 4338 0371 33        		.byte	51
 4339 0372 36        		.byte	54
 4340 0373 03        		.byte	3
 4341 0374 0C        		.byte	12
 4342 0375 33        		.byte	51
 4343 0376 33        		.byte	51
 4344 0377 63        		.byte	99
 4345 0378 36        		.byte	54
 4346 0379 33        		.byte	51
 4347 037a 19        		.byte	25
 4348 037b 07        		.byte	7
 4349 037c 00        		.byte	0
 4350 037d 38        		.byte	56
 4351 037e 00        		.byte	0
 4352 037f 69        		.byte	105
 4353 0380 00        		.byte	0
 4354 0381 0C        		.byte	12
 4355 0382 00        		.byte	0
 4356 0383 7F        		.byte	127
 4357 0384 30        		.byte	48
 4358 0385 0C        		.byte	12
 4359 0386 3B        		.byte	59
 4360 0387 00        		.byte	0
 4361 0388 06        		.byte	6
 4362 0389 18        		.byte	24
 4363 038a 3C        		.byte	60
 4364 038b 0C        		.byte	12
 4365 038c 00        		.byte	0
 4366 038d 00        		.byte	0
 4367 038e 00        		.byte	0
 4368 038f 06        		.byte	6
 4369 0390 37        		.byte	55
 4370 0391 0C        		.byte	12
 4371 0392 06        		.byte	6
 4372 0393 30        		.byte	48
 4373 0394 7F        		.byte	127
 4374 0395 30        		.byte	48
 4375 0396 33        		.byte	51
 4376 0397 0C        		.byte	12
 4377 0398 33        		.byte	51
 4378 0399 30        		.byte	48
 4379 039a 00        		.byte	0
 4380 039b 00        		.byte	0
 4381 039c 06        		.byte	6
 4382 039d 3F        		.byte	63
 4383 039e 18        		.byte	24
 4384 039f 0C        		.byte	12
 4385 03a0 7B        		.byte	123
 4386 03a1 3F        		.byte	63
 4387 03a2 66        		.byte	102
 4388 03a3 03        		.byte	3
 4389 03a4 66        		.byte	102
 4390 03a5 16        		.byte	22
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 188


 4391 03a6 16        		.byte	22
 4392 03a7 73        		.byte	115
 4393 03a8 33        		.byte	51
 4394 03a9 0C        		.byte	12
 4395 03aa 33        		.byte	51
 4396 03ab 36        		.byte	54
 4397 03ac 46        		.byte	70
 4398 03ad 63        		.byte	99
 4399 03ae 73        		.byte	115
 4400 03af 63        		.byte	99
 4401 03b0 06        		.byte	6
 4402 03b1 3B        		.byte	59
 4403 03b2 1E        		.byte	30
 4404 03b3 38        		.byte	56
 4405 03b4 0C        		.byte	12
 4406 03b5 33        		.byte	51
 4407 03b6 33        		.byte	51
 4408 03b7 7F        		.byte	127
 4409 03b8 36        		.byte	54
 4410 03b9 0C        		.byte	12
 4411 03ba 46        		.byte	70
 4412 03bb 06        		.byte	6
 4413 03bc 30        		.byte	48
 4414 03bd 18        		.byte	24
 4415 03be 00        		.byte	0
 4416 03bf 00        		.byte	0
 4417 03c0 00        		.byte	0
 4418 03c1 3E        		.byte	62
 4419 03c2 66        		.byte	102
 4420 03c3 03        		.byte	3
 4421 03c4 33        		.byte	51
 4422 03c5 3F        		.byte	63
 4423 03c6 06        		.byte	6
 4424 03c7 33        		.byte	51
 4425 03c8 66        		.byte	102
 4426 03c9 0C        		.byte	12
 4427 03ca 18        		.byte	24
 4428 03cb 1E        		.byte	30
 4429 03cc 0C        		.byte	12
 4430 03cd 6B        		.byte	107
 4431 03ce 33        		.byte	51
 4432 03cf 33        		.byte	51
 4433 03d0 66        		.byte	102
 4434 03d1 33        		.byte	51
 4435 03d2 36        		.byte	54
 4436 03d3 1E        		.byte	30
 4437 03d4 0C        		.byte	12
 4438 03d5 33        		.byte	51
 4439 03d6 33        		.byte	51
 4440 03d7 6B        		.byte	107
 4441 03d8 1C        		.byte	28
 4442 03d9 33        		.byte	51
 4443 03da 0C        		.byte	12
 4444 03db 0C        		.byte	12
 4445 03dc 18        		.byte	24
 4446 03dd 0C        		.byte	12
 4447 03de 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 189


 4448 03df 0E        		.byte	14
 4449 03e0 00        		.byte	0
 4450 03e1 00        		.byte	0
 4451 03e2 00        		.byte	0
 4452 03e3 36        		.byte	54
 4453 03e4 1F        		.byte	31
 4454 03e5 66        		.byte	102
 4455 03e6 33        		.byte	51
 4456 03e7 00        		.byte	0
 4457 03e8 0C        		.byte	12
 4458 03e9 0C        		.byte	12
 4459 03ea 66        		.byte	102
 4460 03eb 0C        		.byte	12
 4461 03ec 0E        		.byte	14
 4462 03ed 00        		.byte	0
 4463 03ee 0C        		.byte	12
 4464 03ef 03        		.byte	3
 4465 03f0 33        		.byte	51
 4466 03f1 0C        		.byte	12
 4467 03f2 33        		.byte	51
 4468 03f3 33        		.byte	51
 4469 03f4 30        		.byte	48
 4470 03f5 33        		.byte	51
 4471 03f6 33        		.byte	51
 4472 03f7 06        		.byte	6
 4473 03f8 33        		.byte	51
 4474 03f9 18        		.byte	24
 4475 03fa 0C        		.byte	12
 4476 03fb 0E        		.byte	14
 4477 03fc 0C        		.byte	12
 4478 03fd 00        		.byte	0
 4479 03fe 0C        		.byte	12
 4480 03ff 00        		.byte	0
 4481 0400 03        		.byte	3
 4482 0401 33        		.byte	51
 4483 0402 66        		.byte	102
 4484 0403 66        		.byte	102
 4485 0404 36        		.byte	54
 4486 0405 46        		.byte	70
 4487 0406 06        		.byte	6
 4488 0407 66        		.byte	102
 4489 0408 33        		.byte	51
 4490 0409 0C        		.byte	12
 4491 040a 33        		.byte	51
 4492 040b 66        		.byte	102
 4493 040c 66        		.byte	102
 4494 040d 63        		.byte	99
 4495 040e 63        		.byte	99
 4496 040f 36        		.byte	54
 4497 0410 06        		.byte	6
 4498 0411 1E        		.byte	30
 4499 0412 36        		.byte	54
 4500 0413 33        		.byte	51
 4501 0414 0C        		.byte	12
 4502 0415 33        		.byte	51
 4503 0416 1E        		.byte	30
 4504 0417 77        		.byte	119
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 190


 4505 0418 63        		.byte	99
 4506 0419 0C        		.byte	12
 4507 041a 63        		.byte	99
 4508 041b 06        		.byte	6
 4509 041c 60        		.byte	96
 4510 041d 18        		.byte	24
 4511 041e 00        		.byte	0
 4512 041f 00        		.byte	0
 4513 0420 00        		.byte	0
 4514 0421 33        		.byte	51
 4515 0422 66        		.byte	102
 4516 0423 33        		.byte	51
 4517 0424 33        		.byte	51
 4518 0425 03        		.byte	3
 4519 0426 06        		.byte	6
 4520 0427 3E        		.byte	62
 4521 0428 66        		.byte	102
 4522 0429 0C        		.byte	12
 4523 042a 18        		.byte	24
 4524 042b 36        		.byte	54
 4525 042c 0C        		.byte	12
 4526 042d 63        		.byte	99
 4527 042e 33        		.byte	51
 4528 042f 33        		.byte	51
 4529 0430 3E        		.byte	62
 4530 0431 3E        		.byte	62
 4531 0432 06        		.byte	6
 4532 0433 30        		.byte	48
 4533 0434 2C        		.byte	44
 4534 0435 33        		.byte	51
 4535 0436 1E        		.byte	30
 4536 0437 7F        		.byte	127
 4537 0438 36        		.byte	54
 4538 0439 3E        		.byte	62
 4539 043a 26        		.byte	38
 4540 043b 0C        		.byte	12
 4541 043c 18        		.byte	24
 4542 043d 0C        		.byte	12
 4543 043e 00        		.byte	0
 4544 043f F3        		.byte	-13
 4545 0440 00        		.byte	0
 4546 0441 0C        		.byte	12
 4547 0442 00        		.byte	0
 4548 0443 36        		.byte	54
 4549 0444 0C        		.byte	12
 4550 0445 63        		.byte	99
 4551 0446 6E        		.byte	110
 4552 0447 00        		.byte	0
 4553 0448 18        		.byte	24
 4554 0449 06        		.byte	6
 4555 044a 00        		.byte	0
 4556 044b 00        		.byte	0
 4557 044c 0C        		.byte	12
 4558 044d 00        		.byte	0
 4559 044e 0C        		.byte	12
 4560 044f 01        		.byte	1
 4561 0450 1E        		.byte	30
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 191


 4562 0451 3F        		.byte	63
 4563 0452 3F        		.byte	63
 4564 0453 1E        		.byte	30
 4565 0454 30        		.byte	48
 4566 0455 1E        		.byte	30
 4567 0456 1E        		.byte	30
 4568 0457 06        		.byte	6
 4569 0458 1E        		.byte	30
 4570 0459 0E        		.byte	14
 4571 045a 0C        		.byte	12
 4572 045b 0C        		.byte	12
 4573 045c 18        		.byte	24
 4574 045d 00        		.byte	0
 4575 045e 06        		.byte	6
 4576 045f 0C        		.byte	12
 4577 0460 1E        		.byte	30
 4578 0461 33        		.byte	51
 4579 0462 3F        		.byte	63
 4580 0463 3C        		.byte	60
 4581 0464 3F        		.byte	63
 4582 0465 7F        		.byte	127
 4583 0466 0F        		.byte	15
 4584 0467 7C        		.byte	124
 4585 0468 33        		.byte	51
 4586 0469 1E        		.byte	30
 4587 046a 1E        		.byte	30
 4588 046b 67        		.byte	103
 4589 046c 7F        		.byte	127
 4590 046d 63        		.byte	99
 4591 046e 63        		.byte	99
 4592 046f 1C        		.byte	28
 4593 0470 0F        		.byte	15
 4594 0471 38        		.byte	56
 4595 0472 67        		.byte	103
 4596 0473 1E        		.byte	30
 4597 0474 1E        		.byte	30
 4598 0475 3F        		.byte	63
 4599 0476 0C        		.byte	12
 4600 0477 63        		.byte	99
 4601 0478 63        		.byte	99
 4602 0479 1E        		.byte	30
 4603 047a 7F        		.byte	127
 4604 047b 1E        		.byte	30
 4605 047c 40        		.byte	64
 4606 047d 1E        		.byte	30
 4607 047e 00        		.byte	0
 4608 047f 00        		.byte	0
 4609 0480 00        		.byte	0
 4610 0481 6E        		.byte	110
 4611 0482 3D        		.byte	61
 4612 0483 1E        		.byte	30
 4613 0484 6E        		.byte	110
 4614 0485 1E        		.byte	30
 4615 0486 0F        		.byte	15
 4616 0487 30        		.byte	48
 4617 0488 67        		.byte	103
 4618 0489 1E        		.byte	30
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 192


 4619 048a 1B        		.byte	27
 4620 048b 67        		.byte	103
 4621 048c 1E        		.byte	30
 4622 048d 63        		.byte	99
 4623 048e 33        		.byte	51
 4624 048f 1E        		.byte	30
 4625 0490 06        		.byte	6
 4626 0491 30        		.byte	48
 4627 0492 0F        		.byte	15
 4628 0493 1F        		.byte	31
 4629 0494 18        		.byte	24
 4630 0495 6E        		.byte	110
 4631 0496 0C        		.byte	12
 4632 0497 36        		.byte	54
 4633 0498 63        		.byte	99
 4634 0499 30        		.byte	48
 4635 049a 3F        		.byte	63
 4636 049b 38        		.byte	56
 4637 049c 18        		.byte	24
 4638 049d 07        		.byte	7
 4639 049e 00        		.byte	0
 4640 049f 46        		.byte	70
 4641 04a0 00        		.byte	0
 4642 04a1 00        		.byte	0
 4643 04a2 00        		.byte	0
 4644 04a3 00        		.byte	0
 4645 04a4 00        		.byte	0
 4646 04a5 00        		.byte	0
 4647 04a6 00        		.byte	0
 4648 04a7 00        		.byte	0
 4649 04a8 00        		.byte	0
 4650 04a9 00        		.byte	0
 4651 04aa 00        		.byte	0
 4652 04ab 00        		.byte	0
 4653 04ac 06        		.byte	6
 4654 04ad 00        		.byte	0
 4655 04ae 00        		.byte	0
 4656 04af 00        		.byte	0
 4657 04b0 00        		.byte	0
 4658 04b1 00        		.byte	0
 4659 04b2 00        		.byte	0
 4660 04b3 00        		.byte	0
 4661 04b4 00        		.byte	0
 4662 04b5 00        		.byte	0
 4663 04b6 00        		.byte	0
 4664 04b7 00        		.byte	0
 4665 04b8 00        		.byte	0
 4666 04b9 00        		.byte	0
 4667 04ba 00        		.byte	0
 4668 04bb 06        		.byte	6
 4669 04bc 00        		.byte	0
 4670 04bd 00        		.byte	0
 4671 04be 00        		.byte	0
 4672 04bf 00        		.byte	0
 4673 04c0 00        		.byte	0
 4674 04c1 00        		.byte	0
 4675 04c2 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 193


 4676 04c3 00        		.byte	0
 4677 04c4 00        		.byte	0
 4678 04c5 00        		.byte	0
 4679 04c6 00        		.byte	0
 4680 04c7 00        		.byte	0
 4681 04c8 00        		.byte	0
 4682 04c9 00        		.byte	0
 4683 04ca 00        		.byte	0
 4684 04cb 00        		.byte	0
 4685 04cc 00        		.byte	0
 4686 04cd 00        		.byte	0
 4687 04ce 00        		.byte	0
 4688 04cf 00        		.byte	0
 4689 04d0 00        		.byte	0
 4690 04d1 00        		.byte	0
 4691 04d2 00        		.byte	0
 4692 04d3 00        		.byte	0
 4693 04d4 00        		.byte	0
 4694 04d5 00        		.byte	0
 4695 04d6 00        		.byte	0
 4696 04d7 00        		.byte	0
 4697 04d8 00        		.byte	0
 4698 04d9 00        		.byte	0
 4699 04da 00        		.byte	0
 4700 04db 00        		.byte	0
 4701 04dc 00        		.byte	0
 4702 04dd 00        		.byte	0
 4703 04de 00        		.byte	0
 4704 04df FF        		.byte	-1
 4705 04e0 00        		.byte	0
 4706 04e1 00        		.byte	0
 4707 04e2 00        		.byte	0
 4708 04e3 00        		.byte	0
 4709 04e4 00        		.byte	0
 4710 04e5 00        		.byte	0
 4711 04e6 00        		.byte	0
 4712 04e7 1F        		.byte	31
 4713 04e8 00        		.byte	0
 4714 04e9 00        		.byte	0
 4715 04ea 0E        		.byte	14
 4716 04eb 00        		.byte	0
 4717 04ec 00        		.byte	0
 4718 04ed 00        		.byte	0
 4719 04ee 00        		.byte	0
 4720 04ef 00        		.byte	0
 4721 04f0 0F        		.byte	15
 4722 04f1 78        		.byte	120
 4723 04f2 00        		.byte	0
 4724 04f3 00        		.byte	0
 4725 04f4 00        		.byte	0
 4726 04f5 00        		.byte	0
 4727 04f6 00        		.byte	0
 4728 04f7 00        		.byte	0
 4729 04f8 00        		.byte	0
 4730 04f9 1F        		.byte	31
 4731 04fa 00        		.byte	0
 4732 04fb 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 194


 4733 04fc 00        		.byte	0
 4734 04fd 00        		.byte	0
 4735 04fe 00        		.byte	0
 4736 04ff F4        		.byte	-12
 4737               	.global	header
 4738               		.type	header, @object
 4739               		.size	header, 36
 4740               	header:
 4741 0500 4C43 4464 		.string	"LCDdirectLVDS68 2014-04-28 21:37:43"
 4741      6972 6563 
 4741      744C 5644 
 4741      5336 3820 
 4741      3230 3134 
 4742               		.stabs	"header:G(0,52)=ar(0,53)=r(0,53);0;0177777;;0;35;(0,50)",32,0,12,0
 4743               		.stabs	"characters:G(0,54)=ar(0,53);0;7;(0,55)=ar(0,53);0;95;(0,50)",32,0,42,0
 4744               		.stabs	"frameBuffer:G(0,56)=ar(0,53);0;15;(0,57)=ar(0,53);0;15;(4,2)",32,0,25,0
 4745               		.stabs	"pgm_image1:G(0,58)=ar(0,53);0;255;(0,50)",32,0,51,0
 4746               		.stabs	"pgm_image2:G(0,58)",32,0,117,0
 4747               		.stabs	"dataEnable:G(4,2)",32,0,1240,0
 4748               		.stabs	"vSync:G(4,2)",32,0,1241,0
 4749               		.stabs	"hsyncCount:G(4,4)",32,0,1242,0
 4750               		.stabs	"updateFrame:G(0,59)=B(4,2)",32,0,336,0
 4751               		.stabs	"frameCount:G(0,59)",32,0,337,0
 4752               		.text
 4753               		.stabs	"",100,0,0,.Letext0
 4754               	.Letext0:
 4755               		.ident	"GCC: (GNU) 4.8.2"
 4756               	.global __do_copy_data
 4757               	.global __do_clear_bss
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 195


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:2      *ABS*:0000003e __SP_H__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3      *ABS*:0000003d __SP_L__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:4      *ABS*:0000003f __SREG__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:5      *ABS*:00000000 __tmp_reg__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:6      *ABS*:00000001 __zero_reg__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:178    .text:00000000 pll_enable
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:242    .text:00000030 lvds_timerInit
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:338    .text:000000a2 dc_loop_asdf
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:336    .text:0000009c dc_asm_init_asdf
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:336    .text:0000009e dc_asm_init_exit_asdf
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:338    .text:000000a0 delayCycs_asdf
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:338    .text:000000a6 dc_loopRemainder_asdf
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:338    .text:000000b0 dc_done1_asdf
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:338    .text:000000b2 dc_done_asdf
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:364    .text:000000b8 setColor
                            *COM*:00000100 frameBuffer
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:433    .text:000000f6 frameBufferInit
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:450    .text:000000f8 smileyUpdate
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3412   .bss:00000008 updateCount.2143
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3410   .bss:00000007 colorShift.2144
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3403   .bss:00000006 imageNum.2142
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3707   .progmem.data:00000100 pgm_image1
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3407   .data:00000000 pimage.2141
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3447   .progmem.data:00000000 pgm_image2
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:623    .text:000001b0 nonRSB_drawPix
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:695    .text:00000204 nothingToDo_271
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:813    .text:00000252 nothingToDo_319
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:931    .text:000002a0 nothingToDo_367
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:1049   .text:000002ee nothingToDo_415
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:1167   .text:0000033c nothingToDo_463
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:1285   .text:0000038a nothingToDo_511
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:1403   .text:000003d8 nothingToDo_559
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:1521   .text:00000426 nothingToDo_607
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:1639   .text:00000474 nothingToDo_655
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:1757   .text:000004c2 nothingToDo_703
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:1875   .text:00000510 nothingToDo_751
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:1993   .text:0000055e nothingToDo_799
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:2111   .text:000005ac nothingToDo_847
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:2229   .text:000005fa nothingToDo_895
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:2347   .text:00000648 nothingToDo_943
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:2465   .text:00000696 nothingToDo_991
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:2567   .text:000006d4 nothingToDo_1033
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:2692   .text:00000716 lcd_Init
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:2723   .text:00000730 updateLCD
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3441   .bss:00000004 dataEnable
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3431   .bss:00000001 hsyncCount
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3436   .bss:00000003 vSync
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3135   .text:0000088e __vector_11
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3425   .data:00000002 updateFrame
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3419   .bss:00000000 frameCount
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3237   .text:00000914 init_hsyncTimer
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3277   .text:0000093a isNewFrame
                             .bss:00000005 lastFrameCount.2222
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3317   .text:00000952 frameBufferUpdate
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3345   .text.startup:00000000 main
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s 			page 196


/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:3968   .progmem.data:00000200 characters
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccxfay3q.s:4740   .progmem.data:00000500 header

UNDEFINED SYMBOLS
__udivmodhi4
dmsLine
xyt_update
dmsCount
timer_setWGM
timer_selectDivisor
timer_compareMatchIntSetup
xyt_init
init_heartBeat
setHeartRate
heartUpdate
__do_copy_data
__do_clear_bss
