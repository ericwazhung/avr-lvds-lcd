GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 1


   1               		.file	"main.c"
   2               	__SREG__ = 0x3f
   3               	__SP_H__ = 0x3e
   4               	__SP_L__ = 0x3d
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.global __do_copy_data
   8               		.global __do_clear_bss
   9               		.stabs	"/Users/meh/_avrProjects/LCDdirectLVDS/60-thisGitThingIsMessingUpMyVersioningScheme/",100,0
  10               		.stabs	"main.c",100,0,2,.Ltext0
  11               		.text
  12               	.Ltext0:
  13               		.stabs	"gcc2_compiled.",60,0,0,0
  14               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,1,0
  15               		.stabs	"char:t(0,2)=@s8;r(0,2);0;255;",128,0,1,0
  16               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,1,0
  17               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,1,0
  18               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,1,0
  19               		.stabs	"long long int:t(0,6)=@s64;r(0,6);01000000000000000000000;0777777777777777777777;",128,0,1,
  20               		.stabs	"long long unsigned int:t(0,7)=@s64;r(0,7);0;01777777777777777777777;",128,0,1,0
  21               		.stabs	"short int:t(0,8)=r(0,8);-32768;32767;",128,0,1,0
  22               		.stabs	"short unsigned int:t(0,9)=r(0,9);0;0177777;",128,0,1,0
  23               		.stabs	"signed char:t(0,10)=@s8;r(0,10);-128;127;",128,0,1,0
  24               		.stabs	"unsigned char:t(0,11)=@s8;r(0,11);0;255;",128,0,1,0
  25               		.stabs	"float:t(0,12)=r(0,1);4;0;",128,0,1,0
  26               		.stabs	"double:t(0,13)=r(0,1);4;0;",128,0,1,0
  27               		.stabs	"long double:t(0,14)=r(0,1);4;0;",128,0,1,0
  28               		.stabs	"void:t(0,15)=(0,15)",128,0,1,0
  29               		.stabs	"projInfo.h",130,0,0,0
  30               		.stabs	"/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/inttypes.h",130,0,0,0
  31               		.stabs	"/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/stdint.h",130,0,0,0
  32               		.stabs	"int8_t:t(3,1)=(0,10)",128,0,121,0
  33               		.stabs	"uint8_t:t(3,2)=(0,11)",128,0,122,0
  34               		.stabs	"int16_t:t(3,3)=(0,1)",128,0,123,0
  35               		.stabs	"uint16_t:t(3,4)=(0,4)",128,0,124,0
  36               		.stabs	"int32_t:t(3,5)=(0,3)",128,0,125,0
  37               		.stabs	"uint32_t:t(3,6)=(0,5)",128,0,126,0
  38               		.stabs	"int64_t:t(3,7)=(0,6)",128,0,128,0
  39               		.stabs	"uint64_t:t(3,8)=(0,7)",128,0,129,0
  40               		.stabs	"intptr_t:t(3,9)=(3,3)",128,0,142,0
  41               		.stabs	"uintptr_t:t(3,10)=(3,4)",128,0,147,0
  42               		.stabs	"int_least8_t:t(3,11)=(3,1)",128,0,159,0
  43               		.stabs	"uint_least8_t:t(3,12)=(3,2)",128,0,164,0
  44               		.stabs	"int_least16_t:t(3,13)=(3,3)",128,0,169,0
  45               		.stabs	"uint_least16_t:t(3,14)=(3,4)",128,0,174,0
  46               		.stabs	"int_least32_t:t(3,15)=(3,5)",128,0,179,0
  47               		.stabs	"uint_least32_t:t(3,16)=(3,6)",128,0,184,0
  48               		.stabs	"int_least64_t:t(3,17)=(3,7)",128,0,192,0
  49               		.stabs	"uint_least64_t:t(3,18)=(3,8)",128,0,199,0
  50               		.stabs	"int_fast8_t:t(3,19)=(3,1)",128,0,213,0
  51               		.stabs	"uint_fast8_t:t(3,20)=(3,2)",128,0,218,0
  52               		.stabs	"int_fast16_t:t(3,21)=(3,3)",128,0,223,0
  53               		.stabs	"uint_fast16_t:t(3,22)=(3,4)",128,0,228,0
  54               		.stabs	"int_fast32_t:t(3,23)=(3,5)",128,0,233,0
  55               		.stabs	"uint_fast32_t:t(3,24)=(3,6)",128,0,238,0
  56               		.stabs	"int_fast64_t:t(3,25)=(3,7)",128,0,246,0
  57               		.stabs	"uint_fast64_t:t(3,26)=(3,8)",128,0,253,0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 2


  58               		.stabs	"intmax_t:t(3,27)=(3,7)",128,0,273,0
  59               		.stabs	"uintmax_t:t(3,28)=(3,8)",128,0,278,0
  60               		.stabn	162,0,0,0
  61               		.stabs	"int_farptr_t:t(2,1)=(3,5)",128,0,77,0
  62               		.stabs	"uint_farptr_t:t(2,2)=(3,6)",128,0,81,0
  63               		.stabn	162,0,0,0
  64               		.stabn	162,0,0,0
  65               		.stabs	"main.h",130,0,0,0
  66               		.stabs	"/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/avr/io.h",130,0,0,0
  67               		.stabs	"/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/avr/fuse.h",130,0,0,0
  68               		.stabs	"__fuse_t:t(6,1)=(6,2)=s3low:(0,11),0,8;high:(0,11),8,8;extended:(0,11),16,8;;",128,0,244,0
  69               		.stabn	162,0,0,0
  70               		.stabn	162,0,0,0
  71               		.stabs	"/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/stdlib.h",130,0,0,0
  72               		.stabs	"/usr/local/lib/gcc/avr/4.4.5/include/stddef.h",130,0,0,0
  73               		.stabs	"size_t:t(8,1)=(0,4)",128,0,211,0
  74               		.stabs	"wchar_t:t(8,2)=(0,1)",128,0,323,0
  75               		.stabn	162,0,0,0
  76               		.stabs	"div_t:t(7,1)=(7,2)=s4quot:(0,1),0,16;rem:(0,1),16,16;;",128,0,71,0
  77               		.stabs	"ldiv_t:t(7,3)=(7,4)=s8quot:(0,3),0,32;rem:(0,3),32,32;;",128,0,77,0
  78               		.stabs	"__compar_fn_t:t(7,5)=(7,6)=*(7,7)=f(0,1)",128,0,80,0
  79               		.stabn	162,0,0,0
  80               		.stabs	"_commonCode_localized/heartbeat/1.21/heartbeat.h",130,0,0,0
  81               		.stabs	"./_commonCode_localized/hfModulation/0.93/hfModulation.h",130,0,0,0
  82               		.stabs	"hfm_t:t(10,1)=(10,2)=B(10,3)=s6runningSum:(3,4),0,16;desiredSum:(3,4),16,16;maxPower:(3,2)
  83               		.stabn	162,0,0,0
  84               		.stabn	162,0,0,0
  85               		.stabn	162,0,0,0
  86               		.stabs	"/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/avr/pgmspace.h",130,0,0,0
  87               		.stabs	"prog_void:t(11,1)=(11,2)=(11,2)",128,0,217,0
  88               		.stabs	"prog_char:t(11,3)=(11,4)=@s8;r(11,4);0;255;",128,0,218,0
  89               		.stabs	"prog_uchar:t(11,5)=(11,6)=@s8;r(11,6);0;255;",128,0,219,0
  90               		.stabs	"prog_int8_t:t(11,7)=(11,8)=(0,10)",128,0,221,0
  91               		.stabs	"prog_uint8_t:t(11,9)=(11,10)=(0,11)",128,0,222,0
  92               		.stabs	"prog_int16_t:t(11,11)=(11,12)=(0,1)",128,0,223,0
  93               		.stabs	"prog_uint16_t:t(11,13)=(11,14)=(0,4)",128,0,224,0
  94               		.stabs	"prog_int32_t:t(11,15)=(11,16)=(0,3)",128,0,225,0
  95               		.stabs	"prog_uint32_t:t(11,17)=(11,18)=(0,5)",128,0,226,0
  96               		.stabs	"prog_int64_t:t(11,19)=(11,20)=(0,6)",128,0,228,0
  97               		.stabs	"prog_uint64_t:t(11,21)=(11,22)=(0,7)",128,0,229,0
  98               		.stabn	162,0,0,0
  99               		.stabs	"_commonCode_localized/sineTable/0.99/sineTable.h",130,0,0,0
 100               		.stabs	"theta_t:t(12,1)=(3,3)",128,0,69,0
 101               		.stabs	"sine_t:t(12,2)=(3,3)",128,0,96,0
 102               		.stabs	"mult_t:t(12,3)=(3,5)",128,0,99,0
 103               		.stabs	"axis_t:t(12,4)=(3,5)",128,0,114,0
 104               		.stabn	162,0,0,0
 105               		.stabs	"rowSegBuffer.h",130,0,0,0
 106               		.stabs	"_NONAME_:T(13,1)=s2red_length:(3,2),0,8;green_blue:(3,2),8,8;;",128,0,0,0
 107               		.stabs	"seg_t:t(13,2)=(13,1)",128,0,128,0
 108               		.stabn	162,0,0,0
 109               		.stabs	"pll_enable:F(0,15)",36,0,1,pll_enable
 110               	.global	pll_enable
 111               		.type	pll_enable, @function
 112               	pll_enable:
 113               		.stabd	46,0,0
 114               		.stabs	"pll.c",132,0,0,.Ltext1
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 3


 115               	.Ltext1:
   1:pll.c         **** void pll_enable(void)
   2:pll.c         **** {
 116               		.stabn	68,0,2,.LM0-.LFBB1
 117               	.LM0:
 118               	.LFBB1:
 119               	/* prologue: function */
 120               	/* frame size = 0 */
   3:pll.c         ****    //Stolen from threePinIDer109t:
   4:pll.c         **** 
   5:pll.c         ****    //Set Timer1 to use the "asynchronous clock source" (PLL at 64MHz)
   6:pll.c         ****    // With phase-correct PWM (256 steps up, then back down) and CLKDIV1
   7:pll.c         ****    // this is 64MHz/512=125kHz
   8:pll.c         ****    // The benefit of such high PWM frequency is the low RC values necessary
   9:pll.c         ****    //  for filtering to DC.
  10:pll.c         ****    // "To change Timer/Counter1 to the async mode follow this procedure"
  11:pll.c         ****    // 1: Enable the PLL
  12:pll.c         ****    setbit(PLLE, PLLCSR);
 121               		.stabn	68,0,12,.LM1-.LFBB1
 122               	.LM1:
 123 0000 89B5      		in r24,73-0x20
 124 0002 8260      		ori r24,lo8(2)
 125 0004 89BD      		out 73-0x20,r24
 126               	.LBB90:
 127               	.LBB91:
 128               	.LBB92:
 129               	.LBB93:
 130               	.LBB94:
 131               	.LBB95:
 132               		.stabs	"/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h",132,0,0,.Ltext2
 133               	.Ltext2:
   1:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** /* Copyright (c) 2002, Marek Michalkiewicz
   2:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****    Copyright (c) 2007 Joerg Wunsch
   3:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****    All rights reserved.
   4:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
   5:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****    Redistribution and use in source and binary forms, with or without
   6:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****    modification, are permitted provided that the following conditions are met:
   7:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
   8:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****    * Redistributions of source code must retain the above copyright
   9:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****      notice, this list of conditions and the following disclaimer.
  10:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  11:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****    * Redistributions in binary form must reproduce the above copyright
  12:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****      notice, this list of conditions and the following disclaimer in
  13:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****      the documentation and/or other materials provided with the
  14:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****      distribution.
  15:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  16:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****    * Neither the name of the copyright holders nor the names of
  17:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****      contributors may be used to endorse or promote products derived
  18:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****      from this software without specific prior written permission.
  19:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  20:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  21:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  22:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  23:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****   ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
  24:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  25:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  26:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 4


  27:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  28:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  29:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  30:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****   POSSIBILITY OF SUCH DAMAGE. */
  31:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  32:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** /* $Id: delay_basic.h 2143 2010-06-08 21:19:51Z joerg_wunsch $ */
  33:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  34:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** #ifndef _UTIL_DELAY_BASIC_H_
  35:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** #define _UTIL_DELAY_BASIC_H_ 1
  36:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  37:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** #include <inttypes.h>
  38:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  39:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** #if !defined(__DOXYGEN__)
  40:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** static inline void _delay_loop_1(uint8_t __count) __attribute__((always_inline));
  41:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** static inline void _delay_loop_2(uint16_t __count) __attribute__((always_inline));
  42:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** #endif
  43:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  44:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** /** \file */
  45:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** /** \defgroup util_delay_basic <util/delay_basic.h>: Basic busy-wait delay loops
  46:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     \code
  47:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     #include <util/delay_basic.h>
  48:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     \endcode
  49:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  50:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     The functions in this header file implement simple delay loops
  51:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     that perform a busy-waiting.  They are typically used to
  52:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     facilitate short delays in the program execution.  They are
  53:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     implemented as count-down loops with a well-known CPU cycle
  54:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     count per loop iteration.  As such, no other processing can
  55:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     occur simultaneously.  It should be kept in mind that the
  56:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     functions described here do not disable interrupts.
  57:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  58:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     In general, for long delays, the use of hardware timers is
  59:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     much preferrable, as they free the CPU, and allow for
  60:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     concurrent processing of other events while the timer is
  61:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     running.  However, in particular for very short delays, the
  62:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     overhead of setting up a hardware timer is too much compared
  63:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     to the overall delay time.
  64:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  65:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     Two inline functions are provided for the actual delay algorithms.
  66:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  67:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** */
  68:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  69:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** /** \ingroup util_delay_basic
  70:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  71:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     Delay loop using an 8-bit counter \c __count, so up to 256
  72:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     iterations are possible.  (The value 256 would have to be passed
  73:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     as 0.)  The loop executes three CPU cycles per iteration, not
  74:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     including the overhead the compiler needs to setup the counter
  75:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     register.
  76:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  77:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     Thus, at a CPU speed of 1 MHz, delays of up to 768 microseconds
  78:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     can be achieved.
  79:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** */
  80:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** void
  81:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** _delay_loop_1(uint8_t __count)
  82:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** {
  83:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 	__asm__ volatile (
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 5


  84:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 		"1: dec %0" "\n\t"
  85:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 		"brne 1b"
  86:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 		: "=r" (__count)
  87:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 		: "0" (__count)
  88:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 	);
  89:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** }
  90:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  91:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** /** \ingroup util_delay_basic
  92:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  93:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     Delay loop using a 16-bit counter \c __count, so up to 65536
  94:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     iterations are possible.  (The value 65536 would have to be
  95:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     passed as 0.)  The loop executes four CPU cycles per iteration,
  96:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     not including the overhead the compiler requires to setup the
  97:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     counter register pair.
  98:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 
  99:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     Thus, at a CPU speed of 1 MHz, delays of up to about 262.1
 100:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****     milliseconds can be achieved.
 101:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h ****  */
 102:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** void
 103:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** _delay_loop_2(uint16_t __count)
 104:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** {
 105:/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h **** 	__asm__ volatile (
 134               		.stabn	68,0,105,.LM2-.LFBB1
 135               	.LM2:
 136 0006 88EC      		ldi r24,lo8(200)
 137 0008 90E0      		ldi r25,hi8(200)
 138               	/* #APP */
 139               	 ;  105 "/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h" 1
 140 000a 0197      		1: sbiw r24,1
 141 000c 01F4      		brne 1b
 142               	 ;  0 "" 2
 143               	/* #NOAPP */
 144 000e 00C0      		rjmp .L2
 145               	.L3:
 146               	.LBE95:
 147               	.LBE94:
 148               	.LBE93:
 149               	.LBE92:
 150               	.LBE91:
 151               	.LBE90:
 152               		.stabs	"pll.c",132,0,0,.Ltext3
 153               	.Ltext3:
  13:pll.c         ****    // 2: Wait 100us for the PLL to stabilize
  14:pll.c         ****    // (can't use dmsWait since the timer updating the dmsCount hasn't yet been started!)
  15:pll.c         ****    _delay_us(100);
  16:pll.c         **** //   dmsWait(1);
  17:pll.c         ****    // 3: Poll PLOCK until it is set...
  18:pll.c         ****    while(!getbit(PLOCK, PLLCSR))
  19:pll.c         ****    {
  20:pll.c         ****       asm("nop");
 154               		.stabn	68,0,20,.LM3-.LFBB1
 155               	.LM3:
 156               	/* #APP */
 157               	 ;  20 "pll.c" 1
 158 0010 0000      		nop
 159               	 ;  0 "" 2
 160               	/* #NOAPP */
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 6


 161               	.L2:
  18:pll.c         ****    while(!getbit(PLOCK, PLLCSR))
 162               		.stabn	68,0,18,.LM4-.LFBB1
 163               	.LM4:
 164 0012 09B4      		in __tmp_reg__,73-0x20
 165 0014 00FE      		sbrs __tmp_reg__,0
 166 0016 00C0      		rjmp .L3
  21:pll.c         ****    }
  22:pll.c         ****    // 4: Set the PCKE bit to enable async mode
  23:pll.c         ****    setbit(PCKE, PLLCSR);
 167               		.stabn	68,0,23,.LM5-.LFBB1
 168               	.LM5:
 169 0018 89B5      		in r24,73-0x20
 170 001a 8460      		ori r24,lo8(4)
 171 001c 89BD      		out 73-0x20,r24
 172               	/* epilogue start */
  24:pll.c         **** 
  25:pll.c         **** }
 173               		.stabn	68,0,25,.LM6-.LFBB1
 174               	.LM6:
 175 001e 0895      		ret
 176               		.size	pll_enable, .-pll_enable
 177               		.stabs	"__count:r(3,4)",64,0,138,24
 178               		.stabn	192,0,0,.LBB94-.LFBB1
 179               		.stabn	224,0,0,.LBE94-.LFBB1
 180               	.Lscope1:
 181               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 182               		.stabd	78,0,0
 183               		.stabs	"lvds_timerInit:F(0,15)",36,0,964,lvds_timerInit
 184               	.global	lvds_timerInit
 185               		.type	lvds_timerInit, @function
 186               	lvds_timerInit:
 187               		.stabd	46,0,0
 188               		.stabs	"lvds.c",132,0,0,.Ltext4
 189               	.Ltext4:
   1:lvds.c        **** 
   2:lvds.c        **** /*
   3:lvds.c        **** This is an old note from main() upon init...
   4:lvds.c        **** And, actually, the Timer0 stuff may not be related to the comment.
   5:lvds.c        ****   I have no idea how it functioned, it seems the rest was deleted.
   6:lvds.c        ****    //For synchronizing timer1 settings (to avoid glitches)
   7:lvds.c        ****    // count the number of CPU cycles...
   8:lvds.c        ****    // depending on how many cycles it takes to start this and whatnot, 
   9:lvds.c        ****    // there may be an offset. But the jist is we know every 7 cycles
  10:lvds.c        ****    // the timer1 reset is synchronized with the CPU instructions...
  11:lvds.c        **** // OCR0A = 6;
  12:lvds.c        **** // timer_setWGM(0, WGM_CLR_ON_COMPARE);
  13:lvds.c        **** // timer_selectDivisor(0, CLKDIV1);
  14:lvds.c        **** */
  15:lvds.c        **** 
  16:lvds.c        **** 
  17:lvds.c        **** 
  18:lvds.c        **** //For Red and Green (NOT Blue) This enables four shades, instead of three
  19:lvds.c        **** // (including black)
  20:lvds.c        **** // Doing so increases pixel-processing time, thus the pixel-widths
  21:lvds.c        **** // (thus decreasing resolution)
  22:lvds.c        **** // each color takes 9 cycles to process in three-shade mode
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 7


  23:lvds.c        **** // or 12 cycles for red and green, plus 9 for blue in four-shade mode
  24:lvds.c        **** // a/o v59: I don't think this does anything in ROW_SEG_BUFFER
  25:lvds.c        **** #define FOUR_SHADES TRUE
  26:lvds.c        **** 
  27:lvds.c        **** 
  28:lvds.c        **** 
  29:lvds.c        **** 
  30:lvds.c        **** 
  31:lvds.c        **** //a/o v60: These are old notes, as well...
  32:lvds.c        **** // As I recall, there was some issue with DC signals on the LVDS lines.
  33:lvds.c        **** // I think this was when I was attempting to use AC-Coupling (long before
  34:lvds.c        **** // the 74LS86 was deemed functional)
  35:lvds.c        **** // and probably has no relevence now.
  36:lvds.c        **** //DC_DE is only used in drawPix...
  37:lvds.c        **** //#define DC_DE_DISABLE TRUE
  38:lvds.c        **** //This should remove DC from Vsync, etc...
  39:lvds.c        **** // Currently only implemented with FULL_INIT_TESTS below...
  40:lvds.c        **** //#define REMOVE_DC TRUE
  41:lvds.c        **** 
  42:lvds.c        **** //There are two methods for configuring the PWM channels to output
  43:lvds.c        **** // pseudo-serial data for changes between timing modes... 
  44:lvds.c        **** // (e.g. Horizontal Front Porch -> Hsync -> Back Porch -> Data Enabled)
  45:lvds.c        **** // * Write all the necessary/related registers upon each transition
  46:lvds.c        **** //		Leads to redundancy, as many of the registers are already properly
  47:lvds.c        **** //    configured from the last transition.
  48:lvds.c        **** // * Write only the changed registers
  49:lvds.c        **** //    (As I recall, it was possible to have only a single register-change
  50:lvds.c        **** //     on most, if not all, transitions...)
  51:lvds.c        **** //
  52:lvds.c        **** // The benefit of the latter being: Since the pixel-clock is generally
  53:lvds.c        **** // faster than the processor-clock, or at least not-aligned, reducing the
  54:lvds.c        **** // number of instructions to *one* would allow for glitchless transitions
  55:lvds.c        **** // in the actual PWM signal... guaranteeing that at least the data being
  56:lvds.c        **** // transmitted would conform to FPD-Link compatible signals...
  57:lvds.c        **** //  (no glitches that might, e.g. cause a couple serial-frames to send both
  58:lvds.c        **** //   Data Enable *and* VSync active at the same time. Or, e.g. to send a
  59:lvds.c        **** //   serial-frame which indicates an H-sync while transitioning between
  60:lvds.c        **** //   the H-Back-Porch and Data-Enable)
  61:lvds.c        **** //   Since the only display I've gotten working via LVDS, so far, is 
  62:lvds.c        **** //    DE-Only, these tests and the importance of these glitches will
  63:lvds.c        **** //    probably have to be revisited when working with a display that pays
  64:lvds.c        **** //    attention to the Hsync and Vsync signals.
  65:lvds.c        **** // FULL_INIT_TESTS uses the first option, which guarantees that if I missed
  66:lvds.c        **** // some register-transition (while coding), that at least it *should* send
  67:lvds.c        **** //  the proper signals (after the transition).
  68:lvds.c        **** //  (The transition-time may, of course, lead to incompatible signals)
  69:lvds.c        **** // So, it's mostly for testing, and should be removed if possible.
  70:lvds.c        **** //#define FULL_INIT_TESTS TRUE
  71:lvds.c        **** 
  72:lvds.c        **** //This should just reduce the number of instructions which actually get
  73:lvds.c        **** // executed, since Hsync doesn't need to be sent, etc.
  74:lvds.c        **** // Actually, I'm working with a DE-Only display right now, and this is NOT
  75:lvds.c        **** // set to TRUE... I haven't tested it with this TRUE
  76:lvds.c        **** //#define DE_ONLY_DISPLAY  TRUE
  77:lvds.c        **** 
  78:lvds.c        **** 
  79:lvds.c        **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 8


  80:lvds.c        **** //PWM Timing:
  81:lvds.c        **** // (ATTiny861, Timer1, FastPWM, PWM1X;
  82:lvds.c        **** //  a/o LCDdirectLVDS1_5_PWMtimingTests):
  83:lvds.c        **** //
  84:lvds.c        **** //  PWM output on OC1A
  85:lvds.c        **** //    if OCR1A = 0, OC1A remains constant High
  86:lvds.c        **** //       OCR1A = 1, OC1A is low for 2 counts
  87:lvds.c        **** //       OCR1A = 2, OC1A is low for 3 counts
  88:lvds.c        **** //       OCR1A = 3, OC1A is low for 4 counts
  89:lvds.c        **** //       OCR1A = OCR1C, OC1A remains constant Low
  90:lvds.c        **** //
  91:lvds.c        **** //    THUS:
  92:lvds.c        **** //       compare-match occurs when TCNT changes AWAY from match
  93:lvds.c        **** //         (assuming TCNT starts at 0 for one pulse, 1 for one pulse...)
  94:lvds.c        **** //       TOP (OCR1C) is included in the count...
  95:lvds.c        **** //       There is no single-count pulse-width
  96:lvds.c        **** //         (Though, it seems dead-time could simulate it...)
  97:lvds.c        **** //         (set a deadtime of 1 on the BOTTOM edge and OCR1A)
  98:lvds.c        **** //         (but then there's no high for only one clock)
  99:lvds.c        **** 
 100:lvds.c        **** 
 101:lvds.c        **** 
 102:lvds.c        **** // Rather than *possibly* mess with timing (on other displays?)
 103:lvds.c        **** // Also for testing...
 104:lvds.c        **** //#define DT0_BLUES_ONLY   TRUE
 105:lvds.c        **** 
 106:lvds.c        **** //A/O v13: Using the Samsung LTN display, instead of the IDTech IAXG
 107:lvds.c        **** // LTN appears to be content with my pseudo-LVDS scheme.
 108:lvds.c        **** // IAXG has never unblanked
 109:lvds.c        **** //      Even though suitable timings were found with SwitchResX
 110:lvds.c        **** //      Maybe due to psuedo-LVDS
 111:lvds.c        **** //            slight timing issues // It probably doesn't work with all cases...
 112:lvds.c        **** // Definitely with drawPix/Images...(RC oscillator variances?)
 113:lvds.c        **** //            glitches when switching LVDS states 
 114:lvds.c        **** //                 (thought I had that figured out, originally)
 115:lvds.c        **** //      The fact the LTN appears to recognize the signalling suggests the
 116:lvds.c        **** //      IAXG would be worth further exploration...
 117:lvds.c        **** //         Unfortunately, the CCFT blew out my inverter
 118:lvds.c        **** //                        And I must have put it back together incorrectly
 119:lvds.c        **** //                        (backlight filters out of order or flipped?)
 120:lvds.c        **** //                        (which actually makes for some very interesting
 121:lvds.c        **** //                         visuals, but hard to develop with)
 122:lvds.c        **** //      IAXG: uses DE, V, and H
 123:lvds.c        **** //             At low pixel-clock DE is active for fewer pixels...
 124:lvds.c        **** //              Last Tested: 680 was full-screen
 125:lvds.c        **** //             Nice because it increases the frame-rate!
 126:lvds.c        **** //      LTN:  uses DE only
 127:lvds.c        **** 
 128:lvds.c        **** 
 129:lvds.c        **** // The idea is to use FastPWM with the PLL to implement 64-85Mbits/sec
 130:lvds.c        **** //  (the PLL on the Tiny861 supposedly maxes out at 85MHz)
 131:lvds.c        **** //  (Though I am currently running with OSCAL set to the highest frequency
 132:lvds.c        **** //   and the PLL seems to be syncing at about 128MHz)
 133:lvds.c        **** 
 134:lvds.c        **** 
 135:lvds.c        **** // Wiring:
 136:lvds.c        **** //   Many iterations of AVR->Differential "LVDS" circuitry resulted in the
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 9


 137:lvds.c        **** //   simplest of all:
 138:lvds.c        **** //
 139:lvds.c        **** //   Believe it or not, the XOR is a standard TTL LS-series XOR: 74LS86
 140:lvds.c        **** //     Specifically: TI SN74LS86N from 1980 (the only XOR in my collection)
 141:lvds.c        **** //   It's spec'd to run from 4.5-5.5V, and its propagatio delays and slew
 142:lvds.c        **** //     rates aren't really spec'd to be good enough for 128MHz pixel clock
 143:lvds.c        **** //     yet it's working...
 144:lvds.c        **** //   Further, the output voltages are right in the LVDS range,
 145:lvds.c        **** //     IIRC (last I 'scoped) around 1.5V High and 1.0V Low
 146:lvds.c        **** //      (Don't forget the LCD has a 100ohm resistor between
 147:lvds.c        **** //         RXinN/clk+ and RXinN/clk-)
 148:lvds.c        **** //   Most signals are connected as shown (RXin0, RXin2, RXclk)
 149:lvds.c        **** //   Green is the only one which has RXin1- and RXin1+ swapped
 150:lvds.c        **** //     since it is on the /OC1B (inverted) output
 151:lvds.c        **** //   Green may benefit from a pull-up resistor on /OC1B
 152:lvds.c        **** //     there was some weird noise appearing like a floating-input
 153:lvds.c        **** //     when the full frame was not filled with pixels
 154:lvds.c        **** //     (but it should've waited to disable /OC1B until *after* the delays,
 155:lvds.c        **** //      etc. So I'm not sure what it was)
 156:lvds.c        **** //
 157:lvds.c        **** //   It's probably best to use two XORs from the same chip for a single
 158:lvds.c        **** //    LVDS channel, since different chips may have slightly different
 159:lvds.c        **** //    characteristics. 
 160:lvds.c        **** //
 161:lvds.c        **** //   The entire circuit, thus, requires TWO 74LS86's 
 162:lvds.c        **** //    (four XORs apiece, two per LVDS channel, 8-total)
 163:lvds.c        **** //
 164:lvds.c        **** //
 165:lvds.c        **** //              VCC3V3   VCC3V3
 166:lvds.c        **** //                |        |
 167:lvds.c        **** //                +---\ \¯¯¯-_
 168:lvds.c        **** //                     | |    ¯-
 169:lvds.c        **** //                     | | XOR   >------> RXinN/clk-
 170:lvds.c        **** //   AVR               | |    _-
 171:lvds.c        **** //   OC1x >----+------/ /___-¯
 172:lvds.c        **** //   output    |
 173:lvds.c        **** //             |   
 174:lvds.c        **** //             |      
 175:lvds.c        **** //             `------\ \¯¯¯-_
 176:lvds.c        **** //                     | |    ¯-
 177:lvds.c        **** //                     | | XOR   >------> RXinN/clk+
 178:lvds.c        **** //                     | |    _-
 179:lvds.c        **** //                +---/ /___-¯
 180:lvds.c        **** //                |        |
 181:lvds.c        **** //               GND      GND
 182:lvds.c        **** //
 183:lvds.c        **** //  
 184:lvds.c        **** //  Also used: The TTL 74AHC series...
 185:lvds.c        **** //    I found some one-gang 74AHC1G32 and 74AHC1G86's on an old iBook
 186:lvds.c        **** //     motherboard. (An OR and an XOR, respectively). These are spec'd for
 187:lvds.c        **** //     3.3V operation, and faster. The output voltages appear OK for LVDS
 188:lvds.c        **** //     (with a 100ohm load in the LCD)
 189:lvds.c        **** //
 190:lvds.c        **** //  NOTE: Since I only had enough of these 1-gang devices for two LVDS
 191:lvds.c        **** //     channels, I had to implement Red and Green with the LS 
 192:lvds.c        **** //     before switching all channels to the LS... Using different chips
 193:lvds.c        **** //     (specifically, different TYPES of chips) for different channels
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 10


 194:lvds.c        **** //     caused timing issues: Since the AHC is faster, the clock and Blue
 195:lvds.c        **** //     signals are synchronized, but the red and green signals were shifted
 196:lvds.c        **** //     a bit or two (resulting in "Black" appearing green, of course
 197:lvds.c        **** //     true black isn't really possible with my timing scheme... see below)
 198:lvds.c        **** //
 199:lvds.c        **** //  For other circuits attempted, see oldNotes.txt
 200:lvds.c        **** //     (and boy there were many, involving voltage dividers, AC coupling,
 201:lvds.c        **** //      reference voltages, BJT differential amplifiers... I doubt I 
 202:lvds.c        **** //      documented them all, or even most. Whoda thunk the simplest, 
 203:lvds.c        **** //      especially under- AND over-spec'd--timing, supply voltage, and
 204:lvds.c        **** //      output voltage--would be the one...?)
 205:lvds.c        **** //
 206:lvds.c        **** // LVDS/FPD-Link timing:
 207:lvds.c        **** 
 208:lvds.c        **** //            |<--- (LCDdirectLVDS: "pixel") --->|
 209:lvds.c        **** //  Timer1:   |<-- One Timer1 Cycle (OCR1C=6) -->|
 210:lvds.c        **** //  TCNT:     |  0   1    2    3    4    5    6  |  0   1    2    3    
 211:lvds.c        **** //            |____.____.____.____               |____.____.____.____
 212:lvds.c        **** //  RXclk+:   /         |         \    .    .    /         |         \ //
 213:lvds.c        **** //            |         |          ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|         |
 214:lvds.c        **** // One Pixel: |         |<--- One FPD-Link Pixel Cycle --->|
 215:lvds.c        **** //            |                                  |
 216:lvds.c        **** // "Blue/DVH" |____ ____v____ ____ ____v____ ____|____ ____
 217:lvds.c        **** //  RXin2:    X B3 X B2 X DE X /V X /H X B5 X B4 X B3 X B2 X ...
 218:lvds.c        **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯
 219:lvds.c        **** //            |         |<--Not Blue-->|         |
 220:lvds.c        **** //            |                                  |
 221:lvds.c        **** // "Green"    |____ ____v____ ____v____ ____ ____|____ ____
 222:lvds.c        **** //  RXin1:    X G2 X G1 X B1 X B0 X G5 X G4 X G3 X G2 X G1 X ...
 223:lvds.c        **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯ 
 224:lvds.c        **** //            |         |<------->|-Not Green    |
 225:lvds.c        **** //
 226:lvds.c        **** // "Red"      |____ ____v____v____ ____ ____ ____|____ ____
 227:lvds.c        **** //  RXin0:    X R1 X R0 X G0 X R5 X R4 X R3 X R2 X R1 X R0 X ...
 228:lvds.c        **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯
 229:lvds.c        **** //            |         |<-->|-Not Red
 230:lvds.c        **** //
 231:lvds.c        **** //   Of course: The Not Green/Red bits above are low-bits and
 232:lvds.c        **** //              basically have little/no visible effect
 233:lvds.c        **** //
 234:lvds.c        **** //
 235:lvds.c        **** // Ponderings on using /OC1x's and OC1D for other colors...
 236:lvds.c        **** //    /OC1D could easily be used for another color, unaffected by others
 237:lvds.c        **** //          since DT1(L) and OCR1D are unused
 238:lvds.c        **** //
 239:lvds.c        **** // DE:   Blue Values
 240:lvds.c        **** //       -----------
 241:lvds.c        **** //       OCR1A=4,5,6   (OCR1A=6, Full-Blue would force /OC1A low,
 242:lvds.c        **** //       DT1(H)=0,1,2                      e.g. Green=Full-Green or Off)
 243:lvds.c        **** //                      Also: OCR1A=4,5 would affect Green
 244:lvds.c        **** //                            (DT1(L) is from this edge...)
 245:lvds.c        **** //                            DT1(H) also affects complementary OC1D
 246:lvds.c        **** //
 247:lvds.c        **** // CLK:  OCR1B=3       CLOCK can NOT be complementary-output mode
 248:lvds.c        **** //                                   (/OC1B unusuable)
 249:lvds.c        **** //                                   otherwise, DT1 would affect clock
 250:lvds.c        **** //
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 11


 251:lvds.c        **** //
 252:lvds.c        **** // CLOCK_INSENSITIVITY_TESTING:
 253:lvds.c        **** //   (a/o 56-36-3ish, no longer testable)
 254:lvds.c        **** //    Testing of DE/Blue's DeadTime values on Clocking...
 255:lvds.c        **** //       Image-shift (not sure why, more calculations? Not *that* many!)
 256:lvds.c        **** //       Blue now has only two shades besides black
 257:lvds.c        **** //         ~66% and 100%
 258:lvds.c        **** //       Now each blue pixel (the ones appearing black)
 259:lvds.c        **** //         is bordered by a blue line...
 260:lvds.c        **** //    All doable. Would have preferred 3 shades besides black,
 261:lvds.c        **** //       but two isn't bad.
 262:lvds.c        **** //
 263:lvds.c        **** //  New Idea: Since CLOCK can be used with DT1H (during DE)
 264:lvds.c        **** //    DE/Blue DT values are 0, 1, or 2 (D0, D1, D2)
 265:lvds.c        **** //     Dn corresponds to the low-to-high dead-timer value
 266:lvds.c        **** //                   (aka counter-reset delay, on OCR1x)
 267:lvds.c        **** //     dn corresponds to the high-to-low dead-timer value
 268:lvds.c        **** //                   (aka OCR match delay, on /OCR1x)
 269:lvds.c        **** //     Cn corresponds to OCR1x=n
 270:lvds.c        **** //
 271:lvds.c        **** // This was easier to comprehend in v<26... now it's more informative
 272:lvds.c        **** //   but harder to view...
 273:lvds.c        **** //                          OCR1B = 3
 274:lvds.c        **** //  TCNT:     |  0   1    2    3  | 4    5    6
 275:lvds.c        **** //
 276:lvds.c        **** //  CLKideal: /¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯\______________/
 277:lvds.c        **** //
 278:lvds.c        **** //            |____ ____ ____.____v              |
 279:lvds.c        **** //  CLK:   D0>/ D1>/ D2>/         \    .    .    /
 280:lvds.c        **** //  OC1B      |¯¯¯¯ ¯¯¯¯          |¯¯¯¯ ¯¯¯¯ ¯¯¯¯|
 281:lvds.c        **** //            |                   |
 282:lvds.c        **** //            | G2   G1   B1   B0 | G5   G4   G3
 283:lvds.c        **** //  Green:    |                   |____ ____ ____
 284:lvds.c        **** //  /OC1B     \    .    .    . d0>/ d1>/ d2>/ d3?\  //
 285:lvds.c        **** //            |¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯
 286:lvds.c        **** //            |
 287:lvds.c        **** //            | R1   R0   G0   R5   R4   R3   R2
 288:lvds.c        **** //  Red:      |____ ____ ____ ____ ____ ____ ____
 289:lvds.c        **** //  OC1D   D0>/ D1>/ D2>/ C2>\ C3>\ C4>\ C5>\ C6...
 290:lvds.c        **** //             ¯¯¯¯ ¯¯¯¯      ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯
 291:lvds.c        **** //             ____ ____ ____ ____ ____ ____ ____
 292:lvds.c        **** //  /OC1D     \ ^OCR1D>=6^ L>/  M>/  N>/  O>/ P?>...
 293:lvds.c        **** //             ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯
 294:lvds.c        **** //
 295:lvds.c        **** //              B3   B2   DE   /V   /H   B5   B4
 296:lvds.c        **** // "Blue/DVH" |____ ____ ____.____.____ ____ ____
 297:lvds.c        **** //  OC1A:  D0>/ D1>/ D2>/           C4>\ C5>\ C6...
 298:lvds.c        **** //            |¯¯¯¯ ¯¯¯¯                ¯¯¯¯ ¯¯¯¯
 299:lvds.c        **** //             ____ ____ ____ ____ ____ ____ ____
 300:lvds.c        **** //  /OC1A:    \  ^^^--OCR1A>=6--^^^  X>/  Y>/ Z?>\  //
 301:lvds.c        **** //  (usable?)  ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯
 302:lvds.c        **** //                 X: OCR1A=4, DTL=0
 303:lvds.c        **** //                 Y: OCR1A=4, DTL=1; OCR1A=5, DTL=0
 304:lvds.c        **** //                 Z: OCR1A=4, DTL=2; OCR1A=5, DTL=1; OCR1A>=6
 305:lvds.c        **** 
 306:lvds.c        **** //I've looked it over extensively, albiet exhaustedly, and it seems
 307:lvds.c        **** // there's only one way to do this. Unfortunately, DTH=1,2 *does* affect
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 12


 308:lvds.c        **** // the clocking. Everything displays properly, but the lighter shades of 
 309:lvds.c        **** // blue enabled by DTH=1,2 don't display at all (or dang-near black)
 310:lvds.c        **** // So there's really no benefit to using DTH=1,2 during DE for blues...
 311:lvds.c        **** // That gives two (similar) shades of bright blue 63/63 and 47/63
 312:lvds.c        **** // *'d are arbitrarily chosen for implementation
 313:lvds.c        **** // F'd are selected when FOUR_SHADES is TRUE
 314:lvds.c        **** //   (experimentation might show other choices are better)
 315:lvds.c        **** //
 316:lvds.c        **** // Red is connected to OC1D, Complementary output is not necessary
 317:lvds.c        **** //  OCR1D determines its brightness:
 318:lvds.c        **** //   (+OC1D => RX0+)
 319:lvds.c        **** //   *Off (0/63): OCR1D = 0  \      //
 320:lvds.c        **** //    3/63:         OCR1D = 1   > These three appear identical in glColorTest
 321:lvds.c        **** //    3/63:         OCR1D = 2  /  (G0 Active, from here down)
 322:lvds.c        **** //   *35/63:      OCR1D = 3
 323:lvds.c        **** //   F51/63:      OCR1D = 4
 324:lvds.c        **** //    59/63:      OCR1D = 5  \  These two appear identical in glColorTest
 325:lvds.c        **** //   *63/63:      OCR1D >= 6 /
 326:lvds.c        **** //    (+OC1D => RX0-)
 327:lvds.c        **** //    Not really worth pursuing, next step from 60/63 is 28/63 then 12
 328:lvds.c        **** //
 329:lvds.c        **** // Green is connected to /OC1B (the complementary channel to CLK)
 330:lvds.c        **** //  Its polarity is reversed (but that's easy since we have a single-ended
 331:lvds.c        **** //  to differential converter, and its outputs can just be swapped)
 332:lvds.c        **** //  DTL1 determines its brightness (G0 affected by Red):
 333:lvds.c        **** //   (/OC1B => RX1+)
 334:lvds.c        **** //    Off (0/63):   DTL1 = 3 (is this possible?)
 335:lvds.c        **** //    8-9/63:         DTL1 = 2
 336:lvds.c        **** //    24-25/63:      DTL1 = 1
 337:lvds.c        **** //    56-57/63:      DTL1 = 0
 338:lvds.c        **** //   (/OC1B => RX1-)            (B1,0 Active, as well as G2,1)
 339:lvds.c        **** //     *Off (6/63):   DTL1 = 0
 340:lvds.c        **** //   *38-39/63:      DTL1 = 1
 341:lvds.c        **** //   F54-55/63:      DTL1 = 2
 342:lvds.c        **** //   *62-63/63:      DTL1 = 3
 343:lvds.c        **** //
 344:lvds.c        **** // Blue, as in previous versions, is connected to OC1A, DTH=0 during DE 
 345:lvds.c        **** //  so as not to interfere with the clock
 346:lvds.c        **** //  OCR1A determines the brightness (B1,0 active, per Green->RX1-):
 347:lvds.c        **** //    (+OC1A => RX2+)               (B3,2 Active from here down)
 348:lvds.c        **** //    *Off (15/63):   OCR1A=4
 349:lvds.c        **** //    *47/63:          OCR1A=5
 350:lvds.c        **** //      *63/63:         OCR1A=6
 351:lvds.c        **** //
 352:lvds.c        **** // The clock is single-ended (complementary-mode disabled) during NON-DE
 353:lvds.c        **** //  because the DE/V/H signals (except in DE mode) require DT1H to vary.
 354:lvds.c        **** //  When DE is active the clock channel (OC1B) is switched to 
 355:lvds.c        **** //  complementary-output-mode to enable the Green PWM output
 356:lvds.c        **** //
 357:lvds.c        **** // For easier viewing:
 358:lvds.c        **** //   Red: (+OC1D => RX0+)
 359:lvds.c        **** //    Off (0/63): OCR1D = 0
 360:lvds.c        **** //    35/63:      OCR1D = 3
 361:lvds.c        **** //    51/63:      OCR1D = 4   (FOUR_SHADES only)
 362:lvds.c        **** //    63/63:      OCR1D >= 6
 363:lvds.c        **** //   Green: (/OC1B => RX1-)          (B1,0 Active, as well as G2,1)
 364:lvds.c        **** //    Off (6/63): DTL1 = 0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 13


 365:lvds.c        **** //    38-39/63:      DTL1 = 1
 366:lvds.c        **** //    54-55/63:      DTL1 = 2   (FOUR_SHADES only)
 367:lvds.c        **** //    62-63/63:      DTL1 = 3
 368:lvds.c        **** //   Blue: (+OC1A => RX2+)               (B3,2 Active from here down)
 369:lvds.c        **** //    Off (15/63):  OCR1A=4
 370:lvds.c        **** //    47/63:        OCR1A=5
 371:lvds.c        **** //    63/63:        OCR1A=6
 372:lvds.c        **** //
 373:lvds.c        **** 
 374:lvds.c        **** // Toward creating a GIMP palette... v54.5
 375:lvds.c        **** // Probably absurd, but this was brown/orange on GIMP and it's yellow here
 376:lvds.c        **** //
 377:lvds.c        **** //   Red: (+OC1D => RX0+)
 378:lvds.c        **** //    Off (0/63): OCR1D = 0   r=0
 379:lvds.c        **** //    35/63:      OCR1D = 3   r=142
 380:lvds.c        **** //    51/63:      OCR1D = 4   r=206
 381:lvds.c        **** //    63/63:      OCR1D >= 6   r=255
 382:lvds.c        **** //   Green: (/OC1B => RX1-)          (B1,0 Active, as well as G2,1)
 383:lvds.c        **** //    Off (6/63): DTL1 = 0      g=24
 384:lvds.c        **** //    38-39/63:      DTL1 = 1 g=154
 385:lvds.c        **** //    54-55/63:      DTL1 = 2   g=218
 386:lvds.c        **** //    62-63/63:      DTL1 = 3 g=251
 387:lvds.c        **** //   Blue: (+OC1A => RX2+)               (B3,2 Active from here down)
 388:lvds.c        **** //    Off (15/63):  OCR1A=4   b=61
 389:lvds.c        **** //    47/63:        OCR1A=5   b=190
 390:lvds.c        **** //    63/63:        OCR1A=6   b=255
 391:lvds.c        **** //
 392:lvds.c        **** //  These numbers don't look entirely accurate...
 393:lvds.c        **** //    they vary depending on the other colors... and why is blue so high
 394:lvds.c        **** //    even when it's off?
 395:lvds.c        **** //  Maybe I'm looking at old notes...?
 396:lvds.c        **** //   SEE lvdsColorExperiments.c Now Here.
 397:lvds.c        **** 
 398:lvds.c        **** //  Implementations/prospects:
 399:lvds.c        **** //  * rowBuffer.c (more like row-settings-buffer)
 400:lvds.c        **** //     calculate a row's worth of pixels before drawing that row
 401:lvds.c        **** //     (uses packed color settings in a single byte per drawable pixel)
 402:lvds.c        **** //     64 drawable pixels across, regardless of LVDS speed
 403:lvds.c        **** //  * For faster pixels: these settings values could be stored 
 404:lvds.c        **** //     in individual bytes. Gives about 1/3 more pixels at 3x the memory
 405:lvds.c        **** //     (not implemented)
 406:lvds.c        **** //  * rowSegBuffer.c
 407:lvds.c        **** //     also calculates an entire row before drawing it
 408:lvds.c        **** //     instead of storing pixels, store "segments"
 409:lvds.c        **** //     i.e. each segment is defined by a color value and a length
 410:lvds.c        **** //      the color-value is stored as DT/OCR values (not RGB values)
 411:lvds.c        **** //     Number of segments is limited only by memory...
 412:lvds.c        **** //      e.g. 64 segments per row (max) is 64*3Bytes
 413:lvds.c        **** //       Three bytes for color, and *really simple* packing for seg-length
 414:lvds.c        **** //      BUT: at slow LVDS speeds, the resolution of these segments could be
 415:lvds.c        **** //       as high as one LCD pixel.
 416:lvds.c        **** //      possibly: at *really* low LVDS speeds we could be 64*2Bytes
 417:lvds.c        **** //      (with packing)
 418:lvds.c        **** //      Actually: Using GB_COMBINED gives 2Bytes per segment
 419:lvds.c        **** //      only adds two clock cycles to each "pixel", so probably worth it
 420:lvds.c        **** 
 421:lvds.c        **** //   In Any Case: There's not enough RAM for a full frame
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 14


 422:lvds.c        **** //          64 pixels across * 64 pixels down is 4096 bytes
 423:lvds.c        **** //          So whatever method, we need to precalculate each row before
 424:lvds.c        **** //          displaying it
 425:lvds.c        **** //          Could be as simple as loading direct from program memory
 426:lvds.c        **** //
 427:lvds.c        **** 
 428:lvds.c        **** // Since low-bits are barely visible, their effect is neglected.
 429:lvds.c        **** //   Thus: Green is affected only by the Compare-Match deadTimer (DT1L)
 430:lvds.c        **** //         Red is affected only by OCR1D, and could be single-ended
 431:lvds.c        **** //   OTOH:
 432:lvds.c        **** //         The Visible blue values (with DT affecting clock)
 433:lvds.c        **** //         are only the high-two values, which are affected only by OCR1A
 434:lvds.c        **** //         So counter-reset dead-time (DT1H) needn't be varied
 435:lvds.c        **** //         And, then, the clock won't be affected at all
 436:lvds.c        **** //         (assuming we set it to single-ended during DE disabled, for V/H)
 437:lvds.c        **** //
 438:lvds.c        **** // NEW CONSIDERATION: "The dead timer delays the waveform by a minimum of
 439:lvds.c        **** //    "of one count, when DT=0..."
 440:lvds.c        **** // So changing the clock from single-ended to complementary
 441:lvds.c        **** //   might actually cause the clock output to be shifted!
 442:lvds.c        **** 
 443:lvds.c        **** 
 444:lvds.c        **** // DE/V/H Timing (LCDdirectLVDS):
 445:lvds.c        **** //  
 446:lvds.c        **** //
 447:lvds.c        **** //            |  0   1    2    3    4    5    6       All: set @ 0
 448:lvds.c        **** //            |____.____.____.____                         OCR1C = 6 
 449:lvds.c        **** //  Clock:    /                   \    .    .    /         Complementary-
 450:lvds.c        **** //                                 ¯¯¯¯ ¯¯¯¯ ¯¯¯¯          Output Mode
 451:lvds.c        **** //                                                          required for DT
 452:lvds.c        **** //   Signal:    B3   B2   DE   /V   /H   B5   B4 | B3
 453:lvds.c        **** //             ____ ____ ____ ____ ____ ____ ____|____    
 454:lvds.c        **** //   DE:      X B3 X B2 /    .    .    \ B5 X B4 X B3 X    
 455:lvds.c        **** //   state2    ¯¯¯¯ ¯¯¯¯                ¯¯¯¯ ¯¯¯¯|¯¯¯¯    
 456:lvds.c        **** //   DE_BLUE: >¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|    DT=X, OCR=0
 457:lvds.c        **** //                         Watch the transition!! -------^
 458:lvds.c        **** //   DE_NORM: >_________/¯¯¯¯¯¯¯¯¯¯¯¯¯¯\_________|    DT=2, OCR=4
 459:lvds.c        **** //   DC_DISABLED:
 460:lvds.c        **** //   maxBlue: >¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯\____|      DT=0, OCR=5
 461:lvds.c        **** //             See below for more blue settings...
 462:lvds.c        **** //
 463:lvds.c        **** //             ____ ____      ____      ____ ____|____ 
 464:lvds.c        **** //  H (only): X xx X xx \    /    \    / xx X xx X xx X    
 465:lvds.c        **** //   state1    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯      ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ 
 466:lvds.c        **** //            >______________/¯¯¯¯\______________|    DT=3, OCR=3
 467:lvds.c        **** //  DC_DISABLED:
 468:lvds.c        **** //   Not much can be done...
 469:lvds.c        **** //
 470:lvds.c        **** //             ____ ____           ____ ____ ____|____ 
 471:lvds.c        **** //  V w/o H:  X xx X xx \    .    /    \ xx X xx X xx X
 472:lvds.c        **** //   state3    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯      ¯¯¯¯ ¯¯¯¯|¯¯¯¯
 473:lvds.c        **** //            >___________________/¯¯¯¯\_________|    DT=4, OCR=4 (+?)
 474:lvds.c        **** // DC_DISABLED:
 475:lvds.c        **** //            >___________________/¯¯¯¯¯¯¯¯¯\____|      DT=4, OCR=5
 476:lvds.c        **** 
 477:lvds.c        **** //             ____ ____                ____ ____|____ 
 478:lvds.c        **** //  V w/ H:   X xx X xx \    .    .    / xx X xx X xx X
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 15


 479:lvds.c        **** //   state4    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ 
 480:lvds.c        **** //            >__________________________________|    DT=X, OCR=0
 481:lvds.c        **** //                             TransitionWatch!!! -------^
 482:lvds.c        **** //                             Shouldn't matter... DT from no-edge
 483:lvds.c        **** // DC_DISABLED:
 484:lvds.c        **** //            >¯¯¯¯¯¯¯¯¯\________________________|      DT=0, OCR=1
 485:lvds.c        **** 
 486:lvds.c        **** //             ____ ____      ____ ____ ____ ____|____ 
 487:lvds.c        **** //  Nada:     X xx X xx \    /    .    \ xx X xx X xx X    
 488:lvds.c        **** //   state0    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯           ¯¯¯¯ ¯¯¯¯|¯¯¯¯     
 489:lvds.c        **** //            >______________/¯¯¯¯¯¯¯¯¯\_________|    DT=3, OCR=4 (+?)
 490:lvds.c        **** // DC_DISABLED:
 491:lvds.c        **** //            >______________/¯¯¯¯¯¯¯¯¯¯¯¯¯¯\____|      DT=3, OCR=5
 492:lvds.c        **** 
 493:lvds.c        **** // Transitions: OLD!!!!! WRONG!!!!
 494:lvds.c        **** //   (are they? There're several additional transitions, now, for one.)
 495:lvds.c        **** //  The idea is to reduce the number of instructions between each
 496:lvds.c        **** //  LVDS "state."
 497:lvds.c        **** //  These are implemented below in the case:
 498:lvds.c        **** //    "#else //NOT FULL_INIT_TESTS"
 499:lvds.c        **** //  Since each instruction takes *longer than* a single pixel
 500:lvds.c        **** //    two instructions would *at best* occur on two consecutive pixels
 501:lvds.c        **** //    Thus, there's likely to be a transition-glitch
 502:lvds.c        **** //    (e.g. old OCR value with new DT value)
 503:lvds.c        **** //  Note that the new DT values are implemented at the next corresponding
 504:lvds.c        **** //    edge after the DT-write instruction completes
 505:lvds.c        **** //    (for +OC1A/DT1H, when TCNT is reset to 0)
 506:lvds.c        **** //    (for -OC1A/DT1L, when TCNT passes OCR1A)
 507:lvds.c        **** //    New OCR values are delayed until the next TCNT reset to 0
 508:lvds.c        **** //
 509:lvds.c        **** //  Initial:
 510:lvds.c        **** //  Nada               DT=2  NADA_OCR = (3<=OCR<(=?)6)
 511:lvds.c        **** 
 512:lvds.c        **** //  Nada   ->   H         OCR=2
 513:lvds.c        **** //  H      ->   Nada      OCR=NADA_OCR
 514:lvds.c        **** //  
 515:lvds.c        **** //  Nada   ->   V         DT=3
 516:lvds.c        **** //  V      ->   V+H      OCR=0
 517:lvds.c        **** //  V+H   ->   V         OCR=NADA_OCR
 518:lvds.c        **** //  V      ->   Nada      DT=2
 519:lvds.c        **** //
 520:lvds.c        **** //  Nada   ->   DE         DT=1
 521:lvds.c        **** //  DE   ->   Nada      DT=2
 522:lvds.c        **** 
 523:lvds.c        **** 
 524:lvds.c        **** #if (defined(REMOVE_DC) && REMOVE_DC)
 525:lvds.c        **** #error "REMOVE_DC hasn't been tested since lcdStuff, or long prior"
 526:lvds.c        ****  #define Nada_init()         { DT1=(3<<4); OCR1A=5; }
 527:lvds.c        **** 
 528:lvds.c        ****  //Unused, normally...
 529:lvds.c        ****  #define Vsync_init()       { DT1=(4<<4);  OCR1A=5; }
 530:lvds.c        ****  #define VplusH_init()      { DT1=0;       OCR1A=1; }
 531:lvds.c        ****  #define Hsync_init()       { DT1=(3<<4);  OCR1A=3; }
 532:lvds.c        ****  #define DEonly_init()      { DT1=(2<<4);  OCR1A=4; }
 533:lvds.c        ****  #define DEblue_init()       { DT1=0;       OCR1A=5; }
 534:lvds.c        **** 
 535:lvds.c        **** #else //!REMOVE_DC
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 16


 536:lvds.c        **** //Nada init
 537:lvds.c        ****  #define Nada_init()         { DT1=(3<<4); OCR1A=4; }
 538:lvds.c        **** 
 539:lvds.c        **** //Unused, normally...
 540:lvds.c        ****  #define Vsync_init()         { DT1=(4<<4);   OCR1A=4; }
 541:lvds.c        ****  #define VplusH_init()      { DT1=0;         OCR1A=0; }
 542:lvds.c        ****  #define Hsync_init()         { DT1=(3<<4);   OCR1A=3; }
 543:lvds.c        **** // #define DE_init()            { DT1=(2<<4);   OCR1A=4; } //...SHOULD BE
 544:lvds.c        ****  #define DEonly_init()         { DT1=(2<<4);  OCR1A=4; }
 545:lvds.c        ****  #define DEblue_init()         { DT1=0;       OCR1A=6; }
 546:lvds.c        **** //#define DE_init()            { DT1=(1<<4);   OCR1A=2; } //Works with DE_ONLY
 547:lvds.c        ****  //#define DE_init()            { DT1=0;         OCR1A=0xff; }   //DE_BLUE
 548:lvds.c        **** #endif //REMOVE_DC
 549:lvds.c        **** 
 550:lvds.c        **** 
 551:lvds.c        **** 
 552:lvds.c        **** //Display is DE-Only (doesn't use H/Vsync)
 553:lvds.c        **** // Shouldn't be necessary to select this if it is,
 554:lvds.c        **** // since DE timing is the same either way
 555:lvds.c        **** // but I want to test whether a single-bit is being detected
 556:lvds.c        **** // (e.g. maybe the rise/fall-times of the output aren't fast enough for a
 557:lvds.c        **** //  single bit, which might explain why the other display didn't work)
 558:lvds.c        **** #if (defined(DE_ONLY_DISPLAY) && DE_ONLY_DISPLAY)
 559:lvds.c        **** #define Vsync_fromNada()      Nada_init()
 560:lvds.c        **** #define VplusH_fromVsync()    Nada_init()
 561:lvds.c        **** #define Vsync_fromVplusH()    Nada_init()
 562:lvds.c        **** #define Nada_fromVsync()      Nada_init()
 563:lvds.c        **** #define Hsync_fromNada()      Nada_init()
 564:lvds.c        **** #define Nada_fromHsync()      Nada_init()
 565:lvds.c        **** #define DEonly_fromNada()     DE_init()
 566:lvds.c        **** #define DEblue_fromDEonly()   DE_init()
 567:lvds.c        **** #define Nada_fromDEblue()      Nada_init()
 568:lvds.c        ****  #if(DE_BLUE)
 569:lvds.c        ****   #warning "DE_BLUE is true, but not implemented with DE_ONLY_DISPLAY"
 570:lvds.c        ****   #warning "...The display should be blank"
 571:lvds.c        ****  #endif
 572:lvds.c        **** //Use full initialization of each LVDS state
 573:lvds.c        **** // (might not be good during transitions, but should guarantee
 574:lvds.c        **** //  steady-state, in case my transitions aren't correct...)
 575:lvds.c        **** #elif (defined(FULL_INIT_TESTS) && FULL_INIT_TESTS)
 576:lvds.c        **** #define Vsync_fromNada()      Vsync_init()
 577:lvds.c        **** #define VplusH_fromVsync()      VplusH_init()
 578:lvds.c        **** #define Vsync_fromVplusH()      Vsync_init()
 579:lvds.c        **** #define Nada_fromVsync()      Nada_init()
 580:lvds.c        **** #define Hsync_fromNada()      Hsync_init()
 581:lvds.c        **** #define Nada_fromHsync()      Nada_init()
 582:lvds.c        **** #define DEonly_fromNada()      DEonly_init()
 583:lvds.c        **** #define DEblue_fromDEonly()   DEblue_init()
 584:lvds.c        **** #define Nada_fromDEonly()      Nada_init()
 585:lvds.c        **** #define Nada_fromDEblue()      Nada_init()
 586:lvds.c        **** 
 587:lvds.c        **** 
 588:lvds.c        **** #else   //NOT FULL_INIT_TESTS
 589:lvds.c        **** //#define Vsync_fromNada()   { DT1=(4<<4); }
 590:lvds.c        **** #define Vsync_fromNada()   { DT1=(4<<4); OCR1A=5; } //Leave two bits high
 591:lvds.c        ****                                                     //for easy-scoping
 592:lvds.c        ****                   //Three would be nicer, but I'm pretty sure OCR=TOP=ON
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 17


 593:lvds.c        **** #define VplusH_fromVsync() { OCR1A=0; }
 594:lvds.c        **** //#define Vsync_fromVplusH() { OCR1A=4; }
 595:lvds.c        **** #define Vsync_fromVplusH() { OCR1A=5; }            //Extra bits for scoping
 596:lvds.c        **** //#define Nada_fromVsync()   { DT1=(3<<4); }
 597:lvds.c        **** #define Nada_fromVsync()   { DT1=(3<<4); OCR1A=4; } //scoping...
 598:lvds.c        **** #define Hsync_fromNada()   { OCR1A=3; }
 599:lvds.c        **** #define Nada_fromHsync()   { OCR1A=4; }
 600:lvds.c        **** 
 601:lvds.c        **** #define Nada_fromDEblue()   { DT1=(3<<4); OCR1A=4; }
 602:lvds.c        **** #define Nada_fromDEonly()   { DT1=(3<<4); }
 603:lvds.c        **** #define DEonly_fromNada()   { DT1=(2<<4); }
 604:lvds.c        **** #define DEblue_fromNada()   { OCR1A=0xff; }
 605:lvds.c        **** #define DEblue_fromDEonly() { OCR1A=0xff; }
 606:lvds.c        **** 
 607:lvds.c        **** /*
 608:lvds.c        **** #if (!defined(DE_BLUE) || !DE_BLUE)
 609:lvds.c        ****  //Nada -> DE
 610:lvds.c        ****  //#define DE_fromNada()      { DT1=(1<<4); }   //DT1 = (1<<4);
 611:lvds.c        ****  #define DE_fromNada()      { DT1=(2<<4); }
 612:lvds.c        ****  //DE -> Nada
 613:lvds.c        ****  //#define Nada_fromDE()      { DT1=(2<<4); }   //DT1 = (2<<4);
 614:lvds.c        ****  #define Nada_fromDE()      { DT1=(3<<4); }
 615:lvds.c        **** #else
 616:lvds.c        ****  //Nada -> DE
 617:lvds.c        ****  //#define DE_fromNada()      { OCR1A=0xff; }   //DT1 = (1<<4);
 618:lvds.c        ****  #define DE_fromNada()      { OCR1A=0xff; }
 619:lvds.c        ****  //DE -> Nada
 620:lvds.c        ****  //#define Nada_fromDE()      { OCR1A=3; }   //DT1 = (2<<4);
 621:lvds.c        ****  #define Nada_fromDE()      { OCR1A=4; }
 622:lvds.c        **** #endif
 623:lvds.c        **** */
 624:lvds.c        **** #endif //End Of FULL_INIT_TESTS
 625:lvds.c        **** 
 626:lvds.c        **** 
 627:lvds.c        **** 
 628:lvds.c        **** // NOTES:
 629:lvds.c        **** //    DeadTimer requires
 630:lvds.c        **** //        COM1x1:0 = 01 ("Complementary Compare Output Mode" ?)
 631:lvds.c        **** //      Complementary Compare Output Mode:
 632:lvds.c        **** //        OCW1A: cleared on match, set at BOTTOM
 633:lvds.c        **** //    If PWM1X (pwm inversion) is used, OC1A = !OCW1A
 634:lvds.c        **** //        (Does not affect DT)
 635:lvds.c        **** //
 636:lvds.c        **** // CLOCK:
 637:lvds.c        **** //    Can NOT use differential mode with:
 638:lvds.c        **** //       OC1B pin is -differential input (through a resistor)
 639:lvds.c        **** //    /OC1B pin is +differential input (through a resistor)
 640:lvds.c        **** //    BECAUSE: DeadTimer affects ALL PWM channels
 641:lvds.c        **** //
 642:lvds.c        **** 
 643:lvds.c        **** //
 644:lvds.c        **** //
 645:lvds.c        **** // ISSUES:
 646:lvds.c        **** //    Using Dead-Timer does not allow for use of complementary outputs
 647:lvds.c        **** //      as complementary LVDS inputs... 
 648:lvds.c        **** //      DeadTimer affects ALL PWM channels in complementary mode
 649:lvds.c        **** //    (e.g. RXclkin+ on OC1B and RXclkin- on /OC1B is not an option)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 18


 650:lvds.c        **** //
 651:lvds.c        **** 
 652:lvds.c        **** 
 653:lvds.c        **** // The typical patterns look like this (not at all to scale):
 654:lvds.c        **** //   ----______------------------------------------------___----- V
 655:lvds.c        **** //      --_--_--_--_--_--_--_--_--_--_--_--_--_--_ H
 656:lvds.c        **** //      __________-__-__-__-__-__-__-__-__-__-  DE
 657:lvds.c        **** //                 
 658:lvds.c        **** //             ^^^^\                                          //blah
 659:lvds.c        **** //             1234 5?
 660:lvds.c        **** // Pixels are sent during DE High (basically all the CPU will be used here)
 661:lvds.c        **** //Ideally, 
 662:lvds.c        **** //  there won't be any glitches when changing from one state to another
 663:lvds.c        **** //
 664:lvds.c        **** //  NOTES: PWM1X inversion affects all PWM channels!
 665:lvds.c        **** //
 666:lvds.c        **** //  Unchangeables:
 667:lvds.c        **** //    FastPWM
 668:lvds.c        **** //      inverted with PWM1X
 669:lvds.c        **** //
 670:lvds.c        **** //  Init (pre 1):
 671:lvds.c        **** //    DeadTimerRising=1
 672:lvds.c        **** //
 673:lvds.c        **** //  The states are:
 674:lvds.c        **** //   (Not necessarily accurate, just looking into necessary changes)
 675:lvds.c        **** //   (from Vsync L->H)
 676:lvds.c        **** //
 677:lvds.c        **** //   1  NothingActive (long, No DE, VporchFrontTimes)
 678:lvds.c        **** //      *  1<=DeadTimerRising<=5
 679:lvds.c        **** //        (OCW1A: set @ BOTTOM, cleared @ OCR1A
 680:lvds.c        **** //      *  OCR1A == 6
 681:lvds.c        **** //
 682:lvds.c        **** //   2  Hsync
 683:lvds.c        **** //      *  DeadTimer _OFF_ -> Horiz
 684:lvds.c        **** //        (OCW1A: set @ BOTTOM, cleared @ OCR1A
 685:lvds.c        **** //        (OCR1A == 6
 686:lvds.c        **** //   3  NothingActive (short)
 687:lvds.c        **** //      *  1<=DeadTimerRising<=5
 688:lvds.c        **** //        (OCW1A: set @ BOTTOM, cleared @ OCR1A
 689:lvds.c        **** //        (OCR1A == 6
 690:lvds.c        **** //   4  DE
 691:lvds.c        **** //        (1<=DeadTimerRising<(=?)5 (>1 for blue pixels?) 
 692:lvds.c        **** //            (==5 cancelled by OCR1A match?)
 693:lvds.c        **** //        (OCW1A: set @ BOTTOM, cleared @ OCR1A
 694:lvds.c        **** //      *  OCR1A = 5 (or 1<=OCR1A<5 for blue pixels?)
 695:lvds.c        **** //   5  NothingActive(?)
 696:lvds.c        **** //        (1<=DeadTimerRising<=5
 697:lvds.c        **** //        (OCW1A: set @ BOTTOM, cleared @ OCR1A
 698:lvds.c        **** //      *  OCR1A == 6
 699:lvds.c        **** //
 700:lvds.c        **** //   7  Repeat 2-5 for each row
 701:lvds.c        **** //
 702:lvds.c        **** //   8  NothingActive (long, No DE, VporchBackTimes)
 703:lvds.c        **** //      ?  1<=DeadTimerRising<=5
 704:lvds.c        **** //        (OCW1A: set @ BOTTOM, cleared @ OCR1A
 705:lvds.c        **** //        (OCR1A == 6
 706:lvds.c        **** //
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 19


 707:lvds.c        **** //   9  V w/o H
 708:lvds.c        **** //      ?  OFF <= DeadTimer <= (5 - OCR1A)
 709:lvds.c        **** //     **  OCW1A: cleared at BOTTOM, set at OCR1A
 710:lvds.c        **** //            ??? What is the effect of changing this while running?
 711:lvds.c        **** //      *  1 <= OCR1A <= 5
 712:lvds.c        **** //   10 V w/  H
 713:lvds.c        **** //      ?   DeadTimer OFF (H -> Low)
 714:lvds.c        **** //      *   OCW1A: set @ BOTTOM, cleared @ OCR1A
 715:lvds.c        **** //      *   OCR1A > (=?) OCR1C
 716:lvds.c        **** //
 717:lvds.c        **** //   11 Repeat 9-10 for Vsync time...
 718:lvds.c        **** //
 719:lvds.c        **** 
 720:lvds.c        **** // Here's how it worked pre-lvds:
 721:lvds.c        **** // HSYNC, VSYNC, and DE refer to the actual pins
 722:lvds.c        **** // In the LVDS setup, there're modes corresponding to each pin-combination
 723:lvds.c        **** //
 724:lvds.c        **** // Timer Interrupt:
 725:lvds.c        **** //  loadData:
 726:lvds.c        **** //   HSYNC active
 727:lvds.c        **** //   HSYNC Low delay
 728:lvds.c        **** //   HSYNC inactive
 729:lvds.c        **** //   if(dataEnable)
 730:lvds.c        **** //    DE active
 731:lvds.c        **** //     Send row data
 732:lvds.c        **** //    DE inactive
 733:lvds.c        **** //  //Prep for next interrupt
 734:lvds.c        **** //  switch(hsyncCount++)
 735:lvds.c        **** //    //Vsync H->L (active)
 736:lvds.c        **** //    1:
 737:lvds.c        **** //          dataEnable=FALSE
 738:lvds.c        **** //          VSYNC active
 739:lvds.c        **** //    //Vsync L->H (inactive)
 740:lvds.c        **** //    T_Vlow:
 741:lvds.c        **** //          VSYNC inactive
 742:lvds.c        **** //    //Start of frame
 743:lvds.c        **** //    T_VD +(T_Vlow):
 744:lvds.c        **** //          dataEnable=TRUE
 745:lvds.c        **** //    //All rows have been displayed
 746:lvds.c        **** //    V_COUNT +(T_VD+T_Vlow):
 747:lvds.c        **** //          dataEnable=FALSE
 748:lvds.c        **** //    //Frame Complete
 749:lvds.c        **** //    T_DV +(V_COUNT+T_VD+T_Vlow): 
 750:lvds.c        **** //          hsyncCount=0
 751:lvds.c        **** //  if(dataEnable)
 752:lvds.c        **** //    Use the remaining time to load the next row to memory
 753:lvds.c        **** 
 754:lvds.c        **** //  So:
 755:lvds.c        **** //Interrupt0       End
 756:lvds.c        **** //    |             |  Interrupt1
 757:lvds.c        **** //    v             v  v
 758:lvds.c        **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 759:lvds.c        **** // DE ___________________________________________________ ...
 760:lvds.c        **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯|_____________________________________ ...
 761:lvds.c        **** //       |        ||
 762:lvds.c        **** // DETIME^--------^|
 763:lvds.c        **** //                 |
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 20


 764:lvds.c        **** //                 VSYNC active
 765:lvds.c        **** //                 dataEnable=FALSE (not necessary?)
 766:lvds.c        **** //
 767:lvds.c        **** //InterruptT_Vlow   End
 768:lvds.c        **** //    |             |
 769:lvds.c        **** //    v             v
 770:lvds.c        **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 771:lvds.c        **** // DE ___________________________________________________ ...
 772:lvds.c        **** //  V _____________|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ ...
 773:lvds.c        **** //       |        ||
 774:lvds.c        **** // DETIME^--------^|
 775:lvds.c        **** //                 |
 776:lvds.c        **** //                 VSYNC inactive
 777:lvds.c        **** //
 778:lvds.c        **** //
 779:lvds.c        **** //InterruptT_VD   End  InterruptT_VD+1
 780:lvds.c        **** //    |             |  |            End
 781:lvds.c        **** //    v             v  v            v
 782:lvds.c        **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 783:lvds.c        **** // DE ____________________|¯¯¯¯¯¯¯¯|_______|¯¯¯¯¯¯¯¯|____ ...
 784:lvds.c        **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 785:lvds.c        **** //       |        ||      |        |
 786:lvds.c        **** // DETIME^--------^|      ^--------^
 787:lvds.c        **** //                 |
 788:lvds.c        **** //                 dataEnable=TRUE
 789:lvds.c        **** //
 790:lvds.c        **** //InterruptV_COUNT  End
 791:lvds.c        **** //    |             |
 792:lvds.c        **** //    v             v
 793:lvds.c        **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 794:lvds.c        **** // DE ___|¯¯¯¯¯¯¯¯|______________________________________ ...
 795:lvds.c        **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 796:lvds.c        **** //       |        ||      |        |
 797:lvds.c        **** // DETIME^--------^|      ^--------^
 798:lvds.c        **** //                 |
 799:lvds.c        **** //                 dataEnable=FALSE
 800:lvds.c        **** //
 801:lvds.c        **** //
 802:lvds.c        **** // This isn't really a state, it's basically just:
 803:lvds.c        **** // if(hsyncCount == NUM_HYSYNCS_PER_FRAME)
 804:lvds.c        **** //    hsyncCount = 0;
 805:lvds.c        **** //                    .....................................
 806:lvds.c        **** //                    .                                   .
 807:lvds.c        **** //InterruptT_DV   End .Interrupt0                         .
 808:lvds.c        **** //    |             | .|                                  .
 809:lvds.c        **** //    v             v .v                                  .
 810:lvds.c        **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 811:lvds.c        **** // DE ___________________________________________________ .
 812:lvds.c        **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|____________________ .
 813:lvds.c        **** //       |        ||  .   |        |                      .
 814:lvds.c        **** // DETIME^--------^|  .   ^--------^                      .
 815:lvds.c        **** //                 |  .                                   .
 816:lvds.c        **** //                 hsyncCount=0 (repeat from Interrupt0)  .
 817:lvds.c        **** //                    .                                   .
 818:lvds.c        **** //                    .....................................
 819:lvds.c        **** //
 820:lvds.c        **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 21


 821:lvds.c        **** 
 822:lvds.c        **** // NOW to compare with LVDS states:
 823:lvds.c        **** //
 824:lvds.c        **** //Interrupt0       End
 825:lvds.c        **** //    |             |  Interrupt1
 826:lvds.c        **** //    v             v  v
 827:lvds.c        **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 828:lvds.c        **** // DE ___________________________________________________ ...
 829:lvds.c        **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯|_____________________________________ ...
 830:lvds.c        **** //    ^ ^          ^   ^ ^
 831:lvds.c        **** //    | |          |   | |
 832:lvds.c        **** //    | |          |   | +--- V w/o H  \ These two toggle until
 833:lvds.c        **** //    | |          |   +----- V w/ H   / next LCD state...
 834:lvds.c        **** //    | |          |
 835:lvds.c        **** //    | |          +--------- V w/o H > Intermediate change of state
 836:lvds.c        **** //    | |
 837:lvds.c        **** //    | +----- NothingActive  \ From Previous State (?)
 838:lvds.c        **** //    +------- H_Only         /
 839:lvds.c        **** 
 840:lvds.c        **** 
 841:lvds.c        **** //InterruptT_Vlow   End
 842:lvds.c        **** //    |             |
 843:lvds.c        **** //    v             v
 844:lvds.c        **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 845:lvds.c        **** // DE ___________________________________________________ ...
 846:lvds.c        **** //  V _____________|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ ...
 847:lvds.c        **** //    ^ ^          ^   ^ ^
 848:lvds.c        **** //    | |          |   | |
 849:lvds.c        **** //    | |          |   | +--- NothingActive  \ These two toggle until
 850:lvds.c        **** //    | |          |   +----- H_Only         / next LCD state...
 851:lvds.c        **** //    | |          |
 852:lvds.c        **** //    | |          +--------- NothingActive > Intermediate change of state
 853:lvds.c        **** //    | |
 854:lvds.c        **** //    | +----- V w/o H   \ From previous state
 855:lvds.c        **** //    +------- V w/ H    /
 856:lvds.c        **** 
 857:lvds.c        **** 
 858:lvds.c        **** //InterruptT_VD   End  InterruptT_VD+1
 859:lvds.c        **** //    |             |  |            End
 860:lvds.c        **** //    v             v  v            v
 861:lvds.c        **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 862:lvds.c        **** // DE ____________________|¯¯¯¯¯¯¯¯|_______|¯¯¯¯¯¯¯¯|____ ...
 863:lvds.c        **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 864:lvds.c        **** //    ^ ^              ^ ^^        ^ 
 865:lvds.c        **** //    | |              | ||        |
 866:lvds.c        **** //    | |              | ||        +--- NothingActive  \  These four
 867:lvds.c        **** //    | |              | |+------------ DE              | cycle until
 868:lvds.c        **** //    | |              | +------------- NothingActive   | next LCD state...
 869:lvds.c        **** //    | |              +--------------- H_Only  ^      /
 870:lvds.c        **** //    | |                                       |
 871:lvds.c        **** //    | +----- NothingActive  \ From previous   |
 872:lvds.c        **** //    +------- H_Only         / state           +-This intermediate state
 873:lvds.c        **** //                                                may not be necessary
 874:lvds.c        **** //                                                (IAXG01 shows 160 dots!)
 875:lvds.c        **** 
 876:lvds.c        **** 
 877:lvds.c        **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 22


 878:lvds.c        **** //InterruptV_COUNT  End
 879:lvds.c        **** //    |             |
 880:lvds.c        **** //    v             v
 881:lvds.c        **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 882:lvds.c        **** // DE ___|¯¯¯¯¯¯¯¯|______________________________________ ...
 883:lvds.c        **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 884:lvds.c        **** //    ^ ^^        ^    ^ ^
 885:lvds.c        **** //    | ||        |    | |
 886:lvds.c        **** //    | ||        |    | +--- NothingActive \  These two toggle
 887:lvds.c        **** //    | ||        |    +----- H_Only        /  until next LCD state
 888:lvds.c        **** //    | ||        |
 889:lvds.c        **** //    | ||        +---- NothingActive \                         //blah
 890:lvds.c        **** //    | |+------------- DE             |  From previous state
 891:lvds.c        **** //    | +-------------- NothingActive  |
 892:lvds.c        **** //    +---------------- H_Only        /
 893:lvds.c        **** 
 894:lvds.c        **** // This isn't really a state, it's essentially just:
 895:lvds.c        **** //  if(hsyncCount == NUM_HSYNCS_PER_FRAME)
 896:lvds.c        **** //    hsyncCount = 0;
 897:lvds.c        **** //                    .....................................
 898:lvds.c        **** //                    .                                   .
 899:lvds.c        **** //InterruptT_DV   End .Interrupt0                         .
 900:lvds.c        **** //    |             | .|                                  .
 901:lvds.c        **** //    v             v .v                                  .
 902:lvds.c        **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 903:lvds.c        **** // DE ___________________________________________________ .
 904:lvds.c        **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|____________________ .
 905:lvds.c        **** //    ^ ^             .                                   .
 906:lvds.c        **** //    | |             .....................................
 907:lvds.c        **** //    | +--- NothingActive \                                 //blah
 908:lvds.c        **** //    +----- H_Only        / From previous state...
 909:lvds.c        **** 
 910:lvds.c        **** 
 911:lvds.c        **** 
 912:lvds.c        **** //  LVDS State transitions:
 913:lvds.c        **** //   1 H_Only
 914:lvds.c        **** //   2 NothingActive
 915:lvds.c        **** //
 916:lvds.c        **** //   3 V w/o H
 917:lvds.c        **** //   4 V w/ H
 918:lvds.c        **** //    
 919:lvds.c        **** //   (repeat 3,4)
 920:lvds.c        **** //
 921:lvds.c        **** //   5 V w/o H
 922:lvds.c        **** //
 923:lvds.c        **** //   6 NothingActive
 924:lvds.c        **** //   7 H_Only
 925:lvds.c        **** //
 926:lvds.c        **** //   (repeat 6,7)
 927:lvds.c        **** //
 928:lvds.c        **** //   8 NothingActive
 929:lvds.c        **** //
 930:lvds.c        **** //   9 H_Only
 931:lvds.c        **** //  10 NothingActive
 932:lvds.c        **** //  11 DE
 933:lvds.c        **** //  12 NothingActive
 934:lvds.c        **** //
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 23


 935:lvds.c        **** //  (repeat 9-12)
 936:lvds.c        **** //
 937:lvds.c        **** //  13 H_Only
 938:lvds.c        **** //  14 NothingActive
 939:lvds.c        **** //
 940:lvds.c        **** //  (repeat 13-14)
 941:lvds.c        **** //
 942:lvds.c        **** //   These should be reviewed to determine which changes are necessary
 943:lvds.c        **** //   between each state...
 944:lvds.c        **** //   (the fewer changes, the less likely we'll glitch...?)
 945:lvds.c        **** 
 946:lvds.c        **** 
 947:lvds.c        **** 
 948:lvds.c        **** 
 949:lvds.c        **** 
 950:lvds.c        **** 
 951:lvds.c        **** // This'll probably be better rearranged...
 952:lvds.c        **** //  For now, though, OC1A is in all the notes above, for the D/V/H signal
 953:lvds.c        **** //  so OC1B is for the clock...
 954:lvds.c        **** // CHANGING THESE does NOT change channel association.
 955:lvds.c        **** #define DVH_OCR   OCR1A
 956:lvds.c        **** #define CLOCK_OCR   OCR1B
 957:lvds.c        **** 
 958:lvds.c        **** 
 959:lvds.c        **** 
 960:lvds.c        **** 
 961:lvds.c        **** 
 962:lvds.c        **** 
 963:lvds.c        **** 
 964:lvds.c        **** void lvds_timerInit(void)
 965:lvds.c        **** {
 190               		.stabn	68,0,965,.LM7-.LFBB2
 191               	.LM7:
 192               	.LFBB2:
 193               	/* prologue: function */
 194               	/* frame size = 0 */
 966:lvds.c        ****    //Timer1 is used for LVDS (in PLL clocking mode)
 967:lvds.c        ****   
 968:lvds.c        ****      //pll_enable();   
 969:lvds.c        ****    
 970:lvds.c        ****    //We want it to count 7 bits, 0-6 and reset at 7
 971:lvds.c        ****    OCR1C = 6;
 195               		.stabn	68,0,971,.LM8-.LFBB2
 196               	.LM8:
 197 0020 86E0      		ldi r24,lo8(6)
 198 0022 8BBD      		out 75-0x20,r24
 972:lvds.c        **** 
 973:lvds.c        ****    //We want the clock to go low at TCNT=0 and high at TCNT=4
 974:lvds.c        ****    CLOCK_OCR = 3; //2; //3;
 199               		.stabn	68,0,974,.LM9-.LFBB2
 200               	.LM9:
 201 0024 83E0      		ldi r24,lo8(3)
 202 0026 8CBD      		out 76-0x20,r24
 975:lvds.c        ****    
 976:lvds.c        **** 
 977:lvds.c        **** // My 'scope is only 20MHz, and I'd rather be able to use the digital mode
 978:lvds.c        **** // which is even slower...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 24


 979:lvds.c        **** 
 980:lvds.c        **** 
 981:lvds.c        **** //Overridden when SLOW_EVERYTHING_TEST is true...
 982:lvds.c        **** //#define TOOFAST_TEST TRUE
 983:lvds.c        **** #warning "HERE AND BELOW, doesn't OSCCAL have special write requirements?"
 984:lvds.c        **** //OSCCAL = 0x00;
 985:lvds.c        **** #if (defined(SLOW_EVERYTHING_TEST) && SLOW_EVERYTHING_TEST)
 986:lvds.c        **** //FOR TESTING. This should slow the clock...
 987:lvds.c        ****    // Gives roughly 4MHz...
 988:lvds.c        ****    OSCCAL = 0x00; //0x80; 
 989:lvds.c        **** 
 990:lvds.c        ****    // This should divide the system clock by 256
 991:lvds.c        ****    // does this affect the PLL? NO.
 992:lvds.c        ****    // The PLL is clocked only by the RC Oscillator
 993:lvds.c        ****    //   OSCCAL does affect it.
 994:lvds.c        ****    // OPTIONS FOR SIMULATING FULL FUNCTIONALITY AT LOW SPEED:
 995:lvds.c        ****    // Run PLL as normal
 996:lvds.c        ****    //  Prescale Timer1 and DeadTimer equally
 997:lvds.c        ****    //  Prescale System clock equally
 998:lvds.c        ****    CLKPR = (1<<CLKPCE);
 999:lvds.c        ****    CLKPR = (1<<CLKPS1) | (1<<CLKPS0);   //CLKDIV8
1000:lvds.c        ****    //4MHz / 8 = .5Mhz...
1001:lvds.c        ****    //PLL is 4MHz*8 = 32MHz
1002:lvds.c        ****    // then TimerClockDivisor=8 gives 4MHz
1003:lvds.c        ****    pll_enable();
1004:lvds.c        ****    #define SLOW_LVDS_TEST TRUE
1005:lvds.c        **** #elif (defined(OSCCAL_VAL))
1006:lvds.c        ****    OSCCAL = OSCCAL_VAL;
 203               		.stabn	68,0,1006,.LM10-.LFBB2
 204               	.LM10:
 205 0028 8FEF      		ldi r24,lo8(-1)
 206 002a 81BF      		out 81-0x20,r24
1007:lvds.c        **** #endif
1008:lvds.c        **** 
1009:lvds.c        **** 
1010:lvds.c        **** 
1011:lvds.c        **** #if (defined(SLOW_LVDS_TEST) && SLOW_LVDS_TEST)
1012:lvds.c        ****    //This case doesn't really make sense without SLOW_EVERYTHING...
1013:lvds.c        ****    //8x prescaler for Timer1
1014:lvds.c        ****    #define CSBITS (1<<CS12)
1015:lvds.c        ****    //8x prescaler for the dead-timer
1016:lvds.c        ****    #define DTPSBITS ((1<<DTPS11) | (1<<DTPS10))
1017:lvds.c        **** #elif (defined(LVDS_PRESCALER))
1018:lvds.c        ****    //Timer1 on the Tiny861 uses a strange CLKDIV scheme...
1019:lvds.c        ****    // (but it's nicer!)
1020:lvds.c        ****    // The divisor is (1<<(csbits-1))
1021:lvds.c        ****    // so a divisor of 1 = (1<<0) = (1<<(1-1)), (csbits = 0x1)
1022:lvds.c        ****    // 256 = (1<<8) = (1<<(9-1)), (csbits = 0x9)
1023:lvds.c        ****    // 512 = (1<<9) = (1<<(10-1)), (csbits = 0xA)
1024:lvds.c        ****    // ...
1025:lvds.c        ****    // (0x0 stops the timer)
1026:lvds.c        ****    /*
1027:lvds.c        ****       uint16_t divisor;
1028:lvds.c        ****       uint8_t csbits = 0;
1029:lvds.c        ****       for(divisor=CLKDIV; divisor != 0; divisor>>=1)
1030:lvds.c        ****          csbits++;
1031:lvds.c        ****          writeMasked(csbits, 0x0f, TCCR1B);
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 25


1032:lvds.c        ****    */
1033:lvds.c        **** 
1034:lvds.c        **** //#if ((LVDS_PRESCALER != 64) && (LVDS_PRESCALER != 32) && \
1035:lvds.c        **** //     (LVDS_PRESCALER != 16) && 
1036:lvds.c        **** #if ((LVDS_PRESCALER != 8) && \
1037:lvds.c        ****      (LVDS_PRESCALER != 4)  && (LVDS_PRESCALER != 2) && \
1038:lvds.c        ****      (LVDS_PRESCALER != 1))
1039:lvds.c        **** #error "LVDS_PRESCALER must be a power of 2, from 1 to 8"
1040:lvds.c        **** #endif
1041:lvds.c        **** 
1042:lvds.c        ****    //Figured this out in cTools/dePower.c...
1043:lvds.c        ****    //64 is overkill here, since the deadTimer prescaler only goes to 8...
1044:lvds.c        **** #define divToCS(div) \
1045:lvds.c        ****    ( (div == 64) ? 7 : (div == 32) ? 6 : (div == 16) ? 5 : (div == 8) ? 4 \
1046:lvds.c        ****      : (div == 4) ? 3 : (div == 2) ? 2 : (div == 1) ? 1 : 0)
1047:lvds.c        **** 
1048:lvds.c        **** 
1049:lvds.c        ****    //CSBITS (through PLL/8) (CS10 is bit 0)
1050:lvds.c        ****    //CS12:10   CS12   CS11   CS10      PLL division
1051:lvds.c        ****    //1         0      0      1         1
1052:lvds.c        ****    //2         0      1      0         2
1053:lvds.c        ****    //3         0      1      1         4
1054:lvds.c        ****    //4         1      0      0         8
1055:lvds.c        ****    #define CSBITS divToCS(LVDS_PRESCALER) //<<CS10 should be redundant
1056:lvds.c        ****    //DTPSBITS (DTPS10 is bit 4)
1057:lvds.c        ****    //DTPS11:10   DTPS11 DTPS10   PLL division
1058:lvds.c        ****    //0         0      0         1
1059:lvds.c        ****    //1         0      1         2
1060:lvds.c        ****    //2         1      0         4
1061:lvds.c        ****    //3         1      1         8
1062:lvds.c        ****    #define DTPSBITS ((CSBITS-1)<<DTPS10)
1063:lvds.c        **** 
1064:lvds.c        ****    //Whoops! Forgot this (a/o 42-som'n WTF1pix)
1065:lvds.c        ****    // so, it's promising to get single-pixel control...
1066:lvds.c        ****    //  the result was kinda ugly, though... scroll was quite slow
1067:lvds.c        ****    // Further, it was only drawing a certain number of pixels...
1068:lvds.c        ****    //  (horizontally... pre LVDS_PRESCALER affecting DOTS_TO_CYC)
1069:lvds.c        ****    //  so accessing *all* pixels in a row would make it even slower...
1070:lvds.c        ****    // Further, it didn't seem to be paying attention to the fact that
1071:lvds.c        ****    // the same pixels are drawn on multiple rows...
1072:lvds.c        ****    // WTF? (the image was scaled, proportionately! 1pix x 1pix)
1073:lvds.c        ****    pll_enable();
 207               		.stabn	68,0,1073,.LM11-.LFBB2
 208               	.LM11:
 209 002c 00D0      		rcall pll_enable
1074:lvds.c        **** 
1075:lvds.c        **** #else
1076:lvds.c        ****    //No clock divisor
1077:lvds.c        ****    #define CSBITS (1<<CS10)
1078:lvds.c        ****    //No dead-timer divisor
1079:lvds.c        ****    #define DTPSBITS 0
1080:lvds.c        ****    pll_enable();
1081:lvds.c        ****    //#warning "The PLL configuration code is not in here yet!"
1082:lvds.c        **** #endif
1083:lvds.c        **** 
1084:lvds.c        ****    //Set the Timer1 clock prescaler...
1085:lvds.c        ****    writeMasked(CSBITS, 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 26


 210               		.stabn	68,0,1085,.LM12-.LFBB2
 211               	.LM12:
 212 002e 8FB5      		in r24,79-0x20
 213 0030 807F      		andi r24,lo8(-16)
 214 0032 8460      		ori r24,lo8(4)
 215 0034 8FBD      		out 79-0x20,r24
1086:lvds.c        ****                ((1<<CS13) | (1<<CS12) | (1<<CS11) | (1<<CS10)),
1087:lvds.c        ****                TCCR1B);
1088:lvds.c        **** 
1089:lvds.c        ****    //Set the DeadTime prescaler (no prescaling, same speed as TCNT1)...
1090:lvds.c        ****    // Allegedly this is prescaled from the PCK (or CK)
1091:lvds.c        ****    //    NOT from the Timer1 prescaler...
1092:lvds.c        ****    writeMasked(DTPSBITS,
 216               		.stabn	68,0,1092,.LM13-.LFBB2
 217               	.LM13:
 218 0036 8FB5      		in r24,79-0x20
 219 0038 8063      		ori r24,lo8(48)
 220 003a 8FBD      		out 79-0x20,r24
1093:lvds.c        ****                ((1<<DTPS11) | (1<<DTPS10)),
1094:lvds.c        ****                TCCR1B);
1095:lvds.c        **** 
1096:lvds.c        **** 
1097:lvds.c        **** 
1098:lvds.c        ****    //All LVDS modes (and signals) use FastPWM.. 
1099:lvds.c        ****  
1100:lvds.c        ****    //FastPWM
1101:lvds.c        **** //Now Handled in lvds_xxxOnCompare():
1102:lvds.c        **** 
1103:lvds.c        ****    //These are also written below (excluding PWM1D)
1104:lvds.c        ****    setbit(PWM1A, TCCR1A);  //Enable PWM on OC1A for DVH
 221               		.stabn	68,0,1104,.LM14-.LFBB2
 222               	.LM14:
 223 003c 80B7      		in r24,80-0x20
 224 003e 8260      		ori r24,lo8(2)
 225 0040 80BF      		out 80-0x20,r24
1105:lvds.c        ****                            //Need to do the same for other channels
1106:lvds.c        ****   
1107:lvds.c        ****    setbit(PWM1B, TCCR1A);  //Enable PWM on OC1B for CLOCK 
 226               		.stabn	68,0,1107,.LM15-.LFBB2
 227               	.LM15:
 228 0042 80B7      		in r24,80-0x20
 229 0044 8160      		ori r24,lo8(1)
 230 0046 80BF      		out 80-0x20,r24
1108:lvds.c        **** 
1109:lvds.c        ****    setbit(PWM1D, TCCR1C);
 231               		.stabn	68,0,1109,.LM16-.LFBB2
 232               	.LM16:
 233 0048 87B5      		in r24,71-0x20
 234 004a 8160      		ori r24,lo8(1)
 235 004c 87BD      		out 71-0x20,r24
1110:lvds.c        **** 
1111:lvds.c        ****    //PWM1D is not in TCCR1A...
1112:lvds.c        **** 
1113:lvds.c        ****    setoutPORT(PB1, PORTB);   //+OC1A, DVH/BLUE, MISO (usually heart)
 236               		.stabn	68,0,1113,.LM17-.LFBB2
 237               	.LM17:
 238 004e B99A      		sbi 55-0x20,1
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 27


1114:lvds.c        **** //   setoutPORT(PB0, PORTB);   //-OC1A    MOSI unused
1115:lvds.c        ****    setoutPORT(PB2, PORTB); //-OC1B, -GREEN    (INVERTED) SCK
 239               		.stabn	68,0,1115,.LM18-.LFBB2
 240               	.LM18:
 241 0050 BA9A      		sbi 55-0x20,2
1116:lvds.c        ****    setoutPORT(PB3, PORTB); //+OC1B Clock (OC1B, not inverted)
 242               		.stabn	68,0,1116,.LM19-.LFBB2
 243               	.LM19:
 244 0052 BB9A      		sbi 55-0x20,3
1117:lvds.c        ****    setoutPORT(PB5, PORTB); //+OC1D, RED
 245               		.stabn	68,0,1117,.LM20-.LFBB2
 246               	.LM20:
 247 0054 BD9A      		sbi 55-0x20,5
1118:lvds.c        **** 
1119:lvds.c        **** 
1120:lvds.c        ****    writeMasked(((0<<WGM11) | (0<<WGM10)), //FastPWM (combined with above)
 248               		.stabn	68,0,1120,.LM21-.LFBB2
 249               	.LM21:
 250 0056 86B5      		in r24,70-0x20
 251 0058 8C7F      		andi r24,lo8(-4)
 252 005a 86BD      		out 70-0x20,r24
1121:lvds.c        ****                ((1<<WGM11) | (1<<WGM10)), // (affects all PWM channels)
1122:lvds.c        ****                TCCR1D);
1123:lvds.c        **** 
1124:lvds.c        ****    //OC1A is used, but /OC1A isn't
1125:lvds.c        **** // Not Valid (deadTime only functions if in complementary-mode):
1126:lvds.c        ****    // OTOH: dead-time is not necessary in the only case we need to switch
1127:lvds.c        ****    // Most lvds states use clear on compare-match, set at 0
1128:lvds.c        ****    // But there is one that uses the opposite
1129:lvds.c        ****    // This can be toggled by a single bit-change
1130:lvds.c        ****    //  COM1A1 = 1
1131:lvds.c        ****    //  COM1A0 value indicates what happens on Compare-Match
1132:lvds.c        ****    //                 or ! at BOTTOM
1133:lvds.c        **** //#define lvds_clrOnCompare() clrbit(COM1A0, TCCR1A)
1134:lvds.c        **** //#define lvds_setOnCompare() setbit(COM1A0, TCCR1A)
1135:lvds.c        ****    //HOWEVER: the alternative is possible:
1136:lvds.c        ****    // Use complementary (clear-on-compare)
1137:lvds.c        ****    // and single-ended with set-on-compare
1138:lvds.c        ****    // COM1A0 = 1
1139:lvds.c        ****    // COM1A1 value indicates what happens on Compare-Match
1140:lvds.c        **** 
1141:lvds.c        **** /* These are three instructions apiece!
1142:lvds.c        **** #define lvds_ComplementaryClrOnCompare() clrbit(COM1A1, TCCR1A)
1143:lvds.c        **** 
1144:lvds.c        **** #define lvds_setOnCompare() setbit(COM1A1, TCCR1A)
1145:lvds.c        **** #define lvds_clrOnCompare() lvds_ComplementaryClrOnCompare()
1146:lvds.c        **** */
1147:lvds.c        **** 
1148:lvds.c        **** //Page 99:
1149:lvds.c        **** // "In Fast PWM Mode ... when the COM1x1:0 bits are set to “01” ...
1150:lvds.c        **** //  an user programmable Dead Time delay is inserted for 
1151:lvds.c        **** //  these complementary output pairs (OC1x and OC1x)."
1152:lvds.c        **** 
1153:lvds.c        **** //Page 98:
1154:lvds.c        **** // "The counter is loaded with a 4-bit DT1H or DT1L value from DT1 
1155:lvds.c        **** //  I/O register, depending on the edge of the Waveform 
1156:lvds.c        **** //  Output (OCW1x) when the dead time insertion is started."
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 28


1157:lvds.c        **** // In other words, (as it appears from the diagram)
1158:lvds.c        **** //  the dead-time value is loaded into the counter when the corresponding
1159:lvds.c        **** //  edge in OCW1x is detected
1160:lvds.c        **** //  So changing the value of DT1 affects the *next* corresponding edge 
1161:lvds.c        **** //   (NOT if the dead timer is already running)
1162:lvds.c        **** 
1163:lvds.c        **** //Page 96:
1164:lvds.c        **** // "The OCR1x Registers are double buffered when using any of the 
1165:lvds.c        **** // Pulse Width Modulation (PWM) modes."
1166:lvds.c        **** // "The double buffering synchronizes the update of the OCR1x 
1167:lvds.c        **** // Compare Registers to either top or bottom of the counting sequence.
1168:lvds.c        **** // The synchronization prevents the occurrence of odd-length, non-sym- 
1169:lvds.c        **** // metrical PWM pulses, thereby making the output glitch-free."
1170:lvds.c        **** 
1171:lvds.c        **** //Page 100:
1172:lvds.c        **** //"A change of the COM1x1:0 bits state will have effect 
1173:lvds.c        **** // at the first Compare Match after the bits are written."
1174:lvds.c        **** //Page 97: HAH!
1175:lvds.c        **** //"Be aware that the COM1x1:0 bits are not double buffered 
1176:lvds.c        **** // together with the compare value. 
1177:lvds.c        **** // Changing the COM1x1:0 bits will take effect immediately."
1178:lvds.c        **** 
1179:lvds.c        **** 
1180:lvds.c        **** //#define lvds_setOnCompare()   
1181:lvds.c        **** //   TCCR1A = ( (1<<COM1A1) | (1<<COM1A0) 
1182:lvds.c        **** //            | (0<<COM1B1) | (1<<COM1B0) 
1183:lvds.c        **** //            | (1<<PWM1A) | (1<<PWM1B) )
1184:lvds.c        **** //#define lvds_ComplementaryClrOnCompare() \ //
1185:lvds.c        ****    //Do TCCR1C first, because it contains shadow-bits of TCCR1A that I
1186:lvds.c        ****    // don't want to have to rewrite...
1187:lvds.c        ****    TCCR1C = ( (1<<COM1D1) | (0<<COM1D0)
 253               		.stabn	68,0,1187,.LM22-.LFBB2
 254               	.LM22:
 255 005c 89E0      		ldi r24,lo8(9)
 256 005e 87BD      		out 71-0x20,r24
1188:lvds.c        ****             | (1<<PWM1D) );
1189:lvds.c        **** 
1190:lvds.c        ****    TCCR1A = ( (0<<COM1A1) | (1<<COM1A0) 
 257               		.stabn	68,0,1190,.LM23-.LFBB2
 258               	.LM23:
 259 0060 83E6      		ldi r24,lo8(99)
 260 0062 80BF      		out 80-0x20,r24
1191:lvds.c        ****             | (1<<COM1B1) | (0<<COM1B0) //Don't use complementary for CLK
1192:lvds.c        ****             | (1<<PWM1A) | (1<<PWM1B) );
1193:lvds.c        **** 
1194:lvds.c        **** //#define lvds_clrOnCompare() lvds_ComplementaryClrOnCompare()
1195:lvds.c        **** 
1196:lvds.c        ****    // Enable Complementary-Mode (and thus the dead-timer)
1197:lvds.c        ****    // This'll be changed as needed, but we need COM1A0 set prior to that
1198:lvds.c        **** 
1199:lvds.c        ****    //   lvds_clrOnCompare();
1200:lvds.c        **** //   writeMasked(((0<<COM1A1) | (1<<COM1A0)), 
1201:lvds.c        **** //               ((1<<COM1A1) | (1<<COM1A0)), 
1202:lvds.c        **** //               TCCR1A);
1203:lvds.c        **** 
1204:lvds.c        **** 
1205:lvds.c        **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 29


1206:lvds.c        ****    //THIS IS NOT THOROUGHLY THOUGHT-OUT...
1207:lvds.c        ****    // as I recall, we need to use /OC1B for the clock output
1208:lvds.c        ****    //  because it won't be affected by the deadtime...
1209:lvds.c        **** //Now Handled in lvds_xxxOnCompare():
1210:lvds.c        **** //   writeMasked(((0<<COM1B1) | (1<<COM1B0)),
1211:lvds.c        **** //               ((1<<COM1B1) | (1<<COM1B0)),
1212:lvds.c        **** //               TCCR1A);
1213:lvds.c        **** 
1214:lvds.c        ****    //Since PWM inversion affects all channels, great-pains were taken
1215:lvds.c        ****    // to assure that it needn't be changed in any lvds state...
1216:lvds.c        ****    // PWM inversion must be enabled:
1217:lvds.c        **** 
1218:lvds.c        ****    //inverted with PWM1X
1219:lvds.c        **** //   setbit(PWM1X, TCCR1B);
1220:lvds.c        ****  
1221:lvds.c        ****     Nada_init();
 261               		.stabn	68,0,1221,.LM24-.LFBB2
 262               	.LM24:
 263 0064 80E3      		ldi r24,lo8(48)
 264 0066 84BD      		out 68-0x20,r24
 265 0068 84E0      		ldi r24,lo8(4)
 266 006a 8DBD      		out 77-0x20,r24
 267               	/* epilogue start */
1222:lvds.c        **** }
 268               		.stabn	68,0,1222,.LM25-.LFBB2
 269               	.LM25:
 270 006c 0895      		ret
 271               		.size	lvds_timerInit, .-lvds_timerInit
 272               	.Lscope2:
 273               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 274               		.stabd	78,0,0
 275               		.stabs	"lcd_Init:F(0,15)",36,0,873,lcd_Init
 276               	.global	lcd_Init
 277               		.type	lcd_Init, @function
 278               	lcd_Init:
 279               		.stabd	46,0,0
 280               		.stabs	"_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c",132,0,0,.Ltext5
 281               	.Ltext5:
   1:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //lcdStuff 0.52ncf
   2:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
   3:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.52ncf - getting rid of git in this directory...
   4:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.51ncf-git-1ish Adding a few notes remaining from LCDdirectLVDS:
   5:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //						"SCOPING has been removed in LVDS, revisit LCDdirect50"
   6:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.51ncf-git first attempt at using git for uploading to googleCode...
   7:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //        this version isn't yet used by any projects
   8:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.50ncf cleanup, colorOverride is unused...
   9:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //				SMILEY -> LCD_SMILEY
  10:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.40ncf-1 loadRow unused... removal untested...
  11:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.40ncf drawPix...
  12:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.30ncf-6 HSYNC_INACTIVE, etc. definable elsewhere
  13:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.30ncf-5 Adding BLUE_VERT_BAR_REVERSED
  14:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.30ncf-4 Adding NOTES: DON'T START WITH BLUE_DIAG_BAR
  15:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.30ncf-3 T_DV and T_Vlow overrideable
  16:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.30ncf-2 Not sure if I've modified it between... but here: 
  17:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //        FRAME_COUNT_TO_DELAY wasn't defined, giving warnings
  18:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.30ncf-1 updateLCD() has return-values for state-switches
  19:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          (VFP, VSync, VBP, DE)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 30


  20:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //        ACTUALLY, that's unnecessary... state-transitions can be
  21:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //        determined by vSync and dataEnable...
  22:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.30ncf Haven't been keeping these backed up regularly...
  23:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //        More toward realtime adjustable timing values
  24:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //        V Front Porch now occurs at the beginning of the frame, instead
  25:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //        of at the end...
  26:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
  27:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.20ncf More Timing Value experiment preparation... 
  28:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.10ncf-3ish looking into reloading methods for e.g. experimenting with
  29:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          timing values: sdramThing2.0-7
  30:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          How to "move" timing-values around data which needn't be
  31:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          changed...
  32:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.10ncf-andsomemore
  33:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          Added MAKELONG to fix integer overflow warnings
  34:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          Revised it from "... + MAKELONG" to "MAKELONG(...)"
  35:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          (The +MAKELONG version is lost in the ether... if you *really*
  36:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //           want it, there's a localized version in sdramThing2.0-6)
  37:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.10ncf-1ish - Adding HSYNC_COUNT_FRAME_COMPLETE
  38:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //               Removal of LVDS_PRESCALER stuff...
  39:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //0.10ncf - Stolen from LCDdirectLVDS/54-moreColorStuff/main.c
  40:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          Removal of LCDdirectLVDS-specific stuff...
  41:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //				A little bit of rewriting of notes to be more generalized
  42:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          All delay_cyc references replaced with delay_Dots,
  43:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //					math changed accordingly...
  44:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
  45:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
  46:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // I hereby declare this FPD-Link simulation technique to forever be called
  47:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  PW-BANGing
  48:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
  49:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // a/o 0.10ncf-4: (sdramThing2.0v8-28)
  50:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   DON'T START WITH BLUE_DIAG_BAR
  51:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   Unless you want to be depressed
  52:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   Good Starting Point DE_BLUE
  53:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
  54:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
  55:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
  56:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //new notes a/o 0.10ncf-3ish:
  57:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // The basic idea is that timing is something that needs to be experimented
  58:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // with, often... so, for cases where LCD timing/drawing data is loaded
  59:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // beforehand (e.g. sdramThing2.0-7), it would be nice not to have to
  60:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // reload *all* the data, only to change the necessary timing data
  61:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
  62:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Neglecting the SDRAM for a second, we have essentially:
  63:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // (The exact placement is not necessarily in order... e.g. DH_DOTS could
  64:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  be at the end of a row, or at the beginning... VSYNC rows could be at
  65:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  the top, or at the bottom.....)
  66:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // (See also notes "Here's how it worked pre-lvds:", which actually are a
  67:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   bit off, e.g. I don't think VSYNC L->H was delayed by DE_TIME after
  68:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   Hsync)
  69:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
  70:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // H_LOW_DOTS + HD_DOTS + DH_DOTS = "Horizontal Blank Time"
  71:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // (This "front/back" thing always confused me...
  72:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  DH_DOTS is *in front of* Hsync as far as *time* is concerned...
  73:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  i.e. looking at a 'scope trace... But something about reading left-to-
  74:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  right causes me to feel like "front" is the furthest to the right
  75:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  which would be *later* in time... weird.
  76:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 31


  77:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
  78:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //        |--|<--H_LOW_DOTS                       "Horiz Front Porch"
  79:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //        |  |--|<--HD_DOTS="Horiz Back Porch"    |<---->|<--DH_DOTS
  80:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //        |  .  .                                 .      |
  81:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //        |<............................................./
  82:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //        |  .  .                                 .    
  83:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //        v  v  .                                 .      
  84:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     /V _______________________________________________  \ VSYNC Rows
  85:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     /H |__|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
  86:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     DE _______________________________________________  /  T_Vlow times)
  87:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              .                                 .
  88:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              .                                 .      "Vsync Back Porch"
  89:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     /V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
  90:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     /H |__|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
  91:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     DE _______________________________________________  /  T_VD times)
  92:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              .                                 .         "Vbp should be
  93:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              v                                 v          static"
  94:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              ***********************************
  95:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              *                                 *
  96:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     /V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
  97:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     /H |__|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
  98:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     DE ______|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|______   /
  99:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              *                                 *
 100:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              *<------ DE_ACTIVE_DOTS --------->*        (Repeat V_COUNT
 101:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              *      .                          *         =1024 times)
 102:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                     .   Displayed Pixels
 103:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              *      .                          *
 104:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              *                                 *
 105:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              *                                 *
 106:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     /V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 107:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     /H |__|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 108:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     DE ______|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|______   /
 109:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              *                                 *
 110:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              ***********************************      
 111:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                                                      "Vsync Front Porch"
 112:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     /V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 113:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     /H |__|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 114:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     DE _______________________________________________  /  T_DV times)
 115:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 116:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 117:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #warning "TODO Maybe: LCDdirectLVDS (which so far is the only version which synced with such low re
 118:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 119:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Front vs. Back porches....
 120:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   If I were to draw a car driving down a street... 
 121:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   I would draw it with its front to the right, driving to the right...
 122:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 123:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //       _____/¯¯¯¯\________     \O/
 124:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   ...|__   _________   __\     |
 125:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      ...\_/         \_/       / \							//
 126:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 127:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   The person is *in front of* the car... which means the car has not yet
 128:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   arrived at the person, but will soon... 
 129:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   (later in time, not *before* in time)
 130:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  This is my logic...
 131:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   So The "Horizontal Front Porch", to me, should be to the RIGHT of the
 132:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   Horizontal Sync Pulse...
 133:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   But that ain't how it is (unless I've confused myself into a circle
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 32


 134:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   where my logic is actually right, and I just think it's wrong?)
 135:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   
 136:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  By the logic that the front porch occurs *before* the sync pulse,
 137:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   ... I suppose we could think of a person in front of a house... it
 138:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   makes more sense, anyhow, since it's a porch in front of a house, 
 139:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   not person in front of a car.
 140:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   The person's walking into the house, crosses the *front*-porch 
 141:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   *before* enterring the doorway. If he continues walking all the way
 142:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   through the house and out the back-door, he'll be crossing the *back*
 143:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   porch later in time...
 144:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 145:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Right, so the logic makes sense... but for some reason I have to run 
 146:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  through this whole diatribe every time I see the terms.
 147:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Heh, and even after going through it, the damned thing seems backwards.
 148:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  (Probably because I drew it with the front-porch to the right side...)
 149:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  (AND THEN there's the issue that it seems to me like the front-porch
 150:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   should be to the left of the drawing-area whereas the back-porch
 151:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   should be to the right of it... rather than to the HSYNC pulse)
 152:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 153:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 154:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Anyways, all that drawing was to figure out where to position this
 155:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // in memory, such that it would be the least processing-effort to modify
 156:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // timing values for testing... (because loading the SDRAM's free-running 
 157:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // data takes ~20minutes!)
 158:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 159:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 160:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 161:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //Options LTN, IDT, or TESTVALS
 162:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // IDT display *still* doesn't sync... maybe my H/V signals aren't right
 163:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #ifndef DISPLAY
 164:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define DISPLAY TESTVALS //LTN //TESTVALS //IDT //LTN
 165:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 166:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 167:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //oldNote:
 168:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // TODO: Between OSCCAL_VAL and FRAME_UPDATE_DELAY
 169:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  it seems the speed (at least for the LTN) isn't so important after all
 170:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  This could be used to my advantage...
 171:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Maybe bump OSCCAL_VAL all the way up, but use a slower "bit-rate"
 172:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Thus, pixels could be skinnier, thus higher-resolution.
 173:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   Or more instructions could be used for the same resolution
 174:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   allowing, e.g. sprites from program-memory, without necessitating a
 175:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   large (or any?) frame-buffer...
 176:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 177:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 178:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //This would normally be 0 for the highest-speed frame-refresh possible
 179:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // However, increasing this value can slow the frame-refresh rate
 180:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   if desired
 181:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // e.g. 50000 causes it to refresh ~ every few seconds
 182:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   (durn-near the limit for how long the LCD will retain an image)
 183:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // The benefit being that it doesn't flicker at annoying rates for
 184:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  stationary images
 185:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  worth exploring...
 186:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // This may be highly dependent on the screen capabilities...
 187:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   of course, this sorta thing is undocumented
 188:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   it just has to be experimented with
 189:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   Further, it may be quite hard on the Liquid Crystals, since they'd 
 190:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   likely be driven DC... not sure what the long term effects are.
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 33


 191:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // This could be a hell of a lot more sophisticated...
 192:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // e.g. refresh after a frameBuffer change
 193:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      refresh based on a seconds-timer
 194:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      ...
 195:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // AS-IS: Does refreshes completely independent of the frame-buffer
 196:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      if it's too slow, some images may be missed completely.
 197:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      This is not true for FRAME_SYNC TRUE (below)
 198:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      (and it's not really useful anymore with FRAME_SYNC)
 199:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // a/o sdramThing2.0, this is not really relevent...
 200:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // 	if the frame needs updating, just stop free-running, right?
 201:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // 	well, doing-so might cause issues, since the LVDS clock will not be
 202:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    running... this is a TBD
 203:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define FRAME_UPDATE_DELAY 0//5000//50000 //2000 //5000 //20000 //50000
 204:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 205:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 206:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //New Idea:
 207:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Disable the Hsync timer interrupt after the frame completes
 208:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  and reenable elsewhere...
 209:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  (It seems pixels changing from one shade to another take an
 210:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   intermediate step halfway between)
 211:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  (Thus, two updates then a pause might clear that up)
 212:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  (Duh... it doesn't clear that up, because the fastest refresh rate
 213:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   is the same...)
 214:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  (but it is an interesting effect)
 215:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  (Double-Duh... I was using a slow refresh with FRAME_UPDATE_DELAY)
 216:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Reworded: Having several frame refreshes before a pause helps to
 217:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  "solidify" the color changes... especially the sharp changes 
 218:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  (e.g. yellow<->black)
 219:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  (Side Note: I saw this effect on a regular (NON-LVDS) TFT display 
 220:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   in LCDdirect that was only connected such that R, G, and B were each
 221:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   either full-off or full-on, i.e. all Red bits were connected to a
 222:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   single output pin (full on when 1, full off when 0).
 223:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   I hadn't attributed it to improper refresh synchronization
 224:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   as the refresh rate was too fast to see... That's a handy way to get
 225:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   intermediate shades/colors without refresh-flicker from pulsing them!)
 226:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  connected with each color 
 227:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  0 means no delay (except FRAME_UPDATE_DELAY) via interrupt disabling
 228:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  If you WANT this effect (for intermediate shades?) 
 229:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   set FRAME_COUNT_TO_DELAY to 1
 230:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Then, each change of color will (apparently) result in a value halfway
 231:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   between the old color and the new color
 232:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Not sure whether it's an electrical problem, but these half-shades 
 233:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   appear dithered, sometimes ugilly, sometimes it's nice. I guess it
 234:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   depends on the goal...
 235:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //#define FRAME_COUNT_TO_DELAY 2//7//1//5//2//3
 236:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 237:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 238:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //A/O v13: Using the Samsung LTN display, instead of the IDTech IAXG
 239:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // LTN appears to be content with my pseudo-LVDS scheme.
 240:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // IAXG has never unblanked
 241:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      Even though suitable timings were found with SwitchResX
 242:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      Maybe due to psuedo-LVDS
 243:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            slight timing issues // It probably doesn't work with all cases...
 244:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Definitely with drawPix/Images...(RC oscillator variances?)
 245:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            glitches when switching LVDS states 
 246:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                 (thought I had that figured out, originally)
 247:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      The fact the LTN appears to recognize the signalling suggests the
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 34


 248:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      IAXG would be worth further exploration...
 249:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //         Unfortunately, the CCFT blew out my inverter
 250:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                        And I must have put it back together incorrectly
 251:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                        (backlight filters out of order or flipped?)
 252:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                        (which actually makes for some very interesting
 253:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                         visuals, but hard to develop with)
 254:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      IAXG: uses DE, V, and H
 255:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //             At low pixel-clock DE is active for fewer pixels...
 256:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              Last Tested: 680 was full-screen
 257:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //             Nice because it increases the frame-rate!
 258:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      LTN:  uses DE only
 259:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 260:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 261:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // The idea is to use FastPWM with the PLL to implement 64-85Mbits/sec
 262:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  (the PLL on the Tiny861 supposedly maxes out at 85MHz)
 263:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  (Though I am currently running with OSCAL set to the highest frequency
 264:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   and the PLL seems to be syncing at about 128MHz)
 265:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  (New Note, a/o sdramThing2.0v5... it's kinda ironic that I was able to
 266:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   run it at 128MHz with nothing more than an AVR and some gates...
 267:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   seeing as how sdramThing has been fidgetty just running at 8MHz
 268:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   Anyways, an eventual goal is to run at 133MHz+, using basically
 269:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   nothing more than the SDRAM itself for timing and refreshes...
 270:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   would allow for full resolution and full color-depth)
 271:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 272:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 273:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 274:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 275:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Wiring:
 276:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   Many iterations of AVR->Differential "LVDS" circuitry resulted in the
 277:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   simplest of all:
 278:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 279:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   Believe it or not, the XOR is a standard TTL LS-series XOR: 74LS86
 280:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     Specifically: TI SN74LS86N from 1980 (the only XOR in my collection)
 281:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   It's spec'd to run from 4.5-5.5V, and its propagation delays and slew
 282:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     rates aren't really spec'd to be good enough for 128MHz pixel clock
 283:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     yet it's working...
 284:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   Further, the output voltages are right in the LVDS range,
 285:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     IIRC (last I 'scoped) around 1.5V High and 1.0V Low
 286:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      (Don't forget the LCD has a 100ohm resistor between
 287:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //         RXinN/clk+ and RXinN/clk-)
 288:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 289:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   It's probably best to use two XORs from the same chip for a single
 290:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    LVDS channel, since different chips may have slightly different
 291:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    characteristics. 
 292:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 293:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   The entire circuit, thus, requires TWO 74LS86's 
 294:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    (four XORs apiece, two per LVDS channel, 8-total)
 295:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 296:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 297:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              VCC3V3   VCC3V3
 298:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                |        |                           ______________
 299:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                +---\ \¯¯¯-_                        |  LCD (1 channel
 300:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                     | |    ¯-                      |       of 4)
 301:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                     | | XOR   >------> RXinN/clk-  | ----.
 302:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   AVR, etc.         | |    _-                      |     |
 303:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   3.3V TTL >---+---/ /___-¯                        |     \ 100
 304:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   output       |                                   |     /
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 35


 305:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                |                                   |     \ ohms
 306:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                |                                   |     /
 307:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                `---\ \¯¯¯-_                        |     |
 308:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                     | |    ¯-                      |     |
 309:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                     | | XOR   >------> RXinN/clk+  | ----'
 310:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                     | |    _-                      |
 311:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                +---/ /___-¯                        |
 312:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                |        |                          |
 313:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //               GND      GND
 314:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 315:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  
 316:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Also used: The TTL 74AHC series...
 317:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    I found some one-gang 74AHC1G32 and 74AHC1G86's on an old iBook
 318:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     motherboard. (An OR and an XOR, respectively). These are spec'd for
 319:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     3.3V operation, and faster. The output voltages appear OK for LVDS
 320:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     (with a 100ohm load in the LCD)
 321:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 322:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  NOTE: Since I only had enough of these 1-gang devices for two LVDS
 323:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     channels, I had to implement Red and Green with the LS 
 324:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     before switching all channels to the LS... Using different chips
 325:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     (specifically, different TYPES of chips) for different channels
 326:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     caused timing issues: Since the AHC is faster, the clock and Blue
 327:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     signals are synchronized, but the red and green signals were shifted
 328:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     a bit or two (resulting in "Black" appearing green)
 329:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 330:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  For other circuits attempted, see oldNotes.txt
 331:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     (and boy there were many, involving voltage dividers, AC coupling,
 332:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      reference voltages, BJT differential amplifiers... I doubt I 
 333:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      documented them all, or even most. Whoda thunk the simplest, 
 334:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      especially under- AND over-spec'd--timing, supply voltage, and
 335:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      output voltage--would be the one...?)
 336:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 337:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // LVDS/FPD-Link timing:
 338:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 339:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            |<--- (LCDdirectLVDS: "pixel") --->|
 340:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Timer1:   |<-- One Timer1 Cycle (OCR1C=6) -->|
 341:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  TCNT:     |  0   1    2    3    4    5    6  |  0   1    2    3    
 342:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            |____.____.____.____               |____.____.____.____
 343:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  RXclk+:   /         |         \    .    .    /         |         \ //
 344:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            |         |          ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|         |
 345:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // One Pixel: |         |<--- One FPD-Link Pixel Cycle --->|
 346:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            |                                  |
 347:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // "Blue/DVH" |____ ____v____ ____ ____v____ ____|____ ____
 348:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  RXin2:    X B3 X B2 X DE X /V X /H X B5 X B4 X B3 X B2 X ...
 349:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯
 350:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            |         |<--Not Blue-->|         |
 351:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            |                                  |
 352:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // "Green"    |____ ____v____ ____v____ ____ ____|____ ____
 353:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  RXin1:    X G2 X G1 X B1 X B0 X G5 X G4 X G3 X G2 X G1 X ...
 354:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ ¯¯¯¯ 
 355:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            |         |<------->|-Not Green    |
 356:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 357:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // "Red"      |____ ____v____v____ ____ ____ ____|____ ____
 358:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  RXin0:    X R1 X R0 X G0 X R5 X R4 X R3 X R2 X R1 X R0 X ...
 359:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            |¯¯¯¯ ¯¯¯¯^¯¯¯¯^¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯
 360:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            |         |<-->|-Not Red
 361:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 36


 362:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   Of course: The "Not Green/Red" bits above are least-significant-bits
 363:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              and basically have little/no visible effect
 364:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 365:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 366:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Implementations/prospects:
 367:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  * rowBuffer.c (more like row-settings-buffer)
 368:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     calculate a row's worth of pixels before drawing that row
 369:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     (uses packed color settings in a single byte per drawable pixel)
 370:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     64 drawable pixels across, regardless of LVDS speed
 371:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  * For faster pixels: these settings values could be stored 
 372:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     in individual bytes. Gives about 1/3 more pixels at 3x the memory
 373:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     (not implemented)
 374:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  * rowSegBuffer.c
 375:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     also calculates an entire row before drawing it
 376:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     instead of storing pixels, store "segments"
 377:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     i.e. each segment is defined by a color value and a length
 378:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     Number of segments is limited only by memory...
 379:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      e.g. 64 segments per row (max) is 64*3Bytes
 380:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //       Three bytes for color, and *really simple* packing for seg-length
 381:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      BUT: at slow LVDS speeds, the resolution of these segments could be
 382:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //       as high as one LCD pixel.
 383:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      possibly: at *really* low LVDS speeds we could be 64*2Bytes
 384:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      (with packing)
 385:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      Actually: Using GB_COMBINED gives 2Bytes per segment
 386:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      only adds two clock cycles to each "pixel", so probably worth it
 387:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 388:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   In Any Case: There's not enough RAM for a full frame
 389:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          64 pixels across * 64 pixels down is 4096 bytes
 390:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          So whatever method, we need to precalculate each row before
 391:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          displaying it
 392:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          Could be as simple as loading direct from program memory
 393:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 394:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 395:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Since low-bits are barely visible, their effect is neglected.
 396:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 397:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 398:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE/V/H Timing (LCDdirectLVDS):
 399:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  
 400:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 401:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            |  0   1    2    3    4    5    6       All: set @ 0
 402:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            |____.____.____.____                         OCR1C = 6 
 403:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Clock:    /                   \    .    .    /         Complementary-
 404:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                                 ¯¯¯¯ ¯¯¯¯ ¯¯¯¯          Output Mode
 405:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                                                          required for DT
 406:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   Signal:    B3   B2   DE   /V   /H   B5   B4 | B3
 407:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //             ____ ____ ____ ____ ____ ____ ____|____    
 408:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   DE:      X B3 X B2 /    .    .    \ B5 X B4 X B3 X    
 409:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   state2    ¯¯¯¯ ¯¯¯¯                ¯¯¯¯ ¯¯¯¯|¯¯¯¯    
 410:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   DE_BLUE: >¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|    DT=X, OCR=0
 411:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                         Watch the transition!! -------^
 412:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   DE_NORM: >_________/¯¯¯¯¯¯¯¯¯¯¯¯¯¯\_________|    DT=2, OCR=4
 413:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   DC_DISABLED:
 414:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   maxBlue: >¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯\____|		DT=0, OCR=5
 415:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //             See below for more blue settings...
 416:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 417:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //             ____ ____      ____      ____ ____|____ 
 418:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  H (only): X xx X xx \    /    \    / xx X xx X xx X    
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 37


 419:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   state1    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯      ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ 
 420:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            >______________/¯¯¯¯\______________|    DT=3, OCR=3
 421:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  DC_DISABLED:
 422:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   Not much can be done...
 423:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 424:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //             ____ ____           ____ ____ ____|____ 
 425:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V w/o H:  X xx X xx \    .    /    \ xx X xx X xx X
 426:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   state3    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯      ¯¯¯¯ ¯¯¯¯|¯¯¯¯
 427:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            >___________________/¯¯¯¯\_________|    DT=4, OCR=4 (+?)
 428:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DC_DISABLED:
 429:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            >___________________/¯¯¯¯¯¯¯¯¯\____|		DT=4, OCR=5
 430:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 431:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //             ____ ____                ____ ____|____ 
 432:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V w/ H:   X xx X xx \    .    .    / xx X xx X xx X
 433:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   state4    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯ ¯¯¯¯|¯¯¯¯ 
 434:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            >__________________________________|    DT=X, OCR=0
 435:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                             TransitionWatch!!! -------^
 436:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                             Shouldn't matter... DT from no-edge
 437:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DC_DISABLED:
 438:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            >¯¯¯¯¯¯¯¯¯\________________________|		DT=0, OCR=1
 439:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 440:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //             ____ ____      ____ ____ ____ ____|____ 
 441:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Nada:     X xx X xx \    /    .    \ xx X xx X xx X    
 442:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   state0    ¯¯¯¯ ¯¯¯¯ ¯¯¯¯           ¯¯¯¯ ¯¯¯¯|¯¯¯¯     
 443:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            >______________/¯¯¯¯¯¯¯¯¯\_________|    DT=3, OCR=4 (+?)
 444:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DC_DISABLED:
 445:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //            >______________/¯¯¯¯¯¯¯¯¯¯¯¯¯¯\____|		DT=3, OCR=5
 446:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 447:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //So far this is the only case I've seen:
 448:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // /Vsync
 449:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #ifndef VSYNC_ACTIVE
 450:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define VSYNC_ACTIVE		0
 451:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 452:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #ifndef VSYNC_INACTIVE
 453:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define VSYNC_INACTIVE	1
 454:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 455:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // /Hsync
 456:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #ifndef HSYNC_ACTIVE
 457:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define HSYNC_ACTIVE		0
 458:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 459:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #ifndef HSYNC_INACTIVE
 460:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define HSYNC_INACTIVE	1
 461:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 462:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE (active high)
 463:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #ifndef DE_ACTIVE
 464:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define DE_ACTIVE			1
 465:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 466:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #ifndef DE_INACTIVE
 467:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define DE_INACTIVE		0
 468:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 469:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 470:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // HERE!
 471:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 472:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 473:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 474:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 475:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Transitions: OLD!!!!! WRONG!!!!
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 38


 476:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   (are they? There're several additional transitions, now, for one.)
 477:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  The idea is to reduce the number of instructions between each
 478:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  LVDS "state."
 479:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  These are implemented below in the case:
 480:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    "#else //NOT FULL_INIT_TESTS"
 481:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Since each instruction takes *longer than* a single pixel
 482:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    two instructions would *at best* occur on two consecutive pixels
 483:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    Thus, there's likely to be a transition-glitch
 484:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    (e.g. old OCR value with new DT value)
 485:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Note that the new DT values are implemented at the next corresponding
 486:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    edge after the DT-write instruction completes
 487:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    (for +OC1A/DT1H, when TCNT is reset to 0)
 488:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    (for -OC1A/DT1L, when TCNT passes OCR1A)
 489:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    New OCR values are delayed until the next TCNT reset to 0
 490:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 491:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Initial:
 492:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Nada					DT=2  NADA_OCR = (3<=OCR<(=?)6)
 493:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 494:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Nada	->	H			OCR=2
 495:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  H		->	Nada		OCR=NADA_OCR
 496:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  
 497:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Nada	->	V			DT=3
 498:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V		->	V+H		OCR=0
 499:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V+H	->	V			OCR=NADA_OCR
 500:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V		->	Nada		DT=2
 501:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 502:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Nada	->	DE			DT=1
 503:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  DE	->	Nada		DT=2
 504:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 505:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if 0
 506:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (defined(REMOVE_DC) && REMOVE_DC)
 507:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define Nada_init()         { DT1=(3<<4); OCR1A=5; }
 508:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 509:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  //Unused, normally...
 510:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define Vsync_init()       { DT1=(4<<4);  OCR1A=5; }
 511:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define VplusH_init()      { DT1=0;       OCR1A=1; }
 512:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define Hsync_init()       { DT1=(3<<4);  OCR1A=3; }
 513:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define DEonly_init()      { DT1=(2<<4);  OCR1A=4; }
 514:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define DEblue_init()		 { DT1=0;       OCR1A=5; }
 515:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 516:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #else //!REMOVE_DC
 517:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //Nada init
 518:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define Nada_init()         { DT1=(3<<4); OCR1A=4; }
 519:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 520:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //Unused, normally...
 521:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define Vsync_init()			{ DT1=(4<<4);	OCR1A=4; }
 522:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define VplusH_init()		{ DT1=0;			OCR1A=0; }
 523:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define Hsync_init()			{ DT1=(3<<4);	OCR1A=3; }
 524:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // #define DE_init()				{ DT1=(2<<4);	OCR1A=4; } //...SHOULD BE
 525:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define DEonly_init()			{ DT1=(2<<4);  OCR1A=4; }
 526:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define DEblue_init()			{ DT1=0;       OCR1A=6; }
 527:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //#define DE_init()				{ DT1=(1<<4);	OCR1A=2; } //Works with DE_ONLY
 528:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  //#define DE_init()				{ DT1=0;			OCR1A=0xff; }	//DE_BLUE
 529:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif //REMOVE_DC
 530:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 531:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 532:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //#define FULL_INIT_TESTS TRUE
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 39


 533:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 534:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //Display is DE-Only (doesn't use H/Vsync)
 535:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Shouldn't be necessary to select this if it is,
 536:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // since DE timing is the same either way
 537:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // but I want to test whether a single-bit is being detected
 538:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // (e.g. maybe the rise/fall-times of the output aren't fast enough for a
 539:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  single bit, which might explain why the other display didn't work)
 540:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //These are just examples... the project should define them:
 541:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if 0
 542:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (defined(DE_ONLY_DISPLAY) && DE_ONLY_DISPLAY)
 543:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Vsync_fromNada()      Nada_init()
 544:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define VplusH_fromVsync()    Nada_init()
 545:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Vsync_fromVplusH()    Nada_init()
 546:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Nada_fromVsync()      Nada_init()
 547:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Hsync_fromNada()      Nada_init()
 548:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Nada_fromHsync()      Nada_init()
 549:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define DEonly_fromNada()     DE_init()
 550:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define DEblue_fromDEonly()	DE_init()
 551:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Nada_fromDEblue()		Nada_init()
 552:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #if(DE_BLUE)
 553:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "DE_BLUE is true, but not implemented with DE_ONLY_DISPLAY"
 554:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "...The display should be blank"
 555:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #endif
 556:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //Use full initialization of each LVDS state
 557:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // (might not be good during transitions, but should guarantee
 558:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  steady-state, in case my transitions aren't correct...)
 559:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (defined(FULL_INIT_TESTS) && FULL_INIT_TESTS)
 560:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Vsync_fromNada()		Vsync_init()
 561:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define VplusH_fromVsync()		VplusH_init()
 562:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Vsync_fromVplusH()		Vsync_init()
 563:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Nada_fromVsync()		Nada_init()
 564:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Hsync_fromNada()		Hsync_init()
 565:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Nada_fromHsync()		Nada_init()
 566:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define DEonly_fromNada()		DEonly_init()
 567:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define DEblue_fromDEonly()	DEblue_init()
 568:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Nada_fromDEonly()		Nada_init()
 569:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Nada_fromDEblue()		Nada_init()
 570:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 571:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 572:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #else	//NOT FULL_INIT_TESTS
 573:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //#define Vsync_fromNada()   { DT1=(4<<4); }
 574:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Vsync_fromNada()   { DT1=(4<<4); OCR1A=5; } //Leave two bits high
 575:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 																	 //for easy-scoping
 576:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 						//Three would be nicer, but I'm pretty sure OCR=TOP=ON
 577:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define VplusH_fromVsync() { OCR1A=0; }
 578:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //#define Vsync_fromVplusH() { OCR1A=4; }
 579:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Vsync_fromVplusH() { OCR1A=5; }				//Extra bits for scoping
 580:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //#define Nada_fromVsync()   { DT1=(3<<4); }
 581:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Nada_fromVsync()   { DT1=(3<<4); OCR1A=4; } //scoping...
 582:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Hsync_fromNada()   { OCR1A=3; }
 583:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Nada_fromHsync()   { OCR1A=4; }
 584:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 585:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Nada_fromDEblue()	{ DT1=(3<<4); OCR1A=4; }
 586:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define Nada_fromDEonly()	{ DT1=(3<<4); }
 587:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define DEonly_fromNada()	{ DT1=(2<<4); }
 588:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define DEblue_fromNada()	{ OCR1A=0xff; }
 589:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define DEblue_fromDEonly() { OCR1A=0xff; }
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 40


 590:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 591:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif //End Of FULL_INIT_TESTS
 592:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 593:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 594:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 595:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 596:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // The typical patterns look like this (not at all to scale):
 597:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   ----______------------------------------------------______-- V
 598:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //             ....
 599:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      --_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_ H
 600:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //             ....
 601:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      __________-__-__-__-__-__-__-__-__-__-__________________  DE
 602:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                 
 603:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //             ^^^^\														//blah
 604:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //             1234 5?
 605:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Pixels are sent during DE High (basically all the CPU will be used here)
 606:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //Ideally, 
 607:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  there won't be any glitches when changing from one state to another
 608:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 609:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Init (pre 1):
 610:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    DeadTimerRising=1
 611:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 612:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  The states are:
 613:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   (Not necessarily accurate, just looking into necessary changes)
 614:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   (from Vsync L->H)
 615:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 616:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   1  NothingActive (long, No DE, VporchFrontTimes)
 617:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 618:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   2  Hsync
 619:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 620:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   3  NothingActive (short)
 621:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 622:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   4  DE
 623:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 624:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   5  NothingActive(?)
 625:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 626:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   7  Repeat 2-5 for each row
 627:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 628:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   8  NothingActive (long, No DE, VporchBackTimes)
 629:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 630:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   9  V w/o H
 631:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 632:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   10 V w/  H
 633:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 634:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   11 Repeat 9-10 for Vsync time...
 635:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 636:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 637:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Here's how it worked pre-lvds:
 638:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // HSYNC, VSYNC, and DE refer to the actual pins
 639:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // In the LVDS setup, there're modes corresponding to each pin-combination
 640:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 641:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Timer Interrupt:
 642:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  loadData:
 643:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   HSYNC active
 644:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   HSYNC Low delay
 645:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   HSYNC inactive
 646:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   if(dataEnable)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 41


 647:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    DE active
 648:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     Send row data
 649:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    DE inactive
 650:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  //Prep for next interrupt
 651:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  switch(hsyncCount++)
 652:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    //Vsync H->L (active)
 653:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    1:
 654:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          dataEnable=FALSE
 655:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          VSYNC active
 656:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    //Vsync L->H (inactive)
 657:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    T_Vlow:
 658:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          VSYNC inactive
 659:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    //Start of frame
 660:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    T_VD +(T_Vlow):
 661:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          dataEnable=TRUE
 662:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    //All rows have been displayed
 663:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    V_COUNT +(T_VD+T_Vlow):
 664:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          dataEnable=FALSE
 665:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    //Frame Complete
 666:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    T_DV +(V_COUNT+T_VD+T_Vlow): 
 667:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          hsyncCount=0
 668:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  if(dataEnable)
 669:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    Use the remaining time to load the next row to memory
 670:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 671:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  So:
 672:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //Interrupt0       End
 673:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    |             |  Interrupt1
 674:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    v             v  v
 675:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 676:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE ___________________________________________________ ...
 677:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯|_____________________________________ ...
 678:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //       |        ||
 679:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DETIME^--------^|
 680:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                 |
 681:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                 VSYNC active
 682:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                 dataEnable=FALSE (not necessary?)
 683:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 684:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //InterruptT_Vlow   End
 685:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    |             |
 686:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    v             v
 687:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 688:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE ___________________________________________________ ...
 689:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V _____________|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ ...
 690:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //       |        ||
 691:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DETIME^--------^|
 692:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                 |
 693:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                 VSYNC inactive
 694:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 695:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 696:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //InterruptT_VD   End  InterruptT_VD+1
 697:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    |             |  |            End
 698:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    v             v  v            v
 699:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 700:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE ____________________|¯¯¯¯¯¯¯¯|_______|¯¯¯¯¯¯¯¯|____ ...
 701:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 702:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //       |        ||      |        |
 703:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DETIME^--------^|      ^--------^
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 42


 704:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                 |
 705:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                 dataEnable=TRUE
 706:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 707:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //InterruptV_COUNT  End
 708:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    |             |
 709:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    v             v
 710:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 711:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE ___|¯¯¯¯¯¯¯¯|______________________________________ ...
 712:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 713:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //       |        ||      |        |
 714:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DETIME^--------^|      ^--------^
 715:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                 |
 716:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                 dataEnable=FALSE
 717:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 718:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 719:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // This isn't really a state, it's basically just:
 720:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // if(hsyncCount == NUM_HYSYNCS_PER_FRAME)
 721:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    hsyncCount = 0;
 722:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                    .....................................
 723:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                    .                                   .
 724:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //InterruptT_DV   End .Interrupt0                         .
 725:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    |             | .|                                  .
 726:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    v             v .v                                  .
 727:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 728:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE ___________________________________________________ .
 729:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|____________________ .
 730:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //       |        ||  .   |        |                      .
 731:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DETIME^--------^|  .   ^--------^                      .
 732:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                 |  .                                   .
 733:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                 hsyncCount=0 (repeat from Interrupt0)  .
 734:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                    .                                   .
 735:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                    .....................................
 736:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 737:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 738:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 739:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // THESE STATES ARE NO LONGER ACCURATE
 740:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // ESPECIALLY THIS FIRST STATE.
 741:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // V Front Porch originally (and in these drawings) occurred at the end
 742:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // of the frame...
 743:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // More logically, it now starts at the beginning of the frame
 744:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // (Also removing this initial "glitch" of a single interrupt with
 745:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  NothingActive)
 746:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 747:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // THESE STATES ARE NO LONGER ACCURATE (a/o 0.30, for certain)
 748:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // NOW to compare with LVDS states:
 749:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 750:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //Interrupt0       End
 751:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    |             |  Interrupt1
 752:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    v             v  v
 753:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 754:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE ___________________________________________________ ...
 755:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯|_____________________________________ ...
 756:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    ^ ^          ^   ^ ^
 757:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |          |   | |
 758:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |          |   | +--- V w/o H  \ These two toggle until
 759:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |          |   +----- V w/ H   / next LCD state...
 760:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |          |
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 43


 761:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |          +--------- V w/o H > Intermediate change of state
 762:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |
 763:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | +----- NothingActive  \ From Previous State (?)
 764:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    +------- H_Only         /
 765:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 766:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 767:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //InterruptT_Vlow   End
 768:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    |             |
 769:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    v             v
 770:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 771:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE ___________________________________________________ ...
 772:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V _____________|¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ ...
 773:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    ^ ^          ^   ^ ^
 774:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |          |   | |
 775:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |          |   | +--- NothingActive  \ These two toggle until
 776:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |          |   +----- H_Only         / next LCD state...
 777:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |          |
 778:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |          +--------- NothingActive > Intermediate change of state
 779:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |
 780:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | +----- V w/o H   \ From previous state
 781:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    +------- V w/ H    /
 782:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 783:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 784:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //InterruptT_VD   End  InterruptT_VD+1
 785:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    |             |  |            End
 786:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    v             v  v            v
 787:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 788:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE ____________________|¯¯¯¯¯¯¯¯|_______|¯¯¯¯¯¯¯¯|____ ...
 789:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 790:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    ^ ^              ^ ^^        ^ 
 791:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |              | ||        |
 792:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |              | ||        +--- NothingActive  \  These four
 793:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |              | |+------------ DE              | cycle until
 794:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |              | +------------- NothingActive   | next LCD state...
 795:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |              +--------------- H_Only  ^      /
 796:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |                                       |
 797:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | +----- NothingActive  \ From previous   |
 798:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    +------- H_Only         / state           +-This intermediate state
 799:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                                                may not be necessary
 800:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                                                (IAXG01 shows 160 dots!)
 801:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 802:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 803:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 804:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //InterruptV_COUNT  End
 805:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    |             |
 806:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    v             v
 807:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 808:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE ___|¯¯¯¯¯¯¯¯|______________________________________ ...
 809:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 810:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    ^ ^^        ^    ^ ^
 811:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | ||        |    | |
 812:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | ||        |    | +--- NothingActive \  These two toggle
 813:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | ||        |    +----- H_Only        /  until next LCD state
 814:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | ||        |
 815:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | ||        +---- NothingActive \ 								//blah
 816:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |+------------- DE             |  From previous state
 817:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | +-------------- NothingActive  |
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 44


 818:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    +---------------- H_Only        /
 819:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 820:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // This isn't really a state, it's essentially just:
 821:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  if(hsyncCount == NUM_HSYNCS_PER_FRAME)
 822:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    hsyncCount = 0;
 823:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                    .....................................
 824:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                    .                                   .
 825:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //InterruptT_DV   End .Interrupt0                         .
 826:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    |             | .|                                  .
 827:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    v             v .v                                  .
 828:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  H |_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯|_|¯¯¯¯¯¯¯¯¯¯¯¯¯¯
 829:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE ___________________________________________________ .
 830:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯|____________________ .
 831:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    ^ ^             .                                   .
 832:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | |             .....................................
 833:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    | +--- NothingActive \											//blah
 834:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    +----- H_Only        / From previous state...
 835:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 836:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 837:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 838:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  LVDS State transitions:
 839:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   1 H_Only
 840:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   2 NothingActive
 841:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 842:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   3 V w/o H
 843:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   4 V w/ H
 844:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    
 845:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   (repeat 3,4)
 846:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 847:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   5 V w/o H
 848:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 849:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   6 NothingActive
 850:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   7 H_Only
 851:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 852:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   (repeat 6,7)
 853:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 854:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   8 NothingActive
 855:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 856:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   9 H_Only
 857:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  10 NothingActive
 858:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  11 DE
 859:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  12 NothingActive
 860:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 861:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  (repeat 9-12)
 862:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 863:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  13 H_Only
 864:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  14 NothingActive
 865:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 866:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  (repeat 13-14)
 867:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 868:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   These should be reviewed to determine which changes are necessary
 869:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   between each state...
 870:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   (the fewer changes, the less likely we'll glitch...?)
 871:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 872:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 873:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** void lcd_Init(void)
 874:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** {
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 45


 282               		.stabn	68,0,874,.LM26-.LFBB3
 283               	.LM26:
 284               	.LFBB3:
 285               	/* prologue: function */
 286               	/* frame size = 0 */
 875:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  	Nada_init();
 287               		.stabn	68,0,875,.LM27-.LFBB3
 288               	.LM27:
 289 006e 80E3      		ldi r24,lo8(48)
 290 0070 84BD      		out 68-0x20,r24
 291 0072 84E0      		ldi r24,lo8(4)
 292 0074 8DBD      		out 77-0x20,r24
 293               	/* epilogue start */
 876:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** }
 294               		.stabn	68,0,876,.LM28-.LFBB3
 295               	.LM28:
 296 0076 0895      		ret
 297               		.size	lcd_Init, .-lcd_Init
 298               	.Lscope3:
 299               		.stabs	"",36,0,0,.Lscope3-.LFBB3
 300               		.stabd	78,0,0
 301               		.stabs	"segClear:F(0,15)",36,0,47,segClear
 302               	.global	segClear
 303               		.type	segClear, @function
 304               	segClear:
 305               		.stabd	46,0,0
 306               		.stabs	"rowSegBuffer.c",132,0,0,.Ltext6
 307               	.Ltext6:
   1:rowSegBuffer.c **** #include "rowSegBuffer.h"
   2:rowSegBuffer.c **** 
   3:rowSegBuffer.c **** // Dunno why this was originally in main() upon init...
   4:rowSegBuffer.c **** // mighta just been a quick/early test:
   5:rowSegBuffer.c **** // But it might be a good starting-point to see how to use these functions
   6:rowSegBuffer.c **** // (for now)
   7:rowSegBuffer.c **** /*
   8:rowSegBuffer.c ****    segPosition=0;
   9:rowSegBuffer.c ****    newSeg(32, 0x06, (6<<4) | 3);
  10:rowSegBuffer.c ****    newSeg(16, 0x00, (4<<4) | 0);
  11:rowSegBuffer.c ****    newSeg(8, 0x06, (4<<4) | 0);
  12:rowSegBuffer.c ****    newSeg(32, 0x00, (4<<4) | 3);
  13:rowSegBuffer.c ****    newSeg(32, 0x06, (6<<4) | 3);
  14:rowSegBuffer.c ****    segTerminate();
  15:rowSegBuffer.c **** */
  16:rowSegBuffer.c **** 
  17:rowSegBuffer.c **** 
  18:rowSegBuffer.c **** 
  19:rowSegBuffer.c **** // Was thinking about loading the last segment as black, but that doesn't
  20:rowSegBuffer.c **** // work if the last segment isn't read, due to length=0...
  21:rowSegBuffer.c **** seg_t rowSegBuffer[NUM_SEGMENTS+1];/*=
  22:rowSegBuffer.c **** {
  23:rowSegBuffer.c **** 	{(4<<SEG_LENGTH_SHIFT) | 0x06, (6<<4) | 3},  //White
  24:rowSegBuffer.c ****    {(8<<SEG_LENGTH_SHIFT) | 0x00, (4<<4) | 0},  //Black
  25:rowSegBuffer.c **** 	{(16<<SEG_LENGTH_SHIFT)| 0x06, (4<<4) | 0},  //Red
  26:rowSegBuffer.c **** 	{(32<<SEG_LENGTH_SHIFT) | 0x06, (6<<4) | 3}, //White
  27:rowSegBuffer.c **** 	{0,(4<<4)}                                   //Terminate
  28:rowSegBuffer.c **** };
  29:rowSegBuffer.c **** */
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 46


  30:rowSegBuffer.c **** /*=
  31:rowSegBuffer.c **** {
  32:rowSegBuffer.c **** 	{0x10,4,6},
  33:rowSegBuffer.c **** 	{0x32,4,8},
  34:rowSegBuffer.c **** 	{0x03,5,2},
  35:rowSegBuffer.c **** 	{0x00,0,0}
  36:rowSegBuffer.c **** };
  37:rowSegBuffer.c **** */
  38:rowSegBuffer.c **** 
  39:rowSegBuffer.c **** 
  40:rowSegBuffer.c **** //Outside of rbpix_to_seg, this corresponds with the last-written segment
  41:rowSegBuffer.c **** uint8_t segPosition = 0;
  42:rowSegBuffer.c **** 
  43:rowSegBuffer.c **** 
  44:rowSegBuffer.c **** uint8_t newSeg(uint16_t length, uint8_t red, uint8_t green_blue);
  45:rowSegBuffer.c **** uint8_t stretchSeg(uint16_t additionalLength);
  46:rowSegBuffer.c **** 
  47:rowSegBuffer.c **** void segClear(void)
  48:rowSegBuffer.c **** {
 308               		.stabn	68,0,48,.LM29-.LFBB4
 309               	.LM29:
 310               	.LFBB4:
 311               	/* prologue: function */
 312               	/* frame size = 0 */
  49:rowSegBuffer.c **** 	segPosition = 0;
 313               		.stabn	68,0,49,.LM30-.LFBB4
 314               	.LM30:
 315 0078 1092 0000 		sts segPosition,__zero_reg__
  50:rowSegBuffer.c **** 	//The important part is the null-length
  51:rowSegBuffer.c **** 	// but let's load white just in case
  52:rowSegBuffer.c **** 	rowSegBuffer[segPosition].red_length = 6;
 316               		.stabn	68,0,52,.LM31-.LFBB4
 317               	.LM31:
 318 007c 86E0      		ldi r24,lo8(6)
 319 007e 8093 0000 		sts rowSegBuffer,r24
  53:rowSegBuffer.c **** 	rowSegBuffer[segPosition].green_blue = (6<<4) | 3;
 320               		.stabn	68,0,53,.LM32-.LFBB4
 321               	.LM32:
 322 0082 83E6      		ldi r24,lo8(99)
 323 0084 8093 0000 		sts rowSegBuffer+1,r24
 324               	/* epilogue start */
  54:rowSegBuffer.c **** }
 325               		.stabn	68,0,54,.LM33-.LFBB4
 326               	.LM33:
 327 0088 0895      		ret
 328               		.size	segClear, .-segClear
 329               	.Lscope4:
 330               		.stabs	"",36,0,0,.Lscope4-.LFBB4
 331               		.stabd	78,0,0
 332               		.stabs	"segTerminate:F(0,15)",36,0,57,segTerminate
 333               	.global	segTerminate
 334               		.type	segTerminate, @function
 335               	segTerminate:
 336               		.stabd	46,0,0
  55:rowSegBuffer.c **** 
  56:rowSegBuffer.c **** 
  57:rowSegBuffer.c **** void segTerminate(void)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 47


  58:rowSegBuffer.c **** {
 337               		.stabn	68,0,58,.LM34-.LFBB5
 338               	.LM34:
 339               	.LFBB5:
 340               	/* prologue: function */
 341               	/* frame size = 0 */
  59:rowSegBuffer.c **** 
  60:rowSegBuffer.c **** 	//Add a new NULL-SEGMENT
  61:rowSegBuffer.c **** 	//This might appear as a stretched last pixel/segment...
  62:rowSegBuffer.c **** 	if((segPosition < NUM_SEGMENTS-1) 
 342               		.stabn	68,0,62,.LM35-.LFBB5
 343               	.LM35:
 344 008a 8091 0000 		lds r24,segPosition
 345 008e 8B33      		cpi r24,lo8(59)
 346 0090 00F4      		brsh .L13
 347 0092 E82F      		mov r30,r24
 348 0094 F0E0      		ldi r31,lo8(0)
 349 0096 EE0F      		lsl r30
 350 0098 FF1F      		rol r31
 351 009a E050      		subi r30,lo8(-(rowSegBuffer))
 352 009c F040      		sbci r31,hi8(-(rowSegBuffer))
 353 009e 9081      		ld r25,Z
 354 00a0 987F      		andi r25,lo8(-8)
 355 00a2 01F0      		breq .L15
  63:rowSegBuffer.c **** 		&& (rowSegBuffer[segPosition].red_length & SEG_LENGTH_MASK))
  64:rowSegBuffer.c **** 	{
  65:rowSegBuffer.c **** 		segPosition++;
 356               		.stabn	68,0,65,.LM36-.LFBB5
 357               	.LM36:
 358 00a4 8F5F      		subi r24,lo8(-(1))
 359 00a6 8093 0000 		sts segPosition,r24
  66:rowSegBuffer.c **** 
  67:rowSegBuffer.c **** 		rowSegBuffer[segPosition].red_length 
  68:rowSegBuffer.c **** 			= rowSegBuffer[segPosition-1].red_length & RED_MASK;
 360               		.stabn	68,0,68,.LM37-.LFBB5
 361               	.LM37:
 362 00aa A82F      		mov r26,r24
 363 00ac B0E0      		ldi r27,lo8(0)
  67:rowSegBuffer.c **** 		rowSegBuffer[segPosition].red_length 
 364               		.stabn	68,0,67,.LM38-.LFBB5
 365               	.LM38:
 366 00ae FD01      		movw r30,r26
 367 00b0 EE0F      		lsl r30
 368 00b2 FF1F      		rol r31
 369 00b4 E050      		subi r30,lo8(-(rowSegBuffer))
 370 00b6 F040      		sbci r31,hi8(-(rowSegBuffer))
 371 00b8 AA0F      		lsl r26
 372 00ba BB1F      		rol r27
 373 00bc A050      		subi r26,lo8(-(rowSegBuffer-2))
 374 00be B040      		sbci r27,hi8(-(rowSegBuffer-2))
 375 00c0 8C91      		ld r24,X
 376 00c2 8770      		andi r24,lo8(7)
 377 00c4 8083      		st Z,r24
  69:rowSegBuffer.c **** 		rowSegBuffer[segPosition].green_blue
 378               		.stabn	68,0,69,.LM39-.LFBB5
 379               	.LM39:
 380 00c6 1196      		adiw r26,1
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 48


 381 00c8 8C91      		ld r24,X
 382 00ca 1197      		sbiw r26,1
 383 00cc 8183      		std Z+1,r24
  62:rowSegBuffer.c **** 	if((segPosition < NUM_SEGMENTS-1) 
 384               		.stabn	68,0,62,.LM40-.LFBB5
 385               	.LM40:
 386 00ce 0895      		ret
 387               	.L13:
  70:rowSegBuffer.c **** 			= rowSegBuffer[segPosition-1].green_blue;
  71:rowSegBuffer.c **** 	}
  72:rowSegBuffer.c **** 	//We're already at the last segment, so we have to nullify it
  73:rowSegBuffer.c **** 	//This might terminate the last pixel early, but is necessary.
  74:rowSegBuffer.c **** 	else if(segPosition == NUM_SEGMENTS-1)
 388               		.stabn	68,0,74,.LM41-.LFBB5
 389               	.LM41:
 390 00d0 8B33      		cpi r24,lo8(59)
 391 00d2 01F4      		brne .L15
  75:rowSegBuffer.c **** 	{
  76:rowSegBuffer.c **** 		//Apparently white doesn't cause sync problems... so load it white
  77:rowSegBuffer.c **** 		rowSegBuffer[segPosition].red_length = fbRed_to_seg(_W);
 392               		.stabn	68,0,77,.LM42-.LFBB5
 393               	.LM42:
 394 00d4 87E0      		ldi r24,lo8(7)
 395 00d6 8093 0000 		sts rowSegBuffer+118,r24
  78:rowSegBuffer.c **** 		rowSegBuffer[segPosition].green_blue = 
 396               		.stabn	68,0,78,.LM43-.LFBB5
 397               	.LM43:
 398 00da 83E7      		ldi r24,lo8(115)
 399 00dc 8093 0000 		sts rowSegBuffer+119,r24
 400               	.L15:
 401 00e0 0895      		ret
 402               		.size	segTerminate, .-segTerminate
 403               	.Lscope5:
 404               		.stabs	"",36,0,0,.Lscope5-.LFBB5
 405               		.stabd	78,0,0
 406               		.stabs	"newSeg:F(3,2)",36,0,218,newSeg
 407               		.stabs	"length:P(3,4)",64,0,218,24
 408               		.stabs	"red:P(3,2)",64,0,218,22
 409               		.stabs	"green_blue:P(3,2)",64,0,218,20
 410               	.global	newSeg
 411               		.type	newSeg, @function
 412               	newSeg:
 413               		.stabd	46,0,0
  79:rowSegBuffer.c **** 										fbBlue_to_seg(_W) | fbGreen_to_seg(_W);
  80:rowSegBuffer.c **** 	}
  81:rowSegBuffer.c **** 
  82:rowSegBuffer.c **** 	//If we got here, it's already been terminated...
  83:rowSegBuffer.c **** 	//else...
  84:rowSegBuffer.c **** }
  85:rowSegBuffer.c **** 
  86:rowSegBuffer.c **** 
  87:rowSegBuffer.c **** //This is just an intermediate test, for now...
  88:rowSegBuffer.c **** // for reloading the rowbuffer to a seg-buffer.
  89:rowSegBuffer.c **** //This could easily be revised (and generalized) to be...
  90:rowSegBuffer.c **** // addSegment or addPixel
  91:rowSegBuffer.c **** void rbpix_to_seg(uint8_t rbValue, uint8_t col, uint8_t length)
  92:rowSegBuffer.c **** {
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 49


  93:rowSegBuffer.c **** 	static uint8_t last_rbValue = 0;
  94:rowSegBuffer.c **** 	//uint8_t length = 1;
  95:rowSegBuffer.c **** 
  96:rowSegBuffer.c **** 	if(col == 0)
  97:rowSegBuffer.c **** 	{
  98:rowSegBuffer.c **** 		last_rbValue = 0;
  99:rowSegBuffer.c **** 		segClear();
 100:rowSegBuffer.c **** 	}
 101:rowSegBuffer.c **** 	//Same color as last pixel...
 102:rowSegBuffer.c **** 	else if(segPosition && (rbValue == last_rbValue))
 103:rowSegBuffer.c **** 	{
 104:rowSegBuffer.c **** 		stretchSeg(length);
 105:rowSegBuffer.c **** 		return;
 106:rowSegBuffer.c **** 	}
 107:rowSegBuffer.c **** 
 108:rowSegBuffer.c **** 	uint8_t green = rbValue & 0x03;
 109:rowSegBuffer.c **** 	uint8_t red = (rbValue & 0x1C) >> 2;
 110:rowSegBuffer.c **** 	uint8_t blue = rbValue >> 5;
 111:rowSegBuffer.c **** 
 112:rowSegBuffer.c **** 	newSeg(length, red, (blue<<4) | green);
 113:rowSegBuffer.c **** 
 114:rowSegBuffer.c **** 	last_rbValue = rbValue;
 115:rowSegBuffer.c **** }
 116:rowSegBuffer.c **** 
 117:rowSegBuffer.c **** //Call this when we already know the color in the last segment is the same
 118:rowSegBuffer.c **** // so we wish to stretch the segment by additionalLength
 119:rowSegBuffer.c **** // these values are real-lengths, not as shifted for storage...
 120:rowSegBuffer.c **** // Return TRUE if the stretch was truncated...
 121:rowSegBuffer.c **** // THIS DOES NOT TEST DISPLAY_WIDTH!
 122:rowSegBuffer.c **** // DON'T FORGET to make additionalLength square before the call
 123:rowSegBuffer.c **** // if necesary....
 124:rowSegBuffer.c **** uint8_t stretchSeg(uint16_t additionalLength)
 125:rowSegBuffer.c **** {
 126:rowSegBuffer.c **** 		uint8_t oldLength=
 127:rowSegBuffer.c **** 			(rowSegBuffer[segPosition].red_length >> SEG_LENGTH_SHIFT);
 128:rowSegBuffer.c **** 
 129:rowSegBuffer.c **** 		if(!additionalLength)
 130:rowSegBuffer.c **** 			return FALSE;
 131:rowSegBuffer.c **** 
 132:rowSegBuffer.c **** 		//We can stretch the current segment
 133:rowSegBuffer.c **** 		if(oldLength < SEG_MAXLENGTH)
 134:rowSegBuffer.c **** 		{
 135:rowSegBuffer.c **** 			uint8_t maxStretch = SEG_MAXLENGTH - oldLength;
 136:rowSegBuffer.c **** 
 137:rowSegBuffer.c **** 			// Will the entire addition fit in the previous segment?
 138:rowSegBuffer.c **** 			if(additionalLength <= maxStretch)
 139:rowSegBuffer.c **** 			{
 140:rowSegBuffer.c **** 				rowSegBuffer[segPosition].red_length += 
 141:rowSegBuffer.c **** 					(additionalLength << SEG_LENGTH_SHIFT);
 142:rowSegBuffer.c **** 
 143:rowSegBuffer.c **** 				//Then we're done.
 144:rowSegBuffer.c **** 			//	additionalLength = 0;
 145:rowSegBuffer.c **** 			//	break;
 146:rowSegBuffer.c **** 				return FALSE;
 147:rowSegBuffer.c **** 			}
 148:rowSegBuffer.c **** 			// Nope... stretch it all the way, then later we'll make another
 149:rowSegBuffer.c **** 			else
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 50


 150:rowSegBuffer.c **** 			{
 151:rowSegBuffer.c **** 				uint8_t red = 
 152:rowSegBuffer.c **** 					rowSegBuffer[segPosition].red_length & RED_MASK;
 153:rowSegBuffer.c **** 
 154:rowSegBuffer.c **** 				rowSegBuffer[segPosition].red_length =
 155:rowSegBuffer.c **** 					red | (SEG_MAXLENGTH << SEG_LENGTH_SHIFT);
 156:rowSegBuffer.c **** 
 157:rowSegBuffer.c **** 				additionalLength -= maxStretch;
 158:rowSegBuffer.c **** 			}
 159:rowSegBuffer.c **** 		}
 160:rowSegBuffer.c **** 
 161:rowSegBuffer.c **** 		//The current segment has been stretched and there's more remaining
 162:rowSegBuffer.c **** 		// or it was already maxed-out...
 163:rowSegBuffer.c **** 
 164:rowSegBuffer.c **** 		// We shouldn't ever get here if additionalLength = 0...
 165:rowSegBuffer.c **** 
 166:rowSegBuffer.c **** 		//But we should test to make sure there's still lenth after
 167:rowSegBuffer.c **** 		// the stretch...
 168:rowSegBuffer.c **** 		if(additionalLength)
 169:rowSegBuffer.c **** 		{
 170:rowSegBuffer.c **** 			uint8_t red =
 171:rowSegBuffer.c **** 				rowSegBuffer[segPosition].red_length & RED_MASK;
 172:rowSegBuffer.c **** 
 173:rowSegBuffer.c **** 			uint8_t green_blue =
 174:rowSegBuffer.c **** 				rowSegBuffer[segPosition].green_blue;
 175:rowSegBuffer.c **** 
 176:rowSegBuffer.c **** 			uint8_t retVal;
 177:rowSegBuffer.c **** 
 178:rowSegBuffer.c **** 			//Create new segment(s) with the remaining length
 179:rowSegBuffer.c **** 			retVal = newSeg(additionalLength, red, green_blue);
 180:rowSegBuffer.c **** 
 181:rowSegBuffer.c **** 			//Then we're done...
 182:rowSegBuffer.c **** 			//additionalLength = 0;
 183:rowSegBuffer.c **** 			//break;
 184:rowSegBuffer.c **** 
 185:rowSegBuffer.c **** 			return retVal;
 186:rowSegBuffer.c **** 		}	
 187:rowSegBuffer.c **** 
 188:rowSegBuffer.c **** 		//We shouldn't ever get here...
 189:rowSegBuffer.c **** 		// Well, maybe... if additionalLength == maxStretch...?
 190:rowSegBuffer.c **** 		return FALSE;
 191:rowSegBuffer.c **** }
 192:rowSegBuffer.c **** 
 193:rowSegBuffer.c **** //This should be like newSeg, but also checks whether it can stretch
 194:rowSegBuffer.c **** // the last segment...
 195:rowSegBuffer.c **** uint8_t addSeg(uint16_t length, uint8_t red, uint8_t green_blue)
 196:rowSegBuffer.c **** {
 197:rowSegBuffer.c **** 
 198:rowSegBuffer.c **** 	//Currently not smart enough to stretch the first segment...
 199:rowSegBuffer.c **** 	if(segPosition == 0)
 200:rowSegBuffer.c **** 		return newSeg(length, red, green_blue);
 201:rowSegBuffer.c **** 
 202:rowSegBuffer.c **** 	//Can we stretch?
 203:rowSegBuffer.c **** 	if(((rowSegBuffer[segPosition].red_length & RED_MASK) == red)
 204:rowSegBuffer.c **** 		&& (rowSegBuffer[segPosition].green_blue == green_blue))
 205:rowSegBuffer.c **** 			return stretchSeg(length);
 206:rowSegBuffer.c **** 	else
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 51


 207:rowSegBuffer.c **** 		return newSeg(length, red, green_blue);
 208:rowSegBuffer.c **** 
 209:rowSegBuffer.c **** }
 210:rowSegBuffer.c **** 
 211:rowSegBuffer.c **** //This assumes you intend to create a new segment
 212:rowSegBuffer.c **** // it does *not* check whether the previous segment could be stretched
 213:rowSegBuffer.c **** // (it in fact, is called by stretchSeg as necessary)
 214:rowSegBuffer.c **** // Returns TRUE if it had to be truncated
 215:rowSegBuffer.c **** //  (out of segment memory, past the display edge...)
 216:rowSegBuffer.c **** // length is the real length, not shifted for storage...
 217:rowSegBuffer.c **** // THIS DOES NOT squarify, so adjust length as necessary before calling
 218:rowSegBuffer.c **** uint8_t newSeg(uint16_t length, uint8_t red, uint8_t green_blue)
 219:rowSegBuffer.c **** {
 414               		.stabn	68,0,219,.LM44-.LFBB6
 415               	.LM44:
 416               	.LFBB6:
 417               	/* prologue: function */
 418               	/* frame size = 0 */
 419               		.stabn	68,0,219,.LM45-.LFBB6
 420               	.LM45:
 421 00e2 2091 0000 		lds r18,segPosition
 220:rowSegBuffer.c **** 
 221:rowSegBuffer.c **** 	//Recursion would be simpler, but we've got a limited stack.
 222:rowSegBuffer.c **** 	while(length >= SEG_MAXLENGTH)
 223:rowSegBuffer.c **** 	{
 224:rowSegBuffer.c **** 		// No more segments available...	
 225:rowSegBuffer.c **** 		// The last segment must have a length of 0
 226:rowSegBuffer.c **** 		if(segPosition == NUM_SEGMENTS-1)
 227:rowSegBuffer.c **** 		{
 228:rowSegBuffer.c **** 			segTerminate();
 229:rowSegBuffer.c **** 			return TRUE;
 230:rowSegBuffer.c **** 		}
 231:rowSegBuffer.c **** 
 232:rowSegBuffer.c **** 		// Not yet sure how to handle display-width...
 233:rowSegBuffer.c **** 		//if(segTotal > DISPLAY_WIDTH)
 234:rowSegBuffer.c **** 		//  at least draw as much of the segment as possible...
 235:rowSegBuffer.c **** 		//  then segTerminate();
 236:rowSegBuffer.c **** 		//  and return TRUE
 237:rowSegBuffer.c **** 
 238:rowSegBuffer.c **** 		// If we've gotten this far, then we can add the segment
 239:rowSegBuffer.c **** 	
 240:rowSegBuffer.c **** 		//Check if the segment buffer is cleared...
 241:rowSegBuffer.c **** 		// then DON'T increment segPosition...
 242:rowSegBuffer.c **** 		//if(!((segPosition == 0) && 
 243:rowSegBuffer.c **** 		//  !(rowSegBuffer[segPosition].red_length & SEG_LENGTH_MASK)))
 244:rowSegBuffer.c **** 		if(segPosition || 
 245:rowSegBuffer.c **** 			((rowSegBuffer[segPosition].red_length & SEG_LENGTH_MASK) != 0))
 246:rowSegBuffer.c **** 				segPosition++;
 247:rowSegBuffer.c **** 
 248:rowSegBuffer.c **** 
 249:rowSegBuffer.c **** 		//Create a maxlength segment
 250:rowSegBuffer.c **** 		rowSegBuffer[segPosition].red_length =
 422               		.stabn	68,0,250,.LM46-.LFBB6
 423               	.LM46:
 424 00e6 562F      		mov r21,r22
 425 00e8 586F      		ori r21,lo8(-8)
 222:rowSegBuffer.c **** 	while(length >= SEG_MAXLENGTH)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 52


 426               		.stabn	68,0,222,.LM47-.LFBB6
 427               	.LM47:
 428 00ea 00C0      		rjmp .L17
 429               	.L22:
 226:rowSegBuffer.c **** 		if(segPosition == NUM_SEGMENTS-1)
 430               		.stabn	68,0,226,.LM48-.LFBB6
 431               	.LM48:
 432 00ec 2B33      		cpi r18,lo8(59)
 433 00ee 01F4      		brne .L18
 434 00f0 2093 0000 		sts segPosition,r18
 435 00f4 00C0      		rjmp .L28
 436               	.L18:
 244:rowSegBuffer.c **** 		if(segPosition || 
 437               		.stabn	68,0,244,.LM49-.LFBB6
 438               	.LM49:
 439 00f6 2223      		tst r18
 440 00f8 01F4      		brne .L20
 441 00fa 3091 0000 		lds r19,rowSegBuffer
 442 00fe 387F      		andi r19,lo8(-8)
 443 0100 01F0      		breq .L21
 444               	.L20:
 246:rowSegBuffer.c **** 				segPosition++;
 445               		.stabn	68,0,246,.LM50-.LFBB6
 446               	.LM50:
 447 0102 2F5F      		subi r18,lo8(-(1))
 448               	.L21:
 449               		.stabn	68,0,250,.LM51-.LFBB6
 450               	.LM51:
 451 0104 E22F      		mov r30,r18
 452 0106 F0E0      		ldi r31,lo8(0)
 453 0108 EE0F      		lsl r30
 454 010a FF1F      		rol r31
 455 010c E050      		subi r30,lo8(-(rowSegBuffer))
 456 010e F040      		sbci r31,hi8(-(rowSegBuffer))
 457 0110 5083      		st Z,r21
 251:rowSegBuffer.c **** 			red | (SEG_MAXLENGTH<<SEG_LENGTH_SHIFT);
 252:rowSegBuffer.c **** 
 253:rowSegBuffer.c **** 		rowSegBuffer[segPosition].green_blue = green_blue;
 458               		.stabn	68,0,253,.LM52-.LFBB6
 459               	.LM52:
 460 0112 4183      		std Z+1,r20
 254:rowSegBuffer.c **** 
 255:rowSegBuffer.c **** 		length -= SEG_MAXLENGTH;
 461               		.stabn	68,0,255,.LM53-.LFBB6
 462               	.LM53:
 463 0114 4F97      		sbiw r24,31
 464               	.L17:
 222:rowSegBuffer.c **** 	while(length >= SEG_MAXLENGTH)
 465               		.stabn	68,0,222,.LM54-.LFBB6
 466               	.LM54:
 467 0116 8F31      		cpi r24,31
 468 0118 9105      		cpc r25,__zero_reg__
 469 011a 00F4      		brsh .L22
 470 011c 2093 0000 		sts segPosition,r18
 256:rowSegBuffer.c **** 
 257:rowSegBuffer.c **** 	}
 258:rowSegBuffer.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 53


 259:rowSegBuffer.c **** 	//We can fit whatever's left (or the whole thing) into a single segment
 260:rowSegBuffer.c **** 	// Unless, of course, there's nothing left...
 261:rowSegBuffer.c **** 	if(length > 0) //< SEG_MAXLENGTH)//Guaranteed now...
 471               		.stabn	68,0,261,.LM55-.LFBB6
 472               	.LM55:
 473 0120 0097      		sbiw r24,0
 474 0122 01F4      		brne .L23
 475 0124 80E0      		ldi r24,lo8(0)
 476 0126 0895      		ret
 477               	.L23:
 262:rowSegBuffer.c **** 	{
 263:rowSegBuffer.c **** 		//Make sure there's another segment to write to!
 264:rowSegBuffer.c **** 		if(segPosition == NUM_SEGMENTS-1)
 478               		.stabn	68,0,264,.LM56-.LFBB6
 479               	.LM56:
 480 0128 2B33      		cpi r18,lo8(59)
 481 012a 01F4      		brne .L24
 482               	.L28:
 265:rowSegBuffer.c **** 		{
 266:rowSegBuffer.c **** 			segTerminate();
 483               		.stabn	68,0,266,.LM57-.LFBB6
 484               	.LM57:
 485 012c 00D0      		rcall segTerminate
 486 012e 81E0      		ldi r24,lo8(1)
 267:rowSegBuffer.c **** 			return TRUE;
 487               		.stabn	68,0,267,.LM58-.LFBB6
 488               	.LM58:
 489 0130 0895      		ret
 490               	.L24:
 268:rowSegBuffer.c **** 		}
 269:rowSegBuffer.c **** 
 270:rowSegBuffer.c **** 		//if(!((segPosition == 0) &&
 271:rowSegBuffer.c **** 		//  !(rowSegBuffer[segPosition].red_length & SEG_LENGTH_MASK)))
 272:rowSegBuffer.c **** 		if(segPosition || 
 491               		.stabn	68,0,272,.LM59-.LFBB6
 492               	.LM59:
 493 0132 2223      		tst r18
 494 0134 01F4      		brne .L25
 495 0136 3091 0000 		lds r19,rowSegBuffer
 496 013a 387F      		andi r19,lo8(-8)
 497 013c 01F0      		breq .L26
 498               	.L25:
 273:rowSegBuffer.c **** 	     ((rowSegBuffer[segPosition].red_length & SEG_LENGTH_MASK) != 0))
 274:rowSegBuffer.c ****   				segPosition++;
 499               		.stabn	68,0,274,.LM60-.LFBB6
 500               	.LM60:
 501 013e 2F5F      		subi r18,lo8(-(1))
 502 0140 2093 0000 		sts segPosition,r18
 503               	.L26:
 275:rowSegBuffer.c **** 
 276:rowSegBuffer.c **** 
 277:rowSegBuffer.c **** 		rowSegBuffer[segPosition].red_length = 
 504               		.stabn	68,0,277,.LM61-.LFBB6
 505               	.LM61:
 506 0144 E091 0000 		lds r30,segPosition
 507 0148 F0E0      		ldi r31,lo8(0)
 508 014a EE0F      		lsl r30
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 54


 509 014c FF1F      		rol r31
 510 014e E050      		subi r30,lo8(-(rowSegBuffer))
 511 0150 F040      		sbci r31,hi8(-(rowSegBuffer))
 512 0152 880F      		lsl r24
 513 0154 880F      		lsl r24
 514 0156 880F      		lsl r24
 515 0158 862B      		or r24,r22
 516 015a 8083      		st Z,r24
 278:rowSegBuffer.c **** 			red | (length<<SEG_LENGTH_SHIFT);
 279:rowSegBuffer.c **** 
 280:rowSegBuffer.c **** 		rowSegBuffer[segPosition].green_blue = green_blue;
 517               		.stabn	68,0,280,.LM62-.LFBB6
 518               	.LM62:
 519 015c 4183      		std Z+1,r20
 520 015e 80E0      		ldi r24,lo8(0)
 281:rowSegBuffer.c **** 	}
 282:rowSegBuffer.c **** 
 283:rowSegBuffer.c **** 	return FALSE;
 284:rowSegBuffer.c **** 
 285:rowSegBuffer.c **** }
 521               		.stabn	68,0,285,.LM63-.LFBB6
 522               	.LM63:
 523 0160 0895      		ret
 524               		.size	newSeg, .-newSeg
 525               	.Lscope6:
 526               		.stabs	"",36,0,0,.Lscope6-.LFBB6
 527               		.stabd	78,0,0
 528               		.stabs	"stretchSeg:F(3,2)",36,0,124,stretchSeg
 529               		.stabs	"additionalLength:P(3,4)",64,0,124,24
 530               	.global	stretchSeg
 531               		.type	stretchSeg, @function
 532               	stretchSeg:
 533               		.stabd	46,0,0
 125:rowSegBuffer.c **** {
 534               		.stabn	68,0,125,.LM64-.LFBB7
 535               	.LM64:
 536               	.LFBB7:
 537               	/* prologue: function */
 538               	/* frame size = 0 */
 127:rowSegBuffer.c **** 			(rowSegBuffer[segPosition].red_length >> SEG_LENGTH_SHIFT);
 539               		.stabn	68,0,127,.LM65-.LFBB7
 540               	.LM65:
 541 0162 E091 0000 		lds r30,segPosition
 542 0166 F0E0      		ldi r31,lo8(0)
 543 0168 DF01      		movw r26,r30
 544 016a AA0F      		lsl r26
 545 016c BB1F      		rol r27
 546 016e A050      		subi r26,lo8(-(rowSegBuffer))
 547 0170 B040      		sbci r27,hi8(-(rowSegBuffer))
 548 0172 2C91      		ld r18,X
 129:rowSegBuffer.c **** 		if(!additionalLength)
 549               		.stabn	68,0,129,.LM66-.LFBB7
 550               	.LM66:
 551 0174 0097      		sbiw r24,0
 552 0176 01F0      		breq .L30
 127:rowSegBuffer.c **** 			(rowSegBuffer[segPosition].red_length >> SEG_LENGTH_SHIFT);
 553               		.stabn	68,0,127,.LM67-.LFBB7
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 55


 554               	.LM67:
 555 0178 422F      		mov r20,r18
 556 017a 4695      		lsr r20
 557 017c 4695      		lsr r20
 558 017e 4695      		lsr r20
 133:rowSegBuffer.c **** 		if(oldLength < SEG_MAXLENGTH)
 559               		.stabn	68,0,133,.LM68-.LFBB7
 560               	.LM68:
 561 0180 4F31      		cpi r20,lo8(31)
 562 0182 00F4      		brsh .L31
 563               	.LBB96:
 138:rowSegBuffer.c **** 			if(additionalLength <= maxStretch)
 564               		.stabn	68,0,138,.LM69-.LFBB7
 565               	.LM69:
 566 0184 3FE1      		ldi r19,lo8(31)
 567 0186 341B      		sub r19,r20
 568 0188 432F      		mov r20,r19
 569 018a 50E0      		ldi r21,lo8(0)
 570 018c 4817      		cp r20,r24
 571 018e 5907      		cpc r21,r25
 572 0190 00F0      		brlo .L32
 140:rowSegBuffer.c **** 				rowSegBuffer[segPosition].red_length += 
 573               		.stabn	68,0,140,.LM70-.LFBB7
 574               	.LM70:
 575 0192 880F      		lsl r24
 576 0194 880F      		lsl r24
 577 0196 880F      		lsl r24
 578 0198 820F      		add r24,r18
 579 019a 8C93      		st X,r24
 580 019c 80E0      		ldi r24,lo8(0)
 146:rowSegBuffer.c **** 				return FALSE;
 581               		.stabn	68,0,146,.LM71-.LFBB7
 582               	.LM71:
 583 019e 0895      		ret
 584               	.L32:
 585               	.LBB97:
 154:rowSegBuffer.c **** 				rowSegBuffer[segPosition].red_length =
 586               		.stabn	68,0,154,.LM72-.LFBB7
 587               	.LM72:
 588 01a0 286F      		ori r18,lo8(-8)
 589 01a2 2C93      		st X,r18
 157:rowSegBuffer.c **** 				additionalLength -= maxStretch;
 590               		.stabn	68,0,157,.LM73-.LFBB7
 591               	.LM73:
 592 01a4 841B      		sub r24,r20
 593 01a6 950B      		sbc r25,r21
 594               	.LBE97:
 595               	.LBE96:
 168:rowSegBuffer.c **** 		if(additionalLength)
 596               		.stabn	68,0,168,.LM74-.LFBB7
 597               	.LM74:
 598 01a8 01F0      		breq .L30
 599               	.L31:
 600               	.LBB98:
 179:rowSegBuffer.c **** 			retVal = newSeg(additionalLength, red, green_blue);
 601               		.stabn	68,0,179,.LM75-.LFBB7
 602               	.LM75:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 56


 603 01aa EE0F      		lsl r30
 604 01ac FF1F      		rol r31
 605 01ae E050      		subi r30,lo8(-(rowSegBuffer))
 606 01b0 F040      		sbci r31,hi8(-(rowSegBuffer))
 607 01b2 6081      		ld r22,Z
 608 01b4 6770      		andi r22,lo8(7)
 609 01b6 4181      		ldd r20,Z+1
 610 01b8 00D0      		rcall newSeg
 185:rowSegBuffer.c **** 			return retVal;
 611               		.stabn	68,0,185,.LM76-.LFBB7
 612               	.LM76:
 613 01ba 0895      		ret
 614               	.L30:
 615 01bc 80E0      		ldi r24,lo8(0)
 616               	.LBE98:
 191:rowSegBuffer.c **** }
 617               		.stabn	68,0,191,.LM77-.LFBB7
 618               	.LM77:
 619 01be 0895      		ret
 620               		.size	stretchSeg, .-stretchSeg
 621               		.stabs	"oldLength:r(3,2)",64,0,126,20
 622               		.stabn	192,0,0,.LFBB7-.LFBB7
 623               		.stabs	"retVal:r(3,2)",64,0,176,24
 624               		.stabn	192,0,0,.LBB98-.LFBB7
 625               		.stabn	224,0,0,.LBE98-.LFBB7
 626               		.stabn	224,0,0,.Lscope7-.LFBB7
 627               	.Lscope7:
 628               		.stabs	"",36,0,0,.Lscope7-.LFBB7
 629               		.stabd	78,0,0
 630               		.stabs	"addSeg:F(3,2)",36,0,195,addSeg
 631               		.stabs	"length:P(3,4)",64,0,195,24
 632               		.stabs	"red:P(3,2)",64,0,195,22
 633               		.stabs	"green_blue:P(3,2)",64,0,195,20
 634               	.global	addSeg
 635               		.type	addSeg, @function
 636               	addSeg:
 637               		.stabd	46,0,0
 196:rowSegBuffer.c **** {
 638               		.stabn	68,0,196,.LM78-.LFBB8
 639               	.LM78:
 640               	.LFBB8:
 641               	/* prologue: function */
 642               	/* frame size = 0 */
 199:rowSegBuffer.c **** 	if(segPosition == 0)
 643               		.stabn	68,0,199,.LM79-.LFBB8
 644               	.LM79:
 645 01c0 E091 0000 		lds r30,segPosition
 646 01c4 EE23      		tst r30
 647 01c6 01F4      		brne .L36
 200:rowSegBuffer.c **** 		return newSeg(length, red, green_blue);
 648               		.stabn	68,0,200,.LM80-.LFBB8
 649               	.LM80:
 650 01c8 00D0      		rcall newSeg
 651 01ca 0895      		ret
 652               	.L36:
 203:rowSegBuffer.c **** 	if(((rowSegBuffer[segPosition].red_length & RED_MASK) == red)
 653               		.stabn	68,0,203,.LM81-.LFBB8
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 57


 654               	.LM81:
 655 01cc F0E0      		ldi r31,lo8(0)
 656 01ce EE0F      		lsl r30
 657 01d0 FF1F      		rol r31
 658 01d2 E050      		subi r30,lo8(-(rowSegBuffer))
 659 01d4 F040      		sbci r31,hi8(-(rowSegBuffer))
 660 01d6 2081      		ld r18,Z
 661 01d8 30E0      		ldi r19,lo8(0)
 662 01da 2770      		andi r18,lo8(7)
 663 01dc 3070      		andi r19,hi8(7)
 664 01de A62F      		mov r26,r22
 665 01e0 B0E0      		ldi r27,lo8(0)
 666 01e2 2A17      		cp r18,r26
 667 01e4 3B07      		cpc r19,r27
 668 01e6 01F4      		brne .L38
 669 01e8 2181      		ldd r18,Z+1
 670 01ea 2417      		cp r18,r20
 671 01ec 01F4      		brne .L38
 205:rowSegBuffer.c **** 			return stretchSeg(length);
 672               		.stabn	68,0,205,.LM82-.LFBB8
 673               	.LM82:
 674 01ee 00D0      		rcall stretchSeg
 675 01f0 0895      		ret
 676               	.L38:
 207:rowSegBuffer.c **** 		return newSeg(length, red, green_blue);
 677               		.stabn	68,0,207,.LM83-.LFBB8
 678               	.LM83:
 679 01f2 00D0      		rcall newSeg
 209:rowSegBuffer.c **** }
 680               		.stabn	68,0,209,.LM84-.LFBB8
 681               	.LM84:
 682 01f4 0895      		ret
 683               		.size	addSeg, .-addSeg
 684               	.Lscope8:
 685               		.stabs	"",36,0,0,.Lscope8-.LFBB8
 686               		.stabd	78,0,0
 687               		.stabs	"rbpix_to_seg:F(0,15)",36,0,91,rbpix_to_seg
 688               		.stabs	"rbValue:P(3,2)",64,0,91,17
 689               		.stabs	"col:P(3,2)",64,0,91,22
 690               		.stabs	"length:P(3,2)",64,0,91,24
 691               	.global	rbpix_to_seg
 692               		.type	rbpix_to_seg, @function
 693               	rbpix_to_seg:
 694               		.stabd	46,0,0
  92:rowSegBuffer.c **** {
 695               		.stabn	68,0,92,.LM85-.LFBB9
 696               	.LM85:
 697               	.LFBB9:
 698 01f6 1F93      		push r17
 699               	/* prologue: function */
 700               	/* frame size = 0 */
 701 01f8 182F      		mov r17,r24
 702 01fa 842F      		mov r24,r20
  96:rowSegBuffer.c **** 	if(col == 0)
 703               		.stabn	68,0,96,.LM86-.LFBB9
 704               	.LM86:
 705 01fc 6623      		tst r22
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 58


 706 01fe 01F4      		brne .L41
  98:rowSegBuffer.c **** 		last_rbValue = 0;
 707               		.stabn	68,0,98,.LM87-.LFBB9
 708               	.LM87:
 709 0200 1092 0000 		sts last_rbValue.2004,__zero_reg__
 710               	.LBB99:
 711               	.LBB100:
  49:rowSegBuffer.c **** 	segPosition = 0;
 712               		.stabn	68,0,49,.LM88-.LFBB9
 713               	.LM88:
 714 0204 1092 0000 		sts segPosition,__zero_reg__
  52:rowSegBuffer.c **** 	rowSegBuffer[segPosition].red_length = 6;
 715               		.stabn	68,0,52,.LM89-.LFBB9
 716               	.LM89:
 717 0208 96E0      		ldi r25,lo8(6)
 718 020a 9093 0000 		sts rowSegBuffer,r25
  53:rowSegBuffer.c **** 	rowSegBuffer[segPosition].green_blue = (6<<4) | 3;
 719               		.stabn	68,0,53,.LM90-.LFBB9
 720               	.LM90:
 721 020e 93E6      		ldi r25,lo8(99)
 722 0210 9093 0000 		sts rowSegBuffer+1,r25
 723 0214 00C0      		rjmp .L42
 724               	.L41:
 725               	.LBE100:
 726               	.LBE99:
 102:rowSegBuffer.c **** 	else if(segPosition && (rbValue == last_rbValue))
 727               		.stabn	68,0,102,.LM91-.LFBB9
 728               	.LM91:
 729 0216 9091 0000 		lds r25,segPosition
 730 021a 9923      		tst r25
 731 021c 01F0      		breq .L42
 732 021e 9091 0000 		lds r25,last_rbValue.2004
 733 0222 1917      		cp r17,r25
 734 0224 01F4      		brne .L42
 104:rowSegBuffer.c **** 		stretchSeg(length);
 735               		.stabn	68,0,104,.LM92-.LFBB9
 736               	.LM92:
 737 0226 90E0      		ldi r25,lo8(0)
 738 0228 00D0      		rcall stretchSeg
 105:rowSegBuffer.c **** 		return;
 739               		.stabn	68,0,105,.LM93-.LFBB9
 740               	.LM93:
 741 022a 00C0      		rjmp .L44
 742               	.L42:
 112:rowSegBuffer.c **** 	newSeg(length, red, (blue<<4) | green);
 743               		.stabn	68,0,112,.LM94-.LFBB9
 744               	.LM94:
 745 022c 612F      		mov r22,r17
 746 022e 70E0      		ldi r23,lo8(0)
 747 0230 6C71      		andi r22,lo8(28)
 748 0232 7070      		andi r23,hi8(28)
 749 0234 7595      		asr r23
 750 0236 6795      		ror r22
 751 0238 7595      		asr r23
 752 023a 6795      		ror r22
 753 023c 212F      		mov r18,r17
 754 023e 2295      		swap r18
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 59


 755 0240 2695      		lsr r18
 756 0242 2770      		andi r18,lo8(7)
 757 0244 2295      		swap r18
 758 0246 207F      		andi r18,lo8(-16)
 759 0248 912F      		mov r25,r17
 760 024a 9370      		andi r25,lo8(3)
 761 024c 292B      		or r18,r25
 762 024e 90E0      		ldi r25,lo8(0)
 763 0250 422F      		mov r20,r18
 764 0252 00D0      		rcall newSeg
 114:rowSegBuffer.c **** 	last_rbValue = rbValue;
 765               		.stabn	68,0,114,.LM95-.LFBB9
 766               	.LM95:
 767 0254 1093 0000 		sts last_rbValue.2004,r17
 768               	.L44:
 769               	/* epilogue start */
 115:rowSegBuffer.c **** }
 770               		.stabn	68,0,115,.LM96-.LFBB9
 771               	.LM96:
 772 0258 1F91      		pop r17
 773 025a 0895      		ret
 774               		.size	rbpix_to_seg, .-rbpix_to_seg
 775               		.stabs	"last_rbValue:V(3,2)",38,0,93,last_rbValue.2004
 776               		.stabn	192,0,0,.LFBB9-.LFBB9
 777               		.stabn	224,0,0,.Lscope9-.LFBB9
 778               	.Lscope9:
 779               		.stabs	"",36,0,0,.Lscope9-.LFBB9
 780               		.stabd	78,0,0
 781               		.stabs	"rsb_drawPix:F(0,15)",36,0,535,rsb_drawPix
 782               		.stabs	"rowNum:P(3,2)",64,0,535,24
 783               	.global	rsb_drawPix
 784               		.type	rsb_drawPix, @function
 785               	rsb_drawPix:
 786               		.stabd	46,0,0
 286:rowSegBuffer.c **** 
 287:rowSegBuffer.c **** 
 288:rowSegBuffer.c **** static __inline__ \
 289:rowSegBuffer.c **** void drawSegs(void) \
 290:rowSegBuffer.c **** 	__attribute__((__always_inline__));
 291:rowSegBuffer.c **** 
 292:rowSegBuffer.c **** 
 293:rowSegBuffer.c **** void drawSegs(void)
 294:rowSegBuffer.c **** {
 295:rowSegBuffer.c **** #warning "This might need to be modified such that DE is active *with* the first pixel... and compl
 296:rowSegBuffer.c **** 	//Declared volatile *just in case* I decide to use it after the asm...
 297:rowSegBuffer.c **** 	// (as modified by the asm)
 298:rowSegBuffer.c **** 	volatile uint8_t *byteptr = &(rowSegBuffer[0].red_length);
 299:rowSegBuffer.c **** 
 300:rowSegBuffer.c **** 	//These should only be used in the asm...
 301:rowSegBuffer.c **** 	// declaring them here, instead of using specific registers in asm
 302:rowSegBuffer.c **** 	// should help assure that those registers aren't clobbered
 303:rowSegBuffer.c **** 	// if used elsewhere
 304:rowSegBuffer.c **** 	//volatile uint8_t r=0, rl=0, g=0, b=0;
 305:rowSegBuffer.c **** 
 306:rowSegBuffer.c **** 	//uint8_t r, rl, g, b;
 307:rowSegBuffer.c **** 
 308:rowSegBuffer.c **** 	//Basic idea:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 60


 309:rowSegBuffer.c **** 
 310:rowSegBuffer.c **** 	//do{
 311:rowSegBuffer.c **** 	//  red_length = rowSegBuffer[n].red_length;
 312:rowSegBuffer.c **** 	//  green      = rowSegBuffer[n].green;
 313:rowSegBuffer.c **** 	//  blue       = rowSegBuffer[n].blue;
 314:rowSegBuffer.c **** 	//  
 315:rowSegBuffer.c **** 	//  OCR1D = red_length&0x0f;
 316:rowSegBuffer.c **** 	//  DT1   = green;
 317:rowSegBuffer.c **** 	//  OCR1A = blue;
 318:rowSegBuffer.c **** 	//
 319:rowSegBuffer.c **** 	//  red_length &= 0xf0;
 320:rowSegBuffer.c **** 	//  if(!red_length)
 321:rowSegBuffer.c **** 	//     break;
 322:rowSegBuffer.c **** 	//
 323:rowSegBuffer.c **** 	//  while(red_length)
 324:rowSegBuffer.c **** 	//		red_length -= 0x10;
 325:rowSegBuffer.c **** 	// } while(1);
 326:rowSegBuffer.c **** 
 327:rowSegBuffer.c **** 	//This looks like it should work...
 328:rowSegBuffer.c **** 	// but there are some oddities
 329:rowSegBuffer.c **** 	// in this case, registers are loaded such that andi can't be used
 330:rowSegBuffer.c **** 	// but and can... thus it's a few instructions larger...
 331:rowSegBuffer.c **** 	/*
 332:rowSegBuffer.c **** 	do
 333:rowSegBuffer.c **** 	{
 334:rowSegBuffer.c **** 		rl = *(byteptr++);
 335:rowSegBuffer.c **** 		r = rl;
 336:rowSegBuffer.c **** 		r &= 0x0f;
 337:rowSegBuffer.c **** 		g = *(byteptr++);
 338:rowSegBuffer.c **** 		b = *(byteptr++);
 339:rowSegBuffer.c **** 
 340:rowSegBuffer.c **** 		//just testing pushes and pops...
 341:rowSegBuffer.c **** 		// apparently the optimizer realizes which registers are in use
 342:rowSegBuffer.c **** 		// in the (only) call to drawSegs() and doesn't bother to push the
 343:rowSegBuffer.c **** 		// the rest...
 344:rowSegBuffer.c **** //		drawSegs();
 345:rowSegBuffer.c **** 		OCR1D = r;
 346:rowSegBuffer.c **** 		DT1 = g;
 347:rowSegBuffer.c **** 		OCR1A = b;
 348:rowSegBuffer.c **** 
 349:rowSegBuffer.c **** 		rl &= 0xf0;
 350:rowSegBuffer.c **** 
 351:rowSegBuffer.c **** 		if(!rl)
 352:rowSegBuffer.c **** 			break;
 353:rowSegBuffer.c **** 
 354:rowSegBuffer.c **** 		while(rl)
 355:rowSegBuffer.c **** 			rl -= 0x10;
 356:rowSegBuffer.c **** 	} while(1);
 357:rowSegBuffer.c **** */
 358:rowSegBuffer.c **** 
 359:rowSegBuffer.c **** 	//LoadNext:
 360:rowSegBuffer.c **** 	//  ld   Rredlength, Z+	(Red|length)								2
 361:rowSegBuffer.c **** 	//  ld   Rgreen, Z+	(Green)											2
 362:rowSegBuffer.c **** 	//  ld   Rblue, Z+	(Blue)											2
 363:rowSegBuffer.c **** 	//	 mov  Rred, Rredlength												1
 364:rowSegBuffer.c **** 	//  andi Rred, 0x0f				//Remove length from Rred		1
 365:rowSegBuffer.c **** 	//  out  OCR1D, Rred														1
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 61


 366:rowSegBuffer.c **** 	//  out  DT1, Rgreen														1
 367:rowSegBuffer.c **** 	//  out  OCR1A, Rblue													1
 368:rowSegBuffer.c **** 
 369:rowSegBuffer.c **** 	//  andi Rredlength, 0xf0		//Remove red from length		1
 370:rowSegBuffer.c **** 	//  breq Done						// if length==0, we're done	1 2
 371:rowSegBuffer.c **** 
 372:rowSegBuffer.c **** 	//Counter:
 373:rowSegBuffer.c **** 	//  subi Rlength, 0x10			//Subtract 0x10 each time...	1
 374:rowSegBuffer.c **** 	//  breq LoadNext					// if length==0, next segment	1 2
 375:rowSegBuffer.c **** 	//  rjmp Counter					// else, next counter loop    2
 376:rowSegBuffer.c **** 
 377:rowSegBuffer.c **** 	//Done:
 378:rowSegBuffer.c **** 
 379:rowSegBuffer.c **** 	// Thus, minimum inter-pixel time is 16 clock cycles
 380:rowSegBuffer.c **** 	// (14 for the last one)
 381:rowSegBuffer.c **** 	// This cannot be reuced by using a separate byte for red and length
 382:rowSegBuffer.c **** 	// because the mov and andi in LoadNext would be replaced by a ld
 383:rowSegBuffer.c **** 
 384:rowSegBuffer.c **** 	// To make the counter take longer between each count,
 385:rowSegBuffer.c **** 	// decrement it by a smaller number...
 386:rowSegBuffer.c **** 
 387:rowSegBuffer.c **** //	drawSegs();
 388:rowSegBuffer.c **** /*
 389:rowSegBuffer.c **** __asm__ __volatile__
 390:rowSegBuffer.c **** 	(
 391:rowSegBuffer.c **** 	"LoadNext_%=: \n\t"
 392:rowSegBuffer.c **** 	 	"ld %1, %a0+ ; \n\t"		//%a1 refers to XYZ whichever is selected
 393:rowSegBuffer.c **** 		"mov %2, %1 ; \n\t"		// Load R (+length)
 394:rowSegBuffer.c **** 		"andi %2, 0x0f ; \n\t"	//Remove length from Rred
 395:rowSegBuffer.c **** 		"ld %3, %a0+ ; \n\t"		//Load G	
 396:rowSegBuffer.c **** 		"ld %4, %a0+ ; \n\t"		//Load B
 397:rowSegBuffer.c **** 		"out %5, %2 ; \n\t"	// Write OCR1D (Red)
 398:rowSegBuffer.c **** 		"out %6, %3 ; \n\t"		// Write DT1 (Green)
 399:rowSegBuffer.c **** 		"out %7, %4 ; \n\t"	// Write OCR1A (Blue)
 400:rowSegBuffer.c **** 
 401:rowSegBuffer.c **** 		"andi %1, 0xf0 ; \n\t"	// Remove red from length
 402:rowSegBuffer.c **** 		"breq Done_%= ; \n\t"		// if length==0 from the start, we're done
 403:rowSegBuffer.c **** 
 404:rowSegBuffer.c **** 	"Counter_%=: \n\t"
 405:rowSegBuffer.c **** 		"subi %1, 0x10 ; \n\t"	//Decrement the counter by 0x10
 406:rowSegBuffer.c **** 		"breq LoadNext_%= ; \n\t"	// if we've decremented to 0, next segment
 407:rowSegBuffer.c **** 
 408:rowSegBuffer.c **** 	"Done_%=: \n\t"
 409:rowSegBuffer.c **** 		:								//No output register...
 410:rowSegBuffer.c **** 		: "e" (byteptr),			//byteptr: %0, r/w and assigned to X,Y,orZ
 411:rowSegBuffer.c **** 		  "d"  (rl),				//rl: %1, andi and subi will be used
 412:rowSegBuffer.c **** 		  "d"  (r),					//r: %2, andi will be used
 413:rowSegBuffer.c **** 		  "r"  (g),					//g: %3
 414:rowSegBuffer.c **** 		  "r"  (b),					//b: %4
 415:rowSegBuffer.c **** 		  "I"  (_SFR_IO_ADDR(OCR1D)), //OCR1D: %5
 416:rowSegBuffer.c **** 		  "I"  (_SFR_IO_ADDR(DT1)),	//DT1: %6
 417:rowSegBuffer.c **** 		  "I"  (_SFR_IO_ADDR(OCR1A))	//OCR1A %7
 418:rowSegBuffer.c **** 	);
 419:rowSegBuffer.c **** */
 420:rowSegBuffer.c **** 
 421:rowSegBuffer.c **** __asm__ __volatile__
 422:rowSegBuffer.c ****    (
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 62


 423:rowSegBuffer.c ****    "LoadNext_%=: \n\t"
 424:rowSegBuffer.c ****       "ld r20, %a0+ ; \n\t"    //%a0 refers to XYZ whichever is selected
 425:rowSegBuffer.c ****       "mov r21, r20 ; \n\t"     // Load R (+length)
 426:rowSegBuffer.c **** //      "andi r21, 0x0f ; \n\t"  //Remove length from Rred
 427:rowSegBuffer.c **** 		"andi r21, %5 ; \n\t"
 428:rowSegBuffer.c ****       "ld r22, %a0+ ; \n\t"    //Load G 
 429:rowSegBuffer.c **** #if (defined(GB_COMBINED) && GB_COMBINED)
 430:rowSegBuffer.c **** 		"mov r23, r22 ; \n\t"	 //copy G(+B) to B
 431:rowSegBuffer.c **** 		"andi r22, 0x0f ; \n\t"	 // strip B from G
 432:rowSegBuffer.c **** 		"swap r23 ; \n\t"			 // swap B and G nibbles in B
 433:rowSegBuffer.c **** 		"andi r23, 0x0f \n\t"	 // strip G from B
 434:rowSegBuffer.c **** #else
 435:rowSegBuffer.c **** 		"ld r23, %a0+ ; \n\t"    //Load B
 436:rowSegBuffer.c **** #endif
 437:rowSegBuffer.c **** 		"out %1, r21 ; \n\t"  // Write OCR1D (Red)
 438:rowSegBuffer.c ****       "out %2, r22 ; \n\t"     // Write DT1 (Green)
 439:rowSegBuffer.c ****       "out %3, r23 ; \n\t"  // Write OCR1A (Blue)
 440:rowSegBuffer.c **** 
 441:rowSegBuffer.c **** //      "andi r20, 0xf0 ; \n\t"  // Remove red from length
 442:rowSegBuffer.c ****       "andi r20, %4 ; \n\t"
 443:rowSegBuffer.c **** 		"breq Done_%= ; \n\t"      // if length==0 from the start, we're done
 444:rowSegBuffer.c **** #if (defined(GB_COMBINED) && GB_COMBINED)
 445:rowSegBuffer.c **** #warning "This probably isn't necessary anymore..."
 446:rowSegBuffer.c **** 		// What was it for? Maybe because I was thinking about
 447:rowSegBuffer.c **** 		// using a smaller count-increment (for non-square pixels?)
 448:rowSegBuffer.c **** 		// than the minimum count step (given shifting)?
 449:rowSegBuffer.c **** 		// e.g. if the count is stored in the upper 4 bits, then the
 450:rowSegBuffer.c **** 		//  smallest count step would be 0x10 (1 count)
 451:rowSegBuffer.c **** 		//  I think the divisible-by-four aspect, below, was due to my
 452:rowSegBuffer.c **** 		//  possibly wanting to set the counter to count by 0x04 instead of 
 453:rowSegBuffer.c **** 		//  0x10... then each count-step would result in 4 counts
 454:rowSegBuffer.c **** 		//  this could avoid all those nops below... (but now it makes less
 455:rowSegBuffer.c **** 		//  sense for non-square pixels)
 456:rowSegBuffer.c **** 		// I don't remember if the above is why I added these two nops...
 457:rowSegBuffer.c **** 
 458:rowSegBuffer.c **** 		//Bump it to a round-number for counting...
 459:rowSegBuffer.c **** 		// 18 cyc -> 20 cyc... 20 is divisible by 4
 460:rowSegBuffer.c **** 		"nop ; \n\t"
 461:rowSegBuffer.c **** 		"nop ; \n\t"
 462:rowSegBuffer.c **** #endif
 463:rowSegBuffer.c **** 
 464:rowSegBuffer.c ****    "Counter_%=: \n\t"
 465:rowSegBuffer.c ****       "subi r20, %6 ; \n\t"  //Decrement the counter by 0x10...
 466:rowSegBuffer.c ****       "breq LoadNext_%= ; \n\t"  // if we've decremented to 0, next segment
 467:rowSegBuffer.c **** #if (defined(SQUARE_SEGMENTS) && SQUARE_SEGMENTS)
 468:rowSegBuffer.c **** 		//Match a single-pixel-width...
 469:rowSegBuffer.c **** 		//(18cyc w/o GB_COMBINED)
 470:rowSegBuffer.c ****  #if (defined(GB_COMBINED) && GB_COMBINED)
 471:rowSegBuffer.c **** 		"nop ; \n\t"
 472:rowSegBuffer.c **** 		"nop ; \n\t"
 473:rowSegBuffer.c ****  #endif
 474:rowSegBuffer.c **** 		"nop ; \n\t"		// if length = 0x10 this will be avoided
 475:rowSegBuffer.c **** 		"nop ; \n\t"		// for each step of 0x10 > 0x10
 476:rowSegBuffer.c **** 		"nop ; \n\t"		//   this will match a pixel-width
 477:rowSegBuffer.c **** 		"nop ; \n\t"
 478:rowSegBuffer.c **** 		"nop ; \n\t"
 479:rowSegBuffer.c **** 		"nop ; \n\t"
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 63


 480:rowSegBuffer.c **** 		"nop ; \n\t"
 481:rowSegBuffer.c **** 		"nop ; \n\t"
 482:rowSegBuffer.c **** 		"nop ; \n\t"
 483:rowSegBuffer.c **** 		"nop ; \n\t"
 484:rowSegBuffer.c **** 		"nop ; \n\t"
 485:rowSegBuffer.c **** 		"nop ; \n\t"
 486:rowSegBuffer.c **** 		"nop ; \n\t"
 487:rowSegBuffer.c **** 		"nop ; \n\t"
 488:rowSegBuffer.c **** #endif
 489:rowSegBuffer.c **** 		"rjmp Counter_%= ; \n\t"
 490:rowSegBuffer.c **** 
 491:rowSegBuffer.c ****    "Done_%=: \n\t"
 492:rowSegBuffer.c ****       :                       //No output register...
 493:rowSegBuffer.c **** 		// Input values and registers...
 494:rowSegBuffer.c **** 		// Their values are set-up by C and the preprocessor 
 495:rowSegBuffer.c **** 		// before entering the asm function
 496:rowSegBuffer.c **** 		// Only byteptr is actually in a register, and its value is changed
 497:rowSegBuffer.c **** 		//  in this asm function (incremented with each use)
 498:rowSegBuffer.c **** 		//  I'm still not wrapping my head around the whole read/write vs.
 499:rowSegBuffer.c **** 		//  input/output options here... clearly the asm is writing to
 500:rowSegBuffer.c **** 		//  byteptr, so maybe it should be in the clobber list?
 501:rowSegBuffer.c **** 		//  or maybe by putting it here (only), it would be automatically
 502:rowSegBuffer.c **** 		//  assumed to be clobbered, if it were used after the asm function?
 503:rowSegBuffer.c **** 		//  It shouldn't matter, here anyways, since it's not used after.
 504:rowSegBuffer.c **** 		//  Though, if it were to be, we'd probably need to specify somehow
 505:rowSegBuffer.c **** 		//  whether we want to reuse the variable name "byteptr" after this
 506:rowSegBuffer.c **** 		//  to refer to the value set up before this, or to the value this
 507:rowSegBuffer.c **** 		//  will write to it... It's all very confusing.
 508:rowSegBuffer.c ****       : "e" (byteptr),        //byteptr: %0, r/w and assigned to X,Y,orZ
 509:rowSegBuffer.c ****         "I"  (_SFR_IO_ADDR(OCR1D)), //OCR1D: %1
 510:rowSegBuffer.c ****         "I"  (_SFR_IO_ADDR(DT1)),   //DT1: %2
 511:rowSegBuffer.c ****         "I"  (_SFR_IO_ADDR(OCR1A)), //OCR1A %3
 512:rowSegBuffer.c **** 		  "M"  (SEG_LENGTH_MASK),		//%4
 513:rowSegBuffer.c **** 		  "M"  (RED_MASK),				//%5 RED_MASK....
 514:rowSegBuffer.c **** 		  "M"  (SEG_COUNT_1)				//%6
 515:rowSegBuffer.c **** 		//Indicate (to C) which registers are going to be clobbered
 516:rowSegBuffer.c **** 		// these registers are only used internal to the asm function
 517:rowSegBuffer.c **** 		// their values are unused on entry and exit.
 518:rowSegBuffer.c **** 		// Having them listed here should tell C to either not use them
 519:rowSegBuffer.c **** 		// outside of here, or to push and pop them around this... right?
 520:rowSegBuffer.c **** 	  : "r20", //rl
 521:rowSegBuffer.c **** 		  "r21",	//r
 522:rowSegBuffer.c **** 		  "r22",	//g
 523:rowSegBuffer.c ****         "r23"	//b
 524:rowSegBuffer.c ****    );
 525:rowSegBuffer.c **** 
 526:rowSegBuffer.c **** 
 527:rowSegBuffer.c **** //	rl++;
 528:rowSegBuffer.c **** 
 529:rowSegBuffer.c **** }
 530:rowSegBuffer.c **** 
 531:rowSegBuffer.c **** 
 532:rowSegBuffer.c **** //Note that rowNum is not used, AND it's a uint8_t! There's some note about
 533:rowSegBuffer.c **** // this in lcdStuff.c, now. Not particularly helpful, but gives enough
 534:rowSegBuffer.c **** // history I might be able to piece this stuff together and clean it up.
 535:rowSegBuffer.c **** void rsb_drawPix(uint8_t rowNum)
 536:rowSegBuffer.c **** {
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 64


 787               		.stabn	68,0,536,.LM97-.LFBB10
 788               	.LM97:
 789               	.LFBB10:
 790               	/* prologue: function */
 791               	/* frame size = 0 */
 537:rowSegBuffer.c ****    //a/o v59-12ish: WTF, no comment about this?!
 538:rowSegBuffer.c ****    // I believe this is to enable Green's output
 539:rowSegBuffer.c ****    // which was disabled prior because...?
 540:rowSegBuffer.c ****    TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
 792               		.stabn	68,0,540,.LM98-.LFBB10
 793               	.LM98:
 794 025c 83E5      		ldi r24,lo8(83)
 795 025e 80BF      		out 80-0x20,r24
 796               	.LBB101:
 797               	.LBB102:
 421:rowSegBuffer.c **** __asm__ __volatile__
 798               		.stabn	68,0,421,.LM99-.LFBB10
 799               	.LM99:
 800 0260 E0E0      		ldi r30,lo8(rowSegBuffer)
 801 0262 F0E0      		ldi r31,hi8(rowSegBuffer)
 802               	/* #APP */
 803               	 ;  421 "rowSegBuffer.c" 1
 804               		LoadNext_429: 
 805 0264 4191      		ld r20, Z+ ; 
 806 0266 542F      		mov r21, r20 ; 
 807 0268 5770      		andi r21, 7 ; 
 808 026a 6191      		ld r22, Z+ ; 
 809 026c 762F      		mov r23, r22 ; 
 810 026e 6F70      		andi r22, 0x0f ; 
 811 0270 7295      		swap r23 ; 
 812 0272 7F70      		andi r23, 0x0f 
 813 0274 5ABD      		out 42, r21 ; 
 814 0276 64BD      		out 36, r22 ; 
 815 0278 7DBD      		out 45, r23 ; 
 816 027a 487F      		andi r20, 248 ; 
 817 027c 01F0      		breq Done_429 ; 
 818 027e 0000      		nop ; 
 819 0280 0000      		nop ; 
 820               		Counter_429: 
 821 0282 4850      		subi r20, 8 ; 
 822 0284 01F0      		breq LoadNext_429 ; 
 823 0286 0000      		nop ; 
 824 0288 0000      		nop ; 
 825 028a 0000      		nop ; 
 826 028c 0000      		nop ; 
 827 028e 0000      		nop ; 
 828 0290 0000      		nop ; 
 829 0292 0000      		nop ; 
 830 0294 0000      		nop ; 
 831 0296 0000      		nop ; 
 832 0298 0000      		nop ; 
 833 029a 0000      		nop ; 
 834 029c 0000      		nop ; 
 835 029e 0000      		nop ; 
 836 02a0 0000      		nop ; 
 837 02a2 0000      		nop ; 
 838 02a4 0000      		nop ; 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 65


 839 02a6 00C0      		rjmp Counter_429 ; 
 840               		Done_429: 
 841               		
 842               	 ;  0 "" 2
 843               	/* #NOAPP */
 844               	.LBE102:
 845               	.LBE101:
 846               	.LBB103:
 847               	.LBB104:
 848               	.LBB105:
 849               	.LBB106:
 850               		.stabs	"/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h",132,0,0,.Ltext7
 851               	.Ltext7:
 852               		.stabn	68,0,105,.LM100-.LFBB10
 853               	.LM100:
 854 02a8 80E8      		ldi r24,lo8(128)
 855 02aa 90E0      		ldi r25,hi8(128)
 856               	/* #APP */
 857               	 ;  105 "/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h" 1
 858 02ac 0197      		1: sbiw r24,1
 859 02ae 01F4      		brne 1b
 860               	 ;  0 "" 2
 861               	/* #NOAPP */
 862               	.LBE106:
 863               	.LBE105:
 864               	.LBE104:
 865               	.LBE103:
 866               		.stabs	"rowSegBuffer.c",132,0,0,.Ltext8
 867               	.Ltext8:
 541:rowSegBuffer.c ****             | (0<<COM1B1) | (1<<COM1B0)
 542:rowSegBuffer.c ****             | (1<<PWM1A) | (1<<PWM1B) );
 543:rowSegBuffer.c **** 
 544:rowSegBuffer.c ****       drawSegs();
 545:rowSegBuffer.c **** 
 546:rowSegBuffer.c **** #define COLORS_WRITTEN   64
 547:rowSegBuffer.c **** 
 548:rowSegBuffer.c **** 
 549:rowSegBuffer.c **** //#error "should add SEG_STRETCH here..."
 550:rowSegBuffer.c **** #if (ROW_COMPLETION_DELAY > 0)
 551:rowSegBuffer.c **** //      delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS) -60 // - 68)// - 60
 552:rowSegBuffer.c **** //            - WRITE_COLOR_CYCS*COLORS_WRITTEN);
 553:rowSegBuffer.c ****       delay_cyc(ROW_COMPLETION_DELAY);
 554:rowSegBuffer.c **** //      asm("nop;");
 555:rowSegBuffer.c **** //      asm("nop;");
 556:rowSegBuffer.c **** //      asm("nop;");
 557:rowSegBuffer.c **** //      asm("nop;");
 558:rowSegBuffer.c **** //      asm("nop;");
 559:rowSegBuffer.c **** //      asm("nop;");
 560:rowSegBuffer.c **** //      asm("nop;");
 561:rowSegBuffer.c **** //      asm("nop;");
 562:rowSegBuffer.c ****       
 563:rowSegBuffer.c **** #else
 564:rowSegBuffer.c **** #warning "ROW_COMPLETION_DELAY <= 0"
 565:rowSegBuffer.c **** #endif
 566:rowSegBuffer.c **** 
 567:rowSegBuffer.c ****       //Just for testing...
 568:rowSegBuffer.c ****       // Actually, it's quite handy, because it shows where drawSegs has
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 66


 569:rowSegBuffer.c ****       // completed... (I thought it stretched to the end of DE, but nope)
 570:rowSegBuffer.c ****       // The "bug" with PLL_SYSCLK's white bars now appears to be quite
 571:rowSegBuffer.c ****       // apparently due to carry-over from a previous line
 572:rowSegBuffer.c ****       // rather than an Hsync problem, as now it appears cyan.
 573:rowSegBuffer.c ****       OCR1D = 0;
 868               		.stabn	68,0,573,.LM101-.LFBB10
 869               	.LM101:
 870 02b0 1ABC      		out 74-0x20,__zero_reg__
 574:rowSegBuffer.c **** 
 575:rowSegBuffer.c ****       //DE->Nada transition expects fullBlue...
 576:rowSegBuffer.c ****       //Also helps to show the edge of the DE timing...
 577:rowSegBuffer.c **** 
 578:rowSegBuffer.c ****       //!!! Not sure what the state is at this point...
 579:rowSegBuffer.c ****       // could be any DE+Blue level, or could be NADA...
 580:rowSegBuffer.c ****       // Nada: DT1=3, still leaves one bit for clocking, might be OK
 581:rowSegBuffer.c ****          
 582:rowSegBuffer.c ****       //Among the things that don't make sense...
 583:rowSegBuffer.c ****       // This appears to go into affect BEFORE delay_cyc (?)
 584:rowSegBuffer.c ****       // as, without a pull-up resistor on the /OC1B output, 
 585:rowSegBuffer.c ****       // green seems to be floating between the last pixel and the
 586:rowSegBuffer.c ****       // delay_cyc (!)
 587:rowSegBuffer.c ****       //Disable complementary-output for Green 
 588:rowSegBuffer.c ****       //  (on /OC1B, where CLK is OC1B)
 589:rowSegBuffer.c ****       // Since Nada, V, and H DT's might be bad for clocking.
 590:rowSegBuffer.c ****       TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
 871               		.stabn	68,0,590,.LM102-.LFBB10
 872               	.LM102:
 873 02b2 83E6      		ldi r24,lo8(99)
 874 02b4 80BF      		out 80-0x20,r24
 591:rowSegBuffer.c ****          | (1<<COM1B1) | (0<<COM1B0)
 592:rowSegBuffer.c ****          | (1<<PWM1A) | (1<<PWM1B) );
 593:rowSegBuffer.c **** 
 594:rowSegBuffer.c ****       fullBlue();
 875               		.stabn	68,0,594,.LM103-.LFBB10
 876               	.LM103:
 877 02b6 14BC      		out 68-0x20,__zero_reg__
 878 02b8 86E0      		ldi r24,lo8(6)
 879 02ba 8DBD      		out 77-0x20,r24
 595:rowSegBuffer.c ****       Nada_fromDEonly();
 880               		.stabn	68,0,595,.LM104-.LFBB10
 881               	.LM104:
 882 02bc 80E3      		ldi r24,lo8(48)
 883 02be 84BD      		out 68-0x20,r24
 884               	/* epilogue start */
 596:rowSegBuffer.c **** }
 885               		.stabn	68,0,596,.LM105-.LFBB10
 886               	.LM105:
 887 02c0 0895      		ret
 888               		.size	rsb_drawPix, .-rsb_drawPix
 889               		.stabs	"__count:r(3,4)",64,0,36,24
 890               		.stabn	192,0,0,.LBB105-.LFBB10
 891               		.stabn	224,0,0,.LBE105-.LFBB10
 892               	.Lscope10:
 893               		.stabs	"",36,0,0,.Lscope10-.LFBB10
 894               		.stabd	78,0,0
 895               		.stabs	"updateLCD:F(3,2)",36,0,1168,updateLCD
 896               	.global	updateLCD
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 67


 897               		.type	updateLCD, @function
 898               	updateLCD:
 899               		.stabd	46,0,0
 900               		.stabs	"_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c",132,0,0,.Ltext9
 901               	.Ltext9:
 877:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 878:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 879:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define TESTVALS	0
 880:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define LTN 1
 881:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define IDT 2
 882:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 883:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 884:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //TIMING:
 885:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Measurements below (in microseconds) are referring to preLVDS
 886:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  There may be other such old-notes...
 887:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 888:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 889:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //        |<--T_Hhigh-->| |<-T_Hlow
 890:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    __   _____________   ____________  3.6V
 891:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // H    |_|             |_|           _  0V
 892:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 893:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    Data Enable
 894:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //       Only active when there's valid pixel data
 895:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //       (For a dual-pixel 1024x768 display:
 896:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //         for 512 of the 717 clocks in HSYNC-active)
 897:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //       Low during Vsync... (~720us)
 898:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
 899:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 900:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //IDTech display: 136 dots
 901:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //2-136+
 902:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //IDTech, last used: 40
 903:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //LTN Last used 8
 904:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // LTN: 1072<=1344<=1500 clocks per line, 1024DE... Hsync unused
 905:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // SEE Hlow_Delay() notes if this value is large!
 906:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 907:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #ifndef H_LOW_DOTS
 908:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (DISPLAY == LTN)
 909:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define H_LOW_DOTS	8
 910:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
 911:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define H_LOW_DOTS   40//8//1//40 //30 //2//136
 912:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
 913:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define H_LOW_DOTS	100//0 //LTN doesn't use H_LOW (DE-only)
 914:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 							  // And having a value here increases codesize
 915:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 916:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 917:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 918:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //H is set low immediately upon entry of the timer interrupt
 919:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // its low-time is controlled via nops
 920:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // (so if HLow is long for a particular display, this might need revising)
 921:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 922:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if((!defined(HLOW_DELAY_OVERRIDE) || !HLOW_DELAY_OVERRIDE) \
 923:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		                                         && !defined(Hlow_Delay))
 924:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define Hlow_Delay() \
 925:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	delay_Dots(H_LOW_DOTS)
 926:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 927:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 928:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 68


 929:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 930:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 931:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //This was found expermentally with SwitchResX
 932:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //IDTech Last Used: 680
 933:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // (IDTech had some oddities regarding slow pixel-clocks, where pixels
 934:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  would be repeated, regardless of the pixel-clock, thus, for slow clocks
 935:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  it has the effect of *stretching* the image, thus 680 "pixels" across
 936:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  instead of its 1024 *physical* pixels)
 937:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //LTN last used 1024
 938:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Oddly: For the LTN, this doesn't seem to affect the horizontal
 939:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //        it does, however, affect the vertical(!)
 940:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // If I recall Correctly, this is used only for setting the timer interrupt
 941:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  rate...
 942:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (DISPLAY == LTN)
 943:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define DE_ACTIVE_DOTS	1024
 944:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
 945:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define DE_ACTIVE_DOTS	680 //1024 //800 //920 //943 //812 //472 //1024
 946:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
 947:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define DE_ACTIVE_DOTS	1024
 948:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 949:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 950:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 951:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //Horizontal Blank Time: HD_DOTS + H_LOW + DH_DOTS
 952:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  90-320+
 953:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //Horizontal Total Time: 1206<=1344<=2047
 954:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // ... but Total = Blank + Pixels, so 90+1024 != 1206
 955:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Excess waits should be thrown in DH (since that's between interrupts)
 956:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //T_HD is the time from H inactivated to DE activated
 957:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //aka H back-porch: 1-160+
 958:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //IDTech Last Used: 50
 959:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //LTN last used 5
 960:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 961:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #ifndef HD_DOTS
 962:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (DISPLAY == LTN)
 963:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define HD_DOTS 5
 964:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
 965:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define HD_DOTS	50 //5 //0//20//5 //50 //30 //1 //160
 966:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
 967:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define HD_DOTS 50//5
 968:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 969:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 970:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 971:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #ifndef HD_Delay
 972:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define HD_Delay()	delay_Dots(HD_DOTS)
 973:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 974:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 975:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // I think this was just a mistake. This change to delay_Dots a/o 0.10ncf
 976:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // (untested in LCDdirectLVDS)
 977:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //delay_cyc(HD_DOTS)
 978:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 979:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 980:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // This is the number of CPU cycles between DE->L and Horiz->L
 981:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // This is just used in calculating the OCR value...
 982:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // aka H Front Porch: 0-24+
 983:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // IDTech Last Used: 24
 984:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // LTN last used 46
 985:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // 1072-1024-1-1 = 46
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 69


 986:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #ifndef DH_DOTS
 987:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (DISPLAY == LTN)
 988:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define DH_DOTS	46
 989:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
 990:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define DH_DOTS	24 //46 //480//6//12//24 //46 //24 //122//30 //0 //24
 991:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
 992:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define DH_DOTS	0//1000//100//46
 993:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 994:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
 995:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
 996:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //       |
 997:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //       v
 998:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      T_DH
 999:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      ||    |<-T_DE->|  |  |<--T_HD (Hsync->DE)
1000:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // H   __.  ____________  .___________
1001:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      .|_|  .        .|_|  .
1002:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     _.     .________.     .___________
1003:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE   |_____| 512clk |_____|
1004:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //      ^              ^
1005:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //       \___________   \                        (just avoiding \ warning)
1006:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                   \  |     768 Hsyncs
1007:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                    v v
1008:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     _             _ _ _ _ _ _ _ _ _ _ 
1009:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE   |___________| | | | | | | | | | |______
1010:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
1011:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // one Hsync = T_HD+T_DH+T_Hlow+T_DE = 19.865us
1012:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1013:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //aka V-sync back porch: 7-29-63 "Vbp should be static"
1014:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // IDTech Last Used: 29
1015:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // LTN last used 3
1016:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //LTN Frame: 772<=806<=1000 lines...
1017:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1018:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #ifndef T_VD
1019:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1020:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define T_VD 3
1021:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1022:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define  T_VD 29 //3//29 //7 //29
1023:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1024:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define T_VD 3
1025:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1026:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1027:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1028:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //aka V-sync front porch: 1-3+
1029:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // IDTech Last Used: 3
1030:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // LTN last used 3
1031:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #ifndef T_DV
1032:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1033:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define T_DV 3
1034:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1035:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define T_DV 3//3 //1 //3
1036:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1037:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define T_DV 3
1038:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1039:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1040:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1041:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //1-6+ (1 is used by the first switch-case...)
1042:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // IDTech Last Used: 6
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 70


1043:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // LTN Last used 16
1044:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // 772 - 768 - 1 - 1 = 2
1045:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #ifndef T_Vlow
1046:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1047:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define T_Vlow 16
1048:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1049:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define T_Vlow	6 //16//6 //2 //6
1050:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1051:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define T_Vlow 32
1052:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1053:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1054:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1055:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // IDTech Last Used: 768
1056:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #ifndef V_COUNT
1057:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (DISPLAY == LTN)
1058:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define V_COUNT	768
1059:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == IDT)
1060:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define V_COUNT	768
1061:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1062:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // #if (LVDS_PRESCALER == 8)
1063:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #define V_COUNT 768
1064:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // #else
1065:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  #define V_COUNT	(768*2/3)
1066:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // #endif
1067:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1068:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1069:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1070:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                       
1071:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                      |           
1072:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                      V           
1073:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              |<-T_DV>|           |<-T_VD-->|
1074:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              .       .           .         .
1075:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     _____________||__.   124us   .____||___________________
1076:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V           .   ||  |___________|    ||   .
1077:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     _ _ _ _ _ _ _|| _ _ _ _ _ _ _ _ _ ||_ _ _ _ _ _ _ _ _ _ _
1078:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  H   | | | | | | ||| | | | | | | | | ||| | | | | | | | | | |
1079:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //              .   ||                   ||   .
1080:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     _ _ _ _ _.   ||       720us       ||   ._ _ _ _ _ _ _ _ _
1081:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE   | | | | |___||___________________||___| | | | | | | | |
1082:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                  ||                   ||
1083:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
1084:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                        1
1085:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                        |
1086:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                        v               
1087:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     _________________   ___________________   _____________
1088:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  V                   |_|                   |_|
1089:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  H  |||||||||||||||||||||||||||||||||||||||||||||||||||||||
1090:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE  ||||||||||||||||_____|||||||||||||||||_____||||||||||||
1091:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                          ^
1092:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                          |
1093:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //                          2
1094:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1095:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1096:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1097:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define HSYNC_COUNT_FRAME_COMPLETE  \
1098:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	(T_DV +(V_COUNT+T_VD+T_Vlow) + FRAME_UPDATE_DELAY)
1099:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // T_DV = 3
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 71


1100:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // V_COUNT = 768 
1101:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // T_VD = 3
1102:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // T_Vlow = 32
1103:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // FRAME_UPDATE_DELAY = 0
1104:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // TOTAL = 806
1105:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1106:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if(FRAME_UPDATE_DELAY != 0)
1107:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #error "FRAME_UPDATE_DELAY is no longer implemented..."
1108:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1109:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1110:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1111:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //#if(HSYNC_COUNT_FRAME_COMPLETE & 0x01)
1112:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // #warning "Total vertical lines might need to be even!"
1113:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  //This should be fixed...
1114:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //#endif
1115:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1116:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1117:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define DOT_COUNT_PER_HSYNC \
1118:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	(H_LOW_DOTS + HD_DOTS + DE_ACTIVE_DOTS + DH_DOTS)
1119:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // H_LOW_DOTS = 100
1120:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // HD_DOTS = 50 
1121:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DE_ACTIVE_DOTS = 1024
1122:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DH_DOTS = 0
1123:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // TOTAL = 1174
1124:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1125:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1126:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //#define MAKELONG (0L)
1127:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1128:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define DOT_COUNT_PER_FRAME \
1129:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  ((MAKELONG(HSYNC_COUNT_FRAME_COMPLETE)) * (MAKELONG(DOT_COUNT_PER_HSYNC)))
1130:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // TOTAL = 946,244
1131:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1132:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //Hlow_Delay 		H_LOW_DOTS
1133:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //HD_Delay			HD_DOTS	
1134:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //DE_ACTIVE_DOTS
1135:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //DH_DOTS
1136:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1137:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1138:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1139:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** static __inline__ \
1140:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** void loadData(uint16_t rowNum, uint8_t dataEnable) \
1141:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	  __attribute__((__always_inline__));
1142:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1143:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1144:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** uint8_t dataEnable = 0;
1145:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** uint8_t vSync = 0;
1146:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** uint16_t hsyncCount = 0;
1147:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1148:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //frameCount=0 can be used in main to detect whether we've completed a 
1149:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  a frame AND its FRAME_UPDATE_DELAY
1150:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (defined(FRAME_COUNT_TO_DELAY) && (FRAME_COUNT_TO_DELAY != 0))
1151:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** uint8_t frameCount = 0;
1152:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1153:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1154:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** /*
1155:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** static __inline__ \
1156:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** void loadRow(uint16_t rowNum) \
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 72


1157:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	__attribute__((__always_inline__));
1158:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** */
1159:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1160:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //Returns TRUE when the frame is complete
1161:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Should send nada (and maybe hsyncs?) thereafter(?)
1162:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // In sdramThing2.0, when this returns TRUE, the SDRAM loading is complete
1163:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // EXCEPT: the final HD_Dots' FR_READ/ACTIVATE commands will point to a
1164:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  non-existent "next" Hsync... these commands need to be rewritten to
1165:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  point to the "first" Hsync. This is handled in sdramThing2.0's code
1166:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Used to be:
1167:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //SIGNAL(TIMER0_COMPA_vect)
1168:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** uint8_t updateLCD(void)
1169:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** {
 902               		.stabn	68,0,1169,.LM106-.LFBB11
 903               	.LM106:
 904               	.LFBB11:
 905               	/* prologue: function */
 906               	/* frame size = 0 */
1170:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	uint8_t frameComplete = FALSE;
1171:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1172:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//static uint8_t frameCount = 0;
1173:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1174:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if 0 // (defined(SLOW_EVERYTHING_TEST) && SLOW_EVERYTHING_TEST)
1175:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	while(TCNT0L != 7){};
1176:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//This won't work... who knows how many cycles interrupt-entry will be
1177:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//Above should fix that...
1178:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//I think this was just an indicator for scope triggering...
1179:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// not relevent for 
1180:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	setpinPORT(PB2, PORTB);
1181:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	clrpinPORT(PB2, PORTB);
1182:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1183:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1184:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//Hsync and Actually draw the pixels... (when DE is active)
1185:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// This takes a LONG time and will occupy most of the CPU...
1186:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//  ... IN THIS INTERRUPT
1187:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//loadData(((hsyncCount-T_VD-T_Vlow)>>3)&31, dataEnable,colorOverride);
1188:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	loadData(hsyncCount-T_DV-T_VD-T_Vlow, dataEnable);
 907               		.stabn	68,0,1188,.LM107-.LFBB11
 908               	.LM107:
 909 02c2 8091 0000 		lds r24,hsyncCount
 910 02c6 9091 0000 		lds r25,dataEnable
 911               	.LBB107:
 912               	.LBB108:
1189:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1190:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	hsyncCount++;
1191:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1192:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	switch(hsyncCount)
1193:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	{
1194:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//V Front Porch, begins with initLCD
1195:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1196:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//Vsync H->L (Begin V-Sync)
1197:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		case T_DV:
1198:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			dataEnable = FALSE;
1199:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			//clrpinPORT(VSYNC_PIN, VSYNC_PORT);
1200:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			vSync = TRUE;
1201:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			Vsync_fromNada();
1202:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			break;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 73


1203:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//Vsync L->H (Begin V Back Porch)
1204:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		case T_Vlow + T_DV:
1205:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//	if(hfm_nextOutput(&modulator))
1206:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//		colorOverride = 0xff;
1207:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//	else
1208:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//		colorOverride = 7;
1209:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			//setpinPORT(VSYNC_PIN, VSYNC_PORT);
1210:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			vSync = FALSE;
1211:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			Nada_fromVsync();
1212:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			break;
1213:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//Start of frame (DE active)
1214:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		case T_VD +(T_Vlow + T_DV):
1215:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			dataEnable = TRUE;
1216:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			break;
1217:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		// All rows have been displayed
1218:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		// Return to V Front Porch
1219:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		case V_COUNT +(T_VD + T_Vlow + T_DV):
1220:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			dataEnable = FALSE;
1221:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//	break;
1222:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//Frame complete
1223:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//case HSYNC_COUNT_FRAME_COMPLETE:
1224:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			//T_DV +(V_COUNT+T_VD+T_Vlow) + FRAME_UPDATE_DELAY:
1225:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			hsyncCount = 0;
1226:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if 0 //(FRAME_COUNT_TO_DELAY != 0)
1227:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			//static uint8_t frameCount = 0;
1228:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			frameCount++;
1229:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			if(frameCount == FRAME_COUNT_TO_DELAY)
1230:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			{
1231:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 				frameCount = 0;
1232:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 				timer_compareMatchIntSetup(0, OUT_CHANNELA, FALSE);
1233:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 				//timer_compareMatchIntDisable(0, OUT_CHANNELA);
1234:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			}
1235:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1236:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			
1237:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //#warning "NewNote: WTF, are we relying on loadData to have properly set the mode?"
1238:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // Yeah, guess that makes sense... Must be Nada...
1239:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			frameComplete = TRUE;
1240:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			break;
1241:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		default:
1242:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			break;
1243:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	}
1244:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1245:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1246:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if 0 // (defined(LOADROW) && LOADROW)
1247:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//Load the next row into the row(seg)buffer
1248:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//data is enabled after T_VD+T_Vlow...
1249:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	if((hsyncCount >= T_VD+T_Vlow) && (hsyncCount < T_VD+T_Vlow+V_COUNT))
1250:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		loadRow(hsyncCount - (T_VD+T_Vlow));
1251:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1252:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1253:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//This note was written long before the above was commented-out...
1254:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//So...?
1255:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// Here is where loadRow used to be called
1256:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// it has been moved to oldNotes.txt, but it would make more sense
1257:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// to look at LCDdirectLVDS <25 or LCDdirect
1258:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// loadRow used the time between DE inactive and the next Hsync
1259:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// to load a row to a row-buffer (as opposed to a frame-buffer)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 74


1260:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// thus, DE could gain more pixels because there would be fewer
1261:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// calculations to determine the memory location to write from
1262:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// This effect has since been minimized
1263:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// BUT loadRow might be necessary for program-memory-based images...
1264:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1265:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	return frameComplete;
1266:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** }
1267:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1268:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1269:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //See LCDdirectLVDS for an example...
1270:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // basically it loads a single row into a buffer for the next dateEnable
1271:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  (either the row-buffer or the row-segment-buffer) 
1272:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // This has been *greatly* reduced, is not at all functional, just
1273:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // to give an idea of loadRow's purpose.
1274:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if 0 //(defined(LOADROW) && LOADROW)
1275:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** void loadRow(uint16_t rowNum)
1276:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** {
1277:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//e.g....
1278:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	tet_drawRow(rbRowNum, rowBuffer);
1279:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	
1280:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//and...	
1281:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	rowBuffer[i] = fb_to_rb(colorVal);
1282:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	
1283:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//and...
1284:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	if((rbRowNum >= SMILE_TOP_ROW) &&
1285:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			(rbRowNum < (SMILE_HEIGHT+SMILE_TOP_ROW)))
1286:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	{
1287:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			for(i=0; i<FB_WIDTH; i++)
1288:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			{
1289:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****          	temp=pgm_readImageByte(pimage, rbRowNum-SMILE_TOP_ROW, i);
1290:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 				if(!(temp & 0xC0))
1291:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 					rowBuffer[i+SMILE_SHIFT] = fb_to_rb(temp);
1292:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			}
1293:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	}
1294:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1295:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	life_drawRow(rbRowNum, &(rowBuffer[RB_WIDTH-LIFE_WIDTH]));
1296:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1297:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//HORIZONTAL_COLOR_BARS
1298:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	for(i=0; i<RB_WIDTH; i++)
1299:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		rowBuffer[i] = fb_to_rb(rowNum);
1300:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1301:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//Good for syncing to have white on both borders...
1302:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	newSeg(1, 0x06, (6<<4) | 3);
1303:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	
1304:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** }
1305:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif //LOAD_ROW
1306:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1307:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1308:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //Including inactive pixel-clocks (timing)
1309:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // DotCount per row...
1310:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  TOTAL_CYC_COUNT was used for the timer-interrupt in LCDdirectLVDS
1311:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  This was DOTS_TO_CYC(DISPLAY_DOT_COUNT) + ROW_CALCULATION_CYCS
1312:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  ROW_CALCULATION_CYCS was 50,000 (!!!)
1313:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   DOTS_TO_CYC(dots), last-used, was dots*7 (LVDS_PRESCALER nullified /8)
1314:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   So, the overall dot-count per row was... 
1315:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     DISPLAY_DOT_COUNT + ROW_CALCULATION_DOTS
1316:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     where ROW_CALCULATION_DOTS = 50,000cyc/7 = 7142 dots
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 75


1317:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //     So... the overall dot-count per row was *MUCH* longer than usual
1318:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  Pretty certain there's not nearly enough memory to simulate that
1319:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   (in sdramThing2.0)
1320:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   But It does suggest that it would be worthwhile to try to stretch
1321:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   the rows as much as possible...
1322:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   During this time, NADA is sent normally, (V=H, H=H, DE=L)
1323:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //    Or Vsync (V=L, H=H, DE=L)
1324:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   Maybe something could be simulated with PWM again, if necessary...
1325:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //   (Certainly not at full-speed)
1326:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define DISPLAY_DOT_COUNT \
1327:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	(H_LOW_DOTS + HD_DOTS + DE_ACTIVE_DOTS + DH_DOTS)
1328:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1329:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if 0
1330:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1331:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //#define T_Hlow_CYC 1//8 //(T_Halow_REAL*3)
1332:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define T_Hlow_CYC DOTS_TO_CYC(H_LOW_DOTS)
1333:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1334:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define T_DE_CYC	DOTS_TO_CYC(DE_ACTIVE_DOTS)
1335:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1336:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //#define T_HD_CYC 1//3//(T_HD_REAL*3)
1337:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define T_HD_CYC	DOTS_TO_CYC(HD_DOTS)
1338:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1339:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define T_DH_CYC	DOTS_TO_CYC(DH_DOTS)
1340:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1341:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1342:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1343:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1344:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1345:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** void init_timer0Hsync(void)
1346:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** {
1347:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//T_HD + T_DH + T_low + T_DE
1348:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// For the original system, 19.865us = 695 dot-clocks
1349:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// We'd need to take advantage of the 16-bit timer
1350:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//  OCR1A may not be written properly (with a temporary high-byte)
1351:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//  ... not sure.
1352:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// TIMER0 DOES NOT HAVE CTC MODE in 16-bit mode
1353:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1354:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // This is a hack, for testing syncability with long row-calculations
1355:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // before actually drawing it... e.g. loading from program memory
1356:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // This value needs to be larger than the calculation time
1357:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // otherwise, it seems, syncing isn't stable
1358:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // BUT THIS IS A HACK, has nothing to do with actual calculation time
1359:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // And for slow LVDS or whatnot, this may be unnecessarily HUGE
1360:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1361:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define DISPLAY_CYC_COUNT	(DOTS_TO_CYC(DISPLAY_DOT_COUNT))
1362:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //	(T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC)
1363:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1364:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //NOTE that with longer ROW_CALCULATION_CYCS, lines can be repeated...
1365:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // apparently an effect of the display, definitely not a code-thing
1366:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // in which case the vertical resolution decreases
1367:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // though, this could be used to advantage... 
1368:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // (e.g. more processing time outside the drawing interrupts?)
1369:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // NOTE that if the value is too small and calculations take longer in some
1370:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // lines than others (?), those lines may repeat, or syncing could be off
1371:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (LVDS_PRESCALER == 8)
1372:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  //#define ROW_CALCULATION_DELAY 1//20
1373:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define ROW_CALCULATION_CYCS (50000) //0 //(70000) //(100000)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 76


1374:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #else
1375:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  //#define ROW_CALCULATION_DELAY 9//7//5//2//1//10
1376:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define ROW_CALCULATION_CYCS	(8*DISPLAY_CYC_COUNT)
1377:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1378:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1379:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define TOTAL_CYC_COUNT \
1380:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	(ROW_CALCULATION_CYCS + DISPLAY_CYC_COUNT)
1381:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //	(ROW_CALCULATION_DELAY * (T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC))
1382:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //#define TOTAL_CYC_COUNT 2000
1383:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (TOTAL_CYC_COUNT > 255)
1384:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  //Adding +7 causes it to round up (hopefully)
1385:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define TIMER0_TCNTS ((TOTAL_CYC_COUNT+7)/8)
1386:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define TIMER0_CLKDIV	CLKDIV8
1387:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+7)/8: Timer0 CLKDIV8"
1388:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #if (TIMER0_TCNTS > 255)
1389:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+63)/64: Timer0 CLKDIV64"
1390:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #define TIMER0_TCNTS ((TOTAL_CYC_COUNT+63)/64)
1391:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #define TIMER0_CLKDIV CLKDIV64
1392:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #if (TIMER0_TCNTS > 255)
1393:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	 #warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+255)/256: Timer0 CLKDIV256"
1394:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	 #define TIMER0_TCNTS ((TOTAL_CYC_COUNT+255)/256)
1395:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	 #define TIMER0_CLKDIV CLKDIV256
1396:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	 #if (TIMER0_TCNTS > 255)
1397:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		#warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+1023)/1024: Timer0 CLKDIV1024"
1398:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		#define TIMER0_TCNTS ((TOTAL_CYC_COUNT+1023)/1024)
1399:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		#define TIMER0_CLKDIV	CLKDIV1024
1400:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	 #endif
1401:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #endif
1402:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #endif
1403:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #if (TIMER0_TCNTS == 0)
1404:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #error "TIMER0_OCRVAL == 0"
1405:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #endif
1406:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #else
1407:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define TIMER0_TCNTS TOTAL_CYC_COUNT
1408:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define TIMER0_CLKDIV CLKDIV1
1409:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1410:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1411:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (defined(SLOW_EVERYTHING_TEST) && SLOW_EVERYTHING_TEST)
1412:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  //For testing, I want to see the pulses with the 'scope
1413:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  // Unless the timer is divisible by 7 the pulses will not align with the
1414:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  // timer overflow...
1415:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  //but shit... it's running at clkdiv8 so each TCNT is 64 bits!
1416:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  // but this shouldn't matter for visualizing, that's only ~10 pixel clocks
1417:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  // and we'll only start visualizing *after* the extra TCNTs...
1418:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  //Since the timer counts from 0 to (and including) OCR1A
1419:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  // Add one to this test...
1420:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #if (((TIMER0_TCNTS + 1) % 7) == 0)
1421:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 1) % 7 == 0"
1422:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS"
1423:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS)
1424:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1425:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 2) % 7) == 0)
1426:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 2) % 7 == 0"
1427:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 1"
1428:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 1)
1429:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1430:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 3) % 7) == 0)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 77


1431:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 3) % 7 == 0"
1432:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 2"
1433:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 2)
1434:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1435:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 4) % 7) == 0)
1436:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 4) % 7 == 0"
1437:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 3"
1438:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 3)
1439:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1440:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 5) % 7) == 0)
1441:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 5) % 7 == 0"
1442:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 4"
1443:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 4)
1444:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1445:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 6) % 7) == 0)
1446:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 6) % 7 == 0"
1447:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 5"
1448:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 5)
1449:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1450:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #elif (((TIMER0_TCNTS) % 7) == 0)
1451:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "(TIMER0_TCNTS) % 7 == 0"
1452:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS - 1"
1453:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS - 1)
1454:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1455:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #else
1456:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****   #error "WTF?"
1457:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #endif
1458:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #else
1459:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #define TIMER0_OCRVAL (TIMER0_TCNTS-1)
1460:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1461:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1462:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (TIMER0_OCRVAL > 255)
1463:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #error "Despite all my efforts, TIMER0_OCRVAL is *still* > 255!"
1464:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1465:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1466:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****    OCR0A = TIMER0_OCRVAL; //T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC;
1467:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	timer_setWGM(0, WGM_CLR_ON_COMPARE);
1468:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****    timer_selectDivisor(0, TIMER0_CLKDIV); //CLKDIV1);
1469:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****    timer_compareMatchIntEnable(0, OUT_CHANNELA);
1470:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** }
1471:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1472:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #define fullBlue()	DEblue_init()
1473:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1474:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1475:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1476:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //Either use one of the ones here, or define your own...
1477:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // rowNum is the drawable row number on the LCD...
1478:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //static __inline__ void drawPix(uint16_t rowNum);
1479:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1480:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // This should have a uint16 rowNum!
1481:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // But, so far, the only cases which use all 768 rows are LCDdirectLVDS
1482:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // with RowSegBuffer, and sdramThing (how did this uint8_t thing not cause
1483:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // trouble there?!)
1484:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // RowSegBuffer doesn't pay attention to rowNum in drawPix...
1485:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1486:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1487:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** static __inline__ \
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 78


1488:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** void drawPix(uint8_t rowNum) \
1489:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	  __attribute__((__always_inline__));
1490:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if 0
1491:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if (!defined(ROW_SEG_BUFFER) || !ROW_SEG_BUFFER)
1492:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //drawPix loads each pixel individually... It doesn't use a for-loop
1493:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // since that would take away from actual pixel-drawing time...
1494:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // I think it's been removed... but here's a (non-functional) example...
1495:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** void drawPix(uint8_t rowNum)
1496:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** {
1497:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	writeColor(*(color+1));	 
1498:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	writeColor(*(color+2));	 
1499:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	writeColor(*(color+3)); 
1500:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	...
1501:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	writeColor(*(color+61));
1502:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	writeColor(*(color+62));
1503:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	writeColor(*(color+63));
1504:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// WriteColor writes the pixel *after* the calculations...
1505:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// thus the pixel appears basically after writeColor completes
1506:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	// These nops assure the 64th pixel is fully-displayed before exitting
1507:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	asm("nop");
1508:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	...
1509:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	asm("nop");
1510:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1511:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** /*		reg[17] = colorBuffer[rowNum][17];                         
1512:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		writeColor(reg[17]);                         
1513:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		...
1514:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		reg[20] = colorBuffer[rowNum][20];                         
1515:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		writeColor(reg[20]);  
1516:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		
1517:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//REPEATING to fill screen... (delayDots = 342 worked prior to this)
1518:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		reg[0] = colorBuffer[rowNum][0];
1519:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		writeColor(reg[0]);
1520:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		...
1521:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		reg[10] = colorBuffer[rowNum][10];
1522:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		writeColor(reg[10]);
1523:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** */
1524:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//Display the rest as black...
1525:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		writeColor(0);
1526:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** }
1527:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #else		//ROW_SEG_BUFFER
1528:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** void drawPix(uint8_t rowNum)
1529:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** {
1530:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
1531:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	         | (0<<COM1B1) | (1<<COM1B0)
1532:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	         | (1<<PWM1A) | (1<<PWM1B) );
1533:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1534:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** /* This bit was in loadData, just some notes, now...
1535:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1536:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  WTF, how did this work?! Am I not using drawPix?!
1537:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****    Yes, but drawPix calls drawSegs, which doesn't have an argument
1538:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****    because loadRow takes the row argument elsewhere, drawSegs just
1539:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****    draws 'em
1540:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       //#warning "see 'shouldBe' here..."
1541:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       //Should be:
1542:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       rowNum = rowNum*FB_HEIGHT/V_COUNT;
1543:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       //rowNum = rowNum / (768/FB_HEIGHT);
1544:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 79


1545:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	So, rowNum change left-over from the ol' FrameBuffer days had no effect
1546:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	on drawSegs.
1547:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** */
1548:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1549:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1550:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1551:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		drawSegs();
1552:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1553:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1554:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//DE->Nada transition expects fullBlue...
1555:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//Also helps to show the edge of the DE timing...
1556:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1557:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//!!! Not sure what the state is at this point...
1558:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		// could be any DE+Blue level, or could be NADA...
1559:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		// Nada: DT1=3, still leaves one bit for clocking, might be OK
1560:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****          
1561:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//Among the things that don't make sense...
1562:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		// This appears to go into affect BEFORE delay_cyc (?)
1563:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		// as, without a pull-up resistor on the /OC1B output, 
1564:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		// green seems to be floating between the last pixel and the
1565:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		// delay_cyc (!)
1566:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//Disable complementary-output for Green 
1567:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//  (on /OC1B, where CLK is OC1B)
1568:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		// Since Nada, V, and H DT's might be bad for clocking.
1569:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
1570:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****          | (1<<COM1B1) | (0<<COM1B0)
1571:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****          | (1<<PWM1A) | (1<<PWM1B) );
1572:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1573:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		fullBlue();
1574:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** }
1575:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif //0
1576:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1577:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1578:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
1579:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //          G) groovy little spiral...
1580:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //
1581:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1582:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if 0 //(defined(CLOCK_INSENSITIVITY_TESTING) && CLOCK_INSENSITIVITY_TESTING)
1583:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DEonly_fromNada();
1584:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//Enable complementary-output for Green (on /OC1B, where CLK is OC1B)
1585:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
1586:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 				   | (0<<COM1B1) | (1<<COM1B0)
1587:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 					| (1<<PWM1A) | (1<<PWM1B) );
1588:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1589:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1590:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1591:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1592:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1593:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1594:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1595:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1596:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1597:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1598:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** /* These are old tests from above, under if(dataEnable)
1599:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****    They should all be implemented in lcdStuff.c, but have not been
1600:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****    retested since...
1601:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if(defined(BLUE_DIAG_BAR) && BLUE_DIAG_BAR)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 80


1602:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       uint16_t blueCyc = DOTS_TO_CYC(rowNum);
1603:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
1604:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       
1605:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       DEonly_fromNada();
1606:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       delay_cyc(notBlueCyc);
1607:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       DEblue_fromDEonly();
1608:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       delay_cyc(blueCyc);
1609:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1610:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       Nada_fromDEblue();
1611:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif(defined(BLUE_VERT_BAR) && BLUE_VERT_BAR)
1612:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       DEonly_fromNada();
1613:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)/3);
1614:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       DEblue_fromDEonly();
1615:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)*2/3);
1616:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       Nada_fromDEblue();
1617:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #elif(defined(DE_BLUE) && DE_BLUE)
1618:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       DEblue_fromNada();
1619:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS));
1620:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       Nada_fromDEblue();
1621:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #else  //NOT BLUE_DIAG_BAR, BLUE_VERT_BAR, NOR DE_BLUE
1622:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #if ( defined(COLOR_BAR_SCROLL) && COLOR_BAR_SCROLL)
1623:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       if(rowNum <= 256)
1624:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****          rowNum=0;
1625:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       else
1626:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****          rowNum=1;
1627:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #else //NOT COLOR_BAR_SCROLL... drawPix...
1628:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** */
1629:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1630:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1631:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1632:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1633:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //a/o sdramThing2.0v8 early... appears to be syncing on Blue signal
1634:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // thus we get diagonal data including Hsync (colored in red) along the
1635:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // as a diagonal stripe at the right
1636:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if(defined(BLUE_DIAG_BAR) && BLUE_DIAG_BAR)
1637:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1638:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** {
1639:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//uint16_t blueCyc = DOTS_TO_CYC(rowNum);
1640:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
1641:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		uint16_t blueDots = rowNum;
1642:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		uint16_t notBlueDots = DE_ACTIVE_DOTS - blueDots;
1643:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1644:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DEonly_fromNada();
1645:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//delay_cyc(notBlueCyc);
1646:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//delay_Dots(notBlueDots);
1647:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DE_DotDelay(notBlueDots);
1648:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DEblue_fromDEonly();
1649:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//delay_cyc(blueCyc);
1650:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//delay_Dots(blueDots);
1651:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DE_DotDelay(blueDots);
1652:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		Nada_fromDEblue();
1653:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** }
1654:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1655:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1656:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //a/o sdramThing2.0v8-31ish: LooksPromising, but delayed
1657:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // also LVDS bit-shifts causing vertical striping
1658:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if(defined(BLUE_VERT_BAR) && BLUE_VERT_BAR)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 81


1659:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1660:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** {
1661:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DEonly_fromNada();
1662:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)/3);
1663:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS/3);
1664:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS/3);
1665:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DEblue_fromDEonly();
1666:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)*2/3);
1667:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
1668:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
1669:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		Nada_fromDEblue();
1670:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** }
1671:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1672:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1673:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //a/o sdramThing2.0v8-32 nogo... syncs at end of blue instead of Hsync
1674:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if(defined(BLUE_VERT_BAR_REVERSED) && BLUE_VERT_BAR_REVERSED)
1675:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1676:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** {
1677:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DEblue_fromNada();
1678:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)/3);
1679:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS/3);
1680:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS/3);
1681:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DEonly_fromDEblue();
1682:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)*2/3);
1683:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
1684:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
1685:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		Nada_fromDEonly();
1686:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** }
1687:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1688:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1689:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1690:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if(defined(DE_BLUE) && DE_BLUE)
1691:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1692:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** {
1693:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DEblue_fromNada();
1694:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS));
1695:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS);
1696:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS);
1697:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		Nada_fromDEblue();
1698:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** }
1699:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1700:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1701:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if(defined(BLUE_BORDER) && (BLUE_BORDER!=0))
1702:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** static __inline__ void drawPix(uint16_t rowNum)
1703:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** {
1704:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DEblue_fromNada();
1705:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DE_DotDelay(BLUE_BORDER);
1706:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DEonly_fromDEblue();
1707:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS - BLUE_BORDER*2);
1708:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DEblue_fromDEonly();
1709:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		DE_DotDelay(BLUE_BORDER);
1710:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		Nada_fromDEblue();
1711:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** }
1712:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1713:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1714:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if 0
1715:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //NOT BLUE_DIAG_BAR, BLUE_VERT_BAR, NOR DE_BLUE
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 82


1716:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #if ( defined(COLOR_BAR_SCROLL) && COLOR_BAR_SCROLL)
1717:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		if(rowNum <= 256)
1718:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			rowNum=0;
1719:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		else
1720:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			rowNum=1;
1721:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #else //NOT COLOR_BAR_SCROLL... drawPix...
1722:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//#warning "see 'shouldBe' here..."
1723:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//Should be:
1724:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		rowNum = rowNum*FB_HEIGHT/V_COUNT;
1725:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//rowNum = rowNum / (768/FB_HEIGHT);
1726:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #endif
1727:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1728:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//DEonly_fromNada();
1729:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       drawPix(rowNum);
1730:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//Nada_init();
1731:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****  #warning "THIS ISN'T SAFE"
1732:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		Nada_fromDEonly();
1733:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//Drawing Methods...
1734:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1735:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #if 0 //(defined(CLOCK_INSENSITIVITY_TESTING) && CLOCK_INSENSITIVITY_TESTING)
1736:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//!!! Not sure what the state is at this point...
1737:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		// could be any DE+Blue level, or could be NADA...
1738:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		// Nada: DT1=3, still leaves one bit for clocking, might be OK
1739:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1740:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       //Disable complementary-output for Green 
1741:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//  (on /OC1B, where CLK is OC1B)
1742:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		// Since Nada, V, and H DT's might be bad for clocking.
1743:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
1744:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****                | (1<<COM1B1) | (0<<COM1B0)
1745:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****                | (1<<PWM1A) | (1<<PWM1B) );
1746:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1747:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1748:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//colorOverride removed in LVDS, revisit LCDdirect50
1749:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** #endif
1750:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1751:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1752:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1753:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // AND HERE!!!
1754:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1755:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** // rowNum is only used when DE is active...
1756:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** //  and should be 0 at *drawn row* 0
1757:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** void loadData(uint16_t rowNum, uint8_t dataEnable)
1758:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** {
1759:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	//H Active pulse...
1760:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****    if(vSync)
 913               		.stabn	68,0,1760,.LM108-.LFBB11
 914               	.LM108:
 915 02ca 2091 0000 		lds r18,vSync
 916 02ce 2223      		tst r18
 917 02d0 01F0      		breq .L48
1761:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****    {
1762:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 		//Vsync_fromNada() is called at the end of the last interupt
1763:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       VplusH_fromVsync();
 918               		.stabn	68,0,1763,.LM109-.LFBB11
 919               	.LM109:
 920 02d2 1DBC      		out 77-0x20,__zero_reg__
 921               	.LBB109:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 83


 922               	.LBB110:
 923               	.LBB111:
 924               	.LBB112:
 925               		.stabs	"/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h",132,0,0,.Ltext10
 926               	.Ltext10:
 927               		.stabn	68,0,105,.LM110-.LFBB11
 928               	.LM110:
 929 02d4 EFEA      		ldi r30,lo8(175)
 930 02d6 F0E0      		ldi r31,hi8(175)
 931               	/* #APP */
 932               	 ;  105 "/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h" 1
 933 02d8 3197      		1: sbiw r30,1
 934 02da 01F4      		brne 1b
 935               	 ;  0 "" 2
 936               	/* #NOAPP */
 937               	.LBE112:
 938               	.LBE111:
 939               	.LBE110:
 940               	.LBE109:
 941               		.stabs	"_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c",132,0,0,.Ltext11
 942               	.Ltext11:
1764:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       Hlow_Delay();
1765:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       Vsync_fromVplusH();
 943               		.stabn	68,0,1765,.LM111-.LFBB11
 944               	.LM111:
 945 02dc 25E0      		ldi r18,lo8(5)
 946 02de 00C0      		rjmp .L59
 947               	.L48:
1766:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       HD_Delay();
1767:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****    }
1768:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****    else
1769:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****    {
1770:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       Hsync_fromNada();
 948               		.stabn	68,0,1770,.LM112-.LFBB11
 949               	.LM112:
 950 02e0 23E0      		ldi r18,lo8(3)
 951 02e2 2DBD      		out 77-0x20,r18
 952               	.LBB113:
 953               	.LBB114:
 954               	.LBB115:
 955               	.LBB116:
 956               		.stabs	"/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h",132,0,0,.Ltext12
 957               	.Ltext12:
 958               		.stabn	68,0,105,.LM113-.LFBB11
 959               	.LM113:
 960 02e4 EFEA      		ldi r30,lo8(175)
 961 02e6 F0E0      		ldi r31,hi8(175)
 962               	/* #APP */
 963               	 ;  105 "/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h" 1
 964 02e8 3197      		1: sbiw r30,1
 965 02ea 01F4      		brne 1b
 966               	 ;  0 "" 2
 967               	/* #NOAPP */
 968               	.LBE116:
 969               	.LBE115:
 970               	.LBE114:
 971               	.LBE113:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 84


 972               		.stabs	"_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c",132,0,0,.Ltext13
 973               	.Ltext13:
1771:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       Hlow_Delay();
1772:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       Nada_fromHsync();
 974               		.stabn	68,0,1772,.LM114-.LFBB11
 975               	.LM114:
 976 02ec 24E0      		ldi r18,lo8(4)
 977               	.L59:
 978 02ee 2DBD      		out 77-0x20,r18
 979               	.LBB117:
 980               	.LBB118:
 981               	.LBB119:
 982               	.LBB120:
 983               		.stabs	"/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h",132,0,0,.Ltext14
 984               	.Ltext14:
 985               		.stabn	68,0,105,.LM115-.LFBB11
 986               	.LM115:
 987 02f0 E8E5      		ldi r30,lo8(88)
 988 02f2 F0E0      		ldi r31,hi8(88)
 989               	/* #APP */
 990               	 ;  105 "/usr/local/lib/gcc/avr/4.4.5/../../../../avr/include/util/delay_basic.h" 1
 991 02f4 3197      		1: sbiw r30,1
 992 02f6 01F4      		brne 1b
 993               	 ;  0 "" 2
 994               	/* #NOAPP */
 995               	.LBE120:
 996               	.LBE119:
 997               	.LBE118:
 998               	.LBE117:
 999               		.stabs	"_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c",132,0,0,.Ltext15
 1000               	.Ltext15:
1773:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****       HD_Delay();
1774:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****    }
1775:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 
1776:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c ****    if(dataEnable)
 1001               		.stabn	68,0,1776,.LM116-.LFBB11
 1002               	.LM116:
 1003 02f8 9923      		tst r25
 1004 02fa 01F0      		breq .L50
 1005               	.LBB121:
 1006               	.LBB122:
 1007               		.stabs	"main.c",132,0,0,.Ltext16
 1008               	.Ltext16:
   1:main.c        **** #include "projInfo.h"   //Don't include in main.h 'cause that's included in other .c's?
   2:main.c        **** #include "main.h"
   3:main.c        **** #include <util/delay.h> //For delay_us in pll_enable
   4:main.c        **** #include <avr/pgmspace.h>
   5:main.c        **** #include _TIMERCOMMON_HEADER_
   6:main.c        **** //#include "../../../_commonCode/charBitmap/0.10/charBitmap.h"
   7:main.c        **** #include _CHARBITMAP_HEADER_
   8:main.c        **** #include "fbColors.h"
   9:main.c        **** 
  10:main.c        **** #include _SINETABLE_HEADER_
  11:main.c        **** 
  12:main.c        **** 
  13:main.c        **** 
  14:main.c        **** #include "mainConfig.h"
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 85


  15:main.c        **** 
  16:main.c        **** 
  17:main.c        **** #include "delayCyc.h"
  18:main.c        **** 
  19:main.c        **** #if (defined(ROW_SEG_BUFFER) && ROW_SEG_BUFFER)
  20:main.c        **** 	 #include "rowSegBuffer.h"
  21:main.c        **** #endif
  22:main.c        **** 
  23:main.c        **** //Nope, can't be removed yet...
  24:main.c        **** //#define ROW_BUFFER FALSE
  25:main.c        **** //#define LOADROW TRUE
  26:main.c        **** #if (defined(ROW_BUFFER) && ROW_BUFFER)
  27:main.c        ****  #include "rowBuffer.c"
  28:main.c        **** #endif
  29:main.c        **** 
  30:main.c        **** 
  31:main.c        **** 
  32:main.c        **** 
  33:main.c        **** 
  34:main.c        **** 
  35:main.c        **** // a/o v59:
  36:main.c        **** //PSEGS are the "pixel segments" addressable in RowSegmentBuffer
  37:main.c        **** // e.g. one could load a single row-segment NUM_PSEGS long, and it would 
  38:main.c        **** // reach from one edge of the screen to the other
  39:main.c        **** // or any number <=NUM_SEGMENTS of row segments whose lengths all add up to
  40:main.c        **** // <=NUM_PSEGS. (It's possible to extend beyond NUM_PSEGS, which would draw
  41:main.c        **** // beyond the edge of the screen, but it may affect the screen's ability 
  42:main.c        **** // to sync properly)
  43:main.c        **** // This value isn't exactly adjustable, it's a characteristic of the
  44:main.c        **** // ratio of the pixel-clock and the system-clock, along with the number of
  45:main.c        **** // system clock cycles used to draw each pixel.
  46:main.c        **** // This value was determined by experimentation with the very specific 
  47:main.c        **** // configuration currently in use, though it could probably be calculated 
  48:main.c        **** // from other #defines elsewhere.
  49:main.c        **** // (and probably *should* be, at some point, especially with 
  50:main.c        **** //  experimentations with PLLSYSCLK, LVDS_PRESCALER, SLOW_LVDS, etc...)
  51:main.c        **** // For now, changing this doesn't really do anything except scale some 
  52:main.c        **** // drawings horizontally (E.G. SEG_RACER)
  53:main.c        **** //These notes were determined long ago when developing SEG_RACER:
  54:main.c        **** // Wasn't sure where 357 came from... and now I'm wondering where the
  55:main.c        **** // notes I wrote regarding it disappeared to...
  56:main.c        **** // Anyhow, from line 72, if ROW_SEG_BUFFER && !LVDS_PRESCALER
  57:main.c        **** // "ROW_SEG_BUFFER uses 20cyc/pixel" (doesn't match the math I've 
  58:main.c        **** // elsewhere) 1024/20*7 = 358.4... so maybe that's something to do with it
  59:main.c        **** // TODO: If it was 21cyc/pixel, wouldn't we have perfect alignment with
  60:main.c        **** //       color-transitions and segment widths?
  61:main.c        **** //#define NUM_PSEGS	(1024/3+16) //357
  62:main.c        **** #define NUM_PSEGS (1024/3+16)
  63:main.c        **** 
  64:main.c        **** 
  65:main.c        **** #include "delayCyc.c"
  66:main.c        **** #include "lcdDefines.h"
  67:main.c        **** //Yes, I know #including C files is bad-practice...
  68:main.c        **** // and yes, this has to be here... for now.
  69:main.c        **** #if(defined(SEG_RACER) && SEG_RACER)
  70:main.c        ****  #include "seg_racer.c"
  71:main.c        **** #endif
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 86


  72:main.c        **** 
  73:main.c        **** 
  74:main.c        **** 
  75:main.c        **** 
  76:main.c        **** 
  77:main.c        **** // a/o v60, this note is OLD, and actually is the whole point behind
  78:main.c        **** // ROW_SEG_BUFFER's current implementation.
  79:main.c        **** // TODO: Between OSCCAL_VAL and FRAME_UPDATE_DELAY
  80:main.c        **** //  it seems the speed (at least for the LTN) isn't so important after all
  81:main.c        **** //  This could be used to my advantage...
  82:main.c        **** //  Maybe bump OSCCAL_VAL all the way up, but use a slower "bit-rate"
  83:main.c        **** //  Thus, pixels could be skinnier, thus higher-resolution.
  84:main.c        **** //   Or more instructions could be used for the same resolution
  85:main.c        **** //   allowing, e.g. sprites from program-memory, without necessitating a
  86:main.c        **** //   large (or any?) frame-buffer...
  87:main.c        **** 
  88:main.c        **** 
  89:main.c        **** //This used to be handled by TOOFAST_TEST, but now can be configured here
  90:main.c        **** // 0xff sets the processor to run as fast as possible 
  91:main.c        **** //  (~16MHz? ~128MHz bit-rate)
  92:main.c        **** // 0x00 sets it as slow as possible (~4MHz, ~32MHz bit-rate)
  93:main.c        **** //  good for testing whether odd colors
  94:main.c        **** //  or bad syncing is due to bits being shifted, etc. 
  95:main.c        **** //  Maybe due to slow "LVDS" conversion chips, or whatnot.
  96:main.c        **** //   This seems to be the case right now... 0xff: black is appearing green
  97:main.c        **** //   There should be *some* green in it, but not this much.
  98:main.c        **** //   Likely due to different propagation delays between my under-driven
  99:main.c        **** //    74LS86's (running red and green), from 3.3V!
 100:main.c        **** //    and the happier and newer 74AHC XOR and OR currently driving the
 101:main.c        **** //    clock and DVH/Blue signals
 102:main.c        **** //  Highly dependent on the screen itself, some may not run at all with
 103:main.c        **** //  such slow bitrates... heck, some may not run at all even at the fastest
 104:main.c        **** // If SLOW_EVERYTHING_TEST is true, this value is overridden
 105:main.c        **** // LTN last used 0x20
 106:main.c        **** // a/o v59:
 107:main.c        **** // 0xD8 is the lowest value that syncs reliably, a few glitches from time
 108:main.c        **** // to time.
 109:main.c        **** // The effect of lower values isn't *quite* what I was expecting, but
 110:main.c        **** // definitely suggests that using ROW_SEG_BUFFER at this bit/refresh-rate
 111:main.c        **** // is dang-near right at the minimum required for this display.
 112:main.c        **** // This might be why the other (same model) display didn't work, but its
 113:main.c        **** // flakeyness at 0xff appeared different than this one's at lower OSCCALs
 114:main.c        **** // --Later note... actually retrying the "flakey" display with the same
 115:main.c        **** //   configuration. Actually, yes, the problem looks dang-near identical to
 116:main.c        **** //   the "reliable" display's being run at OSCCAL_VALs lower than 0xD8
 117:main.c        **** //   Both displays are of the same manufacturer/model.
 118:main.c        **** //    "reliable" has the chip: LXD91810 VS252AG
 119:main.c        **** //    "flakey"   has the chip: LXD91810 VS242AC
 120:main.c        **** //   The only bit I don't get is that I'm dang-near certain I had both
 121:main.c        **** //   displays working at one point, and from the same code...
 122:main.c        **** //   but this OSCCAL value is the maximum, and the only other way to speed
 123:main.c        **** //   up the bit-rate changes the resolution; which I haven't done
 124:main.c        **** //   for quite some time.
 125:main.c        **** //   Also different about this test than when I originally determined it
 126:main.c        **** //   "flakey": I've since switched the 74LS00 and LS32 out for LS86's
 127:main.c        **** //   (These are wired such that one chip is responsible for the + side of
 128:main.c        **** //    every LVDS signal, and one chip is responsible for the - side.
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 87


 129:main.c        **** //    The best-practice, probably, would be to have the + and - sides of
 130:main.c        **** //    an LVDS signal on the same chip. It's also plausible that my test was
 131:main.c        **** //    so long ago that it was on the old board which had this configuration
 132:main.c        **** //    but I doubt that, since that board was so hokily-implemented (with
 133:main.c        **** //    chip-clips and grabbers all over the place) that I can't imagine it
 134:main.c        **** //    was ever running again after all those months of disuse. Though...
 135:main.c        **** //    if that *was* the case... it could also be that I'm using a different
 136:main.c        **** //    ATtiny861... in which case, maybe the RC oscillator and/or PLL aren't
 137:main.c        **** //    capable of running as fast... 
 138:main.c        **** //    Not that I have a ton of these things lying around (three total, in
 139:main.c        **** //    various projects already)
 140:main.c        **** //    BUT the end-result may be that I just happen to have the one display
 141:main.c        **** //    and ATtiny861 on the planet that will work together. That'd be lame.)
 142:main.c        **** #define OSCCAL_VAL	0xff//0xDB//0xDC//0xE0//0//0xff//0x20//0xff //0x00
 143:main.c        **** 
 144:main.c        **** 
 145:main.c        **** 
 146:main.c        **** 
 147:main.c        **** 
 148:main.c        **** //a/o v60: These are old experiments...
 149:main.c        **** // they *are useful* for testing new displays...
 150:main.c        **** // but I can't recall off-hand how to use them instead of (or with?)
 151:main.c        **** // rowSegBuffer...
 152:main.c        **** // They're defined and better-described in lcdStuff.c...
 153:main.c        **** //These three are mutually-exclusive (BLUE_VERT_BAR overrides DE_BLUE)
 154:main.c        **** // (BLUE_DIAG_BAR overrides both...)
 155:main.c        **** //#define BLUE_DIAG_BAR TRUE
 156:main.c        **** //A single black bar, followed by a single blue bar... ~1/3 and 2/3's width
 157:main.c        **** //#define BLUE_VERT_BAR TRUE
 158:main.c        **** //#define DE_BLUE TRUE
 159:main.c        **** // OLD NOTE:
 160:main.c        **** // NONE SELECTED DOESN'T SYNC!!! DE not detected???
 161:main.c        **** 
 162:main.c        **** 
 163:main.c        **** 
 164:main.c        **** // Default is drawPix, from program memory...
 165:main.c        **** // a/o v60: drawPix() has since become the de-facto function for drawing
 166:main.c        **** // a row of pixels, regardless of the method.
 167:main.c        **** // It's defined as necessary...
 168:main.c        **** 
 169:main.c        **** 
 170:main.c        **** 
 171:main.c        **** //This is where COLOR_BAR_SCROLL and PIXEL_SCROLL were, in part.
 172:main.c        **** 
 173:main.c        **** 
 174:main.c        **** 
 175:main.c        **** 
 176:main.c        **** 
 177:main.c        **** #include "pll.c"
 178:main.c        **** 
 179:main.c        **** #include "lvds.c"
 180:main.c        **** 
 181:main.c        **** 
 182:main.c        **** 
 183:main.c        **** 
 184:main.c        **** static __inline__ \
 185:main.c        **** void loadRow(uint16_t rowNum) \
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 88


 186:main.c        **** 	__attribute__((__always_inline__));
 187:main.c        **** 
 188:main.c        **** 
 189:main.c        **** #include _LCDSTUFF_CFILE_
 190:main.c        **** //#include "../../../_commonCode/lcdStuff/0.50ncf/lcdStuff.c"
 191:main.c        **** 
 192:main.c        **** 
 193:main.c        **** 
 194:main.c        **** 
 195:main.c        **** //Nearly everything display-related happens in this interrupt
 196:main.c        **** // It even calls the functions that load (and calculate!) the data for the
 197:main.c        **** // next row.
 198:main.c        **** // So basically, the entire project is running via timer-interrupt.
 199:main.c        **** SIGNAL(TIMER0_COMPA_vect)
 200:main.c        **** {
 201:main.c        **** 	static uint8_t frameCount = 0;
 202:main.c        **** 
 203:main.c        **** 	//Could insert a delay of sorts for scopability...
 204:main.c        **** 	// (otherwise there's not much guarantee that register-assignments
 205:main.c        **** 	//  later will align with the LVDS frame... though ALIGN should help)
 206:main.c        **** 	// see scopeHsync.c
 207:main.c        **** 
 208:main.c        **** 
 209:main.c        **** 	if(updateLCD())
 210:main.c        **** 	{
 211:main.c        **** 		frameCount++;
 212:main.c        **** 		//updateLCD() returns TRUE when the frame is complete
 213:main.c        **** 		// which can be used for whatever purposes 
 214:main.c        **** 		// (e.g. FRAME_COUNT_TO_DELAY)
 215:main.c        **** 	}
 216:main.c        **** 
 217:main.c        **** #if(defined(LOADROW) && LOADROW)
 218:main.c        **** 	//Load the next row into the row(seg)buffer
 219:main.c        **** 	//data is enabled after T_VD+T_Vlow...
 220:main.c        **** 	//a/o v60: Rereading this is confusing...
 221:main.c        **** 	// Basically, there's no reason to call loadRow for display-lines
 222:main.c        **** 	// which don't display data (e.g. V-Sync)
 223:main.c        **** 	if((hsyncCount >= T_VD+T_Vlow) && (hsyncCount < T_VD+T_Vlow+V_COUNT))
 224:main.c        **** 		loadRow(hsyncCount - (T_VD+T_Vlow));
 225:main.c        **** #endif
 226:main.c        **** 	// a/o v60: This is a funny old note... I can't recall a time when
 227:main.c        **** 	// loadRow was written, then removed, then added again. Weird:
 228:main.c        **** 	// Here is where loadRow used to be called
 229:main.c        **** 	// it has been moved to oldNotes.txt, but it would make more sense
 230:main.c        **** 	// to look at LCDdirectLVDS <25 or LCDdirect
 231:main.c        **** 	// loadRow used the time between DE inactive and the next Hsync
 232:main.c        **** 	// to load a row to a row-buffer (as opposed to a frame-buffer)
 233:main.c        **** 	// thus, DE could gain more pixels because there would be fewer
 234:main.c        **** 	// calculations to determine the memory location to write from
 235:main.c        **** 	// This effect has since been minimized
 236:main.c        **** 	// BUT loadRow might be necessary for program-memory-based images...
 237:main.c        **** }
 238:main.c        **** 
 239:main.c        **** 
 240:main.c        **** 
 241:main.c        **** #if(defined(SEG_HFM) && SEG_HFM)
 242:main.c        **** 	#include "seg_hfm.c"
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 89


 243:main.c        **** #endif
 244:main.c        **** 
 245:main.c        **** #if(defined(SEG_QUESTION) && SEG_QUESTION)
 246:main.c        **** 	#include "seg_question.c"
 247:main.c        **** #endif
 248:main.c        **** 
 249:main.c        **** #if(defined(SEG_SINE) && SEG_SINE)
 250:main.c        **** 	#include "seg_sine.c"
 251:main.c        **** #endif
 252:main.c        **** 
 253:main.c        **** #if(defined(LOADROW) && LOADROW)
 254:main.c        **** // whatever this means... it's OLD.
 255:main.c        **** //#warning "loadRow is currently in an intermediate phase..."
 256:main.c        **** void loadRow(uint16_t rowNum)
 257:main.c        **** {
 258:main.c        **** 
 259:main.c        **** 
 260:main.c        **** #if(defined(ROW_SEG_BUFFER) && ROW_SEG_BUFFER)
 261:main.c        ****  #if (defined(SEG_RACER) && SEG_RACER)
 262:main.c        **** 	racer_loadRow(rowNum);
 263:main.c        ****  #elif (defined(SEG_HFM) && SEG_HFM)
 264:main.c        ****  	segHFM_loadRow(rowNum);
 265:main.c        ****  #elif (defined(SEG_QUESTION) && SEG_QUESTION)
 266:main.c        ****  	segQuestion_loadRow(rowNum);
 267:main.c        ****  #elif (defined(SEG_SINE) && SEG_SINE)
 268:main.c        ****  	segSine_loadRow(rowNum);
 269:main.c        ****  #elif (defined(SEG_LINE) && SEG_LINE)
 270:main.c        **** 	//Left here for an example...
 271:main.c        **** 	// Draws a diagonal line 
 272:main.c        **** 	//OLD NOTE:
 273:main.c        **** 	//syncing issues due to recursion overflowing the stack???
 274:main.c        **** 	// Apparently was
 275:main.c        **** 	   
 276:main.c        **** 	//Isn't BLAH = 1 necessary so we don't get a row with no data?
 277:main.c        **** 	// *looks* like it's working, but I dunno...
 278:main.c        **** 	#define BLAH 0
 279:main.c        **** 
 280:main.c        **** 	segClear();
 281:main.c        **** 	newSeg(3,0x06, (6<<4) | 3);									//W
 282:main.c        **** 	newSeg((rowNum&0xff) | BLAH, 0x06, (4<<4) | 0);				//R
 283:main.c        **** 	newSeg(1,0x06, (6<<4) | 3);									//W
 284:main.c        **** 	newSeg((255-(rowNum&0xff)) | BLAH, 0x06, (4<<4) | 0 );	//R
 285:main.c        **** 	newSeg(3,0x06, (6<<4) | 3);									//W
 286:main.c        **** 	segTerminate();
 287:main.c        **** 
 288:main.c        ****  #else //NOT SEG_LINE NOR SEG_SINE NOR ANY OTHERS...
 289:main.c        **** 	//This isn't particularly functional, anymore
 290:main.c        **** 	// it used to be an intermediate stage between rowBuffer and 
 291:main.c        **** 	//  rowSegBuffer... Left here for an example of how it could be done...
 292:main.c        ****   #if(!defined(SEG_STRETCH))
 293:main.c        **** 	#define SEG_STRETCH 1
 294:main.c        ****   #endif
 295:main.c        **** 
 296:main.c        **** 	segClear();
 297:main.c        **** 
 298:main.c        **** 	//Good for syncing to have white on both borders...
 299:main.c        **** 	newSeg(1, 0x06, (6<<4) | 3);
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 90


 300:main.c        **** 	
 301:main.c        **** 	uint16_t i;
 302:main.c        **** 	//i+1 because we don't want to overwrite the white border...
 303:main.c        **** 	for(i=0; i<RB_WIDTH; i++)
 304:main.c        **** 		rbpix_to_seg(rowBuffer[i], i+1, SEG_STRETCH);
 305:main.c        **** 	
 306:main.c        **** 	//white...
 307:main.c        **** 	newSeg(1, 0x06, (6<<4) | 3);
 308:main.c        **** 	segTerminate();
 309:main.c        ****  #endif //SEG_ selection
 310:main.c        **** #endif //ROW_SEG_BUFFER
 311:main.c        **** }
 312:main.c        **** #endif //LOAD_ROW
 313:main.c        **** 
 314:main.c        **** #include "timer0Stuff.c"
 315:main.c        **** 
 316:main.c        **** 
 317:main.c        **** 
 318:main.c        **** #if (defined(ROW_SEG_BUFFER) && ROW_SEG_BUFFER)
 319:main.c        **** void drawPix(uint8_t rowNum)
 320:main.c        **** {
 321:main.c        **** 	//Note that rowNum isn't really used here...
 322:main.c        **** 	// and it's only a uint8_t!
 323:main.c        **** 	rsb_drawPix(rowNum);
 1009               		.stabn	68,0,323,.LM117-.LFBB11
 1010               	.LM117:
 1011 02fc 8652      		subi r24,lo8(-(-38))
 1012 02fe 00D0      		rcall rsb_drawPix
 1013               	.L50:
 1014               	.LBE122:
 1015               	.LBE121:
 1016               	.LBE108:
 1017               	.LBE107:
 1018               		.stabs	"_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c",132,0,0,.Ltext17
 1019               	.Ltext17:
1190:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	hsyncCount++;
 1020               		.stabn	68,0,1190,.LM118-.LFBB11
 1021               	.LM118:
 1022 0300 8091 0000 		lds r24,hsyncCount
 1023 0304 9091 0000 		lds r25,(hsyncCount)+1
 1024 0308 0196      		adiw r24,1
 1025 030a 9093 0000 		sts (hsyncCount)+1,r25
 1026 030e 8093 0000 		sts hsyncCount,r24
1192:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 	switch(hsyncCount)
 1027               		.stabn	68,0,1192,.LM119-.LFBB11
 1028               	.LM119:
 1029 0312 8332      		cpi r24,35
 1030 0314 9105      		cpc r25,__zero_reg__
 1031 0316 01F0      		breq .L53
 1032 0318 8432      		cpi r24,36
 1033 031a 9105      		cpc r25,__zero_reg__
 1034 031c 00F4      		brsh .L56
 1035 031e 8330      		cpi r24,3
 1036 0320 9105      		cpc r25,__zero_reg__
 1037 0322 01F4      		brne .L60
 1038 0324 00C0      		rjmp .L63
 1039               	.L56:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 91


 1040 0326 8632      		cpi r24,38
 1041 0328 9105      		cpc r25,__zero_reg__
 1042 032a 01F0      		breq .L54
 1043 032c 23E0      		ldi r18,hi8(806)
 1044 032e 8632      		cpi r24,lo8(806)
 1045 0330 9207      		cpc r25,r18
 1046 0332 01F4      		brne .L60
 1047 0334 00C0      		rjmp .L64
 1048               	.L63:
1198:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			dataEnable = FALSE;
 1049               		.stabn	68,0,1198,.LM120-.LFBB11
 1050               	.LM120:
 1051 0336 1092 0000 		sts dataEnable,__zero_reg__
1200:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			vSync = TRUE;
 1052               		.stabn	68,0,1200,.LM121-.LFBB11
 1053               	.LM121:
 1054 033a 81E0      		ldi r24,lo8(1)
 1055 033c 8093 0000 		sts vSync,r24
1201:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			Vsync_fromNada();
 1056               		.stabn	68,0,1201,.LM122-.LFBB11
 1057               	.LM122:
 1058 0340 80E4      		ldi r24,lo8(64)
 1059 0342 84BD      		out 68-0x20,r24
 1060 0344 85E0      		ldi r24,lo8(5)
 1061 0346 00C0      		rjmp .L61
 1062               	.L53:
1210:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			vSync = FALSE;
 1063               		.stabn	68,0,1210,.LM123-.LFBB11
 1064               	.LM123:
 1065 0348 1092 0000 		sts vSync,__zero_reg__
1211:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			Nada_fromVsync();
 1066               		.stabn	68,0,1211,.LM124-.LFBB11
 1067               	.LM124:
 1068 034c 80E3      		ldi r24,lo8(48)
 1069 034e 84BD      		out 68-0x20,r24
 1070 0350 84E0      		ldi r24,lo8(4)
 1071               	.L61:
 1072 0352 8DBD      		out 77-0x20,r24
 1073 0354 00C0      		rjmp .L60
 1074               	.L54:
1215:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			dataEnable = TRUE;
 1075               		.stabn	68,0,1215,.LM125-.LFBB11
 1076               	.LM125:
 1077 0356 81E0      		ldi r24,lo8(1)
 1078 0358 8093 0000 		sts dataEnable,r24
 1079               	.L60:
 1080 035c 80E0      		ldi r24,lo8(0)
1216:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			break;
 1081               		.stabn	68,0,1216,.LM126-.LFBB11
 1082               	.LM126:
 1083 035e 0895      		ret
 1084               	.L64:
1220:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			dataEnable = FALSE;
 1085               		.stabn	68,0,1220,.LM127-.LFBB11
 1086               	.LM127:
 1087 0360 1092 0000 		sts dataEnable,__zero_reg__
1225:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** 			hsyncCount = 0;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 92


 1088               		.stabn	68,0,1225,.LM128-.LFBB11
 1089               	.LM128:
 1090 0364 1092 0000 		sts (hsyncCount)+1,__zero_reg__
 1091 0368 1092 0000 		sts hsyncCount,__zero_reg__
 1092 036c 81E0      		ldi r24,lo8(1)
1266:_commonCode_localized/lcdStuff/0.52ncf/lcdStuff.c **** }
 1093               		.stabn	68,0,1266,.LM129-.LFBB11
 1094               	.LM129:
 1095 036e 0895      		ret
 1096               		.size	updateLCD, .-updateLCD
 1097               		.stabs	"frameComplete:r(3,2)",64,0,1170,24
 1098               		.stabn	192,0,0,.LFBB11-.LFBB11
 1099               		.stabs	"__count:r(3,4)",64,0,36,30
 1100               		.stabn	192,0,0,.LBB111-.LFBB11
 1101               		.stabn	224,0,0,.LBE111-.LFBB11
 1102               		.stabs	"__count:r(3,4)",64,0,36,30
 1103               		.stabn	192,0,0,.LBB115-.LFBB11
 1104               		.stabn	224,0,0,.LBE115-.LFBB11
 1105               		.stabs	"__count:r(3,4)",64,0,36,30
 1106               		.stabn	192,0,0,.LBB119-.LFBB11
 1107               		.stabn	224,0,0,.LBE119-.LFBB11
 1108               		.stabn	224,0,0,.Lscope11-.LFBB11
 1109               	.Lscope11:
 1110               		.stabs	"",36,0,0,.Lscope11-.LFBB11
 1111               		.stabd	78,0,0
 1112               		.stabs	"init_timer0Hsync:F(0,15)",36,0,6,init_timer0Hsync
 1113               	.global	init_timer0Hsync
 1114               		.type	init_timer0Hsync, @function
 1115               	init_timer0Hsync:
 1116               		.stabd	46,0,0
 1117               		.stabs	"timer0Stuff.c",132,0,0,.Ltext18
 1118               	.Ltext18:
   1:timer0Stuff.c **** #include "timer0Stuff.h"
   2:timer0Stuff.c **** 
   3:timer0Stuff.c **** //Testing with values returned by timer0Calculator
   4:timer0Stuff.c **** //#define TIMER0_OCRVAL	65
   5:timer0Stuff.c **** 
   6:timer0Stuff.c **** void init_timer0Hsync(void)
   7:timer0Stuff.c **** {
 1119               		.stabn	68,0,7,.LM130-.LFBB12
 1120               	.LM130:
 1121               	.LFBB12:
 1122               	/* prologue: function */
 1123               	/* frame size = 0 */
   8:timer0Stuff.c ****    OCR0A = TIMER0_OCRVAL; //T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC;
 1124               		.stabn	68,0,8,.LM131-.LFBB12
 1125               	.LM131:
 1126 0370 8CEB      		ldi r24,lo8(-68)
 1127 0372 83BB      		out 51-0x20,r24
   9:timer0Stuff.c ****    timer_setWGM(0, WGM_CLR_ON_COMPARE);
 1128               		.stabn	68,0,9,.LM132-.LFBB12
 1129               	.LM132:
 1130 0374 80E0      		ldi r24,lo8(0)
 1131 0376 62E0      		ldi r22,lo8(2)
 1132 0378 00D0      		rcall timer_setWGM
  10:timer0Stuff.c ****    timer_selectDivisor(0, TIMER0_CLKDIV); //CLKDIV1);
 1133               		.stabn	68,0,10,.LM133-.LFBB12
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 93


 1134               	.LM133:
 1135 037a 80E0      		ldi r24,lo8(0)
 1136 037c 68E0      		ldi r22,lo8(8)
 1137 037e 00D0      		rcall timer_selectDivisor
  11:timer0Stuff.c ****    timer_compareMatchIntEnable(0, OUT_CHANNELA);
 1138               		.stabn	68,0,11,.LM134-.LFBB12
 1139               	.LM134:
 1140 0380 80E0      		ldi r24,lo8(0)
 1141 0382 60E0      		ldi r22,lo8(0)
 1142 0384 41E0      		ldi r20,lo8(1)
 1143 0386 00D0      		rcall timer_compareMatchIntSetup
 1144               	/* epilogue start */
  12:timer0Stuff.c **** }
 1145               		.stabn	68,0,12,.LM135-.LFBB12
 1146               	.LM135:
 1147 0388 0895      		ret
 1148               		.size	init_timer0Hsync, .-init_timer0Hsync
 1149               	.Lscope12:
 1150               		.stabs	"",36,0,0,.Lscope12-.LFBB12
 1151               		.stabd	78,0,0
 1152               		.stabs	"main:F(0,1)",36,0,337,main
 1153               	.global	main
 1154               		.type	main, @function
 1155               	main:
 1156               		.stabd	46,0,0
 1157               		.stabs	"main.c",132,0,0,.Ltext19
 1158               	.Ltext19:
 324:main.c        **** }
 325:main.c        **** #else
 326:main.c        **** #include "nonRSB_drawPix.c"
 327:main.c        **** void drawPix(uint8_t rowNum)
 328:main.c        **** {
 329:main.c        **** 	//This hasn't been used in quite some time... 
 330:main.c        **** 	// it may not work at all anymore.
 331:main.c        **** 	nonRSB_drawPix();
 332:main.c        **** }
 333:main.c        **** #endif
 334:main.c        **** 
 335:main.c        **** 
 336:main.c        **** 
 337:main.c        **** int main(void)
 338:main.c        **** {
 1159               		.stabn	68,0,338,.LM136-.LFBB13
 1160               	.LM136:
 1161               	.LFBB13:
 1162               	/* prologue: function */
 1163               	/* frame size = 0 */
 339:main.c        **** 
 340:main.c        **** #if(defined(SEG_RACER) && SEG_RACER)
 341:main.c        **** 	racer_init();
 342:main.c        **** #endif
 343:main.c        **** 
 344:main.c        **** 	init_timer0Hsync();
 1164               		.stabn	68,0,344,.LM137-.LFBB13
 1165               	.LM137:
 1166 038a 00D0      		rcall init_timer0Hsync
 345:main.c        **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 94


 346:main.c        **** 	//This starts pretty late... watch out for WDT
 347:main.c        **** 	init_heartBeat();
 348:main.c        **** 
 349:main.c        **** 	setHeartRate(0);
 350:main.c        **** 
 351:main.c        **** 	lvds_timerInit();
 1167               		.stabn	68,0,351,.LM138-.LFBB13
 1168               	.LM138:
 1169 038c 00D0      		rcall lvds_timerInit
 1170               	.L68:
 1171 038e 00C0      		rjmp .L68
 1172               		.size	main, .-main
 1173               	.Lscope13:
 1174               		.stabs	"",36,0,0,.Lscope13-.LFBB13
 1175               		.stabd	78,0,0
 1176               		.stabs	"segSine_loadRow:F(0,15)",36,0,2,segSine_loadRow
 1177               		.stabs	"rowNum:P(3,4)",64,0,2,14
 1178               	.global	segSine_loadRow
 1179               		.type	segSine_loadRow, @function
 1180               	segSine_loadRow:
 1181               		.stabd	46,0,0
 1182               		.stabs	"seg_sine.c",132,0,0,.Ltext20
 1183               	.Ltext20:
   1:seg_sine.c    **** 
   2:seg_sine.c    **** void segSine_loadRow(uint16_t rowNum) 
   3:seg_sine.c    **** {
 1184               		.stabn	68,0,3,.LM139-.LFBB14
 1185               	.LM139:
 1186               	.LFBB14:
 1187 0390 9F92      		push r9
 1188 0392 AF92      		push r10
 1189 0394 BF92      		push r11
 1190 0396 CF92      		push r12
 1191 0398 DF92      		push r13
 1192 039a EF92      		push r14
 1193 039c FF92      		push r15
 1194 039e 0F93      		push r16
 1195 03a0 1F93      		push r17
 1196 03a2 DF93      		push r29
 1197 03a4 CF93      		push r28
 1198 03a6 0F92      		push __tmp_reg__
 1199 03a8 CDB7      		in r28,__SP_L__
 1200 03aa DEB7      		in r29,__SP_H__
 1201               	/* prologue: function */
 1202               	/* frame size = 1 */
 1203 03ac 7C01      		movw r14,r24
   4:seg_sine.c    ****    static uint16_t lastThetaOffset = 0;
   5:seg_sine.c    ****    static uint8_t frameCount = 0;
   6:seg_sine.c    **** 
   7:seg_sine.c    ****    if(rowNum == 0)
 1204               		.stabn	68,0,7,.LM140-.LFBB14
 1205               	.LM140:
 1206 03ae 0097      		sbiw r24,0
 1207 03b0 01F4      		brne .L71
   8:seg_sine.c    ****    {
   9:seg_sine.c    ****       lastThetaOffset+=16;
 1208               		.stabn	68,0,9,.LM141-.LFBB14
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 95


 1209               	.LM141:
 1210 03b2 8091 0000 		lds r24,lastThetaOffset.1803
 1211 03b6 9091 0000 		lds r25,(lastThetaOffset.1803)+1
 1212 03ba 4096      		adiw r24,16
 1213 03bc 9093 0000 		sts (lastThetaOffset.1803)+1,r25
 1214 03c0 8093 0000 		sts lastThetaOffset.1803,r24
  10:seg_sine.c    ****       frameCount++;
 1215               		.stabn	68,0,10,.LM142-.LFBB14
 1216               	.LM142:
 1217 03c4 8091 0000 		lds r24,frameCount.1804
 1218 03c8 8F5F      		subi r24,lo8(-(1))
 1219 03ca 8093 0000 		sts frameCount.1804,r24
 1220               	.L71:
 1221               	.LBB123:
 1222               	.LBB124:
 1223               		.stabs	"rowSegBuffer.c",132,0,0,.Ltext21
 1224               	.Ltext21:
  49:rowSegBuffer.c **** 	segPosition = 0;
 1225               		.stabn	68,0,49,.LM143-.LFBB14
 1226               	.LM143:
 1227 03ce 1092 0000 		sts segPosition,__zero_reg__
  52:rowSegBuffer.c **** 	rowSegBuffer[segPosition].red_length = 6;
 1228               		.stabn	68,0,52,.LM144-.LFBB14
 1229               	.LM144:
 1230 03d2 86E0      		ldi r24,lo8(6)
 1231 03d4 8093 0000 		sts rowSegBuffer,r24
  53:rowSegBuffer.c **** 	rowSegBuffer[segPosition].green_blue = (6<<4) | 3;
 1232               		.stabn	68,0,53,.LM145-.LFBB14
 1233               	.LM145:
 1234 03d8 83E6      		ldi r24,lo8(99)
 1235 03da 8093 0000 		sts rowSegBuffer+1,r24
 1236               	.LBE124:
 1237               	.LBE123:
 1238               		.stabs	"seg_sine.c",132,0,0,.Ltext22
 1239               	.Ltext22:
  11:seg_sine.c    ****    }
  12:seg_sine.c    ****    //pgm_read_sine(sineTable[theta])
  13:seg_sine.c    **** 
  14:seg_sine.c    ****    segClear();
  15:seg_sine.c    ****    //addSegfb(3,0x06, (6<<4) | 3);
  16:seg_sine.c    **** //a/o v59-12ish addition of PLL_SYSCLK:
  17:seg_sine.c    **** //Having a white border at the left-edge of the screen has been known to
  18:seg_sine.c    **** // help syncing...
  19:seg_sine.c    **** // Though it doesn't seem to be fixing the current problem.
  20:seg_sine.c    **** // The problem is: Some rows are displaying long white-bars about half
  21:seg_sine.c    **** //  of the displayed-area (~1/4 of the screen)
  22:seg_sine.c    **** // I think I've seen this before.
  23:seg_sine.c    **** #if(defined(PLL_SYSCLK) && PLL_SYSCLK)
  24:seg_sine.c    ****    //This doesn't seem to matter...
  25:seg_sine.c    ****    addSegfb(12, _W);
  26:seg_sine.c    **** #else
  27:seg_sine.c    ****    addSegfb(3, _W);
 1240               		.stabn	68,0,27,.LM146-.LFBB14
 1241               	.LM146:
 1242 03de 83E0      		ldi r24,lo8(3)
 1243 03e0 90E0      		ldi r25,hi8(3)
 1244 03e2 67E0      		ldi r22,lo8(7)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 96


 1245 03e4 43E7      		ldi r20,lo8(115)
 1246 03e6 00D0      		rcall addSeg
  28:seg_sine.c    **** #endif
  29:seg_sine.c    **** 
  30:seg_sine.c    ****    uint8_t sineVal = (uint8_t)((int8_t)128 + 
 1247               		.stabn	68,0,30,.LM147-.LFBB14
 1248               	.LM147:
 1249 03e8 8091 0000 		lds r24,lastThetaOffset.1803
 1250 03ec 9091 0000 		lds r25,(lastThetaOffset.1803)+1
 1251 03f0 8E0D      		add r24,r14
 1252 03f2 9F1D      		adc r25,r15
 1253 03f4 00D0      		rcall sineRaw8
  31:seg_sine.c    ****          sineRaw8(rowNum+lastThetaOffset));
 1254               		.stabn	68,0,31,.LM148-.LFBB14
 1255               	.LM148:
 1256 03f6 182F      		mov r17,r24
 1257 03f8 1058      		subi r17,lo8(-(-128))
  32:seg_sine.c    **** 
  33:seg_sine.c    ****    uint8_t nextSineVal = (uint8_t)((int8_t)128 +
 1258               		.stabn	68,0,33,.LM149-.LFBB14
 1259               	.LM149:
 1260 03fa 8091 0000 		lds r24,lastThetaOffset.1803
 1261 03fe 9091 0000 		lds r25,(lastThetaOffset.1803)+1
 1262 0402 0196      		adiw r24,1
 1263 0404 8E0D      		add r24,r14
 1264 0406 9F1D      		adc r25,r15
 1265 0408 00D0      		rcall sineRaw8
  34:seg_sine.c    ****          sineRaw8(rowNum+1+lastThetaOffset));
 1266               		.stabn	68,0,34,.LM150-.LFBB14
 1267               	.LM150:
 1268 040a 082F      		mov r16,r24
 1269 040c 0058      		subi r16,lo8(-(-128))
  35:seg_sine.c    **** 
  36:seg_sine.c    **** 	//WEIRD. gcc only started complaining about its being used uninitialized
  37:seg_sine.c    **** 	// a/o v60... I've been using it for ages!
  38:seg_sine.c    ****    //uint8_t length; 
  39:seg_sine.c    **** 	uint8_t length = 1;
  40:seg_sine.c    **** 
  41:seg_sine.c    ****    //If the step-size is greater than one pixel, we'll see hashing
  42:seg_sine.c    ****    // this should fix that.
  43:seg_sine.c    ****    if(nextSineVal < sineVal)
 1270               		.stabn	68,0,43,.LM151-.LFBB14
 1271               	.LM151:
 1272 040e 0117      		cp r16,r17
 1273 0410 00F4      		brsh .L72
  44:seg_sine.c    ****    {
  45:seg_sine.c    ****       length = (sineVal - nextSineVal);
 1274               		.stabn	68,0,45,.LM152-.LFBB14
 1275               	.LM152:
 1276 0412 212F      		mov r18,r17
 1277 0414 201B      		sub r18,r16
 1278 0416 022F      		mov r16,r18
  46:seg_sine.c    ****       //This assures that the additional length of the white-segment
  47:seg_sine.c    ****       // goes in the proper direction...
  48:seg_sine.c    ****       sineVal-=length;//*4;
 1279               		.stabn	68,0,48,.LM153-.LFBB14
 1280               	.LM153:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 97


 1281 0418 121B      		sub r17,r18
 1282 041a 00C0      		rjmp .L73
 1283               	.L72:
  49:seg_sine.c    ****    }
  50:seg_sine.c    ****    else if(nextSineVal > sineVal)
 1284               		.stabn	68,0,50,.LM154-.LFBB14
 1285               	.LM154:
 1286 041c 1017      		cp r17,r16
 1287 041e 00F0      		brlo .L74
 1288 0420 01E0      		ldi r16,lo8(1)
 1289 0422 00C0      		rjmp .L73
 1290               	.L74:
  51:seg_sine.c    ****       length = (nextSineVal - sineVal);
 1291               		.stabn	68,0,51,.LM155-.LFBB14
 1292               	.LM155:
 1293 0424 011B      		sub r16,r17
 1294               	.L73:
  52:seg_sine.c    ****    
  53:seg_sine.c    **** 	//This should be redundant a/o initializing...	
  54:seg_sine.c    ****    //But we don't want zero-length white segments (where the sine values
  55:seg_sine.c    ****    // are horizontal)
  56:seg_sine.c    ****    //if(length == 0)
  57:seg_sine.c    ****    //  length = 1;
  58:seg_sine.c    **** 
  59:seg_sine.c    ****    uint8_t rgbVal=0;
  60:seg_sine.c    ****    uint8_t J=0;
  61:seg_sine.c    ****    uint8_t j = frameCount;
 1295               		.stabn	68,0,61,.LM156-.LFBB14
 1296               	.LM156:
 1297 0426 9090 0000 		lds r9,frameCount.1804
 1298 042a E0E0      		ldi r30,lo8(0)
 1299               	.LBB125:
 1300               	.LBB126:
 1301               		.stabs	"fbColors.h",132,0,0,.Ltext23
 1302               	.Ltext23:
   1:fbColors.h    **** // 7 6 5 4 3 2 1 0
   2:fbColors.h    **** // a a b b g g r r
   3:fbColors.h    **** //             0 0 = 0x00
   4:fbColors.h    **** //             0 1 = 0x01
   5:fbColors.h    **** //             1 0 = 0x02
   6:fbColors.h    **** //             1 1 = 0x03
   7:fbColors.h    **** //         0 0     = 0x00
   8:fbColors.h    **** //         0 1     = 0x04
   9:fbColors.h    **** //         1 0     = 0x08
  10:fbColors.h    **** //         1 1     = 0x0C
  11:fbColors.h    **** //     0 0         = 0x00
  12:fbColors.h    **** //     0 1         = 0x10
  13:fbColors.h    **** //     1 0         = 0x20
  14:fbColors.h    **** //     1 1         = 0x30
  15:fbColors.h    **** 
  16:fbColors.h    **** 
  17:fbColors.h    **** //Takes three values, from 0-3 each...
  18:fbColors.h    **** #define rgb(r,g,b) (((r)&0x03) | (((g)&0x03)<<2) | (((b)&0x03)<<4))
  19:fbColors.h    **** 
  20:fbColors.h    **** 
  21:fbColors.h    **** #define _R  0x03	//0x03						00 00 11
  22:fbColors.h    **** #define _O  0x07	//0x03 | 0x10				00 01 11
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 98


  23:fbColors.h    **** #define _Y  0x0F  //0x03 | 0x0C           00 11 11
  24:fbColors.h    **** #define _G 0x0C	//       0x0C				00 11 00
  25:fbColors.h    **** #define _C 0x3C   //       0x0C | 0x30    11 11 00
  26:fbColors.h    **** #define _B 0x30	//              0x30		11 00 00
  27:fbColors.h    **** #define _V 0x13   //0x03 |        0x10		01 00 11
  28:fbColors.h    **** #define _M  0x33	//0x03 |			 0x30		11 00 11
  29:fbColors.h    **** #define _K  0x00	//								00 00 00
  30:fbColors.h    **** #define _W 0x3F	//0x03 | 0x0C | 0x30		11 11 11
  31:fbColors.h    **** #define _r 0x01	//0x01						00 00 01
  32:fbColors.h    **** #define _g 0x04	//			0x04				00 01 00
  33:fbColors.h    **** #define _b 0x10	//					 0x10		01 00 00
  34:fbColors.h    **** #define _c 0x14	//			0x04	 0x10		01 01 00
  35:fbColors.h    **** #define _m 0x11	//0x01 |			 0x10		01 00 01
  36:fbColors.h    **** #define _y 0x05	//0x01 | 0x04				00 01 01
  37:fbColors.h    **** #define _k 0x15	//0x01 | 0x04 | 0x10		01 01 01
  38:fbColors.h    **** #define Tr 0xC0   //Transparent
  39:fbColors.h    **** 
  40:fbColors.h    **** 
  41:fbColors.h    **** //Creates a "gradient" effect, where no color-change is greater than 1
  42:fbColors.h    **** // for each change in value
  43:fbColors.h    **** // except at the crossover from full-blue back to 0... (0x30)
  44:fbColors.h    **** static __inline__ \
  45:fbColors.h    **** uint8_t rgbGradient(uint8_t value) \
  46:fbColors.h    **** 	__attribute__((__always_inline__));
  47:fbColors.h    **** 
  48:fbColors.h    **** uint8_t rgbGradient(uint8_t value)
  49:fbColors.h    **** {
  50:fbColors.h    **** 	while(value > 0x2f)
  51:fbColors.h    **** 		value -= 0x30;
  52:fbColors.h    **** 
  53:fbColors.h    **** 	uint8_t R = ((value)&0x03); 
  54:fbColors.h    **** 	uint8_t r = ((value)&0x04) ? (3-R) : R ; 
 1303               		.stabn	68,0,54,.LM157-.LFBB14
 1304               	.LM157:
 1305 042c 63E0      		ldi r22,lo8(3)
 1306 042e D62E      		mov r13,r22
 1307               	.LBE126:
 1308               	.LBE125:
 1309               		.stabs	"seg_sine.c",132,0,0,.Ltext24
 1310               	.Ltext24:
  62:seg_sine.c    **** 
  63:seg_sine.c    **** #define WIDTH 5//3//4
  64:seg_sine.c    ****    while(1)
  65:seg_sine.c    ****    {
  66:seg_sine.c    ****       J++;
  67:seg_sine.c    ****       j++; // = J+frameCount;
  68:seg_sine.c    ****       
  69:seg_sine.c    ****       rgbVal = rgbGradient(j);
  70:seg_sine.c    **** 
  71:seg_sine.c    ****       if((uint16_t)J*(uint16_t)WIDTH>=sineVal)
 1311               		.stabn	68,0,71,.LM158-.LFBB14
 1312               	.LM158:
 1313 0430 A12E      		mov r10,r17
 1314 0432 BB24      		clr r11
 1315               	.L81:
  66:seg_sine.c    ****       J++;
 1316               		.stabn	68,0,66,.LM159-.LFBB14
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 99


 1317               	.LM159:
 1318 0434 CE2E      		mov r12,r30
 1319 0436 C394      		inc r12
 1320 0438 6C2D      		mov r22,r12
 1321 043a 690D      		add r22,r9
 1322 043c 00C0      		rjmp .L75
 1323               	.L76:
 1324               	.LBB128:
 1325               	.LBB127:
 1326               		.stabs	"fbColors.h",132,0,0,.Ltext25
 1327               	.Ltext25:
  51:fbColors.h    **** 		value -= 0x30;
 1328               		.stabn	68,0,51,.LM160-.LFBB14
 1329               	.LM160:
 1330 043e 6053      		subi r22,lo8(-(-48))
 1331               	.L75:
  50:fbColors.h    **** 	while(value > 0x2f)
 1332               		.stabn	68,0,50,.LM161-.LFBB14
 1333               	.LM161:
 1334 0440 6033      		cpi r22,lo8(48)
 1335 0442 00F4      		brsh .L76
  53:fbColors.h    **** 	uint8_t R = ((value)&0x03); 
 1336               		.stabn	68,0,53,.LM162-.LFBB14
 1337               	.LM162:
 1338 0444 462F      		mov r20,r22
 1339 0446 4370      		andi r20,lo8(3)
 1340               		.stabn	68,0,54,.LM163-.LFBB14
 1341               	.LM163:
 1342 0448 70E0      		ldi r23,lo8(0)
 1343 044a 62FF      		sbrs r22,2
 1344 044c 00C0      		rjmp .L77
 1345 044e 3D2D      		mov r19,r13
 1346 0450 341B      		sub r19,r20
 1347 0452 432F      		mov r20,r19
 1348               	.L77:
  55:fbColors.h    **** 	uint8_t G = ((value)&0x0C)>>2; 
 1349               		.stabn	68,0,55,.LM164-.LFBB14
 1350               	.LM164:
 1351 0454 9B01      		movw r18,r22
 1352 0456 2C70      		andi r18,lo8(12)
 1353 0458 3070      		andi r19,hi8(12)
 1354 045a 3595      		asr r19
 1355 045c 2795      		ror r18
 1356 045e 3595      		asr r19
 1357 0460 2795      		ror r18
  56:fbColors.h    **** 	uint8_t g = ((value)&0x10) ? (3-G) : G ; 
 1358               		.stabn	68,0,56,.LM165-.LFBB14
 1359               	.LM165:
 1360 0462 64FF      		sbrs r22,4
 1361 0464 00C0      		rjmp .L78
 1362 0466 8D2D      		mov r24,r13
 1363 0468 821B      		sub r24,r18
 1364 046a 282F      		mov r18,r24
 1365               	.L78:
  57:fbColors.h    **** 	uint8_t B = ((value)&0x30) >> 4; 
 1366               		.stabn	68,0,57,.LM166-.LFBB14
 1367               	.LM166:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 100


 1368 046c CB01      		movw r24,r22
 1369 046e 8073      		andi r24,lo8(48)
 1370 0470 9070      		andi r25,hi8(48)
 1371 0472 34E0      		ldi r19,4
 1372 0474 9595      	1:	asr r25
 1373 0476 8795      		ror r24
 1374 0478 3A95      		dec r19
 1375 047a 01F4      		brne 1b
  58:fbColors.h    **** 	uint8_t b = ((value)&0x40) ? (3-B) : B ;
 1376               		.stabn	68,0,58,.LM167-.LFBB14
 1377               	.LM167:
 1378 047c 66FF      		sbrs r22,6
 1379 047e 00C0      		rjmp .L79
 1380 0480 9D2D      		mov r25,r13
 1381 0482 981B      		sub r25,r24
 1382 0484 892F      		mov r24,r25
 1383               	.L79:
  59:fbColors.h    **** 
  60:fbColors.h    **** 	return rgb(r,g,b);
 1384               		.stabn	68,0,60,.LM168-.LFBB14
 1385               	.LM168:
 1386 0486 30E0      		ldi r19,lo8(0)
 1387 0488 2370      		andi r18,lo8(3)
 1388 048a 3070      		andi r19,hi8(3)
 1389 048c 220F      		lsl r18
 1390 048e 331F      		rol r19
 1391 0490 220F      		lsl r18
 1392 0492 331F      		rol r19
 1393 0494 4370      		andi r20,lo8(3)
 1394 0496 422B      		or r20,r18
 1395 0498 90E0      		ldi r25,lo8(0)
 1396 049a 8370      		andi r24,lo8(3)
 1397 049c 9070      		andi r25,hi8(3)
 1398 049e B4E0      		ldi r27,4
 1399 04a0 880F      	1:	lsl r24
 1400 04a2 991F      		rol r25
 1401 04a4 BA95      		dec r27
 1402 04a6 01F4      		brne 1b
 1403 04a8 482B      		or r20,r24
 1404               	.LBE127:
 1405               	.LBE128:
 1406               		.stabs	"seg_sine.c",132,0,0,.Ltext26
 1407               	.Ltext26:
 1408               		.stabn	68,0,71,.LM169-.LFBB14
 1409               	.LM169:
 1410 04aa 8C2D      		mov r24,r12
 1411 04ac 90E0      		ldi r25,lo8(0)
 1412 04ae 65E0      		ldi r22,lo8(5)
 1413 04b0 70E0      		ldi r23,hi8(5)
 1414 04b2 00D0      		rcall __mulhi3
 1415 04b4 242F      		mov r18,r20
 1416 04b6 30E0      		ldi r19,lo8(0)
 1417 04b8 F42F      		mov r31,r20
 1418 04ba F170      		andi r31,lo8(1)
 1419 04bc 4073      		andi r20,lo8(48)
 1420 04be 8A15      		cp r24,r10
 1421 04c0 9B05      		cpc r25,r11
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 101


 1422 04c2 00F4      		brsh .L80
  72:seg_sine.c    ****          break;
  73:seg_sine.c    **** 
  74:seg_sine.c    ****       addSegfb(WIDTH, rgbVal);
 1423               		.stabn	68,0,74,.LM170-.LFBB14
 1424               	.LM170:
 1425 04c4 B901      		movw r22,r18
 1426 04c6 6370      		andi r22,lo8(3)
 1427 04c8 7070      		andi r23,hi8(3)
 1428 04ca 660F      		lsl r22
 1429 04cc 771F      		rol r23
 1430 04ce 6F2B      		or r22,r31
 1431 04d0 4064      		ori r20,lo8(64)
 1432 04d2 2C70      		andi r18,lo8(12)
 1433 04d4 3070      		andi r19,hi8(12)
 1434 04d6 3595      		asr r19
 1435 04d8 2795      		ror r18
 1436 04da 3595      		asr r19
 1437 04dc 2795      		ror r18
 1438 04de 422B      		or r20,r18
 1439 04e0 85E0      		ldi r24,lo8(5)
 1440 04e2 90E0      		ldi r25,hi8(5)
 1441 04e4 00D0      		rcall addSeg
 1442 04e6 EC2D      		mov r30,r12
  75:seg_sine.c    ****    }
 1443               		.stabn	68,0,75,.LM171-.LFBB14
 1444               	.LM171:
 1445 04e8 00C0      		rjmp .L81
 1446               	.L80:
  76:seg_sine.c    **** 
  77:seg_sine.c    ****    J--;
  78:seg_sine.c    **** 
  79:seg_sine.c    ****    addSegfb(sineVal-(uint16_t)J*(uint16_t)WIDTH, rgbVal); 
 1447               		.stabn	68,0,79,.LM172-.LFBB14
 1448               	.LM172:
 1449 04ea 8E2F      		mov r24,r30
 1450 04ec 90E0      		ldi r25,lo8(0)
 1451 04ee 65E0      		ldi r22,lo8(5)
 1452 04f0 70E0      		ldi r23,hi8(5)
 1453 04f2 00D0      		rcall __mulhi3
 1454 04f4 B901      		movw r22,r18
 1455 04f6 6370      		andi r22,lo8(3)
 1456 04f8 7070      		andi r23,hi8(3)
 1457 04fa 660F      		lsl r22
 1458 04fc 771F      		rol r23
 1459 04fe 6F2B      		or r22,r31
 1460 0500 4064      		ori r20,lo8(64)
 1461 0502 2C70      		andi r18,lo8(12)
 1462 0504 3070      		andi r19,hi8(12)
 1463 0506 3595      		asr r19
 1464 0508 2795      		ror r18
 1465 050a 3595      		asr r19
 1466 050c 2795      		ror r18
 1467 050e 422B      		or r20,r18
 1468 0510 9501      		movw r18,r10
 1469 0512 281B      		sub r18,r24
 1470 0514 390B      		sbc r19,r25
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 102


 1471 0516 C901      		movw r24,r18
 1472 0518 00D0      		rcall addSeg
  80:seg_sine.c    **** 
  81:seg_sine.c    ****    addSegfb(length, _W); 
 1473               		.stabn	68,0,81,.LM173-.LFBB14
 1474               	.LM173:
 1475 051a 802F      		mov r24,r16
 1476 051c 90E0      		ldi r25,lo8(0)
 1477 051e 67E0      		ldi r22,lo8(7)
 1478 0520 43E7      		ldi r20,lo8(115)
 1479 0522 00D0      		rcall addSeg
  82:seg_sine.c    ****    addSegfb(257-sineVal-length, rgbGradient(rowNum/8)); //rowNum/8);
 1480               		.stabn	68,0,82,.LM174-.LFBB14
 1481               	.LM174:
 1482 0524 6701      		movw r12,r14
 1483 0526 B3E0      		ldi r27,3
 1484 0528 D694      	1:	lsr r13
 1485 052a C794      		ror r12
 1486 052c BA95      		dec r27
 1487 052e 01F4      		brne 1b
 1488 0530 8C2D      		mov r24,r12
 1489 0532 9C2D      		mov r25,r12
 1490 0534 00C0      		rjmp .L82
 1491               	.L83:
 1492               	.LBB129:
 1493               	.LBB130:
 1494               		.stabs	"fbColors.h",132,0,0,.Ltext27
 1495               	.Ltext27:
  51:fbColors.h    **** 		value -= 0x30;
 1496               		.stabn	68,0,51,.LM175-.LFBB14
 1497               	.LM175:
 1498 0536 9053      		subi r25,lo8(-(-48))
 1499               	.L82:
  50:fbColors.h    **** 	while(value > 0x2f)
 1500               		.stabn	68,0,50,.LM176-.LFBB14
 1501               	.LM176:
 1502 0538 9033      		cpi r25,lo8(48)
 1503 053a 00F4      		brsh .L83
  53:fbColors.h    **** 	uint8_t R = ((value)&0x03); 
 1504               		.stabn	68,0,53,.LM177-.LFBB14
 1505               	.LM177:
 1506 053c 692F      		mov r22,r25
 1507 053e 6370      		andi r22,lo8(3)
  54:fbColors.h    **** 	uint8_t r = ((value)&0x04) ? (3-R) : R ; 
 1508               		.stabn	68,0,54,.LM178-.LFBB14
 1509               	.LM178:
 1510 0540 92FF      		sbrs r25,2
 1511 0542 00C0      		rjmp .L84
 1512 0544 23E0      		ldi r18,lo8(3)
 1513 0546 261B      		sub r18,r22
 1514 0548 622F      		mov r22,r18
 1515               	.L84:
  58:fbColors.h    **** 	uint8_t b = ((value)&0x40) ? (3-B) : B ;
 1516               		.stabn	68,0,58,.LM179-.LFBB14
 1517               	.LM179:
 1518 054a 982F      		mov r25,r24
 1519 054c 00C0      		rjmp .L87
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 103


 1520               	.L88:
 1521               	.LBE130:
 1522               	.LBE129:
 1523               	.LBB131:
 1524               	.LBB132:
  51:fbColors.h    **** 		value -= 0x30;
 1525               		.stabn	68,0,51,.LM180-.LFBB14
 1526               	.LM180:
 1527 054e 9053      		subi r25,lo8(-(-48))
 1528               	.L87:
  50:fbColors.h    **** 	while(value > 0x2f)
 1529               		.stabn	68,0,50,.LM181-.LFBB14
 1530               	.LM181:
 1531 0550 9033      		cpi r25,lo8(48)
 1532 0552 00F4      		brsh .L88
  53:fbColors.h    **** 	uint8_t R = ((value)&0x03); 
 1533               		.stabn	68,0,53,.LM182-.LFBB14
 1534               	.LM182:
 1535 0554 792F      		mov r23,r25
 1536 0556 7370      		andi r23,lo8(3)
  54:fbColors.h    **** 	uint8_t r = ((value)&0x04) ? (3-R) : R ; 
 1537               		.stabn	68,0,54,.LM183-.LFBB14
 1538               	.LM183:
 1539 0558 92FF      		sbrs r25,2
 1540 055a 00C0      		rjmp .L89
 1541 055c 23E0      		ldi r18,lo8(3)
 1542 055e 271B      		sub r18,r23
 1543 0560 722F      		mov r23,r18
 1544               	.L89:
  58:fbColors.h    **** 	uint8_t b = ((value)&0x40) ? (3-B) : B ;
 1545               		.stabn	68,0,58,.LM184-.LFBB14
 1546               	.LM184:
 1547 0562 282F      		mov r18,r24
 1548 0564 00C0      		rjmp .L92
 1549               	.L93:
 1550               	.LBE132:
 1551               	.LBE131:
 1552               	.LBB133:
 1553               	.LBB134:
  51:fbColors.h    **** 		value -= 0x30;
 1554               		.stabn	68,0,51,.LM185-.LFBB14
 1555               	.LM185:
 1556 0566 2053      		subi r18,lo8(-(-48))
 1557               	.L92:
  50:fbColors.h    **** 	while(value > 0x2f)
 1558               		.stabn	68,0,50,.LM186-.LFBB14
 1559               	.LM186:
 1560 0568 2033      		cpi r18,lo8(48)
 1561 056a 00F4      		brsh .L93
  54:fbColors.h    **** 	uint8_t r = ((value)&0x04) ? (3-R) : R ; 
 1562               		.stabn	68,0,54,.LM187-.LFBB14
 1563               	.LM187:
 1564 056c 30E0      		ldi r19,lo8(0)
  57:fbColors.h    **** 	uint8_t B = ((value)&0x30) >> 4; 
 1565               		.stabn	68,0,57,.LM188-.LFBB14
 1566               	.LM188:
 1567 056e A901      		movw r20,r18
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 104


 1568 0570 4073      		andi r20,lo8(48)
 1569 0572 5070      		andi r21,hi8(48)
 1570 0574 A4E0      		ldi r26,4
 1571 0576 5595      	1:	asr r21
 1572 0578 4795      		ror r20
 1573 057a AA95      		dec r26
 1574 057c 01F4      		brne 1b
 1575 057e 542F      		mov r21,r20
  58:fbColors.h    **** 	uint8_t b = ((value)&0x40) ? (3-B) : B ;
 1576               		.stabn	68,0,58,.LM189-.LFBB14
 1577               	.LM189:
 1578 0580 26FF      		sbrs r18,6
 1579 0582 00C0      		rjmp .L114
 1580 0584 93E0      		ldi r25,lo8(3)
 1581 0586 941B      		sub r25,r20
 1582 0588 592F      		mov r21,r25
 1583 058a 00C0      		rjmp .L114
 1584               	.L97:
 1585               	.LBE134:
 1586               	.LBE133:
 1587               	.LBB135:
 1588               	.LBB136:
  51:fbColors.h    **** 		value -= 0x30;
 1589               		.stabn	68,0,51,.LM190-.LFBB14
 1590               	.LM190:
 1591 058c 8053      		subi r24,lo8(-(-48))
 1592               	.L114:
  50:fbColors.h    **** 	while(value > 0x2f)
 1593               		.stabn	68,0,50,.LM191-.LFBB14
 1594               	.LM191:
 1595 058e 8033      		cpi r24,lo8(48)
 1596 0590 00F4      		brsh .L97
  54:fbColors.h    **** 	uint8_t r = ((value)&0x04) ? (3-R) : R ; 
 1597               		.stabn	68,0,54,.LM192-.LFBB14
 1598               	.LM192:
 1599 0592 90E0      		ldi r25,lo8(0)
  55:fbColors.h    **** 	uint8_t G = ((value)&0x0C)>>2; 
 1600               		.stabn	68,0,55,.LM193-.LFBB14
 1601               	.LM193:
 1602 0594 9C01      		movw r18,r24
 1603 0596 2C70      		andi r18,lo8(12)
 1604 0598 3070      		andi r19,hi8(12)
 1605 059a 3595      		asr r19
 1606 059c 2795      		ror r18
 1607 059e 3595      		asr r19
 1608 05a0 2795      		ror r18
 1609 05a2 422F      		mov r20,r18
  56:fbColors.h    **** 	uint8_t g = ((value)&0x10) ? (3-G) : G ; 
 1610               		.stabn	68,0,56,.LM194-.LFBB14
 1611               	.LM194:
 1612 05a4 84FF      		sbrs r24,4
 1613 05a6 00C0      		rjmp .L99
 1614 05a8 23E0      		ldi r18,lo8(3)
 1615 05aa 241B      		sub r18,r20
 1616 05ac 422F      		mov r20,r18
 1617               	.L99:
 1618               	.LBE136:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 105


 1619               	.LBE135:
 1620               		.stabs	"seg_sine.c",132,0,0,.Ltext28
 1621               	.Ltext28:
 1622               		.stabn	68,0,82,.LM195-.LFBB14
 1623               	.LM195:
 1624 05ae 21E0      		ldi r18,lo8(257)
 1625 05b0 31E0      		ldi r19,hi8(257)
 1626 05b2 211B      		sub r18,r17
 1627 05b4 3109      		sbc r19,__zero_reg__
 1628 05b6 7170      		andi r23,lo8(1)
 1629 05b8 6370      		andi r22,lo8(3)
 1630 05ba 660F      		lsl r22
 1631 05bc 672B      		or r22,r23
 1632 05be 952F      		mov r25,r21
 1633 05c0 9295      		swap r25
 1634 05c2 9073      		andi r25,lo8(48)
 1635 05c4 9064      		ori r25,lo8(64)
 1636 05c6 4370      		andi r20,lo8(3)
 1637 05c8 492B      		or r20,r25
 1638 05ca C901      		movw r24,r18
 1639 05cc 801B      		sub r24,r16
 1640 05ce 9109      		sbc r25,__zero_reg__
 1641 05d0 00D0      		rcall addSeg
  83:seg_sine.c    **** 
  84:seg_sine.c    ****    addSegfb(3, _W);
 1642               		.stabn	68,0,84,.LM196-.LFBB14
 1643               	.LM196:
 1644 05d2 83E0      		ldi r24,lo8(3)
 1645 05d4 90E0      		ldi r25,hi8(3)
 1646 05d6 67E0      		ldi r22,lo8(7)
 1647 05d8 43E7      		ldi r20,lo8(115)
 1648 05da 00D0      		rcall addSeg
 1649               	.LBB137:
  85:seg_sine.c    **** 
  86:seg_sine.c    ****    //Draw a sideways character...
  87:seg_sine.c    ****    {
  88:seg_sine.c    ****       addSegfb(3, _R);
 1650               		.stabn	68,0,88,.LM197-.LFBB14
 1651               	.LM197:
 1652 05dc 83E0      		ldi r24,lo8(3)
 1653 05de 90E0      		ldi r25,hi8(3)
 1654 05e0 67E0      		ldi r22,lo8(7)
 1655 05e2 40E4      		ldi r20,lo8(64)
 1656 05e4 00D0      		rcall addSeg
  89:seg_sine.c    **** 
  90:seg_sine.c    ****       uint8_t i;
  91:seg_sine.c    **** 
  92:seg_sine.c    ****       //Without + ' ' we get the same alphabet but shifted
  93:seg_sine.c    ****       // starting with the lower-case letters which are shifted down a row
  94:seg_sine.c    ****       // and some garbage in the top row...
  95:seg_sine.c    ****       // now I get that I'm reading weird memory locations, but this
  96:seg_sine.c    ****       // doesn't seem right. I should be accessing outside the array 
  97:seg_sine.c    ****       // altogether, no?    
  98:seg_sine.c    ****       char thisChar = (rowNum/8)%('~'-' '+1) + ' '; //pgm_read_byte(&(string[rowNum/8])); 
 1657               		.stabn	68,0,98,.LM198-.LFBB14
 1658               	.LM198:
 1659 05e6 C601      		movw r24,r12
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 106


 1660 05e8 6FE5      		ldi r22,lo8(95)
 1661 05ea 70E0      		ldi r23,hi8(95)
 1662 05ec 00D0      		rcall __udivmodhi4
 1663 05ee 805E      		subi r24,lo8(-(32))
 1664 05f0 8983      		std Y+1,r24
 1665 05f2 C701      		movw r24,r14
 1666 05f4 8770      		andi r24,lo8(7)
 1667 05f6 9070      		andi r25,hi8(7)
 1668 05f8 01E0      		ldi r16,lo8(1)
 1669 05fa 10E0      		ldi r17,hi8(1)
 1670 05fc 00C0      		rjmp 2f
 1671 05fe 000F      	1:	lsl r16
 1672 0600 111F      		rol r17
 1673 0602 8A95      	2:	dec r24
 1674 0604 02F4      		brpl 1b
 1675 0606 E0E8      		ldi r30,lo8(640)
 1676 0608 AE2E      		mov r10,r30
 1677 060a E2E0      		ldi r30,hi8(640)
 1678 060c BE2E      		mov r11,r30
 1679               	.L103:
 1680               	.LBB138:
  99:seg_sine.c    ****       //'A'; //string[rowNum/8];
 100:seg_sine.c    **** 
 101:seg_sine.c    ****       //Ironically, there are exactly the number of characters to be
 102:seg_sine.c    ****       // displayed in 768 lines (plus one on the right, to center)
 103:seg_sine.c    ****       for(i=8; i>0; i--)
 104:seg_sine.c    ****       {
 105:seg_sine.c    ****          if(getbit(rowNum%8, getCharRow(thisChar,i-1)))
 1681               		.stabn	68,0,105,.LM199-.LFBB14
 1682               	.LM199:
 1683 060e E981      		ldd r30,Y+1
 1684 0610 C501      		movw r24,r10
 1685 0612 8E0F      		add r24,r30
 1686 0614 911D      		adc r25,__zero_reg__
 1687 0616 FC01      		movw r30,r24
 1688 0618 E050      		subi r30,lo8(-(characters))
 1689 061a F040      		sbci r31,hi8(-(characters))
 1690               	/* #APP */
 1691               	 ;  105 "seg_sine.c" 1
 1692 061c 8491      		lpm r24, Z
 1693               		
 1694               	 ;  0 "" 2
 1695               	/* #NOAPP */
 1696               	.LBE138:
 1697 061e 90E0      		ldi r25,lo8(0)
 1698 0620 8023      		and r24,r16
 1699 0622 9123      		and r25,r17
 1700 0624 0097      		sbiw r24,0
 1701 0626 01F0      		breq .L101
 106:seg_sine.c    ****             addSegfb(1, _Y); //0x06, (4<<4) | 3);
 1702               		.stabn	68,0,106,.LM200-.LFBB14
 1703               	.LM200:
 1704 0628 81E0      		ldi r24,lo8(1)
 1705 062a 90E0      		ldi r25,hi8(1)
 1706 062c 67E0      		ldi r22,lo8(7)
 1707 062e 43E4      		ldi r20,lo8(67)
 1708 0630 00C0      		rjmp .L115
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 107


 1709               	.L101:
 107:seg_sine.c    ****          else
 108:seg_sine.c    ****             addSegfb(1, _R); //0x06, (4<<4) | 0);
 1710               		.stabn	68,0,108,.LM201-.LFBB14
 1711               	.LM201:
 1712 0632 81E0      		ldi r24,lo8(1)
 1713 0634 90E0      		ldi r25,hi8(1)
 1714 0636 67E0      		ldi r22,lo8(7)
 1715 0638 40E4      		ldi r20,lo8(64)
 1716               	.L115:
 1717 063a 00D0      		rcall addSeg
 1718 063c 20EA      		ldi r18,lo8(-96)
 1719 063e 3FEF      		ldi r19,hi8(-96)
 1720 0640 A20E      		add r10,r18
 1721 0642 B31E      		adc r11,r19
 103:seg_sine.c    ****       for(i=8; i>0; i--)
 1722               		.stabn	68,0,103,.LM202-.LFBB14
 1723               	.LM202:
 1724 0644 30E8      		ldi r19,lo8(-128)
 1725 0646 A316      		cp r10,r19
 1726 0648 3FEF      		ldi r19,hi8(-128)
 1727 064a B306      		cpc r11,r19
 1728 064c 01F4      		brne .L103
 109:seg_sine.c    ****       }
 110:seg_sine.c    **** 
 111:seg_sine.c    ****       addSegfb(3, _R); //0x06, (4<<4) | 0);
 1729               		.stabn	68,0,111,.LM203-.LFBB14
 1730               	.LM203:
 1731 064e 83E0      		ldi r24,lo8(3)
 1732 0650 90E0      		ldi r25,hi8(3)
 1733 0652 67E0      		ldi r22,lo8(7)
 1734 0654 40E4      		ldi r20,lo8(64)
 1735 0656 00D0      		rcall addSeg
 112:seg_sine.c    **** 
 113:seg_sine.c    ****       addSegfb(1, _W); //0x04, (6<<4) | 3);
 1736               		.stabn	68,0,113,.LM204-.LFBB14
 1737               	.LM204:
 1738 0658 81E0      		ldi r24,lo8(1)
 1739 065a 90E0      		ldi r25,hi8(1)
 1740 065c 67E0      		ldi r22,lo8(7)
 1741 065e 43E7      		ldi r20,lo8(115)
 1742 0660 00D0      		rcall addSeg
 114:seg_sine.c    **** 
 115:seg_sine.c    ****       //PGM_P charPtr = strchrnul_P(
 116:seg_sine.c    ****       PGM_P tqbf = PSTR(" The Quick Brown Fox Jumped Over The Lazy Dog! \177"); 
 117:seg_sine.c    ****       //, rowNum/8);
 118:seg_sine.c    **** 
 119:seg_sine.c    ****       strncpy_P(&thisChar, tqbf+(rowNum/8), 1);
 1743               		.stabn	68,0,119,.LM205-.LFBB14
 1744               	.LM205:
 1745 0662 B601      		movw r22,r12
 1746 0664 6050      		subi r22,lo8(-(__c.1822))
 1747 0666 7040      		sbci r23,hi8(-(__c.1822))
 1748 0668 CE01      		movw r24,r28
 1749 066a 0196      		adiw r24,1
 1750 066c 41E0      		ldi r20,lo8(1)
 1751 066e 50E0      		ldi r21,hi8(1)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 108


 1752 0670 00D0      		rcall strncpy_P
 120:seg_sine.c    **** 
 121:seg_sine.c    ****       addSegfb(3, rgb(0,0,1));//_B); //0, (6<<4) | 0);
 1753               		.stabn	68,0,121,.LM206-.LFBB14
 1754               	.LM206:
 1755 0672 83E0      		ldi r24,lo8(3)
 1756 0674 90E0      		ldi r25,hi8(3)
 1757 0676 60E0      		ldi r22,lo8(0)
 1758 0678 40E5      		ldi r20,lo8(80)
 1759 067a 00D0      		rcall addSeg
 122:seg_sine.c    **** 
 123:seg_sine.c    ****       if(rowNum/8 < strlen_P(tqbf))
 1760               		.stabn	68,0,123,.LM207-.LFBB14
 1761               	.LM207:
 1762 067c 80E0      		ldi r24,lo8(__c.1822)
 1763 067e 90E0      		ldi r25,hi8(__c.1822)
 1764 0680 00D0      		rcall strlen_P
 1765 0682 C816      		cp r12,r24
 1766 0684 D906      		cpc r13,r25
 1767 0686 00F4      		brsh .L104
 1768 0688 70E8      		ldi r23,lo8(640)
 1769 068a C72E      		mov r12,r23
 1770 068c 72E0      		ldi r23,hi8(640)
 1771 068e D72E      		mov r13,r23
 1772               	.L107:
 1773               	.LBB139:
 124:seg_sine.c    ****       {
 125:seg_sine.c    ****          for(i=8; i>0; i--)
 126:seg_sine.c    ****          {
 127:seg_sine.c    ****             if(getbit(rowNum%8, getCharRow(thisChar,i-1)))
 1774               		.stabn	68,0,127,.LM208-.LFBB14
 1775               	.LM208:
 1776 0690 E981      		ldd r30,Y+1
 1777 0692 C601      		movw r24,r12
 1778 0694 8E0F      		add r24,r30
 1779 0696 911D      		adc r25,__zero_reg__
 1780 0698 FC01      		movw r30,r24
 1781 069a E050      		subi r30,lo8(-(characters))
 1782 069c F040      		sbci r31,hi8(-(characters))
 1783               	/* #APP */
 1784               	 ;  127 "seg_sine.c" 1
 1785 069e 8491      		lpm r24, Z
 1786               		
 1787               	 ;  0 "" 2
 1788               	/* #NOAPP */
 1789               	.LBE139:
 1790 06a0 90E0      		ldi r25,lo8(0)
 1791 06a2 8023      		and r24,r16
 1792 06a4 9123      		and r25,r17
 1793 06a6 0097      		sbiw r24,0
 1794 06a8 01F0      		breq .L105
 128:seg_sine.c    ****                addSegfb(1, rgb(3,0,1));//_C); //0, (6<<4) | 3);
 1795               		.stabn	68,0,128,.LM209-.LFBB14
 1796               	.LM209:
 1797 06aa 81E0      		ldi r24,lo8(1)
 1798 06ac 90E0      		ldi r25,hi8(1)
 1799 06ae 67E0      		ldi r22,lo8(7)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 109


 1800 06b0 00C0      		rjmp .L116
 1801               	.L105:
 129:seg_sine.c    ****             else
 130:seg_sine.c    ****                addSegfb(1, rgb(0,0,1));//_B); //0, (6<<4) | 0);
 1802               		.stabn	68,0,130,.LM210-.LFBB14
 1803               	.LM210:
 1804 06b2 81E0      		ldi r24,lo8(1)
 1805 06b4 90E0      		ldi r25,hi8(1)
 1806 06b6 60E0      		ldi r22,lo8(0)
 1807               	.L116:
 1808 06b8 40E5      		ldi r20,lo8(80)
 1809 06ba 00D0      		rcall addSeg
 1810 06bc 20EA      		ldi r18,lo8(-96)
 1811 06be 3FEF      		ldi r19,hi8(-96)
 1812 06c0 C20E      		add r12,r18
 1813 06c2 D31E      		adc r13,r19
 125:seg_sine.c    ****          for(i=8; i>0; i--)
 1814               		.stabn	68,0,125,.LM211-.LFBB14
 1815               	.LM211:
 1816 06c4 30E8      		ldi r19,lo8(-128)
 1817 06c6 C316      		cp r12,r19
 1818 06c8 3FEF      		ldi r19,hi8(-128)
 1819 06ca D306      		cpc r13,r19
 1820 06cc 01F4      		brne .L107
 1821 06ce 00C0      		rjmp .L108
 1822               	.L104:
 131:seg_sine.c    ****          }
 132:seg_sine.c    ****       }
 133:seg_sine.c    ****       else
 134:seg_sine.c    ****          addSegfb(8, rgb(0,0,1));//_B); //0,(6<<4) | 0);
 1823               		.stabn	68,0,134,.LM212-.LFBB14
 1824               	.LM212:
 1825 06d0 88E0      		ldi r24,lo8(8)
 1826 06d2 90E0      		ldi r25,hi8(8)
 1827 06d4 60E0      		ldi r22,lo8(0)
 1828 06d6 40E5      		ldi r20,lo8(80)
 1829 06d8 00D0      		rcall addSeg
 1830               	.L108:
 135:seg_sine.c    **** 
 136:seg_sine.c    ****       addSegfb(3, rgb(0,0,1));//_B); //0,(6<<4)|0);
 1831               		.stabn	68,0,136,.LM213-.LFBB14
 1832               	.LM213:
 1833 06da 83E0      		ldi r24,lo8(3)
 1834 06dc 90E0      		ldi r25,hi8(3)
 1835 06de 60E0      		ldi r22,lo8(0)
 1836 06e0 40E5      		ldi r20,lo8(80)
 1837 06e2 00D0      		rcall addSeg
 1838               	.LBE137:
 137:seg_sine.c    **** 
 138:seg_sine.c    ****    }
 139:seg_sine.c    **** 
 140:seg_sine.c    ****    //newSeg(3,0x06,(4<<4) | 0);
 141:seg_sine.c    **** 
 142:seg_sine.c    ****    uint8_t i;
 143:seg_sine.c    ****    for(i=0; i<64; i++)
 144:seg_sine.c    ****       addSegfb(1, (i+rowNum/4)&0x3f);
 1839               		.stabn	68,0,144,.LM214-.LFBB14
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 110


 1840               	.LM214:
 1841 06e4 F694      		lsr r15
 1842 06e6 E794      		ror r14
 1843 06e8 F694      		lsr r15
 1844 06ea E794      		ror r14
 1845 06ec 10E0      		ldi r17,lo8(0)
 1846               	.L109:
 1847 06ee 4E2D      		mov r20,r14
 1848 06f0 6E2D      		mov r22,r14
 1849 06f2 6370      		andi r22,lo8(3)
 1850 06f4 660F      		lsl r22
 1851 06f6 8E2D      		mov r24,r14
 1852 06f8 8170      		andi r24,lo8(1)
 1853 06fa 682B      		or r22,r24
 1854 06fc 4073      		andi r20,lo8(48)
 1855 06fe 4064      		ori r20,lo8(64)
 1856 0700 C701      		movw r24,r14
 1857 0702 8C70      		andi r24,lo8(12)
 1858 0704 9070      		andi r25,hi8(12)
 1859 0706 9695      		lsr r25
 1860 0708 8795      		ror r24
 1861 070a 9695      		lsr r25
 1862 070c 8795      		ror r24
 1863 070e 482B      		or r20,r24
 1864 0710 81E0      		ldi r24,lo8(1)
 1865 0712 90E0      		ldi r25,hi8(1)
 1866 0714 00D0      		rcall addSeg
 143:seg_sine.c    ****    for(i=0; i<64; i++)
 1867               		.stabn	68,0,143,.LM215-.LFBB14
 1868               	.LM215:
 1869 0716 1F5F      		subi r17,lo8(-(1))
 1870 0718 0894      		sec
 1871 071a E11C      		adc r14,__zero_reg__
 1872 071c F11C      		adc r15,__zero_reg__
 1873 071e 1034      		cpi r17,lo8(64)
 1874 0720 01F4      		brne .L109
 145:seg_sine.c    **** 
 146:seg_sine.c    ****    addSegfb(3, _W); //0x06, (6<<4) | 3);
 1875               		.stabn	68,0,146,.LM216-.LFBB14
 1876               	.LM216:
 1877 0722 83E0      		ldi r24,lo8(3)
 1878 0724 90E0      		ldi r25,hi8(3)
 1879 0726 67E0      		ldi r22,lo8(7)
 1880 0728 43E7      		ldi r20,lo8(115)
 1881 072a 00D0      		rcall addSeg
 147:seg_sine.c    **** 
 148:seg_sine.c    ****    segTerminate();
 1882               		.stabn	68,0,148,.LM217-.LFBB14
 1883               	.LM217:
 1884 072c 00D0      		rcall segTerminate
 1885               	/* epilogue start */
 149:seg_sine.c    **** }
 1886               		.stabn	68,0,149,.LM218-.LFBB14
 1887               	.LM218:
 1888 072e 0F90      		pop __tmp_reg__
 1889 0730 CF91      		pop r28
 1890 0732 DF91      		pop r29
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 111


 1891 0734 1F91      		pop r17
 1892 0736 0F91      		pop r16
 1893 0738 FF90      		pop r15
 1894 073a EF90      		pop r14
 1895 073c DF90      		pop r13
 1896 073e CF90      		pop r12
 1897 0740 BF90      		pop r11
 1898 0742 AF90      		pop r10
 1899 0744 9F90      		pop r9
 1900 0746 0895      		ret
 1901               		.size	segSine_loadRow, .-segSine_loadRow
 1902               		.stabs	"lastThetaOffset:V(3,4)",38,0,4,lastThetaOffset.1803
 1903               		.stabs	"frameCount:V(3,2)",38,0,5,frameCount.1804
 1904               		.stabs	"sineVal:r(3,2)",64,0,30,17
 1905               		.stabs	"nextSineVal:r(3,2)",64,0,33,16
 1906               		.stabs	"length:r(3,2)",64,0,39,16
 1907               		.stabs	"J:r(3,2)",64,0,60,30
 1908               		.stabs	"j:r(3,2)",64,0,61,9
 1909               		.stabs	"i:r(3,2)",64,0,142,17
 1910               		.stabn	192,0,0,.LFBB14-.LFBB14
 1911               		.stabs	"r:r(3,2)",64,0,54,20
 1912               		.stabs	"g:r(3,2)",64,0,56,18
 1913               		.stabs	"b:r(3,2)",64,0,58,24
 1914               		.stabn	192,0,0,.LBB126-.LFBB14
 1915               		.stabn	224,0,0,.LBE126-.LFBB14
 1916               		.stabs	"r:r(3,2)",64,0,54,20
 1917               		.stabs	"g:r(3,2)",64,0,56,18
 1918               		.stabs	"b:r(3,2)",64,0,58,24
 1919               		.stabn	192,0,0,.LBB127-.LFBB14
 1920               		.stabn	224,0,0,.LBE127-.LFBB14
 1921               		.stabs	"r:r(3,2)",64,0,54,22
 1922               		.stabn	192,0,0,.LBB130-.LFBB14
 1923               		.stabn	224,0,0,.LBE130-.LFBB14
 1924               		.stabs	"r:r(3,2)",64,0,54,23
 1925               		.stabn	192,0,0,.LBB132-.LFBB14
 1926               		.stabn	224,0,0,.LBE132-.LFBB14
 1927               		.stabs	"b:r(3,2)",64,0,58,21
 1928               		.stabn	192,0,0,.LBB134-.LFBB14
 1929               		.stabn	224,0,0,.LBE134-.LFBB14
 1930               		.stabs	"value:r(3,2)",64,0,82,24
 1931               		.stabn	192,0,0,.LBB135-.LFBB14
 1932               		.stabs	"g:r(3,2)",64,0,56,20
 1933               		.stabn	192,0,0,.LBB136-.LFBB14
 1934               		.stabn	224,0,0,.LBE136-.LFBB14
 1935               		.stabn	224,0,0,.LBE135-.LFBB14
 1936               		.stabs	"thisChar:(0,2)",128,0,98,1
 1937               		.stabn	192,0,0,.LBB137-.LFBB14
 1938               		.stabs	"__result:r(3,2)",64,0,105,24
 1939               		.stabn	192,0,0,.LBB138-.LFBB14
 1940               		.stabn	224,0,0,.LBE138-.LFBB14
 1941               		.stabs	"__result:r(3,2)",64,0,127,24
 1942               		.stabn	192,0,0,.LBB139-.LFBB14
 1943               		.stabn	224,0,0,.LBE139-.LFBB14
 1944               		.stabn	224,0,0,.LBE137-.LFBB14
 1945               		.stabn	224,0,0,.Lscope14-.LFBB14
 1946               	.Lscope14:
 1947               		.stabs	"",36,0,0,.Lscope14-.LFBB14
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 112


 1948               		.stabd	78,0,0
 1949               		.stabs	"__vector_14:F(0,15)",36,0,199,__vector_14
 1950               	.global	__vector_14
 1951               		.type	__vector_14, @function
 1952               	__vector_14:
 1953               		.stabd	46,0,0
 1954               		.stabs	"main.c",132,0,0,.Ltext29
 1955               	.Ltext29:
 200:main.c        **** {
 1956               		.stabn	68,0,200,.LM219-.LFBB15
 1957               	.LM219:
 1958               	.LFBB15:
 1959 0748 1F92      		push __zero_reg__
 1960 074a 0F92      		push r0
 1961 074c 0FB6      		in r0,__SREG__
 1962 074e 0F92      		push r0
 1963 0750 1124      		clr __zero_reg__
 1964 0752 2F93      		push r18
 1965 0754 3F93      		push r19
 1966 0756 4F93      		push r20
 1967 0758 5F93      		push r21
 1968 075a 6F93      		push r22
 1969 075c 7F93      		push r23
 1970 075e 8F93      		push r24
 1971 0760 9F93      		push r25
 1972 0762 AF93      		push r26
 1973 0764 BF93      		push r27
 1974 0766 EF93      		push r30
 1975 0768 FF93      		push r31
 1976               	/* prologue: Signal */
 1977               	/* frame size = 0 */
 209:main.c        **** 	if(updateLCD())
 1978               		.stabn	68,0,209,.LM220-.LFBB15
 1979               	.LM220:
 1980 076a 00D0      		rcall updateLCD
 1981 076c 8823      		tst r24
 1982 076e 01F0      		breq .L118
 211:main.c        **** 		frameCount++;
 1983               		.stabn	68,0,211,.LM221-.LFBB15
 1984               	.LM221:
 1985 0770 8091 0000 		lds r24,frameCount.1790
 1986 0774 8F5F      		subi r24,lo8(-(1))
 1987 0776 8093 0000 		sts frameCount.1790,r24
 1988               	.L118:
 223:main.c        **** 	if((hsyncCount >= T_VD+T_Vlow) && (hsyncCount < T_VD+T_Vlow+V_COUNT))
 1989               		.stabn	68,0,223,.LM222-.LFBB15
 1990               	.LM222:
 1991 077a 8091 0000 		lds r24,hsyncCount
 1992 077e 9091 0000 		lds r25,(hsyncCount)+1
 1993 0782 8397      		sbiw r24,35
 1994 0784 23E0      		ldi r18,hi8(768)
 1995 0786 8030      		cpi r24,lo8(768)
 1996 0788 9207      		cpc r25,r18
 1997 078a 00F4      		brsh .L120
 1998               	.LBB140:
 1999               	.LBB141:
 268:main.c        ****  	segSine_loadRow(rowNum);
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 113


 2000               		.stabn	68,0,268,.LM223-.LFBB15
 2001               	.LM223:
 2002 078c 00D0      		rcall segSine_loadRow
 2003               	.L120:
 2004               	/* epilogue start */
 2005               	.LBE141:
 2006               	.LBE140:
 237:main.c        **** }
 2007               		.stabn	68,0,237,.LM224-.LFBB15
 2008               	.LM224:
 2009 078e FF91      		pop r31
 2010 0790 EF91      		pop r30
 2011 0792 BF91      		pop r27
 2012 0794 AF91      		pop r26
 2013 0796 9F91      		pop r25
 2014 0798 8F91      		pop r24
 2015 079a 7F91      		pop r23
 2016 079c 6F91      		pop r22
 2017 079e 5F91      		pop r21
 2018 07a0 4F91      		pop r20
 2019 07a2 3F91      		pop r19
 2020 07a4 2F91      		pop r18
 2021 07a6 0F90      		pop r0
 2022 07a8 0FBE      		out __SREG__,r0
 2023 07aa 0F90      		pop r0
 2024 07ac 1F90      		pop __zero_reg__
 2025 07ae 1895      		reti
 2026               		.size	__vector_14, .-__vector_14
 2027               		.stabs	"frameCount:V(3,2)",38,0,201,frameCount.1790
 2028               		.stabn	192,0,0,.LFBB15-.LFBB15
 2029               		.stabn	224,0,0,.Lscope15-.LFBB15
 2030               	.Lscope15:
 2031               		.stabs	"",36,0,0,.Lscope15-.LFBB15
 2032               		.stabd	78,0,0
 2033               	.global	header
 2034               		.section	.progmem.data,"a",@progbits
 2035               		.type	header, @object
 2036               		.size	header, 36
 2037               	header:
 2038 0000 4C43 4464 		.string	"LCDdirectLVDS60 2013-12-15 06:56:15"
 2038      6972 6563 
 2038      744C 5644 
 2038      5336 3020 
 2038      3230 3133 
 2039               	.global	characters
 2040               		.type	characters, @object
 2041               		.size	characters, 768
 2042               	characters:
 2043 0024 00        		.byte	0
 2044 0025 0C        		.byte	12
 2045 0026 36        		.byte	54
 2046 0027 36        		.byte	54
 2047 0028 0C        		.byte	12
 2048 0029 00        		.byte	0
 2049 002a 1C        		.byte	28
 2050 002b 06        		.byte	6
 2051 002c 18        		.byte	24
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 114


 2052 002d 06        		.byte	6
 2053 002e 00        		.byte	0
 2054 002f 00        		.byte	0
 2055 0030 00        		.byte	0
 2056 0031 00        		.byte	0
 2057 0032 00        		.byte	0
 2058 0033 60        		.byte	96
 2059 0034 1E        		.byte	30
 2060 0035 0C        		.byte	12
 2061 0036 1E        		.byte	30
 2062 0037 1E        		.byte	30
 2063 0038 38        		.byte	56
 2064 0039 3F        		.byte	63
 2065 003a 1C        		.byte	28
 2066 003b 3F        		.byte	63
 2067 003c 1E        		.byte	30
 2068 003d 1E        		.byte	30
 2069 003e 00        		.byte	0
 2070 003f 00        		.byte	0
 2071 0040 18        		.byte	24
 2072 0041 00        		.byte	0
 2073 0042 06        		.byte	6
 2074 0043 1E        		.byte	30
 2075 0044 3E        		.byte	62
 2076 0045 0C        		.byte	12
 2077 0046 3F        		.byte	63
 2078 0047 3C        		.byte	60
 2079 0048 3F        		.byte	63
 2080 0049 7F        		.byte	127
 2081 004a 7F        		.byte	127
 2082 004b 3C        		.byte	60
 2083 004c 33        		.byte	51
 2084 004d 1E        		.byte	30
 2085 004e 78        		.byte	120
 2086 004f 67        		.byte	103
 2087 0050 0F        		.byte	15
 2088 0051 63        		.byte	99
 2089 0052 63        		.byte	99
 2090 0053 1C        		.byte	28
 2091 0054 3F        		.byte	63
 2092 0055 1E        		.byte	30
 2093 0056 3F        		.byte	63
 2094 0057 1E        		.byte	30
 2095 0058 3F        		.byte	63
 2096 0059 33        		.byte	51
 2097 005a 33        		.byte	51
 2098 005b 63        		.byte	99
 2099 005c 63        		.byte	99
 2100 005d 33        		.byte	51
 2101 005e 7F        		.byte	127
 2102 005f 1E        		.byte	30
 2103 0060 03        		.byte	3
 2104 0061 1E        		.byte	30
 2105 0062 08        		.byte	8
 2106 0063 00        		.byte	0
 2107 0064 0C        		.byte	12
 2108 0065 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 115


 2109 0066 07        		.byte	7
 2110 0067 00        		.byte	0
 2111 0068 38        		.byte	56
 2112 0069 00        		.byte	0
 2113 006a 1C        		.byte	28
 2114 006b 00        		.byte	0
 2115 006c 07        		.byte	7
 2116 006d 0C        		.byte	12
 2117 006e 18        		.byte	24
 2118 006f 07        		.byte	7
 2119 0070 0E        		.byte	14
 2120 0071 00        		.byte	0
 2121 0072 00        		.byte	0
 2122 0073 00        		.byte	0
 2123 0074 00        		.byte	0
 2124 0075 00        		.byte	0
 2125 0076 00        		.byte	0
 2126 0077 00        		.byte	0
 2127 0078 08        		.byte	8
 2128 0079 00        		.byte	0
 2129 007a 00        		.byte	0
 2130 007b 00        		.byte	0
 2131 007c 00        		.byte	0
 2132 007d 00        		.byte	0
 2133 007e 00        		.byte	0
 2134 007f 38        		.byte	56
 2135 0080 18        		.byte	24
 2136 0081 07        		.byte	7
 2137 0082 6E        		.byte	110
 2138 0083 0E        		.byte	14
 2139 0084 00        		.byte	0
 2140 0085 1E        		.byte	30
 2141 0086 36        		.byte	54
 2142 0087 36        		.byte	54
 2143 0088 3E        		.byte	62
 2144 0089 63        		.byte	99
 2145 008a 36        		.byte	54
 2146 008b 06        		.byte	6
 2147 008c 0C        		.byte	12
 2148 008d 0C        		.byte	12
 2149 008e 66        		.byte	102
 2150 008f 0C        		.byte	12
 2151 0090 00        		.byte	0
 2152 0091 00        		.byte	0
 2153 0092 00        		.byte	0
 2154 0093 30        		.byte	48
 2155 0094 33        		.byte	51
 2156 0095 0F        		.byte	15
 2157 0096 33        		.byte	51
 2158 0097 33        		.byte	51
 2159 0098 3C        		.byte	60
 2160 0099 03        		.byte	3
 2161 009a 06        		.byte	6
 2162 009b 33        		.byte	51
 2163 009c 33        		.byte	51
 2164 009d 33        		.byte	51
 2165 009e 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 116


 2166 009f 00        		.byte	0
 2167 00a0 0C        		.byte	12
 2168 00a1 00        		.byte	0
 2169 00a2 0C        		.byte	12
 2170 00a3 33        		.byte	51
 2171 00a4 63        		.byte	99
 2172 00a5 1E        		.byte	30
 2173 00a6 66        		.byte	102
 2174 00a7 66        		.byte	102
 2175 00a8 36        		.byte	54
 2176 00a9 46        		.byte	70
 2177 00aa 46        		.byte	70
 2178 00ab 66        		.byte	102
 2179 00ac 33        		.byte	51
 2180 00ad 0C        		.byte	12
 2181 00ae 30        		.byte	48
 2182 00af 66        		.byte	102
 2183 00b0 06        		.byte	6
 2184 00b1 77        		.byte	119
 2185 00b2 67        		.byte	103
 2186 00b3 36        		.byte	54
 2187 00b4 66        		.byte	102
 2188 00b5 33        		.byte	51
 2189 00b6 66        		.byte	102
 2190 00b7 33        		.byte	51
 2191 00b8 2D        		.byte	45
 2192 00b9 33        		.byte	51
 2193 00ba 33        		.byte	51
 2194 00bb 63        		.byte	99
 2195 00bc 63        		.byte	99
 2196 00bd 33        		.byte	51
 2197 00be 33        		.byte	51
 2198 00bf 06        		.byte	6
 2199 00c0 06        		.byte	6
 2200 00c1 18        		.byte	24
 2201 00c2 1C        		.byte	28
 2202 00c3 00        		.byte	0
 2203 00c4 0C        		.byte	12
 2204 00c5 00        		.byte	0
 2205 00c6 06        		.byte	6
 2206 00c7 00        		.byte	0
 2207 00c8 30        		.byte	48
 2208 00c9 00        		.byte	0
 2209 00ca 36        		.byte	54
 2210 00cb 00        		.byte	0
 2211 00cc 06        		.byte	6
 2212 00cd 00        		.byte	0
 2213 00ce 00        		.byte	0
 2214 00cf 06        		.byte	6
 2215 00d0 0C        		.byte	12
 2216 00d1 00        		.byte	0
 2217 00d2 00        		.byte	0
 2218 00d3 00        		.byte	0
 2219 00d4 00        		.byte	0
 2220 00d5 00        		.byte	0
 2221 00d6 00        		.byte	0
 2222 00d7 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 117


 2223 00d8 0C        		.byte	12
 2224 00d9 00        		.byte	0
 2225 00da 00        		.byte	0
 2226 00db 00        		.byte	0
 2227 00dc 00        		.byte	0
 2228 00dd 00        		.byte	0
 2229 00de 00        		.byte	0
 2230 00df 0C        		.byte	12
 2231 00e0 18        		.byte	24
 2232 00e1 0C        		.byte	12
 2233 00e2 3B        		.byte	59
 2234 00e3 13        		.byte	19
 2235 00e4 00        		.byte	0
 2236 00e5 1E        		.byte	30
 2237 00e6 36        		.byte	54
 2238 00e7 7F        		.byte	127
 2239 00e8 03        		.byte	3
 2240 00e9 33        		.byte	51
 2241 00ea 1C        		.byte	28
 2242 00eb 03        		.byte	3
 2243 00ec 06        		.byte	6
 2244 00ed 18        		.byte	24
 2245 00ee 3C        		.byte	60
 2246 00ef 0C        		.byte	12
 2247 00f0 00        		.byte	0
 2248 00f1 00        		.byte	0
 2249 00f2 00        		.byte	0
 2250 00f3 18        		.byte	24
 2251 00f4 3B        		.byte	59
 2252 00f5 0C        		.byte	12
 2253 00f6 30        		.byte	48
 2254 00f7 30        		.byte	48
 2255 00f8 36        		.byte	54
 2256 00f9 1F        		.byte	31
 2257 00fa 03        		.byte	3
 2258 00fb 30        		.byte	48
 2259 00fc 33        		.byte	51
 2260 00fd 33        		.byte	51
 2261 00fe 0C        		.byte	12
 2262 00ff 0C        		.byte	12
 2263 0100 06        		.byte	6
 2264 0101 3F        		.byte	63
 2265 0102 18        		.byte	24
 2266 0103 30        		.byte	48
 2267 0104 7B        		.byte	123
 2268 0105 33        		.byte	51
 2269 0106 66        		.byte	102
 2270 0107 03        		.byte	3
 2271 0108 66        		.byte	102
 2272 0109 16        		.byte	22
 2273 010a 16        		.byte	22
 2274 010b 03        		.byte	3
 2275 010c 33        		.byte	51
 2276 010d 0C        		.byte	12
 2277 010e 30        		.byte	48
 2278 010f 36        		.byte	54
 2279 0110 06        		.byte	6
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 118


 2280 0111 7F        		.byte	127
 2281 0112 6F        		.byte	111
 2282 0113 63        		.byte	99
 2283 0114 66        		.byte	102
 2284 0115 33        		.byte	51
 2285 0116 66        		.byte	102
 2286 0117 07        		.byte	7
 2287 0118 0C        		.byte	12
 2288 0119 33        		.byte	51
 2289 011a 33        		.byte	51
 2290 011b 63        		.byte	99
 2291 011c 36        		.byte	54
 2292 011d 33        		.byte	51
 2293 011e 19        		.byte	25
 2294 011f 06        		.byte	6
 2295 0120 0C        		.byte	12
 2296 0121 18        		.byte	24
 2297 0122 36        		.byte	54
 2298 0123 00        		.byte	0
 2299 0124 18        		.byte	24
 2300 0125 1E        		.byte	30
 2301 0126 3E        		.byte	62
 2302 0127 1E        		.byte	30
 2303 0128 30        		.byte	48
 2304 0129 1E        		.byte	30
 2305 012a 06        		.byte	6
 2306 012b 6E        		.byte	110
 2307 012c 36        		.byte	54
 2308 012d 0E        		.byte	14
 2309 012e 1E        		.byte	30
 2310 012f 66        		.byte	102
 2311 0130 0C        		.byte	12
 2312 0131 37        		.byte	55
 2313 0132 1F        		.byte	31
 2314 0133 1E        		.byte	30
 2315 0134 3B        		.byte	59
 2316 0135 6E        		.byte	110
 2317 0136 1B        		.byte	27
 2318 0137 3E        		.byte	62
 2319 0138 3E        		.byte	62
 2320 0139 33        		.byte	51
 2321 013a 33        		.byte	51
 2322 013b 63        		.byte	99
 2323 013c 63        		.byte	99
 2324 013d 33        		.byte	51
 2325 013e 3F        		.byte	63
 2326 013f 0C        		.byte	12
 2327 0140 18        		.byte	24
 2328 0141 0C        		.byte	12
 2329 0142 00        		.byte	0
 2330 0143 39        		.byte	57
 2331 0144 00        		.byte	0
 2332 0145 0C        		.byte	12
 2333 0146 00        		.byte	0
 2334 0147 36        		.byte	54
 2335 0148 1E        		.byte	30
 2336 0149 18        		.byte	24
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 119


 2337 014a 6E        		.byte	110
 2338 014b 00        		.byte	0
 2339 014c 06        		.byte	6
 2340 014d 18        		.byte	24
 2341 014e FF        		.byte	-1
 2342 014f 3F        		.byte	63
 2343 0150 00        		.byte	0
 2344 0151 3F        		.byte	63
 2345 0152 00        		.byte	0
 2346 0153 0C        		.byte	12
 2347 0154 3F        		.byte	63
 2348 0155 0C        		.byte	12
 2349 0156 1C        		.byte	28
 2350 0157 1C        		.byte	28
 2351 0158 33        		.byte	51
 2352 0159 30        		.byte	48
 2353 015a 1F        		.byte	31
 2354 015b 18        		.byte	24
 2355 015c 1E        		.byte	30
 2356 015d 3E        		.byte	62
 2357 015e 0C        		.byte	12
 2358 015f 0C        		.byte	12
 2359 0160 03        		.byte	3
 2360 0161 00        		.byte	0
 2361 0162 30        		.byte	48
 2362 0163 18        		.byte	24
 2363 0164 7B        		.byte	123
 2364 0165 33        		.byte	51
 2365 0166 3E        		.byte	62
 2366 0167 03        		.byte	3
 2367 0168 66        		.byte	102
 2368 0169 1E        		.byte	30
 2369 016a 1E        		.byte	30
 2370 016b 03        		.byte	3
 2371 016c 3F        		.byte	63
 2372 016d 0C        		.byte	12
 2373 016e 30        		.byte	48
 2374 016f 1E        		.byte	30
 2375 0170 06        		.byte	6
 2376 0171 6B        		.byte	107
 2377 0172 7B        		.byte	123
 2378 0173 63        		.byte	99
 2379 0174 3E        		.byte	62
 2380 0175 33        		.byte	51
 2381 0176 3E        		.byte	62
 2382 0177 1C        		.byte	28
 2383 0178 0C        		.byte	12
 2384 0179 33        		.byte	51
 2385 017a 33        		.byte	51
 2386 017b 6B        		.byte	107
 2387 017c 1C        		.byte	28
 2388 017d 1E        		.byte	30
 2389 017e 0C        		.byte	12
 2390 017f 06        		.byte	6
 2391 0180 18        		.byte	24
 2392 0181 18        		.byte	24
 2393 0182 63        		.byte	99
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 120


 2394 0183 00        		.byte	0
 2395 0184 00        		.byte	0
 2396 0185 30        		.byte	48
 2397 0186 66        		.byte	102
 2398 0187 33        		.byte	51
 2399 0188 3E        		.byte	62
 2400 0189 33        		.byte	51
 2401 018a 0F        		.byte	15
 2402 018b 33        		.byte	51
 2403 018c 6E        		.byte	110
 2404 018d 0C        		.byte	12
 2405 018e 18        		.byte	24
 2406 018f 36        		.byte	54
 2407 0190 0C        		.byte	12
 2408 0191 7F        		.byte	127
 2409 0192 33        		.byte	51
 2410 0193 33        		.byte	51
 2411 0194 66        		.byte	102
 2412 0195 33        		.byte	51
 2413 0196 36        		.byte	54
 2414 0197 03        		.byte	3
 2415 0198 0C        		.byte	12
 2416 0199 33        		.byte	51
 2417 019a 33        		.byte	51
 2418 019b 63        		.byte	99
 2419 019c 36        		.byte	54
 2420 019d 33        		.byte	51
 2421 019e 19        		.byte	25
 2422 019f 07        		.byte	7
 2423 01a0 00        		.byte	0
 2424 01a1 38        		.byte	56
 2425 01a2 00        		.byte	0
 2426 01a3 69        		.byte	105
 2427 01a4 00        		.byte	0
 2428 01a5 0C        		.byte	12
 2429 01a6 00        		.byte	0
 2430 01a7 7F        		.byte	127
 2431 01a8 30        		.byte	48
 2432 01a9 0C        		.byte	12
 2433 01aa 3B        		.byte	59
 2434 01ab 00        		.byte	0
 2435 01ac 06        		.byte	6
 2436 01ad 18        		.byte	24
 2437 01ae 3C        		.byte	60
 2438 01af 0C        		.byte	12
 2439 01b0 00        		.byte	0
 2440 01b1 00        		.byte	0
 2441 01b2 00        		.byte	0
 2442 01b3 06        		.byte	6
 2443 01b4 37        		.byte	55
 2444 01b5 0C        		.byte	12
 2445 01b6 06        		.byte	6
 2446 01b7 30        		.byte	48
 2447 01b8 7F        		.byte	127
 2448 01b9 30        		.byte	48
 2449 01ba 33        		.byte	51
 2450 01bb 0C        		.byte	12
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 121


 2451 01bc 33        		.byte	51
 2452 01bd 30        		.byte	48
 2453 01be 00        		.byte	0
 2454 01bf 00        		.byte	0
 2455 01c0 06        		.byte	6
 2456 01c1 3F        		.byte	63
 2457 01c2 18        		.byte	24
 2458 01c3 0C        		.byte	12
 2459 01c4 7B        		.byte	123
 2460 01c5 3F        		.byte	63
 2461 01c6 66        		.byte	102
 2462 01c7 03        		.byte	3
 2463 01c8 66        		.byte	102
 2464 01c9 16        		.byte	22
 2465 01ca 16        		.byte	22
 2466 01cb 73        		.byte	115
 2467 01cc 33        		.byte	51
 2468 01cd 0C        		.byte	12
 2469 01ce 33        		.byte	51
 2470 01cf 36        		.byte	54
 2471 01d0 46        		.byte	70
 2472 01d1 63        		.byte	99
 2473 01d2 73        		.byte	115
 2474 01d3 63        		.byte	99
 2475 01d4 06        		.byte	6
 2476 01d5 3B        		.byte	59
 2477 01d6 1E        		.byte	30
 2478 01d7 38        		.byte	56
 2479 01d8 0C        		.byte	12
 2480 01d9 33        		.byte	51
 2481 01da 33        		.byte	51
 2482 01db 7F        		.byte	127
 2483 01dc 36        		.byte	54
 2484 01dd 0C        		.byte	12
 2485 01de 46        		.byte	70
 2486 01df 06        		.byte	6
 2487 01e0 30        		.byte	48
 2488 01e1 18        		.byte	24
 2489 01e2 00        		.byte	0
 2490 01e3 00        		.byte	0
 2491 01e4 00        		.byte	0
 2492 01e5 3E        		.byte	62
 2493 01e6 66        		.byte	102
 2494 01e7 03        		.byte	3
 2495 01e8 33        		.byte	51
 2496 01e9 3F        		.byte	63
 2497 01ea 06        		.byte	6
 2498 01eb 33        		.byte	51
 2499 01ec 66        		.byte	102
 2500 01ed 0C        		.byte	12
 2501 01ee 18        		.byte	24
 2502 01ef 1E        		.byte	30
 2503 01f0 0C        		.byte	12
 2504 01f1 6B        		.byte	107
 2505 01f2 33        		.byte	51
 2506 01f3 33        		.byte	51
 2507 01f4 66        		.byte	102
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 122


 2508 01f5 33        		.byte	51
 2509 01f6 36        		.byte	54
 2510 01f7 1E        		.byte	30
 2511 01f8 0C        		.byte	12
 2512 01f9 33        		.byte	51
 2513 01fa 33        		.byte	51
 2514 01fb 6B        		.byte	107
 2515 01fc 1C        		.byte	28
 2516 01fd 33        		.byte	51
 2517 01fe 0C        		.byte	12
 2518 01ff 0C        		.byte	12
 2519 0200 18        		.byte	24
 2520 0201 0C        		.byte	12
 2521 0202 00        		.byte	0
 2522 0203 0E        		.byte	14
 2523 0204 00        		.byte	0
 2524 0205 00        		.byte	0
 2525 0206 00        		.byte	0
 2526 0207 36        		.byte	54
 2527 0208 1F        		.byte	31
 2528 0209 66        		.byte	102
 2529 020a 33        		.byte	51
 2530 020b 00        		.byte	0
 2531 020c 0C        		.byte	12
 2532 020d 0C        		.byte	12
 2533 020e 66        		.byte	102
 2534 020f 0C        		.byte	12
 2535 0210 0E        		.byte	14
 2536 0211 00        		.byte	0
 2537 0212 0C        		.byte	12
 2538 0213 03        		.byte	3
 2539 0214 33        		.byte	51
 2540 0215 0C        		.byte	12
 2541 0216 33        		.byte	51
 2542 0217 33        		.byte	51
 2543 0218 30        		.byte	48
 2544 0219 33        		.byte	51
 2545 021a 33        		.byte	51
 2546 021b 06        		.byte	6
 2547 021c 33        		.byte	51
 2548 021d 18        		.byte	24
 2549 021e 0C        		.byte	12
 2550 021f 0E        		.byte	14
 2551 0220 0C        		.byte	12
 2552 0221 00        		.byte	0
 2553 0222 0C        		.byte	12
 2554 0223 00        		.byte	0
 2555 0224 03        		.byte	3
 2556 0225 33        		.byte	51
 2557 0226 66        		.byte	102
 2558 0227 66        		.byte	102
 2559 0228 36        		.byte	54
 2560 0229 46        		.byte	70
 2561 022a 06        		.byte	6
 2562 022b 66        		.byte	102
 2563 022c 33        		.byte	51
 2564 022d 0C        		.byte	12
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 123


 2565 022e 33        		.byte	51
 2566 022f 66        		.byte	102
 2567 0230 66        		.byte	102
 2568 0231 63        		.byte	99
 2569 0232 63        		.byte	99
 2570 0233 36        		.byte	54
 2571 0234 06        		.byte	6
 2572 0235 1E        		.byte	30
 2573 0236 36        		.byte	54
 2574 0237 33        		.byte	51
 2575 0238 0C        		.byte	12
 2576 0239 33        		.byte	51
 2577 023a 1E        		.byte	30
 2578 023b 77        		.byte	119
 2579 023c 63        		.byte	99
 2580 023d 0C        		.byte	12
 2581 023e 63        		.byte	99
 2582 023f 06        		.byte	6
 2583 0240 60        		.byte	96
 2584 0241 18        		.byte	24
 2585 0242 00        		.byte	0
 2586 0243 00        		.byte	0
 2587 0244 00        		.byte	0
 2588 0245 33        		.byte	51
 2589 0246 66        		.byte	102
 2590 0247 33        		.byte	51
 2591 0248 33        		.byte	51
 2592 0249 03        		.byte	3
 2593 024a 06        		.byte	6
 2594 024b 3E        		.byte	62
 2595 024c 66        		.byte	102
 2596 024d 0C        		.byte	12
 2597 024e 18        		.byte	24
 2598 024f 36        		.byte	54
 2599 0250 0C        		.byte	12
 2600 0251 63        		.byte	99
 2601 0252 33        		.byte	51
 2602 0253 33        		.byte	51
 2603 0254 3E        		.byte	62
 2604 0255 3E        		.byte	62
 2605 0256 06        		.byte	6
 2606 0257 30        		.byte	48
 2607 0258 2C        		.byte	44
 2608 0259 33        		.byte	51
 2609 025a 1E        		.byte	30
 2610 025b 7F        		.byte	127
 2611 025c 36        		.byte	54
 2612 025d 3E        		.byte	62
 2613 025e 26        		.byte	38
 2614 025f 0C        		.byte	12
 2615 0260 18        		.byte	24
 2616 0261 0C        		.byte	12
 2617 0262 00        		.byte	0
 2618 0263 F3        		.byte	-13
 2619 0264 00        		.byte	0
 2620 0265 0C        		.byte	12
 2621 0266 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 124


 2622 0267 36        		.byte	54
 2623 0268 0C        		.byte	12
 2624 0269 63        		.byte	99
 2625 026a 6E        		.byte	110
 2626 026b 00        		.byte	0
 2627 026c 18        		.byte	24
 2628 026d 06        		.byte	6
 2629 026e 00        		.byte	0
 2630 026f 00        		.byte	0
 2631 0270 0C        		.byte	12
 2632 0271 00        		.byte	0
 2633 0272 0C        		.byte	12
 2634 0273 01        		.byte	1
 2635 0274 1E        		.byte	30
 2636 0275 3F        		.byte	63
 2637 0276 3F        		.byte	63
 2638 0277 1E        		.byte	30
 2639 0278 30        		.byte	48
 2640 0279 1E        		.byte	30
 2641 027a 1E        		.byte	30
 2642 027b 06        		.byte	6
 2643 027c 1E        		.byte	30
 2644 027d 0E        		.byte	14
 2645 027e 0C        		.byte	12
 2646 027f 0C        		.byte	12
 2647 0280 18        		.byte	24
 2648 0281 00        		.byte	0
 2649 0282 06        		.byte	6
 2650 0283 0C        		.byte	12
 2651 0284 1E        		.byte	30
 2652 0285 33        		.byte	51
 2653 0286 3F        		.byte	63
 2654 0287 3C        		.byte	60
 2655 0288 3F        		.byte	63
 2656 0289 7F        		.byte	127
 2657 028a 0F        		.byte	15
 2658 028b 7C        		.byte	124
 2659 028c 33        		.byte	51
 2660 028d 1E        		.byte	30
 2661 028e 1E        		.byte	30
 2662 028f 67        		.byte	103
 2663 0290 7F        		.byte	127
 2664 0291 63        		.byte	99
 2665 0292 63        		.byte	99
 2666 0293 1C        		.byte	28
 2667 0294 0F        		.byte	15
 2668 0295 38        		.byte	56
 2669 0296 67        		.byte	103
 2670 0297 1E        		.byte	30
 2671 0298 1E        		.byte	30
 2672 0299 3F        		.byte	63
 2673 029a 0C        		.byte	12
 2674 029b 63        		.byte	99
 2675 029c 63        		.byte	99
 2676 029d 1E        		.byte	30
 2677 029e 7F        		.byte	127
 2678 029f 1E        		.byte	30
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 125


 2679 02a0 40        		.byte	64
 2680 02a1 1E        		.byte	30
 2681 02a2 00        		.byte	0
 2682 02a3 00        		.byte	0
 2683 02a4 00        		.byte	0
 2684 02a5 6E        		.byte	110
 2685 02a6 3D        		.byte	61
 2686 02a7 1E        		.byte	30
 2687 02a8 6E        		.byte	110
 2688 02a9 1E        		.byte	30
 2689 02aa 0F        		.byte	15
 2690 02ab 30        		.byte	48
 2691 02ac 67        		.byte	103
 2692 02ad 1E        		.byte	30
 2693 02ae 1B        		.byte	27
 2694 02af 67        		.byte	103
 2695 02b0 1E        		.byte	30
 2696 02b1 63        		.byte	99
 2697 02b2 33        		.byte	51
 2698 02b3 1E        		.byte	30
 2699 02b4 06        		.byte	6
 2700 02b5 30        		.byte	48
 2701 02b6 0F        		.byte	15
 2702 02b7 1F        		.byte	31
 2703 02b8 18        		.byte	24
 2704 02b9 6E        		.byte	110
 2705 02ba 0C        		.byte	12
 2706 02bb 36        		.byte	54
 2707 02bc 63        		.byte	99
 2708 02bd 30        		.byte	48
 2709 02be 3F        		.byte	63
 2710 02bf 38        		.byte	56
 2711 02c0 18        		.byte	24
 2712 02c1 07        		.byte	7
 2713 02c2 00        		.byte	0
 2714 02c3 46        		.byte	70
 2715 02c4 00        		.byte	0
 2716 02c5 00        		.byte	0
 2717 02c6 00        		.byte	0
 2718 02c7 00        		.byte	0
 2719 02c8 00        		.byte	0
 2720 02c9 00        		.byte	0
 2721 02ca 00        		.byte	0
 2722 02cb 00        		.byte	0
 2723 02cc 00        		.byte	0
 2724 02cd 00        		.byte	0
 2725 02ce 00        		.byte	0
 2726 02cf 00        		.byte	0
 2727 02d0 06        		.byte	6
 2728 02d1 00        		.byte	0
 2729 02d2 00        		.byte	0
 2730 02d3 00        		.byte	0
 2731 02d4 00        		.byte	0
 2732 02d5 00        		.byte	0
 2733 02d6 00        		.byte	0
 2734 02d7 00        		.byte	0
 2735 02d8 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 126


 2736 02d9 00        		.byte	0
 2737 02da 00        		.byte	0
 2738 02db 00        		.byte	0
 2739 02dc 00        		.byte	0
 2740 02dd 00        		.byte	0
 2741 02de 00        		.byte	0
 2742 02df 06        		.byte	6
 2743 02e0 00        		.byte	0
 2744 02e1 00        		.byte	0
 2745 02e2 00        		.byte	0
 2746 02e3 00        		.byte	0
 2747 02e4 00        		.byte	0
 2748 02e5 00        		.byte	0
 2749 02e6 00        		.byte	0
 2750 02e7 00        		.byte	0
 2751 02e8 00        		.byte	0
 2752 02e9 00        		.byte	0
 2753 02ea 00        		.byte	0
 2754 02eb 00        		.byte	0
 2755 02ec 00        		.byte	0
 2756 02ed 00        		.byte	0
 2757 02ee 00        		.byte	0
 2758 02ef 00        		.byte	0
 2759 02f0 00        		.byte	0
 2760 02f1 00        		.byte	0
 2761 02f2 00        		.byte	0
 2762 02f3 00        		.byte	0
 2763 02f4 00        		.byte	0
 2764 02f5 00        		.byte	0
 2765 02f6 00        		.byte	0
 2766 02f7 00        		.byte	0
 2767 02f8 00        		.byte	0
 2768 02f9 00        		.byte	0
 2769 02fa 00        		.byte	0
 2770 02fb 00        		.byte	0
 2771 02fc 00        		.byte	0
 2772 02fd 00        		.byte	0
 2773 02fe 00        		.byte	0
 2774 02ff 00        		.byte	0
 2775 0300 00        		.byte	0
 2776 0301 00        		.byte	0
 2777 0302 00        		.byte	0
 2778 0303 FF        		.byte	-1
 2779 0304 00        		.byte	0
 2780 0305 00        		.byte	0
 2781 0306 00        		.byte	0
 2782 0307 00        		.byte	0
 2783 0308 00        		.byte	0
 2784 0309 00        		.byte	0
 2785 030a 00        		.byte	0
 2786 030b 1F        		.byte	31
 2787 030c 00        		.byte	0
 2788 030d 00        		.byte	0
 2789 030e 0E        		.byte	14
 2790 030f 00        		.byte	0
 2791 0310 00        		.byte	0
 2792 0311 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 127


 2793 0312 00        		.byte	0
 2794 0313 00        		.byte	0
 2795 0314 0F        		.byte	15
 2796 0315 78        		.byte	120
 2797 0316 00        		.byte	0
 2798 0317 00        		.byte	0
 2799 0318 00        		.byte	0
 2800 0319 00        		.byte	0
 2801 031a 00        		.byte	0
 2802 031b 00        		.byte	0
 2803 031c 00        		.byte	0
 2804 031d 1F        		.byte	31
 2805 031e 00        		.byte	0
 2806 031f 00        		.byte	0
 2807 0320 00        		.byte	0
 2808 0321 00        		.byte	0
 2809 0322 00        		.byte	0
 2810 0323 F4        		.byte	-12
 2811               	.global	dataEnable
 2812               	.global	dataEnable
 2813               		.section .bss
 2814               		.type	dataEnable, @object
 2815               		.size	dataEnable, 1
 2816               	dataEnable:
 2817 0000 00        		.skip 1,0
 2818               	.global	vSync
 2819               	.global	vSync
 2820               		.type	vSync, @object
 2821               		.size	vSync, 1
 2822               	vSync:
 2823 0001 00        		.skip 1,0
 2824               	.global	hsyncCount
 2825               	.global	hsyncCount
 2826               		.type	hsyncCount, @object
 2827               		.size	hsyncCount, 2
 2828               	hsyncCount:
 2829 0002 0000      		.skip 2,0
 2830               	.global	segPosition
 2831               	.global	segPosition
 2832               		.type	segPosition, @object
 2833               		.size	segPosition, 1
 2834               	segPosition:
 2835 0004 00        		.skip 1,0
 2836               		.lcomm last_rbValue.2004,1
 2837               		.section	.progmem.data
 2838               		.type	__c.1822, @object
 2839               		.size	__c.1822, 49
 2840               	__c.1822:
 2841 0324 2054 6865 		.string	" The Quick Brown Fox Jumped Over The Lazy Dog! \177"
 2841      2051 7569 
 2841      636B 2042 
 2841      726F 776E 
 2841      2046 6F78 
 2842               		.lcomm frameCount.1804,1
 2843               		.lcomm lastThetaOffset.1803,2
 2844               		.lcomm frameCount.1790,1
 2845               		.comm rowSegBuffer,122,1
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 128


 2846               		.stabs	"header:G(0,16)=ar(0,17)=r(0,17);0;0177777;;0;35;(3,2)",32,0,16,0
 2847               		.stabs	"characters:G(0,18)=ar(0,17);0;7;(0,19)=ar(0,17);0;95;(3,2)",32,0,30,0
 2848               		.stabs	"rowSegBuffer:G(0,20)=ar(0,17);0;60;(13,2)",32,0,21,0
 2849               		.stabs	"segPosition:G(3,2)",32,0,41,0
 2850               		.stabs	"dataEnable:G(3,2)",32,0,1144,0
 2851               		.stabs	"vSync:G(3,2)",32,0,1145,0
 2852               		.stabs	"hsyncCount:G(3,4)",32,0,1146,0
 2853               		.text
 2854               		.stabs	"",100,0,0,.Letext0
 2855               	.Letext0:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s 			page 129


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:2      *ABS*:0000003f __SREG__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:3      *ABS*:0000003e __SP_H__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:4      *ABS*:0000003d __SP_L__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:5      *ABS*:00000000 __tmp_reg__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:6      *ABS*:00000001 __zero_reg__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:112    .text:00000000 pll_enable
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:186    .text:00000020 lvds_timerInit
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:278    .text:0000006e lcd_Init
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:304    .text:00000078 segClear
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:2834   .bss:00000004 segPosition
                            *COM*:0000007a rowSegBuffer
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:335    .text:0000008a segTerminate
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:412    .text:000000e2 newSeg
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:532    .text:00000162 stretchSeg
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:636    .text:000001c0 addSeg
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:693    .text:000001f6 rbpix_to_seg
                             .bss:00000005 last_rbValue.2004
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:785    .text:0000025c rsb_drawPix
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:804    .text:00000264 LoadNext_429
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:840    .text:000002a8 Done_429
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:820    .text:00000282 Counter_429
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:898    .text:000002c2 updateLCD
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:2828   .bss:00000002 hsyncCount
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:2816   .bss:00000000 dataEnable
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:2822   .bss:00000001 vSync
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:1115   .text:00000370 init_timer0Hsync
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:1155   .text:0000038a main
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:1180   .text:00000390 segSine_loadRow
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:2842   .bss:00000007 lastThetaOffset.1803
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:2836   .bss:00000006 frameCount.1804
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:2042   .progmem.data:00000024 characters
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:2840   .progmem.data:00000324 __c.1822
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:1952   .text:00000748 __vector_14
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:2843   .bss:00000009 frameCount.1790
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//ccWqDd9I.s:2037   .progmem.data:00000000 header

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
timer_setWGM
timer_selectDivisor
timer_compareMatchIntSetup
sineRaw8
__mulhi3
__udivmodhi4
strncpy_P
strlen_P
