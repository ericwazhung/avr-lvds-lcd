GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 1


   1               		.file	"main.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.stabs	"/Users/meh/_avrProjects/LCDdirectLVDS/94-regitting/",100,0,2,.Ltext0
   8               		.stabs	"main.c",100,0,2,.Ltext0
   9               		.text
  10               	.Ltext0:
  11               		.stabs	"gcc2_compiled.",60,0,0,0
  12               		.stabs	"int:t(0,1)=r(0,1);-32768;32767;",128,0,0,0
  13               		.stabs	"char:t(0,2)=@s8;r(0,2);0;255;",128,0,0,0
  14               		.stabs	"long int:t(0,3)=@s32;r(0,3);020000000000;017777777777;",128,0,0,0
  15               		.stabs	"unsigned int:t(0,4)=r(0,4);0;0177777;",128,0,0,0
  16               		.stabs	"long unsigned int:t(0,5)=@s32;r(0,5);0;037777777777;",128,0,0,0
  17               		.stabs	"long long int:t(0,6)=@s64;r(0,6);01000000000000000000000;0777777777777777777777;",128,0,0,
  18               		.stabs	"long long unsigned int:t(0,7)=@s64;r(0,7);0;01777777777777777777777;",128,0,0,0
  19               		.stabs	"short int:t(0,8)=r(0,8);-32768;32767;",128,0,0,0
  20               		.stabs	"short unsigned int:t(0,9)=r(0,9);0;0177777;",128,0,0,0
  21               		.stabs	"signed char:t(0,10)=@s8;r(0,10);-128;127;",128,0,0,0
  22               		.stabs	"unsigned char:t(0,11)=@s8;r(0,11);0;255;",128,0,0,0
  23               		.stabs	"float:t(0,12)=r(0,1);4;0;",128,0,0,0
  24               		.stabs	"double:t(0,13)=r(0,1);4;0;",128,0,0,0
  25               		.stabs	"long double:t(0,14)=r(0,1);4;0;",128,0,0,0
  26               		.stabs	"short _Fract:t(0,15)=r(0,1);1;0;",128,0,0,0
  27               		.stabs	"_Fract:t(0,16)=r(0,1);2;0;",128,0,0,0
  28               		.stabs	"long _Fract:t(0,17)=r(0,1);4;0;",128,0,0,0
  29               		.stabs	"long long _Fract:t(0,18)=r(0,1);8;0;",128,0,0,0
  30               		.stabs	"unsigned short _Fract:t(0,19)=r(0,1);1;0;",128,0,0,0
  31               		.stabs	"unsigned _Fract:t(0,20)=r(0,1);2;0;",128,0,0,0
  32               		.stabs	"unsigned long _Fract:t(0,21)=r(0,1);4;0;",128,0,0,0
  33               		.stabs	"unsigned long long _Fract:t(0,22)=r(0,1);8;0;",128,0,0,0
  34               		.stabs	"_Sat short _Fract:t(0,23)=r(0,1);1;0;",128,0,0,0
  35               		.stabs	"_Sat _Fract:t(0,24)=r(0,1);2;0;",128,0,0,0
  36               		.stabs	"_Sat long _Fract:t(0,25)=r(0,1);4;0;",128,0,0,0
  37               		.stabs	"_Sat long long _Fract:t(0,26)=r(0,1);8;0;",128,0,0,0
  38               		.stabs	"_Sat unsigned short _Fract:t(0,27)=r(0,1);1;0;",128,0,0,0
  39               		.stabs	"_Sat unsigned _Fract:t(0,28)=r(0,1);2;0;",128,0,0,0
  40               		.stabs	"_Sat unsigned long _Fract:t(0,29)=r(0,1);4;0;",128,0,0,0
  41               		.stabs	"_Sat unsigned long long _Fract:t(0,30)=r(0,1);8;0;",128,0,0,0
  42               		.stabs	"short _Accum:t(0,31)=r(0,1);2;0;",128,0,0,0
  43               		.stabs	"_Accum:t(0,32)=r(0,1);4;0;",128,0,0,0
  44               		.stabs	"long _Accum:t(0,33)=r(0,1);8;0;",128,0,0,0
  45               		.stabs	"long long _Accum:t(0,34)=r(0,1);8;0;",128,0,0,0
  46               		.stabs	"unsigned short _Accum:t(0,35)=r(0,1);2;0;",128,0,0,0
  47               		.stabs	"unsigned _Accum:t(0,36)=r(0,1);4;0;",128,0,0,0
  48               		.stabs	"unsigned long _Accum:t(0,37)=r(0,1);8;0;",128,0,0,0
  49               		.stabs	"unsigned long long _Accum:t(0,38)=r(0,1);8;0;",128,0,0,0
  50               		.stabs	"_Sat short _Accum:t(0,39)=r(0,1);2;0;",128,0,0,0
  51               		.stabs	"_Sat _Accum:t(0,40)=r(0,1);4;0;",128,0,0,0
  52               		.stabs	"_Sat long _Accum:t(0,41)=r(0,1);8;0;",128,0,0,0
  53               		.stabs	"_Sat long long _Accum:t(0,42)=r(0,1);8;0;",128,0,0,0
  54               		.stabs	"_Sat unsigned short _Accum:t(0,43)=r(0,1);2;0;",128,0,0,0
  55               		.stabs	"_Sat unsigned _Accum:t(0,44)=r(0,1);4;0;",128,0,0,0
  56               		.stabs	"_Sat unsigned long _Accum:t(0,45)=r(0,1);8;0;",128,0,0,0
  57               		.stabs	"_Sat unsigned long long _Accum:t(0,46)=r(0,1);8;0;",128,0,0,0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 2


  58               		.stabs	"void:t(0,47)=(0,47)",128,0,0,0
  59               		.stabs	"projInfo.h",130,0,0,0
  60               		.stabs	"/opt/local/avr/include/inttypes.h",130,0,0,0
  61               		.stabs	"/opt/local/lib/gcc/avr/4.8.2/include/stdint.h",130,0,0,0
  62               		.stabs	"/opt/local/avr/include/stdint.h",130,0,0,0
  63               		.stabs	"int8_t:t(4,1)=(0,10)",128,0,121,0
  64               		.stabs	"uint8_t:t(4,2)=(0,11)",128,0,122,0
  65               		.stabs	"int16_t:t(4,3)=(0,1)",128,0,123,0
  66               		.stabs	"uint16_t:t(4,4)=(0,4)",128,0,124,0
  67               		.stabs	"int32_t:t(4,5)=(0,3)",128,0,125,0
  68               		.stabs	"uint32_t:t(4,6)=(0,5)",128,0,126,0
  69               		.stabs	"int64_t:t(4,7)=(0,6)",128,0,128,0
  70               		.stabs	"uint64_t:t(4,8)=(0,7)",128,0,129,0
  71               		.stabs	"intptr_t:t(4,9)=(4,3)",128,0,142,0
  72               		.stabs	"uintptr_t:t(4,10)=(4,4)",128,0,147,0
  73               		.stabs	"int_least8_t:t(4,11)=(4,1)",128,0,159,0
  74               		.stabs	"uint_least8_t:t(4,12)=(4,2)",128,0,164,0
  75               		.stabs	"int_least16_t:t(4,13)=(4,3)",128,0,169,0
  76               		.stabs	"uint_least16_t:t(4,14)=(4,4)",128,0,174,0
  77               		.stabs	"int_least32_t:t(4,15)=(4,5)",128,0,179,0
  78               		.stabs	"uint_least32_t:t(4,16)=(4,6)",128,0,184,0
  79               		.stabs	"int_least64_t:t(4,17)=(4,7)",128,0,192,0
  80               		.stabs	"uint_least64_t:t(4,18)=(4,8)",128,0,199,0
  81               		.stabs	"int_fast8_t:t(4,19)=(4,1)",128,0,213,0
  82               		.stabs	"uint_fast8_t:t(4,20)=(4,2)",128,0,218,0
  83               		.stabs	"int_fast16_t:t(4,21)=(4,3)",128,0,223,0
  84               		.stabs	"uint_fast16_t:t(4,22)=(4,4)",128,0,228,0
  85               		.stabs	"int_fast32_t:t(4,23)=(4,5)",128,0,233,0
  86               		.stabs	"uint_fast32_t:t(4,24)=(4,6)",128,0,238,0
  87               		.stabs	"int_fast64_t:t(4,25)=(4,7)",128,0,246,0
  88               		.stabs	"uint_fast64_t:t(4,26)=(4,8)",128,0,253,0
  89               		.stabs	"intmax_t:t(4,27)=(4,7)",128,0,273,0
  90               		.stabs	"uintmax_t:t(4,28)=(4,8)",128,0,278,0
  91               		.stabn	162,0,0,0
  92               		.stabn	162,0,0,0
  93               		.stabs	"int_farptr_t:t(2,1)=(4,5)",128,0,77,0
  94               		.stabs	"uint_farptr_t:t(2,2)=(4,6)",128,0,81,0
  95               		.stabn	162,0,0,0
  96               		.stabn	162,0,0,0
  97               		.stabs	"main.h",130,0,0,0
  98               		.stabs	"/opt/local/avr/include/avr/io.h",130,0,0,0
  99               		.stabs	"/opt/local/avr/include/avr/fuse.h",130,0,0,0
 100               		.stabs	"__fuse_t:t(7,1)=(7,2)=s3low:(0,11),0,8;high:(0,11),8,8;extended:(0,11),16,8;;",128,0,244,0
 101               		.stabn	162,0,0,0
 102               		.stabn	162,0,0,0
 103               		.stabs	"/opt/local/avr/include/stdlib.h",130,0,0,0
 104               		.stabs	"/opt/local/lib/gcc/avr/4.8.2/include/stddef.h",130,0,0,0
 105               		.stabs	"size_t:t(9,1)=(0,4)",128,0,212,0
 106               		.stabs	"wchar_t:t(9,2)=(0,1)",128,0,324,0
 107               		.stabn	162,0,0,0
 108               		.stabs	"div_t:t(8,1)=(8,2)=s4quot:(0,1),0,16;rem:(0,1),16,16;;",128,0,71,0
 109               		.stabs	"ldiv_t:t(8,3)=(8,4)=s8quot:(0,3),0,32;rem:(0,3),32,32;;",128,0,77,0
 110               		.stabs	"__compar_fn_t:t(8,5)=(8,6)=*(8,7)=f(0,1)",128,0,80,0
 111               		.stabn	162,0,0,0
 112               		.stabs	"_commonCode_localized/heartbeat/1.50/heartbeat.h",130,0,0,0
 113               		.stabs	"./_commonCode_localized/hfModulation/1.00/hfModulation.h",130,0,0,0
 114               		.stabs	"hfm_t:t(11,1)=(11,2)=B(11,3)=s4desiredSum:(4,3),0,16;maxPower:(4,2),16,8;power:(4,2),24,8;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 3


 115               		.stabn	162,0,0,0
 116               		.stabn	162,0,0,0
 117               		.stabn	162,0,0,0
 118               		.stabs	"/opt/local/avr/include/avr/pgmspace.h",130,0,0,0
 119               		.stabs	"prog_void:t(12,1)=(12,2)=(12,2)",128,0,349,0
 120               		.stabs	"prog_char:t(12,3)=(12,4)=@s8;r(12,4);0;255;",128,0,350,0
 121               		.stabs	"prog_uchar:t(12,5)=(12,6)=@s8;r(12,6);0;255;",128,0,351,0
 122               		.stabs	"prog_int8_t:t(12,7)=(12,8)=(0,10)",128,0,352,0
 123               		.stabs	"prog_uint8_t:t(12,9)=(12,10)=(0,11)",128,0,353,0
 124               		.stabs	"prog_int16_t:t(12,11)=(12,12)=(0,1)",128,0,354,0
 125               		.stabs	"prog_uint16_t:t(12,13)=(12,14)=(0,4)",128,0,355,0
 126               		.stabs	"prog_int32_t:t(12,15)=(12,16)=(0,3)",128,0,356,0
 127               		.stabs	"prog_uint32_t:t(12,17)=(12,18)=(0,5)",128,0,357,0
 128               		.stabs	"prog_int64_t:t(12,19)=(12,20)=(0,6)",128,0,359,0
 129               		.stabs	"prog_uint64_t:t(12,21)=(12,22)=(0,7)",128,0,360,0
 130               		.stabn	162,0,0,0
 131               		.stabs	"_commonCode_localized/sineTable/0.99/sineTable.h",130,0,0,0
 132               		.stabs	"theta_t:t(13,1)=(4,3)",128,0,97,0
 133               		.stabs	"sine_t:t(13,2)=(4,3)",128,0,124,0
 134               		.stabs	"mult_t:t(13,3)=(4,5)",128,0,127,0
 135               		.stabs	"axis_t:t(13,4)=(4,5)",128,0,144,0
 136               		.stabn	162,0,0,0
 137               		.stabs	"pll_enable:F(0,47)",36,0,59,pll_enable
 138               	.global	pll_enable
 139               		.type	pll_enable, @function
 140               	pll_enable:
 141               		.stabd	46,0,0
 142               		.stabs	"./pll.c",132,0,0,.Ltext1
 143               	.Ltext1:
   1:./pll.c       **** /* mehPL:
   2:./pll.c       ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:./pll.c       ****  *    I'm not too fond of long licenses at the top of the file.
   4:./pll.c       ****  *    Please see the bottom.
   5:./pll.c       ****  *    Enjoy!
   6:./pll.c       ****  */
   7:./pll.c       **** 
   8:./pll.c       **** 
   9:./pll.c       **** 
  10:./pll.c       **** #ifndef __PLL_C__
  11:./pll.c       **** #define __PLL_C__
  12:./pll.c       **** 
  13:./pll.c       **** #include _BITHANDLING_HEADER_
  14:./pll.c       **** #include <util/delay.h> //For delay_us in pll_enable
  15:./pll.c       **** 
  16:./pll.c       **** 
  17:./pll.c       **** 
  18:./pll.c       **** 
  19:./pll.c       **** #if(defined(__AVR_AT90PWM161__))
  20:./pll.c       **** //PWM161 notes:
  21:./pll.c       **** // The PWM161 has a PLL Multiplication-Factor which can be adjusted
  22:./pll.c       **** //  4-8x the source-clock, with every step between
  23:./pll.c       **** //  This could be AWESOME for LVDS, with a multiplcation-factor of 7...?
  24:./pll.c       **** // "When Vcc is below 4.5V, maximum PLL-factor is 6"
  25:./pll.c       **** //  we'll see. Best stick with 8 for now, since all the math relies on it.
  26:./pll.c       **** //  But look here if it doesn't seem to be syncing...
  27:./pll.c       **** #warning "PLL_MULT_FACTOR defaults to 8, which is allegedly too fast for 3.3V"
  28:./pll.c       **** #define PLL_MULT_FACTOR	8
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 4


  29:./pll.c       **** // "PLLF3 is used for debug purpose", its value is always 0
  30:./pll.c       **** // The PLLF3:0 bits are used to set the multiplication-factor
  31:./pll.c       **** //  They're shifted two bits left
  32:./pll.c       **** //  And 2 is added to the value written to these bits to determine the
  33:./pll.c       **** //  multiplication-factor...
  34:./pll.c       **** #define PLL_MULT_MASK	(0x07<<2)
  35:./pll.c       **** 
  36:./pll.c       **** #define pll_setMult(factor) \
  37:./pll.c       **** 			writeMasked(((factor-2)<<2), PLL_MULT_MASK, PLLCSR)
  38:./pll.c       **** 
  39:./pll.c       **** 
  40:./pll.c       **** // The pll_enable procedure isn't quite so clearly-defined...
  41:./pll.c       **** //   there's no step-by-step procedure I've found so far.
  42:./pll.c       **** //p271 Table 22-4 says the maximum PLL lock-in-time is 64us, so 100 should
  43:./pll.c       **** //be fine.
  44:./pll.c       **** 
  45:./pll.c       **** #endif
  46:./pll.c       **** 
  47:./pll.c       **** 
  48:./pll.c       **** //pll_enable does just what it says, using instructions from the ATtiny861
  49:./pll.c       **** //   manual.
  50:./pll.c       **** //   The PLL is used, in all cases, for the FPD-Link signals (generated by
  51:./pll.c       **** //   Timer1's PWM). But, it may be prescaled back down to CPU-speeds or
  52:./pll.c       **** //   even lower. Also, when PLL_SYSCLK is true, the PLL is actually used to
  53:./pll.c       **** //   drive the CPU... I don't fully comprehend how this works, because the
  54:./pll.c       **** //   pll_enable can't be called *before* the system boots... Anyways, It
  55:./pll.c       **** //   seems to work, regardless, and calling pll_enable() in this mode
  56:./pll.c       **** //   doesn't seem to cause any problems.
  57:./pll.c       **** 
  58:./pll.c       **** 
  59:./pll.c       **** void pll_enable(void)
  60:./pll.c       **** {
 144               		.stabn	68,0,60,.LM0-.LFBB1
 145               	.LM0:
 146               	.LFBB1:
 147               	/* prologue: function */
 148               	/* frame size = 0 */
 149               	/* stack size = 0 */
 150               	.L__stack_usage = 0
  61:./pll.c       **** #if(defined(__AVR_AT90PWM161__))
  62:./pll.c       **** 	pll_setMult(PLL_MULT_FACTOR);
  63:./pll.c       **** #endif
  64:./pll.c       ****    //Stolen from threePinIDer109t:
  65:./pll.c       **** 
  66:./pll.c       ****    //Set Timer1 to use the "asynchronous clock source" (PLL at 64MHz)
  67:./pll.c       ****    // With phase-correct PWM (256 steps up, then back down) and CLKDIV1
  68:./pll.c       ****    // this is 64MHz/512=125kHz
  69:./pll.c       ****    // The benefit of such high PWM frequency is the low RC values necessary
  70:./pll.c       ****    //  for filtering to DC.
  71:./pll.c       **** 	// From the ATtiny861 manual:
  72:./pll.c       **** 	// "To change Timer/Counter1 to the async mode follow this procedure"
  73:./pll.c       ****    // 1: Enable the PLL
  74:./pll.c       ****    setbit(PLLE, PLLCSR);
 151               		.stabn	68,0,74,.LM1-.LFBB1
 152               	.LM1:
 153 0000 89B5      		in r24,0x29
 154 0002 8260      		ori r24,lo8(2)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 5


 155 0004 89BD      		out 0x29,r24
 156               	.LBB42:
 157               	.LBB43:
 158               		.stabs	"/opt/local/avr/include/util/delay.h",132,0,0,.Ltext2
 159               	.Ltext2:
   1:/opt/local/avr/include/util/delay.h **** /* Copyright (c) 2002, Marek Michalkiewicz
   2:/opt/local/avr/include/util/delay.h ****    Copyright (c) 2004,2005,2007 Joerg Wunsch
   3:/opt/local/avr/include/util/delay.h ****    Copyright (c) 2007  Florin-Viorel Petrov
   4:/opt/local/avr/include/util/delay.h ****    All rights reserved.
   5:/opt/local/avr/include/util/delay.h **** 
   6:/opt/local/avr/include/util/delay.h ****    Redistribution and use in source and binary forms, with or without
   7:/opt/local/avr/include/util/delay.h ****    modification, are permitted provided that the following conditions are met:
   8:/opt/local/avr/include/util/delay.h **** 
   9:/opt/local/avr/include/util/delay.h ****    * Redistributions of source code must retain the above copyright
  10:/opt/local/avr/include/util/delay.h ****      notice, this list of conditions and the following disclaimer.
  11:/opt/local/avr/include/util/delay.h **** 
  12:/opt/local/avr/include/util/delay.h ****    * Redistributions in binary form must reproduce the above copyright
  13:/opt/local/avr/include/util/delay.h ****      notice, this list of conditions and the following disclaimer in
  14:/opt/local/avr/include/util/delay.h ****      the documentation and/or other materials provided with the
  15:/opt/local/avr/include/util/delay.h ****      distribution.
  16:/opt/local/avr/include/util/delay.h **** 
  17:/opt/local/avr/include/util/delay.h ****    * Neither the name of the copyright holders nor the names of
  18:/opt/local/avr/include/util/delay.h ****      contributors may be used to endorse or promote products derived
  19:/opt/local/avr/include/util/delay.h ****      from this software without specific prior written permission.
  20:/opt/local/avr/include/util/delay.h **** 
  21:/opt/local/avr/include/util/delay.h ****   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  22:/opt/local/avr/include/util/delay.h ****   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  23:/opt/local/avr/include/util/delay.h ****   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  24:/opt/local/avr/include/util/delay.h ****   ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
  25:/opt/local/avr/include/util/delay.h ****   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  26:/opt/local/avr/include/util/delay.h ****   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  27:/opt/local/avr/include/util/delay.h ****   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  28:/opt/local/avr/include/util/delay.h ****   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  29:/opt/local/avr/include/util/delay.h ****   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  30:/opt/local/avr/include/util/delay.h ****   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  31:/opt/local/avr/include/util/delay.h ****   POSSIBILITY OF SUCH DAMAGE. */
  32:/opt/local/avr/include/util/delay.h **** 
  33:/opt/local/avr/include/util/delay.h **** /* $Id: delay.h.in 2385 2013-05-03 13:14:20Z joerg_wunsch $ */
  34:/opt/local/avr/include/util/delay.h **** 
  35:/opt/local/avr/include/util/delay.h **** #ifndef _UTIL_DELAY_H_
  36:/opt/local/avr/include/util/delay.h **** #define _UTIL_DELAY_H_ 1
  37:/opt/local/avr/include/util/delay.h **** 
  38:/opt/local/avr/include/util/delay.h **** #ifndef __HAS_DELAY_CYCLES
  39:/opt/local/avr/include/util/delay.h **** #define __HAS_DELAY_CYCLES 1
  40:/opt/local/avr/include/util/delay.h **** #endif
  41:/opt/local/avr/include/util/delay.h **** 
  42:/opt/local/avr/include/util/delay.h **** #include <inttypes.h>
  43:/opt/local/avr/include/util/delay.h **** #include <util/delay_basic.h>
  44:/opt/local/avr/include/util/delay.h **** #include <math.h>
  45:/opt/local/avr/include/util/delay.h **** 
  46:/opt/local/avr/include/util/delay.h **** /** \file */
  47:/opt/local/avr/include/util/delay.h **** /** \defgroup util_delay <util/delay.h>: Convenience functions for busy-wait delay loops
  48:/opt/local/avr/include/util/delay.h ****     \code
  49:/opt/local/avr/include/util/delay.h ****     #define F_CPU 1000000UL  // 1 MHz
  50:/opt/local/avr/include/util/delay.h ****     //#define F_CPU 14.7456E6
  51:/opt/local/avr/include/util/delay.h ****     #include <util/delay.h>
  52:/opt/local/avr/include/util/delay.h ****     \endcode
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 6


  53:/opt/local/avr/include/util/delay.h **** 
  54:/opt/local/avr/include/util/delay.h ****     \note As an alternative method, it is possible to pass the
  55:/opt/local/avr/include/util/delay.h ****     F_CPU macro down to the compiler from the Makefile.
  56:/opt/local/avr/include/util/delay.h ****     Obviously, in that case, no \c \#define statement should be
  57:/opt/local/avr/include/util/delay.h ****     used.
  58:/opt/local/avr/include/util/delay.h **** 
  59:/opt/local/avr/include/util/delay.h ****     The functions in this header file are wrappers around the basic
  60:/opt/local/avr/include/util/delay.h ****     busy-wait functions from <util/delay_basic.h>.  They are meant as
  61:/opt/local/avr/include/util/delay.h ****     convenience functions where actual time values can be specified
  62:/opt/local/avr/include/util/delay.h ****     rather than a number of cycles to wait for.  The idea behind is
  63:/opt/local/avr/include/util/delay.h ****     that compile-time constant expressions will be eliminated by
  64:/opt/local/avr/include/util/delay.h ****     compiler optimization so floating-point expressions can be used
  65:/opt/local/avr/include/util/delay.h ****     to calculate the number of delay cycles needed based on the CPU
  66:/opt/local/avr/include/util/delay.h ****     frequency passed by the macro F_CPU.
  67:/opt/local/avr/include/util/delay.h **** 
  68:/opt/local/avr/include/util/delay.h ****     \note In order for these functions to work as intended, compiler
  69:/opt/local/avr/include/util/delay.h ****     optimizations <em>must</em> be enabled, and the delay time
  70:/opt/local/avr/include/util/delay.h ****     <em>must</em> be an expression that is a known constant at
  71:/opt/local/avr/include/util/delay.h ****     compile-time.  If these requirements are not met, the resulting
  72:/opt/local/avr/include/util/delay.h ****     delay will be much longer (and basically unpredictable), and
  73:/opt/local/avr/include/util/delay.h ****     applications that otherwise do not use floating-point calculations
  74:/opt/local/avr/include/util/delay.h ****     will experience severe code bloat by the floating-point library
  75:/opt/local/avr/include/util/delay.h ****     routines linked into the application.
  76:/opt/local/avr/include/util/delay.h **** 
  77:/opt/local/avr/include/util/delay.h ****     The functions available allow the specification of microsecond, and
  78:/opt/local/avr/include/util/delay.h ****     millisecond delays directly, using the application-supplied macro
  79:/opt/local/avr/include/util/delay.h ****     F_CPU as the CPU clock frequency (in Hertz).
  80:/opt/local/avr/include/util/delay.h **** 
  81:/opt/local/avr/include/util/delay.h **** */
  82:/opt/local/avr/include/util/delay.h **** 
  83:/opt/local/avr/include/util/delay.h **** #if !defined(__DOXYGEN__)
  84:/opt/local/avr/include/util/delay.h **** static inline void _delay_us(double __us) __attribute__((always_inline));
  85:/opt/local/avr/include/util/delay.h **** static inline void _delay_ms(double __ms) __attribute__((always_inline));
  86:/opt/local/avr/include/util/delay.h **** #endif
  87:/opt/local/avr/include/util/delay.h **** 
  88:/opt/local/avr/include/util/delay.h **** #ifndef F_CPU
  89:/opt/local/avr/include/util/delay.h **** /* prevent compiler error by supplying a default */
  90:/opt/local/avr/include/util/delay.h **** # warning "F_CPU not defined for <util/delay.h>"
  91:/opt/local/avr/include/util/delay.h **** # define F_CPU 1000000UL
  92:/opt/local/avr/include/util/delay.h **** #endif
  93:/opt/local/avr/include/util/delay.h **** 
  94:/opt/local/avr/include/util/delay.h **** #ifndef __OPTIMIZE__
  95:/opt/local/avr/include/util/delay.h **** # warning "Compiler optimizations disabled; functions from <util/delay.h> won't work as designed"
  96:/opt/local/avr/include/util/delay.h **** #endif
  97:/opt/local/avr/include/util/delay.h **** 
  98:/opt/local/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
  99:/opt/local/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 100:/opt/local/avr/include/util/delay.h ****   __STDC_HOSTED__
 101:/opt/local/avr/include/util/delay.h **** #  include <math.h>
 102:/opt/local/avr/include/util/delay.h **** #endif
 103:/opt/local/avr/include/util/delay.h **** 
 104:/opt/local/avr/include/util/delay.h **** /**
 105:/opt/local/avr/include/util/delay.h ****    \ingroup util_delay
 106:/opt/local/avr/include/util/delay.h **** 
 107:/opt/local/avr/include/util/delay.h ****    Perform a delay of \c __ms milliseconds, using _delay_loop_2().
 108:/opt/local/avr/include/util/delay.h **** 
 109:/opt/local/avr/include/util/delay.h ****    The macro F_CPU is supposed to be defined to a
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 7


 110:/opt/local/avr/include/util/delay.h ****    constant defining the CPU clock frequency (in Hertz).
 111:/opt/local/avr/include/util/delay.h **** 
 112:/opt/local/avr/include/util/delay.h ****    The maximal possible delay is 262.14 ms / F_CPU in MHz.
 113:/opt/local/avr/include/util/delay.h **** 
 114:/opt/local/avr/include/util/delay.h ****    When the user request delay which exceed the maximum possible one,
 115:/opt/local/avr/include/util/delay.h ****    _delay_ms() provides a decreased resolution functionality. In this
 116:/opt/local/avr/include/util/delay.h ****    mode _delay_ms() will work with a resolution of 1/10 ms, providing
 117:/opt/local/avr/include/util/delay.h ****    delays up to 6.5535 seconds (independent from CPU frequency).  The
 118:/opt/local/avr/include/util/delay.h ****    user will not be informed about decreased resolution.
 119:/opt/local/avr/include/util/delay.h **** 
 120:/opt/local/avr/include/util/delay.h ****    If the avr-gcc toolchain has __builtin_avr_delay_cycles(unsigned long)
 121:/opt/local/avr/include/util/delay.h ****    support, maximal possible delay is 4294967.295 ms/ F_CPU in MHz. For
 122:/opt/local/avr/include/util/delay.h ****    values greater than the maximal possible delay, overflows results in
 123:/opt/local/avr/include/util/delay.h ****    no delay i.e., 0ms.
 124:/opt/local/avr/include/util/delay.h **** 
 125:/opt/local/avr/include/util/delay.h ****    Conversion of __us into clock cycles may not always result in integer.
 126:/opt/local/avr/include/util/delay.h ****    By default, the clock cycles rounded up to next integer. This ensures that
 127:/opt/local/avr/include/util/delay.h ****    the user gets atleast __us microseconds of delay.
 128:/opt/local/avr/include/util/delay.h **** 
 129:/opt/local/avr/include/util/delay.h ****    Alternatively, user can define __DELAY_ROUND_DOWN__ and __DELAY_ROUND_CLOSEST__
 130:/opt/local/avr/include/util/delay.h ****    to round down and round to closest integer.
 131:/opt/local/avr/include/util/delay.h **** 
 132:/opt/local/avr/include/util/delay.h ****    Note: The new implementation of _delay_ms(double __ms) with 
 133:/opt/local/avr/include/util/delay.h ****     __builtin_avr_delay_cycles(unsigned long) support is not backward compatible. 
 134:/opt/local/avr/include/util/delay.h ****    User can define __DELAY_BACKWARD_COMPATIBLE__ to get a backward compatible delay.
 135:/opt/local/avr/include/util/delay.h ****    Also, the backward compatible
 136:/opt/local/avr/include/util/delay.h ****    algorithm will be chosen if the code is compiled in a <em>freestanding
 137:/opt/local/avr/include/util/delay.h ****    environment</em> (GCC option \c -ffreestanding), as the math functions
 138:/opt/local/avr/include/util/delay.h ****    required for rounding are not available to the compiler then.
 139:/opt/local/avr/include/util/delay.h **** 
 140:/opt/local/avr/include/util/delay.h ****  */
 141:/opt/local/avr/include/util/delay.h **** void
 142:/opt/local/avr/include/util/delay.h **** _delay_ms(double __ms)
 143:/opt/local/avr/include/util/delay.h **** {
 144:/opt/local/avr/include/util/delay.h **** 	double __tmp ; 
 145:/opt/local/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 146:/opt/local/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 147:/opt/local/avr/include/util/delay.h ****   __STDC_HOSTED__
 148:/opt/local/avr/include/util/delay.h **** 	uint32_t __ticks_dc;
 149:/opt/local/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 150:/opt/local/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e3) * __ms;
 151:/opt/local/avr/include/util/delay.h **** 
 152:/opt/local/avr/include/util/delay.h **** 	#if defined(__DELAY_ROUND_DOWN__)
 153:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)fabs(__tmp);
 154:/opt/local/avr/include/util/delay.h **** 
 155:/opt/local/avr/include/util/delay.h **** 	#elif defined(__DELAY_ROUND_CLOSEST__)
 156:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(fabs(__tmp)+0.5);
 157:/opt/local/avr/include/util/delay.h **** 
 158:/opt/local/avr/include/util/delay.h **** 	#else
 159:/opt/local/avr/include/util/delay.h **** 		//round up by default
 160:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(ceil(fabs(__tmp)));
 161:/opt/local/avr/include/util/delay.h **** 	#endif
 162:/opt/local/avr/include/util/delay.h **** 
 163:/opt/local/avr/include/util/delay.h **** 	__builtin_avr_delay_cycles(__ticks_dc);
 164:/opt/local/avr/include/util/delay.h **** 
 165:/opt/local/avr/include/util/delay.h **** #else
 166:/opt/local/avr/include/util/delay.h **** 	uint16_t __ticks;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 8


 167:/opt/local/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 4e3) * __ms;
 168:/opt/local/avr/include/util/delay.h **** 	if (__tmp < 1.0)
 169:/opt/local/avr/include/util/delay.h **** 		__ticks = 1;
 170:/opt/local/avr/include/util/delay.h **** 	else if (__tmp > 65535)
 171:/opt/local/avr/include/util/delay.h **** 	{
 172:/opt/local/avr/include/util/delay.h **** 		//	__ticks = requested delay in 1/10 ms
 173:/opt/local/avr/include/util/delay.h **** 		__ticks = (uint16_t) (__ms * 10.0);
 174:/opt/local/avr/include/util/delay.h **** 		while(__ticks)
 175:/opt/local/avr/include/util/delay.h **** 		{
 176:/opt/local/avr/include/util/delay.h **** 			// wait 1/10 ms
 177:/opt/local/avr/include/util/delay.h **** 			_delay_loop_2(((F_CPU) / 4e3) / 10);
 178:/opt/local/avr/include/util/delay.h **** 			__ticks --;
 179:/opt/local/avr/include/util/delay.h **** 		}
 180:/opt/local/avr/include/util/delay.h **** 		return;
 181:/opt/local/avr/include/util/delay.h **** 	}
 182:/opt/local/avr/include/util/delay.h **** 	else
 183:/opt/local/avr/include/util/delay.h **** 		__ticks = (uint16_t)__tmp;
 184:/opt/local/avr/include/util/delay.h **** 	_delay_loop_2(__ticks);
 185:/opt/local/avr/include/util/delay.h **** #endif
 186:/opt/local/avr/include/util/delay.h **** }
 187:/opt/local/avr/include/util/delay.h **** 
 188:/opt/local/avr/include/util/delay.h **** /**
 189:/opt/local/avr/include/util/delay.h ****    \ingroup util_delay
 190:/opt/local/avr/include/util/delay.h **** 
 191:/opt/local/avr/include/util/delay.h ****    Perform a delay of \c __us microseconds, using _delay_loop_1().
 192:/opt/local/avr/include/util/delay.h **** 
 193:/opt/local/avr/include/util/delay.h ****    The macro F_CPU is supposed to be defined to a
 194:/opt/local/avr/include/util/delay.h ****    constant defining the CPU clock frequency (in Hertz).
 195:/opt/local/avr/include/util/delay.h **** 
 196:/opt/local/avr/include/util/delay.h ****    The maximal possible delay is 768 us / F_CPU in MHz.
 197:/opt/local/avr/include/util/delay.h **** 
 198:/opt/local/avr/include/util/delay.h ****    If the user requests a delay greater than the maximal possible one,
 199:/opt/local/avr/include/util/delay.h ****    _delay_us() will automatically call _delay_ms() instead.  The user
 200:/opt/local/avr/include/util/delay.h ****    will not be informed about this case.
 201:/opt/local/avr/include/util/delay.h **** 
 202:/opt/local/avr/include/util/delay.h ****    If the avr-gcc toolchain has __builtin_avr_delay_cycles(unsigned long)
 203:/opt/local/avr/include/util/delay.h ****    support, maximal possible delay is 4294967.295 us/ F_CPU in MHz. For
 204:/opt/local/avr/include/util/delay.h ****    values greater than the maximal possible delay, overflow results in
 205:/opt/local/avr/include/util/delay.h ****    no delay i.e., 0us.
 206:/opt/local/avr/include/util/delay.h ****   
 207:/opt/local/avr/include/util/delay.h ****    Conversion of __us into clock cycles may not always result in integer.
 208:/opt/local/avr/include/util/delay.h ****    By default, the clock cycles rounded up to next integer. This ensures that
 209:/opt/local/avr/include/util/delay.h ****    the user gets atleast __us microseconds of delay.
 210:/opt/local/avr/include/util/delay.h **** 
 211:/opt/local/avr/include/util/delay.h ****    Alternatively, user can define __DELAY_ROUND_DOWN__ and __DELAY_ROUND_CLOSEST__
 212:/opt/local/avr/include/util/delay.h ****    to round down and round to closest integer.
 213:/opt/local/avr/include/util/delay.h ****  
 214:/opt/local/avr/include/util/delay.h ****    Note: The new implementation of _delay_us(double __us) with 
 215:/opt/local/avr/include/util/delay.h ****     __builtin_avr_delay_cycles(unsigned long) support is not backward compatible.
 216:/opt/local/avr/include/util/delay.h ****    User can define __DELAY_BACKWARD_COMPATIBLE__ to get a backward compatible delay.
 217:/opt/local/avr/include/util/delay.h ****    Also, the backward compatible
 218:/opt/local/avr/include/util/delay.h ****    algorithm will be chosen if the code is compiled in a <em>freestanding
 219:/opt/local/avr/include/util/delay.h ****    environment</em> (GCC option \c -ffreestanding), as the math functions
 220:/opt/local/avr/include/util/delay.h ****    required for rounding are not available to the compiler then.
 221:/opt/local/avr/include/util/delay.h **** 
 222:/opt/local/avr/include/util/delay.h ****  */
 223:/opt/local/avr/include/util/delay.h **** void
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 9


 224:/opt/local/avr/include/util/delay.h **** _delay_us(double __us)
 225:/opt/local/avr/include/util/delay.h **** {
 226:/opt/local/avr/include/util/delay.h **** 	double __tmp ; 
 227:/opt/local/avr/include/util/delay.h **** #if __HAS_DELAY_CYCLES && defined(__OPTIMIZE__) && \
 228:/opt/local/avr/include/util/delay.h ****   !defined(__DELAY_BACKWARD_COMPATIBLE__) &&	   \
 229:/opt/local/avr/include/util/delay.h ****   __STDC_HOSTED__
 230:/opt/local/avr/include/util/delay.h **** 	uint32_t __ticks_dc;
 231:/opt/local/avr/include/util/delay.h **** 	extern void __builtin_avr_delay_cycles(unsigned long);
 232:/opt/local/avr/include/util/delay.h **** 	__tmp = ((F_CPU) / 1e6) * __us;
 233:/opt/local/avr/include/util/delay.h **** 
 234:/opt/local/avr/include/util/delay.h **** 	#if defined(__DELAY_ROUND_DOWN__)
 235:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)fabs(__tmp);
 236:/opt/local/avr/include/util/delay.h **** 
 237:/opt/local/avr/include/util/delay.h **** 	#elif defined(__DELAY_ROUND_CLOSEST__)
 238:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(fabs(__tmp)+0.5);
 239:/opt/local/avr/include/util/delay.h **** 
 240:/opt/local/avr/include/util/delay.h **** 	#else
 241:/opt/local/avr/include/util/delay.h **** 		//round up by default
 242:/opt/local/avr/include/util/delay.h **** 		__ticks_dc = (uint32_t)(ceil(fabs(__tmp)));
 243:/opt/local/avr/include/util/delay.h **** 	#endif
 244:/opt/local/avr/include/util/delay.h **** 
 245:/opt/local/avr/include/util/delay.h **** 	__builtin_avr_delay_cycles(__ticks_dc);
 160               		.stabn	68,0,245,.LM2-.LFBB1
 161               	.LM2:
 162 0006 8FE8      		ldi r24,lo8(399)
 163 0008 91E0      		ldi r25,hi8(399)
 164 000a 0197      		1: sbiw r24,1
 165 000c 01F4      		brne 1b
 166 000e 00C0      		rjmp .
 167 0010 0000      		nop
 168               	.L2:
 169               	.LBE43:
 170               	.LBE42:
 171               		.stabs	"./pll.c",132,0,0,.Ltext3
 172               	.Ltext3:
  75:./pll.c       ****    // 2: Wait 100us for the PLL to stabilize
  76:./pll.c       ****    // (can't use dmsWait since the timer updating the dmsCount hasn't yet been started!)
  77:./pll.c       ****    _delay_us(100);
  78:./pll.c       **** //   dmsWait(1);
  79:./pll.c       ****    // 3: Poll PLOCK until it is set...
  80:./pll.c       ****    while(!getbit(PLOCK, PLLCSR))
 173               		.stabn	68,0,80,.LM3-.LFBB1
 174               	.LM3:
 175 0012 09B4      		in __tmp_reg__,0x29
 176 0014 00FC      		sbrc __tmp_reg__,0
 177 0016 00C0      		rjmp .L5
  81:./pll.c       ****    {
  82:./pll.c       ****       asm("nop");
 178               		.stabn	68,0,82,.LM4-.LFBB1
 179               	.LM4:
 180               	/* #APP */
 181               	 ;  82 "./pll.c" 1
 182 0018 0000      		nop
 183               	 ;  0 "" 2
 184               	/* #NOAPP */
 185 001a 00C0      		rjmp .L2
 186               	.L5:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 10


  83:./pll.c       ****    }
  84:./pll.c       **** 
  85:./pll.c       **** //The PWM161 doesn't have a PCKE bit.
  86:./pll.c       **** #if(!defined(__AVR_AT90PWM161__))
  87:./pll.c       ****    // 4: Set the PCKE bit to enable async mode
  88:./pll.c       ****    setbit(PCKE, PLLCSR);
 187               		.stabn	68,0,88,.LM5-.LFBB1
 188               	.LM5:
 189 001c 89B5      		in r24,0x29
 190 001e 8460      		ori r24,lo8(4)
 191 0020 89BD      		out 0x29,r24
 192 0022 0895      		ret
 193               		.size	pll_enable, .-pll_enable
 194               	.Lscope1:
 195               		.stabs	"",36,0,0,.Lscope1-.LFBB1
 196               		.stabd	78,0,0
 197               		.stabs	"lvds_timerInit:F(0,47)",36,0,18,lvds_timerInit
 198               	.global	lvds_timerInit
 199               		.type	lvds_timerInit, @function
 200               	lvds_timerInit:
 201               		.stabd	46,0,0
 202               		.stabs	"_interfaces/lvds.c",132,0,0,.Ltext4
 203               	.Ltext4:
   1:_interfaces/lvds.c **** /* mehPL:
   2:_interfaces/lvds.c ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:_interfaces/lvds.c ****  *    I'm not too fond of long licenses at the top of the file.
   4:_interfaces/lvds.c ****  *    Please see the bottom.
   5:_interfaces/lvds.c ****  *    Enjoy!
   6:_interfaces/lvds.c ****  */
   7:_interfaces/lvds.c **** 
   8:_interfaces/lvds.c **** 
   9:_interfaces/lvds.c **** 
  10:_interfaces/lvds.c **** 
  11:_interfaces/lvds.c **** #ifndef __LVDS_C__
  12:_interfaces/lvds.c **** #define __LVDS_C__
  13:_interfaces/lvds.c **** 
  14:_interfaces/lvds.c **** #include "lvds.h"
  15:_interfaces/lvds.c **** #include "pll.c"
  16:_interfaces/lvds.c **** 
  17:_interfaces/lvds.c **** 
  18:_interfaces/lvds.c **** void lvds_timerInit(void)
  19:_interfaces/lvds.c **** {
 204               		.stabn	68,0,19,.LM6-.LFBB2
 205               	.LM6:
 206               	.LFBB2:
 207               	/* prologue: function */
 208               	/* frame size = 0 */
 209               	/* stack size = 0 */
 210               	.L__stack_usage = 0
  20:_interfaces/lvds.c ****    //Timer1 is used for LVDS (in PLL clocking mode)
  21:_interfaces/lvds.c ****   
  22:_interfaces/lvds.c ****      //pll_enable();   
  23:_interfaces/lvds.c ****    
  24:_interfaces/lvds.c ****    //We want it to count 7 bits, 0-6 and reset at 7
  25:_interfaces/lvds.c ****    OCR1C = 6;
 211               		.stabn	68,0,25,.LM7-.LFBB2
 212               	.LM7:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 11


 213 0024 86E0      		ldi r24,lo8(6)
 214 0026 8BBD      		out 0x2b,r24
  26:_interfaces/lvds.c **** 
  27:_interfaces/lvds.c ****    //We want the clock to go low at TCNT=0 and high at TCNT=4
  28:_interfaces/lvds.c ****    CLOCK_OCR = 3; //2; //3;
 215               		.stabn	68,0,28,.LM8-.LFBB2
 216               	.LM8:
 217 0028 83E0      		ldi r24,lo8(3)
 218 002a 8CBD      		out 0x2c,r24
  29:_interfaces/lvds.c ****    
  30:_interfaces/lvds.c **** 
  31:_interfaces/lvds.c **** // My 'scope is only 20MHz, and I'd rather be able to use the digital mode
  32:_interfaces/lvds.c **** // which is even slower...
  33:_interfaces/lvds.c **** 
  34:_interfaces/lvds.c **** 
  35:_interfaces/lvds.c **** //Overridden when SLOW_EVERYTHING_TEST is true...
  36:_interfaces/lvds.c **** //#define TOOFAST_TEST TRUE
  37:_interfaces/lvds.c **** #warning "HERE AND BELOW, doesn't OSCCAL have special write requirements?"
  38:_interfaces/lvds.c **** //OSCCAL = 0x00;
  39:_interfaces/lvds.c **** #if (defined(SLOW_EVERYTHING_TEST) && SLOW_EVERYTHING_TEST)
  40:_interfaces/lvds.c **** //FOR TESTING. This should slow the clock...
  41:_interfaces/lvds.c ****    // Gives roughly 4MHz...
  42:_interfaces/lvds.c ****    OSCCAL = 0x00; //0x80; 
  43:_interfaces/lvds.c **** 
  44:_interfaces/lvds.c ****    // This should divide the system clock by 256
  45:_interfaces/lvds.c ****    // does this affect the PLL? NO.
  46:_interfaces/lvds.c ****    // The PLL is clocked only by the RC Oscillator
  47:_interfaces/lvds.c ****    //   OSCCAL does affect it.
  48:_interfaces/lvds.c ****    // OPTIONS FOR SIMULATING FULL FUNCTIONALITY AT LOW SPEED:
  49:_interfaces/lvds.c ****    // Run PLL as normal
  50:_interfaces/lvds.c ****    //  Prescale Timer1 and DeadTimer equally
  51:_interfaces/lvds.c ****    //  Prescale System clock equally
  52:_interfaces/lvds.c ****    CLKPR = (1<<CLKPCE);
  53:_interfaces/lvds.c ****    CLKPR = (1<<CLKPS1) | (1<<CLKPS0);   //CLKDIV8
  54:_interfaces/lvds.c ****    //4MHz / 8 = .5Mhz...
  55:_interfaces/lvds.c ****    //PLL is 4MHz*8 = 32MHz
  56:_interfaces/lvds.c ****    // then TimerClockDivisor=8 gives 4MHz
  57:_interfaces/lvds.c ****    pll_enable();
  58:_interfaces/lvds.c ****    #define SLOW_LVDS_TEST TRUE
  59:_interfaces/lvds.c **** #elif (defined(OSCCAL_VAL))
  60:_interfaces/lvds.c ****    OSCCAL = OSCCAL_VAL;
 219               		.stabn	68,0,60,.LM9-.LFBB2
 220               	.LM9:
 221 002c 8FEF      		ldi r24,lo8(-1)
 222 002e 81BF      		out 0x31,r24
  61:_interfaces/lvds.c **** #endif
  62:_interfaces/lvds.c **** 
  63:_interfaces/lvds.c **** 
  64:_interfaces/lvds.c **** 
  65:_interfaces/lvds.c **** #if (defined(SLOW_LVDS_TEST) && SLOW_LVDS_TEST)
  66:_interfaces/lvds.c ****    //This case doesn't really make sense without SLOW_EVERYTHING...
  67:_interfaces/lvds.c ****    //8x prescaler for Timer1
  68:_interfaces/lvds.c ****    #define CSBITS (1<<CS12)
  69:_interfaces/lvds.c ****    //8x prescaler for the dead-timer
  70:_interfaces/lvds.c ****    #define DTPSBITS ((1<<DTPS11) | (1<<DTPS10))
  71:_interfaces/lvds.c **** #elif (defined(LVDS_PRESCALER))
  72:_interfaces/lvds.c ****    //Timer1 on the Tiny861 uses a strange CLKDIV scheme...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 12


  73:_interfaces/lvds.c ****    // (but it's nicer!)
  74:_interfaces/lvds.c ****    // The divisor is (1<<(csbits-1))
  75:_interfaces/lvds.c ****    // so a divisor of 1 = (1<<0) = (1<<(1-1)), (csbits = 0x1)
  76:_interfaces/lvds.c ****    // 256 = (1<<8) = (1<<(9-1)), (csbits = 0x9)
  77:_interfaces/lvds.c ****    // 512 = (1<<9) = (1<<(10-1)), (csbits = 0xA)
  78:_interfaces/lvds.c ****    // ...
  79:_interfaces/lvds.c ****    // (0x0 stops the timer)
  80:_interfaces/lvds.c ****    /*
  81:_interfaces/lvds.c ****       uint16_t divisor;
  82:_interfaces/lvds.c ****       uint8_t csbits = 0;
  83:_interfaces/lvds.c ****       for(divisor=CLKDIV; divisor != 0; divisor>>=1)
  84:_interfaces/lvds.c ****          csbits++;
  85:_interfaces/lvds.c ****          writeMasked(csbits, 0x0f, TCCR1B);
  86:_interfaces/lvds.c ****    */
  87:_interfaces/lvds.c **** 
  88:_interfaces/lvds.c **** //#if ((LVDS_PRESCALER != 64) && (LVDS_PRESCALER != 32) && \
  89:_interfaces/lvds.c **** //     (LVDS_PRESCALER != 16) && 
  90:_interfaces/lvds.c **** #if ((LVDS_PRESCALER != 8) && \
  91:_interfaces/lvds.c ****      (LVDS_PRESCALER != 4)  && (LVDS_PRESCALER != 2) && \
  92:_interfaces/lvds.c ****      (LVDS_PRESCALER != 1))
  93:_interfaces/lvds.c **** #error "LVDS_PRESCALER must be a power of 2, from 1 to 8"
  94:_interfaces/lvds.c **** #endif
  95:_interfaces/lvds.c **** 
  96:_interfaces/lvds.c ****    //Figured this out in cTools/dePower.c...
  97:_interfaces/lvds.c ****    //64 is overkill here, since the deadTimer prescaler only goes to 8...
  98:_interfaces/lvds.c **** #define divToCS(div) \
  99:_interfaces/lvds.c ****    ( (div == 64) ? 7 : (div == 32) ? 6 : (div == 16) ? 5 : (div == 8) ? 4 \
 100:_interfaces/lvds.c ****      : (div == 4) ? 3 : (div == 2) ? 2 : (div == 1) ? 1 : 0)
 101:_interfaces/lvds.c **** 
 102:_interfaces/lvds.c **** 
 103:_interfaces/lvds.c ****    //CSBITS (through PLL/8) (CS10 is bit 0)
 104:_interfaces/lvds.c ****    //CS12:10   CS12   CS11   CS10      PLL division
 105:_interfaces/lvds.c ****    //1         0      0      1         1
 106:_interfaces/lvds.c ****    //2         0      1      0         2
 107:_interfaces/lvds.c ****    //3         0      1      1         4
 108:_interfaces/lvds.c ****    //4         1      0      0         8
 109:_interfaces/lvds.c ****    #define CSBITS divToCS(LVDS_PRESCALER) //<<CS10 should be redundant
 110:_interfaces/lvds.c ****    //DTPSBITS (DTPS10 is bit 4)
 111:_interfaces/lvds.c ****    //DTPS11:10   DTPS11 DTPS10   PLL division
 112:_interfaces/lvds.c ****    //0         0      0         1
 113:_interfaces/lvds.c ****    //1         0      1         2
 114:_interfaces/lvds.c ****    //2         1      0         4
 115:_interfaces/lvds.c ****    //3         1      1         8
 116:_interfaces/lvds.c ****    #define DTPSBITS ((CSBITS-1)<<DTPS10)
 117:_interfaces/lvds.c **** 
 118:_interfaces/lvds.c ****    //Whoops! Forgot this (a/o 42-som'n WTF1pix)
 119:_interfaces/lvds.c ****    // so, it's promising to get single-pixel control...
 120:_interfaces/lvds.c ****    //  the result was kinda ugly, though... scroll was quite slow
 121:_interfaces/lvds.c ****    // Further, it was only drawing a certain number of pixels...
 122:_interfaces/lvds.c ****    //  (horizontally... pre LVDS_PRESCALER affecting DOTS_TO_CYC)
 123:_interfaces/lvds.c ****    //  so accessing *all* pixels in a row would make it even slower...
 124:_interfaces/lvds.c ****    // Further, it didn't seem to be paying attention to the fact that
 125:_interfaces/lvds.c ****    // the same pixels are drawn on multiple rows...
 126:_interfaces/lvds.c ****    // WTF? (the image was scaled, proportionately! 1pix x 1pix)
 127:_interfaces/lvds.c ****    pll_enable();
 223               		.stabn	68,0,127,.LM10-.LFBB2
 224               	.LM10:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 13


 225 0030 00D0      		rcall pll_enable
 128:_interfaces/lvds.c **** 
 129:_interfaces/lvds.c **** #else
 130:_interfaces/lvds.c ****    //No clock divisor
 131:_interfaces/lvds.c ****    #define CSBITS (1<<CS10)
 132:_interfaces/lvds.c ****    //No dead-timer divisor
 133:_interfaces/lvds.c ****    #define DTPSBITS 0
 134:_interfaces/lvds.c ****    pll_enable();
 135:_interfaces/lvds.c ****    //#warning "The PLL configuration code is not in here yet!"
 136:_interfaces/lvds.c **** #endif
 137:_interfaces/lvds.c **** 
 138:_interfaces/lvds.c ****    //Set the Timer1 clock prescaler...
 139:_interfaces/lvds.c ****    writeMasked(CSBITS, 
 226               		.stabn	68,0,139,.LM11-.LFBB2
 227               	.LM11:
 228 0032 8FB5      		in r24,0x2f
 229 0034 807F      		andi r24,lo8(-16)
 230 0036 8160      		ori r24,lo8(1)
 231 0038 8FBD      		out 0x2f,r24
 140:_interfaces/lvds.c ****                ((1<<CS13) | (1<<CS12) | (1<<CS11) | (1<<CS10)),
 141:_interfaces/lvds.c ****                TCCR1B);
 142:_interfaces/lvds.c **** 
 143:_interfaces/lvds.c ****    //Set the DeadTime prescaler (no prescaling, same speed as TCNT1)...
 144:_interfaces/lvds.c ****    // Allegedly this is prescaled from the PCK (or CK)
 145:_interfaces/lvds.c ****    //    NOT from the Timer1 prescaler...
 146:_interfaces/lvds.c ****    writeMasked(DTPSBITS,
 232               		.stabn	68,0,146,.LM12-.LFBB2
 233               	.LM12:
 234 003a 8FB5      		in r24,0x2f
 235 003c 8F7C      		andi r24,lo8(-49)
 236 003e 8FBD      		out 0x2f,r24
 147:_interfaces/lvds.c ****                ((1<<DTPS11) | (1<<DTPS10)),
 148:_interfaces/lvds.c ****                TCCR1B);
 149:_interfaces/lvds.c **** 
 150:_interfaces/lvds.c **** 
 151:_interfaces/lvds.c **** 
 152:_interfaces/lvds.c ****    //All LVDS modes (and signals) use FastPWM.. 
 153:_interfaces/lvds.c ****  
 154:_interfaces/lvds.c ****    //FastPWM
 155:_interfaces/lvds.c **** //Now Handled in lvds_xxxOnCompare():
 156:_interfaces/lvds.c **** 
 157:_interfaces/lvds.c ****    //These are also written below (excluding PWM1D)
 158:_interfaces/lvds.c ****    setbit(PWM1A, TCCR1A);  //Enable PWM on OC1A for DVH
 237               		.stabn	68,0,158,.LM13-.LFBB2
 238               	.LM13:
 239 0040 80B7      		in r24,0x30
 240 0042 8260      		ori r24,lo8(2)
 241 0044 80BF      		out 0x30,r24
 159:_interfaces/lvds.c ****                            //Need to do the same for other channels
 160:_interfaces/lvds.c ****   
 161:_interfaces/lvds.c ****    setbit(PWM1B, TCCR1A);  //Enable PWM on OC1B for CLOCK 
 242               		.stabn	68,0,161,.LM14-.LFBB2
 243               	.LM14:
 244 0046 80B7      		in r24,0x30
 245 0048 8160      		ori r24,lo8(1)
 246 004a 80BF      		out 0x30,r24
 162:_interfaces/lvds.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 14


 163:_interfaces/lvds.c ****    setbit(PWM1D, TCCR1C);
 247               		.stabn	68,0,163,.LM15-.LFBB2
 248               	.LM15:
 249 004c 87B5      		in r24,0x27
 250 004e 8160      		ori r24,lo8(1)
 251 0050 87BD      		out 0x27,r24
 164:_interfaces/lvds.c **** 
 165:_interfaces/lvds.c ****    //PWM1D is not in TCCR1A...
 166:_interfaces/lvds.c **** 
 167:_interfaces/lvds.c ****    setoutPORT(PB1, PORTB);   //+OC1A, DVH/BLUE, MISO (usually heart)
 252               		.stabn	68,0,167,.LM16-.LFBB2
 253               	.LM16:
 254 0052 B99A      		sbi 0x17,1
 168:_interfaces/lvds.c **** //   setoutPORT(PB0, PORTB);   //-OC1A    MOSI unused
 169:_interfaces/lvds.c ****    setoutPORT(PB2, PORTB); //-OC1B, -GREEN    (INVERTED) SCK
 255               		.stabn	68,0,169,.LM17-.LFBB2
 256               	.LM17:
 257 0054 BA9A      		sbi 0x17,2
 170:_interfaces/lvds.c ****    setoutPORT(PB3, PORTB); //+OC1B Clock (OC1B, not inverted)
 258               		.stabn	68,0,170,.LM18-.LFBB2
 259               	.LM18:
 260 0056 BB9A      		sbi 0x17,3
 171:_interfaces/lvds.c ****    setoutPORT(PB5, PORTB); //+OC1D, RED
 261               		.stabn	68,0,171,.LM19-.LFBB2
 262               	.LM19:
 263 0058 BD9A      		sbi 0x17,5
 172:_interfaces/lvds.c **** 
 173:_interfaces/lvds.c **** 
 174:_interfaces/lvds.c ****    writeMasked(((0<<WGM11) | (0<<WGM10)), //FastPWM (combined with above)
 264               		.stabn	68,0,174,.LM20-.LFBB2
 265               	.LM20:
 266 005a 86B5      		in r24,0x26
 267 005c 8C7F      		andi r24,lo8(-4)
 268 005e 86BD      		out 0x26,r24
 175:_interfaces/lvds.c ****                ((1<<WGM11) | (1<<WGM10)), // (affects all PWM channels)
 176:_interfaces/lvds.c ****                TCCR1D);
 177:_interfaces/lvds.c **** 
 178:_interfaces/lvds.c ****    //OC1A is used, but /OC1A isn't
 179:_interfaces/lvds.c **** // Not Valid (deadTime only functions if in complementary-mode):
 180:_interfaces/lvds.c ****    // OTOH: dead-time is not necessary in the only case we need to switch
 181:_interfaces/lvds.c ****    // Most lvds states use clear on compare-match, set at 0
 182:_interfaces/lvds.c ****    // But there is one that uses the opposite
 183:_interfaces/lvds.c ****    // This can be toggled by a single bit-change
 184:_interfaces/lvds.c ****    //  COM1A1 = 1
 185:_interfaces/lvds.c ****    //  COM1A0 value indicates what happens on Compare-Match
 186:_interfaces/lvds.c ****    //                 or ! at BOTTOM
 187:_interfaces/lvds.c **** //#define lvds_clrOnCompare() clrbit(COM1A0, TCCR1A)
 188:_interfaces/lvds.c **** //#define lvds_setOnCompare() setbit(COM1A0, TCCR1A)
 189:_interfaces/lvds.c ****    //HOWEVER: the alternative is possible:
 190:_interfaces/lvds.c ****    // Use complementary (clear-on-compare)
 191:_interfaces/lvds.c ****    // and single-ended with set-on-compare
 192:_interfaces/lvds.c ****    // COM1A0 = 1
 193:_interfaces/lvds.c ****    // COM1A1 value indicates what happens on Compare-Match
 194:_interfaces/lvds.c **** 
 195:_interfaces/lvds.c **** /* These are three instructions apiece!
 196:_interfaces/lvds.c **** #define lvds_ComplementaryClrOnCompare() clrbit(COM1A1, TCCR1A)
 197:_interfaces/lvds.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 15


 198:_interfaces/lvds.c **** #define lvds_setOnCompare() setbit(COM1A1, TCCR1A)
 199:_interfaces/lvds.c **** #define lvds_clrOnCompare() lvds_ComplementaryClrOnCompare()
 200:_interfaces/lvds.c **** */
 201:_interfaces/lvds.c **** 
 202:_interfaces/lvds.c **** //Page 99:
 203:_interfaces/lvds.c **** // "In Fast PWM Mode ... when the COM1x1:0 bits are set to 01 ...
 204:_interfaces/lvds.c **** //  an user programmable Dead Time delay is inserted for 
 205:_interfaces/lvds.c **** //  these complementary output pairs (OC1x and OC1x)."
 206:_interfaces/lvds.c **** 
 207:_interfaces/lvds.c **** //Page 98:
 208:_interfaces/lvds.c **** // "The counter is loaded with a 4-bit DT1H or DT1L value from DT1 
 209:_interfaces/lvds.c **** //  I/O register, depending on the edge of the Waveform 
 210:_interfaces/lvds.c **** //  Output (OCW1x) when the dead time insertion is started."
 211:_interfaces/lvds.c **** // In other words, (as it appears from the diagram)
 212:_interfaces/lvds.c **** //  the dead-time value is loaded into the counter when the corresponding
 213:_interfaces/lvds.c **** //  edge in OCW1x is detected
 214:_interfaces/lvds.c **** //  So changing the value of DT1 affects the *next* corresponding edge 
 215:_interfaces/lvds.c **** //   (NOT if the dead timer is already running)
 216:_interfaces/lvds.c **** 
 217:_interfaces/lvds.c **** //Page 96:
 218:_interfaces/lvds.c **** // "The OCR1x Registers are double buffered when using any of the 
 219:_interfaces/lvds.c **** // Pulse Width Modulation (PWM) modes."
 220:_interfaces/lvds.c **** // "The double buffering synchronizes the update of the OCR1x 
 221:_interfaces/lvds.c **** // Compare Registers to either top or bottom of the counting sequence.
 222:_interfaces/lvds.c **** // The synchronization prevents the occurrence of odd-length, non-sym- 
 223:_interfaces/lvds.c **** // metrical PWM pulses, thereby making the output glitch-free."
 224:_interfaces/lvds.c **** 
 225:_interfaces/lvds.c **** //Page 100:
 226:_interfaces/lvds.c **** //"A change of the COM1x1:0 bits state will have effect 
 227:_interfaces/lvds.c **** // at the first Compare Match after the bits are written."
 228:_interfaces/lvds.c **** //Page 97: HAH!
 229:_interfaces/lvds.c **** //"Be aware that the COM1x1:0 bits are not double buffered 
 230:_interfaces/lvds.c **** // together with the compare value. 
 231:_interfaces/lvds.c **** // Changing the COM1x1:0 bits will take effect immediately."
 232:_interfaces/lvds.c **** 
 233:_interfaces/lvds.c **** 
 234:_interfaces/lvds.c **** //#define lvds_setOnCompare()   
 235:_interfaces/lvds.c **** //   TCCR1A = ( (1<<COM1A1) | (1<<COM1A0) 
 236:_interfaces/lvds.c **** //            | (0<<COM1B1) | (1<<COM1B0) 
 237:_interfaces/lvds.c **** //            | (1<<PWM1A) | (1<<PWM1B) )
 238:_interfaces/lvds.c **** //#define lvds_ComplementaryClrOnCompare() \ //
 239:_interfaces/lvds.c ****    //Do TCCR1C first, because it contains shadow-bits of TCCR1A that I
 240:_interfaces/lvds.c ****    // don't want to have to rewrite...
 241:_interfaces/lvds.c ****    TCCR1C = ( (1<<COM1D1) | (0<<COM1D0)
 269               		.stabn	68,0,241,.LM21-.LFBB2
 270               	.LM21:
 271 0060 89E0      		ldi r24,lo8(9)
 272 0062 87BD      		out 0x27,r24
 242:_interfaces/lvds.c ****             | (1<<PWM1D) );
 243:_interfaces/lvds.c **** /* a/o v62-17: The notes are sparse as to why I disabled the Green signal
 244:_interfaces/lvds.c ****  * at all times, except during DE... As I recall, it was an experiment with
 245:_interfaces/lvds.c ****  * whether it was possible to get greater control over BLUE, by hacking the
 246:_interfaces/lvds.c ****  * clock signal during the DE period... e.g. since none of the V/H timings
 247:_interfaces/lvds.c ****  * are necessary during DE, maybe it was possible to have a clock that
 248:_interfaces/lvds.c ****  * wasn't perfectly as-spec'd... it didn't work. So, why not remove the
 249:_interfaces/lvds.c ****  * necessity for enabling/disabling the green signal...
 250:_interfaces/lvds.c ****  (Yes, it's that tightly-knit that affecting the clock affects green,
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 16


 251:_interfaces/lvds.c ****  affects blue... but there's some confusion in my mind as to why green
 252:_interfaces/lvds.c ****  couldn't've remained active anyhow...)
 253:_interfaces/lvds.c ****  Ahh, wait, something about when Complementary mode is enabled, then the
 254:_interfaces/lvds.c ****  clock is affected by Dead-Times... Still a bit vague.
 255:_interfaces/lvds.c **** */
 256:_interfaces/lvds.c **** //	TCCR1A = ( (0<<COM1A1) | (1<<COM1A0) 
 257:_interfaces/lvds.c **** //            | (1<<COM1B1) | (0<<COM1B0) //Don't use complementary for CLK
 258:_interfaces/lvds.c **** //            | (1<<PWM1A) | (1<<PWM1B) );
 259:_interfaces/lvds.c **** 	lvds_disableGreen_MakeClockInsensitiveToDT();
 273               		.stabn	68,0,259,.LM22-.LFBB2
 274               	.LM22:
 275 0064 83E6      		ldi r24,lo8(99)
 276 0066 80BF      		out 0x30,r24
 260:_interfaces/lvds.c **** 	//This was attempted in v66.51 (a/o v91)
 261:_interfaces/lvds.c **** 	// And for some reason didn't work... It should, no? See notes re
 262:_interfaces/lvds.c **** 	// FULL_INIT_TESTS and v66.51 in lvds.h
 263:_interfaces/lvds.c **** // lvds_enableGreen_MakeClockSensitiveToDT();
 264:_interfaces/lvds.c **** 
 265:_interfaces/lvds.c **** 
 266:_interfaces/lvds.c **** 	
 267:_interfaces/lvds.c **** /* ... but this didn't work... nothing's showing up at all.
 268:_interfaces/lvds.c **** 	TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
 269:_interfaces/lvds.c **** 	         | (0<<COM1B1) | (1<<COM1B0)
 270:_interfaces/lvds.c **** 	         | (1<<PWM1A) | (1<<PWM1B) );
 271:_interfaces/lvds.c **** */
 272:_interfaces/lvds.c **** 
 273:_interfaces/lvds.c **** //#define lvds_clrOnCompare() lvds_ComplementaryClrOnCompare()
 274:_interfaces/lvds.c **** 
 275:_interfaces/lvds.c ****    // Enable Complementary-Mode (and thus the dead-timer)
 276:_interfaces/lvds.c ****    // This'll be changed as needed, but we need COM1A0 set prior to that
 277:_interfaces/lvds.c **** 
 278:_interfaces/lvds.c ****    //   lvds_clrOnCompare();
 279:_interfaces/lvds.c **** //   writeMasked(((0<<COM1A1) | (1<<COM1A0)), 
 280:_interfaces/lvds.c **** //               ((1<<COM1A1) | (1<<COM1A0)), 
 281:_interfaces/lvds.c **** //               TCCR1A);
 282:_interfaces/lvds.c **** 
 283:_interfaces/lvds.c **** 
 284:_interfaces/lvds.c **** 
 285:_interfaces/lvds.c ****    //THIS IS NOT THOROUGHLY THOUGHT-OUT...
 286:_interfaces/lvds.c ****    // as I recall, we need to use /OC1B for the clock output
 287:_interfaces/lvds.c ****    //  because it won't be affected by the deadtime...
 288:_interfaces/lvds.c **** //Now Handled in lvds_xxxOnCompare():
 289:_interfaces/lvds.c **** //   writeMasked(((0<<COM1B1) | (1<<COM1B0)),
 290:_interfaces/lvds.c **** //               ((1<<COM1B1) | (1<<COM1B0)),
 291:_interfaces/lvds.c **** //               TCCR1A);
 292:_interfaces/lvds.c **** 
 293:_interfaces/lvds.c ****    //Since PWM inversion affects all channels, great-pains were taken
 294:_interfaces/lvds.c ****    // to assure that it needn't be changed in any lvds state...
 295:_interfaces/lvds.c ****    // PWM inversion must be enabled:
 296:_interfaces/lvds.c **** 
 297:_interfaces/lvds.c ****    //inverted with PWM1X
 298:_interfaces/lvds.c **** //   setbit(PWM1X, TCCR1B);
 299:_interfaces/lvds.c **** 
 300:_interfaces/lvds.c **** 
 301:_interfaces/lvds.c **** //Another attempt (in v66.51, a/o v91):
 302:_interfaces/lvds.c **** 	// Irrelevent (?) since Nada_init() overwrites it...
 303:_interfaces/lvds.c **** 	// //Make sure Green is off...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 17


 304:_interfaces/lvds.c **** 	// DT1 = 3;
 305:_interfaces/lvds.c **** 
 306:_interfaces/lvds.c **** 
 307:_interfaces/lvds.c **** 
 308:_interfaces/lvds.c ****     Nada_init();
 277               		.stabn	68,0,308,.LM23-.LFBB2
 278               	.LM23:
 279 0068 80E3      		ldi r24,lo8(48)
 280 006a 84BD      		out 0x24,r24
 281 006c 84E0      		ldi r24,lo8(4)
 282 006e 8DBD      		out 0x2d,r24
 283 0070 0895      		ret
 284               		.size	lvds_timerInit, .-lvds_timerInit
 285               	.Lscope2:
 286               		.stabs	"",36,0,0,.Lscope2-.LFBB2
 287               		.stabd	78,0,0
 288               		.stabs	"lcd_init:F(0,47)",36,0,1056,lcd_init
 289               	.global	lcd_init
 290               		.type	lcd_init, @function
 291               	lcd_init:
 292               		.stabd	46,0,0
 293               		.stabs	"_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c",132,0,0,.Ltext5
 294               	.Ltext5:
   1:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** /* mehPL:
   2:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  *    I'm not too fond of long licenses at the top of the file.
   4:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  *    Please see the bottom.
   5:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  *    Enjoy!
   6:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  */
   7:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
   8:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
   9:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //lcdStuff 0.80ncfDD6651-3
  10:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
  11:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.80ncfDD6651-3 - BLUE_DIAG_BAR doesn't work with sony bit-banged (duh)
  12:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                  What to do about delay_cyc where delay_Dots should
  13:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                  always be...?
  14:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                  LCDSTUFF_USE_DOTS_TO_CYC_IN_DELAY_DOTS
  15:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.80ncfDD6651-2 - BLUE_BORDER doesn't work with BOE... timings?
  16:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.80ncfDD6651-1 - a/o LCDdirectLVDS93, running through the BLUE tests...
  17:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                  drawPix definitions are now DP_INLINEABLE
  18:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.80ncfDD6651 - Stolen from LCDdirectLVDS66.51-64 (a/o v91):
  19:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                BLUE_DIAG_BAR has been modified substantially
  20:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                 Including drawPixSetup
  21:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                 Now also combined with BLUE_DIAG_BAR_SCROLL
  22:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                TODO: Uses delay_cyc rather than delay_Dots
  23:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                      But this won't work with all systems (especially
  24:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                      bit-banged!)
  25:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                   
  26:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.80ncfDD - Looking into delayDots as a possible culprit for GCC48's
  27:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //				  destroying BLUE_TESTING (especially BLUE_DIAG_BAR_SCROLL)
  28:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            a/o LCDdirectLVDS91 -> 66.51
  29:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.80ncf-3 - adding BLUE_FRAME since BLUE_DIAG_BAR wasn't working with the
  30:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //				  LTN display (?!) a/o LCDdirectLVDS91
  31:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.80ncf-2 - Fixing vsync-case which went back to Nada...
  32:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            e.g. for bit-banged parallel-LCD and/or SDRAMthing
  33:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            TODO: Remove other case (for SDRAMthing)
  34:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.80ncf-1 - Adding LCDSTUFF_INCLUDE_NON_DE
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 18


  35:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            This is the same as LCDSTUFF_NOT_IN_TIMER, except
  36:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            better-named. This calls DE_DotDelay(), etc. even when in a
  37:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            vertical-blanking-period.
  38:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            This, a/o LCDdirectLVDS81 in order to use a dot-clock that
  39:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            *isn't* timer-based (e.g. bit-banged)
  40:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            ALSO replacing delay_cycs with delay_Dots in relevent
  41:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            sections
  42:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.80ncf - drawPixSetup function, for large-calculations to occur *before*
  43:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          Hsync (a/o LCDdirectLVDS-80, for non-DE display)
  44:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.70ncf-1 - swapping halves in BLUE_DIAG_BAR so the sync position can be
  45:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //				  seen...
  46:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            Also in BLUE_DIAG_BAR_SCROLL
  47:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            BUT NOT (TODO?) In others...
  48:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.70ncf - a/o LCDdirectLVDS-80, in which we attempt to run a NON LVDS
  49:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //				display...
  50:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          First step was creating new *separate* files for each display's
  51:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          timing parameters...
  52:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          This *discontinues* the need for #define DISPLAY TESTVALS, etc.
  53:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          So, ultimately, TODO: move _displays/ here
  54:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          Until then, disable DISPLAY default, here...
  55:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          ACTUALLY: Apparently just forgot to disable assignment of
  56:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          DE_ACTIVE_DOTS if it's already defined...
  57:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          So, DISPLAY is still set, but not used anywhere...
  58:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.60ncf - continuation of 0.56ncf-2 (which was untested)
  59:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          standardizing function names... updateLCD() -> lcd_update()
  60:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          lcdInit() -> lcd_init()
  61:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          lcd_update() now returns Row Number
  62:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.56ncf-2 - a/o LCDdirectLVDSv73:
  63:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            fixing lcd_init() to reset hsyncCount and dataEnable
  64:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            so it can be used to start a new frame prior to finishing the
  65:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            last
  66:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            NOT TESTED, SEE 0.60
  67:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.56ncf-1 - reuninstating loadRow in lcdUpdate()
  68:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            apparently it's handled in LCDdirectLVDS itself
  69:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            And maybe it's better that way...
  70:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            SO NOW: aside from a few notes about loadRow, this is
  71:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            identical to 0.55ncf-2
  72:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.56ncf - reinstating loadRow in lcdUpdate()
  73:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          a/o LCDdirectLVDS70 for working with the rowBuffer
  74:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          TODOne: How is it that it was removed so long ago... wasn't I
  75:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          using rowSegBuffer then, still...? (see above)
  76:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.55ncf-2 - a/o LCDdirectLVDS67:
  77:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            Adding notes to loadData() re: transitions...
  78:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            TODO: it's still a little unclear...
  79:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.55ncf-1 - adding BLUE_DIAG_SCROLL_FLASH
  80:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.55ncf - drawPix had uint8_t rowNum... switching to uint16_t
  81:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          a/o LCDdirectLVDS-62 (attempting to use DE_BLUE with ChiMei
  82:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          display)
  83:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          Also added BLUE_DIAG_BAR_SCROLL
  84:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.52ncf-1 - Adding notes re: old mental hurdles.
  85:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.52ncf - getting rid of git in this directory...
  86:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.51ncf-git-1ish Adding a few notes remaining from LCDdirectLVDS:
  87:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //						"SCOPING has been removed in LVDS, revisit LCDdirect50"
  88:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.51ncf-git first attempt at using git for uploading to googleCode...
  89:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //        this version isn't yet used by any projects
  90:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.50ncf cleanup, colorOverride is unused...
  91:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //				SMILEY -> LCD_SMILEY
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 19


  92:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.40ncf-1 loadRow unused... removal untested...
  93:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.40ncf drawPix...
  94:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.30ncf-6 HSYNC_INACTIVE, etc. definable elsewhere
  95:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.30ncf-5 Adding BLUE_VERT_BAR_REVERSED
  96:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.30ncf-4 Adding NOTES: DON'T START WITH BLUE_DIAG_BAR
  97:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.30ncf-3 T_DV and T_Vlow overrideable
  98:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.30ncf-2 Not sure if I've modified it between... but here: 
  99:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //        FRAME_COUNT_TO_DELAY wasn't defined, giving warnings
 100:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.30ncf-1 updateLCD() has return-values for state-switches
 101:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          (VFP, VSync, VBP, DE)
 102:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //        ACTUALLY, that's unnecessary... state-transitions can be
 103:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //        determined by vSync and dataEnable...
 104:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.30ncf Haven't been keeping these backed up regularly...
 105:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //        More toward realtime adjustable timing values
 106:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //        V Front Porch now occurs at the beginning of the frame, instead
 107:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //        of at the end...
 108:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 109:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.20ncf More Timing Value experiment preparation... 
 110:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.10ncf-3ish looking into reloading methods for e.g. experimenting with
 111:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          timing values: sdramThing2.0-7
 112:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          How to "move" timing-values around data which needn't be
 113:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          changed...
 114:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.10ncf-andsomemore
 115:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          Added MAKELONG to fix integer overflow warnings
 116:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          Revised it from "... + MAKELONG" to "MAKELONG(...)"
 117:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          (The +MAKELONG version is lost in the ether... if you *really*
 118:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //           want it, there's a localized version in sdramThing2.0-6)
 119:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.10ncf-1ish - Adding HSYNC_COUNT_FRAME_COMPLETE
 120:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //               Removal of LVDS_PRESCALER stuff...
 121:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //0.10ncf - Stolen from LCDdirectLVDS/54-moreColorStuff/main.c
 122:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          Removal of LCDdirectLVDS-specific stuff...
 123:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //				A little bit of rewriting of notes to be more generalized
 124:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          All delay_cyc references replaced with delay_Dots,
 125:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //					math changed accordingly...
 126:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 127:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 128:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if 0
 129:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DP_INLINEABLE static __inline__
 130:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DP_INLINEABLE_ALWAYS	__attribute__((__always_inline__))
 131:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #else
 132:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DP_INLINEABLE
 133:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DP_INLINEABLE_ALWAYS
 134:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
 135:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //static __inline__ 
 136:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** DP_INLINEABLE void drawPix(uint16_t rowNum) DP_INLINEABLE_ALWAYS;
 137:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //	  __attribute__((__always_inline__));
 138:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 139:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 140:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 141:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 142:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // I hereby declare this FPD-Link simulation technique to forever be called
 143:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  PW-BANGing
 144:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 145:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // a/o 0.10ncf-4: (sdramThing2.0v8-28)
 146:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   DON'T START WITH BLUE_DIAG_BAR
 147:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Unless you want to be depressed
 148:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Good Starting Point DE_BLUE
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 20


 149:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 150:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 151:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 152:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // GENERAL TIMING NOTES
 153:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // a/o 0.52ncf-1:
 154:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Upon revisiting an ancient display controller project I did 15 years
 155:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   ago, I'm finding myself falling into similar thought-hurdles I had
 156:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   the first go-round with a graphic LCD display... so here're some
 157:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   concepts:
 158:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 159:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Most graphical displays without onboard memory have basically these 
 160:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // same signals:
 161:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 162:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //	Pixel Clock: Each clock-pulse *generally* corresponds to one pixel...
 163:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Whether these clock-pulses are used for drawing actual pixels, or
 164:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   otherwise...
 165:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 166:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Horizontal Sync: Each time the Hsync pin is active, the display starts a
 167:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // 	new row. It syncs up the pixels horizontally, at the left of the
 168:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // 	screen.
 169:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 170:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   (This was one of my biggest mental-hurdles from those old days...
 171:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    aided by the fact that my display's timing-chips had different names
 172:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    for the Pixexl-Clock, Hsync, and Vsync pins.) 
 173:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Hsync is only pulsed *once* at the *beginning* of each row. 
 174:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   It is *not* pulsed with each pixel. It syncs the edge of the
 175:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   pixel-data with the edge of the screen.
 176:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 177:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Vertical Sync: Each time the Vsync pin is active, the display starts a
 178:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // new frame. It syncs the pixel-data with the top of the screen.
 179:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 180:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // (Data Enable: This tells the (usually LCD) display that actual pixels
 181:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  are now being transmitted. It's a bit redundant, and some displays,
 182:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  especially older non-TFT displays don't even have it. 
 183:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Some newer TFT displays *only* use Data-Enable, determining the
 184:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  horizontal and vertical positions of the pixels based on the delay
 185:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  between Data-Enable pulses).
 186:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 187:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // I can't recall what the names were on my old display... but they were
 188:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // danged confusing. Especially to someone who'd never messed with graphics
 189:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // prior and had to reverse-engineer the whole thing. 
 190:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Oh yes, here they are: CPX, Frame, and Load. 
 191:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 192:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // As far as these three signals (Pixel Clock, Hsync, and Vsync):
 193:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  The actual timing-requirements may vary from display to display.
 194:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  But, it's pretty-well-established that for most displays these signals
 195:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  remain pretty constant. For example, an Hsync pulse may arrive at a
 196:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  specific rate (the duration of a "row"). Vsync, therefore, remains
 197:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  active for a number of "rows", even though no pixel-data is being sent
 198:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  during this time. And, again, even though no pixel-data is being sent,
 199:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  the Hsync pulse still occurs at the same rate it would if pixels were
 200:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  being drawn.
 201:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 202:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  This, I guess, is a remnant of ancient times, probably something to do
 203:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  with analog TV signals... the durations necessary for the electro-
 204:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  magnets to be moved from one side of the screen to the next, and the
 205:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  time necessary to move them again from top-to-bottom.
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 21


 206:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 207:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  In this digital era, it doesn't seem these timings would be necessary,
 208:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  and, in fact, most displays I've gotten working are highly tolerant of
 209:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  timing that doesn't match this rigidity.
 210:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 211:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  E.G. my *ancient* LCD project was designed long before I understood
 212:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  these "standard" timing specifications. As I recall, I don't have any
 213:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  delays between the "Frame" signal indicating the beginning of the next
 214:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  frame and the "Load" signal indicating the beginning of the first row
 215:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  of data. Certainly not several "rows" of Frame (aka Vsync)
 216:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  pulse-active.
 217:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 218:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Further, most of these standardized timings involve "porches", both
 219:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  front and back. The "Horizontal Front Porch" is the time between the
 220:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  end of a row and the Hsync signal. The "Horizontal Back Porch" is the
 221:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  time between the Hsync signal and the beginning of the actual 
 222:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  pixel-data. During these "porches", no pixel-data is sent, and the
 223:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Hsync signal is not active. Again, in the digital era these are pretty
 224:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  much unnecessary, but some displays still rely on them, and most
 225:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  specify timing-values for them.
 226:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 227:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 228:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 229:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //new notes a/o 0.10ncf-3ish:
 230:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // The basic idea is that timing is something that needs to be experimented
 231:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // with, often... so, for cases where LCD timing/drawing data is loaded
 232:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // beforehand (e.g. sdramThing2.0-7), it would be nice not to have to
 233:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // reload *all* the data, only to change the necessary timing data
 234:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 235:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Neglecting the SDRAM for a second, we have essentially:
 236:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // (The exact placement is not necessarily in order... e.g. DH_DOTS could
 237:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  be at the end of a row, or at the beginning... VSYNC rows could be at
 238:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  the top, or at the bottom.....)
 239:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // (See also notes "Here's how it worked pre-lvds:", which actually are a
 240:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   bit off, e.g. I don't think VSYNC L->H was delayed by DE_TIME after
 241:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Hsync)
 242:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 243:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // H_LOW_DOTS + HD_DOTS + DH_DOTS = "Horizontal Blank Time"
 244:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // (This "front/back" thing always confused me...
 245:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  DH_DOTS is *in front of* Hsync as far as *time* is concerned...
 246:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  i.e. looking at a 'scope trace... But something about reading left-to-
 247:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  right causes me to feel like "front" is the furthest to the right
 248:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  which would be *later* in time... weird.
 249:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  
 250:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 251:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //        |--|<--H_LOW_DOTS                       "Horiz Front Porch"
 252:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //        |  |--|<--HD_DOTS="Horiz Back Porch"    |<---->|<--DH_DOTS
 253:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //        |  .  .                                 .      |
 254:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //        |<............................................./
 255:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //        |  .  .                                 .    
 256:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //        v  v  .                                 .      
 257:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     /V _______________________________________________  \ VSYNC Rows
 258:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     /H |__|
 259:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     DE _______________________________________________  /  T_Vlow times)
 260:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              .                                 .
 261:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              .                                 .      "Vsync Back Porch"
 262:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     /V 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 22


 263:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     /H |__|
 264:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     DE _______________________________________________  /  T_VD times)
 265:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              .                                 .         "Vbp should be
 266:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              v                                 v          static"
 267:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              ***********************************
 268:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              *                                 *
 269:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     /V 
 270:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     /H |__|
 271:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     DE ______||______   /
 272:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              *                                 *
 273:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              *<------ DE_ACTIVE_DOTS --------->*        (Repeat V_COUNT
 274:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              *      .                          *         =1024 times)
 275:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                     .   Displayed Pixels
 276:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              *      .                          *
 277:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              *                                 *
 278:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              *                                 *
 279:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     /V 
 280:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     /H |__|
 281:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     DE ______||______   /
 282:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              *                                 *
 283:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              ***********************************      
 284:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                                                      "Vsync Front Porch"
 285:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     /V 
 286:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     /H |__|
 287:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     DE _______________________________________________  /  T_DV times)
 288:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 289:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 290:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #warning "TODO Maybe: LCDdirectLVDS (which so far is the only version which synced with such low re
 291:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 292:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Front vs. Back porches....
 293:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   If I were to draw a car driving down a street... 
 294:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   I would draw it with its front to the right, driving to the right...
 295:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 296:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //       _____/\________     \O/
 297:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   ...|__   _________   __\     |
 298:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      ...\_/         \_/       / \							//
 299:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 300:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   The person is *in front of* the car... which means the car has not yet
 301:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   arrived at the person, but will soon... 
 302:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   (later in time, not *before* in time)
 303:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  This is my logic...
 304:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   So The "Horizontal Front Porch", to me, should be to the RIGHT of the
 305:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Horizontal Sync Pulse...
 306:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   But that ain't how it is (unless I've confused myself into a circle
 307:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   where my logic is actually right, and I just think it's wrong?)
 308:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   
 309:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  By the logic that the front porch occurs *before* the sync pulse,
 310:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   ... I suppose we could think of a person in front of a house... it
 311:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   makes more sense, anyhow, since it's a porch in front of a house, 
 312:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   not person in front of a car.
 313:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   The person's walking into the house, crosses the *front*-porch 
 314:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   *before* enterring the doorway. If he continues walking all the way
 315:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   through the house and out the back-door, he'll be crossing the *back*
 316:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   porch later in time...
 317:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 318:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Right, so the logic makes sense... but for some reason I have to run 
 319:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  through this whole diatribe every time I see the terms.
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 23


 320:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Heh, and even after going through it, the damned thing seems backwards.
 321:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  (Probably because I drew it with the front-porch to the right side...)
 322:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  (AND THEN there's the issue that it seems to me like the front-porch
 323:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   should be to the left of the drawing-area whereas the back-porch
 324:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   should be to the right of it... rather than to the HSYNC pulse)
 325:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 326:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 327:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Anyways, all that drawing was to figure out where to position this
 328:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // in memory, such that it would be the least processing-effort to modify
 329:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // timing values for testing... (because loading the SDRAM's free-running 
 330:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // data takes ~20minutes!)
 331:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 332:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 333:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 334:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //Options LTN, IDT, or TESTVALS
 335:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // IDT display *still* doesn't sync... maybe my H/V signals aren't right
 336:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef DISPLAY
 337:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DISPLAY TESTVALS //LTN //TESTVALS //IDT //LTN
 338:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
 339:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 340:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //oldNote:
 341:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // TODO: Between OSCCAL_VAL and FRAME_UPDATE_DELAY
 342:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  it seems the speed (at least for the LTN) isn't so important after all
 343:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  This could be used to my advantage...
 344:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Maybe bump OSCCAL_VAL all the way up, but use a slower "bit-rate"
 345:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Thus, pixels could be skinnier, thus higher-resolution.
 346:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Or more instructions could be used for the same resolution
 347:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   allowing, e.g. sprites from program-memory, without necessitating a
 348:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   large (or any?) frame-buffer...
 349:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 350:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 351:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //This would normally be 0 for the highest-speed frame-refresh possible
 352:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // However, increasing this value can slow the frame-refresh rate
 353:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   if desired
 354:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // e.g. 50000 causes it to refresh ~ every few seconds
 355:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   (durn-near the limit for how long the LCD will retain an image)
 356:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // The benefit being that it doesn't flicker at annoying rates for
 357:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  stationary images
 358:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  worth exploring...
 359:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // This may be highly dependent on the screen capabilities...
 360:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   of course, this sorta thing is undocumented
 361:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   it just has to be experimented with
 362:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Further, it may be quite hard on the Liquid Crystals, since they'd 
 363:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   likely be driven DC... not sure what the long term effects are.
 364:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // This could be a hell of a lot more sophisticated...
 365:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // e.g. refresh after a frameBuffer change
 366:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      refresh based on a seconds-timer
 367:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      ...
 368:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // AS-IS: Does refreshes completely independent of the frame-buffer
 369:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      if it's too slow, some images may be missed completely.
 370:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      This is not true for FRAME_SYNC TRUE (below)
 371:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      (and it's not really useful anymore with FRAME_SYNC)
 372:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // a/o sdramThing2.0, this is not really relevent...
 373:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // 	if the frame needs updating, just stop free-running, right?
 374:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // 	well, doing-so might cause issues, since the LVDS clock will not be
 375:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    running... this is a TBD
 376:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define FRAME_UPDATE_DELAY 0//5000//50000 //2000 //5000 //20000 //50000
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 24


 377:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 378:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 379:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //New Idea:
 380:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Disable the Hsync timer interrupt after the frame completes
 381:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  and reenable elsewhere...
 382:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  (It seems pixels changing from one shade to another take an
 383:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   intermediate step halfway between)
 384:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  (Thus, two updates then a pause might clear that up)
 385:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  (Duh... it doesn't clear that up, because the fastest refresh rate
 386:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   is the same...)
 387:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  (but it is an interesting effect)
 388:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  (Double-Duh... I was using a slow refresh with FRAME_UPDATE_DELAY)
 389:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Reworded: Having several frame refreshes before a pause helps to
 390:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  "solidify" the color changes... especially the sharp changes 
 391:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  (e.g. yellow<->black)
 392:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  (Side Note: I saw this effect on a regular (NON-LVDS) TFT display 
 393:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   in LCDdirect that was only connected such that R, G, and B were each
 394:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   either full-off or full-on, i.e. all Red bits were connected to a
 395:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   single output pin (full on when 1, full off when 0).
 396:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   I hadn't attributed it to improper refresh synchronization
 397:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   as the refresh rate was too fast to see... That's a handy way to get
 398:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   intermediate shades/colors without refresh-flicker from pulsing them!)
 399:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  connected with each color 
 400:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  0 means no delay (except FRAME_UPDATE_DELAY) via interrupt disabling
 401:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  If you WANT this effect (for intermediate shades?) 
 402:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   set FRAME_COUNT_TO_DELAY to 1
 403:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Then, each change of color will (apparently) result in a value halfway
 404:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   between the old color and the new color
 405:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Not sure whether it's an electrical problem, but these half-shades 
 406:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   appear dithered, sometimes ugilly, sometimes it's nice. I guess it
 407:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   depends on the goal...
 408:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //#define FRAME_COUNT_TO_DELAY 2//7//1//5//2//3
 409:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 410:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 411:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //A/O v13: Using the Samsung LTN display, instead of the IDTech IAXG
 412:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // LTN appears to be content with my pseudo-LVDS scheme.
 413:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // IAXG has never unblanked
 414:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      Even though suitable timings were found with SwitchResX
 415:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      Maybe due to psuedo-LVDS
 416:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            slight timing issues // It probably doesn't work with all cases...
 417:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Definitely with drawPix/Images...(RC oscillator variances?)
 418:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            glitches when switching LVDS states 
 419:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                 (thought I had that figured out, originally)
 420:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      The fact the LTN appears to recognize the signalling suggests the
 421:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      IAXG would be worth further exploration...
 422:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //         Unfortunately, the CCFT blew out my inverter
 423:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                        And I must have put it back together incorrectly
 424:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                        (backlight filters out of order or flipped?)
 425:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                        (which actually makes for some very interesting
 426:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                         visuals, but hard to develop with)
 427:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      IAXG: uses DE, V, and H
 428:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //             At low pixel-clock DE is active for fewer pixels...
 429:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              Last Tested: 680 was full-screen
 430:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //             Nice because it increases the frame-rate!
 431:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      LTN:  uses DE only
 432:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 433:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 25


 434:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // The idea is to use FastPWM with the PLL to implement 64-85Mbits/sec
 435:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  (the PLL on the Tiny861 supposedly maxes out at 85MHz)
 436:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  (Though I am currently running with OSCAL set to the highest frequency
 437:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   and the PLL seems to be syncing at about 128MHz)
 438:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  (New Note, a/o sdramThing2.0v5... it's kinda ironic that I was able to
 439:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   run it at 128MHz with nothing more than an AVR and some gates...
 440:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   seeing as how sdramThing has been fidgetty just running at 8MHz
 441:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Anyways, an eventual goal is to run at 133MHz+, using basically
 442:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   nothing more than the SDRAM itself for timing and refreshes...
 443:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   would allow for full resolution and full color-depth)
 444:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 445:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 446:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 447:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 448:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Wiring:
 449:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Many iterations of AVR->Differential "LVDS" circuitry resulted in the
 450:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   simplest of all:
 451:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 452:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Believe it or not, the XOR is a standard TTL LS-series XOR: 74LS86
 453:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     Specifically: TI SN74LS86N from 1980 (the only XOR in my collection)
 454:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   It's spec'd to run from 4.5-5.5V, and its propagation delays and slew
 455:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     rates aren't really spec'd to be good enough for 128MHz pixel clock
 456:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     yet it's working...
 457:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Further, the output voltages are right in the LVDS range,
 458:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     IIRC (last I 'scoped) around 1.5V High and 1.0V Low
 459:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      (Don't forget the LCD has a 100ohm resistor between
 460:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //         RXinN/clk+ and RXinN/clk-)
 461:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 462:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   It's probably best to use two XORs from the same chip for a single
 463:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    LVDS channel, since different chips may have slightly different
 464:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    characteristics. 
 465:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 466:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   The entire circuit, thus, requires TWO 74LS86's 
 467:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    (four XORs apiece, two per LVDS channel, 8-total)
 468:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 469:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 470:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              VCC3V3   VCC3V3
 471:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                |        |                           ______________
 472:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                +---\ \-_                        |  LCD (1 channel
 473:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                     | |    -                      |       of 4)
 474:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                     | | XOR   >------> RXinN/clk-  | ----.
 475:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   AVR, etc.         | |    _-                      |     |
 476:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   3.3V TTL >---+---/ /___-                        |     \ 100
 477:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   output       |                                   |     /
 478:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                |                                   |     \ ohms
 479:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                |                                   |     /
 480:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                `---\ \-_                        |     |
 481:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                     | |    -                      |     |
 482:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                     | | XOR   >------> RXinN/clk+  | ----'
 483:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                     | |    _-                      |
 484:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                +---/ /___-                        |
 485:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                |        |                          |
 486:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //               GND      GND
 487:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 488:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  
 489:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Also used: The TTL 74AHC series...
 490:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    I found some one-gang 74AHC1G32 and 74AHC1G86's on an old iBook
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 26


 491:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     motherboard. (An OR and an XOR, respectively). These are spec'd for
 492:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     3.3V operation, and faster. The output voltages appear OK for LVDS
 493:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     (with a 100ohm load in the LCD)
 494:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 495:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  NOTE: Since I only had enough of these 1-gang devices for two LVDS
 496:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     channels, I had to implement Red and Green with the LS 
 497:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     before switching all channels to the LS... Using different chips
 498:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     (specifically, different TYPES of chips) for different channels
 499:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     caused timing issues: Since the AHC is faster, the clock and Blue
 500:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     signals are synchronized, but the red and green signals were shifted
 501:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     a bit or two (resulting in "Black" appearing green)
 502:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 503:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  For other circuits attempted, see oldNotes.txt
 504:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     (and boy there were many, involving voltage dividers, AC coupling,
 505:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      reference voltages, BJT differential amplifiers... I doubt I 
 506:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      documented them all, or even most. Whoda thunk the simplest, 
 507:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      especially under- AND over-spec'd--timing, supply voltage, and
 508:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      output voltage--would be the one...?)
 509:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 510:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // LVDS/FPD-Link timing:
 511:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 512:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            |<--- (LCDdirectLVDS: "pixel") --->|
 513:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Timer1:   |<-- One Timer1 Cycle (OCR1C=6) -->|
 514:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  TCNT:     |  0   1    2    3    4    5    6  |  0   1    2    3    
 515:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            |____.____.____.____               |____.____.____.____
 516:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  RXclk+:   /         |         \    .    .    /         |         \ //
 517:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            |         |            |         |
 518:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // One Pixel: |         |<--- One FPD-Link Pixel Cycle --->|
 519:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            |                                  |
 520:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // "Blue/DVH" |____ ____v____ ____ ____v____ ____|____ ____
 521:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  RXin2:    X B3 X B2 X DE X /V X /H X B5 X B4 X B3 X B2 X ...
 522:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            | ^  ^ | 
 523:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            |         |<--Not Blue-->|         |
 524:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            |                                  |
 525:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // "Green"    |____ ____v____ ____v____ ____ ____|____ ____
 526:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  RXin1:    X G2 X G1 X B1 X B0 X G5 X G4 X G3 X G2 X G1 X ...
 527:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            | ^ ^  |  
 528:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            |         |<------->|-Not Green    |
 529:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 530:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // "Red"      |____ ____v____v____ ____ ____ ____|____ ____
 531:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  RXin0:    X R1 X R0 X G0 X R5 X R4 X R3 X R2 X R1 X R0 X ...
 532:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            | ^^     
 533:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            |         |<-->|-Not Red
 534:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 535:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Of course: The "Not Green/Red" bits above are least-significant-bits
 536:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              and basically have little/no visible effect
 537:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 538:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 539:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Implementations/prospects:
 540:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  * rowBuffer.c (more like row-settings-buffer)
 541:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     calculate a row's worth of pixels before drawing that row
 542:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     (uses packed color settings in a single byte per drawable pixel)
 543:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     64 drawable pixels across, regardless of LVDS speed
 544:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  * For faster pixels: these settings values could be stored 
 545:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     in individual bytes. Gives about 1/3 more pixels at 3x the memory
 546:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     (not implemented)
 547:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  * rowSegBuffer.c
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 27


 548:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     also calculates an entire row before drawing it
 549:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     instead of storing pixels, store "segments"
 550:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     i.e. each segment is defined by a color value and a length
 551:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     Number of segments is limited only by memory...
 552:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      e.g. 64 segments per row (max) is 64*3Bytes
 553:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //       Three bytes for color, and *really simple* packing for seg-length
 554:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      BUT: at slow LVDS speeds, the resolution of these segments could be
 555:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //       as high as one LCD pixel.
 556:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      possibly: at *really* low LVDS speeds we could be 64*2Bytes
 557:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      (with packing)
 558:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      Actually: Using GB_COMBINED gives 2Bytes per segment
 559:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      only adds two clock cycles to each "pixel", so probably worth it
 560:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 561:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   In Any Case: There's not enough RAM for a full frame
 562:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          64 pixels across * 64 pixels down is 4096 bytes
 563:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          So whatever method, we need to precalculate each row before
 564:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          displaying it
 565:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          Could be as simple as loading direct from program memory
 566:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 567:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 568:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Since low-bits are barely visible, their effect is neglected.
 569:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 570:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 571:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE/V/H Timing (LCDdirectLVDS):
 572:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  
 573:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 574:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            |  0   1    2    3    4    5    6       All: set @ 0
 575:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            |____.____.____.____                         OCR1C = 6 
 576:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Clock:    /                   \    .    .    /         Complementary-
 577:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                                             Output Mode
 578:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                                                          required for DT
 579:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Signal:    B3   B2   DE   /V   /H   B5   B4 | B3
 580:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //             ____ ____ ____ ____ ____ ____ ____|____    
 581:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   DE:      X B3 X B2 /    .    .    \ B5 X B4 X B3 X    
 582:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   state2                      |    
 583:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   DE_BLUE: >|    DT=X, OCR=0
 584:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                         Watch the transition!! -------^
 585:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   DE_NORM: >_________/\_________|    DT=2, OCR=4
 586:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   DC_DISABLED:
 587:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   maxBlue: >\____|		DT=0, OCR=5
 588:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //             See below for more blue settings...
 589:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 590:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //             ____ ____      ____      ____ ____|____ 
 591:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  H (only): X xx X xx \    /    \    / xx X xx X xx X    
 592:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   state1              | 
 593:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            >______________/\______________|    DT=3, OCR=3
 594:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  DC_DISABLED:
 595:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Not much can be done...
 596:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 597:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //             ____ ____           ____ ____ ____|____ 
 598:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V w/o H:  X xx X xx \    .    /    \ xx X xx X xx X
 599:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   state3              |
 600:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            >___________________/\_________|    DT=4, OCR=4 (+?)
 601:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DC_DISABLED:
 602:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            >___________________/\____|		DT=4, OCR=5
 603:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 604:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //             ____ ____                ____ ____|____ 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 28


 605:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V w/ H:   X xx X xx \    .    .    / xx X xx X xx X
 606:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   state4          | 
 607:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            >__________________________________|    DT=X, OCR=0
 608:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                             TransitionWatch!!! -------^
 609:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                             Shouldn't matter... DT from no-edge
 610:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DC_DISABLED:
 611:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            >\________________________|		DT=0, OCR=1
 612:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 613:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //             ____ ____      ____ ____ ____ ____|____ 
 614:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Nada:     X xx X xx \    /    .    \ xx X xx X xx X    
 615:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   state0                  |     
 616:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            >______________/\_________|    DT=3, OCR=4 (+?)
 617:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DC_DISABLED:
 618:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //            >______________/\____|		DT=3, OCR=5
 619:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 620:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //So far this is the only case I've seen:
 621:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // /Vsync
 622:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef VSYNC_ACTIVE
 623:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define VSYNC_ACTIVE		0
 624:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
 625:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef VSYNC_INACTIVE
 626:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define VSYNC_INACTIVE	1
 627:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
 628:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // /Hsync
 629:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef HSYNC_ACTIVE
 630:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define HSYNC_ACTIVE		0
 631:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
 632:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef HSYNC_INACTIVE
 633:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define HSYNC_INACTIVE	1
 634:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
 635:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE (active high)
 636:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef DE_ACTIVE
 637:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DE_ACTIVE			1
 638:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
 639:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef DE_INACTIVE
 640:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DE_INACTIVE		0
 641:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
 642:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 643:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // HERE!
 644:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 645:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 646:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 647:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 648:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Transitions: OLD!!!!! WRONG!!!!
 649:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   (are they? There're several additional transitions, now, for one.)
 650:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  The idea is to reduce the number of instructions between each
 651:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  LVDS "state."
 652:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  These are implemented below in the case:
 653:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    "#else //NOT FULL_INIT_TESTS"
 654:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Since each instruction takes *longer than* a single pixel
 655:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    two instructions would *at best* occur on two consecutive pixels
 656:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    Thus, there's likely to be a transition-glitch
 657:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    (e.g. old OCR value with new DT value)
 658:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Note that the new DT values are implemented at the next corresponding
 659:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    edge after the DT-write instruction completes
 660:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    (for +OC1A/DT1H, when TCNT is reset to 0)
 661:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    (for -OC1A/DT1L, when TCNT passes OCR1A)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 29


 662:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    New OCR values are delayed until the next TCNT reset to 0
 663:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 664:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Initial:
 665:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Nada					DT=2  NADA_OCR = (3<=OCR<(=?)6)
 666:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 667:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Nada	->	H			OCR=2
 668:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  H		->	Nada		OCR=NADA_OCR
 669:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  
 670:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Nada	->	V			DT=3
 671:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V		->	V+H		OCR=0
 672:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V+H	->	V			OCR=NADA_OCR
 673:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V		->	Nada		DT=2
 674:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 675:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Nada	->	DE			DT=1
 676:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  DE	->	Nada		DT=2
 677:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 678:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if 0
 679:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (defined(REMOVE_DC) && REMOVE_DC)
 680:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define Nada_init()         { DT1=(3<<4); OCR1A=5; }
 681:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 682:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  //Unused, normally...
 683:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define Vsync_init()       { DT1=(4<<4);  OCR1A=5; }
 684:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define VplusH_init()      { DT1=0;       OCR1A=1; }
 685:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define Hsync_init()       { DT1=(3<<4);  OCR1A=3; }
 686:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define DEonly_init()      { DT1=(2<<4);  OCR1A=4; }
 687:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define DEblue_init()		 { DT1=0;       OCR1A=5; }
 688:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 689:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #else //!REMOVE_DC
 690:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //Nada init
 691:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define Nada_init()         { DT1=(3<<4); OCR1A=4; }
 692:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 693:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //Unused, normally...
 694:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define Vsync_init()			{ DT1=(4<<4);	OCR1A=4; }
 695:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define VplusH_init()		{ DT1=0;			OCR1A=0; }
 696:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define Hsync_init()			{ DT1=(3<<4);	OCR1A=3; }
 697:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // #define DE_init()				{ DT1=(2<<4);	OCR1A=4; } //...SHOULD BE
 698:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define DEonly_init()			{ DT1=(2<<4);  OCR1A=4; }
 699:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define DEblue_init()			{ DT1=0;       OCR1A=6; }
 700:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //#define DE_init()				{ DT1=(1<<4);	OCR1A=2; } //Works with DE_ONLY
 701:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  //#define DE_init()				{ DT1=0;			OCR1A=0xff; }	//DE_BLUE
 702:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif //REMOVE_DC
 703:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
 704:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 705:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //#define FULL_INIT_TESTS TRUE
 706:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 707:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //Display is DE-Only (doesn't use H/Vsync)
 708:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Shouldn't be necessary to select this if it is,
 709:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // since DE timing is the same either way
 710:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // but I want to test whether a single-bit is being detected
 711:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // (e.g. maybe the rise/fall-times of the output aren't fast enough for a
 712:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  single bit, which might explain why the other display didn't work)
 713:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //These are just examples... the project should define them:
 714:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if 0
 715:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (defined(DE_ONLY_DISPLAY) && DE_ONLY_DISPLAY)
 716:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Vsync_fromNada()      Nada_init()
 717:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define VplusH_fromVsync()    Nada_init()
 718:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Vsync_fromVplusH()    Nada_init()
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 30


 719:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Nada_fromVsync()      Nada_init()
 720:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Hsync_fromNada()      Nada_init()
 721:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Nada_fromHsync()      Nada_init()
 722:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DEonly_fromNada()     DE_init()
 723:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DEblue_fromDEonly()	DE_init()
 724:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Nada_fromDEblue()		Nada_init()
 725:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #if(DE_BLUE)
 726:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "DE_BLUE is true, but not implemented with DE_ONLY_DISPLAY"
 727:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "...The display should be blank"
 728:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #endif
 729:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //Use full initialization of each LVDS state
 730:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // (might not be good during transitions, but should guarantee
 731:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  steady-state, in case my transitions aren't correct...)
 732:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (defined(FULL_INIT_TESTS) && FULL_INIT_TESTS)
 733:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Vsync_fromNada()		Vsync_init()
 734:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define VplusH_fromVsync()		VplusH_init()
 735:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Vsync_fromVplusH()		Vsync_init()
 736:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Nada_fromVsync()		Nada_init()
 737:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Hsync_fromNada()		Hsync_init()
 738:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Nada_fromHsync()		Nada_init()
 739:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DEonly_fromNada()		DEonly_init()
 740:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DEblue_fromDEonly()	DEblue_init()
 741:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Nada_fromDEonly()		Nada_init()
 742:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Nada_fromDEblue()		Nada_init()
 743:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 744:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 745:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #else	//NOT FULL_INIT_TESTS
 746:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //#define Vsync_fromNada()   { DT1=(4<<4); }
 747:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Vsync_fromNada()   { DT1=(4<<4); OCR1A=5; } //Leave two bits high
 748:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 																	 //for easy-scoping
 749:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 						//Three would be nicer, but I'm pretty sure OCR=TOP=ON
 750:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define VplusH_fromVsync() { OCR1A=0; }
 751:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //#define Vsync_fromVplusH() { OCR1A=4; }
 752:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Vsync_fromVplusH() { OCR1A=5; }				//Extra bits for scoping
 753:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //#define Nada_fromVsync()   { DT1=(3<<4); }
 754:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Nada_fromVsync()   { DT1=(3<<4); OCR1A=4; } //scoping...
 755:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Hsync_fromNada()   { OCR1A=3; }
 756:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Nada_fromHsync()   { OCR1A=4; }
 757:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 758:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Nada_fromDEblue()	{ DT1=(3<<4); OCR1A=4; }
 759:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define Nada_fromDEonly()	{ DT1=(3<<4); }
 760:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DEonly_fromNada()	{ DT1=(2<<4); }
 761:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DEblue_fromNada()	{ OCR1A=0xff; }
 762:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DEblue_fromDEonly() { OCR1A=0xff; }
 763:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 764:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif //End Of FULL_INIT_TESTS
 765:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
 766:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 767:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 768:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 769:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // The typical patterns look like this (not at all to scale):
 770:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   ----______------------------------------------------______-- V
 771:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //             ....
 772:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      --_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_--_ H
 773:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //             ....
 774:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      __________-__-__-__-__-__-__-__-__-__-__________________  DE
 775:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 31


 776:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //             ^^^^\														//blah
 777:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //             1234 5?
 778:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Pixels are sent during DE High (basically all the CPU will be used here)
 779:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //Ideally, 
 780:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  there won't be any glitches when changing from one state to another
 781:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 782:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Init (pre 1):
 783:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    DeadTimerRising=1
 784:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 785:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  The states are:
 786:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   (Not necessarily accurate, just looking into necessary changes)
 787:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   (from Vsync L->H)
 788:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 789:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   1  NothingActive (long, No DE, VporchFrontTimes)
 790:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 791:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   2  Hsync
 792:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 793:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   3  NothingActive (short)
 794:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 795:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   4  DE
 796:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 797:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   5  NothingActive(?)
 798:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 799:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   7  Repeat 2-5 for each row
 800:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 801:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   8  NothingActive (long, No DE, VporchBackTimes)
 802:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 803:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   9  V w/o H
 804:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 805:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   10 V w/  H
 806:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 807:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   11 Repeat 9-10 for Vsync time...
 808:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 809:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 810:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Here's how it worked pre-lvds:
 811:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // HSYNC, VSYNC, and DE refer to the actual pins
 812:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // In the LVDS setup, there're modes corresponding to each pin-combination
 813:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 814:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Timer Interrupt:
 815:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  loadData:
 816:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   HSYNC active
 817:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   HSYNC Low delay
 818:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   HSYNC inactive
 819:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   if(dataEnable)
 820:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    DE active
 821:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     Send row data
 822:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    DE inactive
 823:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  //Prep for next interrupt
 824:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  switch(hsyncCount++)
 825:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    //Vsync H->L (active)
 826:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    1:
 827:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          dataEnable=FALSE
 828:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          VSYNC active
 829:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    //Vsync L->H (inactive)
 830:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    T_Vlow:
 831:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          VSYNC inactive
 832:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    //Start of frame
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 32


 833:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    T_VD +(T_Vlow):
 834:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          dataEnable=TRUE
 835:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    //All rows have been displayed
 836:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    V_COUNT +(T_VD+T_Vlow):
 837:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          dataEnable=FALSE
 838:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    //Frame Complete
 839:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    T_DV +(V_COUNT+T_VD+T_Vlow): 
 840:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          hsyncCount=0
 841:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  if(dataEnable)
 842:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    Use the remaining time to load the next row to memory
 843:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 844:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  So:
 845:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //Interrupt0       End
 846:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    |             |  Interrupt1
 847:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    v             v  v
 848:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  H |_||_||_|
 849:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE ___________________________________________________ ...
 850:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V |_____________________________________ ...
 851:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //       |        ||
 852:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DETIME^--------^|
 853:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                 |
 854:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                 VSYNC active
 855:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                 dataEnable=FALSE (not necessary?)
 856:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 857:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //InterruptT_Vlow   End
 858:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    |             |
 859:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    v             v
 860:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  H |_||_||_|
 861:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE ___________________________________________________ ...
 862:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V _____________| ...
 863:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //       |        ||
 864:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DETIME^--------^|
 865:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                 |
 866:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                 VSYNC inactive
 867:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 868:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 869:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //InterruptT_VD   End  InterruptT_VD+1
 870:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    |             |  |            End
 871:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    v             v  v            v
 872:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  H |_||_||_|
 873:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE ____________________||_______||____ ...
 874:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V 
 875:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //       |        ||      |        |
 876:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DETIME^--------^|      ^--------^
 877:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                 |
 878:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                 dataEnable=TRUE
 879:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 880:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //InterruptV_COUNT  End
 881:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    |             |
 882:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    v             v
 883:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  H |_||_||_|
 884:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE ___||______________________________________ ...
 885:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V 
 886:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //       |        ||      |        |
 887:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DETIME^--------^|      ^--------^
 888:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                 |
 889:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                 dataEnable=FALSE
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 33


 890:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 891:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 892:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // This isn't really a state, it's basically just:
 893:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // if(hsyncCount == NUM_HYSYNCS_PER_FRAME)
 894:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    hsyncCount = 0;
 895:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                    .....................................
 896:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                    .                                   .
 897:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //InterruptT_DV   End .Interrupt0                         .
 898:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    |             | .|                                  .
 899:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    v             v .v                                  .
 900:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  H |_||_||_|
 901:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE ___________________________________________________ .
 902:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V |____________________ .
 903:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //       |        ||  .   |        |                      .
 904:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DETIME^--------^|  .   ^--------^                      .
 905:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                 |  .                                   .
 906:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                 hsyncCount=0 (repeat from Interrupt0)  .
 907:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                    .                                   .
 908:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                    .....................................
 909:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 910:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 911:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 912:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // THESE STATES ARE NO LONGER ACCURATE
 913:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // ESPECIALLY THIS FIRST STATE.
 914:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // V Front Porch originally (and in these drawings) occurred at the end
 915:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // of the frame...
 916:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // More logically, it now starts at the beginning of the frame
 917:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // (Also removing this initial "glitch" of a single interrupt with
 918:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  NothingActive)
 919:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 920:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // THESE STATES ARE NO LONGER ACCURATE (a/o 0.30, for certain)
 921:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // NOW to compare with LVDS states:
 922:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
 923:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //Interrupt0       End
 924:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    |             |  Interrupt1
 925:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    v             v  v
 926:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  H |_||_||_|
 927:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE ___________________________________________________ ...
 928:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V |_____________________________________ ...
 929:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    ^ ^          ^   ^ ^
 930:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |          |   | |
 931:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |          |   | +--- V w/o H  \ These two toggle until
 932:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |          |   +----- V w/ H   / next LCD state...
 933:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |          |
 934:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |          +--------- V w/o H > Intermediate change of state
 935:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |
 936:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | +----- NothingActive  \ From Previous State (?)
 937:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    +------- H_Only         /
 938:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 939:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 940:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //InterruptT_Vlow   End
 941:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    |             |
 942:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    v             v
 943:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  H |_||_||_|
 944:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE ___________________________________________________ ...
 945:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V _____________| ...
 946:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    ^ ^          ^   ^ ^
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 34


 947:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |          |   | |
 948:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |          |   | +--- NothingActive  \ These two toggle until
 949:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |          |   +----- H_Only         / next LCD state...
 950:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |          |
 951:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |          +--------- NothingActive > Intermediate change of state
 952:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |
 953:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | +----- V w/o H   \ From previous state
 954:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    +------- V w/ H    /
 955:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 956:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 957:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //InterruptT_VD   End  InterruptT_VD+1
 958:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    |             |  |            End
 959:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    v             v  v            v
 960:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  H |_||_||_|
 961:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE ____________________||_______||____ ...
 962:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V 
 963:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    ^ ^              ^ ^^        ^ 
 964:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |              | ||        |
 965:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |              | ||        +--- NothingActive  \  These four
 966:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |              | |+------------ DE              | cycle until
 967:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |              | +------------- NothingActive   | next LCD state...
 968:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |              +--------------- H_Only  ^      /
 969:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |                                       |
 970:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | +----- NothingActive  \ From previous   |
 971:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    +------- H_Only         / state           +-This intermediate state
 972:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                                                may not be necessary
 973:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                                                (IAXG01 shows 160 dots!)
 974:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 975:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 976:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 977:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //InterruptV_COUNT  End
 978:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    |             |
 979:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    v             v
 980:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  H |_||_||_|
 981:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE ___||______________________________________ ...
 982:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V 
 983:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    ^ ^^        ^    ^ ^
 984:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | ||        |    | |
 985:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | ||        |    | +--- NothingActive \  These two toggle
 986:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | ||        |    +----- H_Only        /  until next LCD state
 987:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | ||        |
 988:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | ||        +---- NothingActive \ 								//blah
 989:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |+------------- DE             |  From previous state
 990:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | +-------------- NothingActive  |
 991:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    +---------------- H_Only        /
 992:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 993:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // This isn't really a state, it's essentially just:
 994:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  if(hsyncCount == NUM_HSYNCS_PER_FRAME)
 995:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    hsyncCount = 0;
 996:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                    .....................................
 997:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                    .                                   .
 998:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //InterruptT_DV   End .Interrupt0                         .
 999:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    |             | .|                                  .
1000:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    v             v .v                                  .
1001:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  H |_||_||_|
1002:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE ___________________________________________________ .
1003:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V |____________________ .
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 35


1004:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    ^ ^             .                                   .
1005:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | |             .....................................
1006:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    | +--- NothingActive \											//blah
1007:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    +----- H_Only        / From previous state...
1008:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1009:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1010:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1011:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  LVDS State transitions:
1012:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   1 H_Only
1013:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   2 NothingActive
1014:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1015:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   3 V w/o H
1016:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   4 V w/ H
1017:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    
1018:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   (repeat 3,4)
1019:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1020:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   5 V w/o H
1021:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1022:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   6 NothingActive
1023:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   7 H_Only
1024:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1025:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   (repeat 6,7)
1026:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1027:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   8 NothingActive
1028:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1029:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   9 H_Only
1030:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  10 NothingActive
1031:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  11 DE
1032:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  12 NothingActive
1033:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1034:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  (repeat 9-12)
1035:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1036:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  13 H_Only
1037:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  14 NothingActive
1038:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1039:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  (repeat 13-14)
1040:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1041:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   These should be reviewed to determine which changes are necessary
1042:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   between each state...
1043:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   (the fewer changes, the less likely we'll glitch...?)
1044:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1045:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** volatile uint8_t dataEnable = 0;
1046:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** volatile uint8_t vSync = 0;
1047:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** volatile uint16_t hsyncCount = 0;
1048:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1049:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //frameCount=0 can be used in main to detect whether we've completed a 
1050:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  a frame AND its FRAME_UPDATE_DELAY
1051:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (defined(FRAME_COUNT_TO_DELAY) && (FRAME_COUNT_TO_DELAY != 0))
1052:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #error "FRAME_COUNT_TO_DELAY isn't really an lcdStuff thing anymore, is it?"
1053:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** volatile uint8_t frameCount = 0;
1054:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1055:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1056:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** void lcd_init(void)
1057:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
 295               		.stabn	68,0,1057,.LM24-.LFBB3
 296               	.LM24:
 297               	.LFBB3:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 36


 298               	/* prologue: function */
 299               	/* frame size = 0 */
 300               	/* stack size = 0 */
 301               	.L__stack_usage = 0
1058:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//Not sure modifying vSync randomly is safe...
1059:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	vSync = 0;
 302               		.stabn	68,0,1059,.LM25-.LFBB3
 303               	.LM25:
 304 0072 1092 0000 		sts vSync,__zero_reg__
1060:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//the rest should be...? assuming it occurs after lcd_update() completes
1061:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// (thus leaving it in NADA-state)
1062:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	hsyncCount = 0;
 305               		.stabn	68,0,1062,.LM26-.LFBB3
 306               	.LM26:
 307 0076 1092 0000 		sts hsyncCount+1,__zero_reg__
 308 007a 1092 0000 		sts hsyncCount,__zero_reg__
1063:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	dataEnable = FALSE;
 309               		.stabn	68,0,1063,.LM27-.LFBB3
 310               	.LM27:
 311 007e 1092 0000 		sts dataEnable,__zero_reg__
1064:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  	Nada_init();
 312               		.stabn	68,0,1064,.LM28-.LFBB3
 313               	.LM28:
 314 0082 80E3      		ldi r24,lo8(48)
 315 0084 84BD      		out 0x24,r24
 316 0086 84E0      		ldi r24,lo8(4)
 317 0088 8DBD      		out 0x2d,r24
 318 008a 0895      		ret
 319               		.size	lcd_init, .-lcd_init
 320               	.Lscope3:
 321               		.stabs	"",36,0,0,.Lscope3-.LFBB3
 322               		.stabd	78,0,0
 323               		.stabs	"drawPix:F(0,47)",36,0,2067,drawPix
 324               		.stabs	"rowNum:P(4,4)",64,0,2067,24
 325               	.global	drawPix
 326               		.type	drawPix, @function
 327               	drawPix:
 328               		.stabd	46,0,0
1065:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
1066:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1067:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1068:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define TESTVALS	0
1069:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define LTN 1
1070:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define IDT 2
1071:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1072:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1073:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //TIMING:
1074:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Measurements below (in microseconds) are referring to preLVDS
1075:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  There may be other such old-notes...
1076:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1077:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1078:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //        |<--T_Hhigh-->| |<-T_Hlow
1079:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    __   _____________   ____________  3.6V
1080:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // H    |_|             |_|           _  0V
1081:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1082:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    Data Enable
1083:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //       Only active when there's valid pixel data
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 37


1084:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //       (For a dual-pixel 1024x768 display:
1085:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //         for 512 of the 717 clocks in HSYNC-active)
1086:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //       Low during Vsync... (~720us)
1087:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1088:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1089:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //IDTech display: 136 dots
1090:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //2-136+
1091:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //IDTech, last used: 40
1092:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //LTN Last used 8
1093:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // LTN: 1072<=1344<=1500 clocks per line, 1024DE... Hsync unused
1094:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // SEE Hlow_Delay() notes if this value is large!
1095:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1096:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef H_LOW_DOTS
1097:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (DISPLAY == LTN)
1098:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define H_LOW_DOTS	8
1099:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == IDT)
1100:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define H_LOW_DOTS   40//8//1//40 //30 //2//136
1101:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1102:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define H_LOW_DOTS	100//0 //LTN doesn't use H_LOW (DE-only)
1103:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 							  // And having a value here increases codesize
1104:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1105:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1106:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1107:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //H is set low immediately upon entry of the timer interrupt
1108:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // its low-time is controlled via nops
1109:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // (so if HLow is long for a particular display, this might need revising)
1110:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1111:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if((!defined(HLOW_DELAY_OVERRIDE) || !HLOW_DELAY_OVERRIDE) \
1112:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		                                         && !defined(Hlow_Delay))
1113:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define Hlow_Delay() \
1114:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	delay_Dots(H_LOW_DOTS)
1115:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1116:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1117:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1118:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1119:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1120:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //This was found expermentally with SwitchResX
1121:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //IDTech Last Used: 680
1122:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // (IDTech had some oddities regarding slow pixel-clocks, where pixels
1123:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  would be repeated, regardless of the pixel-clock, thus, for slow clocks
1124:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  it has the effect of *stretching* the image, thus 680 "pixels" across
1125:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  instead of its 1024 *physical* pixels)
1126:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //LTN last used 1024
1127:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Oddly: For the LTN, this doesn't seem to affect the horizontal
1128:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //        it does, however, affect the vertical(!)
1129:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // If I recall Correctly, this is used only for setting the timer interrupt
1130:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  rate...
1131:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef DE_ACTIVE_DOTS
1132:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (DISPLAY == LTN)
1133:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define DE_ACTIVE_DOTS	1024
1134:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == IDT)
1135:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define DE_ACTIVE_DOTS	680 //1024 //800 //920 //943 //812 //472 //1024
1136:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1137:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define DE_ACTIVE_DOTS	1024
1138:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1139:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1140:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 38


1141:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //Horizontal Blank Time: HD_DOTS + H_LOW + DH_DOTS
1142:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  90-320+
1143:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //Horizontal Total Time: 1206<=1344<=2047
1144:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // ... but Total = Blank + Pixels, so 90+1024 != 1206
1145:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Excess waits should be thrown in DH (since that's between interrupts)
1146:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //T_HD is the time from H inactivated to DE activated
1147:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //aka H back-porch: 1-160+
1148:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //IDTech Last Used: 50
1149:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //LTN last used 5
1150:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1151:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef HD_DOTS
1152:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (DISPLAY == LTN)
1153:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define HD_DOTS 5
1154:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == IDT)
1155:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define HD_DOTS	50 //5 //0//20//5 //50 //30 //1 //160
1156:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1157:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define HD_DOTS 50//5
1158:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1159:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1160:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1161:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef HD_Delay
1162:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define HD_Delay()	delay_Dots(HD_DOTS)
1163:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1164:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1165:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // I think this was just a mistake. This change to delay_Dots a/o 0.10ncf
1166:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // (untested in LCDdirectLVDS)
1167:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //delay_cyc(HD_DOTS)
1168:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1169:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1170:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // This is the number of CPU cycles between DE->L and Horiz->L
1171:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // This is just used in calculating the OCR value...
1172:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // aka H Front Porch: 0-24+
1173:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // IDTech Last Used: 24
1174:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // LTN last used 46
1175:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // 1072-1024-1-1 = 46
1176:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef DH_DOTS
1177:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (DISPLAY == LTN)
1178:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define DH_DOTS	46
1179:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == IDT)
1180:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define DH_DOTS	24 //46 //480//6//12//24 //46 //24 //122//30 //0 //24
1181:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1182:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define DH_DOTS	0//1000//100//46
1183:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1184:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1185:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1186:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //       |
1187:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //       v
1188:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      T_DH
1189:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      ||    |<-T_DE->|  |  |<--T_HD (Hsync->DE)
1190:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // H   __.  ____________  .___________
1191:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      .|_|  .        .|_|  .
1192:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     _.     .________.     .___________
1193:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE   |_____| 512clk |_____|
1194:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //      ^              ^
1195:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //       \___________   \                        (just avoiding \ warning)
1196:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                   \  |     768 Hsyncs
1197:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                    v v
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 39


1198:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     _             _ _ _ _ _ _ _ _ _ _ 
1199:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE   |___________| | | | | | | | | | |______
1200:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1201:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // one Hsync = T_HD+T_DH+T_Hlow+T_DE = 19.865us
1202:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1203:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //aka V-sync back porch: 7-29-63 "Vbp should be static"
1204:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // IDTech Last Used: 29
1205:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // LTN last used 3
1206:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //LTN Frame: 772<=806<=1000 lines...
1207:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1208:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef T_VD
1209:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (DISPLAY == LTN)
1210:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define T_VD 3
1211:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == IDT)
1212:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define  T_VD 29 //3//29 //7 //29
1213:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1214:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define T_VD 3
1215:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1216:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1217:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1218:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //aka V-sync front porch: 1-3+
1219:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // IDTech Last Used: 3
1220:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // LTN last used 3
1221:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef T_DV
1222:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (DISPLAY == LTN)
1223:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define T_DV 3
1224:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == IDT)
1225:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define T_DV 3//3 //1 //3
1226:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1227:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define T_DV 3
1228:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1229:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1230:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1231:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //1-6+ (1 is used by the first switch-case...)
1232:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // IDTech Last Used: 6
1233:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // LTN Last used 16
1234:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // 772 - 768 - 1 - 1 = 2
1235:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef T_Vlow
1236:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (DISPLAY == LTN)
1237:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define T_Vlow 16
1238:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == IDT)
1239:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define T_Vlow	6 //16//6 //2 //6
1240:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1241:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define T_Vlow 32
1242:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1243:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1244:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1245:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // IDTech Last Used: 768
1246:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef V_COUNT
1247:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (DISPLAY == LTN)
1248:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define V_COUNT	768
1249:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == IDT)
1250:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define V_COUNT	768
1251:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif (DISPLAY == TESTVALS)
1252:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // #if (LVDS_PRESCALER == 8)
1253:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #define V_COUNT 768
1254:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // #else
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 40


1255:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  #define V_COUNT	(768*2/3)
1256:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // #endif
1257:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1258:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1259:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1260:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                       
1261:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                      |           
1262:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                      V           
1263:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              |<-T_DV>|           |<-T_VD-->|
1264:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              .       .           .         .
1265:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     _____________||__.   124us   .____||___________________
1266:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V           .   ||  |___________|    ||   .
1267:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     _ _ _ _ _ _ _|| _ _ _ _ _ _ _ _ _ ||_ _ _ _ _ _ _ _ _ _ _
1268:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  H   | | | | | | ||| | | | | | | | | ||| | | | | | | | | | |
1269:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //              .   ||                   ||   .
1270:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     _ _ _ _ _.   ||       720us       ||   ._ _ _ _ _ _ _ _ _
1271:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE   | | | | |___||___________________||___| | | | | | | | |
1272:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                  ||                   ||
1273:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1274:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                        1
1275:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                        |
1276:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                        v               
1277:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     _________________   ___________________   _____________
1278:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  V                   |_|                   |_|
1279:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  H  |||||||||||||||||||||||||||||||||||||||||||||||||||||||
1280:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE  ||||||||||||||||_____|||||||||||||||||_____||||||||||||
1281:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                          ^
1282:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                          |
1283:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //                          2
1284:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1285:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1286:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1287:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define HSYNC_COUNT_FRAME_COMPLETE  \
1288:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	(T_DV +(V_COUNT+T_VD+T_Vlow) + FRAME_UPDATE_DELAY)
1289:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // T_DV = 3
1290:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // V_COUNT = 768 
1291:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // T_VD = 3
1292:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // T_Vlow = 32
1293:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // FRAME_UPDATE_DELAY = 0
1294:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // TOTAL = 806
1295:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1296:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if(FRAME_UPDATE_DELAY != 0)
1297:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #error "FRAME_UPDATE_DELAY is no longer implemented..."
1298:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1299:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1300:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1301:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //#if(HSYNC_COUNT_FRAME_COMPLETE & 0x01)
1302:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // #warning "Total vertical lines might need to be even!"
1303:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  //This should be fixed...
1304:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //#endif
1305:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1306:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1307:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DOT_COUNT_PER_HSYNC \
1308:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	(H_LOW_DOTS + HD_DOTS + DE_ACTIVE_DOTS + DH_DOTS)
1309:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // H_LOW_DOTS = 100
1310:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // HD_DOTS = 50 
1311:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DE_ACTIVE_DOTS = 1024
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 41


1312:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DH_DOTS = 0
1313:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // TOTAL = 1174
1314:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1315:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1316:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //#define MAKELONG (0L)
1317:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1318:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DOT_COUNT_PER_FRAME \
1319:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  ((MAKELONG(HSYNC_COUNT_FRAME_COMPLETE)) * (MAKELONG(DOT_COUNT_PER_HSYNC)))
1320:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // TOTAL = 946,244
1321:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1322:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //Hlow_Delay 		H_LOW_DOTS
1323:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //HD_Delay			HD_DOTS	
1324:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //DE_ACTIVE_DOTS
1325:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //DH_DOTS
1326:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1327:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1328:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1329:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** static __inline__ \
1330:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** void loadData(uint16_t rowNum, uint8_t dataEnable) \
1331:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	  __attribute__((__always_inline__));
1332:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1333:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1334:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1335:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** /*
1336:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** static __inline__ \
1337:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** void loadRow(uint16_t rowNum) \
1338:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	__attribute__((__always_inline__));
1339:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** */
1340:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1341:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //Returns TRUE when the frame is complete
1342:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Should send nada (and maybe hsyncs?) thereafter(?)
1343:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // In sdramThing2.0, when this returns TRUE, the SDRAM loading is complete
1344:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // EXCEPT: the final HD_Dots' FR_READ/ACTIVATE commands will point to a
1345:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  non-existent "next" Hsync... these commands need to be rewritten to
1346:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  point to the "first" Hsync. This is handled in sdramThing2.0's code
1347:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Used to be:
1348:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //SIGNAL(TIMER0_COMPA_vect)
1349:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //a/o v0.60: lcd_update() now returns the row-number (0 to V_COUNT-1)
1350:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //           Not *entirely* accurate, as it may be negative during VBLANK
1351:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //           OR returns LCD_FRAMECOMPLETE when that's the case.
1352:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DOES THIS RETURN THE ROW THAT WAS DRAWN OR THE NEXT...?
1353:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define LCD_FRAMECOMPLETE	INT16_MAX
1354:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** int16_t lcd_update(void)
1355:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
1356:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //	uint8_t frameComplete = FALSE;
1357:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1358:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #warning "this might be off by one, which would explain the weird first row"
1359:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	int16_t rowNum = hsyncCount - T_DV-T_VD-T_Vlow;
1360:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//static uint8_t frameCount = 0;
1361:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1362:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if 0 // (defined(SLOW_EVERYTHING_TEST) && SLOW_EVERYTHING_TEST)
1363:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	while(TCNT0L != 7){};
1364:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//This won't work... who knows how many cycles interrupt-entry will be
1365:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//Above should fix that...
1366:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//I think this was just an indicator for scope triggering...
1367:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// not relevent for 
1368:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	setpinPORT(PB2, PORTB);
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 42


1369:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	clrpinPORT(PB2, PORTB);
1370:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1371:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1372:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//Hsync and Actually draw the pixels... (when DE is active)
1373:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// This takes a LONG time and will occupy most of the CPU...
1374:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//  ... IN THIS INTERRUPT
1375:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//loadData(((hsyncCount-T_VD-T_Vlow)>>3)&31, dataEnable,colorOverride);
1376:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //	loadData(hsyncCount-T_DV-T_VD-T_Vlow, dataEnable);
1377:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1378:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1379:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	loadData(rowNum, dataEnable);
1380:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1381:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1382:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	hsyncCount++;
1383:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1384:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	switch(hsyncCount)
1385:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	{
1386:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//V Front Porch, begins with initLCD
1387:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1388:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Vsync H->L (Begin V-Sync)
1389:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		case T_DV:
1390:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			dataEnable = FALSE;
1391:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			//clrpinPORT(VSYNC_PIN, VSYNC_PORT);
1392:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			vSync = TRUE;
1393:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			Vsync_fromNada();
1394:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			break;
1395:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Vsync L->H (Begin V Back Porch)
1396:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		case T_Vlow + T_DV:
1397:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//	if(hfm_nextOutput(&modulator))
1398:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//		colorOverride = 0xff;
1399:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//	else
1400:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//		colorOverride = 7;
1401:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			//setpinPORT(VSYNC_PIN, VSYNC_PORT);
1402:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			vSync = FALSE;
1403:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			Nada_fromVsync();
1404:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			break;
1405:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Start of frame (DE active)
1406:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		case T_VD +(T_Vlow + T_DV):
1407:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			dataEnable = TRUE;
1408:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			break;
1409:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// All rows have been displayed
1410:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// Return to V Front Porch
1411:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		case V_COUNT +(T_VD + T_Vlow + T_DV):
1412:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			dataEnable = FALSE;
1413:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//	break;
1414:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Frame complete
1415:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//case HSYNC_COUNT_FRAME_COMPLETE:
1416:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			//T_DV +(V_COUNT+T_VD+T_Vlow) + FRAME_UPDATE_DELAY:
1417:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			hsyncCount = 0;
1418:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if 0 //(FRAME_COUNT_TO_DELAY != 0)
1419:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			//static uint8_t frameCount = 0;
1420:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			frameCount++;
1421:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			if(frameCount == FRAME_COUNT_TO_DELAY)
1422:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			{
1423:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 				frameCount = 0;
1424:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 				timer_compareMatchIntSetup(0, OUT_CHANNELA, FALSE);
1425:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 				//timer_compareMatchIntDisable(0, OUT_CHANNELA);
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 43


1426:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			}
1427:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1428:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			
1429:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //#warning "NewNote: WTF, are we relying on loadData to have properly set the mode?"
1430:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Yeah, guess that makes sense... Must be Nada...
1431:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			//frameComplete = TRUE;
1432:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			rowNum = LCD_FRAMECOMPLETE;
1433:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			break;
1434:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		default:
1435:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			break;
1436:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	}
1437:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1438:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1439:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //a/o 0.56ncf-1 (LCDdirectLVDS70)
1440:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // the call to loadRow is handled in the main project... and maybe it's
1441:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // best that way.
1442:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1443:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if 0 //(defined(LOADROW) && LOADROW)
1444:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//Load the next row into the row(seg)buffer
1445:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//data is enabled after T_VD+T_Vlow...
1446:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	if((hsyncCount >= T_VD+T_Vlow) && (hsyncCount < T_VD+T_Vlow+V_COUNT))
1447:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		loadRow(hsyncCount - (T_VD+T_Vlow));
1448:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1449:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1450:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//This note was written long before the above was commented-out...
1451:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//So...?
1452:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// Here is where loadRow used to be called
1453:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// it has been moved to oldNotes.txt, but it would make more sense
1454:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// to look at LCDdirectLVDS <25 or LCDdirect
1455:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// loadRow used the time between DE inactive and the next Hsync
1456:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// to load a row to a row-buffer (as opposed to a frame-buffer)
1457:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// thus, DE could gain more pixels because there would be fewer
1458:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// calculations to determine the memory location to write from
1459:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// This effect has since been minimized
1460:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// BUT loadRow might be necessary for program-memory-based images...
1461:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1462:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	return rowNum; //frameComplete;
1463:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
1464:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1465:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1466:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //See LCDdirectLVDS for an example...
1467:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // basically it loads a single row into a buffer for the next dateEnable
1468:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  (either the row-buffer or the row-segment-buffer) 
1469:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // This has been *greatly* reduced, is not at all functional, just
1470:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // to give an idea of loadRow's purpose.
1471:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if 0 //(defined(LOADROW) && LOADROW)
1472:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** void loadRow(uint16_t rowNum)
1473:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
1474:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//e.g....
1475:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	tet_drawRow(rbRowNum, rowBuffer);
1476:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	
1477:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//and...	
1478:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	rowBuffer[i] = fb_to_rb(colorVal);
1479:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	
1480:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//and...
1481:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	if((rbRowNum >= SMILE_TOP_ROW) &&
1482:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			(rbRowNum < (SMILE_HEIGHT+SMILE_TOP_ROW)))
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 44


1483:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	{
1484:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			for(i=0; i<FB_WIDTH; i++)
1485:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			{
1486:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****          	temp=pgm_readImageByte(pimage, rbRowNum-SMILE_TOP_ROW, i);
1487:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 				if(!(temp & 0xC0))
1488:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 					rowBuffer[i+SMILE_SHIFT] = fb_to_rb(temp);
1489:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			}
1490:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	}
1491:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1492:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	life_drawRow(rbRowNum, &(rowBuffer[RB_WIDTH-LIFE_WIDTH]));
1493:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1494:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//HORIZONTAL_COLOR_BARS
1495:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	for(i=0; i<RB_WIDTH; i++)
1496:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		rowBuffer[i] = fb_to_rb(rowNum);
1497:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1498:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//Good for syncing to have white on both borders...
1499:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	newSeg(1, 0x06, (6<<4) | 3);
1500:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	
1501:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
1502:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif //LOAD_ROW
1503:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1504:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1505:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //Including inactive pixel-clocks (timing)
1506:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // DotCount per row...
1507:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  TOTAL_CYC_COUNT was used for the timer-interrupt in LCDdirectLVDS
1508:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  This was DOTS_TO_CYC(DISPLAY_DOT_COUNT) + ROW_CALCULATION_CYCS
1509:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  ROW_CALCULATION_CYCS was 50,000 (!!!)
1510:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   DOTS_TO_CYC(dots), last-used, was dots*7 (LVDS_PRESCALER nullified /8)
1511:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   So, the overall dot-count per row was... 
1512:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     DISPLAY_DOT_COUNT + ROW_CALCULATION_DOTS
1513:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     where ROW_CALCULATION_DOTS = 50,000cyc/7 = 7142 dots
1514:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //     So... the overall dot-count per row was *MUCH* longer than usual
1515:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  Pretty certain there's not nearly enough memory to simulate that
1516:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   (in sdramThing2.0)
1517:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   But It does suggest that it would be worthwhile to try to stretch
1518:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   the rows as much as possible...
1519:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   During this time, NADA is sent normally, (V=H, H=H, DE=L)
1520:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    Or Vsync (V=L, H=H, DE=L)
1521:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   Maybe something could be simulated with PWM again, if necessary...
1522:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //   (Certainly not at full-speed)
1523:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DISPLAY_DOT_COUNT \
1524:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	(H_LOW_DOTS + HD_DOTS + DE_ACTIVE_DOTS + DH_DOTS)
1525:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1526:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if 0
1527:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1528:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //#define T_Hlow_CYC 1//8 //(T_Halow_REAL*3)
1529:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define T_Hlow_CYC DOTS_TO_CYC(H_LOW_DOTS)
1530:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1531:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define T_DE_CYC	DOTS_TO_CYC(DE_ACTIVE_DOTS)
1532:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1533:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //#define T_HD_CYC 1//3//(T_HD_REAL*3)
1534:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define T_HD_CYC	DOTS_TO_CYC(HD_DOTS)
1535:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1536:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define T_DH_CYC	DOTS_TO_CYC(DH_DOTS)
1537:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1538:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1539:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 45


1540:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1541:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1542:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** void init_timer0Hsync(void)
1543:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
1544:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//T_HD + T_DH + T_low + T_DE
1545:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// For the original system, 19.865us = 695 dot-clocks
1546:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// We'd need to take advantage of the 16-bit timer
1547:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//  OCR1A may not be written properly (with a temporary high-byte)
1548:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//  ... not sure.
1549:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// TIMER0 DOES NOT HAVE CTC MODE in 16-bit mode
1550:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1551:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // This is a hack, for testing syncability with long row-calculations
1552:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // before actually drawing it... e.g. loading from program memory
1553:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // This value needs to be larger than the calculation time
1554:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // otherwise, it seems, syncing isn't stable
1555:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // BUT THIS IS A HACK, has nothing to do with actual calculation time
1556:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // And for slow LVDS or whatnot, this may be unnecessarily HUGE
1557:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1558:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define DISPLAY_CYC_COUNT	(DOTS_TO_CYC(DISPLAY_DOT_COUNT))
1559:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //	(T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC)
1560:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1561:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //NOTE that with longer ROW_CALCULATION_CYCS, lines can be repeated...
1562:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // apparently an effect of the display, definitely not a code-thing
1563:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // in which case the vertical resolution decreases
1564:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // though, this could be used to advantage... 
1565:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // (e.g. more processing time outside the drawing interrupts?)
1566:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // NOTE that if the value is too small and calculations take longer in some
1567:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // lines than others (?), those lines may repeat, or syncing could be off
1568:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (LVDS_PRESCALER == 8)
1569:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  //#define ROW_CALCULATION_DELAY 1//20
1570:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define ROW_CALCULATION_CYCS (50000) //0 //(70000) //(100000)
1571:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #else
1572:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  //#define ROW_CALCULATION_DELAY 9//7//5//2//1//10
1573:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define ROW_CALCULATION_CYCS	(8*DISPLAY_CYC_COUNT)
1574:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1575:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1576:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define TOTAL_CYC_COUNT \
1577:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	(ROW_CALCULATION_CYCS + DISPLAY_CYC_COUNT)
1578:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //	(ROW_CALCULATION_DELAY * (T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC))
1579:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //#define TOTAL_CYC_COUNT 2000
1580:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (TOTAL_CYC_COUNT > 255)
1581:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  //Adding +7 causes it to round up (hopefully)
1582:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define TIMER0_TCNTS ((TOTAL_CYC_COUNT+7)/8)
1583:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define TIMER0_CLKDIV	CLKDIV8
1584:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+7)/8: Timer0 CLKDIV8"
1585:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #if (TIMER0_TCNTS > 255)
1586:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+63)/64: Timer0 CLKDIV64"
1587:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #define TIMER0_TCNTS ((TOTAL_CYC_COUNT+63)/64)
1588:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #define TIMER0_CLKDIV CLKDIV64
1589:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #if (TIMER0_TCNTS > 255)
1590:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	 #warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+255)/256: Timer0 CLKDIV256"
1591:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	 #define TIMER0_TCNTS ((TOTAL_CYC_COUNT+255)/256)
1592:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	 #define TIMER0_CLKDIV CLKDIV256
1593:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	 #if (TIMER0_TCNTS > 255)
1594:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		#warning "TIMER0_TCNTS = (TOTAL_CYC_COUNT+1023)/1024: Timer0 CLKDIV1024"
1595:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		#define TIMER0_TCNTS ((TOTAL_CYC_COUNT+1023)/1024)
1596:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		#define TIMER0_CLKDIV	CLKDIV1024
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 46


1597:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	 #endif
1598:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #endif
1599:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #endif
1600:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #if (TIMER0_TCNTS == 0)
1601:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #error "TIMER0_OCRVAL == 0"
1602:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #endif
1603:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #else
1604:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define TIMER0_TCNTS TOTAL_CYC_COUNT
1605:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define TIMER0_CLKDIV CLKDIV1
1606:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1607:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1608:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (defined(SLOW_EVERYTHING_TEST) && SLOW_EVERYTHING_TEST)
1609:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  //For testing, I want to see the pulses with the 'scope
1610:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  // Unless the timer is divisible by 7 the pulses will not align with the
1611:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  // timer overflow...
1612:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  //but shit... it's running at clkdiv8 so each TCNT is 64 bits!
1613:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  // but this shouldn't matter for visualizing, that's only ~10 pixel clocks
1614:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  // and we'll only start visualizing *after* the extra TCNTs...
1615:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  //Since the timer counts from 0 to (and including) OCR1A
1616:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  // Add one to this test...
1617:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #if (((TIMER0_TCNTS + 1) % 7) == 0)
1618:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 1) % 7 == 0"
1619:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS"
1620:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS)
1621:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1622:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 2) % 7) == 0)
1623:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 2) % 7 == 0"
1624:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 1"
1625:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 1)
1626:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1627:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 3) % 7) == 0)
1628:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 3) % 7 == 0"
1629:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 2"
1630:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 2)
1631:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1632:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 4) % 7) == 0)
1633:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 4) % 7 == 0"
1634:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 3"
1635:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 3)
1636:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1637:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 5) % 7) == 0)
1638:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 5) % 7 == 0"
1639:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 4"
1640:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 4)
1641:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1642:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #elif (((TIMER0_TCNTS + 6) % 7) == 0)
1643:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "(TIMER0_TCNTS + 6) % 7 == 0"
1644:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS + 5"
1645:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS + 5)
1646:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1647:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #elif (((TIMER0_TCNTS) % 7) == 0)
1648:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "(TIMER0_TCNTS) % 7 == 0"
1649:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #warning "   so... TIMER0_OCRVAL = TIMER0_TCNTS - 1"
1650:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #define TIMER0_OCRVAL (TIMER0_TCNTS - 1)
1651:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1652:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #else
1653:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****   #error "WTF?"
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 47


1654:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #endif
1655:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #else
1656:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define TIMER0_OCRVAL (TIMER0_TCNTS-1)
1657:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1658:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1659:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (TIMER0_OCRVAL > 255)
1660:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #error "Despite all my efforts, TIMER0_OCRVAL is *still* > 255!"
1661:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1662:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1663:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    OCR0A = TIMER0_OCRVAL; //T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC;
1664:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	timer_setWGM(0, WGM_CLR_ON_COMPARE);
1665:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    timer_selectDivisor(0, TIMER0_CLKDIV); //CLKDIV1);
1666:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    timer_compareMatchIntEnable(0, OUT_CHANNELA);
1667:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
1668:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1669:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define fullBlue()	DEblue_init()
1670:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1671:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1672:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1673:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //Either use one of the ones here, or define your own...
1674:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // rowNum is the drawable row number on the LCD...
1675:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //static __inline__ void drawPix(uint16_t rowNum);
1676:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1677:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // This should have a uint16 rowNum!
1678:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // But, so far, the only cases which use all 768 rows are LCDdirectLVDS
1679:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // with RowSegBuffer, and sdramThing (how did this uint8_t thing not cause
1680:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // trouble there?!)
1681:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // RowSegBuffer doesn't pay attention to rowNum in drawPix...
1682:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1683:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1684:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1685:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if 0
1686:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if (!defined(ROW_SEG_BUFFER) || !ROW_SEG_BUFFER)
1687:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //drawPix loads each pixel individually... It doesn't use a for-loop
1688:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // since that would take away from actual pixel-drawing time...
1689:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // I think it's been removed... but here's a (non-functional) example...
1690:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** void drawPix(uint8_t rowNum)
1691:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
1692:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	writeColor(*(color+1));	 
1693:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	writeColor(*(color+2));	 
1694:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	writeColor(*(color+3)); 
1695:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	...
1696:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	writeColor(*(color+61));
1697:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	writeColor(*(color+62));
1698:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	writeColor(*(color+63));
1699:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// WriteColor writes the pixel *after* the calculations...
1700:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// thus the pixel appears basically after writeColor completes
1701:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	// These nops assure the 64th pixel is fully-displayed before exitting
1702:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	asm("nop");
1703:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	...
1704:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	asm("nop");
1705:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1706:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** /*		reg[17] = colorBuffer[rowNum][17];                         
1707:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		writeColor(reg[17]);                         
1708:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		...
1709:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		reg[20] = colorBuffer[rowNum][20];                         
1710:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		writeColor(reg[20]);  
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 48


1711:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		
1712:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//REPEATING to fill screen... (delayDots = 342 worked prior to this)
1713:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		reg[0] = colorBuffer[rowNum][0];
1714:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		writeColor(reg[0]);
1715:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		...
1716:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		reg[10] = colorBuffer[rowNum][10];
1717:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		writeColor(reg[10]);
1718:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** */
1719:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Display the rest as black...
1720:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		writeColor(0);
1721:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
1722:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #else		//ROW_SEG_BUFFER
1723:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** void drawPix(uint8_t rowNum)
1724:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
1725:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
1726:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	         | (0<<COM1B1) | (1<<COM1B0)
1727:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	         | (1<<PWM1A) | (1<<PWM1B) );
1728:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1729:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** /* This bit was in loadData, just some notes, now...
1730:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1731:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  WTF, how did this work?! Am I not using drawPix?!
1732:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    Yes, but drawPix calls drawSegs, which doesn't have an argument
1733:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    because loadRow takes the row argument elsewhere, drawSegs just
1734:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    draws 'em
1735:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       //#warning "see 'shouldBe' here..."
1736:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       //Should be:
1737:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       rowNum = rowNum*FB_HEIGHT/V_COUNT;
1738:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       //rowNum = rowNum / (768/FB_HEIGHT);
1739:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1740:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	So, rowNum change left-over from the ol' FrameBuffer days had no effect
1741:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	on drawSegs.
1742:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** */
1743:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1744:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1745:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1746:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		drawSegs();
1747:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1748:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1749:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//DE->Nada transition expects fullBlue...
1750:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Also helps to show the edge of the DE timing...
1751:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1752:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//!!! Not sure what the state is at this point...
1753:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// could be any DE+Blue level, or could be NADA...
1754:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// Nada: DT1=3, still leaves one bit for clocking, might be OK
1755:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****          
1756:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Among the things that don't make sense...
1757:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// This appears to go into affect BEFORE delay_cyc (?)
1758:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// as, without a pull-up resistor on the /OC1B output, 
1759:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// green seems to be floating between the last pixel and the
1760:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// delay_cyc (!)
1761:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Disable complementary-output for Green 
1762:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//  (on /OC1B, where CLK is OC1B)
1763:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// Since Nada, V, and H DT's might be bad for clocking.
1764:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
1765:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****          | (1<<COM1B1) | (0<<COM1B0)
1766:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****          | (1<<PWM1A) | (1<<PWM1B) );
1767:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 49


1768:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		fullBlue();
1769:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
1770:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif //0
1771:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1772:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1773:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1774:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //          G) groovy little spiral...
1775:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1776:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1777:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if 0 //(defined(CLOCK_INSENSITIVITY_TESTING) && CLOCK_INSENSITIVITY_TESTING)
1778:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEonly_fromNada();
1779:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Enable complementary-output for Green (on /OC1B, where CLK is OC1B)
1780:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
1781:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 				   | (0<<COM1B1) | (1<<COM1B0)
1782:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 					| (1<<PWM1A) | (1<<PWM1B) );
1783:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1784:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1785:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1786:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1787:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1788:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1789:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1790:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1791:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1792:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1793:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** /* These are old tests from above, under if(dataEnable)
1794:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    They should all be implemented in lcdStuff.c, but have not been
1795:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    retested since...
1796:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if(defined(BLUE_DIAG_BAR) && BLUE_DIAG_BAR)
1797:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       uint16_t blueCyc = DOTS_TO_CYC(rowNum);
1798:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
1799:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       
1800:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       DEonly_fromNada();
1801:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       delay_cyc(notBlueCyc);
1802:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       DEblue_fromDEonly();
1803:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       delay_cyc(blueCyc);
1804:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1805:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       Nada_fromDEblue();
1806:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif(defined(BLUE_VERT_BAR) && BLUE_VERT_BAR)
1807:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       DEonly_fromNada();
1808:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)/3);
1809:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       DEblue_fromDEonly();
1810:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)*2/3);
1811:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       Nada_fromDEblue();
1812:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif(defined(DE_BLUE) && DE_BLUE)
1813:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       DEblue_fromNada();
1814:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS));
1815:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       Nada_fromDEblue();
1816:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #else  //NOT BLUE_DIAG_BAR, BLUE_VERT_BAR, NOR DE_BLUE
1817:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #if ( defined(COLOR_BAR_SCROLL) && COLOR_BAR_SCROLL)
1818:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       if(rowNum <= 256)
1819:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****          rowNum=0;
1820:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       else
1821:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****          rowNum=1;
1822:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #else //NOT COLOR_BAR_SCROLL... drawPix...
1823:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** */
1824:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 50


1825:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1826:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1827:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //a/o LCDdirectLVDS62:
1828:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // These BLUE_... tests are being reimplemented.
1829:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // They're *quite* handy for initial-testing of an untested display.
1830:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //
1831:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // Realistically, they should probably be less LVDS-specific
1832:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // (non-LVDS displays needn't be coded with these transition-specific
1833:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // functions like DEonly_fromNada() or DEblue_fromDEonly(), and certainly
1834:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // needn't be limited to blue/black testing. LVDS displays contain their
1835:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // syncing signals on the same wire as the blue pixel-data, thus these
1836:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // tests...)
1837:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // In the long-run, maybe they should be moved to an lvdsLCD commonCode
1838:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // and the transition-specific code removed from here, but I've yet to
1839:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // explore this.
1840:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // For non-LVDS displays, these should still be pretty good tests, and
1841:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // implementing transition-specific functions shouldn't be too difficult...
1842:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // e.g. "#define DEonly_fromNada()    setpinPORT(DE_PIN, DE_PORT)"
1843:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // or   "#define DEblue_fromDEonly()  BLUE_PORT = 0xff"
1844:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // (Actually, transition-specific functions make it faster regardless of
1845:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // the LVDS/non-LVDS nature of the display, as some things are redundant...
1846:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // e.g. if calls to DEonly_fromNada() were replaced with calls to DEonly(),
1847:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // it would require disabling H-sync and V-sync, in addition to enabling DE
1848:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // in every call. When we start getting into worrying about aligning pixels
1849:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // with the edge of the display and making them as skinny as possible, each
1850:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // cpu instruction counts.
1851:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // So, I guess, the only LVDS-specific stuff here is the blue-related
1852:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // transitions (and, more specifically, the fact that there are *only*
1853:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // blue-related transitions, as opposed to red and green)
1854:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1855:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //a/o sdramThing2.0v8 early... appears to be syncing on Blue signal
1856:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // thus we get diagonal data including Hsync (colored in red) along the
1857:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // as a diagonal stripe at the right
1858:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if((defined(BLUE_DIAG_BAR) && BLUE_DIAG_BAR) || \
1859:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	 (defined(BLUE_DIAG_BAR_SCROLL) && BLUE_DIAG_BAR_SCROLL) )
1860:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //BORDER is somewhat risky...
1861:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // It doesn't actually add a border to the right-side
1862:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // The green shown there is due to DE deactivating.
1863:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define BORDER ((DE_ACTIVE_DOTS - V_COUNT)/2)
1864:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define drawPixSetup dpSetup
1865:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //uint16_t blueDots;
1866:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //uint16_t blackDots;
1867:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //int16_t notBlueCyc;
1868:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //int16_t blueCyc;
1869:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** int32_t blueCount;
1870:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** int32_t blackCount;
1871:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1872:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1873:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** static __inline__ void dpSetup(uint16_t rowNum)
1874:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
1875:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	uint32_t blueDots = rowNum;
1876:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if(defined(BLUE_DIAG_BAR_SCROLL) && BLUE_DIAG_BAR_SCROLL)
1877:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	static uint16_t rowOffset = 0;
1878:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	if(rowNum == 0)
1879:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	{
1880:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		rowOffset++;
1881:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		if(rowOffset >= (DE_ACTIVE_DOTS-BORDER))
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 51


1882:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			rowOffset = 0;
1883:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	}
1884:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1885:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	blueDots += rowOffset;
1886:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1887:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	while(blueDots >= (DE_ACTIVE_DOTS-BORDER))
1888:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	{
1889:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//rowOffset = 0;
1890:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		blueDots -= (DE_ACTIVE_DOTS-BORDER);
1891:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	}
1892:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//blueDots %= DE_ACTIVE_DOTS;
1893:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1894:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //If dots-to-cyc is used, then calculations should be done ahead of time
1895:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //e.g. in lvds: delay_Dots(n) = delay_cyc(DOTS_TO_CYC(n))
1896:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // but DOTS_TO_CYC is a lot of math when its argument is non-constant
1897:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if(defined(LCDSTUFF_USE_DOTS_TO_CYC_IN_DELAY_DOTS) && \
1898:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 				LCDSTUFF_USE_DOTS_TO_CYC_IN_DELAY_DOTS)
1899:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //	blueDots = rowNum;
1900:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //	blackDots = DE_ACTIVE_DOTS - blueDots;
1901:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//notBlueCyc = rowNum; //DOTS_TO_CYC(rowNum);
1902:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//blueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS-BORDER) - rowNum; //DOTS_TO_CYC(DE_ACTIVE_DOTS-BORDER-rowNu
1903:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	blueCount = DOTS_TO_CYC(blueDots);
1904:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//blueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS-BORDER - rowNum); //DOTS_TO_CYC(DE_ACTIVE_DOTS-BORDER-rowNu
1905:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	blackCount = DOTS_TO_CYC(DE_ACTIVE_DOTS-BORDER) - blueCount;
1906:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	if(blackCount < 0)
1907:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		blackCount = 0;
1908:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #else //delayDots doesn't use DOTS_TO_CYC (e.g. bitbanged pixel-clock)
1909:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	   // or maybe SDRAMThing
1910:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	blueCount = blueDots;
1911:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	blackCount = DE_ACTIVE_DOTS-BORDER - blueDots;
1912:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1913:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1914:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
1915:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1916:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifndef LCDSTUFF_USE_DOTS_TO_CYC_IN_DELAY_DOTS
1917:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #error "LCDSTUFF_USE_DOTS_TO_CYC_IN_DELAY_DOTS is not defined. It should be either TRUE or FALSE; s
1918:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #elif(LCDSTUFF_USE_DOTS_TO_CYC_IN_DELAY_DOTS)
1919:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define delayCount	delay_cyc
1920:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #else //FALSE
1921:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #define delayCount	delay_Dots
1922:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1923:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1924:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** DP_INLINEABLE void drawPix(uint16_t rowNum)
1925:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
1926:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//dpSetup(rowNum);
1927:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//uint16_t blueCyc = DOTS_TO_CYC(rowNum);
1928:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
1929:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //		uint16_t blueDots = rowNum;
1930:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //		uint16_t blackDots = DE_ACTIVE_DOTS - blueDots;
1931:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1932:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEonly_fromNada();
1933:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//a/o v0.70-1, swapping blue and not-blue...
1934:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//This is a bit of a hack, since DEblue_fromNada doesn't exist...
1935:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEblue_fromDEonly();
1936:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(BORDER));
1937:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		delay_Dots(BORDER);
1938:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEonly_fromDEblue();
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 52


1939:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1940:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		delayCount(blackCount);
1941:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_Dots(blueDots);
1942:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//DE_DotDelay(blackDots);
1943:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//DEonly_fromDEblue();
1944:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEblue_fromDEonly();
1945:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1946:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		delayCount(blueCount);
1947:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_Dots(blackDots);
1948:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//DE_DotDelay(blueDots);
1949:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Nada_fromDEonly();
1950:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		Nada_fromDEblue();
1951:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
1952:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1953:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1954:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1955:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //a/o LCDdirectLVDS62: This is the same as above, but scrolls vertically
1956:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // one line per refresh... so it's easy to calculate the refresh-rate
1957:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if(defined(BLUE_DIAG_BAR_SCROLL) && BLUE_DIAG_BAR_SCROLL)
1958:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** /*DP_INLINEABLE void drawPix(uint16_t rowNum)
1959:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
1960:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	static uint16_t rowOffset;
1961:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	if(rowNum == 0)
1962:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		rowOffset++;
1963:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//uint16_t blueCyc = DOTS_TO_CYC(rowNum);
1964:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
1965:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		uint16_t notBlueDots = (rowNum + rowOffset)%DE_ACTIVE_DOTS;
1966:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		uint16_t blueDots = DE_ACTIVE_DOTS - notBlueDots;
1967:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1968:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEonly_fromNada();
1969:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEblue_fromDEonly();
1970:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_cyc(notBlueCyc);
1971:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_Dots(notBlueDots);
1972:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(blueDots);
1973:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEonly_fromDEblue();
1974:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_cyc(blueCyc);
1975:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_Dots(blueDots);
1976:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(notBlueDots);
1977:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		Nada_fromDEonly();
1978:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
1979:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** */
1980:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1981:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
1982:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1983:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1984:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
1985:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //a/o LCDdirectLVDS62: This is the same as above, but alternates colors
1986:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //between each frame...
1987:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // (Careful, this one'll cause seizures!)
1988:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if(defined(BLUE_DIAG_SCROLL_FLASH) && BLUE_DIAG_SCROLL_FLASH)
1989:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #error "BLUE_DIAG_SCROLL_FLASH is broken a/o v91 + GCC48)"
1990:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** DP_INLINEABLE void drawPix(uint16_t rowNum)
1991:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
1992:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	static uint16_t rowOffset;
1993:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	if(rowNum == 0)
1994:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		rowOffset++;
1995:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//uint16_t blueCyc = DOTS_TO_CYC(rowNum);
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 53


1996:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
1997:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		uint16_t blueDots = (rowNum + rowOffset)%DE_ACTIVE_DOTS;
1998:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		uint16_t notBlueDots = DE_ACTIVE_DOTS - blueDots;
1999:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2000:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if(defined(BDSF_ALTERNATE_ROWS) && BDSF_ALTERNATE_ROWS)
2001:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	if(rowNum&0x01)
2002:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #else
2003:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	if(rowOffset&0x01)
2004:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
2005:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	{
2006:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEonly_fromNada();
2007:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_cyc(notBlueCyc);
2008:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_Dots(notBlueDots);
2009:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(notBlueDots);
2010:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEblue_fromDEonly();
2011:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_cyc(blueCyc);
2012:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_Dots(blueDots);
2013:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(blueDots);
2014:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		Nada_fromDEblue();
2015:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	}
2016:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	else
2017:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	{
2018:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEblue_fromNada();
2019:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_cyc(notBlueCyc);
2020:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_Dots(notBlueDots);
2021:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(notBlueDots);
2022:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEonly_fromDEblue();
2023:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_cyc(blueCyc);
2024:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_Dots(blueDots);
2025:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(blueDots);
2026:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		Nada_fromDEonly();
2027:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	}
2028:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
2029:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
2030:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2031:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2032:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //a/o sdramThing2.0v8-31ish: LooksPromising, but delayed
2033:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // also LVDS bit-shifts causing vertical striping
2034:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if(defined(BLUE_VERT_BAR) && BLUE_VERT_BAR)
2035:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** DP_INLINEABLE void drawPix(uint16_t rowNum)
2036:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
2037:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEonly_fromNada();
2038:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)/3);
2039:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS/3);
2040:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS/3);
2041:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEblue_fromDEonly();
2042:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)*2/3);
2043:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
2044:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
2045:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		Nada_fromDEblue();
2046:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
2047:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
2048:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2049:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //a/o sdramThing2.0v8-32 nogo... syncs at end of blue instead of Hsync
2050:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if(defined(BLUE_VERT_BAR_REVERSED) && BLUE_VERT_BAR_REVERSED)
2051:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** DP_INLINEABLE void drawPix(uint16_t rowNum)
2052:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 54


2053:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEblue_fromNada();
2054:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)/3);
2055:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS/3);
2056:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS/3);
2057:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEonly_fromDEblue();
2058:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS)*2/3);
2059:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
2060:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS - DE_ACTIVE_DOTS/3);
2061:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		Nada_fromDEonly();
2062:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
2063:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
2064:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2065:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2066:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if(defined(DE_BLUE) && DE_BLUE)
2067:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** DP_INLINEABLE void drawPix(uint16_t rowNum)
2068:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
 329               		.stabn	68,0,2068,.LM29-.LFBB4
 330               	.LM29:
 331               	.LFBB4:
 332               	/* prologue: function */
 333               	/* frame size = 0 */
 334               	/* stack size = 0 */
 335               	.L__stack_usage = 0
2069:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEblue_fromNada();
 336               		.stabn	68,0,2069,.LM30-.LFBB4
 337               	.LM30:
 338 008c 8FEF      		ldi r24,lo8(-1)
 339 008e 8DBD      		out 0x2d,r24
 340               	.LBB44:
 341               	.LBB45:
 342               	.LBB46:
 343               	.LBB47:
 344               		.stabs	"/opt/local/avr/include/util/delay_basic.h",132,0,0,.Ltext6
 345               	.Ltext6:
   1:/opt/local/avr/include/util/delay_basic.h **** /* Copyright (c) 2002, Marek Michalkiewicz
   2:/opt/local/avr/include/util/delay_basic.h ****    Copyright (c) 2007 Joerg Wunsch
   3:/opt/local/avr/include/util/delay_basic.h ****    All rights reserved.
   4:/opt/local/avr/include/util/delay_basic.h **** 
   5:/opt/local/avr/include/util/delay_basic.h ****    Redistribution and use in source and binary forms, with or without
   6:/opt/local/avr/include/util/delay_basic.h ****    modification, are permitted provided that the following conditions are met:
   7:/opt/local/avr/include/util/delay_basic.h **** 
   8:/opt/local/avr/include/util/delay_basic.h ****    * Redistributions of source code must retain the above copyright
   9:/opt/local/avr/include/util/delay_basic.h ****      notice, this list of conditions and the following disclaimer.
  10:/opt/local/avr/include/util/delay_basic.h **** 
  11:/opt/local/avr/include/util/delay_basic.h ****    * Redistributions in binary form must reproduce the above copyright
  12:/opt/local/avr/include/util/delay_basic.h ****      notice, this list of conditions and the following disclaimer in
  13:/opt/local/avr/include/util/delay_basic.h ****      the documentation and/or other materials provided with the
  14:/opt/local/avr/include/util/delay_basic.h ****      distribution.
  15:/opt/local/avr/include/util/delay_basic.h **** 
  16:/opt/local/avr/include/util/delay_basic.h ****    * Neither the name of the copyright holders nor the names of
  17:/opt/local/avr/include/util/delay_basic.h ****      contributors may be used to endorse or promote products derived
  18:/opt/local/avr/include/util/delay_basic.h ****      from this software without specific prior written permission.
  19:/opt/local/avr/include/util/delay_basic.h **** 
  20:/opt/local/avr/include/util/delay_basic.h ****   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  21:/opt/local/avr/include/util/delay_basic.h ****   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  22:/opt/local/avr/include/util/delay_basic.h ****   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  23:/opt/local/avr/include/util/delay_basic.h ****   ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 55


  24:/opt/local/avr/include/util/delay_basic.h ****   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
  25:/opt/local/avr/include/util/delay_basic.h ****   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
  26:/opt/local/avr/include/util/delay_basic.h ****   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  27:/opt/local/avr/include/util/delay_basic.h ****   INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  28:/opt/local/avr/include/util/delay_basic.h ****   CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  29:/opt/local/avr/include/util/delay_basic.h ****   ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  30:/opt/local/avr/include/util/delay_basic.h ****   POSSIBILITY OF SUCH DAMAGE. */
  31:/opt/local/avr/include/util/delay_basic.h **** 
  32:/opt/local/avr/include/util/delay_basic.h **** /* $Id: delay_basic.h 2143 2010-06-08 21:19:51Z joerg_wunsch $ */
  33:/opt/local/avr/include/util/delay_basic.h **** 
  34:/opt/local/avr/include/util/delay_basic.h **** #ifndef _UTIL_DELAY_BASIC_H_
  35:/opt/local/avr/include/util/delay_basic.h **** #define _UTIL_DELAY_BASIC_H_ 1
  36:/opt/local/avr/include/util/delay_basic.h **** 
  37:/opt/local/avr/include/util/delay_basic.h **** #include <inttypes.h>
  38:/opt/local/avr/include/util/delay_basic.h **** 
  39:/opt/local/avr/include/util/delay_basic.h **** #if !defined(__DOXYGEN__)
  40:/opt/local/avr/include/util/delay_basic.h **** static inline void _delay_loop_1(uint8_t __count) __attribute__((always_inline));
  41:/opt/local/avr/include/util/delay_basic.h **** static inline void _delay_loop_2(uint16_t __count) __attribute__((always_inline));
  42:/opt/local/avr/include/util/delay_basic.h **** #endif
  43:/opt/local/avr/include/util/delay_basic.h **** 
  44:/opt/local/avr/include/util/delay_basic.h **** /** \file */
  45:/opt/local/avr/include/util/delay_basic.h **** /** \defgroup util_delay_basic <util/delay_basic.h>: Basic busy-wait delay loops
  46:/opt/local/avr/include/util/delay_basic.h ****     \code
  47:/opt/local/avr/include/util/delay_basic.h ****     #include <util/delay_basic.h>
  48:/opt/local/avr/include/util/delay_basic.h ****     \endcode
  49:/opt/local/avr/include/util/delay_basic.h **** 
  50:/opt/local/avr/include/util/delay_basic.h ****     The functions in this header file implement simple delay loops
  51:/opt/local/avr/include/util/delay_basic.h ****     that perform a busy-waiting.  They are typically used to
  52:/opt/local/avr/include/util/delay_basic.h ****     facilitate short delays in the program execution.  They are
  53:/opt/local/avr/include/util/delay_basic.h ****     implemented as count-down loops with a well-known CPU cycle
  54:/opt/local/avr/include/util/delay_basic.h ****     count per loop iteration.  As such, no other processing can
  55:/opt/local/avr/include/util/delay_basic.h ****     occur simultaneously.  It should be kept in mind that the
  56:/opt/local/avr/include/util/delay_basic.h ****     functions described here do not disable interrupts.
  57:/opt/local/avr/include/util/delay_basic.h **** 
  58:/opt/local/avr/include/util/delay_basic.h ****     In general, for long delays, the use of hardware timers is
  59:/opt/local/avr/include/util/delay_basic.h ****     much preferrable, as they free the CPU, and allow for
  60:/opt/local/avr/include/util/delay_basic.h ****     concurrent processing of other events while the timer is
  61:/opt/local/avr/include/util/delay_basic.h ****     running.  However, in particular for very short delays, the
  62:/opt/local/avr/include/util/delay_basic.h ****     overhead of setting up a hardware timer is too much compared
  63:/opt/local/avr/include/util/delay_basic.h ****     to the overall delay time.
  64:/opt/local/avr/include/util/delay_basic.h **** 
  65:/opt/local/avr/include/util/delay_basic.h ****     Two inline functions are provided for the actual delay algorithms.
  66:/opt/local/avr/include/util/delay_basic.h **** 
  67:/opt/local/avr/include/util/delay_basic.h **** */
  68:/opt/local/avr/include/util/delay_basic.h **** 
  69:/opt/local/avr/include/util/delay_basic.h **** /** \ingroup util_delay_basic
  70:/opt/local/avr/include/util/delay_basic.h **** 
  71:/opt/local/avr/include/util/delay_basic.h ****     Delay loop using an 8-bit counter \c __count, so up to 256
  72:/opt/local/avr/include/util/delay_basic.h ****     iterations are possible.  (The value 256 would have to be passed
  73:/opt/local/avr/include/util/delay_basic.h ****     as 0.)  The loop executes three CPU cycles per iteration, not
  74:/opt/local/avr/include/util/delay_basic.h ****     including the overhead the compiler needs to setup the counter
  75:/opt/local/avr/include/util/delay_basic.h ****     register.
  76:/opt/local/avr/include/util/delay_basic.h **** 
  77:/opt/local/avr/include/util/delay_basic.h ****     Thus, at a CPU speed of 1 MHz, delays of up to 768 microseconds
  78:/opt/local/avr/include/util/delay_basic.h ****     can be achieved.
  79:/opt/local/avr/include/util/delay_basic.h **** */
  80:/opt/local/avr/include/util/delay_basic.h **** void
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 56


  81:/opt/local/avr/include/util/delay_basic.h **** _delay_loop_1(uint8_t __count)
  82:/opt/local/avr/include/util/delay_basic.h **** {
  83:/opt/local/avr/include/util/delay_basic.h **** 	__asm__ volatile (
  84:/opt/local/avr/include/util/delay_basic.h **** 		"1: dec %0" "\n\t"
  85:/opt/local/avr/include/util/delay_basic.h **** 		"brne 1b"
  86:/opt/local/avr/include/util/delay_basic.h **** 		: "=r" (__count)
  87:/opt/local/avr/include/util/delay_basic.h **** 		: "0" (__count)
  88:/opt/local/avr/include/util/delay_basic.h **** 	);
  89:/opt/local/avr/include/util/delay_basic.h **** }
  90:/opt/local/avr/include/util/delay_basic.h **** 
  91:/opt/local/avr/include/util/delay_basic.h **** /** \ingroup util_delay_basic
  92:/opt/local/avr/include/util/delay_basic.h **** 
  93:/opt/local/avr/include/util/delay_basic.h ****     Delay loop using a 16-bit counter \c __count, so up to 65536
  94:/opt/local/avr/include/util/delay_basic.h ****     iterations are possible.  (The value 65536 would have to be
  95:/opt/local/avr/include/util/delay_basic.h ****     passed as 0.)  The loop executes four CPU cycles per iteration,
  96:/opt/local/avr/include/util/delay_basic.h ****     not including the overhead the compiler requires to setup the
  97:/opt/local/avr/include/util/delay_basic.h ****     counter register pair.
  98:/opt/local/avr/include/util/delay_basic.h **** 
  99:/opt/local/avr/include/util/delay_basic.h ****     Thus, at a CPU speed of 1 MHz, delays of up to about 262.1
 100:/opt/local/avr/include/util/delay_basic.h ****     milliseconds can be achieved.
 101:/opt/local/avr/include/util/delay_basic.h ****  */
 102:/opt/local/avr/include/util/delay_basic.h **** void
 103:/opt/local/avr/include/util/delay_basic.h **** _delay_loop_2(uint16_t __count)
 104:/opt/local/avr/include/util/delay_basic.h **** {
 105:/opt/local/avr/include/util/delay_basic.h **** 	__asm__ volatile (
 346               		.stabn	68,0,105,.LM31-.LFBB4
 347               	.LM31:
 348 0090 83E9      		ldi r24,lo8(-109)
 349 0092 91E0      		ldi r25,lo8(1)
 350               	/* #APP */
 351               	 ;  105 "/opt/local/avr/include/util/delay_basic.h" 1
 352 0094 0197      		1: sbiw r24,1
 353 0096 01F4      		brne 1b
 354               	 ;  0 "" 2
 355               	/* #NOAPP */
 356               	.LBE47:
 357               	.LBE46:
 358               	.LBE45:
 359               	.LBE44:
 360               		.stabs	"_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c",132,0,0,.Ltext7
 361               	.Ltext7:
2070:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_cyc(DOTS_TO_CYC(DE_ACTIVE_DOTS));
2071:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//delay_Dots(DE_ACTIVE_DOTS);
2072:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS);
2073:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		Nada_fromDEblue();
 362               		.stabn	68,0,2073,.LM32-.LFBB4
 363               	.LM32:
 364 0098 80E3      		ldi r24,lo8(48)
 365 009a 84BD      		out 0x24,r24
 366 009c 84E0      		ldi r24,lo8(4)
 367 009e 8DBD      		out 0x2d,r24
 368 00a0 0895      		ret
 369               		.size	drawPix, .-drawPix
 370               	.Lscope4:
 371               		.stabs	"",36,0,0,.Lscope4-.LFBB4
 372               		.stabd	78,0,0
 373               		.stabs	"lcd_update:F(4,3)",36,0,1354,lcd_update
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 57


 374               	.global	lcd_update
 375               		.type	lcd_update, @function
 376               	lcd_update:
 377               		.stabd	46,0,0
1355:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //	uint8_t frameComplete = FALSE;
 378               		.stabn	68,0,1355,.LM33-.LFBB5
 379               	.LM33:
 380               	.LFBB5:
 381 00a2 CF93      		push r28
 382 00a4 DF93      		push r29
 383               	/* prologue: function */
 384               	/* frame size = 0 */
 385               	/* stack size = 2 */
 386               	.L__stack_usage = 2
1359:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//static uint8_t frameCount = 0;
 387               		.stabn	68,0,1359,.LM34-.LFBB5
 388               	.LM34:
 389 00a6 8091 0000 		lds r24,hsyncCount
 390 00aa 9091 0000 		lds r25,hsyncCount+1
 391 00ae 0797      		sbiw r24,7
 392 00b0 D82F      		mov r29,r24
 393 00b2 C92F      		mov r28,r25
1379:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 394               		.stabn	68,0,1379,.LM35-.LFBB5
 395               	.LM35:
 396 00b4 2091 0000 		lds r18,dataEnable
 397               	.LBB48:
 398               	.LBB49:
2074:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
2075:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
2076:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2077:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if(defined(BLUE_BORDER) && (BLUE_BORDER!=0))
2078:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** DP_INLINEABLE void drawPix(uint16_t rowNum)
2079:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
2080:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEblue_fromNada();
2081:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(BLUE_BORDER);
2082:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEonly_fromDEblue();
2083:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS - BLUE_BORDER*2);
2084:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEblue_fromDEonly();
2085:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(BLUE_BORDER);
2086:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		Nada_fromDEblue();
2087:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
2088:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
2089:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2090:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2091:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if(defined(BLUE_FRAME) && BLUE_FRAME)
2092:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define drawPixSetup dpSetup
2093:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** uint8_t insideFrame;
2094:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2095:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** static __inline__ void dpSetup(uint16_t rowNum)
2096:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
2097:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	insideFrame = 
2098:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		((rowNum > V_COUNT/4) && (rowNum < V_COUNT-V_COUNT/4));
2099:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
2100:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #define BORDER	((DE_ACTIVE_DOTS)/4)
2101:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** DP_INLINEABLE void drawPix(uint16_t rowNum)
2102:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 58


2103:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //	uint8_t insideFrame = 
2104:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //		((rowNum > V_COUNT/4) && (rowNum < V_COUNT-V_COUNT/4));
2105:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2106:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	DEblue_fromNada();
2107:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	/*
2108:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifdef lvds_enableGreen_MakeClockSensitiveToDT
2109:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	lvds_enableGreen_MakeClockSensitiveToDT();
2110:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
2111:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** */
2112:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	if(insideFrame) //(rowNum > V_COUNT/4) && (rowNum < V_COUNT-V_COUNT/4))
2113:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	{
2114:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//DEblue_fromNada();
2115:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(BORDER);
2116:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEonly_fromDEblue();
2117:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS - BORDER*2);
2118:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEblue_fromDEonly();
2119:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(BORDER);//+200);//Not having any effect!
2120:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Nada_fromDEblue();
2121:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	}
2122:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	else
2123:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	{
2124:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//DEblue_fromNada();
2125:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //		DE_DotDelay(DE_ACTIVE_DOTS); //+200); Seems to be affecting above!!!
2126:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //    Rounding-down(?) seems to cause the above to be significantly longer
2127:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//than the three below...
2128:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//WTF.
2129:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// DE_ACTIVE_DOTS = 1000 -> 1750 CYC
2130:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// 437Cyc/BORDER, 875Cyc center
2131:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// = 1749Cyc...
2132:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// Why is it *so far* off without all this rigamorole?!
2133:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// a/o BOE
2134:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2135:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(BORDER);
2136:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//DEonly_fromDEblue();
2137:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifdef DEonly_fromDEblue_Placeholder
2138:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEonly_fromDEblue_Placeholder();
2139:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
2140:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(DE_ACTIVE_DOTS - BORDER*2);
2141:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifdef DEblue_fromDEonly_Placeholder
2142:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DEblue_fromDEonly_Placeholder();
2143:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
2144:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//DEblue_fromDEonly();
2145:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		DE_DotDelay(BORDER);//+200);//Not having any effect!
2146:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Nada_fromDEblue();
2147:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	}
2148:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	/*
2149:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifdef lvds_disableGreen_MakeClockInsensitiveToDT
2150:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	lvds_disableGreen_MakeClockInsensitiveToDT();
2151:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
2152:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** */
2153:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	Nada_fromDEblue();
2154:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** }
2155:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
2156:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2157:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2158:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if 0
2159:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //NOT BLUE_DIAG_BAR, BLUE_VERT_BAR, NOR DE_BLUE
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 59


2160:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #if ( defined(COLOR_BAR_SCROLL) && COLOR_BAR_SCROLL)
2161:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		if(rowNum <= 256)
2162:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			rowNum=0;
2163:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		else
2164:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			rowNum=1;
2165:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #else //NOT COLOR_BAR_SCROLL... drawPix...
2166:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//#warning "see 'shouldBe' here..."
2167:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Should be:
2168:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		rowNum = rowNum*FB_HEIGHT/V_COUNT;
2169:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//rowNum = rowNum / (768/FB_HEIGHT);
2170:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #endif
2171:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2172:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//DEonly_fromNada();
2173:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       drawPix(rowNum);
2174:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Nada_init();
2175:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****  #warning "THIS ISN'T SAFE"
2176:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		Nada_fromDEonly();
2177:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//Drawing Methods...
2178:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2179:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if 0 //(defined(CLOCK_INSENSITIVITY_TESTING) && CLOCK_INSENSITIVITY_TESTING)
2180:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//!!! Not sure what the state is at this point...
2181:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// could be any DE+Blue level, or could be NADA...
2182:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// Nada: DT1=3, still leaves one bit for clocking, might be OK
2183:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2184:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       //Disable complementary-output for Green 
2185:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//  (on /OC1B, where CLK is OC1B)
2186:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		// Since Nada, V, and H DT's might be bad for clocking.
2187:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       TCCR1A = ( (0<<COM1A1) | (1<<COM1A0)
2188:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****                | (1<<COM1B1) | (0<<COM1B0)
2189:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****                | (1<<PWM1A) | (1<<PWM1B) );
2190:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
2191:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2192:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//colorOverride removed in LVDS, revisit LCDdirect50
2193:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
2194:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2195:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2196:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2197:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // AND HERE!!!
2198:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2199:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** // rowNum is only used when DE is active...
2200:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** //  and should be 0 at *drawn row* 0
2201:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** void loadData(uint16_t rowNum, uint8_t dataEnable)
2202:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** {
2203:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2204:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #ifdef drawPixSetup
2205:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	drawPixSetup(rowNum);
2206:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #endif
2207:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2208:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	//H Active pulse...
2209:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    if(vSync)
 399               		.stabn	68,0,2209,.LM36-.LFBB5
 400               	.LM36:
 401 00b8 3091 0000 		lds r19,vSync
 402 00bc 3323      		tst r19
 403 00be 01F0      		breq .L10
2210:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    {
2211:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Vsync_fromNada() is called at the end of the last interupt
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 60


2212:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       VplusH_fromVsync();
 404               		.stabn	68,0,2212,.LM37-.LFBB5
 405               	.LM37:
 406 00c0 1DBC      		out 0x2d,__zero_reg__
2213:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       Hlow_Delay();
2214:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       Vsync_fromVplusH();
 407               		.stabn	68,0,2214,.LM38-.LFBB5
 408               	.LM38:
 409 00c2 35E0      		ldi r19,lo8(5)
 410 00c4 00C0      		rjmp .L22
 411               	.L10:
2215:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       HD_Delay();
2216:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    }
2217:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    else
2218:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    {
2219:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       Hsync_fromNada();
 412               		.stabn	68,0,2219,.LM39-.LFBB5
 413               	.LM39:
 414 00c6 33E0      		ldi r19,lo8(3)
 415 00c8 3DBD      		out 0x2d,r19
2220:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       Hlow_Delay();
2221:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       Nada_fromHsync();
 416               		.stabn	68,0,2221,.LM40-.LFBB5
 417               	.LM40:
 418 00ca 34E0      		ldi r19,lo8(4)
 419               	.L22:
 420 00cc 3DBD      		out 0x2d,r19
2222:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****       HD_Delay();
2223:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    }
2224:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2225:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    if(dataEnable)
 421               		.stabn	68,0,2225,.LM41-.LFBB5
 422               	.LM41:
 423 00ce 2111      		cpse r18,__zero_reg__
2226:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c ****    {
2227:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
2228:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//No DE_fromNada() in here, either...
2229:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		drawPix(rowNum);
 424               		.stabn	68,0,2229,.LM42-.LFBB5
 425               	.LM42:
 426 00d0 00D0      		rcall drawPix
 427               	.L12:
 428               	.LBE49:
 429               	.LBE48:
1382:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 430               		.stabn	68,0,1382,.LM43-.LFBB5
 431               	.LM43:
 432 00d2 2091 0000 		lds r18,hsyncCount
 433 00d6 3091 0000 		lds r19,hsyncCount+1
 434 00da 2F5F      		subi r18,-1
 435 00dc 3F4F      		sbci r19,-1
 436 00de 3093 0000 		sts hsyncCount+1,r19
 437 00e2 2093 0000 		sts hsyncCount,r18
1384:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	{
 438               		.stabn	68,0,1384,.LM44-.LFBB5
 439               	.LM44:
 440 00e6 2091 0000 		lds r18,hsyncCount
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 61


 441 00ea 3091 0000 		lds r19,hsyncCount+1
 442 00ee 2430      		cpi r18,4
 443 00f0 3105      		cpc r19,__zero_reg__
 444 00f2 01F0      		breq .L14
 445 00f4 00F4      		brsh .L15
 446 00f6 2330      		cpi r18,3
 447 00f8 3105      		cpc r19,__zero_reg__
 448 00fa 01F4      		brne .L13
1390:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			//clrpinPORT(VSYNC_PIN, VSYNC_PORT);
 449               		.stabn	68,0,1390,.LM45-.LFBB5
 450               	.LM45:
 451 00fc 1092 0000 		sts dataEnable,__zero_reg__
1392:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			Vsync_fromNada();
 452               		.stabn	68,0,1392,.LM46-.LFBB5
 453               	.LM46:
 454 0100 81E0      		ldi r24,lo8(1)
 455 0102 8093 0000 		sts vSync,r24
1393:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			break;
 456               		.stabn	68,0,1393,.LM47-.LFBB5
 457               	.LM47:
 458 0106 80E4      		ldi r24,lo8(64)
 459 0108 84BD      		out 0x24,r24
 460 010a 85E0      		ldi r24,lo8(5)
 461 010c 00C0      		rjmp .L23
 462               	.L15:
1384:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 	{
 463               		.stabn	68,0,1384,.LM48-.LFBB5
 464               	.LM48:
 465 010e 2730      		cpi r18,7
 466 0110 3105      		cpc r19,__zero_reg__
 467 0112 01F0      		breq .L17
 468 0114 2730      		cpi r18,7
 469 0116 3340      		sbci r19,3
 470 0118 01F4      		brne .L13
1412:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//	break;
 471               		.stabn	68,0,1412,.LM49-.LFBB5
 472               	.LM49:
 473 011a 1092 0000 		sts dataEnable,__zero_reg__
1417:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** #if 0 //(FRAME_COUNT_TO_DELAY != 0)
 474               		.stabn	68,0,1417,.LM50-.LFBB5
 475               	.LM50:
 476 011e 1092 0000 		sts hsyncCount+1,__zero_reg__
 477 0122 1092 0000 		sts hsyncCount,__zero_reg__
1432:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			break;
 478               		.stabn	68,0,1432,.LM51-.LFBB5
 479               	.LM51:
 480 0126 DFEF      		ldi r29,lo8(-1)
 481 0128 CFE7      		ldi r28,lo8(127)
1433:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		default:
 482               		.stabn	68,0,1433,.LM52-.LFBB5
 483               	.LM52:
 484 012a 00C0      		rjmp .L13
 485               	.L14:
1402:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			Nada_fromVsync();
 486               		.stabn	68,0,1402,.LM53-.LFBB5
 487               	.LM53:
 488 012c 1092 0000 		sts vSync,__zero_reg__
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 62


1403:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			break;
 489               		.stabn	68,0,1403,.LM54-.LFBB5
 490               	.LM54:
 491 0130 80E3      		ldi r24,lo8(48)
 492 0132 84BD      		out 0x24,r24
 493 0134 84E0      		ldi r24,lo8(4)
 494               	.L23:
 495 0136 8DBD      		out 0x2d,r24
1404:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 		//Start of frame (DE active)
 496               		.stabn	68,0,1404,.LM55-.LFBB5
 497               	.LM55:
 498 0138 00C0      		rjmp .L13
 499               	.L17:
1407:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 			break;
 500               		.stabn	68,0,1407,.LM56-.LFBB5
 501               	.LM56:
 502 013a 81E0      		ldi r24,lo8(1)
 503 013c 8093 0000 		sts dataEnable,r24
 504               	.L13:
1463:_commonCode_localized/lcdStuff/0.80ncfDD6651/lcdStuff.c **** 
 505               		.stabn	68,0,1463,.LM57-.LFBB5
 506               	.LM57:
 507 0140 8D2F      		mov r24,r29
 508 0142 9C2F      		mov r25,r28
 509               	/* epilogue start */
 510 0144 DF91      		pop r29
 511 0146 CF91      		pop r28
 512 0148 0895      		ret
 513               		.size	lcd_update, .-lcd_update
 514               	.Lscope5:
 515               		.stabs	"",36,0,0,.Lscope5-.LFBB5
 516               		.stabd	78,0,0
 517               		.stabs	"restartFrameUpdate:F(0,47)",36,0,425,restartFrameUpdate
 518               	.global	restartFrameUpdate
 519               		.type	restartFrameUpdate, @function
 520               	restartFrameUpdate:
 521               		.stabd	46,0,0
 522               		.stabs	"main.c",132,0,0,.Ltext8
 523               	.Ltext8:
   1:main.c        **** /* mehPL:
   2:main.c        ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:main.c        ****  *    I'm not too fond of long licenses at the top of the file.
   4:main.c        ****  *    Please see the bottom.
   5:main.c        ****  *    Enjoy!
   6:main.c        ****  */
   7:main.c        **** 
   8:main.c        **** 
   9:main.c        **** 
  10:main.c        **** 
  11:main.c        **** 
  12:main.c        **** 
  13:main.c        **** 
  14:main.c        **** 
  15:main.c        **** // Please see mainConfig.h!
  16:main.c        **** 
  17:main.c        **** 
  18:main.c        **** //The order of these #includes is *very specific*
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 63


  19:main.c        **** // please see the associated files (especially lcdStuff, lcdDefines, and
  20:main.c        **** // lvds)
  21:main.c        **** 
  22:main.c        **** 
  23:main.c        **** //This file contains code for *many* options, chosen by mainConfig.h
  24:main.c        **** // (and possibly makefile)
  25:main.c        **** 
  26:main.c        **** 
  27:main.c        **** 
  28:main.c        **** #include "projInfo.h"   //Don't include in main.h 'cause that's included in other .c's?
  29:main.c        **** #include "main.h"
  30:main.c        **** //#include <util/delay.h> //For delay_us in pll_enable
  31:main.c        **** #include <avr/pgmspace.h>
  32:main.c        **** #include _TIMERCOMMON_HEADER_
  33:main.c        **** //#include "../../../_commonCode/charBitmap/0.10/charBitmap.h"
  34:main.c        **** #include "fbColors.h"
  35:main.c        **** 
  36:main.c        **** 
  37:main.c        **** 
  38:main.c        **** 
  39:main.c        **** 
  40:main.c        **** #include "mainConfig.h"
  41:main.c        **** 
  42:main.c        **** 
  43:main.c        **** //This is hokey, just trying to free up space
  44:main.c        **** // Frankly, these should only be included as-needed
  45:main.c        **** #if (!defined(FB_QUESTION) || !FB_QUESTION)
  46:main.c        **** #warning "These should only be included as-needed!"
  47:main.c        **** //These two saved 800Bytes
  48:main.c        **** // But that's probably just charBitmap, because sineTable is compiled via
  49:main.c        **** // the makefile.
  50:main.c        **** // Yeahp.
  51:main.c        **** #include _SINETABLE_HEADER_
  52:main.c        **** #include _CHARBITMAP_HEADER_
  53:main.c        **** #endif
  54:main.c        **** 
  55:main.c        **** 
  56:main.c        **** 
  57:main.c        **** #include "delay_cyc.h"
  58:main.c        **** 
  59:main.c        **** 
  60:main.c        **** //This should be handled in mainConfig, now...
  61:main.c        **** #if (!defined(FB_REFRESH_ON_CHANGE) || !FB_REFRESH_ON_CHANGE)
  62:main.c        ****  #define FB_REFRESH_ON_CHANGE_COUNT	TRUE
  63:main.c        **** #else
  64:main.c        ****  #ifndef FB_REFRESH_ON_CHANGE_COUNT
  65:main.c        ****   #define FB_REFRESH_ON_CHANGE_COUNT	5
  66:main.c        ****  #endif
  67:main.c        **** #endif
  68:main.c        **** 
  69:main.c        **** 
  70:main.c        **** 
  71:main.c        **** #if (defined(ROW_SEG_BUFFER) && ROW_SEG_BUFFER)
  72:main.c        **** 	 #include "rowSegBuffer.h"
  73:main.c        **** #endif
  74:main.c        **** 
  75:main.c        **** //a/o v70: this should be handled by writeColor.c now
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 64


  76:main.c        **** //Nope, can't be removed yet...
  77:main.c        **** //#define ROW_BUFFER FALSE
  78:main.c        **** //#define LOADROW TRUE
  79:main.c        **** //#if (defined(ROW_BUFFER) && ROW_BUFFER)
  80:main.c        **** //#error
  81:main.c        **** //#include "rowBuffer.c"
  82:main.c        **** //#endif
  83:main.c        **** 
  84:main.c        **** #if (defined(SEG_TET) && SEG_TET)
  85:main.c        ****  #include "_options/tetStuff.c"
  86:main.c        **** #endif
  87:main.c        **** 
  88:main.c        **** 
  89:main.c        **** #if (defined(BLUE_ADC) && BLUE_ADC)
  90:main.c        ****  #include _ADC_HEADER_
  91:main.c        **** #endif
  92:main.c        **** 
  93:main.c        **** #if (defined(PIEZO_HIT_DETECTION) && PIEZO_HIT_DETECTION)
  94:main.c        **** //#if (defined(FB_QUESTION) && FB_QUESTION)
  95:main.c        ****  #include _PIEZOHITDETECTOR_CFILE_
  96:main.c        **** #endif
  97:main.c        **** 
  98:main.c        **** #define OSCCAL_VAL	0xff//0xDB//0xDC//0xE0//0//0xff//0x20//0xff //0x00
  99:main.c        **** #include "delay_cyc.c"
 100:main.c        **** #include "lcdDefines.h"
 101:main.c        **** 
 102:main.c        **** //Now included in lvds[161].c:
 103:main.c        **** //#include "pll.c"
 104:main.c        **** 
 105:main.c        **** 
 106:main.c        **** 
 107:main.c        **** 
 108:main.c        **** 
 109:main.c        **** #if(defined(FB_SMILEY) && FB_SMILEY)
 110:main.c        ****  #define FB_WIDTH 16
 111:main.c        ****  #define FB_HEIGHT 16
 112:main.c        **** #elif (defined(FB_QUESTION) && FB_QUESTION)
 113:main.c        ****  #define FB_WIDTH 16
 114:main.c        ****  #define FB_HEIGHT 16
 115:main.c        **** #elif (defined(FB_TETRIS) && FB_TETRIS)
 116:main.c        ****  #define FB_WIDTH	24
 117:main.c        ****  #define FB_HEIGHT 24
 118:main.c        **** #elif (defined(FB_HEXCOLOR) && FB_HEXCOLOR)
 119:main.c        ****  #define FB_WIDTH 16
 120:main.c        ****  #define FB_HEIGHT 16
 121:main.c        **** #endif
 122:main.c        **** 
 123:main.c        **** #if (defined(FB_QUESTION) && FB_QUESTION)
 124:main.c        ****  #if (defined(BUMP_SWITCH) && BUMP_SWITCH)
 125:main.c        ****   //#error "OK1"
 126:main.c        ****   #include "_hitSensors/bumpSwitch.c"
 127:main.c        ****  #endif
 128:main.c        **** #endif
 129:main.c        **** 
 130:main.c        **** #include _LCD_INTERFACE_CFILE_
 131:main.c        **** /*
 132:main.c        **** #if (defined(__AVR_AT90PWM161__))
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 65


 133:main.c        ****  #include "_interfaces/lvds161.c"
 134:main.c        **** #else
 135:main.c        ****  #include "_interfaces/lvds.c"
 136:main.c        **** #endif
 137:main.c        **** */
 138:main.c        **** 
 139:main.c        **** 
 140:main.c        **** #if(defined(FB_SMILEY) && FB_SMILEY)
 141:main.c        ****  #define fb_updater()	smileyUpdate()
 142:main.c        **** #elif (defined(FB_QUESTION) && FB_QUESTION)
 143:main.c        ****  #include "fb_question.h"
 144:main.c        ****  #define fb_updater()	fbQuestion_update()
 145:main.c        **** #elif (defined(FB_TETRIS) && FB_TETRIS)
 146:main.c        **** //These are just rough estimates...
 147:main.c        ****  #include "_options/tetStuff.c"
 148:main.c        ****  #define fb_updater()	tetUpdate()
 149:main.c        **** #elif (defined(FB_HEXCOLOR) && FB_HEXCOLOR)
 150:main.c        ****  #include "_options/hexColor.c"
 151:main.c        ****  #define fb_updater()	hexColor_update()
 152:main.c        **** #endif
 153:main.c        **** 
 154:main.c        **** uint8_t isNewFrame(void);
 155:main.c        **** 
 156:main.c        **** #if ( (defined(FRAMEBUFFER_TESTING) && FRAMEBUFFER_TESTING) || \
 157:main.c        **** 		(defined(ROWBUFFER_TESTING) && ROWBUFFER_TESTING) )
 158:main.c        ****  #include "_options/writeColor.c"
 159:main.c        **** #endif
 160:main.c        **** 
 161:main.c        **** 
 162:main.c        **** 
 163:main.c        **** 
 164:main.c        **** #if (defined(FB_QUESTION) && FB_QUESTION)
 165:main.c        ****  #include "fb_question.c"
 166:main.c        **** #endif
 167:main.c        **** 
 168:main.c        **** // a/o v59:
 169:main.c        **** //PSEGS are the "pixel segments" addressable in RowSegmentBuffer
 170:main.c        **** // e.g. one could load a single row-segment NUM_PSEGS long, and it would 
 171:main.c        **** // reach from one edge of the screen to the other
 172:main.c        **** // or any number <=NUM_SEGMENTS of row segments whose lengths all add up to
 173:main.c        **** // <=NUM_PSEGS. (It's possible to extend beyond NUM_PSEGS, which would draw
 174:main.c        **** // beyond the edge of the screen, but it may affect the screen's ability 
 175:main.c        **** // to sync properly)
 176:main.c        **** // This value isn't exactly adjustable, it's a characteristic of the
 177:main.c        **** // ratio of the pixel-clock and the system-clock, along with the number of
 178:main.c        **** // system clock cycles used to draw each pixel.
 179:main.c        **** // This value was determined by experimentation with the very specific 
 180:main.c        **** // configuration currently in use, though it could probably be calculated 
 181:main.c        **** // from other #defines elsewhere.
 182:main.c        **** // (and probably *should* be, at some point, especially with 
 183:main.c        **** //  experimentations with PLLSYSCLK, LVDS_PRESCALER, SLOW_LVDS, etc...)
 184:main.c        **** // For now, changing this doesn't really do anything except scale some 
 185:main.c        **** // drawings horizontally (E.G. SEG_RACER)
 186:main.c        **** //These notes were determined long ago when developing SEG_RACER:
 187:main.c        **** // Wasn't sure where 357 came from... and now I'm wondering where the
 188:main.c        **** // notes I wrote regarding it disappeared to...
 189:main.c        **** // Anyhow, from line 72, if ROW_SEG_BUFFER && !LVDS_PRESCALER
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 66


 190:main.c        **** // "ROW_SEG_BUFFER uses 20cyc/pixel" (doesn't match the math I've 
 191:main.c        **** // elsewhere) 1024/20*7 = 358.4... so maybe that's something to do with it
 192:main.c        **** // TODO: If it was 21cyc/pixel, wouldn't we have perfect alignment with
 193:main.c        **** //       color-transitions and segment widths?
 194:main.c        **** //#define NUM_PSEGS	(1024/3+16) //357
 195:main.c        **** 
 196:main.c        **** #if (LVDS_PRESCALER == 1)
 197:main.c        ****  #warning "LVDS_PRESCALER == 1 is used extensively a/o v62 to indicate that	we're testing v62... th
 198:main.c        ****  //Let's see if this math can be figured out...
 199:main.c        ****  //
 200:main.c        ****  // Hah, right??? I completely forgot about SQUARE_SEGMENTS in all this
 201:main.c        ****  // Assuming they're always square, for now.
 202:main.c        ****  //
 203:main.c        ****  // H_PIXELS (DE_ACTIVE_DOTS)		1024             pixels
 204:main.c        ****  
 205:main.c        ****  // LVDS_PRESCALER					(1,2,4,8...)     pll_cyc/lvds_bit
 206:main.c        ****  //    PLLCYC_PER_LVDSBIT        LVDS_PRESCALER
 207:main.c        **** 
 208:main.c        ****  // LVDS_BITS_PER_PIXEL				7                lvds_bits/pixel
 209:main.c        ****  // PLL_SYSCLK
 210:main.c        ****  //    TRUE:  PLLCYC_PER_CPUCYC  4                pll_cyc/cpu_cyc
 211:main.c        ****  //    FALSE: PLLCYC_PER_CPUCYC  8                pll_cyc/cpu_cyc
 212:main.c        ****  // DRAWSEG_CPU_CYCS_PER_PSEG		20               cpu_cyc/pseg
 213:main.c        ****  //
 214:main.c        ****  // PIXELS_PER_PSEG = 1pseg * CPUCYCS_PER_PSEG   -> cpu_cycs
 215:main.c        ****  //                         * PLLCYC_PER_CPUCYC  -> pll_cycs
 216:main.c        ****  //                         / PLLCYC_PER_LVDSBIT -> lvds_bits
 217:main.c        ****  //                         / LVDSBITS_PER_PIXEL -> pixels
 218:main.c        ****  //   This is where dimensional-analysis always bites me in the ass...
 219:main.c        ****  //   my units are now PIXELS_PER_PSEG = pix/pseg = pix
 220:main.c        ****  //   I THINK (and this is an epiphany after years of recurring troubles
 221:main.c        ****  //   here) it's possible to, instead, note that 1pseg came from *nowhere*
 222:main.c        ****  //   so should be 1pseg/1pseg * <all the dimensional-analysis stuff>
 223:main.c        ****  //   Then:
 224:main.c        ****  //   (Note, in most cases PIXELS_PER_PSEG will be small, and here
 225:main.c        ****  //   fractions are highly important...)
 226:main.c        ****  #define CPUCYC_PER_PSEG	(DRAWSEG_CPU_CYCS_PER_PSEG)
 227:main.c        ****  #if(defined(PLL_SYSCLK) && PLL_SYSCLK)
 228:main.c        ****   #define PLLCYC_PER_CPUCYC	4
 229:main.c        ****  #else
 230:main.c        ****   #define PLLCYC_PER_CPUCYC	8
 231:main.c        ****  #endif
 232:main.c        ****  #define PLLCYC_PER_LVDSBIT	(LVDS_PRESCALER)
 233:main.c        ****  #define LVDSBITS_PER_PIXEL	7
 234:main.c        **** 
 235:main.c        ****  #define PIXELS_PER_PSEG_F ( MAKEFLOAT( CPUCYC_PER_PSEG   ) \
 236:main.c        **** 		 							* MAKEFLOAT( PLLCYC_PER_CPUCYC  ) \
 237:main.c        **** 		 							/ MAKEFLOAT( PLLCYC_PER_LVDSBIT ) \
 238:main.c        **** 		 							/ MAKEFLOAT( LVDSBITS_PER_PIXEL ) )
 239:main.c        ****  // NUM_PSEGS = H_PIXELS / PIXELS_PER_PSEG
 240:main.c        ****  #define NUM_PSEGS_F (MAKEFLOAT(DE_ACTIVE_DOTS) / PIXELS_PER_PSEG_F)
 241:main.c        ****  // And here, we're leaving NUM_PSEGS_F as a float so it can be used in 
 242:main.c        ****  // macro-comparisons, if necessary...
 243:main.c        ****  // (I don't think MAKELONG or any other such macro could handle this
 244:main.c        ****  // casting... it may be redundant since most uses would be assignments in
 245:main.c        ****  // integers, but if math is used, we don't want floating-point math to be
 246:main.c        ****  // run on it in real-time calculations...)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 67


 247:main.c        ****  #define NUM_PSEGS ((uint16_t)(NUM_PSEGS_F))
 248:main.c        ****  // As a hand-job test: Using old values (when 357 was determined)
 249:main.c        ****  // DE_ACTIVE_DOTS = 1024
 250:main.c        ****  // CPUCYCS_PER_PSEG = 20
 251:main.c        ****  // PLLCYC_PER_CPUCYC = 8
 252:main.c        ****  // PLLCYC_PER_LVDSBIT =8
 253:main.c        ****  // LVDSBITS_PER_PIXEL =7
 254:main.c        ****  // 1024 / (20 * 8 / 8 / 7) = 358.4
 255:main.c        ****  // (The old NUM_PSEGS = 1024/3+16 = 357.333)
 256:main.c        ****  // (As an aside, if CPUCYCS_PER_PSEG = 21: 1024/(21*8/8/7)=341.333 
 257:main.c        ****  //    == exactly three pixels per pseg)
 258:main.c        **** #else
 259:main.c        ****  #warning "NUM_PSEGS is hardcoded, but should be calculated by many factors, such as LVDS_PRESCALER
 260:main.c        ****  #define NUM_PSEGS (1024/3+16)
 261:main.c        **** #endif
 262:main.c        **** 
 263:main.c        **** //Yes, I know #including C files is bad-practice...
 264:main.c        **** // and yes, this has to be here... for now.
 265:main.c        **** #if(defined(SEG_RACER) && SEG_RACER)
 266:main.c        ****  #include "seg_racer.c"
 267:main.c        **** #endif
 268:main.c        **** 
 269:main.c        **** 
 270:main.c        **** 
 271:main.c        **** 
 272:main.c        **** 
 273:main.c        **** // a/o v60, this note is OLD, and actually is the whole point behind
 274:main.c        **** // ROW_SEG_BUFFER's current implementation.
 275:main.c        **** // TODO: Between OSCCAL_VAL and FRAME_UPDATE_DELAY
 276:main.c        **** //  it seems the speed (at least for the LTN) isn't so important after all
 277:main.c        **** //  This could be used to my advantage...
 278:main.c        **** //  Maybe bump OSCCAL_VAL all the way up, but use a slower "bit-rate"
 279:main.c        **** //  Thus, pixels could be skinnier, thus higher-resolution.
 280:main.c        **** //   Or more instructions could be used for the same resolution
 281:main.c        **** //   allowing, e.g. sprites from program-memory, without necessitating a
 282:main.c        **** //   large (or any?) frame-buffer...
 283:main.c        **** 
 284:main.c        **** 
 285:main.c        **** //This used to be handled by TOOFAST_TEST, but now can be configured here
 286:main.c        **** // 0xff sets the processor to run as fast as possible 
 287:main.c        **** //  (~16MHz? ~128MHz bit-rate)
 288:main.c        **** // 0x00 sets it as slow as possible (~4MHz, ~32MHz bit-rate)
 289:main.c        **** //  good for testing whether odd colors
 290:main.c        **** //  or bad syncing is due to bits being shifted, etc. 
 291:main.c        **** //  Maybe due to slow "LVDS" conversion chips, or whatnot.
 292:main.c        **** //   This seems to be the case right now... 0xff: black is appearing green
 293:main.c        **** //   There should be *some* green in it, but not this much.
 294:main.c        **** //   Likely due to different propagation delays between my under-driven
 295:main.c        **** //    74LS86's (running red and green), from 3.3V!
 296:main.c        **** //    and the happier and newer 74AHC XOR and OR currently driving the
 297:main.c        **** //    clock and DVH/Blue signals
 298:main.c        **** //  Highly dependent on the screen itself, some may not run at all with
 299:main.c        **** //  such slow bitrates... heck, some may not run at all even at the fastest
 300:main.c        **** // If SLOW_EVERYTHING_TEST is true, this value is overridden
 301:main.c        **** // LTN last used 0x20
 302:main.c        **** // a/o v59:
 303:main.c        **** // 0xD8 is the lowest value that syncs reliably, a few glitches from time
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 68


 304:main.c        **** // to time.
 305:main.c        **** // The effect of lower values isn't *quite* what I was expecting, but
 306:main.c        **** // definitely suggests that using ROW_SEG_BUFFER at this bit/refresh-rate
 307:main.c        **** // is dang-near right at the minimum required for this display.
 308:main.c        **** // This might be why the other (same model) display didn't work, but its
 309:main.c        **** // flakeyness at 0xff appeared different than this one's at lower OSCCALs
 310:main.c        **** // --Later note... actually retrying the "flakey" display with the same
 311:main.c        **** //   configuration. Actually, yes, the problem looks dang-near identical to
 312:main.c        **** //   the "reliable" display's being run at OSCCAL_VALs lower than 0xD8
 313:main.c        **** //   Both displays are of the same manufacturer/model.
 314:main.c        **** //    "reliable" has the chip: LXD91810 VS252AG
 315:main.c        **** //    "flakey"   has the chip: LXD91810 VS242AC
 316:main.c        **** //   The only bit I don't get is that I'm dang-near certain I had both
 317:main.c        **** //   displays working at one point, and from the same code...
 318:main.c        **** //   but this OSCCAL value is the maximum, and the only other way to speed
 319:main.c        **** //   up the bit-rate changes the resolution; which I haven't done
 320:main.c        **** //   for quite some time.
 321:main.c        **** //   Also different about this test than when I originally determined it
 322:main.c        **** //   "flakey": I've since switched the 74LS00 and LS32 out for LS86's
 323:main.c        **** //   (These are wired such that one chip is responsible for the + side of
 324:main.c        **** //    every LVDS signal, and one chip is responsible for the - side.
 325:main.c        **** //    The best-practice, probably, would be to have the + and - sides of
 326:main.c        **** //    an LVDS signal on the same chip. It's also plausible that my test was
 327:main.c        **** //    so long ago that it was on the old board which had this configuration
 328:main.c        **** //    but I doubt that, since that board was so hokily-implemented (with
 329:main.c        **** //    chip-clips and grabbers all over the place) that I can't imagine it
 330:main.c        **** //    was ever running again after all those months of disuse. Though...
 331:main.c        **** //    if that *was* the case... it could also be that I'm using a different
 332:main.c        **** //    ATtiny861... in which case, maybe the RC oscillator and/or PLL aren't
 333:main.c        **** //    capable of running as fast... 
 334:main.c        **** //    Not that I have a ton of these things lying around (three total, in
 335:main.c        **** //    various projects already)
 336:main.c        **** //    BUT the end-result may be that I just happen to have the one display
 337:main.c        **** //    and ATtiny861 on the planet that will work together. That'd be lame.)
 338:main.c        **** //#define OSCCAL_VAL	0xff//0xDB//0xDC//0xE0//0//0xff//0x20//0xff //0x00
 339:main.c        **** //This has been moved to the top...
 340:main.c        **** 
 341:main.c        **** 
 342:main.c        **** 
 343:main.c        **** 
 344:main.c        **** //a/o v60: These are old experiments...
 345:main.c        **** // they *are useful* for testing new displays...
 346:main.c        **** // but I can't recall off-hand how to use them instead of (or with?)
 347:main.c        **** // rowSegBuffer...
 348:main.c        **** // They're defined and better-described in lcdStuff.c...
 349:main.c        **** //These three are mutually-exclusive (BLUE_VERT_BAR overrides DE_BLUE)
 350:main.c        **** // (BLUE_DIAG_BAR overrides both...)
 351:main.c        **** //#define BLUE_DIAG_BAR TRUE
 352:main.c        **** //A single black bar, followed by a single blue bar... ~1/3 and 2/3's width
 353:main.c        **** //#define BLUE_VERT_BAR TRUE
 354:main.c        **** //#define DE_BLUE TRUE
 355:main.c        **** // OLD NOTE:
 356:main.c        **** // NONE SELECTED DOESN'T SYNC!!! DE not detected???
 357:main.c        **** 
 358:main.c        **** 
 359:main.c        **** 
 360:main.c        **** // Default is drawPix, from program memory...
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 69


 361:main.c        **** // a/o v60: drawPix() has since become the de-facto function for drawing
 362:main.c        **** // a row of pixels, regardless of the method.
 363:main.c        **** // It's defined as necessary...
 364:main.c        **** 
 365:main.c        **** 
 366:main.c        **** 
 367:main.c        **** //This is where COLOR_BAR_SCROLL and PIXEL_SCROLL were, in part.
 368:main.c        **** 
 369:main.c        **** 
 370:main.c        **** 
 371:main.c        **** 
 372:main.c        **** 
 373:main.c        **** 
 374:main.c        **** //#include "lvds.c"
 375:main.c        **** 
 376:main.c        **** 
 377:main.c        **** 
 378:main.c        **** #if(defined(LOADROW) && LOADROW)
 379:main.c        **** static __inline__ \
 380:main.c        **** void loadRow(uint16_t rowNum) \
 381:main.c        **** 	__attribute__((__always_inline__));
 382:main.c        **** #endif
 383:main.c        **** 
 384:main.c        **** #if(defined(PARTIAL_REFRESH) && PARTIAL_REFRESH)
 385:main.c        **** #define FULL_REFRESH	UINT16_MAX
 386:main.c        **** uint16_t stopRefreshAtRow = FULL_REFRESH;
 387:main.c        **** #endif
 388:main.c        **** 
 389:main.c        **** //The endOfFrameHandler() function might e.g. cause the timer-interrupt to
 390:main.c        **** //be disabled until it's time to redraw a new frame
 391:main.c        **** // Since we're working with TFT displays, there is inherent "memory" of the
 392:main.c        **** // last-written frame, so we needn't refresh at the maximum rate possible
 393:main.c        **** // For some displays (e.g. the LTN) the act of refreshing is visible, so
 394:main.c        **** // unless the image changes (or the pixels have faded) it would be best
 395:main.c        **** // *not* to refresh
 396:main.c        **** static __inline__
 397:main.c        **** void endOfFrameHandler(void)
 398:main.c        **** 	__attribute__((__always_inline__));
 399:main.c        **** 
 400:main.c        **** #if(!defined(PWM_TESTING) || !PWM_TESTING)
 401:main.c        ****  //This must (Now) come *after* the display headers, etc...
 402:main.c        ****  // especially for LCDSTUFF_USE_DOTS_TO_CYC_IN_DELAY_DOTS
 403:main.c        ****  #warning "This implementation is a bit hokey... LCDSTUFF_USE_DOTS_TO_CYC_IN_DELAY_DOTS"
 404:main.c        ****  #if(defined(LCDINTERFACE_BITBANGED_DOTCLOCK) &&\
 405:main.c        **** 		 LCDINTERFACE_BITBANGED_DOTCLOCK)
 406:main.c        **** 	#warning "LCDSTUFF_USE_DOTS_TO_CYC_IN_DELAY_DOTS is FALSE (better be a bit-banged dot-clock, other
 407:main.c        **** 	#define LCDSTUFF_USE_DOTS_TO_CYC_IN_DELAY_DOTS	FALSE
 408:main.c        ****  #else
 409:main.c        **** 	#warning "LCDSTUFF_USE_DOTS_TO_CYC_IN_DELAY_DOTS is TRUE (doesn't work with bitbanged dot-clocks!)
 410:main.c        **** 	#define LCDSTUFF_USE_DOTS_TO_CYC_IN_DELAY_DOTS	TRUE
 411:main.c        ****  #endif
 412:main.c        ****  #include _LCDSTUFF_CFILE_
 413:main.c        ****  //#include "../../../_commonCode/lcdStuff/0.50ncf/lcdStuff.c"
 414:main.c        **** 
 415:main.c        **** 	//If REFRESH_ON_CHANGE != TRUE, then FB_REFRESH_ON_CHANGE_COUNT = TRUE
 416:main.c        **** 	// and goes unchanged...
 417:main.c        **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 70


 418:main.c        **** 	//updateFrame is decremented in main.c each time the frame is completed
 419:main.c        **** 	// it's reset to FB_REFRESH_ON_CHANGE in _options/frameBuffer.c
 420:main.c        **** 	// (via restartFrameUpdate())
 421:main.c        ****  volatile uint8_t updateFrame = FB_REFRESH_ON_CHANGE_COUNT; //TRUE;
 422:main.c        ****  volatile uint8_t frameCount = 0;
 423:main.c        **** 
 424:main.c        **** 
 425:main.c        ****  void restartFrameUpdate(void)
 426:main.c        ****  {
 524               		.stabn	68,0,426,.LM58-.LFBB6
 525               	.LM58:
 526               	.LFBB6:
 527               	/* prologue: function */
 528               	/* frame size = 0 */
 529               	/* stack size = 0 */
 530               	.L__stack_usage = 0
 427:main.c        **** 	updateFrame = FB_REFRESH_ON_CHANGE_COUNT;
 531               		.stabn	68,0,427,.LM59-.LFBB6
 532               	.LM59:
 533 014a 81E0      		ldi r24,lo8(1)
 534 014c 8093 0000 		sts updateFrame,r24
 535 0150 0895      		ret
 536               		.size	restartFrameUpdate, .-restartFrameUpdate
 537               	.Lscope6:
 538               		.stabs	"",36,0,0,.Lscope6-.LFBB6
 539               		.stabd	78,0,0
 540               		.stabs	"__vector_14:F(0,47)",36,0,441,__vector_14
 541               	.global	__vector_14
 542               		.type	__vector_14, @function
 543               	__vector_14:
 544               		.stabd	46,0,0
 428:main.c        **** 
 429:main.c        **** 	//The sony display seems to dislike not having a dot-clock...
 430:main.c        **** 	// This is an experiment...
 431:main.c        ****   #if (defined(LCDINTERFACE_BITBANGED_DOTCLOCK_PWM) && \
 432:main.c        **** 		  LCDINTERFACE_BITBANGED_DOTCLOCK_PWM)
 433:main.c        **** 	lcdInterface_pwmDotClockInit(FALSE);
 434:main.c        ****   #endif
 435:main.c        ****  }
 436:main.c        **** 
 437:main.c        ****  //Nearly everything display-related happens in this interrupt
 438:main.c        ****  // It even calls the functions that load (and calculate!) the data for the
 439:main.c        ****  // next row.
 440:main.c        ****  // So basically, the entire project is running via timer-interrupt.
 441:main.c        ****  SIGNAL(HSYNC_TIMER_INTERRUPT_VECT) //TIMER0_COMPA_vect)
 442:main.c        ****  {
 545               		.stabn	68,0,442,.LM60-.LFBB7
 546               	.LM60:
 547               	.LFBB7:
 548 0152 1F92      		push r1
 549 0154 0F92      		push r0
 550 0156 0FB6      		in r0,__SREG__
 551 0158 0F92      		push r0
 552 015a 1124      		clr __zero_reg__
 553 015c 2F93      		push r18
 554 015e 3F93      		push r19
 555 0160 4F93      		push r20
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 71


 556 0162 5F93      		push r21
 557 0164 6F93      		push r22
 558 0166 7F93      		push r23
 559 0168 8F93      		push r24
 560 016a 9F93      		push r25
 561 016c AF93      		push r26
 562 016e BF93      		push r27
 563 0170 EF93      		push r30
 564 0172 FF93      		push r31
 565               	/* prologue: Signal */
 566               	/* frame size = 0 */
 567               	/* stack size = 15 */
 568               	.L__stack_usage = 15
 443:main.c        **** 	 //This was an *early* test to compare functionality between v91 and
 444:main.c        **** 	 //V66.51 (which was working)
 445:main.c        **** 	 // Didn't seem to have any effect.
 446:main.c        **** 	 // Wasn't until later it was discovered that GCC4.4 was being used for
 447:main.c        **** 	 // v66.51, and therein lied the problem, not here.
 448:main.c        **** 	 // a/o v92, this has been disabled, and no noticeable change has
 449:main.c        **** 	 // appeared on the BOE display.
 450:main.c        **** 	 // Plus, the heart now works.
 451:main.c        **** 	 // This does NOT make v92+ compatible with V66.51-64 (the last version)
 452:main.c        **** 	 // but more like v66.51-1, so is basically irrelevent, now.
 453:main.c        **** 	 // (And doesn't take into account any changes made since v91, anyhow).
 454:main.c        **** //#define V6651COMPARE TRUE
 455:main.c        **** 
 456:main.c        **** #if (!defined(V6651COMPARE) || !V6651COMPARE)
 457:main.c        **** #if(defined(_DMS_EXTERNALUPDATE_) && _DMS_EXTERNALUPDATE_)
 458:main.c        **** 	 dms_update();
 459:main.c        **** #endif
 460:main.c        **** 
 461:main.c        **** 		//Since HEART_TCNTER_UPDATES_AND_INIT is not true (could test here)
 462:main.c        **** 		// we need to do it manually...
 463:main.c        **** 		// (because the tcnter uses the hsyncTimer)
 464:main.c        **** #if(!defined(HEART_TCNTER_UPDATES_AND_INIT) || \
 465:main.c        **** 		!HEART_TCNTER_UPDATES_AND_INIT)
 466:main.c        ****  #if(defined(_HEART_TCNTER_) && _HEART_TCNTER_)
 467:main.c        **** 	 tcnter_overflowUpdate();
 569               		.stabn	68,0,467,.LM61-.LFBB7
 570               	.LM61:
 571 0174 00D0      		rcall tcnter_overflowUpdate
 468:main.c        ****  #endif
 469:main.c        **** #endif
 470:main.c        **** 
 471:main.c        **** 	 if(!updateFrame)
 572               		.stabn	68,0,471,.LM62-.LFBB7
 573               	.LM62:
 574 0176 8091 0000 		lds r24,updateFrame
 575 017a 8823      		tst r24
 576 017c 01F0      		breq .L25
 472:main.c        **** 		 return;
 473:main.c        **** 
 474:main.c        ****  //	static uint8_t frameCount = 0;
 475:main.c        **** 
 476:main.c        **** 	//Could insert a delay of sorts for scopability...
 477:main.c        **** 	// (otherwise there's not much guarantee that register-assignments
 478:main.c        **** 	//  later will align with the LVDS frame... though ALIGN should help)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 72


 479:main.c        **** 	// see scopeHsync.c
 480:main.c        **** 
 481:main.c        **** 	//So here's the deal:
 482:main.c        **** 	// This handles a single row of pixel/timing data (Hblanks included)
 483:main.c        **** 	// lcd_update()             (from lcdStuff.c) 
 484:main.c        **** 	//  --> loadData()         (from lcdStuff.c)
 485:main.c        **** 	//        HSync
 486:main.c        **** 	//        H-Back-Porch
 487:main.c        **** 	//        --> drawPix()    (drawPix() may be here or elsewhere)
 488:main.c        **** 	//        (H-Front-Porch)
 489:main.c        **** 	//
 490:main.c        **** 	// drawPix is only called for drawn-rows (where DE is active, NOT for
 491:main.c        **** 	// Vblank rows)
 492:main.c        **** 	// H-Front-Porch is handled in the time between completion of this
 493:main.c        **** 	// interrupt and the next interrupt...
 494:main.c        **** 
 495:main.c        **** #endif // testing 91 vs 66.51-1
 496:main.c        **** 	 //a/o v66.51-64: lcdUpdate() was surrounded by heart set/cleared
 497:main.c        **** 	 // for 'scoping syncing... definitely revealed the problem. But easy
 498:main.c        **** 	 // enough to do that the code's not reimplemented here (set/clrpinPORT)
 499:main.c        **** 	int16_t rowNum = lcd_update();
 577               		.stabn	68,0,499,.LM63-.LFBB7
 578               	.LM63:
 579 017e 00D0      		rcall lcd_update
 500:main.c        **** 
 501:main.c        **** 	if(rowNum == LCD_FRAMECOMPLETE)
 580               		.stabn	68,0,501,.LM64-.LFBB7
 581               	.LM64:
 582 0180 8F3F      		cpi r24,-1
 583 0182 9F47      		sbci r25,127
 584 0184 01F4      		brne .L25
 502:main.c        **** 	{
 503:main.c        **** 		frameCount++;
 585               		.stabn	68,0,503,.LM65-.LFBB7
 586               	.LM65:
 587 0186 8091 0000 		lds r24,frameCount
 588 018a 8F5F      		subi r24,lo8(-(1))
 589 018c 8093 0000 		sts frameCount,r24
 590               	.L25:
 591               	/* epilogue start */
 504:main.c        **** 		//lcd_update() returns TRUE when the frame is complete
 505:main.c        **** 		// which can be used for whatever purposes 
 506:main.c        **** 		// (e.g. FRAME_COUNT_TO_DELAY)
 507:main.c        **** #if(!defined(V6651COMPARE) || !V6651COMPARE)
 508:main.c        **** 		endOfFrameHandler();
 509:main.c        **** #endif
 510:main.c        **** 	}
 511:main.c        **** 
 512:main.c        **** #if(!defined(V6651COMPARE) || !V6651COMPARE)
 513:main.c        **** #if(defined(PARTIAL_REFRESH) && PARTIAL_REFRESH)
 514:main.c        **** 	else if(rowNum >= (int16_t)stopRefreshAtRow)
 515:main.c        **** 	{
 516:main.c        **** 		lcd_init();
 517:main.c        **** 		frameCount++;
 518:main.c        **** 		endOfFrameHandler();
 519:main.c        **** 	}
 520:main.c        **** #endif
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 73


 521:main.c        **** #endif
 522:main.c        **** 
 523:main.c        ****  #if(defined(LOADROW) && LOADROW)
 524:main.c        **** 	//a/o v70: All the following notes are old, and should probably be
 525:main.c        **** 	//removed...
 526:main.c        **** 	//  Historically: lcd_update() handled calling loadRow
 527:main.c        **** 	//  That'd been removed, then readded, then removed
 528:main.c        **** 	//  as, somewhere inbetween it was moved here and forgotten
 529:main.c        **** 	//  This makes the most sense, as it's more project-specific
 530:main.c        **** 	//
 531:main.c        **** 	//Load the next row into the row(seg)buffer
 532:main.c        **** 	//data is enabled after T_VD+T_Vlow...
 533:main.c        **** 	//a/o v60: Rereading this is confusing...
 534:main.c        **** 	// Basically, there's no reason to call loadRow for display-lines
 535:main.c        **** 	// which don't display data (e.g. V-Sync)
 536:main.c        **** #warning "This test could probably be replaced with rowNum..."
 537:main.c        **** 
 538:main.c        **** 	if((hsyncCount >= T_VD+T_Vlow) && (hsyncCount < T_VD+T_Vlow+V_COUNT))
 539:main.c        **** 		loadRow(hsyncCount - (T_VD+T_Vlow));
 540:main.c        ****  #endif
 541:main.c        **** 	// a/o v60: This is a funny old note... I can't recall a time when
 542:main.c        **** 	// loadRow was written, then removed, then added again. Weird:
 543:main.c        **** 	// Here is where loadRow used to be called
 544:main.c        **** 	// it has been moved to oldNotes.txt, but it would make more sense
 545:main.c        **** 	// to look at LCDdirectLVDS <25 or LCDdirect
 546:main.c        **** 	// loadRow used the time between DE inactive and the next Hsync
 547:main.c        **** 	// to load a row to a row-buffer (as opposed to a frame-buffer)
 548:main.c        **** 	// thus, DE could gain more pixels because there would be fewer
 549:main.c        **** 	// calculations to determine the memory location to write from
 550:main.c        **** 	// This effect has since been minimized
 551:main.c        **** 	// BUT loadRow might be necessary for program-memory-based images...
 552:main.c        **** 
 553:main.c        **** 
 554:main.c        **** 	//THIS IS A HACK
 555:main.c        **** 	//tcnter_update();
 556:main.c        **** 
 557:main.c        ****  }
 592               		.stabn	68,0,557,.LM66-.LFBB7
 593               	.LM66:
 594 0190 FF91      		pop r31
 595 0192 EF91      		pop r30
 596 0194 BF91      		pop r27
 597 0196 AF91      		pop r26
 598 0198 9F91      		pop r25
 599 019a 8F91      		pop r24
 600 019c 7F91      		pop r23
 601 019e 6F91      		pop r22
 602 01a0 5F91      		pop r21
 603 01a2 4F91      		pop r20
 604 01a4 3F91      		pop r19
 605 01a6 2F91      		pop r18
 606 01a8 0F90      		pop r0
 607 01aa 0FBE      		out __SREG__,r0
 608 01ac 0F90      		pop r0
 609 01ae 1F90      		pop r1
 610 01b0 1895      		reti
 611               		.size	__vector_14, .-__vector_14
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 74


 612               	.Lscope7:
 613               		.stabs	"",36,0,0,.Lscope7-.LFBB7
 614               		.stabd	78,0,0
 615               		.stabs	"init_hsyncTimer:F(0,47)",36,0,27,init_hsyncTimer
 616               	.global	init_hsyncTimer
 617               		.type	init_hsyncTimer, @function
 618               	init_hsyncTimer:
 619               		.stabd	46,0,0
 620               		.stabs	"hsyncTimerStuff.c",132,0,0,.Ltext9
 621               	.Ltext9:
   1:hsyncTimerStuff.c **** /* mehPL:
   2:hsyncTimerStuff.c ****  *    This is Open Source, but NOT GPL. I call it mehPL.
   3:hsyncTimerStuff.c ****  *    I'm not too fond of long licenses at the top of the file.
   4:hsyncTimerStuff.c ****  *    Please see the bottom.
   5:hsyncTimerStuff.c ****  *    Enjoy!
   6:hsyncTimerStuff.c ****  */
   7:hsyncTimerStuff.c **** 
   8:hsyncTimerStuff.c **** 
   9:hsyncTimerStuff.c **** 
  10:hsyncTimerStuff.c **** 
  11:hsyncTimerStuff.c **** 
  12:hsyncTimerStuff.c **** 
  13:hsyncTimerStuff.c **** 
  14:hsyncTimerStuff.c **** 
  15:hsyncTimerStuff.c **** 
  16:hsyncTimerStuff.c **** 
  17:hsyncTimerStuff.c **** 
  18:hsyncTimerStuff.c **** 
  19:hsyncTimerStuff.c **** //hsyncTimer is used for timing each LCD row.
  20:hsyncTimerStuff.c **** // Please see hsyncTimerStuff.h for implementation notes.
  21:hsyncTimerStuff.c **** 
  22:hsyncTimerStuff.c **** #include "hsyncTimerStuff.h"
  23:hsyncTimerStuff.c **** 
  24:hsyncTimerStuff.c **** //Testing with values returned by hsyncTimerCalculator
  25:hsyncTimerStuff.c **** //#define HSYNC_TIMER_OCRVAL	65
  26:hsyncTimerStuff.c **** 
  27:hsyncTimerStuff.c **** void init_hsyncTimer(void)
  28:hsyncTimerStuff.c **** {
 622               		.stabn	68,0,28,.LM67-.LFBB8
 623               	.LM67:
 624               	.LFBB8:
 625               	/* prologue: function */
 626               	/* frame size = 0 */
 627               	/* stack size = 0 */
 628               	.L__stack_usage = 0
  29:hsyncTimerStuff.c ****    HSYNC_TIMER_OCR = HSYNC_TIMER_OCRVAL; 
 629               		.stabn	68,0,29,.LM68-.LFBB8
 630               	.LM68:
 631 01b2 8FED      		ldi r24,lo8(-33)
 632 01b4 83BB      		out 0x13,r24
  30:hsyncTimerStuff.c **** 							//T_Hlow_CYC + T_HD_CYC + T_DE_CYC + T_DH_CYC;
  31:hsyncTimerStuff.c ****    timer_setWGM(HSYNC_TIMER_NUM, WGM_CLR_ON_COMPARE);
 633               		.stabn	68,0,31,.LM69-.LFBB8
 634               	.LM69:
 635 01b6 62E0      		ldi r22,lo8(2)
 636 01b8 80E0      		ldi r24,0
 637 01ba 00D0      		rcall timer_setWGM
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 75


  32:hsyncTimerStuff.c ****    timer_selectDivisor(HSYNC_TIMER_NUM, HSYNC_TIMER_CLKDIV); //CLKDIV1);
 638               		.stabn	68,0,32,.LM70-.LFBB8
 639               	.LM70:
 640 01bc 63E0      		ldi r22,lo8(3)
 641 01be 80E0      		ldi r24,0
 642 01c0 00D0      		rcall timer_selectDivisor
  33:hsyncTimerStuff.c ****    timer_compareMatchIntEnable(HSYNC_TIMER_NUM, OUT_CHANNELA);
 643               		.stabn	68,0,33,.LM71-.LFBB8
 644               	.LM71:
 645 01c2 41E0      		ldi r20,lo8(1)
 646 01c4 60E0      		ldi r22,0
 647 01c6 80E0      		ldi r24,0
 648 01c8 00C0      		rjmp timer_compareMatchIntSetup
 649               		.size	init_hsyncTimer, .-init_hsyncTimer
 650               	.Lscope8:
 651               		.stabs	"",36,0,0,.Lscope8-.LFBB8
 652               		.stabd	78,0,0
 653               		.stabs	"isNewFrame:F(4,2)",36,0,1124,isNewFrame
 654               	.global	isNewFrame
 655               		.type	isNewFrame, @function
 656               	isNewFrame:
 657               		.stabd	46,0,0
 658               		.stabs	"main.c",132,0,0,.Ltext10
 659               	.Ltext10:
 558:main.c        **** #endif //!PWM_TESTING
 559:main.c        **** 
 560:main.c        **** 
 561:main.c        **** #if(defined(SEG_HFM) && SEG_HFM)
 562:main.c        **** 	#include "seg_hfm.c"
 563:main.c        **** #endif
 564:main.c        **** 
 565:main.c        **** #if(defined(SEG_QUESTION) && SEG_QUESTION)
 566:main.c        **** 	#include "seg_question.c"
 567:main.c        **** #endif
 568:main.c        **** 
 569:main.c        **** #if(defined(SEG_SINE) && SEG_SINE)
 570:main.c        **** 	#include "seg_sine.c"
 571:main.c        **** #endif
 572:main.c        **** 
 573:main.c        **** #if(defined(LOADROW) && LOADROW)
 574:main.c        **** void loadRow(uint16_t rowNum)
 575:main.c        **** {
 576:main.c        **** 
 577:main.c        **** 
 578:main.c        **** #if(defined(ROW_SEG_BUFFER) && ROW_SEG_BUFFER)
 579:main.c        ****  #if (defined(SEG_RACER) && SEG_RACER)
 580:main.c        **** 	racer_loadRow(rowNum);
 581:main.c        ****  #elif (defined(SEG_HFM) && SEG_HFM)
 582:main.c        ****  	segHFM_loadRow(rowNum);
 583:main.c        ****  #elif (defined(SEG_QUESTION) && SEG_QUESTION)
 584:main.c        ****  	segQuestion_loadRow(rowNum);
 585:main.c        ****  #elif (defined(SEG_SINE) && SEG_SINE)
 586:main.c        ****  	segSine_loadRow(rowNum);
 587:main.c        ****  #elif (defined(SEG_LINE) && SEG_LINE)
 588:main.c        **** 	//Left here for an example...
 589:main.c        **** 	// Draws a diagonal line 
 590:main.c        **** 	//OLD NOTE:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 76


 591:main.c        **** 	//syncing issues due to recursion overflowing the stack???
 592:main.c        **** 	// Apparently was
 593:main.c        **** 	   
 594:main.c        **** 	//Isn't BLAH = 1 necessary so we don't get a row with no data?
 595:main.c        **** 	// *looks* like it's working, but I dunno...
 596:main.c        **** 	#define BLAH 0
 597:main.c        **** 
 598:main.c        **** 	segClear();
 599:main.c        **** 	newSeg(3,0x06, (6<<4) | 3);									//W
 600:main.c        **** 	newSeg((rowNum&0xff) | BLAH, 0x06, (4<<4) | 0);				//R
 601:main.c        **** 	newSeg(1,0x06, (6<<4) | 3);									//W
 602:main.c        **** 	newSeg((255-(rowNum&0xff)) | BLAH, 0x06, (4<<4) | 0 );	//R
 603:main.c        **** 	newSeg(3,0x06, (6<<4) | 3);									//W
 604:main.c        **** 	segTerminate();
 605:main.c        **** 
 606:main.c        ****  #elif (defined(SEG_TET) && SEG_TET)
 607:main.c        **** 	//This isn't particularly functional, anymore
 608:main.c        **** 	// it used to be an intermediate stage between rowBuffer and 
 609:main.c        **** 	//  rowSegBuffer... Left here for an example of how it could be done...
 610:main.c        **** 	//ACTUALLY, a/o v60ish it has been reinstated...
 611:main.c        **** 	// and, in fact, a/o v62, this may become a great early-test for new
 612:main.c        **** 	// displays, as the necessary resolution is low, which would allow for
 613:main.c        **** 	// higher refresh-rates (which some displays may need)
 614:main.c        **** 	// (There are certainly other ways to make things more suitable for new
 615:main.c        **** 	// displays... these'll be explored in later code-revisions, probably)
 616:main.c        **** 
 617:main.c        ****   //SEG_STRETCH is the number of PSEGS that each row-buffer pixel is
 618:main.c        ****   //stretched-across. In this case (SEG_TET) (or any case where *only* the
 619:main.c        ****   //rowbuffer is used to fill the screen), the value of SEG_STRETCH should
 620:main.c        ****   //probably be varied dependent on NUM_PSEGS (which should be dependent on
 621:main.c        ****   //LVDS_PRESCALER and a few other factors) in order to stretch the
 622:main.c        ****   //row-buffer acreoss the entire screen. But I think most of these things
 623:main.c        ****   //are so-far hard-coded...
 624:main.c        ****   // Further, it's entirely possible (in a not-implemented-here case) to
 625:main.c        ****   // have the row-buffer occupy only a certain portion of the screen and
 626:main.c        ****   // modify the remaining psegs directly via other means... (I had this
 627:main.c        ****   // once, when displaying Tetris, Life, and a few others on the same
 628:main.c        ****   // screen, I think, right?)
 629:main.c        ****   //Anyhow, a/o a while back, SEG_TET is the only case using SEG_STRETCH 
 630:main.c        **** //  #if(!defined(SEG_STRETCH))
 631:main.c        **** // And a/o v62 Trying to bump the frame-rate up so the ChiMei display will
 632:main.c        **** // work, using LVDS_PRESCALER, this might help... again hardcoded where
 633:main.c        **** // ideally the thing would calculate itself... Though it's also handy to
 634:main.c        **** // have it hard-coded as it allows for testing the display's immunity (or
 635:main.c        **** // lack thereof) for long/short DEs
 636:main.c        **** #if(LVDS_PRESCALER == 1)
 637:main.c        ****  #define SEG_STRETCH 1
 638:main.c        **** #else
 639:main.c        ****  #define SEG_STRETCH 5 //(((NUM_PSEGS-6)+RB_WIDTH-1)/RB_WIDTH)
 640:main.c        **** #endif
 641:main.c        **** 	//3-5 = white + cyan
 642:main.c        **** 	//6 = letters alternating with above
 643:main.c        **** 	//7-9 = ditto, stretched
 644:main.c        **** 
 645:main.c        **** #define TET_VSTRETCH	16
 646:main.c        **** 	if(rowNum == 0)
 647:main.c        **** 	{
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 77


 648:main.c        **** 		//Probably not best to put this here, as we're still in the interrupt
 649:main.c        **** 		// extra-long calculations might cause syncing issues with displays
 650:main.c        **** 		// that require rows to be a constant time
 651:main.c        **** 		tetUpdate();
 652:main.c        **** 	}
 653:main.c        **** 	if(rowNum % TET_VSTRETCH == 0)
 654:main.c        **** 	{
 655:main.c        **** 		uint8_t i;
 656:main.c        **** 		for(i=0; i<RB_WIDTH; i++)
 657:main.c        **** 			rowBuffer[i] = fb_to_rb(_K);
 658:main.c        **** 		//	rowBuffer[i] = fb_to_rb((i+rowNum/TET_VSTRETCH)&0x3f);
 659:main.c        **** 		
 660:main.c        **** 		tet_drawRow(rowNum/TET_VSTRETCH, rowBuffer);
 661:main.c        **** 	}
 662:main.c        **** 	segClear();
 663:main.c        **** 
 664:main.c        **** 	//Good for syncing to have white on both borders...
 665:main.c        **** 	newSeg(3, 0x06, (6<<4) | 3);
 666:main.c        **** 	
 667:main.c        **** 	uint16_t i;
 668:main.c        **** 	//TET_OVERLAY alternates rows between the TETRIS board and
 669:main.c        **** 	// an rgb "gradient" The only purpose is to test the idea of
 670:main.c        **** 	// using the high vertical-resolution to essentially increase the
 671:main.c        **** 	// number of colors available to a low-resolution image
 672:main.c        **** 	// sort of like "dithering" in the ol' days of 256 colors in Windows
 673:main.c        **** 	// but easy to implement in this case with very little overhead 
 674:main.c        **** 	// row-by-row
 675:main.c        **** 	// The effect, from a ways back, looks like the colors are blended
 676:main.c        **** 	// (like the Text and Game-board are translucent)
 677:main.c        **** #define TET_OVERLAY TRUE
 678:main.c        **** 
 679:main.c        **** 	//TET_GRADIENT takes that a step further and attempts to create a
 680:main.c        **** 	// gradient between each color in that rgb-gradient.
 681:main.c        **** 	// It's not as pretty as I'd hoped... though it makes sense...
 682:main.c        **** 	// first we're alternating between TET's color and the background color
 683:main.c        **** 	// then the background color is (roughly) alternating between a couple
 684:main.c        **** 	// colors, several rows between...
 685:main.c        **** 	// so if a color is stretched 16 rows vertically, that only leaves 8
 686:main.c        **** 	// rows for the color-gradient... might work better over more gradual
 687:main.c        **** 	// color-changes
 688:main.c        **** #define TET_GRADIENT TRUE
 689:main.c        **** 
 690:main.c        **** #if (defined(TET_OVERLAY) && TET_OVERLAY)
 691:main.c        **** 	if(rowNum & 0x01)
 692:main.c        **** 	{
 693:main.c        **** #endif
 694:main.c        **** 	for(i=0; i<RB_WIDTH; i++)
 695:main.c        **** 	{
 696:main.c        **** 		//i+1 because we don't want to overwrite the white border...
 697:main.c        **** 		rbpix_to_seg(rowBuffer[i], i+1, SEG_STRETCH);
 698:main.c        **** 	}
 699:main.c        **** 
 700:main.c        **** #if (defined(TET_OVERLAY) && TET_OVERLAY)
 701:main.c        **** 	}
 702:main.c        **** 	else
 703:main.c        **** 	{
 704:main.c        **** 		#define ROWS_PER 64//(V_COUNT/NUM_COLORS)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 78


 705:main.c        **** 
 706:main.c        **** 		uint8_t fbColor;
 707:main.c        **** 
 708:main.c        **** #if (defined(TET_GRADIENT) && TET_GRADIENT)
 709:main.c        **** 		static hfm_t hfmGradient;
 710:main.c        **** 		if(rowNum%ROWS_PER == 0)
 711:main.c        **** 			hfm_setup(&hfmGradient, 0, ROWS_PER/2-4);
 712:main.c        **** 
 713:main.c        **** 		//It's worth it to experiment with changing the range of the 
 714:main.c        **** 		// hfmGradient, ('-4' above and '+4' below).
 715:main.c        **** 		// to try to avoid one or two stray spikes
 716:main.c        **** 		// (e.g. power = 1, maxPower = 15, there'll be one bright row
 717:main.c        **** 		//  and 14 dark, it sticks out like a sore-thumb)
 718:main.c        **** 		//  These values are experimental, and entirely dependent on the
 719:main.c        **** 		//  values used...
 720:main.c        **** 
 721:main.c        **** 		hfm_setPower(&hfmGradient, (rowNum/2)%(ROWS_PER/2)+4);
 722:main.c        **** 
 723:main.c        **** 		if(hfm_nextOutput(&hfmGradient))
 724:main.c        **** 			fbColor = rgbGradient(ROWS_PER-1 - rowNum/(ROWS_PER)+16-1);
 725:main.c        **** 		else
 726:main.c        **** #endif	//TET_GRADIENT
 727:main.c        **** 			fbColor = rgbGradient(ROWS_PER-1 - rowNum/(ROWS_PER)+16);
 728:main.c        **** 
 729:main.c        **** 		addSegfb(RB_WIDTH*SEG_STRETCH, (fbColor));
 730:main.c        **** 		//newSeg(SEG_STRETCH, fb_to_seg((rowNum*64/768)&0x3f));
 731:main.c        **** 
 732:main.c        **** 	}
 733:main.c        **** #endif	//TET_OVERLAY
 734:main.c        **** 	//white...
 735:main.c        **** 	newSeg(3, 0x06, (6<<4) | 3);
 736:main.c        **** 	segTerminate();
 737:main.c        ****  #elif (defined(SEG_GRADIENT) && SEG_GRADIENT)
 738:main.c        **** 	static hfm_t hfmGradient;
 739:main.c        **** #define ROWS_PER	(255)	//(V_COUNT/3) == 256
 740:main.c        **** 
 741:main.c        **** 	if(rowNum%ROWS_PER == 0)
 742:main.c        **** 		hfm_setup(&hfmGradient, 0, ROWS_PER);
 743:main.c        **** 
 744:main.c        **** 	uint8_t color;
 745:main.c        **** 
 746:main.c        **** 	uint16_t power;
 747:main.c        **** 
 748:main.c        **** 	if(rowNum < ROWS_PER/16)
 749:main.c        **** 		rowNum = 0;
 750:main.c        **** 	else
 751:main.c        **** 		rowNum -= ROWS_PER/16;
 752:main.c        **** 
 753:main.c        **** 	//Since there are four shades, there will be three gradients...
 754:main.c        **** 	if(rowNum < ROWS_PER)
 755:main.c        **** 	{
 756:main.c        **** 		//The ROWS_PER/16 stuff is to help alleviate sharp color-spikes
 757:main.c        **** 		// which occur early-on... see the explanation in SEG_TET.
 758:main.c        **** 		color = 0;
 759:main.c        **** 		//hfm_setPower(&hfmGradient, 
 760:main.c        **** 		power = (rowNum); // + ROWS_PER/16);
 761:main.c        **** 	}
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 79


 762:main.c        **** 	else if(rowNum < ROWS_PER*2)
 763:main.c        **** 	{
 764:main.c        **** 		color = 1;
 765:main.c        **** 		//hfm_setPower(&hfmGradient, 
 766:main.c        **** 		power = rowNum-(ROWS_PER); // + ROWS_PER/16;
 767:main.c        **** 	}
 768:main.c        **** 	else
 769:main.c        **** 	{
 770:main.c        **** 		color = 2;
 771:main.c        **** 		//hfm_setPower(&hfmGradient, 
 772:main.c        **** 		power = rowNum-(ROWS_PER*2); // + ROWS_PER/16;
 773:main.c        **** 	}
 774:main.c        **** 
 775:main.c        **** 
 776:main.c        **** 	if(power < ROWS_PER/16)
 777:main.c        **** 		power = 0;
 778:main.c        **** 
 779:main.c        **** 	hfm_setPower(&hfmGradient, (power <= 255) ? power : 255);
 780:main.c        **** 
 781:main.c        **** 	if(hfm_nextOutput(&hfmGradient))
 782:main.c        **** 		color++;
 783:main.c        **** 
 784:main.c        **** 	color |= color<<2 | color<<4;
 785:main.c        **** 
 786:main.c        **** 	segClear();
 787:main.c        **** 	addSegfb(3, _W);
 788:main.c        **** 	addSegfb(NUM_PSEGS-6, color); 
 789:main.c        **** 	addSegfb(3, _W);
 790:main.c        **** 	segTerminate();
 791:main.c        ****  #elif(defined(SEG_GRADIENT2) && SEG_GRADIENT2)
 792:main.c        ****    #error "Heh, never did implement this..."
 793:main.c        ****  #else
 794:main.c        **** 	#error "Gotta select a SEG_... option, or create your own"
 795:main.c        ****  #endif //SEG_ selection
 796:main.c        **** #elif (defined(ROW_BUFFER) && (ROW_BUFFER))
 797:main.c        **** 
 798:main.c        **** //This is a *really* simple test for ROW_BUFFER
 799:main.c        **** // It just cycles through the colors in diagonal stripes...
 800:main.c        **** // Technically each color should be 16 pixels high, but it appears to be
 801:main.c        **** // coming through much taller. Certainly this is display-specific
 802:main.c        **** // timing-related issues... (This display is known to repeat rows when not
 803:main.c        **** // syncing correctly)
 804:main.c        **** // First-guess is ROW_CALCULATION_CYCS isn't right, but higher values is
 805:main.c        **** // causing syncing problems.
 806:main.c        **** // TODO, I guess.
 807:main.c        **** 	uint16_t col;
 808:main.c        **** 	for(col=0; col<RB_WIDTH; col++)
 809:main.c        **** 		rowBuffer[col] = fb_to_rb((col+rowNum)&0x3f);
 810:main.c        **** 		//rowBuffer[col] = fb_to_rb((col+rowNum/16)&0x3f);
 811:main.c        **** 
 812:main.c        **** #endif //ROW_SEG_BUFFER
 813:main.c        **** }
 814:main.c        **** #endif //LOAD_ROW
 815:main.c        **** 
 816:main.c        **** #include "hsyncTimerStuff.c"
 817:main.c        **** 
 818:main.c        **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 80


 819:main.c        **** #if (!defined(EXTERNAL_DRAWPIX) || !EXTERNAL_DRAWPIX)
 820:main.c        **** #if (defined(ROW_SEG_BUFFER) && ROW_SEG_BUFFER)
 821:main.c        **** DP_INLINEABLE void drawPix(uint16_t rowNum)
 822:main.c        **** {
 823:main.c        **** 	//Note that rowNum isn't really used here...
 824:main.c        **** 	// and it's only a uint8_t!
 825:main.c        **** 	rsb_drawPix(rowNum);
 826:main.c        **** }
 827:main.c        **** 
 828:main.c        **** #elif (defined(BLUE_ADC) && BLUE_ADC)
 829:main.c        **** //This is pretty much identical to most of the BLUE_TESTING in lcdStuff.c
 830:main.c        **** // with a slight twist...
 831:main.c        **** DP_INLINEABLE void drawPix(uint16_t rowNum)
 832:main.c        **** {
 833:main.c        ****       //uint16_t blueCyc = DOTS_TO_CYC(rowNum);
 834:main.c        ****       //uint16_t notBlueCyc = DOTS_TO_CYC(DE_ACTIVE_DOTS)-blueCyc;
 835:main.c        **** 		adc_startConversion();
 836:main.c        **** 		while(adc_isBusy())
 837:main.c        **** 			asm("nop;");
 838:main.c        **** 
 839:main.c        ****       uint16_t blueDots = adc_getValue();
 840:main.c        ****       uint16_t notBlueDots = DE_ACTIVE_DOTS - blueDots;
 841:main.c        **** 
 842:main.c        ****       DEonly_fromNada();
 843:main.c        ****       //delay_cyc(notBlueCyc);
 844:main.c        ****       //delay_Dots(notBlueDots);
 845:main.c        ****       DE_DotDelay(notBlueDots);
 846:main.c        ****       DEblue_fromDEonly();
 847:main.c        ****       //delay_cyc(blueCyc);
 848:main.c        ****       //delay_Dots(blueDots);
 849:main.c        ****       DE_DotDelay(blueDots);
 850:main.c        ****       Nada_fromDEblue();
 851:main.c        **** }
 852:main.c        **** 
 853:main.c        **** #elif (defined(BLUE_AND_COLORS) && BLUE_AND_COLORS)
 854:main.c        **** // This draws four colors on the screen, black, red, blue, and cyan
 855:main.c        **** // in order to test the other colors (red and green)
 856:main.c        **** DP_INLINEABLE void drawPix(uint16_t rowNum)
 857:main.c        **** {
 858:main.c        **** 	//DE_ACTIVE_DELAYABLE attempts to take into account the overhead of
 859:main.c        **** 	//DE_DotDelay, setColors(), etc...
 860:main.c        **** 	//It's entirely arbitrary, and dependent on CPU speed (PLL_SYSCLK)
 861:main.c        **** 	// and many other factors...
 862:main.c        **** #if(defined(PLL_SYSCLK) && PLL_SYSCLK)
 863:main.c        ****  #define DE_ACTIVE_DELAYABLE	(DE_ACTIVE_DOTS-100)
 864:main.c        **** 		//Attempting to stretch the diagonal from corner-to-corner...
 865:main.c        **** 		uint16_t blueDots = (uint32_t)DE_ACTIVE_DELAYABLE * (uint32_t)rowNum
 866:main.c        **** 		  										/ V_COUNT;
 867:main.c        **** #else
 868:main.c        **** 		//Because, I guess, the math is too long without PLL_SYSCLK
 869:main.c        **** 		// since it's not syncing
 870:main.c        ****  #define DE_ACTIVE_DELAYABLE	(DE_ACTIVE_DOTS-200)
 871:main.c        **** 		uint16_t blueDots = rowNum;
 872:main.c        **** #endif
 873:main.c        **** 		uint16_t notBlueDots = DE_ACTIVE_DELAYABLE - blueDots;
 874:main.c        **** 
 875:main.c        **** 		uint16_t halfNotBlueDots = notBlueDots/2;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 81


 876:main.c        **** 
 877:main.c        **** 		uint16_t halfBlueDots = blueDots/2;
 878:main.c        **** 
 879:main.c        **** 
 880:main.c        **** 		//fullRed(), noRed(), fullGreen(), and noGreen()
 881:main.c        **** 		// function differently than the DEblue...() functions.
 882:main.c        **** 		// Since "blue" is shared with the timing-signals,
 883:main.c        **** 		// changing a blue-value requires keeping in mind the previous and
 884:main.c        **** 		// next states of the timing (usually DE-active in all cases, but not
 885:main.c        **** 		// always).
 886:main.c        **** 		// Changing of the "red" and "green" signals is easier, since
 887:main.c        **** 		// doing-so doesn't affect anything else.
 888:main.c        **** 
 889:main.c        **** 		DEonly_fromNada();
 890:main.c        **** 
 891:main.c        **** 		//Black
 892:main.c        **** 		DE_DotDelay(halfNotBlueDots);
 893:main.c        **** 		
 894:main.c        **** 		//Red
 895:main.c        **** 		fullRed();
 896:main.c        **** 		DE_DotDelay(halfNotBlueDots);
 897:main.c        **** 
 898:main.c        **** 		//Blue
 899:main.c        **** 		noRed();
 900:main.c        **** 		DEblue_fromDEonly();
 901:main.c        **** 		
 902:main.c        **** 		DE_DotDelay(halfBlueDots);
 903:main.c        **** 
 904:main.c        **** 		//Cyan
 905:main.c        **** 		fullGreen();
 906:main.c        **** 		
 907:main.c        **** 		DE_DotDelay(halfBlueDots);
 908:main.c        **** 
 909:main.c        **** 		noGreen();
 910:main.c        **** 		Nada_fromDEblue();
 911:main.c        **** }
 912:main.c        **** #elif (defined(BLUE_ALLSHADES) && BLUE_ALLSHADES)
 913:main.c        **** //This is an attempt at showing all available shades of blue
 914:main.c        **** // Originally it was determined that 11 shades could be shown
 915:main.c        **** // but there seems to be some trouble with using wrap-around values
 916:main.c        **** // (e.g. when reset occurs before set in the count)
 917:main.c        **** // It works fine when it's the *only* shade shown, but if shown with other
 918:main.c        **** // shades on the screen, it causes syncing problems
 919:main.c        **** // So, it's been determined that there are basically four discernable
 920:main.c        **** // shades of blue which are usable with the PWM161
 921:main.c        **** //
 922:main.c        **** // The original idea: BLUE_ALLSHADES=TRUE, ALLSHADES_GRADIENT=FALSE
 923:main.c        **** //  would fade the screen from black to bright blue
 924:main.c        **** //  (it makes use of the wraparound-values)
 925:main.c        **** // Then ALLSHADES_GRADIENT would display them all on the screen at once
 926:main.c        **** // 
 927:main.c        **** // It's since been somewhat hacked, to disable the unstable wrap-around
 928:main.c        **** // values...
 929:main.c        **** // Then ALLSHADES_AND_COLORS was added, to show all usable colors
 930:main.c        **** // This's gotten a bit bloated, and would probably be better-implemented as
 931:main.c        **** // several different BLUE_WHATEVERs
 932:main.c        **** DP_INLINEABLE void drawPix(uint16_t rowNum)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 82


 933:main.c        **** {
 934:main.c        **** #define BLUESHADES_MAX 11
 935:main.c        **** 		
 936:main.c        **** #if(!defined(ALLSHADES_GRADIENT) || !ALLSHADES_GRADIENT)
 937:main.c        ****  #define DOTSPERSHADE (DE_ACTIVE_DOTS) ///BLUESHADES_MAX)
 938:main.c        **** 		static uint8_t frameCount = 0;
 939:main.c        **** 		static uint8_t shadeNum = 0;
 940:main.c        **** 
 941:main.c        **** 		if(rowNum == 0)
 942:main.c        **** 			frameCount++;
 943:main.c        **** 
 944:main.c        **** 		if(frameCount == 60)
 945:main.c        **** 		{
 946:main.c        **** 			frameCount = 0;
 947:main.c        **** 			shadeNum++;
 948:main.c        **** 			if(shadeNum >= BLUESHADES_MAX)
 949:main.c        **** 				shadeNum = 0;
 950:main.c        **** 		}
 951:main.c        **** #else
 952:main.c        ****  #if(defined(ALLSHADES_AND_COLORS) && ALLSHADES_AND_COLORS)
 953:main.c        **** 		setRed4(4*rowNum/V_COUNT);
 954:main.c        **** 		setGreen4((16*rowNum/V_COUNT)%4);
 955:main.c        **** 		/*
 956:main.c        **** 		//K, R, G, Y
 957:main.c        **** 		if(rowNum < V_COUNT/4)
 958:main.c        **** 		{
 959:main.c        **** 			noRed();
 960:main.c        **** 			noGreen();
 961:main.c        **** 		}
 962:main.c        **** 		else if(rowNum < 2*V_COUNT/4)
 963:main.c        **** 		{
 964:main.c        **** 			fullRed();
 965:main.c        **** 			noGreen();
 966:main.c        **** 		}
 967:main.c        **** 		else if(rowNum < 3*V_COUNT/4)
 968:main.c        **** 		{
 969:main.c        **** 			fullGreen();
 970:main.c        **** 			noRed();
 971:main.c        **** 		}
 972:main.c        **** 		else
 973:main.c        **** 		{
 974:main.c        **** 			fullGreen();
 975:main.c        **** 			fullRed();
 976:main.c        **** 		}
 977:main.c        **** 		*/
 978:main.c        ****  #endif
 979:main.c        ****  //Add a little bit of extra delay for calculations...
 980:main.c        ****  #define START_SHADE 0//10 //5 //10
 981:main.c        ****  #define END_SHADE   10//0 //7 //10 //0
 982:main.c        **** 
 983:main.c        ****  #define SHADE_DIR_SIGN ((END_SHADE > START_SHADE) ? +1 : -1)
 984:main.c        ****  #define NUM_SHADES  (((SHADE_DIR_SIGN > 0) ? (END_SHADE-START_SHADE) \
 985:main.c        **** 			 :(START_SHADE-END_SHADE))+1)
 986:main.c        **** 
 987:main.c        **** // Weird... with +0, syncing is way-off (such that the red/green doesn't
 988:main.c        **** // come through *at all*
 989:main.c        **** // and so-forth.
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 83


 990:main.c        ****  #define DOTSPERSHADE (DE_ACTIVE_DOTS/(NUM_SHADES+15))
 991:main.c        **** 		int8_t shadeNum;
 992:main.c        **** 
 993:main.c        **** 		DEonly_init();
 994:main.c        **** 
 995:main.c        **** 		for(shadeNum=START_SHADE; shadeNum != (END_SHADE+SHADE_DIR_SIGN);
 996:main.c        **** 				shadeNum+=SHADE_DIR_SIGN)
 997:main.c        **** 		{
 998:main.c        **** 
 999:main.c        **** #endif
1000:main.c        **** 		uint8_t ocr2sa_val;
1001:main.c        **** 		uint8_t ocr2ra_val;
1002:main.c        **** 
1003:main.c        **** 		//Black
1004:main.c        **** //		DE_DotDelay(DOTSPERSHADE);
1005:main.c        **** 
1006:main.c        **** 		//The commented-out cases are those that require wrapping
1007:main.c        **** 		// (e.g. "set" occurs *after* "reset")
1008:main.c        **** 		// They don't seem to work too well, when switching back and forth
1009:main.c        **** /*		switch(shadeNum)
1010:main.c        **** 		{
1011:main.c        **** 			//Black	//these're from DEonly_init();
1012:main.c        **** 			case 0:
1013:main.c        **** 				ocr2sa_val = 1;
1014:main.c        **** 				ocr2ra_val = 4;
1015:main.c        **** 				break;
1016:main.c        **** 			case 1:
1017:main.c        **** 				//4:
1018:main.c        **** 				ocr2sa_val = 0;
1019:main.c        **** 				ocr2ra_val = 4;	
1020:main.c        **** 				break;
1021:main.c        **** //			case 2:
1022:main.c        **** //				//12:
1023:main.c        **** //				ocr2sa_val = 6;
1024:main.c        **** //				ocr2ra_val = 4;	
1025:main.c        **** //				break;
1026:main.c        **** //			case 3:
1027:main.c        **** //				//28:
1028:main.c        **** //				ocr2sa_val = 5;
1029:main.c        **** //				ocr2ra_val = 4;	
1030:main.c        **** //				break;
1031:main.c        **** 			case 2:
1032:main.c        **** 				//32:
1033:main.c        **** 				ocr2sa_val = 1;
1034:main.c        **** 				ocr2ra_val = 5;	
1035:main.c        **** 				break;
1036:main.c        **** 			case 3:
1037:main.c        **** 				//36:
1038:main.c        **** 				ocr2sa_val = 0;
1039:main.c        **** 				ocr2ra_val = 5;	
1040:main.c        **** 				break;
1041:main.c        **** //			case 6:
1042:main.c        **** //				//44:
1043:main.c        **** //				ocr2sa_val = 6;
1044:main.c        **** //				ocr2ra_val = 5;	
1045:main.c        **** //				break;
1046:main.c        **** 			case 4:
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 84


1047:main.c        **** 				//48:
1048:main.c        **** 				ocr2sa_val = 1;
1049:main.c        **** 				ocr2ra_val = 6;	
1050:main.c        **** 				break;
1051:main.c        **** 			case 5:
1052:main.c        **** 				//52:
1053:main.c        **** 				ocr2sa_val = 0;
1054:main.c        **** 				ocr2ra_val = 6;	
1055:main.c        **** 				break;
1056:main.c        **** //			case 9:
1057:main.c        **** //				//56:
1058:main.c        **** //				ocr2sa_val = 1;
1059:main.c        **** //				ocr2ra_val = 0;	
1060:main.c        **** //				break;
1061:main.c        **** 			default:
1062:main.c        **** 				//60:
1063:main.c        **** 				ocr2sa_val = 0;
1064:main.c        **** 				ocr2ra_val = 8;	//7 dun woik... all-low
1065:main.c        **** 				break;
1066:main.c        **** 		}
1067:main.c        **** 
1068:main.c        **** 		//DEonly_fromNada();
1069:main.c        **** 	
1070:main.c        **** 		//setbit(PLOCK2, PCNF2);
1071:main.c        **** 
1072:main.c        **** 		lockPSC2();
1073:main.c        **** 		OCR2SAL = ocr2sa_val;
1074:main.c        **** 		OCR2RAL = ocr2ra_val;
1075:main.c        **** 		unlockPSC2();
1076:main.c        **** 		//clrbit(PLOCK2, PCNF2);
1077:main.c        **** */
1078:main.c        **** 		uint8_t newShade = shadeNum; //rowNum*64/V_COUNT) % NUM_SHADES;
1079:main.c        **** 
1080:main.c        **** 		if(newShade <= 3)			//0, 1, 2, 3
1081:main.c        **** 			newShade = newShade;
1082:main.c        **** 		else if(newShade <= 6)   //4->2, 5->1, 6->0
1083:main.c        **** 			newShade = (6-newShade);
1084:main.c        **** 		else
1085:main.c        **** 			newShade = 3;
1086:main.c        **** 
1087:main.c        **** 		setBlue4(newShade);
1088:main.c        **** 
1089:main.c        **** 		DE_DotDelay(DOTSPERSHADE);
1090:main.c        **** 
1091:main.c        **** #if(defined(ALLSHADES_GRADIENT) && ALLSHADES_GRADIENT)
1092:main.c        **** 		}
1093:main.c        ****  #if(defined(ALLSHADES_AND_COLORS) && ALLSHADES_AND_COLORS)
1094:main.c        **** 		setRed4(0); //4*rowNum/V_COUNT);
1095:main.c        **** 		setGreen4(0); //(16*rowNum/V_COUNT)%4);
1096:main.c        ****  #endif
1097:main.c        **** #endif
1098:main.c        **** 		Nada_init(); //fromDEblue();
1099:main.c        **** }
1100:main.c        **** 
1101:main.c        **** #elif (defined(PWM_TESTING) && PWM_TESTING)
1102:main.c        **** 	//No drawPix necessary...
1103:main.c        **** 
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 85


1104:main.c        **** #else
1105:main.c        **** #if 0
1106:main.c        **** #define drawPix nonRSB_drawPix
1107:main.c        **** #else
1108:main.c        **** //#include "_options/writeColor.c"
1109:main.c        **** //#include "nonRSB_drawPix.c"
1110:main.c        **** DP_INLINEABLE void drawPix(uint16_t rowNum)
1111:main.c        **** {
1112:main.c        **** 	//a/o v70, it's in use again for ROW_BUFFER.
1113:main.c        **** 	//a/o v67, this is used by FRAMEBUFFER_TESTING...
1114:main.c        **** 	//Old:
1115:main.c        **** 	//This hasn't been used in quite some time... 
1116:main.c        **** 	// it may not work at all anymore.
1117:main.c        **** 	nonRSB_drawPix(rowNum);
1118:main.c        **** }
1119:main.c        **** #endif
1120:main.c        **** #endif
1121:main.c        **** #endif
1122:main.c        **** 
1123:main.c        **** 
1124:main.c        **** uint8_t isNewFrame(void)
1125:main.c        **** {
 660               		.stabn	68,0,1125,.LM72-.LFBB9
 661               	.LM72:
 662               	.LFBB9:
 663               	/* prologue: function */
 664               	/* frame size = 0 */
 665               	/* stack size = 0 */
 666               	.L__stack_usage = 0
1126:main.c        **** 	uint8_t newFrame = FALSE;
1127:main.c        **** 
1128:main.c        **** 	static uint8_t lastFrameCount = 0;
1129:main.c        **** #define FRAME_COUNT_LIMIT 0x03
1130:main.c        **** 	uint8_t thisFrameCount = frameCount&FRAME_COUNT_LIMIT;
 667               		.stabn	68,0,1130,.LM73-.LFBB9
 668               	.LM73:
 669 01ca 9091 0000 		lds r25,frameCount
 670 01ce 9370      		andi r25,lo8(3)
1131:main.c        **** 
1132:main.c        **** //		if(( (thisFrameCount==0) && (lastFrameCount==FRAME_COUNT_LIMIT) ))
1133:main.c        **** 	if(thisFrameCount != lastFrameCount)
 671               		.stabn	68,0,1133,.LM74-.LFBB9
 672               	.LM74:
 673 01d0 81E0      		ldi r24,lo8(1)
 674 01d2 2091 0000 		lds r18,lastFrameCount.2085
 675 01d6 9213      		cpse r25,r18
 676 01d8 00C0      		rjmp .L31
 677 01da 80E0      		ldi r24,0
 678               	.L31:
1134:main.c        **** 		newFrame = TRUE;
1135:main.c        **** 
1136:main.c        **** 	lastFrameCount = thisFrameCount;
 679               		.stabn	68,0,1136,.LM75-.LFBB9
 680               	.LM75:
 681 01dc 9093 0000 		sts lastFrameCount.2085,r25
1137:main.c        **** 
1138:main.c        **** 	return newFrame;
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 86


1139:main.c        **** }
 682               		.stabn	68,0,1139,.LM76-.LFBB9
 683               	.LM76:
 684 01e0 0895      		ret
 685               		.size	isNewFrame, .-isNewFrame
 686               		.stabs	"lastFrameCount:V(4,2)",38,0,1128,lastFrameCount.2085
 687               		.stabs	"thisFrameCount:r(4,2)",64,0,1130,25
 688               		.stabn	192,0,0,.LFBB9-.LFBB9
 689               		.stabn	224,0,0,.Lscope9-.LFBB9
 690               	.Lscope9:
 691               		.stabs	"",36,0,0,.Lscope9-.LFBB9
 692               		.stabd	78,0,0
 693               		.section	.text.startup,"ax",@progbits
 694               		.stabs	"main:F(0,1)",36,0,1193,main
 695               	.global	main
 696               		.type	main, @function
 697               	main:
 698               		.stabd	46,0,0
1140:main.c        **** 
1141:main.c        **** 
1142:main.c        **** 
1143:main.c        **** #if(defined(FB_REFRESH_ON_CHANGE) && FB_REFRESH_ON_CHANGE)
1144:main.c        **** //For FB_QUESTION, FB_SMILEY, etc. it might be nice to only refresh when 
1145:main.c        **** // the actual image changes...
1146:main.c        **** // This is revisited from _unusedIdeas/frameCountToDelay.c
1147:main.c        **** void endOfFrameHandler(void)
1148:main.c        **** {
1149:main.c        **** 	//The original plan was to stop the timer, but now that is used by
1150:main.c        **** 	//dmsTimer... so instead:
1151:main.c        **** 	if(updateFrame)
1152:main.c        **** 		updateFrame--; //= FALSE;
1153:main.c        **** 
1154:main.c        **** 	//The sony display seems to dislike not having a dot-clock...
1155:main.c        **** 	// This is an experiment...
1156:main.c        ****   #if (defined(LCDINTERFACE_BITBANGED_DOTCLOCK_PWM) && \
1157:main.c        **** 		  LCDINTERFACE_BITBANGED_DOTCLOCK_PWM)
1158:main.c        **** 	if(!updateFrame)
1159:main.c        **** 		lcdInterface_pwmDotClockInit(TRUE);
1160:main.c        ****   #endif
1161:main.c        **** }
1162:main.c        **** #else
1163:main.c        **** //See the declaration, above...
1164:main.c        **** void endOfFrameHandler(void)
1165:main.c        **** {
1166:main.c        **** }
1167:main.c        **** #endif
1168:main.c        **** 
1169:main.c        **** //#define TEST__FLASH TRUE
1170:main.c        **** 
1171:main.c        **** #if(defined(TEST__FLASH) && TEST__FLASH)
1172:main.c        ****  #include "test__flash.c"
1173:main.c        **** #endif
1174:main.c        **** 
1175:main.c        **** 
1176:main.c        **** 
1177:main.c        **** //v66.51-64:
1178:main.c        **** // This was added for comparing the assembly-output of GCC4.4 vs 4.8
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 87


1179:main.c        **** // Otherwise it's not-used
1180:main.c        **** /*
1181:main.c        **** void delayDotsFn(int32_t numDots)
1182:main.c        **** {
1183:main.c        **** 	int32_t numCyc = DOTS_TO_CYC(numDots);
1184:main.c        **** 
1185:main.c        **** 	delay_cyc(numCyc);
1186:main.c        **** }
1187:main.c        **** */
1188:main.c        **** 
1189:main.c        **** 
1190:main.c        **** 
1191:main.c        **** 
1192:main.c        **** 
1193:main.c        **** int main(void)
1194:main.c        **** {
 699               		.stabn	68,0,1194,.LM77-.LFBB10
 700               	.LM77:
 701               	.LFBB10:
 702               	/* prologue: function */
 703               	/* frame size = 0 */
 704               	/* stack size = 0 */
 705               	.L__stack_usage = 0
1195:main.c        **** // a/o FB_TETRIS, testing...
1196:main.c        **** 	//WTF... this ain't showin' up when FB_WIDTH=24...?!
1197:main.c        **** 
1198:main.c        **** #if(defined(FRAMEBUFFER_TESTING) && FRAMEBUFFER_TESTING)
1199:main.c        **** 	frameBufferInit();
1200:main.c        **** 	uint8_t i, j;
1201:main.c        **** 	for(i=0; i<FB_HEIGHT; i++)
1202:main.c        **** 		for(j=0; j<FB_WIDTH; j++)
1203:main.c        **** 			frameBuffer[i][j] = i+j;
1204:main.c        **** #endif
1205:main.c        **** 
1206:main.c        **** #if(defined(SEG_RACER) && SEG_RACER)
1207:main.c        **** 	racer_init();
1208:main.c        **** #endif
1209:main.c        **** 
1210:main.c        **** #if (defined(BLUE_ADC) && BLUE_ADC)
1211:main.c        **** 	adc_takeInput(6);
1212:main.c        **** 	adc_init();
1213:main.c        **** 	adc_select(6);
1214:main.c        **** #endif
1215:main.c        **** 
1216:main.c        **** 
1217:main.c        **** #if (defined(PIEZO_HIT_DETECTION) && PIEZO_HIT_DETECTION)
1218:main.c        **** //#if (defined(FB_QUESTION) && FB_QUESTION)
1219:main.c        **** 	//This is identical to the BLUE_ADC case, above, but the adc is used
1220:main.c        **** 	//differently... and I'm trying to do some cleanup, which is more messy
1221:main.c        **** 	//here, because of it. Wee!
1222:main.c        **** 
1223:main.c        **** 	//Actually, it runs adc_startConversion() at the end, so it's no longer
1224:main.c        **** 	//*identical*
1225:main.c        **** 	phd_init();
1226:main.c        **** #endif
1227:main.c        **** 
1228:main.c        **** #if((defined(SEG_TET) && SEG_TET) || (defined(FB_TETRIS) && FB_TETRIS))
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 88


1229:main.c        **** 	tetInit(3);
1230:main.c        **** #endif
1231:main.c        **** 
1232:main.c        **** #if(defined(_DMS_EXTERNALUPDATE_) && _DMS_EXTERNALUPDATE_)
1233:main.c        **** 	//These values could probably be calculated...
1234:main.c        **** 	// (as long as OSCCAL_VAL isn't changed)
1235:main.c        **** 	// But I'm going on the fact, it's refreshing about 8Hz
1236:main.c        **** 	// and there's roughly 768 rows (HSYNC interrupts)
1237:main.c        **** 	// (of course, there's vsync rows, too)
1238:main.c        **** 	// so... that's about .000125s per HSYNC interrupt
1239:main.c        **** 	// or 8000 interrupts per second
1240:main.c        **** 	// Which is roughly 1dms per interrupt...
1241:main.c        **** 	init_dmsExternalUpdate(1,1);
1242:main.c        **** #endif
1243:main.c        **** 
1244:main.c        **** 
1245:main.c        **** 
1246:main.c        **** #if(!defined(PWM_TESTING) || !PWM_TESTING)
1247:main.c        **** 	init_hsyncTimer();
 706               		.stabn	68,0,1247,.LM78-.LFBB10
 707               	.LM78:
 708 0000 00D0      		rcall init_hsyncTimer
1248:main.c        **** #endif
1249:main.c        **** 
1250:main.c        **** 	//This starts pretty late... watch out for WDT
1251:main.c        **** #if(!defined(V6651COMPARE) || !V6651COMPARE)
1252:main.c        **** 	init_heartBeat();
 709               		.stabn	68,0,1252,.LM79-.LFBB10
 710               	.LM79:
 711 0002 00D0      		rcall init_heartBeat
1253:main.c        **** 
1254:main.c        **** 	setHeartRate(0);
 712               		.stabn	68,0,1254,.LM80-.LFBB10
 713               	.LM80:
 714 0004 80E0      		ldi r24,0
 715 0006 00D0      		rcall setHeartRate
1255:main.c        **** #endif
1256:main.c        **** 
1257:main.c        **** 
1258:main.c        **** 
1259:main.c        **** #if(defined(TEST__FLASH) && TEST__FLASH)
1260:main.c        **** 	test__flash();
1261:main.c        **** #endif
1262:main.c        **** 
1263:main.c        **** 
1264:main.c        **** 
1265:main.c        **** 
1266:main.c        **** 
1267:main.c        **** 
1268:main.c        **** 	lvds_timerInit();
 716               		.stabn	68,0,1268,.LM81-.LFBB10
 717               	.LM81:
 718 0008 00D0      		rcall lvds_timerInit
 719               	.L33:
1269:main.c        **** 
1270:main.c        **** 
1271:main.c        **** #if (defined(FB_QUESTION) && FB_QUESTION)
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 89


1272:main.c        ****  #if (defined(BUMP_SWITCH) && BUMP_SWITCH)
1273:main.c        **** 	hitSensor_init();
1274:main.c        ****  #endif
1275:main.c        **** #endif
1276:main.c        **** 
1277:main.c        **** 
1278:main.c        **** 	while(1)
1279:main.c        **** 	{
1280:main.c        **** #if(defined(FB_QUESTION) && FB_QUESTION)
1281:main.c        **** //THIS PROBABLY SHOULD BE REVISED...
1282:main.c        **** //_hitSensors/bumpSwitch.c handles it differently...
1283:main.c        **** #if (!defined(BUMP_SWITCH) || !BUMP_SWITCH)
1284:main.c        **** 
1285:main.c        **** #if(!defined(__HEART_REMOVED__) || !(__HEART_REMOVED__))
1286:main.c        **** #if (defined(PIEZO_HIT_DETECTION) && PIEZO_HIT_DETECTION)
1287:main.c        **** 		if(phd_update())				
1288:main.c        **** #else
1289:main.c        **** 		if(!heartPinInputPoll())
1290:main.c        **** #endif
1291:main.c        **** 			fbQuestion_hitDetected();
1292:main.c        **** #endif
1293:main.c        **** #endif
1294:main.c        **** 
1295:main.c        **** #endif
1296:main.c        **** 
1297:main.c        **** //#if( (defined(FB_QUESTION) && FB_QUESTION) 
1298:main.c        **** //	  ||	(defined(FB_SMILEY) && FB_SMILEY) )
1299:main.c        **** #if( defined(FRAMEBUFFER_TESTING) && (FRAMEBUFFER_TESTING))
1300:main.c        **** 		frameBufferUpdate();
1301:main.c        **** #endif
1302:main.c        **** 
1303:main.c        **** #if(!defined(V6651COMPARE) || !V6651COMPARE)
1304:main.c        **** 		heartUpdate();
 720               		.stabn	68,0,1304,.LM82-.LFBB10
 721               	.LM82:
 722 000a 00D0      		rcall heartUpdate
 723 000c 00C0      		rjmp .L33
 724               		.size	main, .-main
 725               	.Lscope10:
 726               		.stabs	"",36,0,0,.Lscope10-.LFBB10
 727               		.stabd	78,0,0
 728               		.local	lastFrameCount.2085
 729               		.comm	lastFrameCount.2085,1,1
 730               	.global	frameCount
 731               		.section .bss
 732               		.type	frameCount, @object
 733               		.size	frameCount, 1
 734               	frameCount:
 735 0000 00        		.zero	1
 736               	.global	updateFrame
 737               		.data
 738               		.type	updateFrame, @object
 739               		.size	updateFrame, 1
 740               	updateFrame:
 741 0000 01        		.byte	1
 742               	.global	hsyncCount
 743               		.section .bss
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 90


 744               		.type	hsyncCount, @object
 745               		.size	hsyncCount, 2
 746               	hsyncCount:
 747 0001 0000      		.zero	2
 748               	.global	vSync
 749               		.type	vSync, @object
 750               		.size	vSync, 1
 751               	vSync:
 752 0003 00        		.zero	1
 753               	.global	dataEnable
 754               		.type	dataEnable, @object
 755               		.size	dataEnable, 1
 756               	dataEnable:
 757 0004 00        		.zero	1
 758               	.global	characters
 759               		.section	.progmem.data,"a",@progbits
 760               		.type	characters, @object
 761               		.size	characters, 768
 762               	characters:
 763 0000 00        		.byte	0
 764 0001 0C        		.byte	12
 765 0002 36        		.byte	54
 766 0003 36        		.byte	54
 767 0004 0C        		.byte	12
 768 0005 00        		.byte	0
 769 0006 1C        		.byte	28
 770 0007 06        		.byte	6
 771 0008 18        		.byte	24
 772 0009 06        		.byte	6
 773 000a 00        		.byte	0
 774 000b 00        		.byte	0
 775 000c 00        		.byte	0
 776 000d 00        		.byte	0
 777 000e 00        		.byte	0
 778 000f 60        		.byte	96
 779 0010 1E        		.byte	30
 780 0011 0C        		.byte	12
 781 0012 1E        		.byte	30
 782 0013 1E        		.byte	30
 783 0014 38        		.byte	56
 784 0015 3F        		.byte	63
 785 0016 1C        		.byte	28
 786 0017 3F        		.byte	63
 787 0018 1E        		.byte	30
 788 0019 1E        		.byte	30
 789 001a 00        		.byte	0
 790 001b 00        		.byte	0
 791 001c 18        		.byte	24
 792 001d 00        		.byte	0
 793 001e 06        		.byte	6
 794 001f 1E        		.byte	30
 795 0020 3E        		.byte	62
 796 0021 0C        		.byte	12
 797 0022 3F        		.byte	63
 798 0023 3C        		.byte	60
 799 0024 3F        		.byte	63
 800 0025 7F        		.byte	127
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 91


 801 0026 7F        		.byte	127
 802 0027 3C        		.byte	60
 803 0028 33        		.byte	51
 804 0029 1E        		.byte	30
 805 002a 78        		.byte	120
 806 002b 67        		.byte	103
 807 002c 0F        		.byte	15
 808 002d 63        		.byte	99
 809 002e 63        		.byte	99
 810 002f 1C        		.byte	28
 811 0030 3F        		.byte	63
 812 0031 1E        		.byte	30
 813 0032 3F        		.byte	63
 814 0033 1E        		.byte	30
 815 0034 3F        		.byte	63
 816 0035 33        		.byte	51
 817 0036 33        		.byte	51
 818 0037 63        		.byte	99
 819 0038 63        		.byte	99
 820 0039 33        		.byte	51
 821 003a 7F        		.byte	127
 822 003b 1E        		.byte	30
 823 003c 03        		.byte	3
 824 003d 1E        		.byte	30
 825 003e 08        		.byte	8
 826 003f 00        		.byte	0
 827 0040 0C        		.byte	12
 828 0041 00        		.byte	0
 829 0042 07        		.byte	7
 830 0043 00        		.byte	0
 831 0044 38        		.byte	56
 832 0045 00        		.byte	0
 833 0046 1C        		.byte	28
 834 0047 00        		.byte	0
 835 0048 07        		.byte	7
 836 0049 0C        		.byte	12
 837 004a 18        		.byte	24
 838 004b 07        		.byte	7
 839 004c 0E        		.byte	14
 840 004d 00        		.byte	0
 841 004e 00        		.byte	0
 842 004f 00        		.byte	0
 843 0050 00        		.byte	0
 844 0051 00        		.byte	0
 845 0052 00        		.byte	0
 846 0053 00        		.byte	0
 847 0054 08        		.byte	8
 848 0055 00        		.byte	0
 849 0056 00        		.byte	0
 850 0057 00        		.byte	0
 851 0058 00        		.byte	0
 852 0059 00        		.byte	0
 853 005a 00        		.byte	0
 854 005b 38        		.byte	56
 855 005c 18        		.byte	24
 856 005d 07        		.byte	7
 857 005e 6E        		.byte	110
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 92


 858 005f 0E        		.byte	14
 859 0060 00        		.byte	0
 860 0061 1E        		.byte	30
 861 0062 36        		.byte	54
 862 0063 36        		.byte	54
 863 0064 3E        		.byte	62
 864 0065 63        		.byte	99
 865 0066 36        		.byte	54
 866 0067 06        		.byte	6
 867 0068 0C        		.byte	12
 868 0069 0C        		.byte	12
 869 006a 66        		.byte	102
 870 006b 0C        		.byte	12
 871 006c 00        		.byte	0
 872 006d 00        		.byte	0
 873 006e 00        		.byte	0
 874 006f 30        		.byte	48
 875 0070 33        		.byte	51
 876 0071 0F        		.byte	15
 877 0072 33        		.byte	51
 878 0073 33        		.byte	51
 879 0074 3C        		.byte	60
 880 0075 03        		.byte	3
 881 0076 06        		.byte	6
 882 0077 33        		.byte	51
 883 0078 33        		.byte	51
 884 0079 33        		.byte	51
 885 007a 00        		.byte	0
 886 007b 00        		.byte	0
 887 007c 0C        		.byte	12
 888 007d 00        		.byte	0
 889 007e 0C        		.byte	12
 890 007f 33        		.byte	51
 891 0080 63        		.byte	99
 892 0081 1E        		.byte	30
 893 0082 66        		.byte	102
 894 0083 66        		.byte	102
 895 0084 36        		.byte	54
 896 0085 46        		.byte	70
 897 0086 46        		.byte	70
 898 0087 66        		.byte	102
 899 0088 33        		.byte	51
 900 0089 0C        		.byte	12
 901 008a 30        		.byte	48
 902 008b 66        		.byte	102
 903 008c 06        		.byte	6
 904 008d 77        		.byte	119
 905 008e 67        		.byte	103
 906 008f 36        		.byte	54
 907 0090 66        		.byte	102
 908 0091 33        		.byte	51
 909 0092 66        		.byte	102
 910 0093 33        		.byte	51
 911 0094 2D        		.byte	45
 912 0095 33        		.byte	51
 913 0096 33        		.byte	51
 914 0097 63        		.byte	99
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 93


 915 0098 63        		.byte	99
 916 0099 33        		.byte	51
 917 009a 33        		.byte	51
 918 009b 06        		.byte	6
 919 009c 06        		.byte	6
 920 009d 18        		.byte	24
 921 009e 1C        		.byte	28
 922 009f 00        		.byte	0
 923 00a0 0C        		.byte	12
 924 00a1 00        		.byte	0
 925 00a2 06        		.byte	6
 926 00a3 00        		.byte	0
 927 00a4 30        		.byte	48
 928 00a5 00        		.byte	0
 929 00a6 36        		.byte	54
 930 00a7 00        		.byte	0
 931 00a8 06        		.byte	6
 932 00a9 00        		.byte	0
 933 00aa 00        		.byte	0
 934 00ab 06        		.byte	6
 935 00ac 0C        		.byte	12
 936 00ad 00        		.byte	0
 937 00ae 00        		.byte	0
 938 00af 00        		.byte	0
 939 00b0 00        		.byte	0
 940 00b1 00        		.byte	0
 941 00b2 00        		.byte	0
 942 00b3 00        		.byte	0
 943 00b4 0C        		.byte	12
 944 00b5 00        		.byte	0
 945 00b6 00        		.byte	0
 946 00b7 00        		.byte	0
 947 00b8 00        		.byte	0
 948 00b9 00        		.byte	0
 949 00ba 00        		.byte	0
 950 00bb 0C        		.byte	12
 951 00bc 18        		.byte	24
 952 00bd 0C        		.byte	12
 953 00be 3B        		.byte	59
 954 00bf 13        		.byte	19
 955 00c0 00        		.byte	0
 956 00c1 1E        		.byte	30
 957 00c2 36        		.byte	54
 958 00c3 7F        		.byte	127
 959 00c4 03        		.byte	3
 960 00c5 33        		.byte	51
 961 00c6 1C        		.byte	28
 962 00c7 03        		.byte	3
 963 00c8 06        		.byte	6
 964 00c9 18        		.byte	24
 965 00ca 3C        		.byte	60
 966 00cb 0C        		.byte	12
 967 00cc 00        		.byte	0
 968 00cd 00        		.byte	0
 969 00ce 00        		.byte	0
 970 00cf 18        		.byte	24
 971 00d0 3B        		.byte	59
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 94


 972 00d1 0C        		.byte	12
 973 00d2 30        		.byte	48
 974 00d3 30        		.byte	48
 975 00d4 36        		.byte	54
 976 00d5 1F        		.byte	31
 977 00d6 03        		.byte	3
 978 00d7 30        		.byte	48
 979 00d8 33        		.byte	51
 980 00d9 33        		.byte	51
 981 00da 0C        		.byte	12
 982 00db 0C        		.byte	12
 983 00dc 06        		.byte	6
 984 00dd 3F        		.byte	63
 985 00de 18        		.byte	24
 986 00df 30        		.byte	48
 987 00e0 7B        		.byte	123
 988 00e1 33        		.byte	51
 989 00e2 66        		.byte	102
 990 00e3 03        		.byte	3
 991 00e4 66        		.byte	102
 992 00e5 16        		.byte	22
 993 00e6 16        		.byte	22
 994 00e7 03        		.byte	3
 995 00e8 33        		.byte	51
 996 00e9 0C        		.byte	12
 997 00ea 30        		.byte	48
 998 00eb 36        		.byte	54
 999 00ec 06        		.byte	6
 1000 00ed 7F        		.byte	127
 1001 00ee 6F        		.byte	111
 1002 00ef 63        		.byte	99
 1003 00f0 66        		.byte	102
 1004 00f1 33        		.byte	51
 1005 00f2 66        		.byte	102
 1006 00f3 07        		.byte	7
 1007 00f4 0C        		.byte	12
 1008 00f5 33        		.byte	51
 1009 00f6 33        		.byte	51
 1010 00f7 63        		.byte	99
 1011 00f8 36        		.byte	54
 1012 00f9 33        		.byte	51
 1013 00fa 19        		.byte	25
 1014 00fb 06        		.byte	6
 1015 00fc 0C        		.byte	12
 1016 00fd 18        		.byte	24
 1017 00fe 36        		.byte	54
 1018 00ff 00        		.byte	0
 1019 0100 18        		.byte	24
 1020 0101 1E        		.byte	30
 1021 0102 3E        		.byte	62
 1022 0103 1E        		.byte	30
 1023 0104 30        		.byte	48
 1024 0105 1E        		.byte	30
 1025 0106 06        		.byte	6
 1026 0107 6E        		.byte	110
 1027 0108 36        		.byte	54
 1028 0109 0E        		.byte	14
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 95


 1029 010a 1E        		.byte	30
 1030 010b 66        		.byte	102
 1031 010c 0C        		.byte	12
 1032 010d 37        		.byte	55
 1033 010e 1F        		.byte	31
 1034 010f 1E        		.byte	30
 1035 0110 3B        		.byte	59
 1036 0111 6E        		.byte	110
 1037 0112 1B        		.byte	27
 1038 0113 3E        		.byte	62
 1039 0114 3E        		.byte	62
 1040 0115 33        		.byte	51
 1041 0116 33        		.byte	51
 1042 0117 63        		.byte	99
 1043 0118 63        		.byte	99
 1044 0119 33        		.byte	51
 1045 011a 3F        		.byte	63
 1046 011b 0C        		.byte	12
 1047 011c 18        		.byte	24
 1048 011d 0C        		.byte	12
 1049 011e 00        		.byte	0
 1050 011f 39        		.byte	57
 1051 0120 00        		.byte	0
 1052 0121 0C        		.byte	12
 1053 0122 00        		.byte	0
 1054 0123 36        		.byte	54
 1055 0124 1E        		.byte	30
 1056 0125 18        		.byte	24
 1057 0126 6E        		.byte	110
 1058 0127 00        		.byte	0
 1059 0128 06        		.byte	6
 1060 0129 18        		.byte	24
 1061 012a FF        		.byte	-1
 1062 012b 3F        		.byte	63
 1063 012c 00        		.byte	0
 1064 012d 3F        		.byte	63
 1065 012e 00        		.byte	0
 1066 012f 0C        		.byte	12
 1067 0130 3F        		.byte	63
 1068 0131 0C        		.byte	12
 1069 0132 1C        		.byte	28
 1070 0133 1C        		.byte	28
 1071 0134 33        		.byte	51
 1072 0135 30        		.byte	48
 1073 0136 1F        		.byte	31
 1074 0137 18        		.byte	24
 1075 0138 1E        		.byte	30
 1076 0139 3E        		.byte	62
 1077 013a 0C        		.byte	12
 1078 013b 0C        		.byte	12
 1079 013c 03        		.byte	3
 1080 013d 00        		.byte	0
 1081 013e 30        		.byte	48
 1082 013f 18        		.byte	24
 1083 0140 7B        		.byte	123
 1084 0141 33        		.byte	51
 1085 0142 3E        		.byte	62
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 96


 1086 0143 03        		.byte	3
 1087 0144 66        		.byte	102
 1088 0145 1E        		.byte	30
 1089 0146 1E        		.byte	30
 1090 0147 03        		.byte	3
 1091 0148 3F        		.byte	63
 1092 0149 0C        		.byte	12
 1093 014a 30        		.byte	48
 1094 014b 1E        		.byte	30
 1095 014c 06        		.byte	6
 1096 014d 6B        		.byte	107
 1097 014e 7B        		.byte	123
 1098 014f 63        		.byte	99
 1099 0150 3E        		.byte	62
 1100 0151 33        		.byte	51
 1101 0152 3E        		.byte	62
 1102 0153 1C        		.byte	28
 1103 0154 0C        		.byte	12
 1104 0155 33        		.byte	51
 1105 0156 33        		.byte	51
 1106 0157 6B        		.byte	107
 1107 0158 1C        		.byte	28
 1108 0159 1E        		.byte	30
 1109 015a 0C        		.byte	12
 1110 015b 06        		.byte	6
 1111 015c 18        		.byte	24
 1112 015d 18        		.byte	24
 1113 015e 63        		.byte	99
 1114 015f 00        		.byte	0
 1115 0160 00        		.byte	0
 1116 0161 30        		.byte	48
 1117 0162 66        		.byte	102
 1118 0163 33        		.byte	51
 1119 0164 3E        		.byte	62
 1120 0165 33        		.byte	51
 1121 0166 0F        		.byte	15
 1122 0167 33        		.byte	51
 1123 0168 6E        		.byte	110
 1124 0169 0C        		.byte	12
 1125 016a 18        		.byte	24
 1126 016b 36        		.byte	54
 1127 016c 0C        		.byte	12
 1128 016d 7F        		.byte	127
 1129 016e 33        		.byte	51
 1130 016f 33        		.byte	51
 1131 0170 66        		.byte	102
 1132 0171 33        		.byte	51
 1133 0172 36        		.byte	54
 1134 0173 03        		.byte	3
 1135 0174 0C        		.byte	12
 1136 0175 33        		.byte	51
 1137 0176 33        		.byte	51
 1138 0177 63        		.byte	99
 1139 0178 36        		.byte	54
 1140 0179 33        		.byte	51
 1141 017a 19        		.byte	25
 1142 017b 07        		.byte	7
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 97


 1143 017c 00        		.byte	0
 1144 017d 38        		.byte	56
 1145 017e 00        		.byte	0
 1146 017f 69        		.byte	105
 1147 0180 00        		.byte	0
 1148 0181 0C        		.byte	12
 1149 0182 00        		.byte	0
 1150 0183 7F        		.byte	127
 1151 0184 30        		.byte	48
 1152 0185 0C        		.byte	12
 1153 0186 3B        		.byte	59
 1154 0187 00        		.byte	0
 1155 0188 06        		.byte	6
 1156 0189 18        		.byte	24
 1157 018a 3C        		.byte	60
 1158 018b 0C        		.byte	12
 1159 018c 00        		.byte	0
 1160 018d 00        		.byte	0
 1161 018e 00        		.byte	0
 1162 018f 06        		.byte	6
 1163 0190 37        		.byte	55
 1164 0191 0C        		.byte	12
 1165 0192 06        		.byte	6
 1166 0193 30        		.byte	48
 1167 0194 7F        		.byte	127
 1168 0195 30        		.byte	48
 1169 0196 33        		.byte	51
 1170 0197 0C        		.byte	12
 1171 0198 33        		.byte	51
 1172 0199 30        		.byte	48
 1173 019a 00        		.byte	0
 1174 019b 00        		.byte	0
 1175 019c 06        		.byte	6
 1176 019d 3F        		.byte	63
 1177 019e 18        		.byte	24
 1178 019f 0C        		.byte	12
 1179 01a0 7B        		.byte	123
 1180 01a1 3F        		.byte	63
 1181 01a2 66        		.byte	102
 1182 01a3 03        		.byte	3
 1183 01a4 66        		.byte	102
 1184 01a5 16        		.byte	22
 1185 01a6 16        		.byte	22
 1186 01a7 73        		.byte	115
 1187 01a8 33        		.byte	51
 1188 01a9 0C        		.byte	12
 1189 01aa 33        		.byte	51
 1190 01ab 36        		.byte	54
 1191 01ac 46        		.byte	70
 1192 01ad 63        		.byte	99
 1193 01ae 73        		.byte	115
 1194 01af 63        		.byte	99
 1195 01b0 06        		.byte	6
 1196 01b1 3B        		.byte	59
 1197 01b2 1E        		.byte	30
 1198 01b3 38        		.byte	56
 1199 01b4 0C        		.byte	12
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 98


 1200 01b5 33        		.byte	51
 1201 01b6 33        		.byte	51
 1202 01b7 7F        		.byte	127
 1203 01b8 36        		.byte	54
 1204 01b9 0C        		.byte	12
 1205 01ba 46        		.byte	70
 1206 01bb 06        		.byte	6
 1207 01bc 30        		.byte	48
 1208 01bd 18        		.byte	24
 1209 01be 00        		.byte	0
 1210 01bf 00        		.byte	0
 1211 01c0 00        		.byte	0
 1212 01c1 3E        		.byte	62
 1213 01c2 66        		.byte	102
 1214 01c3 03        		.byte	3
 1215 01c4 33        		.byte	51
 1216 01c5 3F        		.byte	63
 1217 01c6 06        		.byte	6
 1218 01c7 33        		.byte	51
 1219 01c8 66        		.byte	102
 1220 01c9 0C        		.byte	12
 1221 01ca 18        		.byte	24
 1222 01cb 1E        		.byte	30
 1223 01cc 0C        		.byte	12
 1224 01cd 6B        		.byte	107
 1225 01ce 33        		.byte	51
 1226 01cf 33        		.byte	51
 1227 01d0 66        		.byte	102
 1228 01d1 33        		.byte	51
 1229 01d2 36        		.byte	54
 1230 01d3 1E        		.byte	30
 1231 01d4 0C        		.byte	12
 1232 01d5 33        		.byte	51
 1233 01d6 33        		.byte	51
 1234 01d7 6B        		.byte	107
 1235 01d8 1C        		.byte	28
 1236 01d9 33        		.byte	51
 1237 01da 0C        		.byte	12
 1238 01db 0C        		.byte	12
 1239 01dc 18        		.byte	24
 1240 01dd 0C        		.byte	12
 1241 01de 00        		.byte	0
 1242 01df 0E        		.byte	14
 1243 01e0 00        		.byte	0
 1244 01e1 00        		.byte	0
 1245 01e2 00        		.byte	0
 1246 01e3 36        		.byte	54
 1247 01e4 1F        		.byte	31
 1248 01e5 66        		.byte	102
 1249 01e6 33        		.byte	51
 1250 01e7 00        		.byte	0
 1251 01e8 0C        		.byte	12
 1252 01e9 0C        		.byte	12
 1253 01ea 66        		.byte	102
 1254 01eb 0C        		.byte	12
 1255 01ec 0E        		.byte	14
 1256 01ed 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 99


 1257 01ee 0C        		.byte	12
 1258 01ef 03        		.byte	3
 1259 01f0 33        		.byte	51
 1260 01f1 0C        		.byte	12
 1261 01f2 33        		.byte	51
 1262 01f3 33        		.byte	51
 1263 01f4 30        		.byte	48
 1264 01f5 33        		.byte	51
 1265 01f6 33        		.byte	51
 1266 01f7 06        		.byte	6
 1267 01f8 33        		.byte	51
 1268 01f9 18        		.byte	24
 1269 01fa 0C        		.byte	12
 1270 01fb 0E        		.byte	14
 1271 01fc 0C        		.byte	12
 1272 01fd 00        		.byte	0
 1273 01fe 0C        		.byte	12
 1274 01ff 00        		.byte	0
 1275 0200 03        		.byte	3
 1276 0201 33        		.byte	51
 1277 0202 66        		.byte	102
 1278 0203 66        		.byte	102
 1279 0204 36        		.byte	54
 1280 0205 46        		.byte	70
 1281 0206 06        		.byte	6
 1282 0207 66        		.byte	102
 1283 0208 33        		.byte	51
 1284 0209 0C        		.byte	12
 1285 020a 33        		.byte	51
 1286 020b 66        		.byte	102
 1287 020c 66        		.byte	102
 1288 020d 63        		.byte	99
 1289 020e 63        		.byte	99
 1290 020f 36        		.byte	54
 1291 0210 06        		.byte	6
 1292 0211 1E        		.byte	30
 1293 0212 36        		.byte	54
 1294 0213 33        		.byte	51
 1295 0214 0C        		.byte	12
 1296 0215 33        		.byte	51
 1297 0216 1E        		.byte	30
 1298 0217 77        		.byte	119
 1299 0218 63        		.byte	99
 1300 0219 0C        		.byte	12
 1301 021a 63        		.byte	99
 1302 021b 06        		.byte	6
 1303 021c 60        		.byte	96
 1304 021d 18        		.byte	24
 1305 021e 00        		.byte	0
 1306 021f 00        		.byte	0
 1307 0220 00        		.byte	0
 1308 0221 33        		.byte	51
 1309 0222 66        		.byte	102
 1310 0223 33        		.byte	51
 1311 0224 33        		.byte	51
 1312 0225 03        		.byte	3
 1313 0226 06        		.byte	6
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 100


 1314 0227 3E        		.byte	62
 1315 0228 66        		.byte	102
 1316 0229 0C        		.byte	12
 1317 022a 18        		.byte	24
 1318 022b 36        		.byte	54
 1319 022c 0C        		.byte	12
 1320 022d 63        		.byte	99
 1321 022e 33        		.byte	51
 1322 022f 33        		.byte	51
 1323 0230 3E        		.byte	62
 1324 0231 3E        		.byte	62
 1325 0232 06        		.byte	6
 1326 0233 30        		.byte	48
 1327 0234 2C        		.byte	44
 1328 0235 33        		.byte	51
 1329 0236 1E        		.byte	30
 1330 0237 7F        		.byte	127
 1331 0238 36        		.byte	54
 1332 0239 3E        		.byte	62
 1333 023a 26        		.byte	38
 1334 023b 0C        		.byte	12
 1335 023c 18        		.byte	24
 1336 023d 0C        		.byte	12
 1337 023e 00        		.byte	0
 1338 023f F3        		.byte	-13
 1339 0240 00        		.byte	0
 1340 0241 0C        		.byte	12
 1341 0242 00        		.byte	0
 1342 0243 36        		.byte	54
 1343 0244 0C        		.byte	12
 1344 0245 63        		.byte	99
 1345 0246 6E        		.byte	110
 1346 0247 00        		.byte	0
 1347 0248 18        		.byte	24
 1348 0249 06        		.byte	6
 1349 024a 00        		.byte	0
 1350 024b 00        		.byte	0
 1351 024c 0C        		.byte	12
 1352 024d 00        		.byte	0
 1353 024e 0C        		.byte	12
 1354 024f 01        		.byte	1
 1355 0250 1E        		.byte	30
 1356 0251 3F        		.byte	63
 1357 0252 3F        		.byte	63
 1358 0253 1E        		.byte	30
 1359 0254 30        		.byte	48
 1360 0255 1E        		.byte	30
 1361 0256 1E        		.byte	30
 1362 0257 06        		.byte	6
 1363 0258 1E        		.byte	30
 1364 0259 0E        		.byte	14
 1365 025a 0C        		.byte	12
 1366 025b 0C        		.byte	12
 1367 025c 18        		.byte	24
 1368 025d 00        		.byte	0
 1369 025e 06        		.byte	6
 1370 025f 0C        		.byte	12
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 101


 1371 0260 1E        		.byte	30
 1372 0261 33        		.byte	51
 1373 0262 3F        		.byte	63
 1374 0263 3C        		.byte	60
 1375 0264 3F        		.byte	63
 1376 0265 7F        		.byte	127
 1377 0266 0F        		.byte	15
 1378 0267 7C        		.byte	124
 1379 0268 33        		.byte	51
 1380 0269 1E        		.byte	30
 1381 026a 1E        		.byte	30
 1382 026b 67        		.byte	103
 1383 026c 7F        		.byte	127
 1384 026d 63        		.byte	99
 1385 026e 63        		.byte	99
 1386 026f 1C        		.byte	28
 1387 0270 0F        		.byte	15
 1388 0271 38        		.byte	56
 1389 0272 67        		.byte	103
 1390 0273 1E        		.byte	30
 1391 0274 1E        		.byte	30
 1392 0275 3F        		.byte	63
 1393 0276 0C        		.byte	12
 1394 0277 63        		.byte	99
 1395 0278 63        		.byte	99
 1396 0279 1E        		.byte	30
 1397 027a 7F        		.byte	127
 1398 027b 1E        		.byte	30
 1399 027c 40        		.byte	64
 1400 027d 1E        		.byte	30
 1401 027e 00        		.byte	0
 1402 027f 00        		.byte	0
 1403 0280 00        		.byte	0
 1404 0281 6E        		.byte	110
 1405 0282 3D        		.byte	61
 1406 0283 1E        		.byte	30
 1407 0284 6E        		.byte	110
 1408 0285 1E        		.byte	30
 1409 0286 0F        		.byte	15
 1410 0287 30        		.byte	48
 1411 0288 67        		.byte	103
 1412 0289 1E        		.byte	30
 1413 028a 1B        		.byte	27
 1414 028b 67        		.byte	103
 1415 028c 1E        		.byte	30
 1416 028d 63        		.byte	99
 1417 028e 33        		.byte	51
 1418 028f 1E        		.byte	30
 1419 0290 06        		.byte	6
 1420 0291 30        		.byte	48
 1421 0292 0F        		.byte	15
 1422 0293 1F        		.byte	31
 1423 0294 18        		.byte	24
 1424 0295 6E        		.byte	110
 1425 0296 0C        		.byte	12
 1426 0297 36        		.byte	54
 1427 0298 63        		.byte	99
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 102


 1428 0299 30        		.byte	48
 1429 029a 3F        		.byte	63
 1430 029b 38        		.byte	56
 1431 029c 18        		.byte	24
 1432 029d 07        		.byte	7
 1433 029e 00        		.byte	0
 1434 029f 46        		.byte	70
 1435 02a0 00        		.byte	0
 1436 02a1 00        		.byte	0
 1437 02a2 00        		.byte	0
 1438 02a3 00        		.byte	0
 1439 02a4 00        		.byte	0
 1440 02a5 00        		.byte	0
 1441 02a6 00        		.byte	0
 1442 02a7 00        		.byte	0
 1443 02a8 00        		.byte	0
 1444 02a9 00        		.byte	0
 1445 02aa 00        		.byte	0
 1446 02ab 00        		.byte	0
 1447 02ac 06        		.byte	6
 1448 02ad 00        		.byte	0
 1449 02ae 00        		.byte	0
 1450 02af 00        		.byte	0
 1451 02b0 00        		.byte	0
 1452 02b1 00        		.byte	0
 1453 02b2 00        		.byte	0
 1454 02b3 00        		.byte	0
 1455 02b4 00        		.byte	0
 1456 02b5 00        		.byte	0
 1457 02b6 00        		.byte	0
 1458 02b7 00        		.byte	0
 1459 02b8 00        		.byte	0
 1460 02b9 00        		.byte	0
 1461 02ba 00        		.byte	0
 1462 02bb 06        		.byte	6
 1463 02bc 00        		.byte	0
 1464 02bd 00        		.byte	0
 1465 02be 00        		.byte	0
 1466 02bf 00        		.byte	0
 1467 02c0 00        		.byte	0
 1468 02c1 00        		.byte	0
 1469 02c2 00        		.byte	0
 1470 02c3 00        		.byte	0
 1471 02c4 00        		.byte	0
 1472 02c5 00        		.byte	0
 1473 02c6 00        		.byte	0
 1474 02c7 00        		.byte	0
 1475 02c8 00        		.byte	0
 1476 02c9 00        		.byte	0
 1477 02ca 00        		.byte	0
 1478 02cb 00        		.byte	0
 1479 02cc 00        		.byte	0
 1480 02cd 00        		.byte	0
 1481 02ce 00        		.byte	0
 1482 02cf 00        		.byte	0
 1483 02d0 00        		.byte	0
 1484 02d1 00        		.byte	0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 103


 1485 02d2 00        		.byte	0
 1486 02d3 00        		.byte	0
 1487 02d4 00        		.byte	0
 1488 02d5 00        		.byte	0
 1489 02d6 00        		.byte	0
 1490 02d7 00        		.byte	0
 1491 02d8 00        		.byte	0
 1492 02d9 00        		.byte	0
 1493 02da 00        		.byte	0
 1494 02db 00        		.byte	0
 1495 02dc 00        		.byte	0
 1496 02dd 00        		.byte	0
 1497 02de 00        		.byte	0
 1498 02df FF        		.byte	-1
 1499 02e0 00        		.byte	0
 1500 02e1 00        		.byte	0
 1501 02e2 00        		.byte	0
 1502 02e3 00        		.byte	0
 1503 02e4 00        		.byte	0
 1504 02e5 00        		.byte	0
 1505 02e6 00        		.byte	0
 1506 02e7 1F        		.byte	31
 1507 02e8 00        		.byte	0
 1508 02e9 00        		.byte	0
 1509 02ea 0E        		.byte	14
 1510 02eb 00        		.byte	0
 1511 02ec 00        		.byte	0
 1512 02ed 00        		.byte	0
 1513 02ee 00        		.byte	0
 1514 02ef 00        		.byte	0
 1515 02f0 0F        		.byte	15
 1516 02f1 78        		.byte	120
 1517 02f2 00        		.byte	0
 1518 02f3 00        		.byte	0
 1519 02f4 00        		.byte	0
 1520 02f5 00        		.byte	0
 1521 02f6 00        		.byte	0
 1522 02f7 00        		.byte	0
 1523 02f8 00        		.byte	0
 1524 02f9 1F        		.byte	31
 1525 02fa 00        		.byte	0
 1526 02fb 00        		.byte	0
 1527 02fc 00        		.byte	0
 1528 02fd 00        		.byte	0
 1529 02fe 00        		.byte	0
 1530 02ff F4        		.byte	-12
 1531               	.global	header
 1532               		.type	header, @object
 1533               		.size	header, 36
 1534               	header:
 1535 0300 4C43 4464 		.string	"LCDdirectLVDS94 2014-07-12 06:52:40"
 1535      6972 6563 
 1535      744C 5644 
 1535      5339 3420 
 1535      3230 3134 
 1536               		.stabs	"header:G(0,48)=ar(0,49)=r(0,49);0;0177777;;0;35;(0,50)=k(4,2)",32,0,12,0
 1537               		.stabs	"characters:G(0,51)=ar(0,49);0;7;(0,52)=ar(0,49);0;95;(0,50)",32,0,40,0
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 104


 1538               		.stabs	"dataEnable:G(0,53)=B(4,2)",32,0,1045,0
 1539               		.stabs	"vSync:G(0,53)",32,0,1046,0
 1540               		.stabs	"hsyncCount:G(0,54)=B(4,4)",32,0,1047,0
 1541               		.stabs	"updateFrame:G(0,53)",32,0,421,0
 1542               		.stabs	"frameCount:G(0,53)",32,0,422,0
 1543               		.text
 1544               		.stabs	"",100,0,0,.Letext0
 1545               	.Letext0:
 1546               		.ident	"GCC: (GNU) 4.8.2"
 1547               	.global __do_copy_data
 1548               	.global __do_clear_bss
GAS LISTING /var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s 			page 105


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:2      *ABS*:0000003e __SP_H__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:3      *ABS*:0000003d __SP_L__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:4      *ABS*:0000003f __SREG__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:5      *ABS*:00000000 __tmp_reg__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:6      *ABS*:00000001 __zero_reg__
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:140    .text:00000000 pll_enable
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:200    .text:00000024 lvds_timerInit
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:291    .text:00000072 lcd_init
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:751    .bss:00000003 vSync
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:746    .bss:00000001 hsyncCount
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:756    .bss:00000004 dataEnable
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:327    .text:0000008c drawPix
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:376    .text:000000a2 lcd_update
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:520    .text:0000014a restartFrameUpdate
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:740    .data:00000000 updateFrame
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:543    .text:00000152 __vector_14
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:734    .bss:00000000 frameCount
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:618    .text:000001b2 init_hsyncTimer
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:656    .text:000001ca isNewFrame
                             .bss:00000005 lastFrameCount.2085
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:697    .text.startup:00000000 main
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:762    .progmem.data:00000000 characters
/var/folders/yG/yGnXnnFGGj4hKA71DL26EU+++TI/-Tmp-//cciiF9QE.s:1534   .progmem.data:00000300 header

UNDEFINED SYMBOLS
tcnter_overflowUpdate
timer_setWGM
timer_selectDivisor
timer_compareMatchIntSetup
init_heartBeat
setHeartRate
heartUpdate
__do_copy_data
__do_clear_bss
